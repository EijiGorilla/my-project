import{e3 as E,fx as j,ej as u,e4 as $,fy as _,fz as m,fA as h,av as tn,fB as O,fC as rn,e8 as an,e5 as k,fD as on,fE as I,fF as T,fG as cn,eW as l,e1 as un,eX as p,fH as fn,fI as F,fJ as a,fK as P,fL as M,fM as gn,fN as K,fO as bn,fP as ln,bc as pn,fQ as dn,fR as z,dT as S,fS as In,fT as mn,fU as hn,fV as Nn,fW as Pn,fX as Mn,fY as Tn,fZ as L,f_ as vn,es as U}from"./index-DcRZY5kx.js";const x=()=>tn.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");function N(n=sn){return{plane:j(n.plane),origin:$(n.origin),basis1:$(n.basis1),basis2:$(n.basis2)}}function wn(n,i,e){const s=Kn.get();return s.origin=n,s.basis1=i,s.basis2=e,s.plane=rn(0,0,0,0),y(s),s}function w(n,i=N()){return B(n.origin,n.basis1,n.basis2,i)}function yn(n,i){u(i.origin,n.origin),u(i.basis1,n.basis1),u(i.basis2,n.basis2),mn(i.plane,n.plane)}function B(n,i,e,s=N()){return u(s.origin,n),u(s.basis1,i),u(s.basis2,e),y(s),Cn(s,"fromValues()"),s}function y(n){_(n.basis2,n.basis1,n.origin,n.plane)}function H(n,i,e){n!==e&&w(n,e);const s=l(a.get(),b(n),i);return p(e.origin,e.origin,s),e.plane[3]-=i,e}function An(n,i,e){return X(i,e),H(e,q(n,n.origin),e),e}function En(n,i){const e=n.basis1[0],s=n.basis2[1],[t,r]=n.origin;return pn(t-e,r-s,t+e,r+s,i)}function X(n,i=N()){const e=(n[2]-n[0])/2,s=(n[3]-n[1])/2;return M(i.origin,n[0]+e,n[1]+s,0),M(i.basis1,e,0,0),M(i.basis2,0,s,0),dn(0,0,1,0,i.plane),i}function R(n,i,e){return!!ln(n.plane,i,e)&&nn(n,e)}function $n(n,i,e){if(R(n,i,e))return e;const s=D(n,i,a.get());return p(e,i.origin,l(a.get(),i.direction,bn(i.origin,s)/h(i.direction))),e}function D(n,i,e){const s=v.get();en(n,i,s,v.get());let t=Number.POSITIVE_INFINITY;for(const r of G){const o=C(n,r,A.get()),f=a.get();if(hn(s,o,f)){const c=Nn(a.get(),i.origin,f),g=Math.abs(Pn(m(i.direction,c)));g<t&&(t=g,u(e,f))}}return t===Number.POSITIVE_INFINITY?J(n,i,e):e}function Sn(n,i){return(i-n)/i}function J(n,i,e){if(R(n,i,e))return e;const s=v.get(),t=v.get();en(n,i,s,t);let r=Number.POSITIVE_INFINITY;for(const o of G){const f=C(n,o,A.get()),c=a.get();if(Mn(s,f,c)){const g=Tn(i,c);if(!z(t,c))continue;g<r&&(r=g,u(e,c))}}return Y(n,i.origin)<r&&Q(n,i.origin,e),e}function Q(n,i,e){const s=gn(n.plane,i,a.get()),t=K(W(n,n.basis1),s,-1,1,a.get()),r=K(W(n,n.basis2),s,-1,1,a.get());return F(e,p(a.get(),t,r),n.origin),e}function Z(n,i,e){const{origin:s,basis1:t,basis2:r}=n,o=F(a.get(),i,s),f=P(t,o),c=P(r,o),g=P(b(n),o);return M(e,f,c,g)}function Y(n,i){const e=Z(n,i,a.get()),{basis1:s,basis2:t}=n,r=h(s),o=h(t),f=Math.max(Math.abs(e[0])-r,0),c=Math.max(Math.abs(e[1])-o,0),g=e[2];return f*f+c*c+g*g}function xn(n,i){return Math.sqrt(Y(n,i))}function Vn(n,i){let e=Number.NEGATIVE_INFINITY;for(const s of G){const t=C(n,s,A.get()),r=In(t,i);r>e&&(e=r)}return Math.sqrt(e)}function _n(n,i){return z(n.plane,i)&&nn(n,i)}function jn(n,i,e,s){return qn(n,e,s)}function q(n,i){const e=-n.plane[3];return P(b(n),i)-e}function On(n,i,e,s){const t=q(n,i),r=l(Gn,b(n),e-t);return p(s,i,r),s}function Fn(n,i){return S(n.basis1,i.basis1)&&S(n.basis2,i.basis2)&&S(n.origin,i.origin)}function Rn(n,i,e){return n!==e&&w(n,e),an(d,i),on(d,d),I(e.basis1,n.basis1,d),I(e.basis2,n.basis2,d),I(T(e.plane),T(n.plane),d),I(e.origin,n.origin,i),cn(e.plane,e.plane,e.origin),e}function Yn(n,i,e,s){return n!==s&&w(n,s),fn(V,i,e),I(s.basis1,n.basis1,V),I(s.basis2,n.basis2,V),y(s),s}function b(n){return T(n.plane)}function qn(n,i,e){switch(i){case 0:u(e,n.basis1),U(e,e);break;case 1:u(e,n.basis2),U(e,e);break;case 2:u(e,b(n))}return e}function nn(n,i){const e=F(a.get(),i,n.origin),s=L(n.basis1),t=L(n.basis2),r=m(n.basis1,e),o=m(n.basis2,e);return-r-s<0&&r-s<0&&-o-t<0&&o-t<0}function W(n,i){const e=A.get();return u(e.origin,n.origin),u(e.vector,i),e}function C(n,i,e){const{basis1:s,basis2:t,origin:r}=n,o=l(a.get(),s,i.origin[0]),f=l(a.get(),t,i.origin[1]);p(e.origin,o,f),p(e.origin,e.origin,r);const c=l(a.get(),s,i.direction[0]),g=l(a.get(),t,i.direction[1]);return l(e.vector,p(c,c,g),2),e}function Cn(n,i){Math.abs(m(n.basis1,n.basis2)/(h(n.basis1)*h(n.basis2)))>1e-6&&x().warn(i,"Provided basis vectors are not perpendicular"),Math.abs(m(n.basis1,b(n)))>1e-6&&x().warn(i,"Basis vectors and plane normal are not perpendicular"),Math.abs(-m(b(n),n.origin)-n.plane[3])>1e-6&&x().warn(i,"Plane offset is not consistent with plane origin")}function en(n,i,e,s){const t=b(n);_(t,i.direction,i.origin,e),_(T(e),t,i.origin,s)}const sn={plane:j(),origin:E(0,0,0),basis1:E(1,0,0),basis2:E(0,1,0)},v=new O(j),A=new O(vn),Gn=un(),Kn=new O(()=>N()),G=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],d=k(),V=k(),Un=Object.freeze(Object.defineProperty({__proto__:null,altitudeAt:q,axisAt:jn,cameraFrustumCoverage:Sn,closestPoint:J,closestPointOnSilhouette:D,copy:w,copyWithoutVerify:yn,create:N,distance:xn,distance2:Y,distanceToSilhouette:Vn,elevate:H,equals:Fn,extrusionContainsPoint:_n,fromAABoundingRect:X,fromValues:B,getExtent:En,intersectRay:R,intersectRayClosestSilhouette:$n,normal:b,projectPoint:Q,projectPointLocal:Z,rotate:Yn,setAltitudeAt:On,setExtent:An,transform:Rn,up:sn,updateUnboundedPlane:y,wrap:wn},Symbol.toStringTag,{value:"Module"}));export{Un as E,w as G,B as H,y as J,X as Z,xn as a,N as z};
