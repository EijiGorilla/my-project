import{iO as x,iN as S,iX as P,fi as y,jt as j,jo as E,jp as G,aj as T,iU as v,iT as w,ju as _,iV as C,iW as D,fo as X,i_ as q,j2 as L,fq as O}from"./index-DWB-5FUE.js";import{w as Y}from"./OperatorShapePreservingLength-B2ybAPWS.js";class N{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(t,r,u){return!1}canAccelerateGeometry(t){return!1}execute(t,r,u,s){if(u===4)return new Y().execute(t,r,s);if(r.getCoordinateSystemType()===0&&x(""),S(t),t.isEmpty()||t.getDimension()<1)return 0;const o=r.getGCS(),n=P();o.querySpheroidData(n);const c=n.majorSemiAxis,g=n.e2,l=o.getUnit().getUnitToBaseFactor();let e;const a=t.getGeometryType();if(a===y.enumPolygon?e=t.getBoundary():a===y.enumEnvelope?e=j(t):E(a)?(e=new G({vd:t.getDescription()}),e.addSegment(t,!0)):e=t,e.hasNonLinearSegments()&&(e=new T().execute(e,0,r.getTolerance(0),0,s)),o!==r){const i=r.getSRToGCSTransform();if(r.isPannable()){e=v(e,r),a===y.enumPolyline&&e===t&&(e=t.clone());const d=new w;r.getPannableExtent().queryIntervalX(d);for(let m=0,h=e.getPointCount();m<h;m++){const f=e.getXY(m);f.x=_(f.x,d),e.setXY(m,f)}}const p=e.createInstance();e=D(i,e,p,s)?p:new C().execute(e,i,s)}return this._ExecuteMultiPathGeodeticLength(e,u,c,g,l)}_ExecuteMultiPathGeodeticLength(t,r,u,s,o){const n={stack:[],error:void 0,hasError:!1};try{const c=X(n,new q,!1);let g=0;const l=t.querySegmentIterator();for(;l.nextPath();)for(;l.hasNextSegment();){const e=l.nextSegment(),a=e.getStartXY(),i=e.getEndXY();a.scale(o),i.scale(o),L.geodeticDistance(u,s,a.x,a.y,i.x,i.y,c,null,null,r),g+=c.val}return g}catch(c){n.error=c,n.hasError=!0}finally{O(n)}}}export{N as OperatorGeodeticLength};
