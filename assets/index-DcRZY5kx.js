const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/statsWorker-DnoeSfDz.js","assets/utils-B7bZr6Tt.js","assets/quantizationUtils-BanaMmKH.js","assets/utils-4LiGI3Sl.js","assets/utils-bFtu5BcH.js","assets/ClassBreaksDefinition-DEgS4PBA.js","assets/geometryEngineWorker-BkMQzpX8.js","assets/geometryEngineJSON-B_JiqPb-.js","assets/geometryEngineBase-BQTefT4Y.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/CSVSourceWorker-CpmVWq1C.js","assets/date-DCujAECq.js","assets/OptimizedFeature-CR1MJhZw.js","assets/memoryEstimations-BPy2xfR4.js","assets/FeatureStore-BqocjbvJ.js","assets/featureConversionUtils-Bxud40-G.js","assets/OptimizedFeatureSet-BR8EEvDc.js","assets/BoundsStore-5e0ijLSu.js","assets/PooledRBush-DnY63dZ6.js","assets/timeSupport-CikCUVmP.js","assets/queryUtils-CbmsJhMj.js","assets/optimizedFeatureQueryEngineAdapter-ByPZH2jK.js","assets/QueryEngine-CB-9ide3.js","assets/WhereClauseCache-6_hUT_97.js","assets/WhereClause-CHwqKUUB.js","assets/QueryEngineCapabilities-DJC_YILC.js","assets/SnappingCandidate-DGkpYqI6.js","assets/FixedIntervalBinParameters-DdU0SlGI.js","assets/number-EnJj07aK.js","assets/locationUtils-DQdyHmZi.js","assets/clientSideDefaults-DNT0-rXc.js","assets/EdgeProcessingWorker-BvbiiJKf.js","assets/workerHelper-C4Z2OMuo.js","assets/InterleavedLayout-BRE52VHV.js","assets/BufferView-BkGwg0rw.js","assets/types-BKo2foNY.js","assets/VertexElementDescriptor-BLyltQyJ.js","assets/VertexAttributeLocations-BfZbt_DV.js","assets/edgeProcessing-BnJ2OdPr.js","assets/deduplicate-Beepl_rs.js","assets/Indices-DfQUWp03.js","assets/Normals-Bdw8W7ov.js","assets/ElevationSamplerWorker-Dwd3yYlv.js","assets/MeshLocalVertexSpace-CN9tNVoJ.js","assets/vertexSpaceConversion-C9ilVG0y.js","assets/meshVertexSpaceUtils-Dta9Id-h.js","assets/vec3-DNB5nu_m.js","assets/vec4-Cu0nLNCs.js","assets/FeatureServiceSnappingSourceWorker-BwaTqR-6.js","assets/symbologySnappingCandidates-BRKprzRs.js","assets/pbfQueryUtils-BAbHJjSd.js","assets/pbf-CK1fX8z6.js","assets/query-BzVZb1_z.js","assets/GeoJSONSourceWorker-MYec8gkJ.js","assets/geojson-p_MIRWF2.js","assets/sourceUtils-CMGPnOFR.js","assets/MemorySourceWorker-Dn-4R8nn.js","assets/objectIdUtils-BmFjqQA3.js","assets/PBFDecoderWorker-DBJVmwhI.js","assets/dehydratedFeatures-DanwqEtl.js","assets/FeaturePipelineWorker-B8rw2dob.js","assets/AttributeStore-BBYmohx2.js","assets/Utils-W2z6vEXT.js","assets/BoundingBox-D3gne5N_.js","assets/UpdateTracking2D-CGDZsRG_.js","assets/FeatureStoreQueryAdapter-4lkfAPpx.js","assets/labelPoint-DNhLmdpf.js","assets/constants-BBnGEY1d.js","assets/streamLayerUtils-DFlbJ4P1.js","assets/MeshWriterRegistry-DExW29MU.js","assets/rasterizingUtils-QIcLyElx.js","assets/CIMSymbolHelper-CPRdZLRE.js","assets/BidiEngine-BvER9tXK.js","assets/GeometryUtils-CJA2ESyY.js","assets/Rect-CUzevAry.js","assets/TexturedLineMeshWriter-DnNk9yHA.js","assets/TurboLine-8CZgPqh_.js","assets/grouping-CKtvRO4A.js","assets/QueueProcessor-n03ew7Gz.js","assets/FeatureMetadata-BrL2EWzn.js","assets/SourceChunkStore-DxuNxSNT.js","assets/parquet-Bnm_Fyej.js","assets/operatorGeodeticDensify-CjMXrfQU.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/normalizeUtilsSync-BQvRruut.js","assets/FeatureIdInfo-CdoH8gd3.js","assets/ogcFeatureUtils-DNKysTx7.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-CBiDMLJ7.js","assets/PointCloudWorker-D8LT7736.js","assets/vec3f32-WCVSSNPR.js","assets/PointCloudUniqueValueRenderer-BUufArTA.js","assets/I3SBinaryReader-CkTDcvJy.js","assets/RasterWorker-DNk-zUXs.js","assets/PixelBlock-B6uODti0.js","assets/RasterSymbolizer-B3YDpzdV.js","assets/vectorFieldUtils-S3AGRAQd.js","assets/colorUtils-D2u0Cz_P.js","assets/rasterFunctionHelper-CYmb7Ytx.js","assets/clipUtils-8aM4HVI_.js","assets/rasterProjectionHelper-3zQMheix.js","assets/PolynomialTransform-DJbEooO5.js","assets/dataUtils-7UMssa0s.js","assets/SceneLayerSnappingSourceWorker-BzVXudKS.js","assets/Octree-DZ_wik88.js","assets/SceneLayerWorker-DgpaUxPc.js","assets/WFSSourceWorker-DMP_pji8.js","assets/wfsUtils-C4wOr6vI.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-DgRxfZ-j.js","assets/constants-BHYAGdRm.js","assets/config-BOD8--da.js","assets/SourceLayerData-5eiiK1YO.js","assets/StyleRepository-BhY7CL6v.js","assets/Feature3DPipelineWorker-CtvX_kv_.js","assets/HUDMaterial.glsl-Y94sN1l6.js","assets/hydratedFeatures-DnmJXUVN.js","assets/OutputColorHighlightOID.glsl-BLlApcGW.js","assets/renderState-CKc66y4x.js","assets/glsl-B5bJgrnA.js","assets/BooleanBindUniform-rV7lhEqP.js","assets/ShaderBuilder-DG0ic514.js","assets/placementUtils-DqD6n-8r.js","assets/sdfPrimitives-Ygt7JL5o.js","assets/Texture-DXHwgIS0.js","assets/videoUtils-C7eUewkZ.js","assets/requestImageUtils-DxLemFGJ.js","assets/textureUtils-DX5mzpp6.js","assets/RealisticTree.glsl-7c9RUOHe.js","assets/DefaultMaterial-Dt3GjnJQ.js","assets/VertexBuffer-DKkzXTmw.js","assets/BufferObject-DHz8-9mg.js","assets/boundedPlane-BlANjyRg.js","assets/dehydratedFeatureUtils-1rrRm6hF.js","assets/FlowWorker-CRoIy_Ut.js","assets/ParquetSourceWorker-DbZWFWPX.js","assets/parquetUtils-B05KyBLW.js","assets/PanoramicMeshWorker-VIH5MUjs.js","assets/projectOperator-B8_tK1SU.js","assets/operatorProject-C1CaX7QT.js","assets/projectOperator-CJirxKLe.js","assets/Popup-ByllqNsm.js","assets/AttachmentInfo-NfOoqYRI.js","assets/featureUtils-CW-h_FQl.js","assets/utils-B-zUtWrK.js","assets/cimSymbolUtils-DHFfTQnE.js","assets/executeQueryJSON-Cpu4ala1.js","assets/shared-DNCxDPTr.js","assets/isImageryGraphicOrigin-Ccuhb4eK.js","assets/isImageryTileGraphicOrigin-ZR-gBf9D.js","assets/AnchorElementViewModel-4dR-5Dau.js","assets/ReactiveSet-f04rtIi6.js","assets/symbolUtils-CoSmp-WX.js","assets/layerViewUtils-C9Atd8Hn.js","assets/ElevationLayer-DTAAGdCJ.js","assets/ArcGISCachedService-DUla3mk0.js","assets/TileInfoTilemapCache-yDyzAm2C.js","assets/TilemapCache-BkMVI8zB.js","assets/WorkerHandle-3uBZ4gGd.js","assets/portalLayers-DPblME_V.js","assets/associatedFeatureServiceUtils-QAjYBIzm.js","assets/fetchService-PCXn37cc.js","assets/loadUtils-BB1CnEId.js","assets/lazyLayerLoader-B0Azod9C.js","assets/arcgisLayers-B0LBo4oC.js","assets/layersCreator-TDfSeS0d.js","assets/arcadeUtils-DWqdyd4v.js","assets/arcade-K92ml4ck.js","assets/arcadeEnvironment-BKvGQBXP.js","assets/Dictionary-CZAS84Zg.js","assets/ImmutableArray-BPVd6ESQ.js","assets/Feature-BlqdAHVE.js","assets/aiServices-Bt2lOJsZ.js","assets/commonProperties-DHiB1uzW.js","assets/unitConversion-66fp0CcD.js","assets/rasterFieldUtils-Dbxf_mBf.js","assets/batchExec-jVq3udcD.js","assets/webStyleSymbolUtils-B6O1mKeN.js","assets/devEnvironmentUtils-8WtPGj6h.js","assets/webglDeps-CcX9gXvC.js","assets/FramebufferObject-Vb1CxLRv.js","assets/ProgramTemplate-Ci7ucf3L.js","assets/VertexArrayObject-Cc-4KJqa.js","assets/mapViewDeps-DY3Oo9GO.js","assets/FeatureCommandQueue-zNASeYrv.js","assets/GraphShaderModule-BtZgPnyV.js","assets/utils-BkNIf9lH.js","assets/WGLContainer-CxMGCn0Z.js","assets/Container-BaeEgQha.js","assets/SDFHelper-DW174yEQ.js","assets/OverrideHelper-CYKc3wdn.js","assets/callExpressionWithFeature-DJ0paOIX.js","assets/GridShader-AFZm1TYo.js","assets/testSVGPremultipliedAlpha-CJgx3zYa.js","assets/SymbolFader-ZKFFqDrY.js","assets/RenderingContext-Bh7SbyZT.js","assets/CIMResourceManager-FopnnoLM.js","assets/utils-16jFsPoU.js","assets/utils-DDjZAYSk.js","assets/GraphicsView2D-BJZ40scW.js","assets/GraphicContainer-WtrkR3wJ.js","assets/AGraphicContainer-C8Pinsf-.js","assets/TechniqueInstance-BxeXU9-W.js","assets/TileContainer-BJdwDKL5.js","assets/gridUtils-xoi8HqzS.js","assets/TileLayerView2D-By3iProS.js","assets/imageUtils-GfPPLWpG.js","assets/BitmapTechnique-DcoDbCxn.js","assets/bitmapUtils-O1Qmfg56.js","assets/LayerView2D-3ytWOEvC.js","assets/HighlightGraphicContainer-DbYqvW0B.js","assets/LayerView-XsgkvV_A.js","assets/RefreshableLayerView-BUQbWk1f.js","assets/MapServiceLayerViewHelper-BLSsLH9j.js","assets/floorFilterUtils-DKzVzLpH.js","assets/drapedUtils-DpDmQZWw.js","assets/sublayerUtils-BEQnBRaB.js","assets/popupUtils-B8BWs6yN.js","assets/highlightOptionsUtils-BGffvbFN.js","assets/FeatureLayerView2D-0a1yrULT.js","assets/timeSupport-oUnzeGvx.js","assets/AttributeBinsFeatureSet-eg-_ZWBc.js","assets/AttributeBinsQuery-XBEi0ygJ.js","assets/constants-SxxbBSOD.js","assets/BaseDynamicLayerView2D-DmPmFZWw.js","assets/BitmapContainer-B5eqcyrP.js","assets/ExportStrategy-rDcoiNrZ.js","assets/CatalogLayerView2D-sfgwbYgo.js","assets/CatalogDynamicGroupLayerView2D-BYpA8c5q.js","assets/CatalogFootprintLayerView2D-rZ-tSBup.js","assets/GeoRSSLayerView2D-DZPUHj4z.js","assets/GraphicsLayerView2D-CZhYNhEk.js","assets/GroupLayerView2D-CTC5WQ5P.js","assets/ImageryLayerView2D-BVJgWrdJ.js","assets/RasterVFDisplayObject-BtvVtzbt.js","assets/ImageryTileLayerView2D-BheFMGhl.js","assets/datasetUtils-BoKz1VkB.js","assets/rasterUtils-W_CzyYW1.js","assets/RawBlockCache-CsD_JJ7K.js","assets/KMLLayerView2D-DJ8JUZUr.js","assets/kmlUtils-BNAJFFPW.js","assets/KnowledgeGraphLayerView2D-XHZBW3S2.js","assets/MapImageLayerView2D-mnRjzk09.js","assets/ExportImageParameters-D0heKZZR.js","assets/MapNotesLayerView2D-CPrfFcwW.js","assets/MediaLayerView2D-Cu4BnGHg.js","assets/mediaLayerUtils-DTNczC5n.js","assets/OverlayContainer-khBUeQHm.js","assets/OGCFeatureLayerView2D-qNZbnkqE.js","assets/RouteLayerView2D-BTLHekAy.js","assets/Stop-B6fPV5La.js","assets/networkEnums-Bn9dupZ3.js","assets/StreamLayerView2D-DQsVyXb4.js","assets/SubtypeGroupLayerView2D-opVWQ6X3.js","assets/VectorTileLayerView2D-D6uyQK5l.js","assets/VideoLayerView2D-EmYQjE6J.js","assets/videoUtils-Cuabww_2.js","assets/ControlPoint-DICBq7oA.js","assets/WMSLayerView2D-Div7dvQf.js","assets/ExportWMSImageParameters-C-f2kE_i.js","assets/WMTSLayerView2D-CYLZJKW6.js","assets/ElevationProfileAnalysisView2D-DUZizUPR.js","assets/createUtils-CYNxVZu1.js","assets/distanceOperator-Bm3mRkBs.js","assets/Point2D-Dc6LC4kG.js","assets/Distance2DCalculator-CXhBP-8I-C1wBIpCf.js","assets/ProjectionTransformation-m7i9M82m.js","assets/Envelope2D-DbkRo3eT.js","assets/Transformation2D-CJm8P2LM.js","assets/OperatorDefinitions-DP7_WWTp.js","assets/apiConverter-DsH1E48e.js","assets/jsonConverter-B7fmD9TV.js","assets/simplifyOperator-BaBafF90.js","assets/operatorSimplify-D064io8o.js","assets/mapCollectionUtils-Dub1p_8d.js","assets/apng-CgspLwNf.js","assets/index-DH8GEXan.js","assets/index-CrVFJeUo.js","assets/guid-LcV_DAvu.js","assets/form-DAij-hxn.js","assets/label-C0etURYP.js","assets/webdocSaveUtils-B2Gt1oub.js","assets/originUtils-k2GaUSwR.js","assets/basemapUtils-CWI8f7Wn.js","assets/resourceUtils-CuAVpzdN.js","assets/resourceUtils-CRE0C0Xx.js","assets/saveUtils-cI6B5FpB.js","assets/layersLoader-Co20GV_w.js","assets/featureLayerUtils-3YBp4fFN.js","assets/utils-3aYlzeOL.js","assets/FeatureLayerSource-DscjC8Gp.js","assets/External-uuxOn3IB.js","assets/applyEditsUtils-dx6855zX.js","assets/MeshTransform-BBr0sXxQ.js","assets/axisAngleDegrees-BzL-J_KN.js","assets/editingSupport-BcFhOI3B.js","assets/QueryTask-lYqnf8WO.js","assets/executeForIds-BlZQdzUc.js","assets/queryAssociations-tuHnspL_.js","assets/Association-Dng9qtrm.js","assets/synthesizeAssociationGeometries-BhpgvooC.js","assets/lengthOperator-f9uBP5sQ.js","assets/OperatorGeodeticLength-BNMh-Zi_.js","assets/OperatorShapePreservingLength-CkiHzSgz.js","assets/SelfSnappingEngine-BJyheziv.js","assets/angularMeasurementUtils-CGGInT0l.js","assets/GridSnappingEngine-B3X5zK1f.js","assets/FeatureSnappingEngine-CFx66gm-.js","assets/geometryEngine-rNVlWxVF.js","assets/editingTools-B8d__kCB.js","assets/SnappingVisualizer2D-D-u9Atmr.js","assets/SnappingContext-DPTC4qiI.js","assets/PointSnappingHint-BosYXMxA.js","assets/rotate-b1Bu2GWE.js","assets/GraphicManipulator-BknR10QP.js","assets/editPlaneUtils-3j-Ma9Sd.js","assets/drawUtils-Bc5WMG9B.js","assets/ImageMaterial.glsl-BRIpSMWQ.js","assets/OverlayCompositing.glsl-B5Gb4OKm.js","assets/line-YTXKKEII.js","assets/triangulationUtils-oilz_N0z.js","assets/RibbonLine.glsl-if-wKVEd.js","assets/NestedMap-B93H1Ttm.js","assets/DefaultLayouts-Cjoe7LWe.js","assets/GraphicState-CJ8LYMbA.js","assets/SelectedVertexTooltipInfo-Dbm8JcQH.js","assets/TranslateTooltipInfo-Cp0vbkrB.js","assets/ExtentScaleTooltipInfo-tPfQh_2B.js","assets/LineCallout.glsl-ByNpvNBG.js","assets/edgeUtils-BHd7VEso.js","assets/GraphicMover-BNGeE7gq.js","assets/Box-BaBsBOwg.js","assets/settings-SjDDhpa0.js","assets/Reshape-CJHucnTd.js","assets/ElevationProfileView2D-BDROapnv.js","assets/visualizationUtils-C2N6HMRi.js","assets/ElevationProfileView3D-COdRDx4L.js","assets/index-CpeseYgV.js","assets/index-B5uVTTra.js","assets/InternalLabel-I-dQrZgk.js","assets/index-6ol4LATg.js","assets/index-CjkCufYn.js","assets/index-QvGy3t4r.js","assets/Validation-chYXXIzg.js","assets/index-WncbwnDd.js","assets/floating-ui-CXipEZ0j.js","assets/debounce-D0Dr7phT.js","assets/FloatingArrow-DxL50rpc.js","assets/chartUtils-pQ8GMlqC.js","assets/ResponsiveTheme-RAgBwo6Y.js","assets/Theme-KCU2va0w.js","assets/chartUtilsAm5-DsincHcH.js","assets/Tooltip-DH2ulkhU.js","assets/DefaultTheme-DnFjyeQw.js","assets/LineSeries-DzBx2hKo.js","assets/ColorSet-CoUHlANl.js","assets/Tick-CdZ_Mk_5.js","assets/Button-Dm6V8-RV.js"])))=>i.map(i=>d[i]);
var Whe=Object.getPrototypeOf;var Zhe=Reflect.get;var N7=t=>{throw TypeError(t)};var SR=(t,e,i)=>e.has(t)||N7("Cannot "+i);var Bt=(t,e,i)=>(SR(t,e,"read from private field"),i?i.call(t):e.get(t)),rl=(t,e,i)=>e.has(t)?N7("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),nl=(t,e,i,r)=>(SR(t,e,"write to private field"),r?r.call(t,i):e.set(t,i),i),F_=(t,e,i)=>(SR(t,e,"access private method"),i);var L7=(t,e,i)=>Zhe(Whe(t),i,e);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();var xR={exports:{}},V_={};var j7;function Jhe(){if(j7)return V_;j7=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(r,n,s){var o=null;if(s!==void 0&&(o=""+s),n.key!==void 0&&(o=""+n.key),"key"in n){s={};for(var u in n)u!=="key"&&(s[u]=n[u])}else s=n;return n=s.ref,{$$typeof:t,type:r,key:o,ref:n!==void 0?n:null,props:s}}return V_.Fragment=e,V_.jsx=i,V_.jsxs=i,V_}var z7;function Yhe(){return z7||(z7=1,xR.exports=Jhe()),xR.exports}var oy=Yhe(),$R={exports:{}},it={};var F7;function Qhe(){if(F7)return it;F7=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function _(U){return U===null||typeof U!="object"?null:(U=b&&U[b]||U["@@iterator"],typeof U=="function"?U:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,E={};function A(U,ae,$e){this.props=U,this.context=ae,this.refs=E,this.updater=$e||x}A.prototype.isReactComponent={},A.prototype.setState=function(U,ae){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ae,"setState")},A.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function O(){}O.prototype=A.prototype;function D(U,ae,$e){this.props=U,this.context=ae,this.refs=E,this.updater=$e||x}var R=D.prototype=new O;R.constructor=D,$(R,A.prototype),R.isPureReactComponent=!0;var P=Array.isArray;function j(){}var Q={H:null,A:null,T:null,S:null},re=Object.prototype.hasOwnProperty;function ce(U,ae,$e){var Ce=$e.ref;return{$$typeof:t,type:U,key:ae,ref:Ce!==void 0?Ce:null,props:$e}}function ue(U,ae){return ce(U.type,ae,U.props)}function ye(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function he(U){var ae={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function($e){return ae[$e]})}var Pe=/\/+/g;function ve(U,ae){return typeof U=="object"&&U!==null&&U.key!=null?he(""+U.key):ae.toString(36)}function We(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(j,j):(U.status="pending",U.then(function(ae){U.status==="pending"&&(U.status="fulfilled",U.value=ae)},function(ae){U.status==="pending"&&(U.status="rejected",U.reason=ae)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function ee(U,ae,$e,Ce,Ke){var dt=typeof U;(dt==="undefined"||dt==="boolean")&&(U=null);var Dt=!1;if(U===null)Dt=!0;else switch(dt){case"bigint":case"string":case"number":Dt=!0;break;case"object":switch(U.$$typeof){case t:case e:Dt=!0;break;case m:return Dt=U._init,ee(Dt(U._payload),ae,$e,Ce,Ke)}}if(Dt)return Ke=Ke(U),Dt=Ce===""?"."+ve(U,0):Ce,P(Ke)?($e="",Dt!=null&&($e=Dt.replace(Pe,"$&/")+"/"),ee(Ke,ae,$e,"",function(Tf){return Tf})):Ke!=null&&(ye(Ke)&&(Ke=ue(Ke,$e+(Ke.key==null||U&&U.key===Ke.key?"":(""+Ke.key).replace(Pe,"$&/")+"/")+Dt)),ae.push(Ke)),1;Dt=0;var gn=Ce===""?".":Ce+":";if(P(U))for(var Vi=0;Vi<U.length;Vi++)Ce=U[Vi],dt=gn+ve(Ce,Vi),Dt+=ee(Ce,ae,$e,dt,Ke);else if(Vi=_(U),typeof Vi=="function")for(U=Vi.call(U),Vi=0;!(Ce=U.next()).done;)Ce=Ce.value,dt=gn+ve(Ce,Vi++),Dt+=ee(Ce,ae,$e,dt,Ke);else if(dt==="object"){if(typeof U.then=="function")return ee(We(U),ae,$e,Ce,Ke);throw ae=String(U),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return Dt}function ge(U,ae,$e){if(U==null)return U;var Ce=[],Ke=0;return ee(U,Ce,"","",function(dt){return ae.call($e,dt,Ke++)}),Ce}function Se(U){if(U._status===-1){var ae=U._result;ae=ae(),ae.then(function($e){(U._status===0||U._status===-1)&&(U._status=1,U._result=$e)},function($e){(U._status===0||U._status===-1)&&(U._status=2,U._result=$e)}),U._status===-1&&(U._status=0,U._result=ae)}if(U._status===1)return U._result.default;throw U._result}var nt=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},zt={map:ge,forEach:function(U,ae,$e){ge(U,function(){ae.apply(this,arguments)},$e)},count:function(U){var ae=0;return ge(U,function(){ae++}),ae},toArray:function(U){return ge(U,function(ae){return ae})||[]},only:function(U){if(!ye(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return it.Activity=v,it.Children=zt,it.Component=A,it.Fragment=i,it.Profiler=n,it.PureComponent=D,it.StrictMode=r,it.Suspense=d,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,it.__COMPILER_RUNTIME={__proto__:null,c:function(U){return Q.H.useMemoCache(U)}},it.cache=function(U){return function(){return U.apply(null,arguments)}},it.cacheSignal=function(){return null},it.cloneElement=function(U,ae,$e){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var Ce=$({},U.props),Ke=U.key;if(ae!=null)for(dt in ae.key!==void 0&&(Ke=""+ae.key),ae)!re.call(ae,dt)||dt==="key"||dt==="__self"||dt==="__source"||dt==="ref"&&ae.ref===void 0||(Ce[dt]=ae[dt]);var dt=arguments.length-2;if(dt===1)Ce.children=$e;else if(1<dt){for(var Dt=Array(dt),gn=0;gn<dt;gn++)Dt[gn]=arguments[gn+2];Ce.children=Dt}return ce(U.type,Ke,Ce)},it.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:s,_context:U},U},it.createElement=function(U,ae,$e){var Ce,Ke={},dt=null;if(ae!=null)for(Ce in ae.key!==void 0&&(dt=""+ae.key),ae)re.call(ae,Ce)&&Ce!=="key"&&Ce!=="__self"&&Ce!=="__source"&&(Ke[Ce]=ae[Ce]);var Dt=arguments.length-2;if(Dt===1)Ke.children=$e;else if(1<Dt){for(var gn=Array(Dt),Vi=0;Vi<Dt;Vi++)gn[Vi]=arguments[Vi+2];Ke.children=gn}if(U&&U.defaultProps)for(Ce in Dt=U.defaultProps,Dt)Ke[Ce]===void 0&&(Ke[Ce]=Dt[Ce]);return ce(U,dt,Ke)},it.createRef=function(){return{current:null}},it.forwardRef=function(U){return{$$typeof:u,render:U}},it.isValidElement=ye,it.lazy=function(U){return{$$typeof:m,_payload:{_status:-1,_result:U},_init:Se}},it.memo=function(U,ae){return{$$typeof:h,type:U,compare:ae===void 0?null:ae}},it.startTransition=function(U){var ae=Q.T,$e={};Q.T=$e;try{var Ce=U(),Ke=Q.S;Ke!==null&&Ke($e,Ce),typeof Ce=="object"&&Ce!==null&&typeof Ce.then=="function"&&Ce.then(j,nt)}catch(dt){nt(dt)}finally{ae!==null&&$e.types!==null&&(ae.types=$e.types),Q.T=ae}},it.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},it.use=function(U){return Q.H.use(U)},it.useActionState=function(U,ae,$e){return Q.H.useActionState(U,ae,$e)},it.useCallback=function(U,ae){return Q.H.useCallback(U,ae)},it.useContext=function(U){return Q.H.useContext(U)},it.useDebugValue=function(){},it.useDeferredValue=function(U,ae){return Q.H.useDeferredValue(U,ae)},it.useEffect=function(U,ae){return Q.H.useEffect(U,ae)},it.useEffectEvent=function(U){return Q.H.useEffectEvent(U)},it.useId=function(){return Q.H.useId()},it.useImperativeHandle=function(U,ae,$e){return Q.H.useImperativeHandle(U,ae,$e)},it.useInsertionEffect=function(U,ae){return Q.H.useInsertionEffect(U,ae)},it.useLayoutEffect=function(U,ae){return Q.H.useLayoutEffect(U,ae)},it.useMemo=function(U,ae){return Q.H.useMemo(U,ae)},it.useOptimistic=function(U,ae){return Q.H.useOptimistic(U,ae)},it.useReducer=function(U,ae,$e){return Q.H.useReducer(U,ae,$e)},it.useRef=function(U){return Q.H.useRef(U)},it.useState=function(U){return Q.H.useState(U)},it.useSyncExternalStore=function(U,ae,$e){return Q.H.useSyncExternalStore(U,ae,$e)},it.useTransition=function(){return Q.H.useTransition()},it.version="19.2.3",it}var V7;function az(){return V7||(V7=1,$R.exports=Qhe()),$R.exports}var Xhe=az(),TR={exports:{}},U_={},ER={exports:{}},MR={};var U7;function Khe(){return U7||(U7=1,(function(t){function e(ee,ge){var Se=ee.length;ee.push(ge);e:for(;0<Se;){var nt=Se-1>>>1,zt=ee[nt];if(0<n(zt,ge))ee[nt]=ge,ee[Se]=zt,Se=nt;else break e}}function i(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var ge=ee[0],Se=ee.pop();if(Se!==ge){ee[0]=Se;e:for(var nt=0,zt=ee.length,U=zt>>>1;nt<U;){var ae=2*(nt+1)-1,$e=ee[ae],Ce=ae+1,Ke=ee[Ce];if(0>n($e,Se))Ce<zt&&0>n(Ke,$e)?(ee[nt]=Ke,ee[Ce]=Se,nt=Ce):(ee[nt]=$e,ee[ae]=Se,nt=ae);else if(Ce<zt&&0>n(Ke,Se))ee[nt]=Ke,ee[Ce]=Se,nt=Ce;else break e}}return ge}function n(ee,ge){var Se=ee.sortIndex-ge.sortIndex;return Se!==0?Se:ee.id-ge.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var d=[],h=[],m=1,v=null,b=3,_=!1,x=!1,$=!1,E=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function R(ee){for(var ge=i(h);ge!==null;){if(ge.callback===null)r(h);else if(ge.startTime<=ee)r(h),ge.sortIndex=ge.expirationTime,e(d,ge);else break;ge=i(h)}}function P(ee){if($=!1,R(ee),!x)if(i(d)!==null)x=!0,j||(j=!0,he());else{var ge=i(h);ge!==null&&We(P,ge.startTime-ee)}}var j=!1,Q=-1,re=5,ce=-1;function ue(){return E?!0:!(t.unstable_now()-ce<re)}function ye(){if(E=!1,j){var ee=t.unstable_now();ce=ee;var ge=!0;try{e:{x=!1,$&&($=!1,O(Q),Q=-1),_=!0;var Se=b;try{t:{for(R(ee),v=i(d);v!==null&&!(v.expirationTime>ee&&ue());){var nt=v.callback;if(typeof nt=="function"){v.callback=null,b=v.priorityLevel;var zt=nt(v.expirationTime<=ee);if(ee=t.unstable_now(),typeof zt=="function"){v.callback=zt,R(ee),ge=!0;break t}v===i(d)&&r(d),R(ee)}else r(d);v=i(d)}if(v!==null)ge=!0;else{var U=i(h);U!==null&&We(P,U.startTime-ee),ge=!1}}break e}finally{v=null,b=Se,_=!1}ge=void 0}}finally{ge?he():j=!1}}}var he;if(typeof D=="function")he=function(){D(ye)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,ve=Pe.port2;Pe.port1.onmessage=ye,he=function(){ve.postMessage(null)}}else he=function(){A(ye,0)};function We(ee,ge){Q=A(function(){ee(t.unstable_now())},ge)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(ee){switch(b){case 1:case 2:case 3:var ge=3;break;default:ge=b}var Se=b;b=ge;try{return ee()}finally{b=Se}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(ee,ge){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var Se=b;b=ee;try{return ge()}finally{b=Se}},t.unstable_scheduleCallback=function(ee,ge,Se){var nt=t.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?nt+Se:nt):Se=nt,ee){case 1:var zt=-1;break;case 2:zt=250;break;case 5:zt=1073741823;break;case 4:zt=1e4;break;default:zt=5e3}return zt=Se+zt,ee={id:m++,callback:ge,priorityLevel:ee,startTime:Se,expirationTime:zt,sortIndex:-1},Se>nt?(ee.sortIndex=Se,e(h,ee),i(d)===null&&ee===i(h)&&($?(O(Q),Q=-1):$=!0,We(P,Se-nt))):(ee.sortIndex=zt,e(d,ee),x||_||(x=!0,j||(j=!0,he()))),ee},t.unstable_shouldYield=ue,t.unstable_wrapCallback=function(ee){var ge=b;return function(){var Se=b;b=ge;try{return ee.apply(this,arguments)}finally{b=Se}}}})(MR)),MR}var q7;function efe(){return q7||(q7=1,ER.exports=Khe()),ER.exports}var AR={exports:{}},Dn={};var G7;function tfe(){if(G7)return Dn;G7=1;var t=az();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},n=Symbol.for("react.portal");function s(d,h,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:v==null?null:""+v,children:d,containerInfo:h,implementation:m}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Dn.createPortal=function(d,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return s(d,h,null,m)},Dn.flushSync=function(d){var h=o.T,m=r.p;try{if(o.T=null,r.p=2,d)return d()}finally{o.T=h,r.p=m,r.d.f()}},Dn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},Dn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Dn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var m=h.as,v=u(m,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,_=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:_}):m==="script"&&r.d.X(d,{crossOrigin:v,integrity:b,fetchPriority:_,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Dn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=u(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},Dn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,v=u(m,h.crossOrigin);r.d.L(d,m,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Dn.preloadModule=function(d,h){if(typeof d=="string")if(h){var m=u(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},Dn.requestFormReset=function(d){r.d.r(d)},Dn.unstable_batchedUpdates=function(d,h){return d(h)},Dn.useFormState=function(d,h,m){return o.H.useFormState(d,h,m)},Dn.useFormStatus=function(){return o.H.useHostTransitionStatus()},Dn.version="19.2.3",Dn}var B7;function ife(){if(B7)return AR.exports;B7=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),AR.exports=tfe(),AR.exports}var H7;function rfe(){if(H7)return U_;H7=1;var t=efe(),e=az(),i=ife();function r(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var c=a,f=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(f=c.return),a=c.return;while(a)}return c.tag===3?f:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function u(a){if(a.tag===31){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function d(a){if(s(a)!==a)throw Error(r(188))}function h(a){var c=a.alternate;if(!c){if(c=s(a),c===null)throw Error(r(188));return c!==a?null:a}for(var f=a,g=c;;){var w=f.return;if(w===null)break;var S=w.alternate;if(S===null){if(g=w.return,g!==null){f=g;continue}break}if(w.child===S.child){for(S=w.child;S;){if(S===f)return d(w),a;if(S===g)return d(w),c;S=S.sibling}throw Error(r(188))}if(f.return!==g.return)f=w,g=S;else{for(var T=!1,k=w.child;k;){if(k===f){T=!0,f=w,g=S;break}if(k===g){T=!0,g=w,f=S;break}k=k.sibling}if(!T){for(k=S.child;k;){if(k===f){T=!0,f=S,g=w;break}if(k===g){T=!0,g=S,f=w;break}k=k.sibling}if(!T)throw Error(r(189))}}if(f.alternate!==g)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?a:c}function m(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=m(a),c!==null)return c;a=a.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),D=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),ce=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),ye=Symbol.iterator;function he(a){return a===null||typeof a!="object"?null:(a=ye&&a[ye]||a["@@iterator"],typeof a=="function"?a:null)}var Pe=Symbol.for("react.client.reference");function ve(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===Pe?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case $:return"Fragment";case A:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case j:return"SuspenseList";case ce:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case x:return"Portal";case D:return a.displayName||"Context";case O:return(a._context.displayName||"Context")+".Consumer";case R:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Q:return c=a.displayName||null,c!==null?c:ve(a.type)||"Memo";case re:c=a._payload,a=a._init;try{return ve(a(c))}catch{}}return null}var We=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se={pending:!1,data:null,method:null,action:null},nt=[],zt=-1;function U(a){return{current:a}}function ae(a){0>zt||(a.current=nt[zt],nt[zt]=null,zt--)}function $e(a,c){zt++,nt[zt]=a.current,a.current=c}var Ce=U(null),Ke=U(null),dt=U(null),Dt=U(null);function gn(a,c){switch($e(dt,c),$e(Ke,a),$e(Ce,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&&(a=a.namespaceURI)?s7(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=s7(c),a=o7(c,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ae(Ce),$e(Ce,a)}function Vi(){ae(Ce),ae(Ke),ae(dt)}function Tf(a){a.memoizedState!==null&&$e(Dt,a);var c=Ce.current,f=o7(c,a.type);c!==f&&($e(Ke,a),$e(Ce,f))}function sg(a){Ke.current===a&&(ae(Ce),ae(Ke)),Dt.current===a&&(ae(Dt),N_._currentValue=Se)}var Jw,Fx;function hc(a){if(Jw===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);Jw=c&&c[1]||"",Fx=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jw+a+Fx}var Yw=!1;function Qw(a,c){if(!a||Yw)return"";Yw=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(c){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(te){var X=te}Reflect.construct(a,[],le)}else{try{le.call()}catch(te){X=te}a.call(le.prototype)}}else{try{throw Error()}catch(te){X=te}(le=a())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(te){if(te&&X&&typeof te.stack=="string")return[te.stack,X.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=g.DetermineComponentFrameRoot(),T=S[0],k=S[1];if(T&&k){var N=T.split(`
`),J=k.split(`
`);for(w=g=0;g<N.length&&!N[g].includes("DetermineComponentFrameRoot");)g++;for(;w<J.length&&!J[w].includes("DetermineComponentFrameRoot");)w++;if(g===N.length||w===J.length)for(g=N.length-1,w=J.length-1;1<=g&&0<=w&&N[g]!==J[w];)w--;for(;1<=g&&0<=w;g--,w--)if(N[g]!==J[w]){if(g!==1||w!==1)do if(g--,w--,0>w||N[g]!==J[w]){var ne=`
`+N[g].replace(" at new "," at ");return a.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",a.displayName)),ne}while(1<=g&&0<=w);break}}}finally{Yw=!1,Error.prepareStackTrace=f}return(f=a?a.displayName||a.name:"")?hc(f):""}function rO(a,c){switch(a.tag){case 26:case 27:case 5:return hc(a.type);case 16:return hc("Lazy");case 13:return a.child!==c&&c!==null?hc("Suspense Fallback"):hc("Suspense");case 19:return hc("SuspenseList");case 0:case 15:return Qw(a.type,!1);case 11:return Qw(a.type.render,!1);case 1:return Qw(a.type,!0);case 31:return hc("Activity");default:return""}}function Vx(a){try{var c="",f=null;do c+=rO(a,f),f=a,a=a.return;while(a);return c}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var og=Object.prototype.hasOwnProperty,ag=t.unstable_scheduleCallback,ea=t.unstable_cancelCallback,nO=t.unstable_shouldYield,sO=t.unstable_requestPaint,ss=t.unstable_now,oO=t.unstable_getCurrentPriorityLevel,Ux=t.unstable_ImmediatePriority,qx=t.unstable_UserBlockingPriority,lg=t.unstable_NormalPriority,X8=t.unstable_LowPriority,Gx=t.unstable_IdlePriority,aO=t.log,lO=t.unstable_setDisableYieldValue,Ef=null,os=null;function iu(a){if(typeof aO=="function"&&lO(a),os&&typeof os.setStrictMode=="function")try{os.setStrictMode(Ef,a)}catch{}}var as=Math.clz32?Math.clz32:dO,uO=Math.log,cO=Math.LN2;function dO(a){return a>>>=0,a===0?32:31-(uO(a)/cO|0)|0}var ug=256,cg=262144,dg=4194304;function fc(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function pg(a,c,f){var g=a.pendingLanes;if(g===0)return 0;var w=0,S=a.suspendedLanes,T=a.pingedLanes;a=a.warmLanes;var k=g&134217727;return k!==0?(g=k&~S,g!==0?w=fc(g):(T&=k,T!==0?w=fc(T):f||(f=k&~a,f!==0&&(w=fc(f))))):(k=g&~S,k!==0?w=fc(k):T!==0?w=fc(T):f||(f=g&~a,f!==0&&(w=fc(f)))),w===0?0:c!==0&&c!==w&&(c&S)===0&&(S=w&-w,f=c&-c,S>=f||S===32&&(f&4194048)!==0)?c:w}function Mf(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function pO(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function K(){var a=dg;return dg<<=1,(dg&62914560)===0&&(dg=4194304),a}function ti(a){for(var c=[],f=0;31>f;f++)c.push(a);return c}function ta(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Af(a,c,f,g,w,S){var T=a.pendingLanes;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=f,a.entangledLanes&=f,a.errorRecoveryDisabledLanes&=f,a.shellSuspendCounter=0;var k=a.entanglements,N=a.expirationTimes,J=a.hiddenUpdates;for(f=T&~f;0<f;){var ne=31-as(f),le=1<<ne;k[ne]=0,N[ne]=-1;var X=J[ne];if(X!==null)for(J[ne]=null,ne=0;ne<X.length;ne++){var te=X[ne];te!==null&&(te.lane&=-536870913)}f&=~le}g!==0&&ks(a,g,0),S!==0&&w===0&&a.tag!==0&&(a.suspendedLanes|=S&~(T&~c))}function ks(a,c,f){a.pendingLanes|=c,a.suspendedLanes&=~c;var g=31-as(c);a.entangledLanes|=c,a.entanglements[g]=a.entanglements[g]|1073741824|f&261930}function If(a,c){var f=a.entangledLanes|=c;for(a=a.entanglements;f;){var g=31-as(f),w=1<<g;w&c|a[g]&c&&(a[g]|=c),f&=~w}}function Ne(a,c){var f=c&-c;return f=(f&42)!==0?1:cp(f),(f&(a.suspendedLanes|c))!==0?0:f}function cp(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Xw(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function pr(){var a=ge.p;return a!==0?a:(a=window.event,a===void 0?32:I7(a.type))}function dp(a,c){var f=ge.p;try{return ge.p=a,c()}finally{ge.p=f}}var ru=Math.random().toString(36).slice(2),vi="__reactFiber$"+ru,vn="__reactProps$"+ru,mc="__reactContainer$"+ru,Ze="__reactEvents$"+ru,hO="__reactListeners$"+ru,Bx="__reactHandles$"+ru,Hx="__reactResources$"+ru,kf="__reactMarker$"+ru;function Of(a){delete a[vi],delete a[vn],delete a[Ze],delete a[hO],delete a[Bx]}function pp(a){var c=a[vi];if(c)return c;for(var f=a.parentNode;f;){if(c=f[mc]||f[vi]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(a=h7(a);a!==null;){if(f=a[vi])return f;a=h7(a)}return c}a=f,f=a.parentNode}return null}function nu(a){if(a=a[vi]||a[mc]){var c=a.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return a}return null}function Ni(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(r(33))}function hp(a){var c=a[Hx];return c||(c=a[Hx]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function hr(a){a[kf]=!0}var Wx=new Set,Zx={};function yc(a,c){fp(a,c),fp(a+"Capture",c)}function fp(a,c){for(Zx[a]=c,a=0;a<c.length;a++)Wx.add(c[a])}var fO=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ls={},Jx={};function mO(a){return og.call(Jx,a)?!0:og.call(ls,a)?!1:fO.test(a)?Jx[a]=!0:(ls[a]=!0,!1)}function mp(a,c,f){if(mO(c))if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var g=c.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+f)}}function Cf(a,c,f){if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+f)}}function C(a,c,f,g){if(g===null)a.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(f);return}a.setAttributeNS(c,f,""+g)}}function W(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function me(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ge(a,c,f){var g=Object.getOwnPropertyDescriptor(a.constructor.prototype,c);if(!a.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var w=g.get,S=g.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return w.call(this)},set:function(T){f=""+T,S.call(this,T)}}),Object.defineProperty(a,c,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function It(a){if(!a._valueTracker){var c=me(a)?"checked":"value";a._valueTracker=Ge(a,c,""+a[c])}}function Mi(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var f=c.getValue(),g="";return a&&(g=me(a)?a.checked?"true":"false":a.value),a=g,a!==f?(c.setValue(a),!0):!1}function Li(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var tn=/[\n"\\]/g;function ia(a){return a.replace(tn,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function yO(a,c,f,g,w,S,T,k){a.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?a.type=T:a.removeAttribute("type"),c!=null?T==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+W(c)):a.value!==""+W(c)&&(a.value=""+W(c)):T!=="submit"&&T!=="reset"||a.removeAttribute("value"),c!=null?gO(a,T,W(c)):f!=null?gO(a,T,W(f)):g!=null&&a.removeAttribute("value"),w==null&&S!=null&&(a.defaultChecked=!!S),w!=null&&(a.checked=w&&typeof w!="function"&&typeof w!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?a.name=""+W(k):a.removeAttribute("name")}function K8(a,c,f,g,w,S,T,k){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(a.type=S),c!=null||f!=null){if(!(S!=="submit"&&S!=="reset"||c!=null)){It(a);return}f=f!=null?""+W(f):"",c=c!=null?""+W(c):f,k||c===a.value||(a.value=c),a.defaultValue=c}g=g??w,g=typeof g!="function"&&typeof g!="symbol"&&!!g,a.checked=k?a.checked:!!g,a.defaultChecked=!!g,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(a.name=T),It(a)}function gO(a,c,f){c==="number"&&Li(a.ownerDocument)===a||a.defaultValue===""+f||(a.defaultValue=""+f)}function hg(a,c,f,g){if(a=a.options,c){c={};for(var w=0;w<f.length;w++)c["$"+f[w]]=!0;for(f=0;f<a.length;f++)w=c.hasOwnProperty("$"+a[f].value),a[f].selected!==w&&(a[f].selected=w),w&&g&&(a[f].defaultSelected=!0)}else{for(f=""+W(f),c=null,w=0;w<a.length;w++){if(a[w].value===f){a[w].selected=!0,g&&(a[w].defaultSelected=!0);return}c!==null||a[w].disabled||(c=a[w])}c!==null&&(c.selected=!0)}}function eV(a,c,f){if(c!=null&&(c=""+W(c),c!==a.value&&(a.value=c),f==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=f!=null?""+W(f):""}function tV(a,c,f,g){if(c==null){if(g!=null){if(f!=null)throw Error(r(92));if(We(g)){if(1<g.length)throw Error(r(93));g=g[0]}f=g}f==null&&(f=""),c=f}f=W(c),a.defaultValue=f,g=a.textContent,g===f&&g!==""&&g!==null&&(a.value=g),It(a)}function fg(a,c){if(c){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=c;return}}a.textContent=c}var Ude=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function iV(a,c,f){var g=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":g?a.setProperty(c,f):typeof f!="number"||f===0||Ude.has(c)?c==="float"?a.cssFloat=f:a[c]=(""+f).trim():a[c]=f+"px"}function rV(a,c,f){if(c!=null&&typeof c!="object")throw Error(r(62));if(a=a.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||c!=null&&c.hasOwnProperty(g)||(g.indexOf("--")===0?a.setProperty(g,""):g==="float"?a.cssFloat="":a[g]="");for(var w in c)g=c[w],c.hasOwnProperty(w)&&f[w]!==g&&iV(a,w,g)}else for(var S in c)c.hasOwnProperty(S)&&iV(a,S,c[S])}function vO(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qde=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gde=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yx(a){return Gde.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function gc(){}var bO=null;function wO(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var mg=null,yg=null;function nV(a){var c=nu(a);if(c&&(a=c.stateNode)){var f=a[vn]||null;e:switch(a=c.stateNode,c.type){case"input":if(yO(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+ia(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var g=f[c];if(g!==a&&g.form===a.form){var w=g[vn]||null;if(!w)throw Error(r(90));yO(g,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(c=0;c<f.length;c++)g=f[c],g.form===a.form&&Mi(g)}break e;case"textarea":eV(a,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&hg(a,!!f.multiple,c,!1)}}}var _O=!1;function sV(a,c,f){if(_O)return a(c,f);_O=!0;try{var g=a(c);return g}finally{if(_O=!1,(mg!==null||yg!==null)&&(L$(),mg&&(c=mg,a=yg,yg=mg=null,nV(c),a)))for(c=0;c<a.length;c++)nV(a[c])}}function Kw(a,c){var f=a.stateNode;if(f===null)return null;var g=f[vn]||null;if(g===null)return null;f=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(r(231,c,typeof f));return f}var vc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),SO=!1;if(vc)try{var e_={};Object.defineProperty(e_,"passive",{get:function(){SO=!0}}),window.addEventListener("test",e_,e_),window.removeEventListener("test",e_,e_)}catch{SO=!1}var yp=null,xO=null,Qx=null;function oV(){if(Qx)return Qx;var a,c=xO,f=c.length,g,w="value"in yp?yp.value:yp.textContent,S=w.length;for(a=0;a<f&&c[a]===w[a];a++);var T=f-a;for(g=1;g<=T&&c[f-g]===w[S-g];g++);return Qx=w.slice(a,1<g?1-g:void 0)}function Xx(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function Kx(){return!0}function aV(){return!1}function Os(a){function c(f,g,w,S,T){this._reactName=f,this._targetInst=w,this.type=g,this.nativeEvent=S,this.target=T,this.currentTarget=null;for(var k in a)a.hasOwnProperty(k)&&(f=a[k],this[k]=f?f(S):S[k]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Kx:aV,this.isPropagationStopped=aV,this}return v(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Kx)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Kx)},persist:function(){},isPersistent:Kx}),c}var Rf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},e$=Os(Rf),t_=v({},Rf,{view:0,detail:0}),Bde=Os(t_),$O,TO,i_,t$=v({},t_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:MO,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==i_&&(i_&&a.type==="mousemove"?($O=a.screenX-i_.screenX,TO=a.screenY-i_.screenY):TO=$O=0,i_=a),$O)},movementY:function(a){return"movementY"in a?a.movementY:TO}}),lV=Os(t$),Hde=v({},t$,{dataTransfer:0}),Wde=Os(Hde),Zde=v({},t_,{relatedTarget:0}),EO=Os(Zde),Jde=v({},Rf,{animationName:0,elapsedTime:0,pseudoElement:0}),Yde=Os(Jde),Qde=v({},Rf,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Xde=Os(Qde),Kde=v({},Rf,{data:0}),uV=Os(Kde),epe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tpe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ipe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rpe(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=ipe[a])?!!c[a]:!1}function MO(){return rpe}var npe=v({},t_,{key:function(a){if(a.key){var c=epe[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=Xx(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?tpe[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:MO,charCode:function(a){return a.type==="keypress"?Xx(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Xx(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),spe=Os(npe),ope=v({},t$,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cV=Os(ope),ape=v({},t_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:MO}),lpe=Os(ape),upe=v({},Rf,{propertyName:0,elapsedTime:0,pseudoElement:0}),cpe=Os(upe),dpe=v({},t$,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),ppe=Os(dpe),hpe=v({},Rf,{newState:0,oldState:0}),fpe=Os(hpe),mpe=[9,13,27,32],AO=vc&&"CompositionEvent"in window,r_=null;vc&&"documentMode"in document&&(r_=document.documentMode);var ype=vc&&"TextEvent"in window&&!r_,dV=vc&&(!AO||r_&&8<r_&&11>=r_),pV=" ",hV=!1;function fV(a,c){switch(a){case"keyup":return mpe.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mV(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var gg=!1;function gpe(a,c){switch(a){case"compositionend":return mV(c);case"keypress":return c.which!==32?null:(hV=!0,pV);case"textInput":return a=c.data,a===pV&&hV?null:a;default:return null}}function vpe(a,c){if(gg)return a==="compositionend"||!AO&&fV(a,c)?(a=oV(),Qx=xO=yp=null,gg=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return dV&&c.locale!=="ko"?null:c.data;default:return null}}var bpe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yV(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!bpe[a.type]:c==="textarea"}function gV(a,c,f,g){mg?yg?yg.push(g):yg=[g]:mg=g,c=G$(c,"onChange"),0<c.length&&(f=new e$("onChange","change",null,f,g),a.push({event:f,listeners:c}))}var n_=null,s_=null;function wpe(a){K9(a,0)}function i$(a){var c=Ni(a);if(Mi(c))return a}function vV(a,c){if(a==="change")return c}var bV=!1;if(vc){var IO;if(vc){var kO="oninput"in document;if(!kO){var wV=document.createElement("div");wV.setAttribute("oninput","return;"),kO=typeof wV.oninput=="function"}IO=kO}else IO=!1;bV=IO&&(!document.documentMode||9<document.documentMode)}function _V(){n_&&(n_.detachEvent("onpropertychange",SV),s_=n_=null)}function SV(a){if(a.propertyName==="value"&&i$(s_)){var c=[];gV(c,s_,a,wO(a)),sV(wpe,c)}}function _pe(a,c,f){a==="focusin"?(_V(),n_=c,s_=f,n_.attachEvent("onpropertychange",SV)):a==="focusout"&&_V()}function Spe(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return i$(s_)}function xpe(a,c){if(a==="click")return i$(c)}function $pe(a,c){if(a==="input"||a==="change")return i$(c)}function Tpe(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var co=typeof Object.is=="function"?Object.is:Tpe;function o_(a,c){if(co(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var f=Object.keys(a),g=Object.keys(c);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var w=f[g];if(!og.call(c,w)||!co(a[w],c[w]))return!1}return!0}function xV(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function $V(a,c){var f=xV(a);a=0;for(var g;f;){if(f.nodeType===3){if(g=a+f.textContent.length,a<=c&&g>=c)return{node:f,offset:c-a};a=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=xV(f)}}function TV(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?TV(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function EV(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=Li(a.document);c instanceof a.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)a=c.contentWindow;else break;c=Li(a.document)}return c}function OO(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}var Epe=vc&&"documentMode"in document&&11>=document.documentMode,vg=null,CO=null,a_=null,RO=!1;function MV(a,c,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;RO||vg==null||vg!==Li(g)||(g=vg,"selectionStart"in g&&OO(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),a_&&o_(a_,g)||(a_=g,g=G$(CO,"onSelect"),0<g.length&&(c=new e$("onSelect","select",null,c,f),a.push({event:c,listeners:g}),c.target=vg)))}function Pf(a,c){var f={};return f[a.toLowerCase()]=c.toLowerCase(),f["Webkit"+a]="webkit"+c,f["Moz"+a]="moz"+c,f}var bg={animationend:Pf("Animation","AnimationEnd"),animationiteration:Pf("Animation","AnimationIteration"),animationstart:Pf("Animation","AnimationStart"),transitionrun:Pf("Transition","TransitionRun"),transitionstart:Pf("Transition","TransitionStart"),transitioncancel:Pf("Transition","TransitionCancel"),transitionend:Pf("Transition","TransitionEnd")},PO={},AV={};vc&&(AV=document.createElement("div").style,"AnimationEvent"in window||(delete bg.animationend.animation,delete bg.animationiteration.animation,delete bg.animationstart.animation),"TransitionEvent"in window||delete bg.transitionend.transition);function Df(a){if(PO[a])return PO[a];if(!bg[a])return a;var c=bg[a],f;for(f in c)if(c.hasOwnProperty(f)&&f in AV)return PO[a]=c[f];return a}var IV=Df("animationend"),kV=Df("animationiteration"),OV=Df("animationstart"),Mpe=Df("transitionrun"),Ape=Df("transitionstart"),Ipe=Df("transitioncancel"),CV=Df("transitionend"),RV=new Map,DO="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");DO.push("scrollEnd");function el(a,c){RV.set(a,c),yc(c,[a])}var r$=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},ra=[],wg=0,NO=0;function n$(){for(var a=wg,c=NO=wg=0;c<a;){var f=ra[c];ra[c++]=null;var g=ra[c];ra[c++]=null;var w=ra[c];ra[c++]=null;var S=ra[c];if(ra[c++]=null,g!==null&&w!==null){var T=g.pending;T===null?w.next=w:(w.next=T.next,T.next=w),g.pending=w}S!==0&&PV(f,w,S)}}function s$(a,c,f,g){ra[wg++]=a,ra[wg++]=c,ra[wg++]=f,ra[wg++]=g,NO|=g,a.lanes|=g,a=a.alternate,a!==null&&(a.lanes|=g)}function LO(a,c,f,g){return s$(a,c,f,g),o$(a)}function Nf(a,c){return s$(a,null,null,c),o$(a)}function PV(a,c,f){a.lanes|=f;var g=a.alternate;g!==null&&(g.lanes|=f);for(var w=!1,S=a.return;S!==null;)S.childLanes|=f,g=S.alternate,g!==null&&(g.childLanes|=f),S.tag===22&&(a=S.stateNode,a===null||a._visibility&1||(w=!0)),a=S,S=S.return;return a.tag===3?(S=a.stateNode,w&&c!==null&&(w=31-as(f),a=S.hiddenUpdates,g=a[w],g===null?a[w]=[c]:g.push(c),c.lane=f|536870912),S):null}function o$(a){if(50<I_)throw I_=0,HC=null,Error(r(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var _g={};function kpe(a,c,f,g){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function po(a,c,f,g){return new kpe(a,c,f,g)}function jO(a){return a=a.prototype,!(!a||!a.isReactComponent)}function bc(a,c){var f=a.alternate;return f===null?(f=po(a.tag,c,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=c,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&65011712,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,c=a.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f.refCleanup=a.refCleanup,f}function DV(a,c){a.flags&=65011714;var f=a.alternate;return f===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,c=f.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function a$(a,c,f,g,w,S){var T=0;if(g=a,typeof a=="function")jO(a)&&(T=1);else if(typeof a=="string")T=Dhe(a,f,Ce.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case ce:return a=po(31,f,c,w),a.elementType=ce,a.lanes=S,a;case $:return Lf(f.children,w,S,c);case E:T=8,w|=24;break;case A:return a=po(12,f,c,w|2),a.elementType=A,a.lanes=S,a;case P:return a=po(13,f,c,w),a.elementType=P,a.lanes=S,a;case j:return a=po(19,f,c,w),a.elementType=j,a.lanes=S,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case D:T=10;break e;case O:T=9;break e;case R:T=11;break e;case Q:T=14;break e;case re:T=16,g=null;break e}T=29,f=Error(r(130,a===null?"null":typeof a,"")),g=null}return c=po(T,f,c,w),c.elementType=a,c.type=g,c.lanes=S,c}function Lf(a,c,f,g){return a=po(7,a,g,c),a.lanes=f,a}function zO(a,c,f){return a=po(6,a,null,c),a.lanes=f,a}function NV(a){var c=po(18,null,null,0);return c.stateNode=a,c}function FO(a,c,f){return c=po(4,a.children!==null?a.children:[],a.key,c),c.lanes=f,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var LV=new WeakMap;function na(a,c){if(typeof a=="object"&&a!==null){var f=LV.get(a);return f!==void 0?f:(c={value:a,source:c,stack:Vx(c)},LV.set(a,c),c)}return{value:a,source:c,stack:Vx(c)}}var Sg=[],xg=0,l$=null,l_=0,sa=[],oa=0,gp=null,su=1,ou="";function wc(a,c){Sg[xg++]=l_,Sg[xg++]=l$,l$=a,l_=c}function jV(a,c,f){sa[oa++]=su,sa[oa++]=ou,sa[oa++]=gp,gp=a;var g=su;a=ou;var w=32-as(g)-1;g&=~(1<<w),f+=1;var S=32-as(c)+w;if(30<S){var T=w-w%5;S=(g&(1<<T)-1).toString(32),g>>=T,w-=T,su=1<<32-as(c)+w|f<<w|g,ou=S+a}else su=1<<S|f<<w|g,ou=a}function VO(a){a.return!==null&&(wc(a,1),jV(a,1,0))}function UO(a){for(;a===l$;)l$=Sg[--xg],Sg[xg]=null,l_=Sg[--xg],Sg[xg]=null;for(;a===gp;)gp=sa[--oa],sa[oa]=null,ou=sa[--oa],sa[oa]=null,su=sa[--oa],sa[oa]=null}function zV(a,c){sa[oa++]=su,sa[oa++]=ou,sa[oa++]=gp,su=c.id,ou=c.overflow,gp=a}var bn=null,Ai=null,Et=!1,vp=null,aa=!1,qO=Error(r(519));function bp(a){var c=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw u_(na(c,a)),qO}function FV(a){var c=a.stateNode,f=a.type,g=a.memoizedProps;switch(c[vi]=a,c[vn]=g,f){case"dialog":yt("cancel",c),yt("close",c);break;case"iframe":case"object":case"embed":yt("load",c);break;case"video":case"audio":for(f=0;f<O_.length;f++)yt(O_[f],c);break;case"source":yt("error",c);break;case"img":case"image":case"link":yt("error",c),yt("load",c);break;case"details":yt("toggle",c);break;case"input":yt("invalid",c),K8(c,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":yt("invalid",c);break;case"textarea":yt("invalid",c),tV(c,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||g.suppressHydrationWarning===!0||r7(c.textContent,f)?(g.popover!=null&&(yt("beforetoggle",c),yt("toggle",c)),g.onScroll!=null&&yt("scroll",c),g.onScrollEnd!=null&&yt("scrollend",c),g.onClick!=null&&(c.onclick=gc),c=!0):c=!1,c||bp(a,!0)}function VV(a){for(bn=a.return;bn;)switch(bn.tag){case 5:case 31:case 13:aa=!1;return;case 27:case 3:aa=!0;return;default:bn=bn.return}}function $g(a){if(a!==bn)return!1;if(!Et)return VV(a),Et=!0,!1;var c=a.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=a.type,f=!(f!=="form"&&f!=="button")||aR(a.type,a.memoizedProps)),f=!f),f&&Ai&&bp(a),VV(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Ai=p7(a)}else if(c===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Ai=p7(a)}else c===27?(c=Ai,Rp(a.type)?(a=pR,pR=null,Ai=a):Ai=c):Ai=bn?ua(a.stateNode.nextSibling):null;return!0}function jf(){Ai=bn=null,Et=!1}function GO(){var a=vp;return a!==null&&(Ds===null?Ds=a:Ds.push.apply(Ds,a),vp=null),a}function u_(a){vp===null?vp=[a]:vp.push(a)}var BO=U(null),zf=null,_c=null;function wp(a,c,f){$e(BO,c._currentValue),c._currentValue=f}function Sc(a){a._currentValue=BO.current,ae(BO)}function HO(a,c,f){for(;a!==null;){var g=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),a===f)break;a=a.return}}function WO(a,c,f,g){var w=a.child;for(w!==null&&(w.return=a);w!==null;){var S=w.dependencies;if(S!==null){var T=w.child;S=S.firstContext;e:for(;S!==null;){var k=S;S=w;for(var N=0;N<c.length;N++)if(k.context===c[N]){S.lanes|=f,k=S.alternate,k!==null&&(k.lanes|=f),HO(S.return,f,a),g||(T=null);break e}S=k.next}}else if(w.tag===18){if(T=w.return,T===null)throw Error(r(341));T.lanes|=f,S=T.alternate,S!==null&&(S.lanes|=f),HO(T,f,a),T=null}else T=w.child;if(T!==null)T.return=w;else for(T=w;T!==null;){if(T===a){T=null;break}if(w=T.sibling,w!==null){w.return=T.return,T=w;break}T=T.return}w=T}}function Tg(a,c,f,g){a=null;for(var w=c,S=!1;w!==null;){if(!S){if((w.flags&524288)!==0)S=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var T=w.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var k=w.type;co(w.pendingProps.value,T.value)||(a!==null?a.push(k):a=[k])}}else if(w===Dt.current){if(T=w.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(a!==null?a.push(N_):a=[N_])}w=w.return}a!==null&&WO(c,a,f,g),c.flags|=262144}function u$(a){for(a=a.firstContext;a!==null;){if(!co(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ff(a){zf=a,_c=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function wn(a){return UV(zf,a)}function c$(a,c){return zf===null&&Ff(a),UV(a,c)}function UV(a,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},_c===null){if(a===null)throw Error(r(308));_c=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else _c=_c.next=c;return f}var Ope=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(f,g){a.push(g)}};this.abort=function(){c.aborted=!0,a.forEach(function(f){return f()})}},Cpe=t.unstable_scheduleCallback,Rpe=t.unstable_NormalPriority,xr={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ZO(){return{controller:new Ope,data:new Map,refCount:0}}function c_(a){a.refCount--,a.refCount===0&&Cpe(Rpe,function(){a.controller.abort()})}var d_=null,JO=0,Eg=0,Mg=null;function Ppe(a,c){if(d_===null){var f=d_=[];JO=0,Eg=XC(),Mg={status:"pending",value:void 0,then:function(g){f.push(g)}}}return JO++,c.then(qV,qV),c}function qV(){if(--JO===0&&d_!==null){Mg!==null&&(Mg.status="fulfilled");var a=d_;d_=null,Eg=0,Mg=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function Dpe(a,c){var f=[],g={status:"pending",value:null,reason:null,then:function(w){f.push(w)}};return a.then(function(){g.status="fulfilled",g.value=c;for(var w=0;w<f.length;w++)(0,f[w])(c)},function(w){for(g.status="rejected",g.reason=w,w=0;w<f.length;w++)(0,f[w])(void 0)}),g}var GV=ee.S;ee.S=function(a,c){M9=ss(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&Ppe(a,c),GV!==null&&GV(a,c)};var Vf=U(null);function YO(){var a=Vf.current;return a!==null?a:di.pooledCache}function d$(a,c){c===null?$e(Vf,Vf.current):$e(Vf,c.pool)}function BV(){var a=YO();return a===null?null:{parent:xr._currentValue,pool:a}}var Ag=Error(r(460)),QO=Error(r(474)),p$=Error(r(542)),h$={then:function(){}};function HV(a){return a=a.status,a==="fulfilled"||a==="rejected"}function WV(a,c,f){switch(f=a[f],f===void 0?a.push(c):f!==c&&(c.then(gc,gc),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,JV(a),a;default:if(typeof c.status=="string")c.then(gc,gc);else{if(a=di,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=c,a.status="pending",a.then(function(g){if(c.status==="pending"){var w=c;w.status="fulfilled",w.value=g}},function(g){if(c.status==="pending"){var w=c;w.status="rejected",w.reason=g}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,JV(a),a}throw qf=c,Ag}}function Uf(a){try{var c=a._init;return c(a._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(qf=f,Ag):f}}var qf=null;function ZV(){if(qf===null)throw Error(r(459));var a=qf;return qf=null,a}function JV(a){if(a===Ag||a===p$)throw Error(r(483))}var Ig=null,p_=0;function f$(a){var c=p_;return p_+=1,Ig===null&&(Ig=[]),WV(Ig,a,c)}function h_(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function m$(a,c){throw c.$$typeof===b?Error(r(525)):(a=Object.prototype.toString.call(c),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function YV(a){function c(G,V){if(a){var Z=G.deletions;Z===null?(G.deletions=[V],G.flags|=16):Z.push(V)}}function f(G,V){if(!a)return null;for(;V!==null;)c(G,V),V=V.sibling;return null}function g(G){for(var V=new Map;G!==null;)G.key!==null?V.set(G.key,G):V.set(G.index,G),G=G.sibling;return V}function w(G,V){return G=bc(G,V),G.index=0,G.sibling=null,G}function S(G,V,Z){return G.index=Z,a?(Z=G.alternate,Z!==null?(Z=Z.index,Z<V?(G.flags|=67108866,V):Z):(G.flags|=67108866,V)):(G.flags|=1048576,V)}function T(G){return a&&G.alternate===null&&(G.flags|=67108866),G}function k(G,V,Z,oe){return V===null||V.tag!==6?(V=zO(Z,G.mode,oe),V.return=G,V):(V=w(V,Z),V.return=G,V)}function N(G,V,Z,oe){var qe=Z.type;return qe===$?ne(G,V,Z.props.children,oe,Z.key):V!==null&&(V.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===re&&Uf(qe)===V.type)?(V=w(V,Z.props),h_(V,Z),V.return=G,V):(V=a$(Z.type,Z.key,Z.props,null,G.mode,oe),h_(V,Z),V.return=G,V)}function J(G,V,Z,oe){return V===null||V.tag!==4||V.stateNode.containerInfo!==Z.containerInfo||V.stateNode.implementation!==Z.implementation?(V=FO(Z,G.mode,oe),V.return=G,V):(V=w(V,Z.children||[]),V.return=G,V)}function ne(G,V,Z,oe,qe){return V===null||V.tag!==7?(V=Lf(Z,G.mode,oe,qe),V.return=G,V):(V=w(V,Z),V.return=G,V)}function le(G,V,Z){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=zO(""+V,G.mode,Z),V.return=G,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case _:return Z=a$(V.type,V.key,V.props,null,G.mode,Z),h_(Z,V),Z.return=G,Z;case x:return V=FO(V,G.mode,Z),V.return=G,V;case re:return V=Uf(V),le(G,V,Z)}if(We(V)||he(V))return V=Lf(V,G.mode,Z,null),V.return=G,V;if(typeof V.then=="function")return le(G,f$(V),Z);if(V.$$typeof===D)return le(G,c$(G,V),Z);m$(G,V)}return null}function X(G,V,Z,oe){var qe=V!==null?V.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return qe!==null?null:k(G,V,""+Z,oe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case _:return Z.key===qe?N(G,V,Z,oe):null;case x:return Z.key===qe?J(G,V,Z,oe):null;case re:return Z=Uf(Z),X(G,V,Z,oe)}if(We(Z)||he(Z))return qe!==null?null:ne(G,V,Z,oe,null);if(typeof Z.then=="function")return X(G,V,f$(Z),oe);if(Z.$$typeof===D)return X(G,V,c$(G,Z),oe);m$(G,Z)}return null}function te(G,V,Z,oe,qe){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return G=G.get(Z)||null,k(V,G,""+oe,qe);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case _:return G=G.get(oe.key===null?Z:oe.key)||null,N(V,G,oe,qe);case x:return G=G.get(oe.key===null?Z:oe.key)||null,J(V,G,oe,qe);case re:return oe=Uf(oe),te(G,V,Z,oe,qe)}if(We(oe)||he(oe))return G=G.get(Z)||null,ne(V,G,oe,qe,null);if(typeof oe.then=="function")return te(G,V,Z,f$(oe),qe);if(oe.$$typeof===D)return te(G,V,Z,c$(V,oe),qe);m$(V,oe)}return null}function De(G,V,Z,oe){for(var qe=null,Nt=null,ze=V,lt=V=0,wt=null;ze!==null&&lt<Z.length;lt++){ze.index>lt?(wt=ze,ze=null):wt=ze.sibling;var Lt=X(G,ze,Z[lt],oe);if(Lt===null){ze===null&&(ze=wt);break}a&&ze&&Lt.alternate===null&&c(G,ze),V=S(Lt,V,lt),Nt===null?qe=Lt:Nt.sibling=Lt,Nt=Lt,ze=wt}if(lt===Z.length)return f(G,ze),Et&&wc(G,lt),qe;if(ze===null){for(;lt<Z.length;lt++)ze=le(G,Z[lt],oe),ze!==null&&(V=S(ze,V,lt),Nt===null?qe=ze:Nt.sibling=ze,Nt=ze);return Et&&wc(G,lt),qe}for(ze=g(ze);lt<Z.length;lt++)wt=te(ze,G,lt,Z[lt],oe),wt!==null&&(a&&wt.alternate!==null&&ze.delete(wt.key===null?lt:wt.key),V=S(wt,V,lt),Nt===null?qe=wt:Nt.sibling=wt,Nt=wt);return a&&ze.forEach(function(jp){return c(G,jp)}),Et&&wc(G,lt),qe}function He(G,V,Z,oe){if(Z==null)throw Error(r(151));for(var qe=null,Nt=null,ze=V,lt=V=0,wt=null,Lt=Z.next();ze!==null&&!Lt.done;lt++,Lt=Z.next()){ze.index>lt?(wt=ze,ze=null):wt=ze.sibling;var jp=X(G,ze,Lt.value,oe);if(jp===null){ze===null&&(ze=wt);break}a&&ze&&jp.alternate===null&&c(G,ze),V=S(jp,V,lt),Nt===null?qe=jp:Nt.sibling=jp,Nt=jp,ze=wt}if(Lt.done)return f(G,ze),Et&&wc(G,lt),qe;if(ze===null){for(;!Lt.done;lt++,Lt=Z.next())Lt=le(G,Lt.value,oe),Lt!==null&&(V=S(Lt,V,lt),Nt===null?qe=Lt:Nt.sibling=Lt,Nt=Lt);return Et&&wc(G,lt),qe}for(ze=g(ze);!Lt.done;lt++,Lt=Z.next())Lt=te(ze,G,lt,Lt.value,oe),Lt!==null&&(a&&Lt.alternate!==null&&ze.delete(Lt.key===null?lt:Lt.key),V=S(Lt,V,lt),Nt===null?qe=Lt:Nt.sibling=Lt,Nt=Lt);return a&&ze.forEach(function(Hhe){return c(G,Hhe)}),Et&&wc(G,lt),qe}function ni(G,V,Z,oe){if(typeof Z=="object"&&Z!==null&&Z.type===$&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case _:e:{for(var qe=Z.key;V!==null;){if(V.key===qe){if(qe=Z.type,qe===$){if(V.tag===7){f(G,V.sibling),oe=w(V,Z.props.children),oe.return=G,G=oe;break e}}else if(V.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===re&&Uf(qe)===V.type){f(G,V.sibling),oe=w(V,Z.props),h_(oe,Z),oe.return=G,G=oe;break e}f(G,V);break}else c(G,V);V=V.sibling}Z.type===$?(oe=Lf(Z.props.children,G.mode,oe,Z.key),oe.return=G,G=oe):(oe=a$(Z.type,Z.key,Z.props,null,G.mode,oe),h_(oe,Z),oe.return=G,G=oe)}return T(G);case x:e:{for(qe=Z.key;V!==null;){if(V.key===qe)if(V.tag===4&&V.stateNode.containerInfo===Z.containerInfo&&V.stateNode.implementation===Z.implementation){f(G,V.sibling),oe=w(V,Z.children||[]),oe.return=G,G=oe;break e}else{f(G,V);break}else c(G,V);V=V.sibling}oe=FO(Z,G.mode,oe),oe.return=G,G=oe}return T(G);case re:return Z=Uf(Z),ni(G,V,Z,oe)}if(We(Z))return De(G,V,Z,oe);if(he(Z)){if(qe=he(Z),typeof qe!="function")throw Error(r(150));return Z=qe.call(Z),He(G,V,Z,oe)}if(typeof Z.then=="function")return ni(G,V,f$(Z),oe);if(Z.$$typeof===D)return ni(G,V,c$(G,Z),oe);m$(G,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,V!==null&&V.tag===6?(f(G,V.sibling),oe=w(V,Z),oe.return=G,G=oe):(f(G,V),oe=zO(Z,G.mode,oe),oe.return=G,G=oe),T(G)):f(G,V)}return function(G,V,Z,oe){try{p_=0;var qe=ni(G,V,Z,oe);return Ig=null,qe}catch(ze){if(ze===Ag||ze===p$)throw ze;var Nt=po(29,ze,null,G.mode);return Nt.lanes=oe,Nt.return=G,Nt}}}var Gf=YV(!0),QV=YV(!1),_p=!1;function XO(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function KO(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Sp(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function xp(a,c,f){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(Ft&2)!==0){var w=g.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),g.pending=c,c=o$(a),PV(a,null,f),c}return s$(a,g,c,f),o$(a)}function f_(a,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var g=c.lanes;g&=a.pendingLanes,f|=g,c.lanes=f,If(a,f)}}function eC(a,c){var f=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var w=null,S=null;if(f=f.firstBaseUpdate,f!==null){do{var T={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};S===null?w=S=T:S=S.next=T,f=f.next}while(f!==null);S===null?w=S=c:S=S.next=c}else w=S=c;f={baseState:g.baseState,firstBaseUpdate:w,lastBaseUpdate:S,shared:g.shared,callbacks:g.callbacks},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=c}var tC=!1;function m_(){if(tC){var a=Mg;if(a!==null)throw a}}function y_(a,c,f,g){tC=!1;var w=a.updateQueue;_p=!1;var S=w.firstBaseUpdate,T=w.lastBaseUpdate,k=w.shared.pending;if(k!==null){w.shared.pending=null;var N=k,J=N.next;N.next=null,T===null?S=J:T.next=J,T=N;var ne=a.alternate;ne!==null&&(ne=ne.updateQueue,k=ne.lastBaseUpdate,k!==T&&(k===null?ne.firstBaseUpdate=J:k.next=J,ne.lastBaseUpdate=N))}if(S!==null){var le=w.baseState;T=0,ne=J=N=null,k=S;do{var X=k.lane&-536870913,te=X!==k.lane;if(te?(bt&X)===X:(g&X)===X){X!==0&&X===Eg&&(tC=!0),ne!==null&&(ne=ne.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var De=a,He=k;X=c;var ni=f;switch(He.tag){case 1:if(De=He.payload,typeof De=="function"){le=De.call(ni,le,X);break e}le=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=He.payload,X=typeof De=="function"?De.call(ni,le,X):De,X==null)break e;le=v({},le,X);break e;case 2:_p=!0}}X=k.callback,X!==null&&(a.flags|=64,te&&(a.flags|=8192),te=w.callbacks,te===null?w.callbacks=[X]:te.push(X))}else te={lane:X,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ne===null?(J=ne=te,N=le):ne=ne.next=te,T|=X;if(k=k.next,k===null){if(k=w.shared.pending,k===null)break;te=k,k=te.next,te.next=null,w.lastBaseUpdate=te,w.shared.pending=null}}while(!0);ne===null&&(N=le),w.baseState=N,w.firstBaseUpdate=J,w.lastBaseUpdate=ne,S===null&&(w.shared.lanes=0),Ap|=T,a.lanes=T,a.memoizedState=le}}function XV(a,c){if(typeof a!="function")throw Error(r(191,a));a.call(c)}function KV(a,c){var f=a.callbacks;if(f!==null)for(a.callbacks=null,a=0;a<f.length;a++)XV(f[a],c)}var kg=U(null),y$=U(0);function eU(a,c){a=Oc,$e(y$,a),$e(kg,c),Oc=a|c.baseLanes}function iC(){$e(y$,Oc),$e(kg,kg.current)}function rC(){Oc=y$.current,ae(kg),ae(y$)}var ho=U(null),la=null;function $p(a){var c=a.alternate;$e(fr,fr.current&1),$e(ho,a),la===null&&(c===null||kg.current!==null||c.memoizedState!==null)&&(la=a)}function nC(a){$e(fr,fr.current),$e(ho,a),la===null&&(la=a)}function tU(a){a.tag===22?($e(fr,fr.current),$e(ho,a),la===null&&(la=a)):Tp()}function Tp(){$e(fr,fr.current),$e(ho,ho.current)}function fo(a){ae(ho),la===a&&(la=null),ae(fr)}var fr=U(0);function g$(a){for(var c=a;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||cR(f)||dR(f)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var xc=0,st=null,ii=null,$r=null,v$=!1,Og=!1,Bf=!1,b$=0,g_=0,Cg=null,Npe=0;function Qi(){throw Error(r(321))}function sC(a,c){if(c===null)return!1;for(var f=0;f<c.length&&f<a.length;f++)if(!co(a[f],c[f]))return!1;return!0}function oC(a,c,f,g,w,S){return xc=S,st=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,ee.H=a===null||a.memoizedState===null?jU:_C,Bf=!1,S=f(g,w),Bf=!1,Og&&(S=rU(c,f,g,w)),iU(a),S}function iU(a){ee.H=w_;var c=ii!==null&&ii.next!==null;if(xc=0,$r=ii=st=null,v$=!1,g_=0,Cg=null,c)throw Error(r(300));a===null||Tr||(a=a.dependencies,a!==null&&u$(a)&&(Tr=!0))}function rU(a,c,f,g){st=a;var w=0;do{if(Og&&(Cg=null),g_=0,Og=!1,25<=w)throw Error(r(301));if(w+=1,$r=ii=null,a.updateQueue!=null){var S=a.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}ee.H=zU,S=c(f,g)}while(Og);return S}function Lpe(){var a=ee.H,c=a.useState()[0];return c=typeof c.then=="function"?v_(c):c,a=a.useState()[0],(ii!==null?ii.memoizedState:null)!==a&&(st.flags|=1024),c}function aC(){var a=b$!==0;return b$=0,a}function lC(a,c,f){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~f}function uC(a){if(v$){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}v$=!1}xc=0,$r=ii=st=null,Og=!1,g_=b$=0,Cg=null}function us(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $r===null?st.memoizedState=$r=a:$r=$r.next=a,$r}function mr(){if(ii===null){var a=st.alternate;a=a!==null?a.memoizedState:null}else a=ii.next;var c=$r===null?st.memoizedState:$r.next;if(c!==null)$r=c,ii=a;else{if(a===null)throw st.alternate===null?Error(r(467)):Error(r(310));ii=a,a={memoizedState:ii.memoizedState,baseState:ii.baseState,baseQueue:ii.baseQueue,queue:ii.queue,next:null},$r===null?st.memoizedState=$r=a:$r=$r.next=a}return $r}function w$(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function v_(a){var c=g_;return g_+=1,Cg===null&&(Cg=[]),a=WV(Cg,a,c),c=st,($r===null?c.memoizedState:$r.next)===null&&(c=c.alternate,ee.H=c===null||c.memoizedState===null?jU:_C),a}function _$(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return v_(a);if(a.$$typeof===D)return wn(a)}throw Error(r(438,String(a)))}function cC(a){var c=null,f=st.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var g=st.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(c={data:g.data.map(function(w){return w.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=w$(),st.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(a),g=0;g<a;g++)f[g]=ue;return c.index++,f}function $c(a,c){return typeof c=="function"?c(a):c}function S$(a){var c=mr();return dC(c,ii,a)}function dC(a,c,f){var g=a.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=f;var w=a.baseQueue,S=g.pending;if(S!==null){if(w!==null){var T=w.next;w.next=S.next,S.next=T}c.baseQueue=w=S,g.pending=null}if(S=a.baseState,w===null)a.memoizedState=S;else{c=w.next;var k=T=null,N=null,J=c,ne=!1;do{var le=J.lane&-536870913;if(le!==J.lane?(bt&le)===le:(xc&le)===le){var X=J.revertLane;if(X===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),le===Eg&&(ne=!0);else if((xc&X)===X){J=J.next,X===Eg&&(ne=!0);continue}else le={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},N===null?(k=N=le,T=S):N=N.next=le,st.lanes|=X,Ap|=X;le=J.action,Bf&&f(S,le),S=J.hasEagerState?J.eagerState:f(S,le)}else X={lane:le,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},N===null?(k=N=X,T=S):N=N.next=X,st.lanes|=le,Ap|=le;J=J.next}while(J!==null&&J!==c);if(N===null?T=S:N.next=k,!co(S,a.memoizedState)&&(Tr=!0,ne&&(f=Mg,f!==null)))throw f;a.memoizedState=S,a.baseState=T,a.baseQueue=N,g.lastRenderedState=S}return w===null&&(g.lanes=0),[a.memoizedState,g.dispatch]}function pC(a){var c=mr(),f=c.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=a;var g=f.dispatch,w=f.pending,S=c.memoizedState;if(w!==null){f.pending=null;var T=w=w.next;do S=a(S,T.action),T=T.next;while(T!==w);co(S,c.memoizedState)||(Tr=!0),c.memoizedState=S,c.baseQueue===null&&(c.baseState=S),f.lastRenderedState=S}return[S,g]}function nU(a,c,f){var g=st,w=mr(),S=Et;if(S){if(f===void 0)throw Error(r(407));f=f()}else f=c();var T=!co((ii||w).memoizedState,f);if(T&&(w.memoizedState=f,Tr=!0),w=w.queue,mC(aU.bind(null,g,w,a),[a]),w.getSnapshot!==c||T||$r!==null&&$r.memoizedState.tag&1){if(g.flags|=2048,Rg(9,{destroy:void 0},oU.bind(null,g,w,f,c),null),di===null)throw Error(r(349));S||(xc&127)!==0||sU(g,c,f)}return f}function sU(a,c,f){a.flags|=16384,a={getSnapshot:c,value:f},c=st.updateQueue,c===null?(c=w$(),st.updateQueue=c,c.stores=[a]):(f=c.stores,f===null?c.stores=[a]:f.push(a))}function oU(a,c,f,g){c.value=f,c.getSnapshot=g,lU(c)&&uU(a)}function aU(a,c,f){return f(function(){lU(c)&&uU(a)})}function lU(a){var c=a.getSnapshot;a=a.value;try{var f=c();return!co(a,f)}catch{return!0}}function uU(a){var c=Nf(a,2);c!==null&&Ns(c,a,2)}function hC(a){var c=us();if(typeof a=="function"){var f=a;if(a=f(),Bf){iu(!0);try{f()}finally{iu(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$c,lastRenderedState:a},c}function cU(a,c,f,g){return a.baseState=f,dC(a,ii,typeof g=="function"?g:$c)}function jpe(a,c,f,g,w){if(T$(a))throw Error(r(485));if(a=c.action,a!==null){var S={payload:w,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){S.listeners.push(T)}};ee.T!==null?f(!0):S.isTransition=!1,g(S),f=c.pending,f===null?(S.next=c.pending=S,dU(c,S)):(S.next=f.next,c.pending=f.next=S)}}function dU(a,c){var f=c.action,g=c.payload,w=a.state;if(c.isTransition){var S=ee.T,T={};ee.T=T;try{var k=f(w,g),N=ee.S;N!==null&&N(T,k),pU(a,c,k)}catch(J){fC(a,c,J)}finally{S!==null&&T.types!==null&&(S.types=T.types),ee.T=S}}else try{S=f(w,g),pU(a,c,S)}catch(J){fC(a,c,J)}}function pU(a,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){hU(a,c,g)},function(g){return fC(a,c,g)}):hU(a,c,f)}function hU(a,c,f){c.status="fulfilled",c.value=f,fU(c),a.state=f,c=a.pending,c!==null&&(f=c.next,f===c?a.pending=null:(f=f.next,c.next=f,dU(a,f)))}function fC(a,c,f){var g=a.pending;if(a.pending=null,g!==null){g=g.next;do c.status="rejected",c.reason=f,fU(c),c=c.next;while(c!==g)}a.action=null}function fU(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function mU(a,c){return c}function yU(a,c){if(Et){var f=di.formState;if(f!==null){e:{var g=st;if(Et){if(Ai){t:{for(var w=Ai,S=aa;w.nodeType!==8;){if(!S){w=null;break t}if(w=ua(w.nextSibling),w===null){w=null;break t}}S=w.data,w=S==="F!"||S==="F"?w:null}if(w){Ai=ua(w.nextSibling),g=w.data==="F!";break e}}bp(g)}g=!1}g&&(c=f[0])}}return f=us(),f.memoizedState=f.baseState=c,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mU,lastRenderedState:c},f.queue=g,f=DU.bind(null,st,g),g.dispatch=f,g=hC(!1),S=wC.bind(null,st,!1,g.queue),g=us(),w={state:c,dispatch:null,action:a,pending:null},g.queue=w,f=jpe.bind(null,st,w,S,f),w.dispatch=f,g.memoizedState=a,[c,f,!1]}function gU(a){var c=mr();return vU(c,ii,a)}function vU(a,c,f){if(c=dC(a,c,mU)[0],a=S$($c)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var g=v_(c)}catch(T){throw T===Ag?p$:T}else g=c;c=mr();var w=c.queue,S=w.dispatch;return f!==c.memoizedState&&(st.flags|=2048,Rg(9,{destroy:void 0},zpe.bind(null,w,f),null)),[g,S,a]}function zpe(a,c){a.action=c}function bU(a){var c=mr(),f=ii;if(f!==null)return vU(c,f,a);mr(),c=c.memoizedState,f=mr();var g=f.queue.dispatch;return f.memoizedState=a,[c,g,!1]}function Rg(a,c,f,g){return a={tag:a,create:f,deps:g,inst:c,next:null},c=st.updateQueue,c===null&&(c=w$(),st.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=a.next=a:(g=f.next,f.next=a,a.next=g,c.lastEffect=a),a}function wU(){return mr().memoizedState}function x$(a,c,f,g){var w=us();st.flags|=a,w.memoizedState=Rg(1|c,{destroy:void 0},f,g===void 0?null:g)}function $$(a,c,f,g){var w=mr();g=g===void 0?null:g;var S=w.memoizedState.inst;ii!==null&&g!==null&&sC(g,ii.memoizedState.deps)?w.memoizedState=Rg(c,S,f,g):(st.flags|=a,w.memoizedState=Rg(1|c,S,f,g))}function _U(a,c){x$(8390656,8,a,c)}function mC(a,c){$$(2048,8,a,c)}function Fpe(a){st.flags|=4;var c=st.updateQueue;if(c===null)c=w$(),st.updateQueue=c,c.events=[a];else{var f=c.events;f===null?c.events=[a]:f.push(a)}}function SU(a){var c=mr().memoizedState;return Fpe({ref:c,nextImpl:a}),function(){if((Ft&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}function xU(a,c){return $$(4,2,a,c)}function $U(a,c){return $$(4,4,a,c)}function TU(a,c){if(typeof c=="function"){a=a();var f=c(a);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function EU(a,c,f){f=f!=null?f.concat([a]):null,$$(4,4,TU.bind(null,c,a),f)}function yC(){}function MU(a,c){var f=mr();c=c===void 0?null:c;var g=f.memoizedState;return c!==null&&sC(c,g[1])?g[0]:(f.memoizedState=[a,c],a)}function AU(a,c){var f=mr();c=c===void 0?null:c;var g=f.memoizedState;if(c!==null&&sC(c,g[1]))return g[0];if(g=a(),Bf){iu(!0);try{a()}finally{iu(!1)}}return f.memoizedState=[g,c],g}function gC(a,c,f){return f===void 0||(xc&1073741824)!==0&&(bt&261930)===0?a.memoizedState=c:(a.memoizedState=f,a=I9(),st.lanes|=a,Ap|=a,f)}function IU(a,c,f,g){return co(f,c)?f:kg.current!==null?(a=gC(a,f,g),co(a,c)||(Tr=!0),a):(xc&42)===0||(xc&1073741824)!==0&&(bt&261930)===0?(Tr=!0,a.memoizedState=f):(a=I9(),st.lanes|=a,Ap|=a,c)}function kU(a,c,f,g,w){var S=ge.p;ge.p=S!==0&&8>S?S:8;var T=ee.T,k={};ee.T=k,wC(a,!1,c,f);try{var N=w(),J=ee.S;if(J!==null&&J(k,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var ne=Dpe(N,g);b_(a,c,ne,go(a))}else b_(a,c,g,go(a))}catch(le){b_(a,c,{then:function(){},status:"rejected",reason:le},go())}finally{ge.p=S,T!==null&&k.types!==null&&(T.types=k.types),ee.T=T}}function Vpe(){}function vC(a,c,f,g){if(a.tag!==5)throw Error(r(476));var w=OU(a).queue;kU(a,w,c,Se,f===null?Vpe:function(){return CU(a),f(g)})}function OU(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:Se,baseState:Se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$c,lastRenderedState:Se},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$c,lastRenderedState:f},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function CU(a){var c=OU(a);c.next===null&&(c=a.alternate.memoizedState),b_(a,c.next.queue,{},go())}function bC(){return wn(N_)}function RU(){return mr().memoizedState}function PU(){return mr().memoizedState}function Upe(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var f=go();a=Sp(f);var g=xp(c,a,f);g!==null&&(Ns(g,c,f),f_(g,c,f)),c={cache:ZO()},a.payload=c;return}c=c.return}}function qpe(a,c,f){var g=go();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},T$(a)?NU(c,f):(f=LO(a,c,f,g),f!==null&&(Ns(f,a,g),LU(f,c,g)))}function DU(a,c,f){var g=go();b_(a,c,f,g)}function b_(a,c,f,g){var w={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(T$(a))NU(c,w);else{var S=a.alternate;if(a.lanes===0&&(S===null||S.lanes===0)&&(S=c.lastRenderedReducer,S!==null))try{var T=c.lastRenderedState,k=S(T,f);if(w.hasEagerState=!0,w.eagerState=k,co(k,T))return s$(a,c,w,0),di===null&&n$(),!1}catch{}if(f=LO(a,c,w,g),f!==null)return Ns(f,a,g),LU(f,c,g),!0}return!1}function wC(a,c,f,g){if(g={lane:2,revertLane:XC(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},T$(a)){if(c)throw Error(r(479))}else c=LO(a,f,g,2),c!==null&&Ns(c,a,2)}function T$(a){var c=a.alternate;return a===st||c!==null&&c===st}function NU(a,c){Og=v$=!0;var f=a.pending;f===null?c.next=c:(c.next=f.next,f.next=c),a.pending=c}function LU(a,c,f){if((f&4194048)!==0){var g=c.lanes;g&=a.pendingLanes,f|=g,c.lanes=f,If(a,f)}}var w_={readContext:wn,use:_$,useCallback:Qi,useContext:Qi,useEffect:Qi,useImperativeHandle:Qi,useLayoutEffect:Qi,useInsertionEffect:Qi,useMemo:Qi,useReducer:Qi,useRef:Qi,useState:Qi,useDebugValue:Qi,useDeferredValue:Qi,useTransition:Qi,useSyncExternalStore:Qi,useId:Qi,useHostTransitionStatus:Qi,useFormState:Qi,useActionState:Qi,useOptimistic:Qi,useMemoCache:Qi,useCacheRefresh:Qi};w_.useEffectEvent=Qi;var jU={readContext:wn,use:_$,useCallback:function(a,c){return us().memoizedState=[a,c===void 0?null:c],a},useContext:wn,useEffect:_U,useImperativeHandle:function(a,c,f){f=f!=null?f.concat([a]):null,x$(4194308,4,TU.bind(null,c,a),f)},useLayoutEffect:function(a,c){return x$(4194308,4,a,c)},useInsertionEffect:function(a,c){x$(4,2,a,c)},useMemo:function(a,c){var f=us();c=c===void 0?null:c;var g=a();if(Bf){iu(!0);try{a()}finally{iu(!1)}}return f.memoizedState=[g,c],g},useReducer:function(a,c,f){var g=us();if(f!==void 0){var w=f(c);if(Bf){iu(!0);try{f(c)}finally{iu(!1)}}}else w=c;return g.memoizedState=g.baseState=w,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:w},g.queue=a,a=a.dispatch=qpe.bind(null,st,a),[g.memoizedState,a]},useRef:function(a){var c=us();return a={current:a},c.memoizedState=a},useState:function(a){a=hC(a);var c=a.queue,f=DU.bind(null,st,c);return c.dispatch=f,[a.memoizedState,f]},useDebugValue:yC,useDeferredValue:function(a,c){var f=us();return gC(f,a,c)},useTransition:function(){var a=hC(!1);return a=kU.bind(null,st,a.queue,!0,!1),us().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,f){var g=st,w=us();if(Et){if(f===void 0)throw Error(r(407));f=f()}else{if(f=c(),di===null)throw Error(r(349));(bt&127)!==0||sU(g,c,f)}w.memoizedState=f;var S={value:f,getSnapshot:c};return w.queue=S,_U(aU.bind(null,g,S,a),[a]),g.flags|=2048,Rg(9,{destroy:void 0},oU.bind(null,g,S,f,c),null),f},useId:function(){var a=us(),c=di.identifierPrefix;if(Et){var f=ou,g=su;f=(g&~(1<<32-as(g)-1)).toString(32)+f,c="_"+c+"R_"+f,f=b$++,0<f&&(c+="H"+f.toString(32)),c+="_"}else f=Npe++,c="_"+c+"r_"+f.toString(32)+"_";return a.memoizedState=c},useHostTransitionStatus:bC,useFormState:yU,useActionState:yU,useOptimistic:function(a){var c=us();c.memoizedState=c.baseState=a;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=wC.bind(null,st,!0,f),f.dispatch=c,[a,c]},useMemoCache:cC,useCacheRefresh:function(){return us().memoizedState=Upe.bind(null,st)},useEffectEvent:function(a){var c=us(),f={impl:a};return c.memoizedState=f,function(){if((Ft&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},_C={readContext:wn,use:_$,useCallback:MU,useContext:wn,useEffect:mC,useImperativeHandle:EU,useInsertionEffect:xU,useLayoutEffect:$U,useMemo:AU,useReducer:S$,useRef:wU,useState:function(){return S$($c)},useDebugValue:yC,useDeferredValue:function(a,c){var f=mr();return IU(f,ii.memoizedState,a,c)},useTransition:function(){var a=S$($c)[0],c=mr().memoizedState;return[typeof a=="boolean"?a:v_(a),c]},useSyncExternalStore:nU,useId:RU,useHostTransitionStatus:bC,useFormState:gU,useActionState:gU,useOptimistic:function(a,c){var f=mr();return cU(f,ii,a,c)},useMemoCache:cC,useCacheRefresh:PU};_C.useEffectEvent=SU;var zU={readContext:wn,use:_$,useCallback:MU,useContext:wn,useEffect:mC,useImperativeHandle:EU,useInsertionEffect:xU,useLayoutEffect:$U,useMemo:AU,useReducer:pC,useRef:wU,useState:function(){return pC($c)},useDebugValue:yC,useDeferredValue:function(a,c){var f=mr();return ii===null?gC(f,a,c):IU(f,ii.memoizedState,a,c)},useTransition:function(){var a=pC($c)[0],c=mr().memoizedState;return[typeof a=="boolean"?a:v_(a),c]},useSyncExternalStore:nU,useId:RU,useHostTransitionStatus:bC,useFormState:bU,useActionState:bU,useOptimistic:function(a,c){var f=mr();return ii!==null?cU(f,ii,a,c):(f.baseState=a,[a,f.queue.dispatch])},useMemoCache:cC,useCacheRefresh:PU};zU.useEffectEvent=SU;function SC(a,c,f,g){c=a.memoizedState,f=f(g,c),f=f==null?c:v({},c,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var xC={enqueueSetState:function(a,c,f){a=a._reactInternals;var g=go(),w=Sp(g);w.payload=c,f!=null&&(w.callback=f),c=xp(a,w,g),c!==null&&(Ns(c,a,g),f_(c,a,g))},enqueueReplaceState:function(a,c,f){a=a._reactInternals;var g=go(),w=Sp(g);w.tag=1,w.payload=c,f!=null&&(w.callback=f),c=xp(a,w,g),c!==null&&(Ns(c,a,g),f_(c,a,g))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var f=go(),g=Sp(f);g.tag=2,c!=null&&(g.callback=c),c=xp(a,g,f),c!==null&&(Ns(c,a,f),f_(c,a,f))}};function FU(a,c,f,g,w,S,T){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,S,T):c.prototype&&c.prototype.isPureReactComponent?!o_(f,g)||!o_(w,S):!0}function VU(a,c,f,g){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,g),c.state!==a&&xC.enqueueReplaceState(c,c.state,null)}function Hf(a,c){var f=c;if("ref"in c){f={};for(var g in c)g!=="ref"&&(f[g]=c[g])}if(a=a.defaultProps){f===c&&(f=v({},f));for(var w in a)f[w]===void 0&&(f[w]=a[w])}return f}function UU(a){r$(a)}function qU(a){console.error(a)}function GU(a){r$(a)}function E$(a,c){try{var f=a.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(g){setTimeout(function(){throw g})}}function BU(a,c,f){try{var g=a.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function $C(a,c,f){return f=Sp(f),f.tag=3,f.payload={element:null},f.callback=function(){E$(a,c)},f}function HU(a){return a=Sp(a),a.tag=3,a}function WU(a,c,f,g){var w=f.type.getDerivedStateFromError;if(typeof w=="function"){var S=g.value;a.payload=function(){return w(S)},a.callback=function(){BU(c,f,g)}}var T=f.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(a.callback=function(){BU(c,f,g),typeof w!="function"&&(Ip===null?Ip=new Set([this]):Ip.add(this));var k=g.stack;this.componentDidCatch(g.value,{componentStack:k!==null?k:""})})}function Gpe(a,c,f,g,w){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(c=f.alternate,c!==null&&Tg(c,f,w,!0),f=ho.current,f!==null){switch(f.tag){case 31:case 13:return la===null?j$():f.alternate===null&&Xi===0&&(Xi=3),f.flags&=-257,f.flags|=65536,f.lanes=w,g===h$?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([g]):c.add(g),JC(a,g,w)),!1;case 22:return f.flags|=65536,g===h$?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([g]):f.add(g)),JC(a,g,w)),!1}throw Error(r(435,f.tag))}return JC(a,g,w),j$(),!1}if(Et)return c=ho.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=w,g!==qO&&(a=Error(r(422),{cause:g}),u_(na(a,f)))):(g!==qO&&(c=Error(r(423),{cause:g}),u_(na(c,f))),a=a.current.alternate,a.flags|=65536,w&=-w,a.lanes|=w,g=na(g,f),w=$C(a.stateNode,g,w),eC(a,w),Xi!==4&&(Xi=2)),!1;var S=Error(r(520),{cause:g});if(S=na(S,f),A_===null?A_=[S]:A_.push(S),Xi!==4&&(Xi=2),c===null)return!0;g=na(g,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,a=w&-w,f.lanes|=a,a=$C(f.stateNode,g,a),eC(f,a),!1;case 1:if(c=f.type,S=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ip===null||!Ip.has(S))))return f.flags|=65536,w&=-w,f.lanes|=w,w=HU(w),WU(w,a,f,g),eC(f,w),!1}f=f.return}while(f!==null);return!1}var TC=Error(r(461)),Tr=!1;function _n(a,c,f,g){c.child=a===null?QV(c,null,f,g):Gf(c,a.child,f,g)}function ZU(a,c,f,g,w){f=f.render;var S=c.ref;if("ref"in g){var T={};for(var k in g)k!=="ref"&&(T[k]=g[k])}else T=g;return Ff(c),g=oC(a,c,f,T,S,w),k=aC(),a!==null&&!Tr?(lC(a,c,w),Tc(a,c,w)):(Et&&k&&VO(c),c.flags|=1,_n(a,c,g,w),c.child)}function JU(a,c,f,g,w){if(a===null){var S=f.type;return typeof S=="function"&&!jO(S)&&S.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=S,YU(a,c,S,g,w)):(a=a$(f.type,null,g,c,c.mode,w),a.ref=c.ref,a.return=c,c.child=a)}if(S=a.child,!RC(a,w)){var T=S.memoizedProps;if(f=f.compare,f=f!==null?f:o_,f(T,g)&&a.ref===c.ref)return Tc(a,c,w)}return c.flags|=1,a=bc(S,g),a.ref=c.ref,a.return=c,c.child=a}function YU(a,c,f,g,w){if(a!==null){var S=a.memoizedProps;if(o_(S,g)&&a.ref===c.ref)if(Tr=!1,c.pendingProps=g=S,RC(a,w))(a.flags&131072)!==0&&(Tr=!0);else return c.lanes=a.lanes,Tc(a,c,w)}return EC(a,c,f,g,w)}function QU(a,c,f,g){var w=g.children,S=a!==null?a.memoizedState:null;if(a===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((c.flags&128)!==0){if(S=S!==null?S.baseLanes|f:f,a!==null){for(g=c.child=a.child,w=0;g!==null;)w=w|g.lanes|g.childLanes,g=g.sibling;g=w&~S}else g=0,c.child=null;return XU(a,c,S,f,g)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&d$(c,S!==null?S.cachePool:null),S!==null?eU(c,S):iC(),tU(c);else return g=c.lanes=536870912,XU(a,c,S!==null?S.baseLanes|f:f,f,g)}else S!==null?(d$(c,S.cachePool),eU(c,S),Tp(),c.memoizedState=null):(a!==null&&d$(c,null),iC(),Tp());return _n(a,c,w,f),c.child}function __(a,c){return a!==null&&a.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function XU(a,c,f,g,w){var S=YO();return S=S===null?null:{parent:xr._currentValue,pool:S},c.memoizedState={baseLanes:f,cachePool:S},a!==null&&d$(c,null),iC(),tU(c),a!==null&&Tg(a,c,g,!0),c.childLanes=w,null}function M$(a,c){return c=I$({mode:c.mode,children:c.children},a.mode),c.ref=a.ref,a.child=c,c.return=a,c}function KU(a,c,f){return Gf(c,a.child,null,f),a=M$(c,c.pendingProps),a.flags|=2,fo(c),c.memoizedState=null,a}function Bpe(a,c,f){var g=c.pendingProps,w=(c.flags&128)!==0;if(c.flags&=-129,a===null){if(Et){if(g.mode==="hidden")return a=M$(c,g),c.lanes=536870912,__(null,a);if(nC(c),(a=Ai)?(a=d7(a,aa),a=a!==null&&a.data==="&"?a:null,a!==null&&(c.memoizedState={dehydrated:a,treeContext:gp!==null?{id:su,overflow:ou}:null,retryLane:536870912,hydrationErrors:null},f=NV(a),f.return=c,c.child=f,bn=c,Ai=null)):a=null,a===null)throw bp(c);return c.lanes=536870912,null}return M$(c,g)}var S=a.memoizedState;if(S!==null){var T=S.dehydrated;if(nC(c),w)if(c.flags&256)c.flags&=-257,c=KU(a,c,f);else if(c.memoizedState!==null)c.child=a.child,c.flags|=128,c=null;else throw Error(r(558));else if(Tr||Tg(a,c,f,!1),w=(f&a.childLanes)!==0,Tr||w){if(g=di,g!==null&&(T=Ne(g,f),T!==0&&T!==S.retryLane))throw S.retryLane=T,Nf(a,T),Ns(g,a,T),TC;j$(),c=KU(a,c,f)}else a=S.treeContext,Ai=ua(T.nextSibling),bn=c,Et=!0,vp=null,aa=!1,a!==null&&zV(c,a),c=M$(c,g),c.flags|=4096;return c}return a=bc(a.child,{mode:g.mode,children:g.children}),a.ref=c.ref,c.child=a,a.return=c,a}function A$(a,c){var f=c.ref;if(f===null)a!==null&&a.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(a===null||a.ref!==f)&&(c.flags|=4194816)}}function EC(a,c,f,g,w){return Ff(c),f=oC(a,c,f,g,void 0,w),g=aC(),a!==null&&!Tr?(lC(a,c,w),Tc(a,c,w)):(Et&&g&&VO(c),c.flags|=1,_n(a,c,f,w),c.child)}function e9(a,c,f,g,w,S){return Ff(c),c.updateQueue=null,f=rU(c,g,f,w),iU(a),g=aC(),a!==null&&!Tr?(lC(a,c,S),Tc(a,c,S)):(Et&&g&&VO(c),c.flags|=1,_n(a,c,f,S),c.child)}function t9(a,c,f,g,w){if(Ff(c),c.stateNode===null){var S=_g,T=f.contextType;typeof T=="object"&&T!==null&&(S=wn(T)),S=new f(g,S),c.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=xC,c.stateNode=S,S._reactInternals=c,S=c.stateNode,S.props=g,S.state=c.memoizedState,S.refs={},XO(c),T=f.contextType,S.context=typeof T=="object"&&T!==null?wn(T):_g,S.state=c.memoizedState,T=f.getDerivedStateFromProps,typeof T=="function"&&(SC(c,f,T,g),S.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(T=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),T!==S.state&&xC.enqueueReplaceState(S,S.state,null),y_(c,g,S,w),m_(),S.state=c.memoizedState),typeof S.componentDidMount=="function"&&(c.flags|=4194308),g=!0}else if(a===null){S=c.stateNode;var k=c.memoizedProps,N=Hf(f,k);S.props=N;var J=S.context,ne=f.contextType;T=_g,typeof ne=="object"&&ne!==null&&(T=wn(ne));var le=f.getDerivedStateFromProps;ne=typeof le=="function"||typeof S.getSnapshotBeforeUpdate=="function",k=c.pendingProps!==k,ne||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(k||J!==T)&&VU(c,S,g,T),_p=!1;var X=c.memoizedState;S.state=X,y_(c,g,S,w),m_(),J=c.memoizedState,k||X!==J||_p?(typeof le=="function"&&(SC(c,f,le,g),J=c.memoizedState),(N=_p||FU(c,f,N,g,X,J,T))?(ne||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(c.flags|=4194308)):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=J),S.props=g,S.state=J,S.context=T,g=N):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{S=c.stateNode,KO(a,c),T=c.memoizedProps,ne=Hf(f,T),S.props=ne,le=c.pendingProps,X=S.context,J=f.contextType,N=_g,typeof J=="object"&&J!==null&&(N=wn(J)),k=f.getDerivedStateFromProps,(J=typeof k=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==le||X!==N)&&VU(c,S,g,N),_p=!1,X=c.memoizedState,S.state=X,y_(c,g,S,w),m_();var te=c.memoizedState;T!==le||X!==te||_p||a!==null&&a.dependencies!==null&&u$(a.dependencies)?(typeof k=="function"&&(SC(c,f,k,g),te=c.memoizedState),(ne=_p||FU(c,f,ne,g,X,te,N)||a!==null&&a.dependencies!==null&&u$(a.dependencies))?(J||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(g,te,N),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(g,te,N)),typeof S.componentDidUpdate=="function"&&(c.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof S.componentDidUpdate!="function"||T===a.memoizedProps&&X===a.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===a.memoizedProps&&X===a.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=te),S.props=g,S.state=te,S.context=N,g=ne):(typeof S.componentDidUpdate!="function"||T===a.memoizedProps&&X===a.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===a.memoizedProps&&X===a.memoizedState||(c.flags|=1024),g=!1)}return S=g,A$(a,c),g=(c.flags&128)!==0,S||g?(S=c.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:S.render(),c.flags|=1,a!==null&&g?(c.child=Gf(c,a.child,null,w),c.child=Gf(c,null,f,w)):_n(a,c,f,w),c.memoizedState=S.state,a=c.child):a=Tc(a,c,w),a}function i9(a,c,f,g){return jf(),c.flags|=256,_n(a,c,f,g),c.child}var MC={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function AC(a){return{baseLanes:a,cachePool:BV()}}function IC(a,c,f){return a=a!==null?a.childLanes&~f:0,c&&(a|=yo),a}function r9(a,c,f){var g=c.pendingProps,w=!1,S=(c.flags&128)!==0,T;if((T=S)||(T=a!==null&&a.memoizedState===null?!1:(fr.current&2)!==0),T&&(w=!0,c.flags&=-129),T=(c.flags&32)!==0,c.flags&=-33,a===null){if(Et){if(w?$p(c):Tp(),(a=Ai)?(a=d7(a,aa),a=a!==null&&a.data!=="&"?a:null,a!==null&&(c.memoizedState={dehydrated:a,treeContext:gp!==null?{id:su,overflow:ou}:null,retryLane:536870912,hydrationErrors:null},f=NV(a),f.return=c,c.child=f,bn=c,Ai=null)):a=null,a===null)throw bp(c);return dR(a)?c.lanes=32:c.lanes=536870912,null}var k=g.children;return g=g.fallback,w?(Tp(),w=c.mode,k=I$({mode:"hidden",children:k},w),g=Lf(g,w,f,null),k.return=c,g.return=c,k.sibling=g,c.child=k,g=c.child,g.memoizedState=AC(f),g.childLanes=IC(a,T,f),c.memoizedState=MC,__(null,g)):($p(c),kC(c,k))}var N=a.memoizedState;if(N!==null&&(k=N.dehydrated,k!==null)){if(S)c.flags&256?($p(c),c.flags&=-257,c=OC(a,c,f)):c.memoizedState!==null?(Tp(),c.child=a.child,c.flags|=128,c=null):(Tp(),k=g.fallback,w=c.mode,g=I$({mode:"visible",children:g.children},w),k=Lf(k,w,f,null),k.flags|=2,g.return=c,k.return=c,g.sibling=k,c.child=g,Gf(c,a.child,null,f),g=c.child,g.memoizedState=AC(f),g.childLanes=IC(a,T,f),c.memoizedState=MC,c=__(null,g));else if($p(c),dR(k)){if(T=k.nextSibling&&k.nextSibling.dataset,T)var J=T.dgst;T=J,g=Error(r(419)),g.stack="",g.digest=T,u_({value:g,source:null,stack:null}),c=OC(a,c,f)}else if(Tr||Tg(a,c,f,!1),T=(f&a.childLanes)!==0,Tr||T){if(T=di,T!==null&&(g=Ne(T,f),g!==0&&g!==N.retryLane))throw N.retryLane=g,Nf(a,g),Ns(T,a,g),TC;cR(k)||j$(),c=OC(a,c,f)}else cR(k)?(c.flags|=192,c.child=a.child,c=null):(a=N.treeContext,Ai=ua(k.nextSibling),bn=c,Et=!0,vp=null,aa=!1,a!==null&&zV(c,a),c=kC(c,g.children),c.flags|=4096);return c}return w?(Tp(),k=g.fallback,w=c.mode,N=a.child,J=N.sibling,g=bc(N,{mode:"hidden",children:g.children}),g.subtreeFlags=N.subtreeFlags&65011712,J!==null?k=bc(J,k):(k=Lf(k,w,f,null),k.flags|=2),k.return=c,g.return=c,g.sibling=k,c.child=g,__(null,g),g=c.child,k=a.child.memoizedState,k===null?k=AC(f):(w=k.cachePool,w!==null?(N=xr._currentValue,w=w.parent!==N?{parent:N,pool:N}:w):w=BV(),k={baseLanes:k.baseLanes|f,cachePool:w}),g.memoizedState=k,g.childLanes=IC(a,T,f),c.memoizedState=MC,__(a.child,g)):($p(c),f=a.child,a=f.sibling,f=bc(f,{mode:"visible",children:g.children}),f.return=c,f.sibling=null,a!==null&&(T=c.deletions,T===null?(c.deletions=[a],c.flags|=16):T.push(a)),c.child=f,c.memoizedState=null,f)}function kC(a,c){return c=I$({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function I$(a,c){return a=po(22,a,null,c),a.lanes=0,a}function OC(a,c,f){return Gf(c,a.child,null,f),a=kC(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function n9(a,c,f){a.lanes|=c;var g=a.alternate;g!==null&&(g.lanes|=c),HO(a.return,c,f)}function CC(a,c,f,g,w,S){var T=a.memoizedState;T===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:w,treeForkCount:S}:(T.isBackwards=c,T.rendering=null,T.renderingStartTime=0,T.last=g,T.tail=f,T.tailMode=w,T.treeForkCount=S)}function s9(a,c,f){var g=c.pendingProps,w=g.revealOrder,S=g.tail;g=g.children;var T=fr.current,k=(T&2)!==0;if(k?(T=T&1|2,c.flags|=128):T&=1,$e(fr,T),_n(a,c,g,f),g=Et?l_:0,!k&&a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&n9(a,f,c);else if(a.tag===19)n9(a,f,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(w){case"forwards":for(f=c.child,w=null;f!==null;)a=f.alternate,a!==null&&g$(a)===null&&(w=f),f=f.sibling;f=w,f===null?(w=c.child,c.child=null):(w=f.sibling,f.sibling=null),CC(c,!1,w,f,S,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,w=c.child,c.child=null;w!==null;){if(a=w.alternate,a!==null&&g$(a)===null){c.child=w;break}a=w.sibling,w.sibling=f,f=w,w=a}CC(c,!0,f,null,S,g);break;case"together":CC(c,!1,null,null,void 0,g);break;default:c.memoizedState=null}return c.child}function Tc(a,c,f){if(a!==null&&(c.dependencies=a.dependencies),Ap|=c.lanes,(f&c.childLanes)===0)if(a!==null){if(Tg(a,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(r(153));if(c.child!==null){for(a=c.child,f=bc(a,a.pendingProps),c.child=f,f.return=c;a.sibling!==null;)a=a.sibling,f=f.sibling=bc(a,a.pendingProps),f.return=c;f.sibling=null}return c.child}function RC(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&u$(a)))}function Hpe(a,c,f){switch(c.tag){case 3:gn(c,c.stateNode.containerInfo),wp(c,xr,a.memoizedState.cache),jf();break;case 27:case 5:Tf(c);break;case 4:gn(c,c.stateNode.containerInfo);break;case 10:wp(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,nC(c),null;break;case 13:var g=c.memoizedState;if(g!==null)return g.dehydrated!==null?($p(c),c.flags|=128,null):(f&c.child.childLanes)!==0?r9(a,c,f):($p(c),a=Tc(a,c,f),a!==null?a.sibling:null);$p(c);break;case 19:var w=(a.flags&128)!==0;if(g=(f&c.childLanes)!==0,g||(Tg(a,c,f,!1),g=(f&c.childLanes)!==0),w){if(g)return s9(a,c,f);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),$e(fr,fr.current),g)break;return null;case 22:return c.lanes=0,QU(a,c,f,c.pendingProps);case 24:wp(c,xr,a.memoizedState.cache)}return Tc(a,c,f)}function o9(a,c,f){if(a!==null)if(a.memoizedProps!==c.pendingProps)Tr=!0;else{if(!RC(a,f)&&(c.flags&128)===0)return Tr=!1,Hpe(a,c,f);Tr=(a.flags&131072)!==0}else Tr=!1,Et&&(c.flags&1048576)!==0&&jV(c,l_,c.index);switch(c.lanes=0,c.tag){case 16:e:{var g=c.pendingProps;if(a=Uf(c.elementType),c.type=a,typeof a=="function")jO(a)?(g=Hf(a,g),c.tag=1,c=t9(null,c,a,g,f)):(c.tag=0,c=EC(null,c,a,g,f));else{if(a!=null){var w=a.$$typeof;if(w===R){c.tag=11,c=ZU(null,c,a,g,f);break e}else if(w===Q){c.tag=14,c=JU(null,c,a,g,f);break e}}throw c=ve(a)||a,Error(r(306,c,""))}}return c;case 0:return EC(a,c,c.type,c.pendingProps,f);case 1:return g=c.type,w=Hf(g,c.pendingProps),t9(a,c,g,w,f);case 3:e:{if(gn(c,c.stateNode.containerInfo),a===null)throw Error(r(387));g=c.pendingProps;var S=c.memoizedState;w=S.element,KO(a,c),y_(c,g,null,f);var T=c.memoizedState;if(g=T.cache,wp(c,xr,g),g!==S.cache&&WO(c,[xr],f,!0),m_(),g=T.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:T.cache},c.updateQueue.baseState=S,c.memoizedState=S,c.flags&256){c=i9(a,c,g,f);break e}else if(g!==w){w=na(Error(r(424)),c),u_(w),c=i9(a,c,g,f);break e}else for(a=c.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,Ai=ua(a.firstChild),bn=c,Et=!0,vp=null,aa=!0,f=QV(c,null,g,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(jf(),g===w){c=Tc(a,c,f);break e}_n(a,c,g,f)}c=c.child}return c;case 26:return A$(a,c),a===null?(f=g7(c.type,null,c.pendingProps,null))?c.memoizedState=f:Et||(f=c.type,a=c.pendingProps,g=B$(dt.current).createElement(f),g[vi]=c,g[vn]=a,Sn(g,f,a),hr(g),c.stateNode=g):c.memoizedState=g7(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return Tf(c),a===null&&Et&&(g=c.stateNode=f7(c.type,c.pendingProps,dt.current),bn=c,aa=!0,w=Ai,Rp(c.type)?(pR=w,Ai=ua(g.firstChild)):Ai=w),_n(a,c,c.pendingProps.children,f),A$(a,c),a===null&&(c.flags|=4194304),c.child;case 5:return a===null&&Et&&((w=g=Ai)&&(g=She(g,c.type,c.pendingProps,aa),g!==null?(c.stateNode=g,bn=c,Ai=ua(g.firstChild),aa=!1,w=!0):w=!1),w||bp(c)),Tf(c),w=c.type,S=c.pendingProps,T=a!==null?a.memoizedProps:null,g=S.children,aR(w,S)?g=null:T!==null&&aR(w,T)&&(c.flags|=32),c.memoizedState!==null&&(w=oC(a,c,Lpe,null,null,f),N_._currentValue=w),A$(a,c),_n(a,c,g,f),c.child;case 6:return a===null&&Et&&((a=f=Ai)&&(f=xhe(f,c.pendingProps,aa),f!==null?(c.stateNode=f,bn=c,Ai=null,a=!0):a=!1),a||bp(c)),null;case 13:return r9(a,c,f);case 4:return gn(c,c.stateNode.containerInfo),g=c.pendingProps,a===null?c.child=Gf(c,null,g,f):_n(a,c,g,f),c.child;case 11:return ZU(a,c,c.type,c.pendingProps,f);case 7:return _n(a,c,c.pendingProps,f),c.child;case 8:return _n(a,c,c.pendingProps.children,f),c.child;case 12:return _n(a,c,c.pendingProps.children,f),c.child;case 10:return g=c.pendingProps,wp(c,c.type,g.value),_n(a,c,g.children,f),c.child;case 9:return w=c.type._context,g=c.pendingProps.children,Ff(c),w=wn(w),g=g(w),c.flags|=1,_n(a,c,g,f),c.child;case 14:return JU(a,c,c.type,c.pendingProps,f);case 15:return YU(a,c,c.type,c.pendingProps,f);case 19:return s9(a,c,f);case 31:return Bpe(a,c,f);case 22:return QU(a,c,f,c.pendingProps);case 24:return Ff(c),g=wn(xr),a===null?(w=YO(),w===null&&(w=di,S=ZO(),w.pooledCache=S,S.refCount++,S!==null&&(w.pooledCacheLanes|=f),w=S),c.memoizedState={parent:g,cache:w},XO(c),wp(c,xr,w)):((a.lanes&f)!==0&&(KO(a,c),y_(c,null,null,f),m_()),w=a.memoizedState,S=c.memoizedState,w.parent!==g?(w={parent:g,cache:g},c.memoizedState=w,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=w),wp(c,xr,g)):(g=S.cache,wp(c,xr,g),g!==w.cache&&WO(c,[xr],f,!0))),_n(a,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function Ec(a){a.flags|=4}function PC(a,c,f,g,w){if((c=(a.mode&32)!==0)&&(c=!1),c){if(a.flags|=16777216,(w&335544128)===w)if(a.stateNode.complete)a.flags|=8192;else if(R9())a.flags|=8192;else throw qf=h$,QO}else a.flags&=-16777217}function a9(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!S7(c))if(R9())a.flags|=8192;else throw qf=h$,QO}function k$(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?K():536870912,a.lanes|=c,Lg|=c)}function S_(a,c){if(!Et)switch(a.tailMode){case"hidden":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function Ii(a){var c=a.alternate!==null&&a.alternate.child===a.child,f=0,g=0;if(c)for(var w=a.child;w!==null;)f|=w.lanes|w.childLanes,g|=w.subtreeFlags&65011712,g|=w.flags&65011712,w.return=a,w=w.sibling;else for(w=a.child;w!==null;)f|=w.lanes|w.childLanes,g|=w.subtreeFlags,g|=w.flags,w.return=a,w=w.sibling;return a.subtreeFlags|=g,a.childLanes=f,c}function Wpe(a,c,f){var g=c.pendingProps;switch(UO(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ii(c),null;case 1:return Ii(c),null;case 3:return f=c.stateNode,g=null,a!==null&&(g=a.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),Sc(xr),Vi(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&($g(c)?Ec(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,GO())),Ii(c),null;case 26:var w=c.type,S=c.memoizedState;return a===null?(Ec(c),S!==null?(Ii(c),a9(c,S)):(Ii(c),PC(c,w,null,g,f))):S?S!==a.memoizedState?(Ec(c),Ii(c),a9(c,S)):(Ii(c),c.flags&=-16777217):(a=a.memoizedProps,a!==g&&Ec(c),Ii(c),PC(c,w,a,g,f)),null;case 27:if(sg(c),f=dt.current,w=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==g&&Ec(c);else{if(!g){if(c.stateNode===null)throw Error(r(166));return Ii(c),null}a=Ce.current,$g(c)?FV(c):(a=f7(w,g,f),c.stateNode=a,Ec(c))}return Ii(c),null;case 5:if(sg(c),w=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==g&&Ec(c);else{if(!g){if(c.stateNode===null)throw Error(r(166));return Ii(c),null}if(S=Ce.current,$g(c))FV(c);else{var T=B$(dt.current);switch(S){case 1:S=T.createElementNS("http://www.w3.org/2000/svg",w);break;case 2:S=T.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;default:switch(w){case"svg":S=T.createElementNS("http://www.w3.org/2000/svg",w);break;case"math":S=T.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;case"script":S=T.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof g.is=="string"?T.createElement("select",{is:g.is}):T.createElement("select"),g.multiple?S.multiple=!0:g.size&&(S.size=g.size);break;default:S=typeof g.is=="string"?T.createElement(w,{is:g.is}):T.createElement(w)}}S[vi]=c,S[vn]=g;e:for(T=c.child;T!==null;){if(T.tag===5||T.tag===6)S.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===c)break e;for(;T.sibling===null;){if(T.return===null||T.return===c)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}c.stateNode=S;e:switch(Sn(S,w,g),w){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&Ec(c)}}return Ii(c),PC(c,c.type,a===null?null:a.memoizedProps,c.pendingProps,f),null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==g&&Ec(c);else{if(typeof g!="string"&&c.stateNode===null)throw Error(r(166));if(a=dt.current,$g(c)){if(a=c.stateNode,f=c.memoizedProps,g=null,w=bn,w!==null)switch(w.tag){case 27:case 5:g=w.memoizedProps}a[vi]=c,a=!!(a.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||r7(a.nodeValue,f)),a||bp(c,!0)}else a=B$(a).createTextNode(g),a[vi]=c,c.stateNode=a}return Ii(c),null;case 31:if(f=c.memoizedState,a===null||a.memoizedState!==null){if(g=$g(c),f!==null){if(a===null){if(!g)throw Error(r(318));if(a=c.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(557));a[vi]=c}else jf(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ii(c),a=!1}else f=GO(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=f),a=!0;if(!a)return c.flags&256?(fo(c),c):(fo(c),null);if((c.flags&128)!==0)throw Error(r(558))}return Ii(c),null;case 13:if(g=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(w=$g(c),g!==null&&g.dehydrated!==null){if(a===null){if(!w)throw Error(r(318));if(w=c.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(r(317));w[vi]=c}else jf(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ii(c),w=!1}else w=GO(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=w),w=!0;if(!w)return c.flags&256?(fo(c),c):(fo(c),null)}return fo(c),(c.flags&128)!==0?(c.lanes=f,c):(f=g!==null,a=a!==null&&a.memoizedState!==null,f&&(g=c.child,w=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(w=g.alternate.memoizedState.cachePool.pool),S=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(S=g.memoizedState.cachePool.pool),S!==w&&(g.flags|=2048)),f!==a&&f&&(c.child.flags|=8192),k$(c,c.updateQueue),Ii(c),null);case 4:return Vi(),a===null&&iR(c.stateNode.containerInfo),Ii(c),null;case 10:return Sc(c.type),Ii(c),null;case 19:if(ae(fr),g=c.memoizedState,g===null)return Ii(c),null;if(w=(c.flags&128)!==0,S=g.rendering,S===null)if(w)S_(g,!1);else{if(Xi!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(S=g$(a),S!==null){for(c.flags|=128,S_(g,!1),a=S.updateQueue,c.updateQueue=a,k$(c,a),c.subtreeFlags=0,a=f,f=c.child;f!==null;)DV(f,a),f=f.sibling;return $e(fr,fr.current&1|2),Et&&wc(c,g.treeForkCount),c.child}a=a.sibling}g.tail!==null&&ss()>D$&&(c.flags|=128,w=!0,S_(g,!1),c.lanes=4194304)}else{if(!w)if(a=g$(S),a!==null){if(c.flags|=128,w=!0,a=a.updateQueue,c.updateQueue=a,k$(c,a),S_(g,!0),g.tail===null&&g.tailMode==="hidden"&&!S.alternate&&!Et)return Ii(c),null}else 2*ss()-g.renderingStartTime>D$&&f!==536870912&&(c.flags|=128,w=!0,S_(g,!1),c.lanes=4194304);g.isBackwards?(S.sibling=c.child,c.child=S):(a=g.last,a!==null?a.sibling=S:c.child=S,g.last=S)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=ss(),a.sibling=null,f=fr.current,$e(fr,w?f&1|2:f&1),Et&&wc(c,g.treeForkCount),a):(Ii(c),null);case 22:case 23:return fo(c),rC(),g=c.memoizedState!==null,a!==null?a.memoizedState!==null!==g&&(c.flags|=8192):g&&(c.flags|=8192),g?(f&536870912)!==0&&(c.flags&128)===0&&(Ii(c),c.subtreeFlags&6&&(c.flags|=8192)):Ii(c),f=c.updateQueue,f!==null&&k$(c,f.retryQueue),f=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048),a!==null&&ae(Vf),null;case 24:return f=null,a!==null&&(f=a.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),Sc(xr),Ii(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function Zpe(a,c){switch(UO(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Sc(xr),Vi(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return sg(c),null;case 31:if(c.memoizedState!==null){if(fo(c),c.alternate===null)throw Error(r(340));jf()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 13:if(fo(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(r(340));jf()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return ae(fr),null;case 4:return Vi(),null;case 10:return Sc(c.type),null;case 22:case 23:return fo(c),rC(),a!==null&&ae(Vf),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return Sc(xr),null;case 25:return null;default:return null}}function l9(a,c){switch(UO(c),c.tag){case 3:Sc(xr),Vi();break;case 26:case 27:case 5:sg(c);break;case 4:Vi();break;case 31:c.memoizedState!==null&&fo(c);break;case 13:fo(c);break;case 19:ae(fr);break;case 10:Sc(c.type);break;case 22:case 23:fo(c),rC(),a!==null&&ae(Vf);break;case 24:Sc(xr)}}function x_(a,c){try{var f=c.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var w=g.next;f=w;do{if((f.tag&a)===a){g=void 0;var S=f.create,T=f.inst;g=S(),T.destroy=g}f=f.next}while(f!==w)}}catch(k){Qt(c,c.return,k)}}function Ep(a,c,f){try{var g=c.updateQueue,w=g!==null?g.lastEffect:null;if(w!==null){var S=w.next;g=S;do{if((g.tag&a)===a){var T=g.inst,k=T.destroy;if(k!==void 0){T.destroy=void 0,w=c;var N=f,J=k;try{J()}catch(ne){Qt(w,N,ne)}}}g=g.next}while(g!==S)}}catch(ne){Qt(c,c.return,ne)}}function u9(a){var c=a.updateQueue;if(c!==null){var f=a.stateNode;try{KV(c,f)}catch(g){Qt(a,a.return,g)}}}function c9(a,c,f){f.props=Hf(a.type,a.memoizedProps),f.state=a.memoizedState;try{f.componentWillUnmount()}catch(g){Qt(a,c,g)}}function $_(a,c){try{var f=a.ref;if(f!==null){switch(a.tag){case 26:case 27:case 5:var g=a.stateNode;break;case 30:g=a.stateNode;break;default:g=a.stateNode}typeof f=="function"?a.refCleanup=f(g):f.current=g}}catch(w){Qt(a,c,w)}}function au(a,c){var f=a.ref,g=a.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(w){Qt(a,c,w)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(w){Qt(a,c,w)}else f.current=null}function d9(a){var c=a.type,f=a.memoizedProps,g=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(w){Qt(a,a.return,w)}}function DC(a,c,f){try{var g=a.stateNode;yhe(g,a.type,f,c),g[vn]=c}catch(w){Qt(a,a.return,w)}}function p9(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Rp(a.type)||a.tag===4}function NC(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||p9(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Rp(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function LC(a,c,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(a,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(a),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=gc));else if(g!==4&&(g===27&&Rp(a.type)&&(f=a.stateNode,c=null),a=a.child,a!==null))for(LC(a,c,f),a=a.sibling;a!==null;)LC(a,c,f),a=a.sibling}function O$(a,c,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,c?f.insertBefore(a,c):f.appendChild(a);else if(g!==4&&(g===27&&Rp(a.type)&&(f=a.stateNode),a=a.child,a!==null))for(O$(a,c,f),a=a.sibling;a!==null;)O$(a,c,f),a=a.sibling}function h9(a){var c=a.stateNode,f=a.memoizedProps;try{for(var g=a.type,w=c.attributes;w.length;)c.removeAttributeNode(w[0]);Sn(c,g,f),c[vi]=a,c[vn]=f}catch(S){Qt(a,a.return,S)}}var Mc=!1,Er=!1,jC=!1,f9=typeof WeakSet=="function"?WeakSet:Set,rn=null;function Jpe(a,c){if(a=a.containerInfo,sR=X$,a=EV(a),OO(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var w=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{f.nodeType,S.nodeType}catch{f=null;break e}var T=0,k=-1,N=-1,J=0,ne=0,le=a,X=null;t:for(;;){for(var te;le!==f||w!==0&&le.nodeType!==3||(k=T+w),le!==S||g!==0&&le.nodeType!==3||(N=T+g),le.nodeType===3&&(T+=le.nodeValue.length),(te=le.firstChild)!==null;)X=le,le=te;for(;;){if(le===a)break t;if(X===f&&++J===w&&(k=T),X===S&&++ne===g&&(N=T),(te=le.nextSibling)!==null)break;le=X,X=le.parentNode}le=te}f=k===-1||N===-1?null:{start:k,end:N}}else f=null}f=f||{start:0,end:0}}else f=null;for(oR={focusedElem:a,selectionRange:f},X$=!1,rn=c;rn!==null;)if(c=rn,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,rn=a;else for(;rn!==null;){switch(c=rn,S=c.alternate,a=c.flags,c.tag){case 0:if((a&4)!==0&&(a=c.updateQueue,a=a!==null?a.events:null,a!==null))for(f=0;f<a.length;f++)w=a[f],w.ref.impl=w.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&S!==null){a=void 0,f=c,w=S.memoizedProps,S=S.memoizedState,g=f.stateNode;try{var De=Hf(f.type,w);a=g.getSnapshotBeforeUpdate(De,S),g.__reactInternalSnapshotBeforeUpdate=a}catch(He){Qt(f,f.return,He)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,f=a.nodeType,f===9)uR(a);else if(f===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":uR(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=c.sibling,a!==null){a.return=c.return,rn=a;break}rn=c.return}}function m9(a,c,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:Ic(a,f),g&4&&x_(5,f);break;case 1:if(Ic(a,f),g&4)if(a=f.stateNode,c===null)try{a.componentDidMount()}catch(T){Qt(f,f.return,T)}else{var w=Hf(f.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(w,c,a.__reactInternalSnapshotBeforeUpdate)}catch(T){Qt(f,f.return,T)}}g&64&&u9(f),g&512&&$_(f,f.return);break;case 3:if(Ic(a,f),g&64&&(a=f.updateQueue,a!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{KV(a,c)}catch(T){Qt(f,f.return,T)}}break;case 27:c===null&&g&4&&h9(f);case 26:case 5:Ic(a,f),c===null&&g&4&&d9(f),g&512&&$_(f,f.return);break;case 12:Ic(a,f);break;case 31:Ic(a,f),g&4&&v9(a,f);break;case 13:Ic(a,f),g&4&&b9(a,f),g&64&&(a=f.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(f=nhe.bind(null,f),$he(a,f))));break;case 22:if(g=f.memoizedState!==null||Mc,!g){c=c!==null&&c.memoizedState!==null||Er,w=Mc;var S=Er;Mc=g,(Er=c)&&!S?kc(a,f,(f.subtreeFlags&8772)!==0):Ic(a,f),Mc=w,Er=S}break;case 30:break;default:Ic(a,f)}}function y9(a){var c=a.alternate;c!==null&&(a.alternate=null,y9(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&Of(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var ji=null,Cs=!1;function Ac(a,c,f){for(f=f.child;f!==null;)g9(a,c,f),f=f.sibling}function g9(a,c,f){if(os&&typeof os.onCommitFiberUnmount=="function")try{os.onCommitFiberUnmount(Ef,f)}catch{}switch(f.tag){case 26:Er||au(f,c),Ac(a,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Er||au(f,c);var g=ji,w=Cs;Rp(f.type)&&(ji=f.stateNode,Cs=!1),Ac(a,c,f),R_(f.stateNode),ji=g,Cs=w;break;case 5:Er||au(f,c);case 6:if(g=ji,w=Cs,ji=null,Ac(a,c,f),ji=g,Cs=w,ji!==null)if(Cs)try{(ji.nodeType===9?ji.body:ji.nodeName==="HTML"?ji.ownerDocument.body:ji).removeChild(f.stateNode)}catch(S){Qt(f,c,S)}else try{ji.removeChild(f.stateNode)}catch(S){Qt(f,c,S)}break;case 18:ji!==null&&(Cs?(a=ji,u7(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,f.stateNode),Bg(a)):u7(ji,f.stateNode));break;case 4:g=ji,w=Cs,ji=f.stateNode.containerInfo,Cs=!0,Ac(a,c,f),ji=g,Cs=w;break;case 0:case 11:case 14:case 15:Ep(2,f,c),Er||Ep(4,f,c),Ac(a,c,f);break;case 1:Er||(au(f,c),g=f.stateNode,typeof g.componentWillUnmount=="function"&&c9(f,c,g)),Ac(a,c,f);break;case 21:Ac(a,c,f);break;case 22:Er=(g=Er)||f.memoizedState!==null,Ac(a,c,f),Er=g;break;default:Ac(a,c,f)}}function v9(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Bg(a)}catch(f){Qt(c,c.return,f)}}}function b9(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Bg(a)}catch(f){Qt(c,c.return,f)}}function Ype(a){switch(a.tag){case 31:case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new f9),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new f9),c;default:throw Error(r(435,a.tag))}}function C$(a,c){var f=Ype(a);c.forEach(function(g){if(!f.has(g)){f.add(g);var w=she.bind(null,a,g);g.then(w,w)}})}function Rs(a,c){var f=c.deletions;if(f!==null)for(var g=0;g<f.length;g++){var w=f[g],S=a,T=c,k=T;e:for(;k!==null;){switch(k.tag){case 27:if(Rp(k.type)){ji=k.stateNode,Cs=!1;break e}break;case 5:ji=k.stateNode,Cs=!1;break e;case 3:case 4:ji=k.stateNode.containerInfo,Cs=!0;break e}k=k.return}if(ji===null)throw Error(r(160));g9(S,T,w),ji=null,Cs=!1,S=w.alternate,S!==null&&(S.return=null),w.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)w9(c,a),c=c.sibling}var tl=null;function w9(a,c){var f=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Rs(c,a),Ps(a),g&4&&(Ep(3,a,a.return),x_(3,a),Ep(5,a,a.return));break;case 1:Rs(c,a),Ps(a),g&512&&(Er||f===null||au(f,f.return)),g&64&&Mc&&(a=a.updateQueue,a!==null&&(g=a.callbacks,g!==null&&(f=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var w=tl;if(Rs(c,a),Ps(a),g&512&&(Er||f===null||au(f,f.return)),g&4){var S=f!==null?f.memoizedState:null;if(g=a.memoizedState,f===null)if(g===null)if(a.stateNode===null){e:{g=a.type,f=a.memoizedProps,w=w.ownerDocument||w;t:switch(g){case"title":S=w.getElementsByTagName("title")[0],(!S||S[kf]||S[vi]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=w.createElement(g),w.head.insertBefore(S,w.querySelector("head > title"))),Sn(S,g,f),S[vi]=a,hr(S),g=S;break e;case"link":var T=w7("link","href",w).get(g+(f.href||""));if(T){for(var k=0;k<T.length;k++)if(S=T[k],S.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&S.getAttribute("rel")===(f.rel==null?null:f.rel)&&S.getAttribute("title")===(f.title==null?null:f.title)&&S.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){T.splice(k,1);break t}}S=w.createElement(g),Sn(S,g,f),w.head.appendChild(S);break;case"meta":if(T=w7("meta","content",w).get(g+(f.content||""))){for(k=0;k<T.length;k++)if(S=T[k],S.getAttribute("content")===(f.content==null?null:""+f.content)&&S.getAttribute("name")===(f.name==null?null:f.name)&&S.getAttribute("property")===(f.property==null?null:f.property)&&S.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&S.getAttribute("charset")===(f.charSet==null?null:f.charSet)){T.splice(k,1);break t}}S=w.createElement(g),Sn(S,g,f),w.head.appendChild(S);break;default:throw Error(r(468,g))}S[vi]=a,hr(S),g=S}a.stateNode=g}else _7(w,a.type,a.stateNode);else a.stateNode=b7(w,g,a.memoizedProps);else S!==g?(S===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):S.count--,g===null?_7(w,a.type,a.stateNode):b7(w,g,a.memoizedProps)):g===null&&a.stateNode!==null&&DC(a,a.memoizedProps,f.memoizedProps)}break;case 27:Rs(c,a),Ps(a),g&512&&(Er||f===null||au(f,f.return)),f!==null&&g&4&&DC(a,a.memoizedProps,f.memoizedProps);break;case 5:if(Rs(c,a),Ps(a),g&512&&(Er||f===null||au(f,f.return)),a.flags&32){w=a.stateNode;try{fg(w,"")}catch(De){Qt(a,a.return,De)}}g&4&&a.stateNode!=null&&(w=a.memoizedProps,DC(a,w,f!==null?f.memoizedProps:w)),g&1024&&(jC=!0);break;case 6:if(Rs(c,a),Ps(a),g&4){if(a.stateNode===null)throw Error(r(162));g=a.memoizedProps,f=a.stateNode;try{f.nodeValue=g}catch(De){Qt(a,a.return,De)}}break;case 3:if(Z$=null,w=tl,tl=H$(c.containerInfo),Rs(c,a),tl=w,Ps(a),g&4&&f!==null&&f.memoizedState.isDehydrated)try{Bg(c.containerInfo)}catch(De){Qt(a,a.return,De)}jC&&(jC=!1,_9(a));break;case 4:g=tl,tl=H$(a.stateNode.containerInfo),Rs(c,a),Ps(a),tl=g;break;case 12:Rs(c,a),Ps(a);break;case 31:Rs(c,a),Ps(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,C$(a,g)));break;case 13:Rs(c,a),Ps(a),a.child.flags&8192&&a.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(P$=ss()),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,C$(a,g)));break;case 22:w=a.memoizedState!==null;var N=f!==null&&f.memoizedState!==null,J=Mc,ne=Er;if(Mc=J||w,Er=ne||N,Rs(c,a),Er=ne,Mc=J,Ps(a),g&8192)e:for(c=a.stateNode,c._visibility=w?c._visibility&-2:c._visibility|1,w&&(f===null||N||Mc||Er||Wf(a)),f=null,c=a;;){if(c.tag===5||c.tag===26){if(f===null){N=f=c;try{if(S=N.stateNode,w)T=S.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{k=N.stateNode;var le=N.memoizedProps.style,X=le!=null&&le.hasOwnProperty("display")?le.display:null;k.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(De){Qt(N,N.return,De)}}}else if(c.tag===6){if(f===null){N=c;try{N.stateNode.nodeValue=w?"":N.memoizedProps}catch(De){Qt(N,N.return,De)}}}else if(c.tag===18){if(f===null){N=c;try{var te=N.stateNode;w?c7(te,!0):c7(N.stateNode,!1)}catch(De){Qt(N,N.return,De)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}g&4&&(g=a.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,C$(a,f))));break;case 19:Rs(c,a),Ps(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,C$(a,g)));break;case 30:break;case 21:break;default:Rs(c,a),Ps(a)}}function Ps(a){var c=a.flags;if(c&2){try{for(var f,g=a.return;g!==null;){if(p9(g)){f=g;break}g=g.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var w=f.stateNode,S=NC(a);O$(a,S,w);break;case 5:var T=f.stateNode;f.flags&32&&(fg(T,""),f.flags&=-33);var k=NC(a);O$(a,k,T);break;case 3:case 4:var N=f.stateNode.containerInfo,J=NC(a);LC(a,J,N);break;default:throw Error(r(161))}}catch(ne){Qt(a,a.return,ne)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function _9(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;_9(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function Ic(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)m9(a,c.alternate,c),c=c.sibling}function Wf(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:Ep(4,c,c.return),Wf(c);break;case 1:au(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&c9(c,c.return,f),Wf(c);break;case 27:R_(c.stateNode);case 26:case 5:au(c,c.return),Wf(c);break;case 22:c.memoizedState===null&&Wf(c);break;case 30:Wf(c);break;default:Wf(c)}a=a.sibling}}function kc(a,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var g=c.alternate,w=a,S=c,T=S.flags;switch(S.tag){case 0:case 11:case 15:kc(w,S,f),x_(4,S);break;case 1:if(kc(w,S,f),g=S,w=g.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(J){Qt(g,g.return,J)}if(g=S,w=g.updateQueue,w!==null){var k=g.stateNode;try{var N=w.shared.hiddenCallbacks;if(N!==null)for(w.shared.hiddenCallbacks=null,w=0;w<N.length;w++)XV(N[w],k)}catch(J){Qt(g,g.return,J)}}f&&T&64&&u9(S),$_(S,S.return);break;case 27:h9(S);case 26:case 5:kc(w,S,f),f&&g===null&&T&4&&d9(S),$_(S,S.return);break;case 12:kc(w,S,f);break;case 31:kc(w,S,f),f&&T&4&&v9(w,S);break;case 13:kc(w,S,f),f&&T&4&&b9(w,S);break;case 22:S.memoizedState===null&&kc(w,S,f),$_(S,S.return);break;case 30:break;default:kc(w,S,f)}c=c.sibling}}function zC(a,c){var f=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==f&&(a!=null&&a.refCount++,f!=null&&c_(f))}function FC(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&c_(a))}function il(a,c,f,g){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)S9(a,c,f,g),c=c.sibling}function S9(a,c,f,g){var w=c.flags;switch(c.tag){case 0:case 11:case 15:il(a,c,f,g),w&2048&&x_(9,c);break;case 1:il(a,c,f,g);break;case 3:il(a,c,f,g),w&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&c_(a)));break;case 12:if(w&2048){il(a,c,f,g),a=c.stateNode;try{var S=c.memoizedProps,T=S.id,k=S.onPostCommit;typeof k=="function"&&k(T,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(N){Qt(c,c.return,N)}}else il(a,c,f,g);break;case 31:il(a,c,f,g);break;case 13:il(a,c,f,g);break;case 23:break;case 22:S=c.stateNode,T=c.alternate,c.memoizedState!==null?S._visibility&2?il(a,c,f,g):T_(a,c):S._visibility&2?il(a,c,f,g):(S._visibility|=2,Pg(a,c,f,g,(c.subtreeFlags&10256)!==0||!1)),w&2048&&zC(T,c);break;case 24:il(a,c,f,g),w&2048&&FC(c.alternate,c);break;default:il(a,c,f,g)}}function Pg(a,c,f,g,w){for(w=w&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var S=a,T=c,k=f,N=g,J=T.flags;switch(T.tag){case 0:case 11:case 15:Pg(S,T,k,N,w),x_(8,T);break;case 23:break;case 22:var ne=T.stateNode;T.memoizedState!==null?ne._visibility&2?Pg(S,T,k,N,w):T_(S,T):(ne._visibility|=2,Pg(S,T,k,N,w)),w&&J&2048&&zC(T.alternate,T);break;case 24:Pg(S,T,k,N,w),w&&J&2048&&FC(T.alternate,T);break;default:Pg(S,T,k,N,w)}c=c.sibling}}function T_(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=a,g=c,w=g.flags;switch(g.tag){case 22:T_(f,g),w&2048&&zC(g.alternate,g);break;case 24:T_(f,g),w&2048&&FC(g.alternate,g);break;default:T_(f,g)}c=c.sibling}}var E_=8192;function Dg(a,c,f){if(a.subtreeFlags&E_)for(a=a.child;a!==null;)x9(a,c,f),a=a.sibling}function x9(a,c,f){switch(a.tag){case 26:Dg(a,c,f),a.flags&E_&&a.memoizedState!==null&&Nhe(f,tl,a.memoizedState,a.memoizedProps);break;case 5:Dg(a,c,f);break;case 3:case 4:var g=tl;tl=H$(a.stateNode.containerInfo),Dg(a,c,f),tl=g;break;case 22:a.memoizedState===null&&(g=a.alternate,g!==null&&g.memoizedState!==null?(g=E_,E_=16777216,Dg(a,c,f),E_=g):Dg(a,c,f));break;default:Dg(a,c,f)}}function $9(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function M_(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];rn=g,E9(g,a)}$9(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)T9(a),a=a.sibling}function T9(a){switch(a.tag){case 0:case 11:case 15:M_(a),a.flags&2048&&Ep(9,a,a.return);break;case 3:M_(a);break;case 12:M_(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&2&&(a.return===null||a.return.tag!==13)?(c._visibility&=-3,R$(a)):M_(a);break;default:M_(a)}}function R$(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];rn=g,E9(g,a)}$9(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:Ep(8,c,c.return),R$(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,R$(c));break;default:R$(c)}a=a.sibling}}function E9(a,c){for(;rn!==null;){var f=rn;switch(f.tag){case 0:case 11:case 15:Ep(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:c_(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,rn=g;else e:for(f=a;rn!==null;){g=rn;var w=g.sibling,S=g.return;if(y9(g),g===f){rn=null;break e}if(w!==null){w.return=S,rn=w;break e}rn=S}}}var Qpe={getCacheForType:function(a){var c=wn(xr),f=c.data.get(a);return f===void 0&&(f=a(),c.data.set(a,f)),f},cacheSignal:function(){return wn(xr).controller.signal}},Xpe=typeof WeakMap=="function"?WeakMap:Map,Ft=0,di=null,mt=null,bt=0,Yt=0,mo=null,Mp=!1,Ng=!1,VC=!1,Oc=0,Xi=0,Ap=0,Zf=0,UC=0,yo=0,Lg=0,A_=null,Ds=null,qC=!1,P$=0,M9=0,D$=1/0,N$=null,Ip=null,Vr=0,kp=null,jg=null,Cc=0,GC=0,BC=null,A9=null,I_=0,HC=null;function go(){return(Ft&2)!==0&&bt!==0?bt&-bt:ee.T!==null?XC():pr()}function I9(){if(yo===0)if((bt&536870912)===0||Et){var a=cg;cg<<=1,(cg&3932160)===0&&(cg=262144),yo=a}else yo=536870912;return a=ho.current,a!==null&&(a.flags|=32),yo}function Ns(a,c,f){(a===di&&(Yt===2||Yt===9)||a.cancelPendingCommit!==null)&&(zg(a,0),Op(a,bt,yo,!1)),ta(a,f),((Ft&2)===0||a!==di)&&(a===di&&((Ft&2)===0&&(Zf|=f),Xi===4&&Op(a,bt,yo,!1)),lu(a))}function k9(a,c,f){if((Ft&6)!==0)throw Error(r(327));var g=!f&&(c&127)===0&&(c&a.expiredLanes)===0||Mf(a,c),w=g?the(a,c):ZC(a,c,!0),S=g;do{if(w===0){Ng&&!g&&Op(a,c,0,!1);break}else{if(f=a.current.alternate,S&&!Kpe(f)){w=ZC(a,c,!1),S=!1;continue}if(w===2){if(S=c,a.errorRecoveryDisabledLanes&S)var T=0;else T=a.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){c=T;e:{var k=a;w=A_;var N=k.current.memoizedState.isDehydrated;if(N&&(zg(k,T).flags|=256),T=ZC(k,T,!1),T!==2){if(VC&&!N){k.errorRecoveryDisabledLanes|=S,Zf|=S,w=4;break e}S=Ds,Ds=w,S!==null&&(Ds===null?Ds=S:Ds.push.apply(Ds,S))}w=T}if(S=!1,w!==2)continue}}if(w===1){zg(a,0),Op(a,c,0,!0);break}e:{switch(g=a,S=w,S){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:Op(g,c,yo,!Mp);break e;case 2:Ds=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(w=P$+300-ss(),10<w)){if(Op(g,c,yo,!Mp),pg(g,0,!0)!==0)break e;Cc=c,g.timeoutHandle=a7(O9.bind(null,g,f,Ds,N$,qC,c,yo,Zf,Lg,Mp,S,"Throttled",-0,0),w);break e}O9(g,f,Ds,N$,qC,c,yo,Zf,Lg,Mp,S,null,-0,0)}}break}while(!0);lu(a)}function O9(a,c,f,g,w,S,T,k,N,J,ne,le,X,te){if(a.timeoutHandle=-1,le=c.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:gc},x9(c,S,le);var De=(S&62914560)===S?P$-ss():(S&4194048)===S?M9-ss():0;if(De=Lhe(le,De),De!==null){Cc=S,a.cancelPendingCommit=De(z9.bind(null,a,c,S,f,g,w,T,k,N,ne,le,null,X,te)),Op(a,S,T,!J);return}}z9(a,c,S,f,g,w,T,k,N)}function Kpe(a){for(var c=a;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var w=f[g],S=w.getSnapshot;w=w.value;try{if(!co(S(),w))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Op(a,c,f,g){c&=~UC,c&=~Zf,a.suspendedLanes|=c,a.pingedLanes&=~c,g&&(a.warmLanes|=c),g=a.expirationTimes;for(var w=c;0<w;){var S=31-as(w),T=1<<S;g[S]=-1,w&=~T}f!==0&&ks(a,f,c)}function L$(){return(Ft&6)===0?(k_(0),!1):!0}function WC(){if(mt!==null){if(Yt===0)var a=mt.return;else a=mt,_c=zf=null,uC(a),Ig=null,p_=0,a=mt;for(;a!==null;)l9(a.alternate,a),a=a.return;mt=null}}function zg(a,c){var f=a.timeoutHandle;f!==-1&&(a.timeoutHandle=-1,bhe(f)),f=a.cancelPendingCommit,f!==null&&(a.cancelPendingCommit=null,f()),Cc=0,WC(),di=a,mt=f=bc(a.current,null),bt=c,Yt=0,mo=null,Mp=!1,Ng=Mf(a,c),VC=!1,Lg=yo=UC=Zf=Ap=Xi=0,Ds=A_=null,qC=!1,(c&8)!==0&&(c|=c&32);var g=a.entangledLanes;if(g!==0)for(a=a.entanglements,g&=c;0<g;){var w=31-as(g),S=1<<w;c|=a[w],g&=~S}return Oc=c,n$(),f}function C9(a,c){st=null,ee.H=w_,c===Ag||c===p$?(c=ZV(),Yt=3):c===QO?(c=ZV(),Yt=4):Yt=c===TC?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,mo=c,mt===null&&(Xi=1,E$(a,na(c,a.current)))}function R9(){var a=ho.current;return a===null?!0:(bt&4194048)===bt?la===null:(bt&62914560)===bt||(bt&536870912)!==0?a===la:!1}function P9(){var a=ee.H;return ee.H=w_,a===null?w_:a}function D9(){var a=ee.A;return ee.A=Qpe,a}function j$(){Xi=4,Mp||(bt&4194048)!==bt&&ho.current!==null||(Ng=!0),(Ap&134217727)===0&&(Zf&134217727)===0||di===null||Op(di,bt,yo,!1)}function ZC(a,c,f){var g=Ft;Ft|=2;var w=P9(),S=D9();(di!==a||bt!==c)&&(N$=null,zg(a,c)),c=!1;var T=Xi;e:do try{if(Yt!==0&&mt!==null){var k=mt,N=mo;switch(Yt){case 8:WC(),T=6;break e;case 3:case 2:case 9:case 6:ho.current===null&&(c=!0);var J=Yt;if(Yt=0,mo=null,Fg(a,k,N,J),f&&Ng){T=0;break e}break;default:J=Yt,Yt=0,mo=null,Fg(a,k,N,J)}}ehe(),T=Xi;break}catch(ne){C9(a,ne)}while(!0);return c&&a.shellSuspendCounter++,_c=zf=null,Ft=g,ee.H=w,ee.A=S,mt===null&&(di=null,bt=0,n$()),T}function ehe(){for(;mt!==null;)N9(mt)}function the(a,c){var f=Ft;Ft|=2;var g=P9(),w=D9();di!==a||bt!==c?(N$=null,D$=ss()+500,zg(a,c)):Ng=Mf(a,c);e:do try{if(Yt!==0&&mt!==null){c=mt;var S=mo;t:switch(Yt){case 1:Yt=0,mo=null,Fg(a,c,S,1);break;case 2:case 9:if(HV(S)){Yt=0,mo=null,L9(c);break}c=function(){Yt!==2&&Yt!==9||di!==a||(Yt=7),lu(a)},S.then(c,c);break e;case 3:Yt=7;break e;case 4:Yt=5;break e;case 7:HV(S)?(Yt=0,mo=null,L9(c)):(Yt=0,mo=null,Fg(a,c,S,7));break;case 5:var T=null;switch(mt.tag){case 26:T=mt.memoizedState;case 5:case 27:var k=mt;if(T?S7(T):k.stateNode.complete){Yt=0,mo=null;var N=k.sibling;if(N!==null)mt=N;else{var J=k.return;J!==null?(mt=J,z$(J)):mt=null}break t}}Yt=0,mo=null,Fg(a,c,S,5);break;case 6:Yt=0,mo=null,Fg(a,c,S,6);break;case 8:WC(),Xi=6;break e;default:throw Error(r(462))}}ihe();break}catch(ne){C9(a,ne)}while(!0);return _c=zf=null,ee.H=g,ee.A=w,Ft=f,mt!==null?0:(di=null,bt=0,n$(),Xi)}function ihe(){for(;mt!==null&&!nO();)N9(mt)}function N9(a){var c=o9(a.alternate,a,Oc);a.memoizedProps=a.pendingProps,c===null?z$(a):mt=c}function L9(a){var c=a,f=c.alternate;switch(c.tag){case 15:case 0:c=e9(f,c,c.pendingProps,c.type,void 0,bt);break;case 11:c=e9(f,c,c.pendingProps,c.type.render,c.ref,bt);break;case 5:uC(c);default:l9(f,c),c=mt=DV(c,Oc),c=o9(f,c,Oc)}a.memoizedProps=a.pendingProps,c===null?z$(a):mt=c}function Fg(a,c,f,g){_c=zf=null,uC(c),Ig=null,p_=0;var w=c.return;try{if(Gpe(a,w,c,f,bt)){Xi=1,E$(a,na(f,a.current)),mt=null;return}}catch(S){if(w!==null)throw mt=w,S;Xi=1,E$(a,na(f,a.current)),mt=null;return}c.flags&32768?(Et||g===1?a=!0:Ng||(bt&536870912)!==0?a=!1:(Mp=a=!0,(g===2||g===9||g===3||g===6)&&(g=ho.current,g!==null&&g.tag===13&&(g.flags|=16384))),j9(c,a)):z$(c)}function z$(a){var c=a;do{if((c.flags&32768)!==0){j9(c,Mp);return}a=c.return;var f=Wpe(c.alternate,c,Oc);if(f!==null){mt=f;return}if(c=c.sibling,c!==null){mt=c;return}mt=c=a}while(c!==null);Xi===0&&(Xi=5)}function j9(a,c){do{var f=Zpe(a.alternate,a);if(f!==null){f.flags&=32767,mt=f;return}if(f=a.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(a=a.sibling,a!==null)){mt=a;return}mt=a=f}while(a!==null);Xi=6,mt=null}function z9(a,c,f,g,w,S,T,k,N){a.cancelPendingCommit=null;do F$();while(Vr!==0);if((Ft&6)!==0)throw Error(r(327));if(c!==null){if(c===a.current)throw Error(r(177));if(S=c.lanes|c.childLanes,S|=NO,Af(a,f,S,T,k,N),a===di&&(mt=di=null,bt=0),jg=c,kp=a,Cc=f,GC=S,BC=w,A9=g,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,ohe(lg,function(){return G9(),null})):(a.callbackNode=null,a.callbackPriority=0),g=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||g){g=ee.T,ee.T=null,w=ge.p,ge.p=2,T=Ft,Ft|=4;try{Jpe(a,c,f)}finally{Ft=T,ge.p=w,ee.T=g}}Vr=1,F9(),V9(),U9()}}function F9(){if(Vr===1){Vr=0;var a=kp,c=jg,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=ee.T,ee.T=null;var g=ge.p;ge.p=2;var w=Ft;Ft|=4;try{w9(c,a);var S=oR,T=EV(a.containerInfo),k=S.focusedElem,N=S.selectionRange;if(T!==k&&k&&k.ownerDocument&&TV(k.ownerDocument.documentElement,k)){if(N!==null&&OO(k)){var J=N.start,ne=N.end;if(ne===void 0&&(ne=J),"selectionStart"in k)k.selectionStart=J,k.selectionEnd=Math.min(ne,k.value.length);else{var le=k.ownerDocument||document,X=le&&le.defaultView||window;if(X.getSelection){var te=X.getSelection(),De=k.textContent.length,He=Math.min(N.start,De),ni=N.end===void 0?He:Math.min(N.end,De);!te.extend&&He>ni&&(T=ni,ni=He,He=T);var G=$V(k,He),V=$V(k,ni);if(G&&V&&(te.rangeCount!==1||te.anchorNode!==G.node||te.anchorOffset!==G.offset||te.focusNode!==V.node||te.focusOffset!==V.offset)){var Z=le.createRange();Z.setStart(G.node,G.offset),te.removeAllRanges(),He>ni?(te.addRange(Z),te.extend(V.node,V.offset)):(Z.setEnd(V.node,V.offset),te.addRange(Z))}}}}for(le=[],te=k;te=te.parentNode;)te.nodeType===1&&le.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<le.length;k++){var oe=le[k];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}X$=!!sR,oR=sR=null}finally{Ft=w,ge.p=g,ee.T=f}}a.current=c,Vr=2}}function V9(){if(Vr===2){Vr=0;var a=kp,c=jg,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=ee.T,ee.T=null;var g=ge.p;ge.p=2;var w=Ft;Ft|=4;try{m9(a,c.alternate,c)}finally{Ft=w,ge.p=g,ee.T=f}}Vr=3}}function U9(){if(Vr===4||Vr===3){Vr=0,sO();var a=kp,c=jg,f=Cc,g=A9;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Vr=5:(Vr=0,jg=kp=null,q9(a,a.pendingLanes));var w=a.pendingLanes;if(w===0&&(Ip=null),Xw(f),c=c.stateNode,os&&typeof os.onCommitFiberRoot=="function")try{os.onCommitFiberRoot(Ef,c,void 0,(c.current.flags&128)===128)}catch{}if(g!==null){c=ee.T,w=ge.p,ge.p=2,ee.T=null;try{for(var S=a.onRecoverableError,T=0;T<g.length;T++){var k=g[T];S(k.value,{componentStack:k.stack})}}finally{ee.T=c,ge.p=w}}(Cc&3)!==0&&F$(),lu(a),w=a.pendingLanes,(f&261930)!==0&&(w&42)!==0?a===HC?I_++:(I_=0,HC=a):I_=0,k_(0)}}function q9(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,c_(c)))}function F$(){return F9(),V9(),U9(),G9()}function G9(){if(Vr!==5)return!1;var a=kp,c=GC;GC=0;var f=Xw(Cc),g=ee.T,w=ge.p;try{ge.p=32>f?32:f,ee.T=null,f=BC,BC=null;var S=kp,T=Cc;if(Vr=0,jg=kp=null,Cc=0,(Ft&6)!==0)throw Error(r(331));var k=Ft;if(Ft|=4,T9(S.current),S9(S,S.current,T,f),Ft=k,k_(0,!1),os&&typeof os.onPostCommitFiberRoot=="function")try{os.onPostCommitFiberRoot(Ef,S)}catch{}return!0}finally{ge.p=w,ee.T=g,q9(a,c)}}function B9(a,c,f){c=na(f,c),c=$C(a.stateNode,c,2),a=xp(a,c,2),a!==null&&(ta(a,2),lu(a))}function Qt(a,c,f){if(a.tag===3)B9(a,a,f);else for(;c!==null;){if(c.tag===3){B9(c,a,f);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ip===null||!Ip.has(g))){a=na(f,a),f=HU(2),g=xp(c,f,2),g!==null&&(WU(f,g,c,a),ta(g,2),lu(g));break}}c=c.return}}function JC(a,c,f){var g=a.pingCache;if(g===null){g=a.pingCache=new Xpe;var w=new Set;g.set(c,w)}else w=g.get(c),w===void 0&&(w=new Set,g.set(c,w));w.has(f)||(VC=!0,w.add(f),a=rhe.bind(null,a,c,f),c.then(a,a))}function rhe(a,c,f){var g=a.pingCache;g!==null&&g.delete(c),a.pingedLanes|=a.suspendedLanes&f,a.warmLanes&=~f,di===a&&(bt&f)===f&&(Xi===4||Xi===3&&(bt&62914560)===bt&&300>ss()-P$?(Ft&2)===0&&zg(a,0):UC|=f,Lg===bt&&(Lg=0)),lu(a)}function H9(a,c){c===0&&(c=K()),a=Nf(a,c),a!==null&&(ta(a,c),lu(a))}function nhe(a){var c=a.memoizedState,f=0;c!==null&&(f=c.retryLane),H9(a,f)}function she(a,c){var f=0;switch(a.tag){case 31:case 13:var g=a.stateNode,w=a.memoizedState;w!==null&&(f=w.retryLane);break;case 19:g=a.stateNode;break;case 22:g=a.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(c),H9(a,f)}function ohe(a,c){return ag(a,c)}var V$=null,Vg=null,YC=!1,U$=!1,QC=!1,Cp=0;function lu(a){a!==Vg&&a.next===null&&(Vg===null?V$=Vg=a:Vg=Vg.next=a),U$=!0,YC||(YC=!0,lhe())}function k_(a,c){if(!QC&&U$){QC=!0;do for(var f=!1,g=V$;g!==null;){if(a!==0){var w=g.pendingLanes;if(w===0)var S=0;else{var T=g.suspendedLanes,k=g.pingedLanes;S=(1<<31-as(42|a)+1)-1,S&=w&~(T&~k),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(f=!0,Y9(g,S))}else S=bt,S=pg(g,g===di?S:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(S&3)===0||Mf(g,S)||(f=!0,Y9(g,S));g=g.next}while(f);QC=!1}}function ahe(){W9()}function W9(){U$=YC=!1;var a=0;Cp!==0&&vhe()&&(a=Cp);for(var c=ss(),f=null,g=V$;g!==null;){var w=g.next,S=Z9(g,c);S===0?(g.next=null,f===null?V$=w:f.next=w,w===null&&(Vg=f)):(f=g,(a!==0||(S&3)!==0)&&(U$=!0)),g=w}Vr!==0&&Vr!==5||k_(a),Cp!==0&&(Cp=0)}function Z9(a,c){for(var f=a.suspendedLanes,g=a.pingedLanes,w=a.expirationTimes,S=a.pendingLanes&-62914561;0<S;){var T=31-as(S),k=1<<T,N=w[T];N===-1?((k&f)===0||(k&g)!==0)&&(w[T]=pO(k,c)):N<=c&&(a.expiredLanes|=k),S&=~k}if(c=di,f=bt,f=pg(a,a===c?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g=a.callbackNode,f===0||a===c&&(Yt===2||Yt===9)||a.cancelPendingCommit!==null)return g!==null&&g!==null&&ea(g),a.callbackNode=null,a.callbackPriority=0;if((f&3)===0||Mf(a,f)){if(c=f&-f,c===a.callbackPriority)return c;switch(g!==null&&ea(g),Xw(f)){case 2:case 8:f=qx;break;case 32:f=lg;break;case 268435456:f=Gx;break;default:f=lg}return g=J9.bind(null,a),f=ag(f,g),a.callbackPriority=c,a.callbackNode=f,c}return g!==null&&g!==null&&ea(g),a.callbackPriority=2,a.callbackNode=null,2}function J9(a,c){if(Vr!==0&&Vr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var f=a.callbackNode;if(F$()&&a.callbackNode!==f)return null;var g=bt;return g=pg(a,a===di?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g===0?null:(k9(a,g,c),Z9(a,ss()),a.callbackNode!=null&&a.callbackNode===f?J9.bind(null,a):null)}function Y9(a,c){if(F$())return null;k9(a,c,!0)}function lhe(){whe(function(){(Ft&6)!==0?ag(Ux,ahe):W9()})}function XC(){if(Cp===0){var a=Eg;a===0&&(a=ug,ug<<=1,(ug&261888)===0&&(ug=256)),Cp=a}return Cp}function Q9(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Yx(""+a)}function X9(a,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,a.id&&f.setAttribute("form",a.id),c.parentNode.insertBefore(f,c),a=new FormData(a),f.parentNode.removeChild(f),a}function uhe(a,c,f,g,w){if(c==="submit"&&f&&f.stateNode===w){var S=Q9((w[vn]||null).action),T=g.submitter;T&&(c=(c=T[vn]||null)?Q9(c.formAction):T.getAttribute("formAction"),c!==null&&(S=c,T=null));var k=new e$("action","action",null,g,w);a.push({event:k,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Cp!==0){var N=T?X9(w,T):new FormData(w);vC(f,{pending:!0,data:N,method:w.method,action:S},null,N)}}else typeof S=="function"&&(k.preventDefault(),N=T?X9(w,T):new FormData(w),vC(f,{pending:!0,data:N,method:w.method,action:S},S,N))},currentTarget:w}]})}}for(var KC=0;KC<DO.length;KC++){var eR=DO[KC],che=eR.toLowerCase(),dhe=eR[0].toUpperCase()+eR.slice(1);el(che,"on"+dhe)}el(IV,"onAnimationEnd"),el(kV,"onAnimationIteration"),el(OV,"onAnimationStart"),el("dblclick","onDoubleClick"),el("focusin","onFocus"),el("focusout","onBlur"),el(Mpe,"onTransitionRun"),el(Ape,"onTransitionStart"),el(Ipe,"onTransitionCancel"),el(CV,"onTransitionEnd"),fp("onMouseEnter",["mouseout","mouseover"]),fp("onMouseLeave",["mouseout","mouseover"]),fp("onPointerEnter",["pointerout","pointerover"]),fp("onPointerLeave",["pointerout","pointerover"]),yc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yc("onBeforeInput",["compositionend","keypress","textInput","paste"]),yc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var O_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),phe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(O_));function K9(a,c){c=(c&4)!==0;for(var f=0;f<a.length;f++){var g=a[f],w=g.event;g=g.listeners;e:{var S=void 0;if(c)for(var T=g.length-1;0<=T;T--){var k=g[T],N=k.instance,J=k.currentTarget;if(k=k.listener,N!==S&&w.isPropagationStopped())break e;S=k,w.currentTarget=J;try{S(w)}catch(ne){r$(ne)}w.currentTarget=null,S=N}else for(T=0;T<g.length;T++){if(k=g[T],N=k.instance,J=k.currentTarget,k=k.listener,N!==S&&w.isPropagationStopped())break e;S=k,w.currentTarget=J;try{S(w)}catch(ne){r$(ne)}w.currentTarget=null,S=N}}}}function yt(a,c){var f=c[Ze];f===void 0&&(f=c[Ze]=new Set);var g=a+"__bubble";f.has(g)||(e7(c,a,2,!1),f.add(g))}function tR(a,c,f){var g=0;c&&(g|=4),e7(f,a,g,c)}var q$="_reactListening"+Math.random().toString(36).slice(2);function iR(a){if(!a[q$]){a[q$]=!0,Wx.forEach(function(f){f!=="selectionchange"&&(phe.has(f)||tR(f,!1,a),tR(f,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[q$]||(c[q$]=!0,tR("selectionchange",!1,c))}}function e7(a,c,f,g){switch(I7(c)){case 2:var w=Fhe;break;case 8:w=Vhe;break;default:w=gR}f=w.bind(null,c,f,a),w=void 0,!SO||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),g?w!==void 0?a.addEventListener(c,f,{capture:!0,passive:w}):a.addEventListener(c,f,!0):w!==void 0?a.addEventListener(c,f,{passive:w}):a.addEventListener(c,f,!1)}function rR(a,c,f,g,w){var S=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var T=g.tag;if(T===3||T===4){var k=g.stateNode.containerInfo;if(k===w)break;if(T===4)for(T=g.return;T!==null;){var N=T.tag;if((N===3||N===4)&&T.stateNode.containerInfo===w)return;T=T.return}for(;k!==null;){if(T=pp(k),T===null)return;if(N=T.tag,N===5||N===6||N===26||N===27){g=S=T;continue e}k=k.parentNode}}g=g.return}sV(function(){var J=S,ne=wO(f),le=[];e:{var X=RV.get(a);if(X!==void 0){var te=e$,De=a;switch(a){case"keypress":if(Xx(f)===0)break e;case"keydown":case"keyup":te=spe;break;case"focusin":De="focus",te=EO;break;case"focusout":De="blur",te=EO;break;case"beforeblur":case"afterblur":te=EO;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=lV;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Wde;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=lpe;break;case IV:case kV:case OV:te=Yde;break;case CV:te=cpe;break;case"scroll":case"scrollend":te=Bde;break;case"wheel":te=ppe;break;case"copy":case"cut":case"paste":te=Xde;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=cV;break;case"toggle":case"beforetoggle":te=fpe}var He=(c&4)!==0,ni=!He&&(a==="scroll"||a==="scrollend"),G=He?X!==null?X+"Capture":null:X;He=[];for(var V=J,Z;V!==null;){var oe=V;if(Z=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Z===null||G===null||(oe=Kw(V,G),oe!=null&&He.push(C_(V,oe,Z))),ni)break;V=V.return}0<He.length&&(X=new te(X,De,null,f,ne),le.push({event:X,listeners:He}))}}if((c&7)===0){e:{if(X=a==="mouseover"||a==="pointerover",te=a==="mouseout"||a==="pointerout",X&&f!==bO&&(De=f.relatedTarget||f.fromElement)&&(pp(De)||De[mc]))break e;if((te||X)&&(X=ne.window===ne?ne:(X=ne.ownerDocument)?X.defaultView||X.parentWindow:window,te?(De=f.relatedTarget||f.toElement,te=J,De=De?pp(De):null,De!==null&&(ni=s(De),He=De.tag,De!==ni||He!==5&&He!==27&&He!==6)&&(De=null)):(te=null,De=J),te!==De)){if(He=lV,oe="onMouseLeave",G="onMouseEnter",V="mouse",(a==="pointerout"||a==="pointerover")&&(He=cV,oe="onPointerLeave",G="onPointerEnter",V="pointer"),ni=te==null?X:Ni(te),Z=De==null?X:Ni(De),X=new He(oe,V+"leave",te,f,ne),X.target=ni,X.relatedTarget=Z,oe=null,pp(ne)===J&&(He=new He(G,V+"enter",De,f,ne),He.target=Z,He.relatedTarget=ni,oe=He),ni=oe,te&&De)t:{for(He=hhe,G=te,V=De,Z=0,oe=G;oe;oe=He(oe))Z++;oe=0;for(var qe=V;qe;qe=He(qe))oe++;for(;0<Z-oe;)G=He(G),Z--;for(;0<oe-Z;)V=He(V),oe--;for(;Z--;){if(G===V||V!==null&&G===V.alternate){He=G;break t}G=He(G),V=He(V)}He=null}else He=null;te!==null&&t7(le,X,te,He,!1),De!==null&&ni!==null&&t7(le,ni,De,He,!0)}}e:{if(X=J?Ni(J):window,te=X.nodeName&&X.nodeName.toLowerCase(),te==="select"||te==="input"&&X.type==="file")var Nt=vV;else if(yV(X))if(bV)Nt=$pe;else{Nt=Spe;var ze=_pe}else te=X.nodeName,!te||te.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?J&&vO(J.elementType)&&(Nt=vV):Nt=xpe;if(Nt&&(Nt=Nt(a,J))){gV(le,Nt,f,ne);break e}ze&&ze(a,X,J),a==="focusout"&&J&&X.type==="number"&&J.memoizedProps.value!=null&&gO(X,"number",X.value)}switch(ze=J?Ni(J):window,a){case"focusin":(yV(ze)||ze.contentEditable==="true")&&(vg=ze,CO=J,a_=null);break;case"focusout":a_=CO=vg=null;break;case"mousedown":RO=!0;break;case"contextmenu":case"mouseup":case"dragend":RO=!1,MV(le,f,ne);break;case"selectionchange":if(Epe)break;case"keydown":case"keyup":MV(le,f,ne)}var lt;if(AO)e:{switch(a){case"compositionstart":var wt="onCompositionStart";break e;case"compositionend":wt="onCompositionEnd";break e;case"compositionupdate":wt="onCompositionUpdate";break e}wt=void 0}else gg?fV(a,f)&&(wt="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(wt="onCompositionStart");wt&&(dV&&f.locale!=="ko"&&(gg||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&gg&&(lt=oV()):(yp=ne,xO="value"in yp?yp.value:yp.textContent,gg=!0)),ze=G$(J,wt),0<ze.length&&(wt=new uV(wt,a,null,f,ne),le.push({event:wt,listeners:ze}),lt?wt.data=lt:(lt=mV(f),lt!==null&&(wt.data=lt)))),(lt=ype?gpe(a,f):vpe(a,f))&&(wt=G$(J,"onBeforeInput"),0<wt.length&&(ze=new uV("onBeforeInput","beforeinput",null,f,ne),le.push({event:ze,listeners:wt}),ze.data=lt)),uhe(le,a,J,f,ne)}K9(le,c)})}function C_(a,c,f){return{instance:a,listener:c,currentTarget:f}}function G$(a,c){for(var f=c+"Capture",g=[];a!==null;){var w=a,S=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||S===null||(w=Kw(a,f),w!=null&&g.unshift(C_(a,w,S)),w=Kw(a,c),w!=null&&g.push(C_(a,w,S))),a.tag===3)return g;a=a.return}return[]}function hhe(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function t7(a,c,f,g,w){for(var S=c._reactName,T=[];f!==null&&f!==g;){var k=f,N=k.alternate,J=k.stateNode;if(k=k.tag,N!==null&&N===g)break;k!==5&&k!==26&&k!==27||J===null||(N=J,w?(J=Kw(f,S),J!=null&&T.unshift(C_(f,J,N))):w||(J=Kw(f,S),J!=null&&T.push(C_(f,J,N)))),f=f.return}T.length!==0&&a.push({event:c,listeners:T})}var fhe=/\r\n?/g,mhe=/\u0000|\uFFFD/g;function i7(a){return(typeof a=="string"?a:""+a).replace(fhe,`
`).replace(mhe,"")}function r7(a,c){return c=i7(c),i7(a)===c}function ri(a,c,f,g,w,S){switch(f){case"children":typeof g=="string"?c==="body"||c==="textarea"&&g===""||fg(a,g):(typeof g=="number"||typeof g=="bigint")&&c!=="body"&&fg(a,""+g);break;case"className":Cf(a,"class",g);break;case"tabIndex":Cf(a,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Cf(a,f,g);break;case"style":rV(a,g,S);break;case"data":if(c!=="object"){Cf(a,"data",g);break}case"src":case"href":if(g===""&&(c!=="a"||f!=="href")){a.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(f);break}g=Yx(""+g),a.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){a.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(f==="formAction"?(c!=="input"&&ri(a,c,"name",w.name,w,null),ri(a,c,"formEncType",w.formEncType,w,null),ri(a,c,"formMethod",w.formMethod,w,null),ri(a,c,"formTarget",w.formTarget,w,null)):(ri(a,c,"encType",w.encType,w,null),ri(a,c,"method",w.method,w,null),ri(a,c,"target",w.target,w,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(f);break}g=Yx(""+g),a.setAttribute(f,g);break;case"onClick":g!=null&&(a.onclick=gc);break;case"onScroll":g!=null&&yt("scroll",a);break;case"onScrollEnd":g!=null&&yt("scrollend",a);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(w.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"multiple":a.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":a.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){a.removeAttribute("xlink:href");break}f=Yx(""+g),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,""+g):a.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,""):a.removeAttribute(f);break;case"capture":case"download":g===!0?a.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,g):a.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?a.setAttribute(f,g):a.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?a.removeAttribute(f):a.setAttribute(f,g);break;case"popover":yt("beforetoggle",a),yt("toggle",a),mp(a,"popover",g);break;case"xlinkActuate":C(a,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":C(a,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":C(a,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":C(a,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":C(a,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":C(a,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":C(a,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":C(a,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":C(a,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":mp(a,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=qde.get(f)||f,mp(a,f,g))}}function nR(a,c,f,g,w,S){switch(f){case"style":rV(a,g,S);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(w.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"children":typeof g=="string"?fg(a,g):(typeof g=="number"||typeof g=="bigint")&&fg(a,""+g);break;case"onScroll":g!=null&&yt("scroll",a);break;case"onScrollEnd":g!=null&&yt("scrollend",a);break;case"onClick":g!=null&&(a.onclick=gc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zx.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(w=f.endsWith("Capture"),c=f.slice(2,w?f.length-7:void 0),S=a[vn]||null,S=S!=null?S[f]:null,typeof S=="function"&&a.removeEventListener(c,S,w),typeof g=="function")){typeof S!="function"&&S!==null&&(f in a?a[f]=null:a.hasAttribute(f)&&a.removeAttribute(f)),a.addEventListener(c,g,w);break e}f in a?a[f]=g:g===!0?a.setAttribute(f,""):mp(a,f,g)}}}function Sn(a,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yt("error",a),yt("load",a);var g=!1,w=!1,S;for(S in f)if(f.hasOwnProperty(S)){var T=f[S];if(T!=null)switch(S){case"src":g=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:ri(a,c,S,T,f,null)}}w&&ri(a,c,"srcSet",f.srcSet,f,null),g&&ri(a,c,"src",f.src,f,null);return;case"input":yt("invalid",a);var k=S=T=w=null,N=null,J=null;for(g in f)if(f.hasOwnProperty(g)){var ne=f[g];if(ne!=null)switch(g){case"name":w=ne;break;case"type":T=ne;break;case"checked":N=ne;break;case"defaultChecked":J=ne;break;case"value":S=ne;break;case"defaultValue":k=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,c));break;default:ri(a,c,g,ne,f,null)}}K8(a,S,k,N,J,T,w,!1);return;case"select":yt("invalid",a),g=T=S=null;for(w in f)if(f.hasOwnProperty(w)&&(k=f[w],k!=null))switch(w){case"value":S=k;break;case"defaultValue":T=k;break;case"multiple":g=k;default:ri(a,c,w,k,f,null)}c=S,f=T,a.multiple=!!g,c!=null?hg(a,!!g,c,!1):f!=null&&hg(a,!!g,f,!0);return;case"textarea":yt("invalid",a),S=w=g=null;for(T in f)if(f.hasOwnProperty(T)&&(k=f[T],k!=null))switch(T){case"value":g=k;break;case"defaultValue":w=k;break;case"children":S=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(91));break;default:ri(a,c,T,k,f,null)}tV(a,g,w,S);return;case"option":for(N in f)f.hasOwnProperty(N)&&(g=f[N],g!=null)&&(N==="selected"?a.selected=g&&typeof g!="function"&&typeof g!="symbol":ri(a,c,N,g,f,null));return;case"dialog":yt("beforetoggle",a),yt("toggle",a),yt("cancel",a),yt("close",a);break;case"iframe":case"object":yt("load",a);break;case"video":case"audio":for(g=0;g<O_.length;g++)yt(O_[g],a);break;case"image":yt("error",a),yt("load",a);break;case"details":yt("toggle",a);break;case"embed":case"source":case"link":yt("error",a),yt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in f)if(f.hasOwnProperty(J)&&(g=f[J],g!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:ri(a,c,J,g,f,null)}return;default:if(vO(c)){for(ne in f)f.hasOwnProperty(ne)&&(g=f[ne],g!==void 0&&nR(a,c,ne,g,f,void 0));return}}for(k in f)f.hasOwnProperty(k)&&(g=f[k],g!=null&&ri(a,c,k,g,f,null))}function yhe(a,c,f,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,S=null,T=null,k=null,N=null,J=null,ne=null;for(te in f){var le=f[te];if(f.hasOwnProperty(te)&&le!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":N=le;default:g.hasOwnProperty(te)||ri(a,c,te,null,g,le)}}for(var X in g){var te=g[X];if(le=f[X],g.hasOwnProperty(X)&&(te!=null||le!=null))switch(X){case"type":S=te;break;case"name":w=te;break;case"checked":J=te;break;case"defaultChecked":ne=te;break;case"value":T=te;break;case"defaultValue":k=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,c));break;default:te!==le&&ri(a,c,X,te,g,le)}}yO(a,T,k,N,J,ne,S,w);return;case"select":te=T=k=X=null;for(S in f)if(N=f[S],f.hasOwnProperty(S)&&N!=null)switch(S){case"value":break;case"multiple":te=N;default:g.hasOwnProperty(S)||ri(a,c,S,null,g,N)}for(w in g)if(S=g[w],N=f[w],g.hasOwnProperty(w)&&(S!=null||N!=null))switch(w){case"value":X=S;break;case"defaultValue":k=S;break;case"multiple":T=S;default:S!==N&&ri(a,c,w,S,g,N)}c=k,f=T,g=te,X!=null?hg(a,!!f,X,!1):!!g!=!!f&&(c!=null?hg(a,!!f,c,!0):hg(a,!!f,f?[]:"",!1));return;case"textarea":te=X=null;for(k in f)if(w=f[k],f.hasOwnProperty(k)&&w!=null&&!g.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:ri(a,c,k,null,g,w)}for(T in g)if(w=g[T],S=f[T],g.hasOwnProperty(T)&&(w!=null||S!=null))switch(T){case"value":X=w;break;case"defaultValue":te=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:w!==S&&ri(a,c,T,w,g,S)}eV(a,X,te);return;case"option":for(var De in f)X=f[De],f.hasOwnProperty(De)&&X!=null&&!g.hasOwnProperty(De)&&(De==="selected"?a.selected=!1:ri(a,c,De,null,g,X));for(N in g)X=g[N],te=f[N],g.hasOwnProperty(N)&&X!==te&&(X!=null||te!=null)&&(N==="selected"?a.selected=X&&typeof X!="function"&&typeof X!="symbol":ri(a,c,N,X,g,te));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in f)X=f[He],f.hasOwnProperty(He)&&X!=null&&!g.hasOwnProperty(He)&&ri(a,c,He,null,g,X);for(J in g)if(X=g[J],te=f[J],g.hasOwnProperty(J)&&X!==te&&(X!=null||te!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,c));break;default:ri(a,c,J,X,g,te)}return;default:if(vO(c)){for(var ni in f)X=f[ni],f.hasOwnProperty(ni)&&X!==void 0&&!g.hasOwnProperty(ni)&&nR(a,c,ni,void 0,g,X);for(ne in g)X=g[ne],te=f[ne],!g.hasOwnProperty(ne)||X===te||X===void 0&&te===void 0||nR(a,c,ne,X,g,te);return}}for(var G in f)X=f[G],f.hasOwnProperty(G)&&X!=null&&!g.hasOwnProperty(G)&&ri(a,c,G,null,g,X);for(le in g)X=g[le],te=f[le],!g.hasOwnProperty(le)||X===te||X==null&&te==null||ri(a,c,le,X,g,te)}function n7(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ghe(){if(typeof performance.getEntriesByType=="function"){for(var a=0,c=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var w=f[g],S=w.transferSize,T=w.initiatorType,k=w.duration;if(S&&k&&n7(T)){for(T=0,k=w.responseEnd,g+=1;g<f.length;g++){var N=f[g],J=N.startTime;if(J>k)break;var ne=N.transferSize,le=N.initiatorType;ne&&n7(le)&&(N=N.responseEnd,T+=ne*(N<k?1:(k-J)/(N-J)))}if(--g,c+=8*(S+T)/(w.duration/1e3),a++,10<a)break}}if(0<a)return c/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var sR=null,oR=null;function B$(a){return a.nodeType===9?a:a.ownerDocument}function s7(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function o7(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function aR(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var lR=null;function vhe(){var a=window.event;return a&&a.type==="popstate"?a===lR?!1:(lR=a,!0):(lR=null,!1)}var a7=typeof setTimeout=="function"?setTimeout:void 0,bhe=typeof clearTimeout=="function"?clearTimeout:void 0,l7=typeof Promise=="function"?Promise:void 0,whe=typeof queueMicrotask=="function"?queueMicrotask:typeof l7<"u"?function(a){return l7.resolve(null).then(a).catch(_he)}:a7;function _he(a){setTimeout(function(){throw a})}function Rp(a){return a==="head"}function u7(a,c){var f=c,g=0;do{var w=f.nextSibling;if(a.removeChild(f),w&&w.nodeType===8)if(f=w.data,f==="/$"||f==="/&"){if(g===0){a.removeChild(w),Bg(c);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")R_(a.ownerDocument.documentElement);else if(f==="head"){f=a.ownerDocument.head,R_(f);for(var S=f.firstChild;S;){var T=S.nextSibling,k=S.nodeName;S[kf]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&S.rel.toLowerCase()==="stylesheet"||f.removeChild(S),S=T}}else f==="body"&&R_(a.ownerDocument.body);f=w}while(f);Bg(c)}function c7(a,c){var f=a;a=0;do{var g=f.nextSibling;if(f.nodeType===1?c?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(c?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(a===0)break;a--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||a++;f=g}while(f)}function uR(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":uR(f),Of(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}a.removeChild(f)}}function She(a,c,f,g){for(;a.nodeType===1;){var w=f;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!g&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(g){if(!a[kf])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(S=a.getAttribute("rel"),S==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(S!==w.rel||a.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||a.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||a.getAttribute("title")!==(w.title==null?null:w.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(S=a.getAttribute("src"),(S!==(w.src==null?null:w.src)||a.getAttribute("type")!==(w.type==null?null:w.type)||a.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&S&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var S=w.name==null?null:""+w.name;if(w.type==="hidden"&&a.getAttribute("name")===S)return a}else return a;if(a=ua(a.nextSibling),a===null)break}return null}function xhe(a,c,f){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!f||(a=ua(a.nextSibling),a===null))return null;return a}function d7(a,c){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=ua(a.nextSibling),a===null))return null;return a}function cR(a){return a.data==="$?"||a.data==="$~"}function dR(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function $he(a,c){var f=a.ownerDocument;if(a.data==="$~")a._reactRetry=c;else if(a.data!=="$?"||f.readyState!=="loading")c();else{var g=function(){c(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),a._reactRetry=g}}function ua(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return a}var pR=null;function p7(a){a=a.nextSibling;for(var c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"||f==="/&"){if(c===0)return ua(a.nextSibling);c--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||c++}a=a.nextSibling}return null}function h7(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(c===0)return a;c--}else f!=="/$"&&f!=="/&"||c++}a=a.previousSibling}return null}function f7(a,c,f){switch(c=B$(f),a){case"html":if(a=c.documentElement,!a)throw Error(r(452));return a;case"head":if(a=c.head,!a)throw Error(r(453));return a;case"body":if(a=c.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function R_(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);Of(a)}var ca=new Map,m7=new Set;function H$(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Rc=ge.d;ge.d={f:The,r:Ehe,D:Mhe,C:Ahe,L:Ihe,m:khe,X:Che,S:Ohe,M:Rhe};function The(){var a=Rc.f(),c=L$();return a||c}function Ehe(a){var c=nu(a);c!==null&&c.tag===5&&c.type==="form"?CU(c):Rc.r(a)}var Ug=typeof document>"u"?null:document;function y7(a,c,f){var g=Ug;if(g&&typeof c=="string"&&c){var w=ia(c);w='link[rel="'+a+'"][href="'+w+'"]',typeof f=="string"&&(w+='[crossorigin="'+f+'"]'),m7.has(w)||(m7.add(w),a={rel:a,crossOrigin:f,href:c},g.querySelector(w)===null&&(c=g.createElement("link"),Sn(c,"link",a),hr(c),g.head.appendChild(c)))}}function Mhe(a){Rc.D(a),y7("dns-prefetch",a,null)}function Ahe(a,c){Rc.C(a,c),y7("preconnect",a,c)}function Ihe(a,c,f){Rc.L(a,c,f);var g=Ug;if(g&&a&&c){var w='link[rel="preload"][as="'+ia(c)+'"]';c==="image"&&f&&f.imageSrcSet?(w+='[imagesrcset="'+ia(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(w+='[imagesizes="'+ia(f.imageSizes)+'"]')):w+='[href="'+ia(a)+'"]';var S=w;switch(c){case"style":S=qg(a);break;case"script":S=Gg(a)}ca.has(S)||(a=v({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:a,as:c},f),ca.set(S,a),g.querySelector(w)!==null||c==="style"&&g.querySelector(P_(S))||c==="script"&&g.querySelector(D_(S))||(c=g.createElement("link"),Sn(c,"link",a),hr(c),g.head.appendChild(c)))}}function khe(a,c){Rc.m(a,c);var f=Ug;if(f&&a){var g=c&&typeof c.as=="string"?c.as:"script",w='link[rel="modulepreload"][as="'+ia(g)+'"][href="'+ia(a)+'"]',S=w;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Gg(a)}if(!ca.has(S)&&(a=v({rel:"modulepreload",href:a},c),ca.set(S,a),f.querySelector(w)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(D_(S)))return}g=f.createElement("link"),Sn(g,"link",a),hr(g),f.head.appendChild(g)}}}function Ohe(a,c,f){Rc.S(a,c,f);var g=Ug;if(g&&a){var w=hp(g).hoistableStyles,S=qg(a);c=c||"default";var T=w.get(S);if(!T){var k={loading:0,preload:null};if(T=g.querySelector(P_(S)))k.loading=5;else{a=v({rel:"stylesheet",href:a,"data-precedence":c},f),(f=ca.get(S))&&hR(a,f);var N=T=g.createElement("link");hr(N),Sn(N,"link",a),N._p=new Promise(function(J,ne){N.onload=J,N.onerror=ne}),N.addEventListener("load",function(){k.loading|=1}),N.addEventListener("error",function(){k.loading|=2}),k.loading|=4,W$(T,c,g)}T={type:"stylesheet",instance:T,count:1,state:k},w.set(S,T)}}}function Che(a,c){Rc.X(a,c);var f=Ug;if(f&&a){var g=hp(f).hoistableScripts,w=Gg(a),S=g.get(w);S||(S=f.querySelector(D_(w)),S||(a=v({src:a,async:!0},c),(c=ca.get(w))&&fR(a,c),S=f.createElement("script"),hr(S),Sn(S,"link",a),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(w,S))}}function Rhe(a,c){Rc.M(a,c);var f=Ug;if(f&&a){var g=hp(f).hoistableScripts,w=Gg(a),S=g.get(w);S||(S=f.querySelector(D_(w)),S||(a=v({src:a,async:!0,type:"module"},c),(c=ca.get(w))&&fR(a,c),S=f.createElement("script"),hr(S),Sn(S,"link",a),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(w,S))}}function g7(a,c,f,g){var w=(w=dt.current)?H$(w):null;if(!w)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=qg(f.href),f=hp(w).hoistableStyles,g=f.get(c),g||(g={type:"style",instance:null,count:0,state:null},f.set(c,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){a=qg(f.href);var S=hp(w).hoistableStyles,T=S.get(a);if(T||(w=w.ownerDocument||w,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(a,T),(S=w.querySelector(P_(a)))&&!S._p&&(T.instance=S,T.state.loading=5),ca.has(a)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},ca.set(a,f),S||Phe(w,a,f,T.state))),c&&g===null)throw Error(r(528,""));return T}if(c&&g!==null)throw Error(r(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Gg(f),f=hp(w).hoistableScripts,g=f.get(c),g||(g={type:"script",instance:null,count:0,state:null},f.set(c,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function qg(a){return'href="'+ia(a)+'"'}function P_(a){return'link[rel="stylesheet"]['+a+"]"}function v7(a){return v({},a,{"data-precedence":a.precedence,precedence:null})}function Phe(a,c,f,g){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?g.loading=1:(c=a.createElement("link"),g.preload=c,c.addEventListener("load",function(){return g.loading|=1}),c.addEventListener("error",function(){return g.loading|=2}),Sn(c,"link",f),hr(c),a.head.appendChild(c))}function Gg(a){return'[src="'+ia(a)+'"]'}function D_(a){return"script[async]"+a}function b7(a,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var g=a.querySelector('style[data-href~="'+ia(f.href)+'"]');if(g)return c.instance=g,hr(g),g;var w=v({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(a.ownerDocument||a).createElement("style"),hr(g),Sn(g,"style",w),W$(g,f.precedence,a),c.instance=g;case"stylesheet":w=qg(f.href);var S=a.querySelector(P_(w));if(S)return c.state.loading|=4,c.instance=S,hr(S),S;g=v7(f),(w=ca.get(w))&&hR(g,w),S=(a.ownerDocument||a).createElement("link"),hr(S);var T=S;return T._p=new Promise(function(k,N){T.onload=k,T.onerror=N}),Sn(S,"link",g),c.state.loading|=4,W$(S,f.precedence,a),c.instance=S;case"script":return S=Gg(f.src),(w=a.querySelector(D_(S)))?(c.instance=w,hr(w),w):(g=f,(w=ca.get(S))&&(g=v({},f),fR(g,w)),a=a.ownerDocument||a,w=a.createElement("script"),hr(w),Sn(w,"link",g),a.head.appendChild(w),c.instance=w);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(g=c.instance,c.state.loading|=4,W$(g,f.precedence,a));return c.instance}function W$(a,c,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=g.length?g[g.length-1]:null,S=w,T=0;T<g.length;T++){var k=g[T];if(k.dataset.precedence===c)S=k;else if(S!==w)break}S?S.parentNode.insertBefore(a,S.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(a,c.firstChild))}function hR(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function fR(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var Z$=null;function w7(a,c,f){if(Z$===null){var g=new Map,w=Z$=new Map;w.set(f,g)}else w=Z$,g=w.get(f),g||(g=new Map,w.set(f,g));if(g.has(a))return g;for(g.set(a,null),f=f.getElementsByTagName(a),w=0;w<f.length;w++){var S=f[w];if(!(S[kf]||S[vi]||a==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var T=S.getAttribute(c)||"";T=a+T;var k=g.get(T);k?k.push(S):g.set(T,[S])}}return g}function _7(a,c,f){a=a.ownerDocument||a,a.head.insertBefore(f,c==="title"?a.querySelector("head > title"):null)}function Dhe(a,c,f){if(f===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;return c.rel==="stylesheet"?(a=c.disabled,typeof c.precedence=="string"&&a==null):!0;case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function S7(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function Nhe(a,c,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var w=qg(g.href),S=c.querySelector(P_(w));if(S){c=S._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(a.count++,a=J$.bind(a),c.then(a,a)),f.state.loading|=4,f.instance=S,hr(S);return}S=c.ownerDocument||c,g=v7(g),(w=ca.get(w))&&hR(g,w),S=S.createElement("link"),hr(S);var T=S;T._p=new Promise(function(k,N){T.onload=k,T.onerror=N}),Sn(S,"link",g),f.instance=S}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(a.count++,f=J$.bind(a),c.addEventListener("load",f),c.addEventListener("error",f))}}var mR=0;function Lhe(a,c){return a.stylesheets&&a.count===0&&Q$(a,a.stylesheets),0<a.count||0<a.imgCount?function(f){var g=setTimeout(function(){if(a.stylesheets&&Q$(a,a.stylesheets),a.unsuspend){var S=a.unsuspend;a.unsuspend=null,S()}},6e4+c);0<a.imgBytes&&mR===0&&(mR=62500*ghe());var w=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&Q$(a,a.stylesheets),a.unsuspend)){var S=a.unsuspend;a.unsuspend=null,S()}},(a.imgBytes>mR?50:800)+c);return a.unsuspend=f,function(){a.unsuspend=null,clearTimeout(g),clearTimeout(w)}}:null}function J$(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Q$(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Y$=null;function Q$(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Y$=new Map,c.forEach(jhe,a),Y$=null,J$.call(a))}function jhe(a,c){if(!(c.state.loading&4)){var f=Y$.get(a);if(f)var g=f.get(null);else{f=new Map,Y$.set(a,f);for(var w=a.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<w.length;S++){var T=w[S];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(f.set(T.dataset.precedence,T),g=T)}g&&f.set(null,g)}w=c.instance,T=w.getAttribute("data-precedence"),S=f.get(T)||g,S===g&&f.set(null,w),f.set(T,w),this.count++,g=J$.bind(this),w.addEventListener("load",g),w.addEventListener("error",g),S?S.parentNode.insertBefore(w,S.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(w,a.firstChild)),c.state.loading|=4}}var N_={$$typeof:D,Provider:null,Consumer:null,_currentValue:Se,_currentValue2:Se,_threadCount:0};function zhe(a,c,f,g,w,S,T,k,N){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ti(0),this.hiddenUpdates=ti(null),this.identifierPrefix=g,this.onUncaughtError=w,this.onCaughtError=S,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function x7(a,c,f,g,w,S,T,k,N,J,ne,le){return a=new zhe(a,c,f,T,N,J,ne,le,k),c=1,S===!0&&(c|=24),S=po(3,null,null,c),a.current=S,S.stateNode=a,c=ZO(),c.refCount++,a.pooledCache=c,c.refCount++,S.memoizedState={element:g,isDehydrated:f,cache:c},XO(S),a}function $7(a){return a?(a=_g,a):_g}function T7(a,c,f,g,w,S){w=$7(w),g.context===null?g.context=w:g.pendingContext=w,g=Sp(c),g.payload={element:f},S=S===void 0?null:S,S!==null&&(g.callback=S),f=xp(a,g,c),f!==null&&(Ns(f,a,c),f_(f,a,c))}function E7(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<c?f:c}}function yR(a,c){E7(a,c),(a=a.alternate)&&E7(a,c)}function M7(a){if(a.tag===13||a.tag===31){var c=Nf(a,67108864);c!==null&&Ns(c,a,67108864),yR(a,67108864)}}function A7(a){if(a.tag===13||a.tag===31){var c=go();c=cp(c);var f=Nf(a,c);f!==null&&Ns(f,a,c),yR(a,c)}}var X$=!0;function Fhe(a,c,f,g){var w=ee.T;ee.T=null;var S=ge.p;try{ge.p=2,gR(a,c,f,g)}finally{ge.p=S,ee.T=w}}function Vhe(a,c,f,g){var w=ee.T;ee.T=null;var S=ge.p;try{ge.p=8,gR(a,c,f,g)}finally{ge.p=S,ee.T=w}}function gR(a,c,f,g){if(X$){var w=vR(g);if(w===null)rR(a,c,g,K$,f),k7(a,g);else if(qhe(w,a,c,f,g))g.stopPropagation();else if(k7(a,g),c&4&&-1<Uhe.indexOf(a)){for(;w!==null;){var S=nu(w);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var T=fc(S.pendingLanes);if(T!==0){var k=S;for(k.pendingLanes|=2,k.entangledLanes|=2;T;){var N=1<<31-as(T);k.entanglements[1]|=N,T&=~N}lu(S),(Ft&6)===0&&(D$=ss()+500,k_(0))}}break;case 31:case 13:k=Nf(S,2),k!==null&&Ns(k,S,2),L$(),yR(S,2)}if(S=vR(g),S===null&&rR(a,c,g,K$,f),S===w)break;w=S}w!==null&&g.stopPropagation()}else rR(a,c,g,null,f)}}function vR(a){return a=wO(a),bR(a)}var K$=null;function bR(a){if(K$=null,a=pp(a),a!==null){var c=s(a);if(c===null)a=null;else{var f=c.tag;if(f===13){if(a=o(c),a!==null)return a;a=null}else if(f===31){if(a=u(c),a!==null)return a;a=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return K$=a,null}function I7(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oO()){case Ux:return 2;case qx:return 8;case lg:case X8:return 32;case Gx:return 268435456;default:return 32}default:return 32}}var wR=!1,Pp=null,Dp=null,Np=null,L_=new Map,j_=new Map,Lp=[],Uhe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function k7(a,c){switch(a){case"focusin":case"focusout":Pp=null;break;case"dragenter":case"dragleave":Dp=null;break;case"mouseover":case"mouseout":Np=null;break;case"pointerover":case"pointerout":L_.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":j_.delete(c.pointerId)}}function z_(a,c,f,g,w,S){return a===null||a.nativeEvent!==S?(a={blockedOn:c,domEventName:f,eventSystemFlags:g,nativeEvent:S,targetContainers:[w]},c!==null&&(c=nu(c),c!==null&&M7(c)),a):(a.eventSystemFlags|=g,c=a.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),a)}function qhe(a,c,f,g,w){switch(c){case"focusin":return Pp=z_(Pp,a,c,f,g,w),!0;case"dragenter":return Dp=z_(Dp,a,c,f,g,w),!0;case"mouseover":return Np=z_(Np,a,c,f,g,w),!0;case"pointerover":var S=w.pointerId;return L_.set(S,z_(L_.get(S)||null,a,c,f,g,w)),!0;case"gotpointercapture":return S=w.pointerId,j_.set(S,z_(j_.get(S)||null,a,c,f,g,w)),!0}return!1}function O7(a){var c=pp(a.target);if(c!==null){var f=s(c);if(f!==null){if(c=f.tag,c===13){if(c=o(f),c!==null){a.blockedOn=c,dp(a.priority,function(){A7(f)});return}}else if(c===31){if(c=u(f),c!==null){a.blockedOn=c,dp(a.priority,function(){A7(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function eT(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var f=vR(a.nativeEvent);if(f===null){f=a.nativeEvent;var g=new f.constructor(f.type,f);bO=g,f.target.dispatchEvent(g),bO=null}else return c=nu(f),c!==null&&M7(c),a.blockedOn=f,!1;c.shift()}return!0}function C7(a,c,f){eT(a)&&f.delete(c)}function Ghe(){wR=!1,Pp!==null&&eT(Pp)&&(Pp=null),Dp!==null&&eT(Dp)&&(Dp=null),Np!==null&&eT(Np)&&(Np=null),L_.forEach(C7),j_.forEach(C7)}function tT(a,c){a.blockedOn===c&&(a.blockedOn=null,wR||(wR=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ghe)))}var iT=null;function R7(a){iT!==a&&(iT=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){iT===a&&(iT=null);for(var c=0;c<a.length;c+=3){var f=a[c],g=a[c+1],w=a[c+2];if(typeof g!="function"){if(bR(g||f)===null)continue;break}var S=nu(f);S!==null&&(a.splice(c,3),c-=3,vC(S,{pending:!0,data:w,method:f.method,action:g},g,w))}}))}function Bg(a){function c(N){return tT(N,a)}Pp!==null&&tT(Pp,a),Dp!==null&&tT(Dp,a),Np!==null&&tT(Np,a),L_.forEach(c),j_.forEach(c);for(var f=0;f<Lp.length;f++){var g=Lp[f];g.blockedOn===a&&(g.blockedOn=null)}for(;0<Lp.length&&(f=Lp[0],f.blockedOn===null);)O7(f),f.blockedOn===null&&Lp.shift();if(f=(a.ownerDocument||a).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var w=f[g],S=f[g+1],T=w[vn]||null;if(typeof S=="function")T||R7(f);else if(T){var k=null;if(S&&S.hasAttribute("formAction")){if(w=S,T=S[vn]||null)k=T.formAction;else if(bR(w)!==null)continue}else k=T.action;typeof k=="function"?f[g+1]=k:(f.splice(g,3),g-=3),R7(f)}}}function P7(){function a(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(T){return w=T})},focusReset:"manual",scroll:"manual"})}function c(){w!==null&&(w(),w=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,w=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),w!==null&&(w(),w=null)}}}function _R(a){this._internalRoot=a}rT.prototype.render=_R.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(r(409));var f=c.current,g=go();T7(f,g,a,c,null,null)},rT.prototype.unmount=_R.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;T7(a.current,2,null,a,null,null),L$(),c[mc]=null}};function rT(a){this._internalRoot=a}rT.prototype.unstable_scheduleHydration=function(a){if(a){var c=pr();a={blockedOn:null,target:a,priority:c};for(var f=0;f<Lp.length&&c!==0&&c<Lp[f].priority;f++);Lp.splice(f,0,a),f===0&&O7(a)}};var D7=e.version;if(D7!=="19.2.3")throw Error(r(527,D7,"19.2.3"));ge.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=h(c),a=a!==null?m(a):null,a=a===null?null:a.stateNode,a};var Bhe={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nT=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nT.isDisabled&&nT.supportsFiber)try{Ef=nT.inject(Bhe),os=nT}catch{}}return U_.createRoot=function(a,c){if(!n(a))throw Error(r(299));var f=!1,g="",w=UU,S=qU,T=GU;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(T=c.onRecoverableError)),c=x7(a,1,!1,null,null,f,g,null,w,S,T,P7),a[mc]=c.current,iR(a),new _R(c)},U_.hydrateRoot=function(a,c,f){if(!n(a))throw Error(r(299));var g=!1,w="",S=UU,T=qU,k=GU,N=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(w=f.identifierPrefix),f.onUncaughtError!==void 0&&(S=f.onUncaughtError),f.onCaughtError!==void 0&&(T=f.onCaughtError),f.onRecoverableError!==void 0&&(k=f.onRecoverableError),f.formState!==void 0&&(N=f.formState)),c=x7(a,1,!0,c,f??null,g,w,N,S,T,k,P7),c.context=$7(null),f=c.current,g=go(),g=cp(g),w=Sp(g),w.callback=null,xp(f,w,g),f=g,c.current.lanes=f,ta(c,f),lu(c),a[mc]=c.current,iR(a),new rT(c)},U_.version="19.2.3",U_}var W7;function nfe(){if(W7)return TR.exports;W7=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),TR.exports=rfe(),TR.exports}var sfe=nfe();const Gi=(t,e,...i)=>{try{return t?.call(e,...i)}catch(r){console.error(r,t)}},FP=async(t,e,...i)=>{try{return await t?.call(e,...i)}catch(r){console.error(r,t)}},lz=Symbol.for("controller"),ofe=t=>typeof t=="object"&&t!==null&&(lz in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),afe=t=>typeof t?.then=="function",lfe=t=>t.M.length;let k1;const x0=t=>{k1!==t&&(k1=t,queueMicrotask(()=>k1===t?k1=void 0:0))},hw=t=>k1;let um=[];const VY=t=>{if(t===void 0){um=[];return}const e=um.indexOf(t);um=e===-1?[...um,t]:um.slice(0,e+1),queueMicrotask(()=>um=[])},UY=()=>um;let $0;const ufe=t=>{$0!==t&&($0=t,queueMicrotask(()=>$0===t?$0=void 0:0))},cfe=()=>{const t=$0;return $0=void 0,t},dfe=async(t,e)=>{const i=uz(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const r=i.watchExports(n=>e(n,r))}return i.exports},pfe=async t=>{const e=uz(t);return await e.ready,e},uz=t=>{const i=hw().manager.X(t);if(i!==void 0)return i;if(ofe(t))return t;const r=cfe();if(r!==void 0)return r};let VP=!1;const hfe=t=>{VP=!0;try{return t()}finally{VP=!1}};const HE=globalThis,cz=HE.ShadowRoot&&(HE.ShadyCSS===void 0||HE.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,dz=Symbol(),Z7=new WeakMap;let qY=class{constructor(e,i,r){if(this._$cssResult$=!0,r!==dz)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=i}get styleSheet(){let e=this.o;const i=this.t;if(cz&&e===void 0){const r=i!==void 0&&i.length===1;r&&(e=Z7.get(i)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&Z7.set(i,e))}return e}toString(){return this.cssText}};const ffe=t=>new qY(typeof t=="string"?t:t+"",void 0,dz),bf=(t,...e)=>{const i=t.length===1?t[0]:e.reduce((r,n,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[s+1],t[0]);return new qY(i,t,dz)},mfe=(t,e)=>{if(cz)t.adoptedStyleSheets=e.map(i=>i instanceof CSSStyleSheet?i:i.styleSheet);else for(const i of e){const r=document.createElement("style"),n=HE.litNonce;n!==void 0&&r.setAttribute("nonce",n),r.textContent=i.cssText,t.appendChild(r)}},J7=cz?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let i="";for(const r of e.cssRules)i+=r.cssText;return ffe(i)})(t):t;const{is:yfe,defineProperty:gfe,getOwnPropertyDescriptor:vfe,getOwnPropertyNames:bfe,getOwnPropertySymbols:wfe,getPrototypeOf:_fe}=Object,wI=globalThis,Y7=wI.trustedTypes,Sfe=Y7?Y7.emptyScript:"",xfe=wI.reactiveElementPolyfillSupport,C2=(t,e)=>t,UP={toAttribute(t,e){switch(e){case Boolean:t=t?Sfe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=t!==null;break;case Number:i=t===null?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch{i=null}}return i}},pz=(t,e)=>!yfe(t,e),Q7={attribute:!0,type:String,converter:UP,reflect:!1,useDefault:!1,hasChanged:pz};Symbol.metadata??=Symbol("metadata"),wI.litPropertyMetadata??=new WeakMap;let gv=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,i=Q7){if(i.state&&(i.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((i=Object.create(i)).wrapped=!0),this.elementProperties.set(e,i),!i.noAccessor){const r=Symbol(),n=this.getPropertyDescriptor(e,r,i);n!==void 0&&gfe(this.prototype,e,n)}}static getPropertyDescriptor(e,i,r){const{get:n,set:s}=vfe(this.prototype,e)??{get(){return this[i]},set(o){this[i]=o}};return{get:n,set(o){const u=n?.call(this);s?.call(this,o),this.requestUpdate(e,u,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Q7}static _$Ei(){if(this.hasOwnProperty(C2("elementProperties")))return;const e=_fe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(C2("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(C2("properties"))){const i=this.properties,r=[...bfe(i),...wfe(i)];for(const n of r)this.createProperty(n,i[n])}const e=this[Symbol.metadata];if(e!==null){const i=litPropertyMetadata.get(e);if(i!==void 0)for(const[r,n]of i)this.elementProperties.set(r,n)}this._$Eh=new Map;for(const[i,r]of this.elementProperties){const n=this._$Eu(i,r);n!==void 0&&this._$Eh.set(n,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const i=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const n of r)i.unshift(J7(n))}else e!==void 0&&i.push(J7(e));return i}static _$Eu(e,i){const r=i.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,i=this.constructor.elementProperties;for(const r of i.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return mfe(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,i,r){this._$AK(e,r)}_$ET(e,i){const r=this.constructor.elementProperties.get(e),n=this.constructor._$Eu(e,r);if(n!==void 0&&r.reflect===!0){const s=(r.converter?.toAttribute!==void 0?r.converter:UP).toAttribute(i,r.type);this._$Em=e,s==null?this.removeAttribute(n):this.setAttribute(n,s),this._$Em=null}}_$AK(e,i){const r=this.constructor,n=r._$Eh.get(e);if(n!==void 0&&this._$Em!==n){const s=r.getPropertyOptions(n),o=typeof s.converter=="function"?{fromAttribute:s.converter}:s.converter?.fromAttribute!==void 0?s.converter:UP;this._$Em=n;const u=o.fromAttribute(i,s.type);this[n]=u??this._$Ej?.get(n)??u,this._$Em=null}}requestUpdate(e,i,r,n=!1,s){if(e!==void 0){const o=this.constructor;if(n===!1&&(s=this[e]),r??=o.getPropertyOptions(e),!((r.hasChanged??pz)(s,i)||r.useDefault&&r.reflect&&s===this._$Ej?.get(e)&&!this.hasAttribute(o._$Eu(e,r))))return;this.C(e,i,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,i,{useDefault:r,reflect:n,wrapped:s},o){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,o??i??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(i=void 0),this._$AL.set(e,i)),n===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[n,s]of this._$Ep)this[n]=s;this._$Ep=void 0}const r=this.constructor.elementProperties;if(r.size>0)for(const[n,s]of r){const{wrapped:o}=s,u=this[n];o!==!0||this._$AL.has(n)||u===void 0||this.C(n,void 0,s,u)}}let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),this._$EO?.forEach(r=>r.hostUpdate?.()),this.update(i)):this._$EM()}catch(r){throw e=!1,this._$EM(),r}e&&this._$AE(i)}willUpdate(e){}_$AE(e){this._$EO?.forEach(i=>i.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(i=>this._$ET(i,this[i])),this._$EM()}updated(e){}firstUpdated(e){}};gv.elementStyles=[],gv.shadowRootOptions={mode:"open"},gv[C2("elementProperties")]=new Map,gv[C2("finalized")]=new Map,xfe?.({ReactiveElement:gv}),(wI.reactiveElementVersions??=[]).push("2.1.2");const hz=globalThis,X7=t=>t,C3=hz.trustedTypes,K7=C3?C3.createPolicy("lit-html",{createHTML:t=>t}):void 0,GY="$lit$",Oh=`lit$${Math.random().toFixed(9).slice(2)}$`,BY="?"+Oh,$fe=`<${BY}>`,Ey=document,vS=()=>Ey.createComment(""),bS=t=>t===null||typeof t!="object"&&typeof t!="function",fz=Array.isArray,Tfe=t=>fz(t)||typeof t?.[Symbol.iterator]=="function",IR=`[ 	
\f\r]`,q_=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,eq=/-->/g,tq=/>/g,Jf=RegExp(`>|${IR}(?:([^\\s"'>=/]+)(${IR}*=${IR}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),iq=/'/g,rq=/"/g,HY=/^(?:script|style|textarea|title)$/i,WY=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),ar=WY(1),nq=WY(2),nf=Symbol.for("lit-noChange"),li=Symbol.for("lit-nothing"),sq=new WeakMap,Ym=Ey.createTreeWalker(Ey,129);function ZY(t,e){if(!fz(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return K7!==void 0?K7.createHTML(e):e}const Efe=(t,e)=>{const i=t.length-1,r=[];let n,s=e===2?"<svg>":e===3?"<math>":"",o=q_;for(let u=0;u<i;u++){const d=t[u];let h,m,v=-1,b=0;for(;b<d.length&&(o.lastIndex=b,m=o.exec(d),m!==null);)b=o.lastIndex,o===q_?m[1]==="!--"?o=eq:m[1]!==void 0?o=tq:m[2]!==void 0?(HY.test(m[2])&&(n=RegExp("</"+m[2],"g")),o=Jf):m[3]!==void 0&&(o=Jf):o===Jf?m[0]===">"?(o=n??q_,v=-1):m[1]===void 0?v=-2:(v=o.lastIndex-m[2].length,h=m[1],o=m[3]===void 0?Jf:m[3]==='"'?rq:iq):o===rq||o===iq?o=Jf:o===eq||o===tq?o=q_:(o=Jf,n=void 0);const _=o===Jf&&t[u+1].startsWith("/>")?" ":"";s+=o===q_?d+$fe:v>=0?(r.push(h),d.slice(0,v)+GY+d.slice(v)+Oh+_):d+Oh+(v===-2?u:_)}return[ZY(t,s+(t[i]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};let qP=class JY{constructor({strings:e,_$litType$:i},r){let n;this.parts=[];let s=0,o=0;const u=e.length-1,d=this.parts,[h,m]=Efe(e,i);if(this.el=JY.createElement(h,r),Ym.currentNode=this.el.content,i===2||i===3){const v=this.el.content.firstChild;v.replaceWith(...v.childNodes)}for(;(n=Ym.nextNode())!==null&&d.length<u;){if(n.nodeType===1){if(n.hasAttributes())for(const v of n.getAttributeNames())if(v.endsWith(GY)){const b=m[o++],_=n.getAttribute(v).split(Oh),x=/([.?@])?(.*)/.exec(b);d.push({type:1,index:s,name:x[2],strings:_,ctor:x[1]==="."?Afe:x[1]==="?"?Ife:x[1]==="@"?kfe:_I}),n.removeAttribute(v)}else v.startsWith(Oh)&&(d.push({type:6,index:s}),n.removeAttribute(v));if(HY.test(n.tagName)){const v=n.textContent.split(Oh),b=v.length-1;if(b>0){n.textContent=C3?C3.emptyScript:"";for(let _=0;_<b;_++)n.append(v[_],vS()),Ym.nextNode(),d.push({type:2,index:++s});n.append(v[b],vS())}}}else if(n.nodeType===8)if(n.data===BY)d.push({type:2,index:s});else{let v=-1;for(;(v=n.data.indexOf(Oh,v+1))!==-1;)d.push({type:7,index:s}),v+=Oh.length-1}s++}}static createElement(e,i){const r=Ey.createElement("template");return r.innerHTML=e,r}};function Db(t,e,i=t,r){if(e===nf)return e;let n=r!==void 0?i._$Co?.[r]:i._$Cl;const s=bS(e)?void 0:e._$litDirective$;return n?.constructor!==s&&(n?._$AO?.(!1),s===void 0?n=void 0:(n=new s(t),n._$AT(t,i,r)),r!==void 0?(i._$Co??=[])[r]=n:i._$Cl=n),n!==void 0&&(e=Db(t,n._$AS(t,e.values),n,r)),e}let Mfe=class{constructor(e,i){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:i},parts:r}=this._$AD,n=(e?.creationScope??Ey).importNode(i,!0);Ym.currentNode=n;let s=Ym.nextNode(),o=0,u=0,d=r[0];for(;d!==void 0;){if(o===d.index){let h;d.type===2?h=new mz(s,s.nextSibling,this,e):d.type===1?h=new d.ctor(s,d.name,d.strings,this,e):d.type===6&&(h=new Ofe(s,this,e)),this._$AV.push(h),d=r[++u]}o!==d?.index&&(s=Ym.nextNode(),o++)}return Ym.currentNode=Ey,n}p(e){let i=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,i),i+=r.strings.length-2):r._$AI(e[i])),i++}},mz=class YY{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,i,r,n){this.type=2,this._$AH=li,this._$AN=void 0,this._$AA=e,this._$AB=i,this._$AM=r,this.options=n,this._$Cv=n?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&e?.nodeType===11&&(e=i.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,i=this){e=Db(this,e,i),bS(e)?e===li||e==null||e===""?(this._$AH!==li&&this._$AR(),this._$AH=li):e!==this._$AH&&e!==nf&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Tfe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==li&&bS(this._$AH)?this._$AA.nextSibling.data=e:this.T(Ey.createTextNode(e)),this._$AH=e}$(e){const{values:i,_$litType$:r}=e,n=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=qP.createElement(ZY(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===n)this._$AH.p(i);else{const s=new Mfe(n,this),o=s.u(this.options);s.p(i),this.T(o),this._$AH=s}}_$AC(e){let i=sq.get(e.strings);return i===void 0&&sq.set(e.strings,i=new qP(e)),i}k(e){fz(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let r,n=0;for(const s of e)n===i.length?i.push(r=new YY(this.O(vS()),this.O(vS()),this,this.options)):r=i[n],r._$AI(s),n++;n<i.length&&(this._$AR(r&&r._$AB.nextSibling,n),i.length=n)}_$AR(e=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);e!==this._$AB;){const r=X7(e).nextSibling;X7(e).remove(),e=r}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}},_I=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,i,r,n,s){this.type=1,this._$AH=li,this._$AN=void 0,this.element=e,this.name=i,this._$AM=n,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=li}_$AI(e,i=this,r,n){const s=this.strings;let o=!1;if(s===void 0)e=Db(this,e,i,0),o=!bS(e)||e!==this._$AH&&e!==nf,o&&(this._$AH=e);else{const u=e;let d,h;for(e=s[0],d=0;d<s.length-1;d++)h=Db(this,u[r+d],i,d),h===nf&&(h=this._$AH[d]),o||=!bS(h)||h!==this._$AH[d],h===li?e=li:e!==li&&(e+=(h??"")+s[d+1]),this._$AH[d]=h}o&&!n&&this.j(e)}j(e){e===li?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},Afe=class extends _I{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===li?void 0:e}},Ife=class extends _I{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==li)}},kfe=class extends _I{constructor(e,i,r,n,s){super(e,i,r,n,s),this.type=5}_$AI(e,i=this){if((e=Db(this,e,i,0)??li)===nf)return;const r=this._$AH,n=e===li&&r!==li||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==li&&(r===li||n);n&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},Ofe=class{constructor(e,i,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=i,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Db(this,e)}};const Cfe=hz.litHtmlPolyfillSupport;Cfe?.(qP,mz),(hz.litHtmlVersions??=[]).push("3.3.2");const Rfe=(t,e,i)=>{const r=i?.renderBefore??e;let n=r._$litPart$;if(n===void 0){const s=i?.renderBefore??null;r._$litPart$=n=new mz(e.insertBefore(vS(),s),s,void 0,i??{})}return n._$AI(t),n};const yz=globalThis;let j0=class extends gv{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Rfe(i,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return nf}};j0._$litElement$=!0,j0.finalized=!0,yz.litElementHydrateSupport?.({LitElement:j0});const Pfe=yz.litElementPolyfillSupport;Pfe?.({LitElement:j0});(yz.litElementVersions??=[]).push("4.2.2");class wS{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}const Dfe=(t,e)=>{const i=e/Nfe;let r=0;const n=setInterval(()=>{r+=i,r>=e&&(clearInterval(n),t())},i);return n},Nfe=4,Lfe=(t,e,i)=>{const r=Object.keys(t),n=r.length;T0===void 0&&queueMicrotask(SI),T0??=new Map;let s=T0.get(t);return s===void 0&&(s={callbacks:[],keyCount:n},T0.set(t,s)),s.keyCount!==n&&(s.callbacks.forEach(o=>o(r)),s.callbacks=[],s.keyCount=n),s.callbacks.push(o=>{const u=h=>Gi(e,null,h),d=o[n];d===void 0?u(void 0):t[d]===i?u(d):u(void 0)}),i};let T0;const SI=()=>{T0?.forEach(({callbacks:t},e)=>{const i=Object.keys(e);t.forEach(r=>r(i))}),T0=void 0},gz=(t,e,i)=>{const r=t.manager;return r.V!==li&&r.V!==i&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=i,r.T.push((n,s)=>Gi(e,void 0,i===s?n:void 0)),i},vz=(t=[hw(),...UY()],e,i)=>{const r=Array.isArray(t)?t:[t];let n=r.length+1;const s=o=>{n-=1,o!==void 0&&(n=Math.min(n,0)),n===0&&e(o)};r.forEach(o=>Lfe(o,u=>s(u===void 0?void 0:{key:u,host:o,isReactive:!1}),i));for(const o of r)if("manager"in o&&o.manager.component===o){gz(o,u=>s(u===void 0?void 0:{key:u,host:o,isReactive:!0}),i);break}return i},bz=(t="",e={},i=hw())=>{const r={emit:n=>{t===""&&SI();const s=new CustomEvent(t,{detail:n,cancelable:!0,bubbles:!0,composed:!0,...e});return i.el.dispatchEvent(s),s}};return t===""&&vz(void 0,n=>t=n.key,r),r},to=bz.bind(null,"");var QY;QY=lz;class wz{constructor(e){this.#e=[],this.#t=[],this.#i=[],this.#o=[],this.#a=[],this.#l=[],this.#d=[],this.#p=[],this.#u=[],this.#c=!1,this.P=new wS,this.connectedCalled=!1,this.loadedCalled=!1,this[QY]=!0,this.#s=[];const i=this,r=e??hw();i.#r=r,i.ready=i.P.promise,i.#n=aq(i),i.component=r,i.#r.addController(i),i.#r.manager===void 0||(VY(i),queueMicrotask(()=>i.catchUpLifecycle()))}#e;#t;#i;#o;#a;#l;#d;#p;#u;#c;#r;catchUpLifecycle(){const{manager:e}=this.#r;e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),e.#c&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}#n;get exports(){return this.#n}set exports(e){const i=this.#n;i!==e&&(this.#n=e,this.#s.forEach(Gi),this.connectedCalled&&this.O!==!1&&this.#r.requestUpdate(this.O,i)),this.P.resolve(e)}setProvisionalExports(e,i=!0){this.#n=i?aq(e):e,this.#s.forEach(Gi)}#s;watchExports(e){const i=()=>e(this.#n);return this.#s.push(i),()=>{this.#s.splice(this.#s.indexOf(i),1)}}get use(){return x0(this.#r),dfe}get useRef(){return x0(this.#r),pfe}get useRefSync(){return x0(this.#r),uz}controllerRemoved(){this.#r.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){this.#e.push(e)}onDisconnected(e){this.#t.push(e)}onLoad(e){this.#i.push(e)}onLoaded(e){this.#o.push(e)}onUpdate(e){this.#a.push(e)}onUpdated(e){this.#l.push(e)}onDestroy(e){this.#d.push(e)}onLifecycle(e){this.#p.push(e),this.connectedCalled&&this.#r.el.isConnected&&this.#h(e)}triggerConnected(){const e=this;e.hostConnected&&Gi(e.hostConnected,e),e.#e.forEach(Gi),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&Gi(e.hostDisconnected,e),e.#t.forEach(Gi),e.#u.forEach(Gi),e.#u=[]}async triggerLoad(){if(this.#c)return;this.#c=!0;const e=this;e.hostLoad&&await FP(e.hostLoad,e),this.#i.length>0&&await Promise.allSettled(this.#i.map(FP)),this.P.resolve(this.#n)}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&Gi(this.hostLoaded,this),this.#o.forEach(Gi),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&Gi(this.hostUpdate,this,e),this.#a.forEach(oq,e)}triggerUpdated(e){this.hostUpdated&&Gi(this.hostUpdated,this,e),this.#l.forEach(oq,e)}triggerDestroy(){this.hostDestroy&&Gi(this.hostDestroy,this),this.#d.forEach(Gi)}triggerLifecycle(){this.hostLifecycle&&this.#h(()=>this.hostLifecycle()),this.#p.forEach(this.#h,this)}#h(e){x0(this.#r);const i=Gi(e);(Array.isArray(i)?i:[i]).forEach(n=>{typeof n=="function"?this.#u.push(n):typeof n=="object"&&typeof n.remove=="function"&&this.#u.push(n.remove)})}}function oq(t){Gi(t,void 0,this)}const xI=wz,aq=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,n,s){if(!((n==="exports"||n==="_exports")&&n in r&&r[n]===i)&&(n in r||n in Promise.prototype||typeof n=="symbol"))return typeof r=="function"?r[n]:Reflect.get(r,n,s)}},i=new Proxy(t,e);return i},jfe=t=>t.replace(zfe,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),zfe=/[A-Z]+(?![a-z])|[A-Z]/gu,Ffe=1,Vfe=2,Ufe=4,qfe=8,Gfe=16,Bfe=32,Hfe=64,XY=t=>{let e=t;for(;e=e.parentNode??e.host;)if(e?.constructor?.lumina){const i=e;return i.manager?.loadedCalled||(i.J??i._offspring).push(t),(i.I??i._postLoad).promise}return!1},lq={};function KY(){}const WE=Object.defineProperty,Wfe=globalThis.HTMLElement??KY;var Zs,zd,ab,tx,GP;const Q8=class Q8 extends Wfe{constructor(){var n;super();rl(this,tx);rl(this,Zs);rl(this,zd);rl(this,ab);nl(this,zd,{}),nl(this,ab,[]),this.I=new wS,this.H=new wS,this.J=[];const i=this,r=i.constructor;i._offspring=i.J,i._postLoad=i.I,r.C?.forEach(s=>{Object.hasOwn(i,s)&&(Bt(i,zd)[s]=i[s],delete i[s])}),r.A?F_(n=i,tx,GP).call(n,{a:r.A}):r.B.then(async s=>{var o;await r.K.p,F_(o=i,tx,GP).call(o,await(s.default?.then(u=>typeof u=="function"?{a:u}:u)??s))}).catch(s=>{i.H.reject(s),setTimeout(()=>{throw s})})}static F(){for(const i of this.C??[])WE(this.prototype,i,{configurable:!0,enumerable:!0,get(){return Bt(this,zd)[i]},set(r){Bt(this,zd)[i]=r}});for(const i of this.E??[])WE(this.prototype,i,{async value(...r){return Bt(this,Zs)||await this.H.promise,await Bt(this,Zs)[i](...r)},configurable:!0});for(const i of this.D??[])WE(this.prototype,i,{value(...r){return Bt(this,Zs)[i](...r)},configurable:!0})}get manager(){return Bt(this,Zs)?.manager}attributeChangedCallback(i,r,n){Bt(this,Zs)?.attributeChangedCallback(i,r,n),Bt(this,Zs)||Bt(this,ab).push(i)}connectedCallback(){Bt(this,Zs)?Bt(this,Zs).connectedCallback?.():queueMicrotask(()=>this.G=XY(this))}disconnectedCallback(){Bt(this,Zs)?.disconnectedCallback?.()}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){Bt(this,Zs)?.requestUpdate()}};Zs=new WeakMap,zd=new WeakMap,ab=new WeakMap,tx=new WeakSet,GP=function(i){const r=this.constructor,n=r.L,s=Bt(this,zd),o=Object.values(i).find(b=>b.L===n),u=`${n}--lazy`;let d=o;for(;d&&!Object.hasOwn(d,"lumina");)d=Object.getPrototypeOf(d);Jfe(d),!r.A&&(r.A=o,customElements.define(u,o)),o.N=this;const m=document.createElement(u);o.N=void 0,nl(this,Zs,m),nl(this,zd,m),Bt(this,ab).forEach(b=>m.attributeChangedCallback(b,null,this.getAttribute(b))),Object.entries(s).forEach(Zfe,m);const v=this.isConnected;(v||this.G)&&(m.connectedCallback?.(),v||m.disconnectedCallback())},Q8.lumina=!0;let uq=Q8;function Zfe([t,e]){this[t]=e}const Jfe=t=>{const e=t.prototype,i=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(n,s){i.setAttribute.call(this.el,n,s)},e.removeAttribute=function(n){i.removeAttribute.call(this.el,n)},WE(e,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))};const _z={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},$I=t=>(...e)=>({_$litDirective$:t,values:e});let TI=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,i,r){this._$Ct=e,this._$AM=i,this._$Ci=r}_$AS(e,i){return this.update(e,i)}update(e,i){return this.render(...i)}};const Yfe=$I(class extends TI{constructor(t){if(super(t),t.type!==_z.ATTRIBUTE||t.name!=="class"||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(r=>r!=="")));for(const r in e)e[r]&&!this.nt?.has(r)&&this.st.add(r);return this.render(e)}const i=t.element.classList;for(const r of this.st)r in e||(i.remove(r),this.st.delete(r));for(const r in e){const n=!!e[r];n===this.st.has(r)||this.nt?.has(r)||(n?(i.add(r),this.st.add(r)):(i.remove(r),this.st.delete(r)))}return nf}});const eQ="important",Qfe=" !"+eQ,Xfe=$I(class extends TI{constructor(t){if(super(t),t.type!==_z.ATTRIBUTE||t.name!=="style"||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce((e,i)=>{const r=t[i];return r==null?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(t,[e]){const{style:i}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?i.removeProperty(r):i[r]=null);for(const r in e){const n=e[r];if(n!=null){this.ft.add(r);const s=typeof n=="string"&&n.endsWith(Qfe);r.includes("-")||s?i.setProperty(r,s?n.slice(0,-11):n,s?eQ:""):i[r]=n}}return nf}});const Kfe=t=>t.strings===void 0,eme={},tme=(t,e=eme)=>t._$AH=e;const R2=(t,e)=>{const i=t._$AN;if(i===void 0)return!1;for(const r of i)r._$AO?.(e,!1),R2(r,e);return!0},R3=t=>{let e,i;do{if((e=t._$AM)===void 0)break;i=e._$AN,i.delete(t),t=e}while(i?.size===0)},tQ=t=>{for(let e;e=t._$AM;t=e){let i=e._$AN;if(i===void 0)e._$AN=i=new Set;else if(i.has(t))break;i.add(t),nme(e)}};function ime(t){this._$AN!==void 0?(R3(this),this._$AM=t,tQ(this)):this._$AM=t}function rme(t,e=!1,i=0){const r=this._$AH,n=this._$AN;if(n!==void 0&&n.size!==0)if(e)if(Array.isArray(r))for(let s=i;s<r.length;s++)R2(r[s],!1),R3(r[s]);else r!=null&&(R2(r,!1),R3(r));else R2(this,t)}const nme=t=>{t.type==_z.CHILD&&(t._$AP??=rme,t._$AQ??=ime)};let sme=class extends TI{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,i,r){super._$AT(e,i,r),tQ(this),this.isConnected=e._$AU}_$AO(e,i=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),i&&(R2(this,e),R3(this))}setValue(e){if(Kfe(this._$Ct))this._$Ct._$AI(e,this);else{const i=[...this._$Ct._$AH];i[this._$Ci]=e,this._$Ct._$AI(i,this,0)}}disconnected(){}reconnected(){}};const _S=()=>new ome;let ome=class{};const kR=new WeakMap,Nb=$I(class extends sme{render(t){return li}update(t,[e]){const i=e!==this.G;return i&&this.G!==void 0&&this.rt(void 0),(i||this.lt!==this.ct)&&(this.G=e,this.ht=t.options?.host,this.rt(this.ct=t.element)),li}rt(t){if(this.isConnected||(t=void 0),typeof this.G=="function"){const e=this.ht??globalThis;let i=kR.get(e);i===void 0&&(i=new WeakMap,kR.set(e,i)),i.get(this.G)!==void 0&&this.G.call(this.ht,void 0),i.set(this.G,t),t!==void 0&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){return typeof this.G=="function"?kR.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});class ame extends xI{constructor(e){super(e),this.destroyed=!1,this.R=!1,this.V=li,this.T=[],this.#i=new WeakMap,this.#t=e,this.exports=void 0,this.hasDestroy=BP in e&&typeof e.destroy=="function",j0.prototype.addController.call(e,{hostConnected:()=>{if(this.destroyed){const i=e.el.localName;throw e.el.remove(),new Error(`The ${i} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${BP} prop.`)}this.#e!==void 0&&clearTimeout(this.#e),SI();for(const i of e.M)"triggerConnected"in i?i.triggerConnected():Gi(i.hostConnected,i)},hostDisconnected:()=>{for(const i of e.M)"triggerDisconnected"in i?i.triggerDisconnected():Gi(i.hostDisconnected,i);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const i of e.M)"triggerUpdate"in i?i.triggerUpdate(this.Q):Gi(i.hostUpdate,i,this.Q)},hostUpdated:()=>{for(const i of e.M)"triggerUpdated"in i?i.triggerUpdated(this.Q):Gi(i.hostUpdated,i,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),x0(e)}#e;#t;async destroy(){if(!this.destroyed){this.#t.el.isConnected&&(this.hasDestroy=!1,this.#t.el.remove()),this.#e=void 0,this.destroyed=!0;for(const e of this.#t.M)"triggerDestroy"in e?e.triggerDestroy():Gi(e.hostDestroy,e);this.#t.M.splice(0)}}U(){if(this.#e!==void 0&&clearTimeout(this.#e),!this.#t.el.isConnected&&!this.#t.autoDestroyDisabled){const e=()=>{this.#t.destroy()};this.#e=Dfe(e,lme)}}S(e,i){const r=this.T;this.V=li,this.T=[],r.forEach(n=>n(e,i))}#i;W(e,i){(typeof i=="object"&&i!==null||typeof i=="function")&&this.#i.set(i,e)}X(e){if(typeof e=="object"&&e!==null||typeof e=="function")return this.#i.get(e)}}let lme=1e3;const BP="autoDestroyDisabled";var ny,ix,rx,sy,Vu,pw,iQ,rQ;const gS=class gS extends j0{constructor(){super();rl(this,pw);rl(this,ny);rl(this,ix);rl(this,rx);rl(this,sy);rl(this,Vu);this.M=[],this.manager=new ame(this);const i=this,r=i.constructor,n=r.N,s=r.K.o,o=gS.prototype.shouldUpdate;nl(i,sy,n?.H??new wS),i.I=n?.I??new wS,i.J=n?.J??[],i._offspring=i.J,i._postLoad=i.I,i.el=n??i,nl(i,rx,i.enableUpdating),i.enableUpdating=KY,i.shouldUpdate!==o&&(nl(i,ix,i.shouldUpdate),i.shouldUpdate=o),s&&(nl(i,ny,new Map),r.elementProperties.forEach((u,d)=>Bt(i,ny).set(d,s())))}static finalizeStyles(i){const r=super.finalizeStyles(i),n=this.shadowRootOptions===lq;return this.K?.commonStyles===void 0||n?r:[this.K.commonStyles,...r]}static createProperty(i,r){const n=typeof r=="number"?r:Array.isArray(r)?r[0]:0,s=Array.isArray(r)?r[1]:void 0,o=s?.hasChanged??pz,u={attribute:n&Ffe&&typeof i=="string"?jfe(i):!1,reflect:!!(n&Vfe),type:n&Ufe?Boolean:n&qfe?Number:void 0,state:!!(n&Gfe),readOnly:!!(n&Bfe),noAccessor:!!(n&Hfe),c:!1,...s,hasChanged(d,h){const m=o(d,h);return u.c=m,m}};super.createProperty(i,u)}static getPropertyDescriptor(i,r,n){const s=this.K,o=super.getPropertyDescriptor(i,r,n);return n.d=o,{...o,get(){return s.t?.(Bt(this,ny).get(i)),o.get?.call(this)},set(u){const d=this.manager;if(n.readOnly&&!VP&&(d.R||d.connectedCalled))throw Error(`Cannot assign to read-only property "${i}" of ${this.el.localName}. Trying to assign "${u}"`);o.set.call(this,u??void 0),n.c&&Bt(this,ny)?.get(i)?.notify(),d.T.length>0&&(SI(),d?.S(i,u))}}}connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const i=this.constructor.K.c?.(()=>this.requestUpdate());nl(this,Vu,i);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>F_(this,pw,rQ).call(this).catch(n=>{Bt(this,sy).reject(n),setTimeout(()=>{throw n})})):i&&this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),Bt(this,Vu)?.destroy(),nl(this,Vu,void 0)}createRenderRoot(){const i=this.el.shadowRoot,r=this.constructor,n=r.shadowRootOptions,o=i??(n===lq?this.el:this.el.attachShadow(n));if(this.isConnected){const u=o.getRootNode();u.adoptedStyleSheets=[...u.adoptedStyleSheets,...r.elementStyles.map(d=>"styleSheet"in d?d.styleSheet:d)]}return o}shouldUpdate(i){var r;return this.manager.Q=i,((r=Bt(this,ix))==null?void 0:r.call(this,i))??!0}update(i){Bt(this,Vu)?F_(this,pw,iQ).call(this,i):super.update(i)}listen(i,r,n){const s=r?.bind(this)??r;this.manager.onLifecycle(()=>(this.el.addEventListener(i,s,n),()=>this.el.removeEventListener(i,s,n)))}listenOn(i,r,n,s){const o=n?.bind(this)??n;this.manager.onLifecycle(()=>(i.addEventListener(r,o,s),()=>i.removeEventListener(r,o,s)))}async componentOnReady(){return await Bt(this,sy).promise,this}addController(i){this.M.push(i),!(lz in i)&&this.renderRoot&&this.el.isConnected&&i.hostConnected?.()}removeController(i){this.M.splice(this.M.indexOf(i),1),i.controllerRemoved?.()}};ny=new WeakMap,ix=new WeakMap,rx=new WeakMap,sy=new WeakMap,Vu=new WeakMap,pw=new WeakSet,iQ=function(i){try{Bt(this,Vu).clear(),this.constructor.K.r(Bt(this,Vu),()=>L7(gS.prototype,this,"update").call(this,i))}catch(r){throw Bt(this,Vu).clear(),r}},rQ=async function(){const i=this.el.G??XY(this.el);i&&await i;const r=[];for(const s of this.M)"triggerLoad"in s?r.push(s.triggerLoad()):r.push(FP(s.hostLoad,s));await Promise.all(r),await this.load?.(),this.manager.hasDestroy&&this.manager.onUpdate(s=>s.has(BP)&&this.manager.U()),Bt(this,rx).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const n=this.J.filter(s=>!s.manager?.loadedCalled);n.length&&await Promise.allSettled(n.map(async s=>await s.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const s of this.M)"triggerLoaded"in s?s.triggerLoaded():Gi(s.hostLoaded,s);this.loaded?.(),Bt(this,sy).resolve()},gS.lumina=!0;let sf=gS;const nQ=t=>{let e;const i=n=>{e=new URL(n,globalThis.location?.href||void 0).href},r={...t,getAssetPath(n){const s=new URL(n,e);return s.origin!==globalThis.location?.origin?s.href:s.pathname},setAssetPath:i,customElement(n,s){s.K=r,s.L=n,customElements.get(n)||customElements.define(n,s)}};return i(t.defaultAssetPath),r},kt=t=>typeof t=="object"&&t!=null?Yfe(t):t,SBe=t=>typeof t=="object"&&t!=null?Xfe(t):t,sT=li;function xBe(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i)}const sQ={toAttribute:t=>t===!0?"":t===!1?null:t},ume="calcite-mode-auto",cme="calcite-mode-dark",dme={rtl:"calcite--rtl"},$Be={filter:250,nextTick:0,resize:150,reposition:100},TBe=25;function cq(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(cme)||t.contains(ume)&&e?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),n=o=>{s!==o&&r(o),s=o};let s=i();r(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>n(o.matches?"dark":"light")),new MutationObserver(()=>n(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const P2=globalThis.calciteConfig,EBe=P2?.focusTrapStack||[],pme=P2?.logLevel||"info",dq="3.3.3",hme="2025-10-08",fme="7391af08e";function mme(){if(P2&&P2.version)return;console.info(`Using Calcite Components ${dq} [Date: ${hme}, Revision: ${fme}]`);const t=P2||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:dq,writable:!1}),globalThis.calciteConfig=t}document.readyState==="interactive"?cq():document.addEventListener("DOMContentLoaded",cq,{once:!0});queueMicrotask(mme);const yme=nQ({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.3.3/",hydratedAttribute:"calcite-hydrated"}),{customElement:EI,getAssetPath:oQ,setAssetPath:gme}=yme;var vme=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],HP=vme.join(","),aQ=typeof Element>"u",SS=aQ?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,P3=!aQ&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},D3=function t(e,i){var r;i===void 0&&(i=!0);var n=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=n===""||n==="true",o=s||i&&e&&t(e.parentNode);return o},bme=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},lQ=function(e,i,r){if(D3(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(HP));return i&&SS.call(e,HP)&&n.unshift(e),n=n.filter(r),n},uQ=function t(e,i,r){for(var n=[],s=Array.from(e);s.length;){var o=s.shift();if(!D3(o,!1))if(o.tagName==="SLOT"){var u=o.assignedElements(),d=u.length?u:o.children,h=t(d,!0,r);r.flatten?n.push.apply(n,h):n.push({scopeParent:o,candidates:h})}else{var m=SS.call(o,HP);m&&r.filter(o)&&(i||!e.includes(o))&&n.push(o);var v=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),b=!D3(v,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(v&&b){var _=t(v===!0?o.children:v.children,!0,r);r.flatten?n.push.apply(n,_):n.push({scopeParent:o,candidates:_})}else s.unshift.apply(s,o.children)}}return n},cQ=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},dQ=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||bme(e))&&!cQ(e)?0:e.tabIndex},wme=function(e,i){var r=dQ(e);return r<0&&i&&!cQ(e)?0:r},_me=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},pQ=function(e){return e.tagName==="INPUT"},Sme=function(e){return pQ(e)&&e.type==="hidden"},xme=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},$me=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},Tme=function(e){if(!e.name)return!0;var i=e.form||P3(e),r=function(u){return i.querySelectorAll('input[type="radio"][name="'+u+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(e.name));else try{n=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=$me(n,e.form);return!s||s===e},Eme=function(e){return pQ(e)&&e.type==="radio"},Mme=function(e){return Eme(e)&&!Tme(e)},Ame=function(e){var i,r=e&&P3(e),n=(i=r)===null||i===void 0?void 0:i.host,s=!1;if(r&&r!==e){var o,u,d;for(s=!!((o=n)!==null&&o!==void 0&&(u=o.ownerDocument)!==null&&u!==void 0&&u.contains(n)||e!=null&&(d=e.ownerDocument)!==null&&d!==void 0&&d.contains(e));!s&&n;){var h,m,v;r=P3(n),n=(h=r)===null||h===void 0?void 0:h.host,s=!!((m=n)!==null&&m!==void 0&&(v=m.ownerDocument)!==null&&v!==void 0&&v.contains(n))}}return s},pq=function(e){var i=e.getBoundingClientRect(),r=i.width,n=i.height;return r===0&&n===0},Ime=function(e,i){var r=i.displayCheck,n=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=SS.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(SS.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof n=="function"){for(var u=e;e;){var d=e.parentElement,h=P3(e);if(d&&!d.shadowRoot&&n(d)===!0)return pq(e);e.assignedSlot?e=e.assignedSlot:!d&&h!==e.ownerDocument?e=h.host:e=d}e=u}if(Ame(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return pq(e);return!1},kme=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var n=i.children.item(r);if(n.tagName==="LEGEND")return SS.call(i,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}i=i.parentElement}return!1},WP=function(e,i){return!(i.disabled||D3(i)||Sme(i)||Ime(i,e)||xme(i)||kme(i))},hq=function(e,i){return!(Mme(i)||dQ(i)<0||!WP(e,i))},Ome=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},Cme=function t(e){var i=[],r=[];return e.forEach(function(n,s){var o=!!n.scopeParent,u=o?n.scopeParent:n,d=wme(u,o),h=o?t(n.candidates):u;d===0?o?i.push.apply(i,h):i.push(u):r.push({documentOrder:s,tabIndex:d,item:n,isScope:o,content:h})}),r.sort(_me).reduce(function(n,s){return s.isScope?n.push.apply(n,s.content):n.push(s.content),n},[]).concat(i)},Rme=function(e,i){i=i||{};var r;return i.getShadowRoot?r=uQ([e],i.includeContainer,{filter:hq.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:Ome}):r=lQ(e,i.includeContainer,hq.bind(null,i)),Cme(r)},Pme=function(e,i){i=i||{};var r;return i.getShadowRoot?r=uQ([e],i.includeContainer,{filter:WP.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=lQ(e,i.includeContainer,WP.bind(null,i)),r};const hQ={getShadowRoot:!0};function fQ(t){const r=yQ(t,"[dir]");return r?r.getAttribute("dir"):"ltr"}function MI(t){return t.getRootNode()}function MBe(t){const e=MI(t);return"host"in e?e:null}function mQ(t){return t.host||null}function Dme(t,{selector:e,id:i}){if(!t)return null;t.assignedSlot&&(t=t.assignedSlot);const r=MI(t);return(i?"getElementById"in r?r.getElementById(i):null:e?r.querySelector(e):null)||Dme(mQ(r),{selector:e,id:i})}function yQ(t,e){return t?t.closest(e)||yQ(mQ(MI(t)),e):null}function Nme(t){return typeof t?.setFocus=="function"}async function Sz(t,e=!1,i="tabbable",r,n){return t?Nme(t)&&r!==t?t.setFocus(n):(i==="tabbable"?jme:Fme)(t,e,n):void 0}function Lme(t,e){if(t)return Rme(t,{...hQ,includeContainer:e})[0]??t}function jme(t,e,i){Lme(t,e)?.focus(i)}function zme(t,e){if(t)return Pme(t,{...hQ,includeContainer:e})[0]??t}function Fme(t,e,i){zme(t,e)?.focus(i)}function Vme(t,e){return t.filter(i=>i.matches(e))}function Ume(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e===""||e===!0)return t[i]}function qme(t){return(!!t).toString()}function ABe(t){return xz(t)||Bme(t)}function Gme(t){return Hme(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function IBe(t){for(const e of t.childNodes)if(e.nodeType===Node.TEXT_NODE&&e.textContent?.trim()!==""||e.nodeType===Node.ELEMENT_NODE)return!0;return!1}function Bme(t){return!!Gme(t)}function Hme(t){return t.currentTarget.assignedNodes({flatten:!0})}function xz(t){return!!Wme(t).length}function Wme(t,e){return Zme(t.currentTarget,e)}function Zme(t,e){const i=t.assignedElements({flatten:!0});return e?Vme(i,e):i}function kBe(t){return!!(t.isPrimary&&t.button===0)}function OBe(t){return t.detail===0}const CBe=(t,e,i,r=!0,n=!0,s=!1)=>{const o=t.indexOf(e),u=o===0,d=o===t.length-1;r&&(i=i==="previous"&&u?"last":i==="next"&&d?"first":i);let h;return i==="previous"?h=t[o-1]||t[r?t.length-1:o]:i==="next"?h=t[o+1]||t[r?0:o]:i==="last"?h=t[t.length-1]:h=t[0],Sz(h,n,"tabbable",s?h:void 0),h};function RBe(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}async function PBe(t,e){return gQ(t,e,"animation")}async function Jme(t,e){return gQ(t,e,"transition")}function fq(t,e,i){const r=e==="transition"?"transitionProperty":"animationName";return t.getAnimations().find(n=>n[r]===i)}async function gQ(t,e,i){let r=fq(t,i,e);if(r||(await Yme(),r=fq(t,i,e)),!!r)try{await r.finished}catch{}}async function Yme(){await new Promise(t=>requestAnimationFrame(()=>t()))}function DBe(t){return t.endsWith("px")?parseFloat(t):t.endsWith("vw")?mq(parseFloat(t),window.innerWidth):t.endsWith("vh")?mq(parseFloat(t),window.innerHeight):0}function mq(t,e){return t*e/100}function Qme(t,e,i){const r=Xme(t);return new r(e,i)}function Xme(t){class e extends window.MutationObserver{constructor(r){super(r),this.observedEntry=[],this.callback=r}observe(r,n){return this.observedEntry.push({target:r,options:n}),super.observe(r,n)}unobserve(r){const n=this.observedEntry.filter(s=>s.target!==r);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),n.forEach(s=>this.observe(s.target,s.options))}}return(function(){return t==="intersection"?window.IntersectionObserver:t==="mutation"?e:window.ResizeObserver})()}function NBe(t,e,i,r){if(t&&(e&&t.unobserve(e),!!i)){if(t instanceof MutationObserver){t.observe(i,r);return}t.observe(i)}}const yq=new Set,gq={trace:0,debug:1,info:2,warn:4,error:8,off:10};function Kme(t){return gq[t]>=gq[pme]}function vv(t,...e){if(!Kme(t))return;console[t].call(this,"%ccalcite","background: #007AC2; color: #fff; border-radius: 4px; padding: 2px 4px;",...e)}let OR;const eye={debug:t=>vv("debug",t),info:t=>vv("info",t),warn:t=>vv("warn",t),error:t=>vv("error",t),trace:t=>vv("trace",t),deprecated:tye};function tye(t,{component:e,name:i,suggested:r,removalVersion:n}){const s=`${t}:${t==="component"?"":e}${i}`;if(yq.has(s))return;yq.add(s);const o=Array.isArray(r);o&&!OR&&(OR=new Intl.ListFormat("en",{style:"long",type:"disjunction"}));const u=`[${i}] ${t} is deprecated and will be removed in ${n==="future"?"a future version":`v${n}`}.${r?` Use ${o?OR.format(r.map(d=>`"${d}"`)):`"${r}"`} instead.`:""}`;vv("warn",u)}const vq={flipRtl:"flip-rtl",svg:"svg"},vQ={},CR={},bQ={s:16,m:24,l:32};function wQ({icon:t,scale:e}){const i=bQ[e],r=nye(t),n=r.charAt(r.length-1)==="F";return`${n?r.substring(0,r.length-1):r}${i}${n?"F":""}`}async function iye(t){const e=wQ(t),i=_Q(e);if(i)return i;CR[e]||(CR[e]=fetch(oQ(`./assets/icon/${e}.json`)).then(n=>n.json()).catch(()=>(eye.error(`${t.icon} (${t.scale}) icon failed to load`),"")));const r=await CR[e];return vQ[e]=r,r}function rye(t){return _Q(wQ(t))}function _Q(t){return vQ[t]}function nye(t){const e=!isNaN(Number(t.charAt(0))),i=t.split("-");if(i.length>0){const n=/[a-z]/i;t=i.map((s,o)=>s.replace(n,function(d,h){return o===0&&h===0?d:d.toUpperCase()})).join("")}return e?`i${t}`:t}const sye=bf`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}`,mI=class mI extends sf{constructor(){super(...arguments),this.visible=!1,this.flipRtl=!1,this.icon=null,this.preload=!1,this.scale="m"}connectedCallback(){if(super.connectedCallback(),this.preload){this.visible=!0,this.loadIconPathData();return}this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}willUpdate(e){(e.has("icon")&&(this.hasUpdated||this.icon!==null)||e.has("scale")&&(this.hasUpdated||this.scale!=="m"))&&this.loadIconPathData()}disconnectedCallback(){super.disconnectedCallback(),this.intersectionObserver?.disconnect(),this.intersectionObserver=null}async loadIconPathData(){const{icon:e,scale:i,visible:r}=this;if(!e||!r)return;const n={icon:e,scale:i},s=rye(n)||await iye(n);e===this.icon&&(this.pathData=s)}waitUntilVisible(e){if(this.intersectionObserver=Qme("intersection",i=>{i.forEach(r=>{r.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,e())})},{rootMargin:"50px"}),!this.intersectionObserver){e();return}this.intersectionObserver.observe(this.el)}render(){const{el:e,flipRtl:i,pathData:r,scale:n,textLabel:s}=this,o=fQ(e),u=bQ[n],d=!!s,h=[].concat(r||"");return this.el.ariaHidden=qme(!d),this.el.ariaLabel=d?s:null,this.el.role=d?"img":null,ar`<svg aria-hidden=true class=${kt({[vq.flipRtl]:o==="rtl"&&i,[vq.svg]:!0})} fill=currentColor height=100% viewBox=${`0 0 ${u} ${u}`} width=100% xmlns=http://www.w3.org/2000/svg>${h.map(m=>typeof m=="string"?nq`<path d=${m??li} />`:nq`<path d=${m.d??li} opacity=${("opacity"in m?m.opacity:1)??li} />`)}</svg>`}};mI.properties={pathData:[16,{},{state:!0}],visible:[16,{},{state:!0}],flipRtl:[7,{},{reflect:!0,type:Boolean}],icon:[3,{},{reflect:!0}],preload:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],textLabel:1},mI.styles=sye;let N3=mI;EI("calcite-icon",N3);const SQ=Object.freeze(Object.defineProperty({__proto__:null,Icon:N3},Symbol.toStringTag,{value:"Module"}));function oye(){const{disabled:t}=this;t||HTMLElement.prototype.click.call(this)}function xQ(t){t.target.disabled&&t.preventDefault()}const $Q=["mousedown","mouseup","click"];function TQ(t){t.target.disabled&&(t.stopImmediatePropagation(),t.preventDefault())}const L3={capture:!0};function EQ(t){if(t.disabled){t.el.setAttribute("aria-disabled","true"),t.el.contains(document.activeElement)&&document.activeElement.blur(),aye(t);return}uye(t),t.el.removeAttribute("aria-disabled")}function aye(t){t.el.click=oye,lye(t.el)}function lye(t){t.addEventListener("pointerdown",xQ,L3),$Q.forEach(e=>t.addEventListener(e,TQ,L3))}function uye(t){delete t.el.click,cye(t.el)}function cye(t){t.removeEventListener("pointerdown",xQ,L3),$Q.forEach(e=>t.removeEventListener(e,TQ,L3))}const dye={container:"interaction-container"},MQ=({children:t,disabled:e})=>ar`<div class=${kt(dye.container)} .inert=${e}>${t}</div>`;function pye(t){return t==="Enter"||t===" "}const $z=["0","1","2","3","4","5","6","7","8","9"];function D2(t){return t==="l"?"m":"s"}async function hye(t){await t.componentOnReady(),await t.updateComplete}const Tz=t=>(...e)=>{const i=UY(),r=new t(...e),n=r.exports;VY(i.at(-1));const s=r.component.manager;s.W(r,n),r.watchExports(s.W.bind(s,r)),ufe(r);const o=[r.component,...i].reverse();return vz(o,u=>u===void 0?void 0:fye(r,u,n),n)},fye=(t,{host:e,key:i,isReactive:r},n)=>{const s=e,o=s[i]!==t.exports,u=s[i]!==n,d=n!==t.exports;if(o&&!u&&d&&(s[i]=t.exports),e===t.component){if(r){const v=t.component.manager;u&&v.W(t,s[i]),t.onUpdate(b=>{if(b.has(i)){const _=s[i];_!==t.exports&&v.W(t,_)}})}t.O=r?void 0:i}const m=t.component.constructor.elementProperties.get(i)?.readOnly;t.watchExports(()=>{s[i]!==t.exports&&(m?hfe(()=>{s[i]=t.exports}):s[i]=t.exports)})};function mye(t,e){return t.assignedElements({flatten:!0}).filter(r=>r.matches(e))}const yye=(t,e)=>{let i=t;for(;i;){if(i===e)return!0;if(!i.parentNode)return!1;i.parentNode instanceof ShadowRoot?i=i.parentNode.host:i=i.parentNode}return!1},AQ=(t,e,i)=>{const r=gye(e).subscribe;return r(n=>{n.some(o=>yye(t,o.target))&&i()})},RR={},gye=t=>{const e=t.join(","),i=RR[e];if(i!==void 0)return i;const r=new Set,n=new MutationObserver(o=>r.forEach(u=>u(o)));globalThis.document&&n.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const s={subscribe:o=>(r.add(o),()=>{r.delete(o),r.size===0&&(n.disconnect(),RR[e]=void 0)})};return RR[e]=s,s},IQ=(t,e)=>{let i=t;for(;i;){const r=i.closest?.(e);if(r)return r;const n=i.getRootNode?.();if(n===globalThis.document)return;i=n.host}};function vye(t){const e=IQ(t,".calcite-mode-dark, .calcite-mode-light, .calcite-mode-auto");return e?.classList.contains("calcite-mode-dark")||e?.classList.contains("calcite-mode-auto")&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}const kQ=(t,e,i)=>IQ(t,`[${e}]`)?.getAttribute(e)??i,bye="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),wye=new Set(bye),j3="en",_ye={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},Sye=async(t,e,i="")=>{const r=`${e}/${i}`,n=`${r}${t}.json`;return PR[n]??(PR[n]=OQ(t,r)),await PR[n]},PR={},OQ=async(t,e)=>{const i=`${e}${t}.json`;try{const r=await fetch(i);if(r.ok)return await r.json()}catch(r){return console.error(r),{}}return t===j3?{}:await OQ(j3,e)},CQ=t=>{const e=kQ(t,"lang",globalThis.navigator?.language||j3);return{lang:e,t9nLocale:RQ(e)}},RQ=t=>{const[e,i]=t.split("-"),r=e.toLowerCase();let n=r;return i&&(n=`${r}-${i.toUpperCase()}`),n=_ye[n]??n,wye.has(n)?n:i?RQ(r):j3},xye=(t,e,i,r)=>{let n;const s=()=>$ye(t,e(),r).then(o=>{(n?.lang!==o.lang||n.t9nLocale!==o.t9nLocale||n.t9nStrings!==o.t9nStrings)&&i(o),n=o}).catch(console.error);return queueMicrotask(s),AQ(t,["lang"],s)},$ye=async(t,e,i=t.localName.split("-").slice(1).join("-"))=>{const{lang:r,t9nLocale:n}=CQ(t),s=`${e}/${i}/t9n`,u=i===null?{}:await Sye(n,s,"messages.");return{lang:r,t9nLocale:n,t9nStrings:u}},PQ=t=>DQ(void 0,t),Ez=t=>e=>DQ(e,t);class Tye extends wz{constructor(e,i){super(e);const r=this.exports;try{x0(this.component);const n=i(this.component,this),s=this.exports!==r;if(afe(n)){s||this.setProvisionalExports(n);const o=n.then(u=>{this.exports=u,super.catchUpLifecycle()}).catch(u=>{this.P.reject(u),console.error(u)});this.onLoad(async()=>await o)}else(!s||n!==void 0)&&(this.exports=n),queueMicrotask(()=>super.catchUpLifecycle())}catch(n){this.P.reject(n),console.error(n)}}catchUpLifecycle(){}}const DQ=Tz(Tye),LBe=(t,e)=>new Eye(t,e);class Eye extends wz{#e;#t;#i;constructor(e,i){super(),this.#t=e,this.#i=i,this.#e=new MutationObserver(r=>{r.forEach(n=>{e.includes(n.attributeName)&&i.call(this.component,this.component.el.getAttribute(n.attributeName),n.oldValue,n.attributeName)})})}hostConnected(){this.#t.forEach(e=>{this.component.el.hasAttribute(e)&&this.#i.call(this.component,null,this.component.el.getAttribute(e),e)}),this.#e.observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:this.#t})}hostDisconnected(){this.#e.disconnect()}}const bq="ltr",Mye=()=>PQ((t,e)=>{e.exports=bq,e.onLifecycle(()=>{const i=()=>{const r=kQ(t.el,"dir",bq);e.exports=r==="rtl"?"rtl":"ltr"};return i(),AQ(t.el,["dir"],i)})}),Aye=t=>(e={})=>PQ((i,r)=>{const n=CQ(i.el),s={_lang:n.lang,_t9nLocale:n.t9nLocale,_loading:!0},o=i;r.onLifecycle(()=>xye(i.el,()=>t("./assets"),({t9nLocale:d,t9nStrings:h,lang:m})=>{const v={...h,_lang:m,_t9nLocale:d,_loading:!1};r.exports=v;const b=h.componentLabel;typeof b=="string"&&"label"in i&&i.label==null&&(i.label??=b),u(o.messageOverrides)},e.name));const u=d=>{const h=r.exports,m=h._original??h,v=NQ(m,d);d&&(v._original=m),r.exports=v};return"messageOverrides"in o&&r.onUpdate(d=>{d.has("messageOverrides")&&u(o.messageOverrides)}),e.blocking?(r.setProvisionalExports(s,!1),r.ready):s}),NQ=(t,e)=>{if(!e)return t;const i={...t};return Object.entries(e).forEach(([r,n])=>{typeof n=="object"?i[r]=NQ(t[r],n):i[r]=n??t[r]}),i},Iye=t=>Oye,kye="arcgisPropertyChange",Oye=(...t)=>{const e=hw(),i=bz(kye,void 0,e);let r=!0;return e.manager.onUpdated(n=>{if(r||!e.el.isConnected){r=!1;return}for(const s of t)n.has(s)&&i.emit({name:s})}),i};const LQ=Aye(oQ);const Mz=()=>Ez((t,e)=>{let i;function r(){i?.abort()}return e.onLoad(()=>{t.listen("focus",()=>{i=new AbortController,t.el.addEventListener("focusout",r,{signal:i.signal})})}),e.onDisconnected(()=>{t.el.removeEventListener("focusout",r)}),async(n,s)=>{if(t.disabled)return;const o=Rye(n());if(!o)return;const{target:u,includeContainer:d,strategy:h}=o,m=MI(t.el),v=m.activeElement;if(await hye(t),!(v!==m.activeElement||i&&!i?.signal.aborted))return t.el.removeEventListener("focus",r),Sz(u,d,h,t.el,s)}});function Cye(t){return"target"in t&&("includeContainer"in t||"strategy"in t)}function Rye(t){if(t)return Cye(t)?t:{target:t}}const Nn={title:"title",close:"close",imageContainer:"image-container",chipIcon:"chip-icon",textSlotted:"text--slotted",container:"container",imageSlotted:"image--slotted",closable:"closable",multiple:"multiple",single:"single",selectable:"selectable",selectIcon:"select-icon",selectIconActive:"select-icon--active",nonInteractive:"non-interactive",isCircle:"is-circle",selected:"selected"},Pye={image:"image"},oT={close:"x",checkedSingle:"circle-f",uncheckedMultiple:"square",checkedMultiple:"check-square-f"},Dye=bf`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-flex;cursor:default;border-radius:var(--calcite-chip-corner-radius, 9999px)}:host([closed]){display:none}:host([appearance=outline]) .container,:host([appearance=outline-fill]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-1))}:host([appearance=outline]) .close,:host([appearance=outline-fill]) .close{color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, var(--calcite-color-text-3)))}:host([appearance=outline]):host([kind=brand]),:host([appearance=outline-fill]):host([kind=brand]){--calcite-internal-chip-border-color: var(--calcite-chip-border-color, var(--calcite-color-brand));--calcite-internal-chip-selectable-hover-border-color: var(--calcite-chip-border-color, var(--calcite-color-brand));--calcite-internal-chip-selectable-active-border-color: var( --calcite-chip-border-color, var(--calcite-color-brand) )}:host([appearance=outline]):host([kind=inverse]),:host([appearance=outline-fill]):host([kind=inverse]){--calcite-internal-chip-border-color: var(--calcite-chip-border-color, var(--calcite-color-border-inverse))}:host([appearance=outline]):host([kind=neutral]),:host([appearance=outline-fill]):host([kind=neutral]){--calcite-internal-chip-border-color: var(--calcite-chip-border-color, var(--calcite-color-border-1))}:host([appearance=outline]){--calcite-internal-chip-background-color: transparent}:host([appearance=outline-fill]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-foreground-1))}:host([appearance=solid]){--calcite-internal-chip-border-color: transparent;--calcite-internal-chip-selectable-hover-border-color: transparent;--calcite-internal-chip-selectable-active-border-color: transparent}:host([appearance=solid]):host([kind=brand]) .container,:host([appearance=solid]):host([kind=inverse]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-inverse))}:host([appearance=solid]):host([kind=brand]) .close,:host([appearance=solid]):host([kind=inverse]) .close{outline-color:var(--calcite-color-text-inverse)}:host([appearance=solid]):host([kind=brand]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-brand))}:host([appearance=solid]):host([kind=inverse]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-inverse))}:host([appearance=solid]):host([kind=inverse]) .close:hover{background-color:var(--calcite-color-inverse-hover)}:host([appearance=solid]):host([kind=inverse]) .close:active{background-color:var(--calcite-color-inverse-press)}:host([appearance=solid]):host([kind=neutral]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-foreground-2))}:host([kind=neutral]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-1))}:host([kind=neutral]) .close{color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, var(--calcite-color-text-3)))}:host([selected]) .select-icon{opacity:1}:host([appearance=solid]):host([kind=neutral]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-foreground-3);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-border-3)}:host([appearance=solid]):host([kind=inverse]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-inverse-hover);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-inverse-press)}:host([appearance=solid]):host([kind=brand]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-brand-hover);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-brand-press)}:host([appearance=outline-fill]):host([kind=neutral]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-foreground-2);--calcite-internal-chip-selectable-hover-border-color: var(--calcite-color-border-input);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-foreground-3);--calcite-internal-chip-selectable-active-border-color: var(--calcite-color-text-3)}:host([appearance=outline-fill]):host([kind=inverse]),:host([appearance=outline-fill]):host([kind=brand]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-foreground-2);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-foreground-3)}:host([appearance=outline]):host([kind=neutral]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-transparent-hover);--calcite-internal-chip-selectable-hover-border-color: var(--calcite-color-border-input);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-transparent-press);--calcite-internal-chip-selectable-active-border-color: var(--calcite-color-text-3)}:host([appearance=outline]):host([kind=inverse]),:host([appearance=outline]):host([kind=brand]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-transparent-hover);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-transparent-press)}:host([scale=s]) .container{--calcite-internal-chip-block-size: var(--calcite-size-sm, 1.5rem) ;--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-font-size: var(--calcite-font-size--2);--calcite-internal-chip-icon-size: var(--calcite-size-xs, 1rem) ;--calcite-internal-chip-icon-space: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-image-size: var(--calcite-spacing-xl, 1.25rem) ;--calcite-internal-chip-title-space: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-close-size: var(--calcite-size-xs, 1rem) }:host([scale=s]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px);--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-px)}:host([scale=s]) .container.image--slotted:has(.chip-icon),:host([scale=s]) .container.image--slotted.text--slotted,:host([scale=s]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end: var(--calcite-spacing-xxs, .25rem) }:host([scale=s]) .container.image--slotted:not(.text--slotted,:has(.chip-icon)),:host([scale=s]) .container.image--slotted:not(.selectable){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=s]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=s]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-none, 0)}:host([scale=s]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end: .5rem ;--calcite-internal-chip-select-space-x-start: .125rem }:host([scale=s]) .container.multiple:not(.is-circle){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=s]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end: .5rem ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=s]) .container.multiple:not(.is-circle).image--slotted:not(.text--slotted){--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=m]) .container{--calcite-internal-chip-block-size: var(--calcite-size-md, 2rem) ;--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-font-size: var(--calcite-font-size--1);--calcite-internal-chip-icon-size: var(--calcite-size-sm, 1.5rem) ;--calcite-internal-chip-icon-space: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-image-size: var(--calcite-size-sm, 1.5rem) ;--calcite-internal-chip-title-space: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-close-size: var(--calcite-size-sm, 1.5rem) }:host([scale=m]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-px);--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=m]) .container.image--slotted:not(.is-circle){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=m]) .container.image--slotted:has(.chip-icon),:host([scale=m]) .container.image--slotted.text--slotted,:host([scale=m]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end: var(--calcite-spacing-xs, .375rem) }:host([scale=m]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=m]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-px);--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-none, 0)}:host([scale=m]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=m]) .container.multiple:not(.is-circle){--calcite-internal-chip-select-space-x-end: .125rem ;--calcite-internal-chip-select-space-x-start: .125rem }:host([scale=m]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end: .5rem ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=m]) .container.closable:not(.is-circle){--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xxs, .25rem) }:host([scale=l]) .container{--calcite-internal-chip-block-size: 2.75rem ;--calcite-internal-chip-container-space-x-end: .5rem ;--calcite-internal-chip-container-space-x-start: .5rem ;--calcite-internal-chip-font-size: var(--calcite-font-size-0);--calcite-internal-chip-icon-size: var(--calcite-size-md, 2rem) ;--calcite-internal-chip-icon-space: .5rem ;--calcite-internal-chip-image-size: var(--calcite-size-md, 2rem) ;--calcite-internal-chip-title-space: .5rem ;--calcite-internal-close-size: var(--calcite-size-md, 2rem) }:host([scale=l]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=l]) .container.image--slotted:not(.is-circle){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=l]) .container.image--slotted:has(.chip-icon),:host([scale=l]) .container.image--slotted.text--slotted,:host([scale=l]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end: .5rem }:host([scale=l]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=l]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-none, 0)}:host([scale=l]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-select-space-x-start: .5rem }:host([scale=l]) .container.multiple:not(.is-circle){--calcite-internal-chip-container-space-x-start: .5rem ;--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=l]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end: .75rem }:host([scale=l]) .container.closable:not(.is-circle){--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xs, .375rem) }.container{box-sizing:border-box;display:inline-flex;block-size:100%;max-inline-size:100%;align-items:center;justify-content:center;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;background-color:var(--calcite-internal-chip-background-color);border-color:var(--calcite-internal-chip-border-color);border-radius:var(--calcite-chip-corner-radius, 9999px);border-width:var(--calcite-border-width-sm);border-style:solid;font-size:var(--calcite-internal-chip-font-size, var(--calcite-font-size));padding-inline-start:var(--calcite-internal-chip-container-space-x-start);padding-inline-end:var(--calcite-internal-chip-container-space-x-end);block-size:var(--calcite-internal-chip-block-size, auto);inline-size:var(--calcite-internal-chip-inline-size, auto);min-inline-size:var(--calcite-internal-chip-block-size, auto)}.container:hover .select-icon--active{opacity:var(--calcite-opacity-full, 1)}.container.selectable{cursor:pointer}.container.selectable:hover{background-color:var(--calcite-internal-chip-selectable-hover-background-color);border-color:var(--calcite-internal-chip-selectable-hover-border-color)}.container.selectable:active{background-color:var(--calcite-internal-chip-selectable-active-background-color);border-color:var(--calcite-internal-chip-selectable-active-border-color)}.container:not(.non-interactive):focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.container.text--slotted .title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.container:not(.text--slotted) .title,.container:not(.image--slotted) .image-container{display:none}.container.is-circle .chip-icon,.container.is-circle .image-container{padding:var(--calcite-spacing-none, 0)}.title{padding-inline:var(--calcite-internal-chip-title-space)}.image-container{display:inline-flex;overflow:hidden;align-items:center;justify-content:center;pointer-events:none;block-size:var(--calcite-internal-chip-image-size, var(--calcite-spacing-xxl, 1.5rem));inline-size:var(--calcite-internal-chip-image-size, var(--calcite-spacing-xxl, 1.5rem));padding-inline-start:var(--calcite-spacing-none, 0);padding-inline-end:var(--calcite-internal-chip-image-space-x-end, 0)}.chip-icon{position:relative;margin-block:0px;display:inline-flex;transition-timing-function:cubic-bezier(.4,0,.2,1);color:var(--calcite-chip-icon-color, var(--calcite-chip-text-color, var(--calcite-icon-color, currentColor)));padding-inline:var(--calcite-internal-chip-icon-space, var(--calcite-spacing-xs, .375rem))}.select-icon{align-self:center;justify-content:center;align-items:center;display:flex;inset-block-start:-1px;position:absolute;visibility:hidden;inline-size:auto;opacity:0;transition:opacity .15s ease-in-out,inline-size .15s ease-in-out;color:var(--calcite-chip-select-icon-color, currentColor)}.select-icon.select-icon--active{position:relative;visibility:visible;opacity:var(--calcite-opacity-half, .5);color:var(--calcite-chip-select-icon-color-press, var(--calcite-chip-select-icon-color-pressed, var(--calcite-chip-select-icon-color, currentColor)))}.multiple .select-icon{display:flex;align-items:center;justify-content:center}.multiple .select-icon,.single .select-icon--active{padding-inline-start:var(--calcite-internal-chip-select-space-x-start);padding-inline-end:var(--calcite-internal-chip-select-space-x-end);block-size:var(--calcite-internal-chip-icon-size, var(--calcite-spacing-xxl, 1.5rem));inline-size:var(--calcite-internal-chip-icon-size, var(--calcite-spacing-xxl, 1.5rem))}slot[name=image]::slotted(*){display:flex;block-size:100%;inline-size:100%;overflow:hidden;border-radius:50%}.close{margin:0;cursor:pointer;align-items:center;border-radius:50%;border-style:none;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;background-color:var(--calcite-close-background-color, var(--calcite-color-transparent));-webkit-appearance:none;display:flex;align-content:center;justify-content:center;color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, currentColor));block-size:var(--calcite-internal-close-size, var(--calcite-spacing-xxl, 1.5rem));inline-size:var(--calcite-internal-close-size, var(--calcite-spacing-xxl, 1.5rem));padding:0}.close:hover,.close:focus{background-color:var(--calcite-close-background-color-hover, var(--calcite-color-transparent-hover))}.close:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.close:active{background-color:var(--calcite-close-background-color-press, var(--calcite-color-transparent-press))}.close calcite-icon{color:inherit}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,yI=class yI extends sf{constructor(){super(),this.closeButtonRef=_S(),this.containerRef=_S(),this.messages=LQ(),this.focusSetter=Mz()(this),this.hasImage=!1,this.hasText=!1,this.appearance="solid",this.closable=!1,this.closed=!1,this.closeOnDelete=!1,this.disabled=!1,this.iconFlipRtl=!1,this.interactive=!1,this.kind="neutral",this.scale="m",this.selected=!1,this.selectionMode="none",this.calciteChipClose=to({cancelable:!1}),this.calciteChipSelect=to({cancelable:!1}),this.calciteInternalChipKeyEvent=to({cancelable:!1}),this.calciteInternalChipSelect=to({cancelable:!1}),this.calciteInternalSyncSelectedChips=to({cancelable:!1}),this.listen("keydown",this.keyDownHandler),this.listen("click",this.clickHandler)}async setFocus(e){return this.focusSetter(()=>{if(this.interactive)return this.containerRef.value;if(this.closable)return this.closeButtonRef.value},e)}async load(){this.updateHasText()}willUpdate(e){e.has("selected")&&this.hasUpdated&&this.watchSelected(this.selected)}updated(){EQ(this)}loaded(){this.selectionMode!=="none"&&this.interactive&&this.selected&&this.handleSelectionPropertyChange(this.selected)}watchSelected(e){this.selectionMode!=="none"&&this.handleSelectionPropertyChange(e)}keyDownHandler(e){if(e.target===this.el)switch(e.key){case" ":case"Enter":this.handleEmittingEvent(),e.preventDefault();break;case"Backspace":case"Delete":this.closable&&!this.closed&&this.closeOnDelete&&(e.preventDefault(),this.close());break;case"ArrowRight":case"ArrowLeft":case"Home":case"End":this.calciteInternalChipKeyEvent.emit(e),e.preventDefault();break}}clickHandler(){!this.interactive&&this.closable&&Sz(this.closeButtonRef.value)}handleDefaultSlotChange(){this.updateHasText()}close(){this.calciteChipClose.emit(),this.selected=!1,this.closed=!0}closeButtonKeyDownHandler(e){pye(e.key)&&(e.preventDefault(),this.close())}updateHasText(){this.hasText=this.el.textContent.trim().length>0}handleSlotImageChange(e){this.hasImage=xz(e)}handleEmittingEvent(){this.interactive&&this.calciteChipSelect.emit()}handleSelectionPropertyChange(e){this.selectionMode==="single"&&this.calciteInternalSyncSelectedChips.emit(),!this.parentChipGroup.selectedItems.includes(this.el)&&e&&this.selectionMode!=="multiple"&&this.calciteInternalChipSelect.emit(),this.selectionMode!=="single"&&this.calciteInternalSyncSelectedChips.emit()}renderChipImage(){return ar`<div class=${kt(Nn.imageContainer)}><slot name=${Pye.image} @slotchange=${this.handleSlotImageChange}></slot></div>`}renderSelectionIcon(){const e=this.selectionMode==="multiple"?this.selected?oT.checkedMultiple:oT.uncheckedMultiple:this.selected?oT.checkedSingle:void 0;return ar`<div class=${kt({[Nn.selectIcon]:!0,[Nn.selectIconActive]:this.selectionMode==="multiple"||this.selected})}>${e?ar`<calcite-icon .icon=${e} .scale=${D2(this.scale)}></calcite-icon>`:null}</div>`}renderCloseButton(){return ar`<button .ariaLabel=${this.messages.dismissLabel} class=${kt(Nn.close)} @click=${this.close} @keydown=${this.closeButtonKeyDownHandler} .tabIndex=${this.disabled?-1:0} ${Nb(this.closeButtonRef)}><calcite-icon .icon=${oT.close} .scale=${D2(this.scale)}></calcite-icon></button>`}renderIcon(){return ar`<calcite-icon class=${kt(Nn.chipIcon)} .flipRtl=${this.iconFlipRtl} .icon=${this.icon} .scale=${D2(this.scale)}></calcite-icon>`}render(){const{disabled:e}=this,i=e||!e&&!this.interactive,r=this.selectionMode==="multiple"&&this.interactive?"checkbox":this.selectionMode!=="none"&&this.interactive?"radio":this.interactive?"button":"img";return MQ({disabled:e,children:ar`<div .ariaChecked=${this.selectionMode!=="none"&&this.interactive?this.selected:void 0} .ariaLabel=${this.label} class=${kt({[Nn.container]:!0,[Nn.textSlotted]:this.hasText,[Nn.imageSlotted]:this.hasImage,[Nn.selectable]:this.selectionMode!=="none",[Nn.multiple]:this.selectionMode==="multiple",[Nn.single]:this.selectionMode==="single"||this.selectionMode==="single-persist",[Nn.selected]:this.selected,[Nn.closable]:this.closable,[Nn.nonInteractive]:!this.interactive,[Nn.isCircle]:!this.closable&&!this.hasText&&(!this.icon||!this.hasImage)&&(this.selectionMode==="none"||!!this.selectionMode&&this.selectionMode!=="multiple"&&!this.selected)})} @click=${this.handleEmittingEvent} .role=${r} .tabIndex=${i?-1:0} ${Nb(this.containerRef)}>${this.selectionMode!=="none"&&this.renderSelectionIcon()||""}${this.renderChipImage()}${this.icon&&this.renderIcon()||""}<span class=${kt(Nn.title)}><slot @slotchange=${this.handleDefaultSlotChange}></slot></span>${this.closable&&this.renderCloseButton()||""}</div>`})}};yI.properties={hasImage:[16,{},{state:!0}],hasText:[16,{},{state:!0}],appearance:[3,{},{reflect:!0}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],closeOnDelete:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],interactive:[5,{},{type:Boolean}],kind:[3,{},{reflect:!0}],label:1,messageOverrides:[0,{},{attribute:!1}],parentChipGroup:[0,{},{attribute:!1}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionMode:1,value:1},yI.styles=Dye;let z3=yI;EI("calcite-chip",z3);const jBe=Object.freeze(Object.defineProperty({__proto__:null,Chip:z3},Symbol.toStringTag,{value:"Module"}));const wq=$I(class extends TI{constructor(){super(...arguments),this.key=li}render(t,e){return this.key=t,e}update(t,[e,i]){return e!==this.key&&(tme(t),this.key=e),i}});const Nye=new RegExp("\\.(0+)?$"),Lye=new RegExp("0+$"),Xt=class Xt{constructor(e){if(e instanceof Xt)return e;const[i,r]=Gye(e).split(".").concat("");this.value=BigInt(i+r.padEnd(Xt.DECIMALS,"0").slice(0,Xt.DECIMALS))+BigInt(Xt.ROUNDED&&r[Xt.DECIMALS]>="5"),this.isNegative=e.charAt(0)==="-"}getIntegersAndDecimals(){const e=this.value.toString().replace("-","").padStart(Xt.DECIMALS+1,"0"),i=e.slice(0,-Xt.DECIMALS),r=e.slice(-Xt.DECIMALS).replace(Lye,"");return{integers:i,decimals:r}}toString(){const{integers:e,decimals:i}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${e}${i.length?"."+i:""}`}formatToParts(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=e.numberFormatter.formatToParts(BigInt(i));return this.isNegative&&n.unshift({type:"minusSign",value:e.minusSign}),r.length&&(n.push({type:"decimal",value:e.decimal}),r.split("").forEach(s=>n.push({type:"fraction",value:s}))),n}format(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),n=`${this.isNegative?e.minusSign:""}${e.numberFormatter.format(BigInt(i))}`,s=r.length?`${e.decimal}${r.split("").map(o=>e.numberFormatter.format(Number(o))).join("")}`:"";return`${n}${s}`}add(e){return Xt.fromBigInt(this.value+new Xt(e).value)}subtract(e){return Xt.fromBigInt(this.value-new Xt(e).value)}multiply(e){return Xt._divRound(this.value*new Xt(e).value,Xt.SHIFT)}divide(e){return Xt._divRound(this.value*Xt.SHIFT,new Xt(e).value)}};Xt.DECIMALS=100,Xt.ROUNDED=!0,Xt.SHIFT=BigInt("1"+"0".repeat(Xt.DECIMALS)),Xt._divRound=(e,i)=>Xt.fromBigInt(e/i+(Xt.ROUNDED?e*BigInt(2)/i%BigInt(2):BigInt(0))),Xt.fromBigInt=e=>Object.assign(Object.create(Xt.prototype),{value:e,isNegative:e<BigInt(0)});let xS=Xt;function Az(t){return!(!t||isNaN(Number(t)))}function zBe(t){return!t||!Bye(t)?"":F3(t,e=>{let i=!1;const r=e.split("").filter((n,s)=>n.match(/\./g)&&!i?(i=!0,!0):n.match(/-/g)&&s===0?!0:$z.includes(n)).join("");return Az(r)?new xS(r).toString():""})}const jQ=/^([-0])0+(?=\d)/,jye=/(?!^\.)\.$/,zye=/(?!^-)-/g,Fye=/^-\b0\b\.?0*$/,Vye=/0*$/,Uye=new Set(["e","E","-",",",".",...$z]),FBe=t=>{const e=Array.from(t).filter(i=>Uye.has(i)).join("");return F3(e,i=>{const r=i.replace(zye,"").replace(jye,"").replace(jQ,"$1");return Az(r)?Fye.test(r)?r:qye(r):i})};function qye(t){const e=t.split(".")[1],i=new xS(t).toString(),[r,n]=i.split(".");return e&&n!==e?`${r}.${e}`:i}function F3(t,e){if(!t)return t;const i=t.toLowerCase().indexOf("e")+1;return i?t.replace(/[eE]*$/g,"").substring(0,i).concat(t.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map((r,n)=>e(n===1?r.replace(/\./g,""):r)).join("e").replace(/^e/,"1e"):e(t)}function Gye(t){const e=t.split(/[eE]/);if(e.length===1)return t;const i=+t;if(Number.isSafeInteger(i))return`${i}`;const r=t.charAt(0)==="-",n=+e[1],s=e[0].split("."),o=(r?s[0].substring(1):s[0])||"",u=s[1]||"",d=(v,b)=>{const _=Math.abs(b)-v.length,x=_>0?`${"0".repeat(_)}${v}`:v;return`${x.slice(0,b)}.${x.slice(b)}`},h=(v,b)=>{const _=b>v.length?`${v}${"0".repeat(b-v.length)}`:v;return`${_.slice(0,b)}.${_.slice(b)}`},m=n>0?`${o}${h(u,n)}`:`${d(o,n)}${u}`;return`${r?"-":""}${m.charAt(0)==="."?"0":""}${m.replace(Nye,"").replace(jQ,"")}`}function Bye(t){return $z.some(e=>t.includes(e))}function VBe(t,e,i){const r=e.split(".")[1];if(r){const n=r.match(Vye)[0];if(n&&i.delocalize(t).length!==e.length&&r.indexOf("e")===-1){const s=i.decimal;return t=t.includes(s)?t:`${t}${s}`,t.padEnd(t.length+n.length,i.localize("0"))}}return t}const V3="en",Hye=["ar","bg","bs","ca","cs","da","de","de-AT","de-CH","el",V3,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"];new Map(Object.entries({bg:{am:"..",pm:".."},bs:{am:"prijepodne",pm:"popodne"},ca:{am:"a.m.",pm:"p.m."},cs:{am:"dop.",pm:"odp."},es:{am:"a.m.",pm:"p.m."},"es-mx":{am:"a.m.",pm:"p.m."},"es-MX":{am:"a.m.",pm:"p.m."},fi:{am:"ap.",pm:"ip."},he:{am:"",pm:""},hu:{am:"de. ",pm:"du."},lt:{am:"priepiet",pm:"popiet"},lv:{am:"priekpusdien",pm:"pcpusdien"},mk:{am:".",pm:"."},no:{am:"a.m.",pm:"p.m."},nl:{am:"a.m.",pm:"p.m."},"pt-pt":{am:"da manh",pm:"da tarde"},"pt-PT":{am:"da manh",pm:"da tarde"},ro:{am:"a.m.",pm:"p.m."},sl:{am:"dop.",pm:"pop."},sv:{am:"fm",pm:"em"},th:{am:"",pm:""},tr:{am:"",pm:"S"},uk:{am:"",pm:""},vi:{am:"SA",pm:"CH"}}));const Wye=["arab","arabext","latn"],DR=[...Hye],zQ=t=>Wye.includes(t),NR=new Intl.NumberFormat().resolvedOptions().numberingSystem,FQ=NR==="arab"||!zQ(NR)?"latn":NR,Zye=t=>zQ(t)?t:FQ;function Jye(t){return t?DR.includes(t)?t:(t=t.toLowerCase(),t.includes("-")&&(t=t.replace(/(\w+)-(\w+)/,(e,i,r)=>`${i}-${r.toUpperCase()}`),DR.includes(t)||(t=t.split("-")[0])),t==="nb"||t==="nn"?"no":t==="zh"?"zh-CN":DR.includes(t)?t:(console.warn(`Translations for the "${t}" locale are not available and will fall back to the default, English (en).`),V3)):V3}class VQ{constructor(){this.delocalize=e=>this._numberFormatOptions?F3(e,i=>i.replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex)):e,this.localize=e=>this._numberFormatOptions?F3(e,i=>Az(i.trim())?new xS(i.trim()).format(this).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):i):e}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(e){if(e.locale=Jye(e?.locale),e.numberingSystem=Zye(e?.numberingSystem),!this._numberFormatOptions&&e.locale===V3&&e.numberingSystem===FQ&&Object.keys(e).length===2||JSON.stringify(this._numberFormatOptions)===JSON.stringify(e))return;this._numberFormatOptions=e,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const i=new Map(this._digits.map((n,s)=>[n,s])),r=new Intl.NumberFormat(this._numberFormatOptions.locale,{numberingSystem:this._numberFormatOptions.numberingSystem}).formatToParts(-123456789e-1);this._actualGroup=r.find(n=>n.type==="group").value,this._group=this._actualGroup.trim().length===0||this._actualGroup==" "?"":this._actualGroup,this._decimal=e.locale==="bs"||e.locale==="mk"?",":r.find(n=>n.type==="decimal").value,this._minusSign=r.find(n=>n.type==="minusSign").value,this._getDigitIndex=n=>i.get(n)}}const UBe=new VQ;function _q(t){return t[t.openProp||"open"]}async function Yye(t){await t.updateComplete,_q(t)?t.onBeforeOpen():t.onBeforeClose(),await t.updateComplete,t.transitionEl&&await Jme(t.transitionEl,t.transitionProp),_q(t)?t.onOpen():t.onClose()}const Qye={brand:"lightbulb",danger:"exclamationMarkTriangle",info:"information",success:"checkCircle",warning:"exclamationMarkTriangle"};const LR={slow:14e3,medium:1e4,fast:6e3},aT={actionsEnd:"actions-end",title:"title",message:"message",link:"link"},da={actionsEnd:"actions-end",close:"close",container:"container",containerActive:"container--active",dismissProgress:"dismiss-progress",icon:"icon",containerEmbedded:"container--embedded",queueCount:"queue-count",queueCountActive:"queue-count--active",textContainer:"text-container",focused:"focused"},Xye=300;class Kye{constructor(){this.registeredElements=[],this.queueTimeoutId=null}registerElement(e){const{registeredElements:i}=this;if(!i.includes(e)){switch(e.queue){case"immediate":i.unshift(e);break;case"next":i.splice(1,0,e);break;case"last":i.push(e);break}this.updateAlerts()}}unregisterElement(e){const{registeredElements:i}=this,r=i.indexOf(e);r!==-1&&i.splice(r,1),e.active=!1,this.updateAlerts()}updateAlerts(){window.clearTimeout(this.queueTimeoutId),this.queueTimeoutId=null,this.registeredElements.forEach((e,i)=>{e.openAlertCount=this.registeredElements.length,i===0?this.queueTimeoutId=window.setTimeout(()=>e.active=!0,Xye):e.active=!1})}}const ege=bf`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:block;inline-size:var(--calcite-alert-width)}.container{pointer-events:none;position:fixed;z-index:var(--calcite-z-index-toast);margin-inline:auto;margin-block:0px;box-sizing:border-box;display:flex;inline-size:100%;min-inline-size:min-content;align-items:center;justify-content:center;text-align:start;opacity:0;--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--calcite-alert-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow));background-color:var(--calcite-alert-background-color, var(--calcite-color-foreground-1));border-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));border-block-start:0 solid transparent;border-inline:1px solid var(--calcite-color-border-3);border-block-end:1px solid var(--calcite-color-border-3);max-inline-size:calc(100% - var(--calcite-alert-offset-size, 2rem) * 2);transition:opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(.215,.44,.42,.88),all var(--calcite-animation-timing) ease-in-out}.container--bottom,.container--top{inset-inline-end:0;inset-inline-start:0}.container[class*=bottom]{transform:translate3d(0,var(--calcite-alert-offset-size, 2rem),0);inset-block-end:var(--calcite-alert-offset-size, 2rem)}.container[class*=top]{transform:translate3d(0,calc(-1 * var(--calcite-alert-offset-size, 2rem)),0);inset-block-start:var(--calcite-alert-offset-size, 2rem)}.container[class*=start]{inset-inline-start:var(--calcite-alert-offset-size, 2rem);inset-inline-end:auto}.container[class*=end]{inset-inline-end:var(--calcite-alert-offset-size, 2rem);inset-inline-start:auto}.icon{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0;margin-block:auto;margin-inline-end:auto}.close{display:flex;cursor:pointer;align-items:center;justify-content:flex-end;align-self:stretch;border-style:none;background-color:transparent;color:var(--calcite-color-text-3);outline:2px solid transparent;outline-offset:2px;-webkit-appearance:none;border-start-end-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));border-end-end-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));outline-color:transparent}.close:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.close:hover,.close:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-2)}.close:active{background-color:var(--calcite-color-foreground-3)}.queue-count{visibility:hidden;display:flex;min-inline-size:min-content;cursor:default;align-items:center;justify-content:space-around;align-self:stretch;overflow:hidden;text-align:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-2);opacity:0;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;border-inline:0 solid transparent;border-start-end-radius:0}.queue-count--active{visibility:visible;opacity:1}.dismiss-progress{position:absolute;display:block;inline-size:100%;overflow:hidden;inset-inline:0;inset-block-start:-2px;block-size:2px;border-radius:var(--calcite-border-radius) var(--calcite-border-radius) 0 0}.dismiss-progress:after{position:absolute;inset-block-start:0px;display:block;block-size:2px;content:"";background-color:var(--calcite-color-transparent-tint);inset-inline-end:0}.actions-end{display:flex;align-self:stretch}.text-container{box-sizing:border-box;display:flex;min-inline-size:0px;flex:1 1 auto;flex-direction:column;overflow-wrap:break-word}.footer{position:relative;display:flex;inline-size:auto;justify-content:flex-end;align-self:stretch;padding-block-start:1px;block-size:inherit}:host([scale=s]) slot[name=title]::slotted(*),:host([scale=s]) *::slotted([slot=title]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=s]) slot[name=message]::slotted(*),:host([scale=s]) *::slotted([slot=message]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) slot[name=link]::slotted(*),:host([scale=s]) *::slotted([slot=link]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) .queue-count{margin-inline:.5rem}:host([scale=s]) .container{--calcite-internal-alert-min-height: 3.5rem;inline-size:var(--calcite-alert-width, 40em)}:host([scale=s]) .close{padding:.75rem}:host([scale=s]) .icon{padding-inline-start:.75rem}:host([scale=s]) .text-container{padding-block:.5rem;padding-inline:.75rem .5rem}:host([scale=m]) slot[name=title]::slotted(*),:host([scale=m]) *::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=m]) slot[name=message]::slotted(*),:host([scale=m]) *::slotted([slot=message]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) slot[name=link]::slotted(*),:host([scale=m]) *::slotted([slot=link]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .queue-count{margin-inline:.75rem}:host([scale=m]) .container{--calcite-internal-alert-min-height: 4.1875rem;inline-size:var(--calcite-alert-width, 50em)}:host([scale=m]) .close{padding:1rem}:host([scale=m]) .icon{padding-inline-start:1rem}:host([scale=m]) .text-container{padding-block:.75rem;padding-inline:1rem .75rem}:host([scale=l]) slot[name=title]::slotted(*),:host([scale=l]) *::slotted([slot=title]){margin-block-end:.25rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host([scale=l]) slot[name=message]::slotted(*),:host([scale=l]) *::slotted([slot=message]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) slot[name=link]::slotted(*),:host([scale=l]) *::slotted([slot=link]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .queue-count{margin-inline:1rem}:host([scale=l]) .container{--calcite-internal-alert-min-height: 5.625rem;inline-size:var(--calcite-alert-width, 60em)}:host([scale=l]) .close{padding:1.25rem}:host([scale=l]) .icon{padding-inline-start:1.25rem}:host([scale=l]) .text-container{padding-block:1rem;padding-inline:1.25rem 1rem}:host([open]) .container--active{border-block-start-width:2px;opacity:1;pointer-events:initial}:host([open]) .container--active[class*=bottom]{transform:translate3d(0,calc(-1 * var(--calcite-alert-offset-size, 2rem)),inherit)}:host([open]) .container--active[class*=top]{transform:translate3d(0,var(--calcite-alert-offset-size, 2rem),inherit)}:host([auto-close])>.queue-count{border-inline-end:0 solid transparent}slot[name=title]::slotted(*),*::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}slot[name=message]::slotted(*),*::slotted([slot=message]){margin:0;display:inline;font-size:var(--calcite-font-size--1);line-height:1.375;font-weight:var(--calcite-font-weight-normal);margin-inline-end:.5rem;color:var(--calcite-color-text-2)}slot[name=link]::slotted(*),*::slotted([slot=link]){display:inline-flex;color:var(--calcite-color-text-link)}:host([kind=brand]) .container{border-block-start-color:var(--calcite-color-brand)}:host([kind=brand]) .container .icon{color:var(--calcite-color-brand)}:host([kind=info]) .container{border-block-start-color:var(--calcite-color-status-info)}:host([kind=info]) .container .icon{color:var(--calcite-color-status-info)}:host([kind=danger]) .container{border-block-start-color:var(--calcite-color-status-danger)}:host([kind=danger]) .container .icon{color:var(--calcite-color-status-danger)}:host([kind=success]) .container{border-block-start-color:var(--calcite-color-status-success)}:host([kind=success]) .container .icon{color:var(--calcite-color-status-success)}:host([kind=warning]) .container{border-block-start-color:var(--calcite-color-status-warning)}:host([kind=warning]) .container .icon{color:var(--calcite-color-status-warning)}:host([auto-close-duration=fast]) .dismiss-progress:after{animation:dismissProgress 6s ease-out}:host(:hover[auto-close-duration=fast]) .dismiss-progress:after,:host(:focus[auto-close-duration=fast]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=medium]) .dismiss-progress:after{animation:dismissProgress 10s ease-out}:host(:hover[auto-close-duration=medium]) .dismiss-progress:after,:host(:focus[auto-close-duration=medium]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=slow]) .dismiss-progress:after{animation:dismissProgress 14s ease-out}:host(:hover[auto-close-duration=slow]) .dismiss-progress:after,:host(:focus[auto-close-duration=slow]) .dismiss-progress:after{animation-play-state:paused}.container.focused .dismiss-progress:after{animation-play-state:paused}@keyframes dismissProgress{0%{inline-size:0px;opacity:.75}to{inline-size:100%;opacity:1}}.container--embedded{position:absolute}:host([hidden]){display:none}[hidden]{display:none}:host([calcite-hydrated-hidden]){visibility:hidden!important;pointer-events:none}`,Hg=new Kye,gI=class gI extends sf{constructor(){super(...arguments),this.autoCloseTimeoutId=null,this.transitionProp="opacity",this.totalHoverTime=0,this.totalOpenTime=0,this.messages=LQ(),this.focusSetter=Mz()(this),this.hasEndActions=!1,this.isFocused=!1,this.numberStringFormatter=new VQ,this.active=!1,this.autoClose=!1,this.autoCloseDuration="medium",this.embedded=!1,this.iconFlipRtl=!1,this.kind="brand",this.open=!1,this.openAlertCount=0,this.placement="bottom",this.queue="last",this.scale="m",this.calciteAlertBeforeClose=to({cancelable:!1}),this.calciteAlertBeforeOpen=to({cancelable:!1}),this.calciteAlertClose=to({cancelable:!1}),this.calciteAlertOpen=to({cancelable:!1})}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback(),this.open&&Hg.registerElement(this.el),this.numberStringFormatter.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,signDisplay:"always"}}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),e.has("active")&&(this.hasUpdated||this.active!==!1)&&this.handleActiveChange(),e.has("autoCloseDuration")&&(this.hasUpdated||this.autoCloseDuration!=="medium")&&this.updateDuration(),e.has("queue")&&(this.hasUpdated||this.queue!=="last")&&this.handleQueueChange(),e.has("numberingSystem")&&this.numberingSystemChange(),e.has("messages")&&this.effectiveLocaleChange()}disconnectedCallback(){super.disconnectedCallback(),Hg.unregisterElement(this.el),this.clearAutoCloseTimeout(),this.embedded=!1}handleActiveChange(){Yye(this),this.clearAutoCloseTimeout(),this.active&&this.autoClose&&!this.autoCloseTimeoutId&&(this.initialOpenTime=Date.now(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),LR[this.autoCloseDuration]))}openHandler(){this.open?Hg.registerElement(this.el):Hg.unregisterElement(this.el)}updateDuration(){this.autoClose&&this.autoCloseTimeoutId&&(this.clearAutoCloseTimeout(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),LR[this.autoCloseDuration]))}handleQueueChange(){this.open&&(Hg.unregisterElement(this.el),Hg.registerElement(this.el))}handleKeyBoardFocus(){this.isFocused=!0,this.handleFocus()}handleKeyBoardBlur(){this.isFocused=!1,this.isHovered||this.handleBlur()}effectiveLocaleChange(){this.numberStringFormatter.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,signDisplay:"always"}}numberingSystemChange(){this.numberStringFormatter.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,signDisplay:"always"}}clearAutoCloseTimeout(){window.clearTimeout(this.autoCloseTimeoutId),this.autoCloseTimeoutId=null}setTransitionEl(e){e&&(this.transitionEl=e)}closeAlert(){this.open=!1,this.clearAutoCloseTimeout()}onBeforeOpen(){this.calciteAlertBeforeOpen.emit()}onOpen(){this.calciteAlertOpen.emit()}onBeforeClose(){this.calciteAlertBeforeClose.emit()}onClose(){this.calciteAlertClose.emit()}actionsEndSlotChangeHandler(e){this.hasEndActions=xz(e)}handleMouseOver(){this.isHovered=!0,this.handleFocus()}handleMouseLeave(){this.isHovered=!1,this.isFocused||this.handleBlur()}handleFocus(){this.clearAutoCloseTimeout(),this.totalOpenTime=Date.now()-this.initialOpenTime,this.lastMouseOverBegin=Date.now()}handleBlur(){const e=Date.now()-this.lastMouseOverBegin,i=LR[this.autoCloseDuration]-this.totalOpenTime+this.totalHoverTime;this.totalHoverTime=this.totalHoverTime?e+this.totalHoverTime:e,this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),i)}render(){const{open:e,autoClose:i,label:r,placement:n,active:s,openAlertCount:o}=this,u=i?"alert":"alertdialog",d=!e,h=Ume(Qye,this.icon,this.kind),m=o>1;return this.el.inert=d,this.el.ariaLabel=r,this.el.toggleAttribute("calcite-hydrated-hidden",d),this.el.role=u,ar`<div class=${kt({[da.container]:!0,[da.containerActive]:s,[`${da.container}--${n}`]:!0,[da.containerEmbedded]:this.embedded,[da.focused]:this.isFocused})} @pointerenter=${this.autoClose&&this.autoCloseTimeoutId?this.handleMouseOver:null} @pointerleave=${this.autoClose?this.handleMouseLeave:null} ${Nb(this.setTransitionEl)}>${h&&this.renderIcon(h)||""}<div class=${kt(da.textContainer)} @focusin=${this.autoClose&&this.autoCloseTimeoutId?this.handleKeyBoardFocus:null} @focusout=${this.autoClose?this.handleKeyBoardBlur:null}><slot name=${aT.title}></slot><slot name=${aT.message}></slot><slot name=${aT.link}></slot></div>${this.renderActionsEnd()}${m?this.renderQueueCount():null}${this.renderCloseButton()}${e&&s&&i?ar`<div class=${kt(da.dismissProgress)}></div>`:null}</div>`}renderCloseButton(){return wq("close",ar`<button .ariaLabel=${this.messages.close} class=${kt(da.close)} @click=${this.closeAlert} @focusin=${this.autoClose?this.handleKeyBoardFocus:null} @focusout=${this.autoClose?this.handleKeyBoardBlur:null} type=button><calcite-icon icon=x .scale=${D2(this.scale)}></calcite-icon></button>`)}renderQueueCount(){const{openAlertCount:e}=this,i=e>2?e-1:1,r=this.numberStringFormatter.numberFormatter.format(i);return wq("queue-count",ar`<div class=${kt({[da.queueCount]:!0,[da.queueCountActive]:e>1})}><calcite-chip .label=${r} .scale=${this.scale} .value=${r}>${r}</calcite-chip></div>`)}renderActionsEnd(){return ar`<div class=${kt(da.actionsEnd)}><slot name=${aT.actionsEnd} @slotchange=${this.actionsEndSlotChangeHandler}></slot></div>`}renderIcon(e){return ar`<div class=${kt(da.icon)}><calcite-icon .flipRtl=${this.iconFlipRtl} .icon=${e} .scale=${D2(this.scale)}></calcite-icon></div>`}};gI.properties={hasEndActions:[16,{},{state:!0}],isFocused:[16,{},{state:!0}],numberStringFormatter:[16,{},{state:!0}],active:[5,{},{type:Boolean}],autoClose:[7,{},{reflect:!0,type:Boolean}],autoCloseDuration:[3,{},{reflect:!0}],embedded:[5,{},{type:Boolean}],icon:[3,{converter:sQ},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],kind:[3,{},{reflect:!0}],label:1,messageOverrides:[0,{},{attribute:!1}],numberingSystem:[3,{},{reflect:!0}],open:[7,{},{reflect:!0,type:Boolean}],openAlertCount:[9,{},{type:Number}],placement:[3,{},{reflect:!0}],queue:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},gI.styles=ege;let ZP=gI;EI("calcite-alert",ZP);const Iz=Symbol.for(""),tge=t=>{if(t?.r===Iz)return t?._$litStatic$},qBe=t=>({_$litStatic$:t,r:Iz}),Sq=(t,...e)=>({_$litStatic$:e.reduce((i,r,n)=>i+(s=>{if(s._$litStatic$!==void 0)return s._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${s}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(r)+t[n+1],t[0]),r:Iz}),xq=new Map,ige=t=>(e,...i)=>{const r=i.length;let n,s;const o=[],u=[];let d,h=0,m=!1;for(;h<r;){for(d=e[h];h<r&&(s=i[h],(n=tge(s))!==void 0);)d+=n+e[++h],m=!0;h!==r&&u.push(s),o.push(d),h++}if(h===r&&o.push(e[r]),m){const v=o.join("$$lit$$");(e=xq.get(v))===void 0&&(o.raw=o,xq.set(v,e=o)),i=u}return t(e,...i)},rge=ige(ar);const nge=bf`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline}:host a,:host button{position:relative;display:flex;cursor:pointer;align-items:center;justify-content:center;border-radius:0;border-style:none;font-family:inherit;text-decoration:none;line-height:inherit;font-size:inherit;-webkit-appearance:none}:host a:hover,:host button:hover{text-decoration:none}:host a,:host button{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform,background-size;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent}:host a:focus,:host button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}calcite-icon{inline-size:1em;block-size:1em;min-inline-size:unset;min-block-size:unset}.calcite-link--icon{vertical-align:middle;margin-block-start:-.25em}:host .calcite-link--icon.icon-start{margin-inline-end:.5rem}:host .calcite-link--icon.icon-end{margin-inline-start:.5rem}:host button,:host a{position:relative;display:inline;border-style:none;background-color:transparent;padding:0;color:var(--calcite-link-text-color, var(--calcite-color-text-link));line-height:inherit;white-space:initial;background-image:linear-gradient(currentColor,currentColor),linear-gradient(var(--calcite-color-brand-underline),var(--calcite-color-brand-underline));background-position-x:0%,100%;background-position-y:min(1.5em,100%);background-repeat:no-repeat,no-repeat;background-size:0% 1px,100% 1px}:host button:hover,:host button:focus,:host a:hover,:host a:focus{background-size:100% 1px,100% 1px}:host button:active,:host a:active{background-size:100% 2px,100% 2px}:host button.calcite--rtl,:host a.calcite--rtl{background-position:100% 100%,100% 100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,lT={calciteLinkIcon:"calcite-link--icon",iconStart:"icon-start",iconEnd:"icon-end"},vI=class vI extends sf{constructor(){super(),this.childRef=_S(),this.focusSetter=Mz()(this),this.disabled=!1,this.download=!1,this.listen("click",this.clickHandler)}async setFocus(e){return this.focusSetter(()=>this.childRef.value,e)}updated(){EQ(this)}clickHandler(e){this.disabled||e.isTrusted||this.childRef.value.click()}childElClickHandler(e){e.isTrusted||e.stopPropagation()}render(){const{download:e,el:i}=this,r=fQ(i),n=this.href?"a":"button",s=ar`<calcite-icon class=${kt({[lT.calciteLinkIcon]:!0,[lT.iconStart]:!0})} .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} scale=s></calcite-icon>`,o=ar`<calcite-icon class=${kt({[lT.calciteLinkIcon]:!0,[lT.iconEnd]:!0})} .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} scale=s></calcite-icon>`,u=n==="button"?Sq`button`:Sq`a`,d=n==="button"?0:null;return this.el.role="presentation",MQ({disabled:this.disabled,children:rge`<${u} class=${kt({[dme.rtl]:r==="rtl"})} download=${(n==="a"?e===!0||e===""?"":e||null:null)??sT} href=${(n==="a"&&this.href)??sT} @click=${this.childElClickHandler} rel=${(n==="a"&&this.rel)??sT} tabindex=${d} target=${(n==="a"&&this.target)??sT} ${Nb(this.childRef)}>${ar`${this.iconStart?s:null}<slot></slot>${this.iconEnd?o:null}`}</${u}>`})}};vI.properties={disabled:[7,{},{reflect:!0,type:Boolean}],download:[3,{converter:sQ},{reflect:!0}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],rel:1,target:1},vI.styles=nge;let JP=vI;EI("calcite-link",JP);let Nh;const $n=globalThis;function q(t){return typeof Nh[t]=="function"?Nh[t]=Nh[t]($n):Nh[t]}Nh=$n.dojoConfig?.has||$n.esriConfig?.has?{...$n.dojoConfig?.has,...$n.esriConfig?.has}:{},q.add=(t,e,i,r)=>{(r||Nh[t]===void 0)&&(Nh[t]=e),i&&q(t)},q.cache=Nh,q.add("big-integer-warning-enabled",!0),q.add("esri-deprecation-warnings",!0),q.add("esri-tests-disable-screenshots",!1),q.add("esri-tests-use-full-window",!1),q.add("esri-tests-post-to-influx",!0),q.add("esri-cim-animations-enable-status","enabled"),q.add("esri-cim-animations-spotlight",!1),q.add("esri-cim-animations-freeze-time",!1),(()=>{q.add("host-webworker",$n.WorkerGlobalScope!==void 0&&self instanceof $n.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(q.add("host-browser",t),q.add("host-node",!(typeof $n.process!="object"||!$n.process.versions?.node||!$n.process.versions.v8)),q.add("dom",t),q("host-browser")){const e=navigator,i=e.userAgent,r=e.appVersion,n=parseFloat(r);if(q.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),q.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),q.add("khtml",r.includes("Konqueror")?n:void 0),q.add("edge",parseFloat(i.split("Edge/")[1])||void 0),q.add("opr",parseFloat(i.split("OPR/")[1])||void 0),q.add("webkit",!q("wp")&&!q("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),q.add("chrome",!q("edge")&&!q("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),q.add("android",!q("wp")&&parseFloat(i.split("Android ")[1])||void 0),q.add("safari",!r.includes("Safari")||q("wp")||q("chrome")||q("android")||q("edge")||q("opr")?void 0:parseFloat(r.split("Version/")[1])),q.add("mac",r.includes("Macintosh")),!q("wp")&&/(iPhone|iPod|iPad)/.test(i)){const s=RegExp.$1.replace(/P/,"p"),o=/OS ([\d_]+)/.test(i)?RegExp.$1:"1",u=parseFloat(o.replace(/_/,".").replaceAll("_",""));q.add(s,u),q.add("ios",u)}q("webkit")||(!i.includes("Gecko")||q("wp")||q("khtml")||q("edge")||q.add("mozilla",n),q("mozilla")&&q.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if($n.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&q.add("esri-mobile",e),i&&q.add("esri-iPhone",i),q.add("esri-geolocation",!!navigator.geolocation)}q.add("esri-wasm","WebAssembly"in $n),q.add("esri-performance-mode-frames-between-render",20),q.add("esri-force-performance-mode",!1),q.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in $n,e=$n.crossOriginIsolated===!1;return t&&!e}),q.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),q.add("esri-atomics","Atomics"in $n),q.add("esri-workers","Worker"in $n),q.add("web-feat:cache","caches"in $n),q.add("esri-workers-arraybuffer-transfer",!q("safari")||Number(q("safari"))>=12),q.add("workers-pool-size",8),q.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),q.add("featurelayer-simplify-payload-size-factors",[1,1,4]),q.add("featurelayer-fast-triangulation-enabled",!0),q.add("featurelayer-animation-enabled",!0),q.add("featurelayer-snapshot-enabled",!0),q.add("featurelayer-snapshot-initial-tolerance",0),q.add("featurelayer-snapshot-point-min-threshold",8e4),q.add("featurelayer-snapshot-point-max-threshold",4e5),q.add("featurelayer-snapshot-multipoint-min-threshold",2e4),q.add("featurelayer-snapshot-multipoint-max-threshold",1e5),q.add("featurelayer-snapshot-polygon-min-threshold",2e3),q.add("featurelayer-snapshot-polygon-max-threshold",2e3),q.add("featurelayer-snapshot-polyline-min-threshold",2e3),q.add("featurelayer-snapshot-polyline-max-threshold",2e3),q.add("featurelayer-snapshot-max-vertex-count",25e4),q.add("featurelayer-snapshot-non-hosted-exceedslimit-enabled",!0),q.add("featurelayer-snapshot-concurrency",4),q.add("featurelayer-snapshot-coverage",.1),q.add("featurelayer-query-max-depth",4),q.add("featurelayer-query-pausing-enabled",!1),q.add("featurelayer-query-tile-concurrency",4),q.add("featurelayer-query-tile-max-features",6e5),q.add("featurelayer-advanced-symbols",!1),q.add("featurelayer-pbf",!0),q.add("featurelayer-pbf-statistics",!1),q.add("feature-layers-workers",!0),q.add("feature-polyline-generalization-factor",1),q.add("parquetlayer-full-query-feature-count",2e4),q.add("parquetlayer-hittest-max-feature-count",1),q.add("parquetlayer-persistence-enabled",!1),q.add("mapview-transitions-duration",200),q.add("mapview-essential-goto-duration",200),q.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),q.add("mapserver-pbf-version-support",10.81),q.add("mapservice-popup-identify-max-tolerance",20),q.add("request-queue-concurrency-hosted",16),q.add("request-queue-concurrency-non-hosted",4),q.add("curve-densification-coarse-segments",128),q.add("curve-densification-max-segments",2e3),q.add("curve-densification-min-segments",3),q.add("curve-densification-pixel-deviation",.5),q.add("view-readyState-waiting-delay",1e3),q.add("gradient-depth-bias",.01),q.add("gradient-depth-epsilon",1e-8),q.add("enable-feature:esri-compress-textures",!0),q("host-webworker")||q("host-browser")&&(q.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),q.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function GBe(t){}function sge(t){return()=>t}function BBe(t){return t}var Ys;let oge=(Ys=class{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*Ys._m}getInt(){return this._seed=(Ys._a*this._seed+Ys._c)%Ys._m,this._seed}getFloat(){return this.getInt()/(Ys._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const r=i-e;return e+this.getInt()/Ys._m*r}},Ys._m=2147483647,Ys._a=48271,Ys._c=0,Ys);const age=1.5,HBe=1/age,WBe=.5;function UQ(t){return t}function lge(t,e=UQ){if(!t||t.length===0)return;let i=t[0],r=e(i);for(let n=1;n<t.length;++n){const s=t[n],o=Number(e(s));o>r&&(r=o,i=s)}return i}function qQ(t,e=UQ){return lge(t,i=>-e(i))}function uge(t,e){return e?t.filter((i,r,n)=>n.findIndex(e.bind(null,i))===r):Array.from(new Set(t))}function cge(t,e,i,r,n,s,o){if(t==null&&r==null)return!0;e=Math.max(0,e),n=Math.max(0,n),i=Math.max(0,i<0?(t?.length??0)+i:i),s=Math.max(0,s<0?(r?.length??0)+s:s);const u=i-e;if(t==null||r==null||u!==s-n)return!1;if(o){for(let d=0;d<u;d++)if(!o(t[e+d],r[n+d]))return!1}else for(let d=0;d<u;d++)if(t[e+d]!==r[n+d])return!1;return!0}function nx(t,e,i){return cge(t,0,t?.length??0,e,0,e?.length??0,i)}function ZBe(){return(t,e)=>{if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}}function YP(t,e,i){let r,n;return i?(r=e.filter(s=>!t.some(o=>i(o,s))),n=t.filter(s=>!e.some(o=>i(o,s)))):(r=e.filter(s=>!t.includes(s)),n=t.filter(s=>!e.includes(s))),{added:r,removed:n}}function JBe(t){return t&&typeof t.length=="number"}function dge(t,e){const i=t.length;if(i===0)return[];const r=[];for(let n=0;n<i;n+=e)r.push(t.slice(n,n+e));return r}let GQ=class{constructor(){this.last=0}};const BQ=new GQ;function QP(t,e,i,r){r=r||BQ;const n=Math.max(0,r.last-10);for(let o=n;o<i;++o)if(t[o]===e)return r.last=o,o;const s=Math.min(n,i);for(let o=0;o<s;++o)if(t[o]===e)return r.last=o,o;return-1}function XP(t,e,i,r){const n=t.length,s=QP(t,e,n,r);if(s!==-1)return t[s]=t[n-1],t.pop(),e}const sl=new Set;function pge(t,e,i=t.length,r=e.length,n,s){if(r===0||i===0)return i;sl.clear();for(let u=0;u<r;++u)sl.add(e[u]);n=n||BQ;const o=Math.max(0,n.last-10);for(let u=o;u<i;++u)if(sl.has(t[u])&&(s?.push(t[u]),sl.delete(t[u]),t[u]=t[i-1],--i,--u,sl.size===0||i===0))return sl.clear(),i;for(let u=0;u<o;++u)if(sl.has(t[u])&&(s?.push(t[u]),sl.delete(t[u]),t[u]=t[i-1],--i,--u,sl.size===0||i===0))return sl.clear(),i;return sl.clear(),i}function hge(t,e){let i=0;for(let r=0;r<t.length;++r){const n=t[r];e(n,r)&&(t[i]=n,i++)}return t.length=i,t}function QBe(t,e,i){const r=t.length;if(e>=r)return t.slice();const n=HQ(i),s=new Set,o=[];for(;o.length<e;){const u=Math.floor(n()*r);s.has(u)||(s.add(u),o.push(t[u]))}return o}function HQ(t){return t?($q.seed=t,()=>$q.getFloat()):Math.random}const $q=new oge;function XBe(t,e){if(!t)return t;const i=HQ(e);for(let r=t.length-1;r>0;r--){const n=Math.floor(i()*(r+1)),s=t[r];t[r]=t[n],t[n]=s}return t}function kz(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function is(t,e){return t!=null}const KBe=[];function eHe(t){return t instanceof ArrayBuffer}function Oz(t){return t?.constructor?.name==="Int8Array"}function WQ(t){return t?.constructor?.name==="Uint8Array"}function ZQ(t){return t?.constructor?.name==="Uint8ClampedArray"}function Cz(t){return t?.constructor?.name==="Int16Array"}function JQ(t){return t?.constructor?.name==="Uint16Array"}function Rz(t){return t?.constructor?.name==="Int32Array"}function YQ(t){return t?.constructor?.name==="Uint32Array"}function fge(t){return t?.constructor?.name==="Float16Array"}function AI(t){return t?.constructor?.name==="Float32Array"}function II(t){return t?.constructor?.name==="Float64Array"}function mge(t){return"buffer"in t}const QQ=1024;function tHe(t){return II(t)||AI(t)||Rz(t)||Cz(t)||Oz(t)}function iHe(t){return II(t)||AI(t)}function rHe(t){return II(t)?179769e303:fge(t)?65504:AI(t)?3402823e32:YQ(t)?4294967295:JQ(t)?65535:WQ(t)||ZQ(t)?255:Rz(t)?2147483647:Cz(t)?32767:Oz(t)?127:256}const nHe=-32768,sHe=-2147483648;function oHe(t){return t}function yge(t,e){let i;for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function z(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=eX(t);if(e!=null)return e;if(N2(t))return t.clone();if(XQ(t))return t.map(z);if(KQ(t))throw new Error("Trying to clone an unclonable Accessor instance");const i={};for(const r of Object.getOwnPropertyNames(t))i[r]=z(t[r]);return i}function KP(t,e){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const i=eX(t);if(i!=null)return i;if(XQ(t)){let n=!0;const s=t.map(o=>{const u=KP(o,e);return o!=null&&u==null&&(n=!1),u});return n?s:null}if(N2(t))return t.clone(e);if(t instanceof File||t instanceof Blob)return t;if(KQ(t))return null;const r=new(Object.getPrototypeOf(t)).constructor;for(const n of Object.getOwnPropertyNames(t)){const s=t[n],o=KP(s);if(s!=null&&o==null)return null;r[n]=o}return r}function N2(t){return typeof t.clone=="function"}function XQ(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function KQ(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function Tq(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function eX(t){if(Oz(t)||WQ(t)||ZQ(t)||Cz(t)||JQ(t)||Rz(t)||YQ(t)||AI(t)||II(t))return t.slice();if(t instanceof Date)return new Date(t);if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,r]of t)e.set(i,z(r));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(z(i));return e}return null}function Pz(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof t?.getTime=="function"&&typeof e?.getTime=="function"&&t.getTime()===e.getTime()||!1}function tX(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&nx(t,e):t instanceof Set?e instanceof Set&&vge(t,e):t instanceof Map?e instanceof Map&&bge(t,e):!!Tq(t)&&Tq(e)&&gge(t,e))}function gge(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const r of i)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function vge(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function bge(t,e){if(t.size!==e.size)return!1;for(const[i,r]of t){const n=e.get(i);if(n!==r||n===void 0&&!e.has(i))return!1}return!0}function Dz(t,e,i=!1){return rX(t,e,i)}function sx(t,e){if(e!=null)return e[t]||iX(t.split("."),!1,e)}function ur(t,e,i){const r=t.split("."),n=r.pop(),s=iX(r,!0,i);s&&n&&(s[n]=e)}function Eq(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const i=e;if(t.length!==i.length)return!0;for(let r=0;r<t.length;r++)if(Eq(t[r],i[r]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in t)if(Eq(t[i],e[i]))return!0;return!1}return t!==e}function iX(t,e,i){let r=i;for(const n of t){if(r==null)return;if(!(n in r)){if(!e)return;r[n]={}}r=r[n]}return r}function rX(t,e,i){return e?Object.keys(e).reduce((r,n)=>{if(n==="__proto__")return r;let s=r[n],o=e[n];return s===o?r:s===void 0?(r[n]=z(o),r):(Array.isArray(o)||Array.isArray(r)?(s=s?Array.isArray(s)?r[n]=s.slice():r[n]=[s]:r[n]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(u=>{s.includes(u)||s.push(u)}):r[n]=o.slice())):o&&typeof o=="object"?r[n]=rX(s,o,i):r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[n]=o),r)},t||{}):t}function aHe(t,e){for(const i of Object.entries(t))if(e===i[1])return i[0]}function kI(t,e){return Object.values(t).includes(e)}const St={apiKey:void 0,apiKeys:{scopes:[]},applicationName:"",applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(Dz(St,globalThis.esriConfig,!0),delete St.has),!St.assetsPath){{const t="4.34";St.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}St.defaultAssetsPath=St.assetsPath}const wge=/\{([^}]+)\}/g;function Mq(t){return t??""}function ip(t,e){return e?t.replaceAll(wge,typeof e=="object"?(i,r)=>Mq(sx(r,e)):(i,r)=>Mq(e(r))):t}function lHe(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>e?.includes(i)?i:`\\${i}`)}function nX(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}let Aq;function uHe(t){return Aq??=new DOMParser,Aq.parseFromString(t||"","text/html").body.innerText||""}function cHe(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function dHe(t,...e){let i=t[0];for(let r=0;r<e.length;++r)i+=e[r]+t[r+1];return i}const Iq={info:0,warn:1,error:2,none:3};var br;let ie=(br=class{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,br._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=br.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,br._loggers.get(e)||new br({module:e})}_log(e,i,...r){if(this._matchLevel(e)){if(i!=="always"&&!br._throttlingDisabled){const n=Sge(r),s=this._loggedMessages[e].get(n);if(i==="once"&&s!=null||i==="oncePerTick"&&s&&s>=br._tickCounter)return;this._loggedMessages[e].set(n,br._tickCounter),br._scheduleTickCounterIncrement()}for(const n of St.log.interceptors)if(n(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,i){let r=this;for(;r!=null;){const n=r[e];if(n!=null)return n;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",_ge)}_matchLevel(e){const i=St.log.level||"warn";return Iq[this._parentWithMember("level",i)]<=Iq[e]}static _scheduleTickCounterIncrement(){br._tickCounterScheduled||(br._tickCounterScheduled=!0,Promise.resolve().then(()=>{br._tickCounter++,br._tickCounterScheduled=!1}))}},br._loggers=new Map,br._tickCounter=0,br._tickCounterScheduled=!1,br._throttlingDisabled=!1,br);function _ge(t,e,...i){console[t](`[${e}]`,...i)}function Sge(...t){return nX(JSON.stringify(t,(i,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}const xge={remove:()=>{}};function ut(t){return t?{remove(){t&&(t(),t=void 0)}}:xge}function sX(t){t.forEach(e=>e?.remove())}function uu(t){sX(t),t.length=0}function uo(t){return ut(()=>sX(t))}function pHe(t){return ut(()=>t()?.remove())}function $ge(t){return ut(()=>t?.abort())}function hHe(t){return ut(t!=null?()=>t.destroy():void 0)}function Tge(t){return typeof t=="object"&&!!t&&"remove"in t&&typeof t.remove=="function"}function fHe(t){Tge(t)&&t.remove()}function mHe(t){return{[Symbol.dispose](){t.remove()}}}function As(t){return t.__accessor__??null}function Ege(t,e){return t?.metadata?.[e]!=null}function ZE(t,e,i){return i?U3(t,e,{policy:i,path:""}):U3(t,e,null)}function U3(t,e,i){return e?Object.keys(e).reduce((r,n)=>{const s=n;if(s==="__proto__")return r;let o=null,u="merge";if(i&&(o=i.path?`${i.path}.${n}`:n,u=i.policy(o)),u==="replace"||u==="replace-arrays"&&Array.isArray(r[s]))return r[s]=e[s],r;if(r[s]===void 0)return r[s]=z(e[s]),r;let d=r[s],h=e[s];if(d===h)return r;if(Array.isArray(h)||Array.isArray(r))d=d?Array.isArray(d)?r[s]=d.slice():r[s]=[d]:r[s]=[],h&&(Array.isArray(h)||(h=[h]),h.forEach(m=>{d.includes(m)||d.push(m)}));else if(h&&typeof h=="object")if(i){const m=i.path;i.path=o,r[s]=U3(d,h,i),i.path=m}else r[s]=U3(d,h,null);else r.hasOwnProperty(n)&&!e.hasOwnProperty(n)||(r[s]=h);return r},t||{}):t}function oX(t){return Array.isArray(t)?t:t.split(".")}function kq(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function Mge(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...kq(i));return e}return kq(t)}function aX(t,e,i,r){const n=Mge(e);if(n.length!==1){const s=n.map(o=>r(t,o,i));return uo(s)}return r(t,n[0],i)}const Di={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128};let OI=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){this.accessed?.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const q3=new OI,O1=[];let L2=q3;function Ve(t){L2.onAccessed(t)}let JE=!1,YE=!1;function ic(t,e,i){if(JE)return Nz(t,e,i);let r=null;return lX(t),r=e.call(i),uX(),r}function Age(t,e){return ic(q3,t,e)}function Nz(t,e,i){const r=JE;JE=!0,lX(t);let n=null;try{n=e.call(i)}catch(s){YE&&ie.getLogger("esri.core.accessorSupport.tracking").error(s)}return uX(),JE=r,n}function lX(t){L2=t,O1.push(t)}function uX(){const t=O1.length;if(t>1){const e=O1.pop();L2=O1[t-2],e.onTrackingEnd()}else if(t===1){const e=O1.pop();L2=q3,e.onTrackingEnd()}else L2=q3}function cX(t,e){if(e.flags&Di.DepTrackingInitialized)return;e.flags|=Di.DepTrackingInitialized;const i=YE;YE=!1,e.flags&Di.AutoTracked?Nz(e.trackingTarget,e.metadata.get,t):dX(t,e),YE=i}const Ige=[];function dX(t,e){e.flags&Di.ExplicitlyTracking||(e.flags|=Di.ExplicitlyTracking,Nz(e.trackingTarget,()=>{const i=e.metadata.dependsOn||Ige;for(const r of i)if(typeof r!="string"||r.includes(".")){const n=oX(r);for(let s=0,o=t;s<n.length&&o!=null&&typeof o=="object";++s)o=Oq(o,n[s],s!==n.length-1)}else Oq(t,r,!1)}),e.flags&=-129)}function Oq(t,e,i){const r=e.endsWith("?")?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const n=As(t);if(n){const s=n.propertiesByName.get(r);s&&(Ve(s),cX(t,s))}return i?t[r]:void 0}let kge=class{constructor(e,i){this._observers=e,this._observer=i}remove(){kz(this._observers,this._observer)}},pX=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return Oge;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,n=!1;const s=i.length;for(let o=0;o<s;++o){const u=i[o];if(u.destroyed)n=!0;else if(u===e){r=!0;break}}return r||(i.push(e),n&&this._removeDestroyedObservers()),new kge(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let r=0;for(let n=0;n<i;++n){for(;n+r<i&&e[n+r].destroyed;)++r;if(r>0){if(!(n+r<i))break;e[n]=e[n+r]}}e.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const Oge=ut();let fw=class extends pX{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}},Cge=class{constructor(e,i){this._observable=new fw,this._value=e,this._equalityFunction=i}get value(){return Ve(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function My(t,e=tX){return new Cge(t,e)}let ox=class extends OI{constructor(e){super(new Rge(e)),this._observer&&Cq.register(this,new WeakRef(this._observer),this)}destroy(){this._observer&&Cq.unregister(this._observer),this.accessed?.clear(),this.clear(),this._observer?.destroy()}},Rge=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=Pge}};const Cq=new FinalizationRegistry(t=>{t.deref()?.destroy()});function Pge(){}function hX(){return new fw}function Dge(t){return new ox(t)}function fX(t){Ve(t)}function Nge(t,e){return ic(t,e)}const Lge=bf`:host{display:block;box-sizing:border-box;*,*:before,*:after{box-sizing:inherit}}:host([hidden]){display:none}:host(:not(arcgis-basemap-gallery-item,arcgis-layer-list-item,arcgis-print-custom-text-elements,arcgis-print-dpi-input,arcgis-print-export-button,arcgis-print-exported-link,arcgis-print-exports-panel,arcgis-print-format-select,arcgis-print-layout-advanced-options,arcgis-print-layout-panel,arcgis-print-main-panel,arcgis-print-map-only-advanced-options,arcgis-print-map-only-panel,arcgis-print-out-spatial-reference-input,arcgis-print-preview-input,arcgis-print-scale-section,arcgis-print-template-select,arcgis-print-template-selector,arcgis-labeled-switch,arcgis-measurement-content,arcgis-version-management-service-item,arcgis-version-management-version-item,arcgis-version-management-version-list,arcgis-version-management-version-properties,arcgis-video-player-action-bar,arcgis-video-player-actions-group,arcgis-video-player-controls-group,arcgis-video-player-metadata,arcgis-video-player-settings,arcgis-video-player-slider)){font-family:var(--calcite-font-family)}`,ax=nQ({defaultAssetPath:"https://js.arcgis.com/4.34/map-components/",hydratedAttribute:"hydrated",commonStyles:Lge}),{customElement:mX,getAssetPath:xHe,setAssetPath:$He}=ax;ax.t=fX;ax.o=hX;ax.c=Dge;ax.r=Nge;function CI(t){return jge(t)||yX(t)}function jge(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function yX(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function mw(t,e,i){if(!CI(t))throw new TypeError("target is not a Evented or EventTarget object");return yX(t)?zge(t,e,i):t.on(e,i)}function zge(t,e,i,r){if(Array.isArray(e)){const n=e.slice();for(const s of n)t.addEventListener(s,i,r);return ut(()=>{for(const s of n)t.removeEventListener(s,i,r)})}return t.addEventListener(e,i,r),ut(()=>t.removeEventListener(e,i,r))}function gX(t,e,i){if(!CI(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const r=mw(t,e,n=>{r.remove(),i.call(t,n)});return r}function vX(t,e){if(t==null)throw new Error(e??"value is None")}function at(t){return t?.destroy(),null}function THe(t){return t?.dispose(),null}function gi(t){return t?.remove(),null}function Cn(t){return t?.abort(),null}function EHe(t){return t?.release(),null}function Fge(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function Vge(t,e){let i;return t.some((r,n)=>(i=e(r,n),i!=null)),i??void 0}function Uge(t){return{setTimeout:(e,i)=>{const r=t.setTimeout(e,i);return ut(()=>t.clearTimeout(r))}}}const yw=Uge(globalThis);function qge(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,r)=>r===""?"$":(sx(r,e)??"").toString())}let bX=class{constructor(e,i,r=void 0){this.name=e,this.details=r,this.message=(i&&qge(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},L=class wX extends bX{constructor(e,i,r){super(e,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return z(i)}catch{return"[object]"}}))}}catch(e){throw ie.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new wX(e.name,e.message,e.details)}};L.prototype.type="error";function xt(t="Aborted"){return new L("AbortError",t)}function ft(t,e="Aborted"){if(Rn(t))throw xt(e)}function lx(t){return t instanceof AbortSignal?t:t?.signal??void 0}function Rn(t){const e=lx(t);return e!=null&&e.aborted}function Dl(t){if(Yr(t))throw t}function eD(t){if(!Yr(t))throw t}function Wa(t,e){const i=lx(t);if(i!=null){if(!i.aborted)return gX(i,"abort",()=>e());e()}}function Lz(t,e){const i=lx(t);if(i!=null)return ft(i),gX(i,"abort",()=>e(xt()))}function $S(t,e){return lx(e)==null?t:new Promise((i,r)=>{let n=Wa(e,()=>r(xt()));const s=()=>{n=gi(n)};t.then(s,s),t.then(i,r)})}function Yr(t){return t?.name==="AbortError"}async function Yd(t){try{return await t}catch(e){if(!Yr(e))throw e;return}}async function jz(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),r=i.map(o=>t[o]),n=await jz(r),s={};return i.map((o,u)=>s[o]=n[u]),s}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(r,n)=>{const s=i[n];return s.status==="fulfilled"?{promise:r,value:s.value}:{promise:r,error:s.reason}}))}async function Gge(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function AHe(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function zz(t,e=void 0,i){const r=new AbortController;return Wa(i,()=>r.abort()),new Promise((n,s)=>{let o=setTimeout(()=>{o=0,n(e)},t);Wa(r,()=>{o&&(clearTimeout(o),s(xt()))})})}function IHe(t,e,i,r){const n=i&&"abort"in i?i:null;r!=null||n||(r=i);let s=setTimeout(()=>{s=0,n?.abort()},e);const o=()=>r||new L("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");return t.then(u=>{if(s===0)throw o();return clearTimeout(s),u},u=>{throw clearTimeout(s),s===0?o():u})}function Bge(t,e){const i=new AbortController,r=setTimeout(()=>i.abort(),e);return Wa(t,()=>{i.abort(),clearTimeout(r)}),{...t,signal:i.signal}}function Kn(t){return t&&typeof t.then=="function"}function tD(t){return Kn(t)?t:Promise.resolve(t)}function RI(t,e=-1){let i,r,n,s,o=null;const u=(...d)=>{if(i){r=d,s&&s.reject(xt()),s=ao();const b=s.promise;if(o){const _=o;o=null,_.abort()}return b}if(n=s||ao(),s=null,e>0){const b=new AbortController;i=tD(t(...d,b.signal));const _=i;zz(e).then(()=>{i===_&&(s?b.abort():o=b)})}else i=1,i=tD(t(...d));const h=()=>{const b=r;r=n=i=o=null,b!=null&&u(...b)},m=i,v=n;return m.then(h,h),m.then(v.resolve,v.reject),v.promise};return u}function ao(){let t,e;const i=new Promise((n,s)=>{t=n,e=s}),r=n=>{t(n)};return r.resolve=n=>t(n),r.reject=n=>e(n),r.timeout=(n,s)=>yw.setTimeout(()=>r.reject(s),n),r.promise=i,r}function kHe(t,e){e.then(t.resolve,t.reject)}async function Rq(t){await Promise.resolve(),ft(t)}function Hge(t){return t?.release&&typeof t.release=="function"}function Wge(t){return t?.acquire&&typeof t.acquire=="function"}var ef;let gw=(ef=class{constructor(e,i,r,n=1,s=0){this._creator=e,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s;for(let o=0;o<s;o++)this._pool[o]=this._creator();this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...e){let i;if(ef.test.disabled)i=this._creator();else{if(this._pool.length===0){const r=this.allocationSize;for(let n=0;n<r;n++)this._pool[n]=this._creator()}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):Wge(i)&&i.acquire(...e),i}release(e){e&&!ef.test.disabled&&(this._releaseFunction?this._releaseFunction(e):Hge(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}},ef.test={disabled:!!q("esri-tests-disable-memory-pools")},ef);function Zge(t){t.length=0}let ws=class{constructor(e=50,i=50){this._pool=new gw(()=>[],void 0,Zge,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return jR.acquire()}static release(e){return jR.release(e)}static prune(){jR.prune()}};const jR=new ws(100);let _X=class extends gw{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const uT=[];function Lb(t){uT.push(t),uT.length===1&&queueMicrotask(()=>{const e=uT.slice();uT.length=0;for(const i of e)i()})}let j2=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};const G3=(t,e,i,r)=>{let n=e,s=e;const o=i>>>1,u=t[n-1];for(;s<=o;){s=n<<1,s<i&&r(t[s-1],t[s])<0&&++s;const d=t[s-1];if(r(d,u)<=0)break;t[n-1]=d,n=s}t[n-1]=u},SX=(t,e)=>t<e?-1:t>e?1:0;function Jge(t,e,i,r){i===void 0&&(i=t.length),r===void 0&&(r=SX);for(let s=i>>>1;s>e;s--)G3(t,s,i,r);const n=e+1;for(let s=i-1;s>e;s--){const o=t[e];t[e]=t[s],t[s]=o,G3(t,n,s,r)}}function*Yge(t,e,i,r){i===void 0&&(i=t.length),r===void 0&&(r=SX);for(let s=i>>>1;s>e;s--)G3(t,s,i,r),yield;const n=e+1;for(let s=i-1;s>e;s--){const o=t[e];t[e]=t[s],t[s]=o,G3(t,n,s,r),yield}}const Qge=1.5,Xge=1.1;let xX=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new GQ,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>Pq(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let r=0;r<this._length;r++){const n=this.data[r];e(n)&&i.push(n)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const r=this.data.indexOf(e,i);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let r=0;r<i;r++)this.data[this._length++]=e[r]}fill(e,i){for(let r=0;r<i;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,Pq(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=QP(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(QP(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,r){this.length=pge(this.data,e,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const r=this.data[e];this.data[e]=this.data[i],this.data[i]=r}sort(e){Jge(this.data,0,this.length,e)}iterableSort(e){return Yge(this.data,0,this.length,e)}some(e,i){for(let r=0;r<this.length;++r)if(e.call(i,this.data[r],r,this.data))return!0;return!1}find(e,i){const{data:r,length:n}=this;for(let s=0;s<n;++s)if(e.call(i,r[s]))return r[s]}filterInPlace(e,i){let r=0;for(let n=0;n<this._length;++n){const s=this.data[n];e.call(i,s,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(e,i){const{data:r,length:n}=this;for(let s=0;s<n;++s)e.call(i,r[s],s,r)}forEach(e,i){this.data.slice(0,this.length).forEach(e,i)}map(e,i){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=e.call(i,this.data[n],n,this.data);return r}reduce(e,i){let r=i;for(let n=0;n<this.length;++n)r=e(r,this.data[n],n,this.data);return r}has(e){const i=this.length,r=this.data;for(let n=0;n<i;++n)if(r[n]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function Pq(t){t.data.length>Qge*t.length&&(t.data.length=Math.floor(t.length*Xge))}function DHe(t){return t}function Kge(t){return 1e3*t}function NHe(t){return t}function LHe(t){return .001*t}let eve=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},tve=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},iD=0;const G_={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},rD=["prepare","preRender","render","postRender","update","finish"],nD=[],Ay=new xX;let ive=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,$X()}};function rve(){ay!=null&&(cancelAnimationFrame(ay),ay=requestAnimationFrame(Fz))}function $X(){ay==null&&(iD=performance.now(),ay=requestAnimationFrame(Fz))}const B3={frameTasks:Ay,willDispatch:!1,clearFrameTasks:nve,dispatch:EX,executeFrameTasks:sve,reschedule:rve};function vw(t){const e=new tve(t);return nD.push(e),B3.willDispatch||(B3.willDispatch=!0,Lb(EX)),e}function jb(t){const e=new eve(t);return Ay.push(e),$X(),new ive(e)}let ay=null;function nve(t=!1){Ay.forAll(e=>{e.removed=!0}),t&&TX()}function Fz(){const t=performance.now();ay=null,ay=Ay.some(i=>!i.paused&&!i.removed)?requestAnimationFrame(Fz):null,B3.executeFrameTasks(t)}function sve(t){const e=t-iD;iD=t;const i=1e3/60,r=Math.max(0,e-i);G_.time=t,G_.frameDuration=i-r;for(let n=0;n<rD.length;n++){const s=performance.now(),o=rD[n];Ay.forAll(u=>{u.paused||u.removed||(n===0&&u.ticks++,u.phases[o]&&(G_.elapsedFrameTime=performance.now()-t,G_.deltaTime=u.ticks===0?0:e,u.phases[o]?.call(u,G_)))}),uve[n].push(performance.now()-s)}TX(),cve.push(performance.now()-t)}const cT=new xX;function TX(){Ay.forAll(t=>{t.removed&&cT.push(t)}),Ay.removeUnorderedMany(cT.data,cT.length),cT.clear()}function EX(){for(;nD.length;){const t=nD.shift();t.isActive&&t.callback()}B3.willDispatch=!1}function ove(t=1,e){const i=ao(),r=()=>{Rn(e)?i.reject(xt()):t===0?i():(--t,Lb(()=>r()))};return r(),i.promise}function ave(t){return ove(1,t)}async function lve(t){await ave(t),await new Promise(e=>requestAnimationFrame(()=>{t?.aborted||e()}))}const uve=rD.map(t=>new j2(t)),cve=new j2("total");function MX(t,e){for(const i of t.values())if(e(i))return!0;return!1}function H3(t,e){if(!e)return t;for(const i of e)i!=null&&t.add(i);return t}function Dq(t,e){return e!=null&&t.add(e),t}function Vz(t,e){const i=new Set;return H3(i,t),H3(i,e),i}function AX(t,e){const i=new Set;for(const r of e)t.has(r)&&i.add(r);return i}function VHe(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const i of t)if(!e.has(i))return!1;return!0}function UHe(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function dve(t,e){const i=new Set(t);for(const r of e)i.delete(r);return i}function pve(t,e){return dve(Vz(t,e),AX(t,e))}let hve=0;function QE(){return++hve}function IX(t,e){const i=t.endsWith("?")?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const r=As(e);return Ege(r,i)?r.get(i):e[i]}function kX(t,e,i){if(t==null)return t;const r=IX(e[i],t);return!r&&i<e.length-1?void 0:i===e.length-1?r:kX(r,e,i+1)}function ux(t,e,i=0){return typeof e!="string"||e.includes(".")?kX(t,oX(e),i):IX(e,t)}function Fl(t,e){return ux(t,e)}function Nq(t,e){return ux(e,t)!==void 0}const Lo={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4};let z0=!1;const W3=[];function OX(t,e){let i=new ox(s),r=null,n=!1;function s(){if(!i||n)return;if(z0)return void PX(s);const u=r;i.clear(),z0=!0,n=!0,r=ic(i,t),n=!1,z0=!1,e(r,u),DX()}function o(){i&&(i.destroy(),i=null,r=null)}return n=!0,r=ic(i,t),n=!1,ut(o)}function CX(t,e){let i=new ox(n),r=null;function n(){e(r,o)}function s(){i&&(i.destroy(),i=null),r=null}function o(){return i?(i.clear(),r=ic(i,t),r):null}return o(),ut(s)}function RX(t,e){let i=!1,r=!1;const n=!!e?.sync;let s=new ox(()=>{i||r||(r=!0,n?o():queueMicrotask(o))});function o(){r=!1,s&&!i&&(z0?PX(o):(s.clear(),z0=!0,i=!0,ic(s,t),i=!1,z0=!1,DX()))}function u(){s&&(s.destroy(),s=null)}return i=!0,ic(s,t),i=!1,ut(u)}function PX(t){W3.includes(t)||W3.unshift(t)}function DX(){for(;W3.length;)W3.pop()()}var by;let Uz=(by=class{constructor(){this.uid=QE(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,r,n,s){return this.pool.acquire(0,e,i,r,n,s,Pz)}static acquireTracked(e,i,r,n){return this.pool.acquire(1,e,i,r,null,null,n)}notify(e,i){this.type===0?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,r,n,s,o,u){this.uid=QE(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=r,this.getValue=n,this.target=s,this.path=o,this.equals=u}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=QE(),this.removed=!0}},by.pool=new _X(()=>new by),by);const XE=new ws,Hd=new Set;let Z3;function J3(t){Hd.delete(t),Hd.add(t),NX()}function NX(){Z3||(Z3=vw(yve))}function fve(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function mve(t){for(const e of Hd.values())e.target===t&&(e.removed=!0)}function yve(){let t=10;for(;Z3&&t--;){Z3=null;const e=gve(),i=XE.acquire();for(const r of e){const n=r.uid;fve(r),n===r.uid&&r.removed&&i.push(r)}for(const r of Hd)r.removed&&(i.push(r),Hd.delete(r));for(const r of i)Uz.pool.release(r);XE.release(i),XE.release(e),sD.forEach(r=>r())}}function gve(){const t=XE.acquire();t.length=Hd.size;let e=0;for(const i of Hd)t[e]=i,++e;return Hd.clear(),t}const sD=new Set;function vve(t){return sD.add(t),ut(()=>sD.delete(t))}function bve(t,e,i){let r=aX(t,e,i,(n,s,o)=>{let u,d,h=CX(()=>ux(n,s),(m,v)=>{n.__accessor__?.lifecycle===Lo.DESTROYED||u&&u.uid!==d?r.remove():(u||(u=Uz.acquireUntracked(m,o,v,n,s),d=u.uid),J3(u))});return ut(()=>{h.remove(),u&&(u.uid!==d||u.removed||(u.removed=!0,J3(u)),u=null),r=h=null})});return r}function wve(t,e,i){const r=aX(t,e,i,(n,s,o)=>{let u=!1;return OX(()=>ux(n,s),(d,h)=>{n.__accessor__.lifecycle!==Lo.DESTROYED?u||(u=!0,Pz(h,d)||o.call(n,d,h,s,n),u=!1):r.remove()})});return r}function _ve(t,e,i,r=!1){return t.__accessor__&&t.__accessor__.lifecycle!==Lo.DESTROYED?r?wve(t,e,i):bve(t,e,i):ut()}function Sve(t,e,i){let r,n,s=CX(t,(o,u)=>{r&&r.uid!==n?s.remove():(r||(r=Uz.acquireTracked(o,e,u,i),n=r.uid),J3(r))});return ut(()=>{s.remove(),r&&(r.uid!==n||r.removed||(r.removed=!0,J3(r)),r=null),s=null})}function xve(t,e,i){let r=!1;return OX(t,(n,s)=>{r||(r=!0,i(s,n)||e(n,s),r=!1)})}function $ve(t,e,i=!1,r=tX){return i?xve(t,e,r):Sve(t,e,r)}function Lq(t){return MX(Hd,e=>e.oldValue===t)}function be(t,e,i={}){return qz(t,e,i,LX)}function Pn(t,e,i={}){return qz(t,e,i,jX)}function qz(t,e,i={},r){let n=null;const s=i.once?(o,u)=>{r(o)&&(gi(n),e(o,u))}:(o,u)=>{r(o)&&e(o,u)};if(n=$ve(t,s,i.sync,i.equals),i.initial){const o=t();s(o,o)}return n}function Wo(t,e,i,r={}){let n=null,s=null,o=null;function u(){n&&s&&(s.remove(),r.onListenerRemove?.(n),n=null,s=null)}function d(m){r.once&&r.once&&gi(o),i(m)}const h=be(t,(m,v)=>{u(),CI(m)&&(n=m,s=mw(m,e,d),r.onListenerAdd?.(m))},{sync:r.sync,initial:!0});return o=ut(()=>{h.remove(),u()}),o}function zb(t,e){return Tve(t,jX,e)}function Tve(t,e,i){if(Rn(i))return Promise.reject(xt());const r=t();if(e?.(r))return Promise.resolve(r);let n=null;function s(){n=gi(n)}return new Promise((o,u)=>{n=uo([Wa(i,()=>{s(),u(xt())}),qz(t,d=>{s(),o(d)},{sync:!1,once:!0},e??LX)])})}function LX(t){return!0}function jX(t){return!!t}function qHe(t,e,i={}){let r=!1;const n=be(t,(s,o)=>{r||e(s,o)},i);return{remove(){n.remove()},pause(){r=!0},resume(){r=!1}}}const Zo={sync:!0},Zr={initial:!0},Gt={sync:!0,initial:!0};function l(t,e,i,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,i,r);else for(var u=t.length-1;u>=0;u--)(o=t[u])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s}function GHe(t,e){return function(i,r){e(i,r,t)}}function BHe(t,e,i,r){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function u(m){try{h(r.next(m))}catch(v){o(v)}}function d(m){try{h(r.throw(m))}catch(v){o(v)}}function h(m){m.done?s(m.value):n(m.value).then(u,d)}h((r=r.apply(t,e||[])).next())})}function HHe(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,n;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],i&&(n=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");n&&(r=function(){try{n.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:i})}else i&&t.stack.push({async:!0});return e}var Eve=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var r=new Error(i);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function WHe(t){function e(s){t.error=t.hasError?new Eve(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var i,r=0;function n(){for(;i=t.stack.pop();)try{if(!i.async&&r===1)return r=0,t.stack.push(i),Promise.resolve().then(n);if(i.dispose){var s=i.dispose.call(i.value);if(i.async)return r|=2,Promise.resolve(s).then(n,function(o){return e(o),n()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return n()}function Mve(t,e){for(const i of t.values())if(e(i))return!0;return!1}function ZHe(t,e){for(const i of t.values())if(!e(i))return!1;return!0}function JHe(t,e){for(const i of t.values())if(e(i))return i;return null}function Wy(t,e,i){const r=t.get(e);if(r!==void 0)return r;const n=i();return t.set(e,n),n}function YHe(t){const e=new Map;return i=>(e.has(i)||e.set(i,t(i)),e.get(i))}const ly=()=>ie.getLogger("esri.core.accessorSupport.ensureTypes");function Ave(t){if(t==null)return t;const e=new Date(t);return isNaN(e.getTime())?(ly().error("Accessor#set",`Invalid date value: '${t}', falling back to current date`),new Date):e}function Ive(t){return t==null?t:!!t}function cx(t){return t==null?t:t.toString()}function _s(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function Gz(t){return t==null?t:Math.round(parseFloat(t))}function kve(t){return null}function Ove(t,e){return i=>{let r=t(i);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function zX(t){return t?.constructor&&t.constructor.__accessorMetadata__!==void 0}function Y3(t,e){return e!=null&&t&&!(e instanceof t)}function FX(t){return t&&"isCollection"in t}function jq(t){return t?.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function Cve(t,e){if(!e?.constructor||!FX(e.constructor))return oD(t,e)?e:new t(e);const i=jq(t.prototype.itemType),r=jq(e.constructor.prototype.itemType);return i?r?i===r?e:i.prototype.isPrototypeOf(r.prototype)?new t(e):(oD(t,e),e):new t(e):e}function oD(t,e){return!!zX(e)&&(ly().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+PI(t)+"'"),!0)}function bw(t,e){return e==null?e:FX(t)?Cve(t,e):Y3(t,e)?oD(t,e)?e:new t(e):e}function PI(t){return t?.prototype?.declaredClass||"unknown"}const Rve=new WeakMap;function Pve(t){switch(t){case Number:return e=>_s(e);case tt:return Gz;case Boolean:return Ive;case String:return cx;case Date:return Ave;case ww:return kve;default:return Wy(Rve,t,()=>bw.bind(null,t))}}function cr(t,e){const i=Pve(t);return arguments.length===1?i:i(e)}function TS(t,e,i){return arguments.length===1?TS.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,i)):[t(e,i)])}function Dve(t,e){return arguments.length===1?TS(i=>cr(t,i)):TS(i=>cr(t,i),e)}function VX(t,e,i){return e!==0&&Array.isArray(i)?i.map(r=>VX(t,e-1,r)):t(i)}function Q3(t,e,i){if(arguments.length===2)return s=>Q3(t,e,s);if(!i)return i;i=VX(t,e,i);let r=e,n=i;for(;r>0&&Array.isArray(n);)r--,n=n[0];if(n!==void 0)for(let s=0;s<r;s++)i=[i];return i}function Nve(t,e,i){return arguments.length===2?Q3(r=>cr(t,r),e):Q3(r=>cr(t,r),e,i)}function UX(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function aD(t,e){if(arguments.length===2)return aD(t).call(null,e);const i=new Set,r=t.filter(u=>typeof u!="function"),n=t.filter(u=>typeof u=="function");for(const u of t)typeof u!="string"&&typeof u!="number"||i.add(u);let s=null,o=null;return(u,d)=>{if(u==null)return u;const h=typeof u,m=h==="string"||h==="number";return m&&(i.has(u)||n.some(v=>h==="string"&&v===String||h==="number"&&v===Number))||h==="object"&&n.some(v=>!Y3(v,u))?u:(m&&r.length?(s||(s=r.map(v=>typeof v=="string"?`'${v}'`:`${v}`).join(", ")),ly().error("Accessor#set",`'${u}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof u=="object"&&n.length?(o||(o=n.map(v=>PI(v)).join(", ")),ly().error("Accessor#set",`'${u}' is not a valid value for this property, value must be one of ${o}`)):ly().error("Accessor#set",`'${u}' is not a valid value for this property`),d&&(d.valid=!1),null)}}function rc(t,e){if(arguments.length===2)return rc(t).call(null,e);const i={},r=[],n=[];for(const d in t.typeMap){const h=t.typeMap[d];i[d]=cr(h),r.push(PI(h)),n.push(d)}const s=()=>`'${r.join("', '")}'`,o=()=>`'${n.join("', '")}'`,u=typeof t.key=="string"?d=>d[t.key]:t.key;return d=>{if(t.base&&!Y3(t.base,d)||d==null)return d;const h=u(d)||t.defaultKeyValue,m=i[h];if(!m)return ly().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!Y3(t.typeMap[h],d))return d;if(typeof t.key=="string"&&!zX(d)){const v={};for(const b in d)b!==t.key&&(v[b]=d[b]);return m(v)}return m(d)}}let tt=class{},ww=class{};const KHe={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function Lve(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function qX(t){switch(t.type){case"native":return cr(t.value);case"array":return TS(qX(t.value));case"one-of":return jve(t);default:return null}}function jve(t){let e=null;return(i,r)=>uD(i,t)?i:(e==null&&(e=lD(t)),ly().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function lD(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case tt:return"integer";case Date:return"date";case ww:return"null";default:return PI(t.value)}case"array":return`array of ${lD(t.value)}`;case"one-of":{const e=t.values.map(i=>lD(i));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function uD(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case tt:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case ww:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!uD(i,e.value));case"one-of":return e.values.some(i=>uD(t,i))}}function _w(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const r in e)e[r]=z(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function dx(t,e){const i=_w(t);let r=i[e];return r||(r=i[e]={}),r}function zve(t,e){return ZE(t,e,Vve)}const Fve=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function Vve(t){return Fve.test(t)?"replace":"merge"}function X3(t,e,i){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))X3(t,r,e[r]);else{if(e.includes(".")){const n=e.split("."),s=n.splice(-1,1)[0];return void X3(Fl(t,n),s,i)}const r=t.__accessor__;r!=null&&Uve(e,r),t[e]=i}}function Uve(t,e){if(q("esri-unknown-property-errors")&&!qve(t,e))throw new L("set:unknown-property",Gve(t,e))}function qve(t,e){return e.metadata[t]!=null}function Gve(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}function p(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,i),n=dx(e,i);r&&(r.get||r.set?(n.get=r.get||n.get,n.set=r.set||n.set):"value"in r&&("value"in t&&ie.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),n.value=t.value=r.value)),t.readOnly!=null&&(n.readOnly=t.readOnly);const s=t.aliasOf;if(s){const d=typeof s=="string"?s:s.source,h=typeof s=="string"?null:s.overridable===!0;let m;n.dependsOn=[d],n.get=function(){let v=Fl(this,d);if(typeof v=="function"){m||(m=d.split(".").slice(0,-1).join("."));const b=Fl(this,m);b&&(v=v.bind(b))}return v},n.readOnly||(n.set=h?function(v){this._override(i,v)}:function(v){X3(this,d,v)})}const o=t.type,u=t.types;if(!n.cast){let d;o?d=Bve(o):u&&(d=Array.isArray(u)?TS(rc(u[0])):rc(u)),t.cast=Hve(t.cast,d)}zve(n,t),t.range&&(n.cast=Ove(n.cast,t.range))}}function Bz(t,e,i){const r=dx(t,i);r.json||(r.json={});let n=r.json;return e!==void 0&&(n.origins||(n.origins={}),n.origins[e]||(n.origins[e]={}),n=n.origins[e]),n}function Bve(t){let e=0,i=t;if(Lve(t))return qX(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const r=i;if(UX(r))return e===0?aD(r):Q3(aD(r),e);if(e===1)return Dve(r);if(e>1)return Nve(r,e);const n=t;return n.from?n.from:cr(n)}function Hve(t,e){if(t||e)return t?e?(i,r)=>e(t(i,r),r):t:e}const GX=Symbol("Accessor-beforeDestroy");function Wve(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(e[r]){const n=e[r];i[r].forEach(s=>{e[s]=n}),delete e[r]}}}let Jo=class extends bX{constructor(e,i,r){super(e,i,r)}};Jo.prototype.type="warning";function BX(t){return!!t&&t.prototype?.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}function Zve(t,e){return Hz(t,"any",e?.origin)}function K3(t,e){return Hz(t,"read",e?.origin)}function HX(t,e){return Hz(t,"write",e?.origin)}function Hz(t,e,i){let r=t?.json;if(r?.origins&&i){let n;n=i==="link-chart"?r.origins[i]&&(e==="any"||e in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],n&&(e==="any"||e in n)&&(r=n)}return r}const cD=()=>ie.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function zq(t,e,i){t&&(!i&&!e.read||e.read?.reader||e.read?.enabled===!1||Qve(t)&&ur("read.reader",Sw(t),e))}function Sw(t){const e=t.ndimArray??0;if(e>1)return Yve(t);if(e===1)return Fq(t);if("type"in t&&ZX(t.type)){const i=t.type.prototype?.itemType?.Type,r=Fq(typeof i=="function"?{type:i}:{types:i});return(n,s,o)=>{const u=r(n,s,o);return u&&new t.type(u)}}return Wz(t)}function Wz(t){return"type"in t?Jve(t.type):Xve(t.types)}function Jve(t){return t.prototype.read?(e,i,r)=>{if(e==null)return e;const n=typeof e;if(n!=="object")return void cD().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${n}'`);const s=new t;return s.read(e,r),s}:t.fromJSON}function WX(t,e,i,r){return r!==0&&Array.isArray(e)?e.map(n=>WX(t,n,i,r-1)):t(e,void 0,i)}function Yve(t){const e=Wz(t),i=WX.bind(null,e),r=t.ndimArray??0;return(n,s,o)=>{if(n==null)return n;n=i(n,o,r);let u=r,d=n;for(;u>0&&Array.isArray(d);)u--,d=d[0];if(d!==void 0)for(let h=0;h<u;h++)n=[n];return n}}function Fq(t){const e=Wz(t);return(i,r,n)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const u of i){const d=e(u,void 0,n);d!==void 0&&o.push(d)}return o}const s=e(i,void 0,n);return s!==void 0?[s]:void 0}}function ZX(t){if(!BX(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?Zz(e.Type):JX(e.Type))}function Qve(t){return"types"in t?JX(t.types):Zz(t.type)}function Zz(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||ZX(t))}function JX(t){for(const e in t.typeMap)if(!Zz(t.typeMap[e]))return!1;return!0}function Xve(t){let e=null;const i=t.errorContext??"type",r=t.validate;return(n,s,o)=>{if(n==null)return n;const u=typeof n;if(u!=="object")return void cD().error(`Expected JSON value of type 'object' to deserialize, but got '${u}'`);e||(e=e0e(t));const d=t.key;if(typeof d!="string")return;const h=n[Kve(d,e,o)],m=h?e[h]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!m){const b=`Type '${h||"unknown"}' is not supported`;return o?.messages&&n&&o.messages.push(new Jo(`${i}:unsupported`,b,{definition:n,context:o})),void cD().error(b)}const v=new m;return v.read(n,o),r?r(v):v}}function Kve(t,e,i){const r=Object.values(e)[0],n=_w(r.prototype)[t],s=K3(n,i),o=s?.read?.source;return o&&typeof o=="string"?o:t}function e0e(t){const e={};for(const i in t.typeMap){const r=t.typeMap[i],n=_w(r.prototype);if(typeof t.key=="function")continue;const s=n[t.key];if(!s)continue;if(s.json?.type&&Array.isArray(s.json.type)&&s.json.type.length===1&&typeof s.json.type[0]=="string"){e[s.json.type[0]]=r;continue}const o=s.json?.write;if(!o?.writer){e[i]=r;continue}const u=o.target,d=typeof u=="string"?u:t.key,h={};o.writer(i,h,d),h[d]&&(e[h[d]]=r)}return e}function t0e(t){if(t.json||(t.json={}),Uq(t.json),qq(t.json),Vq(t.json),t.json.origins)for(const e in t.json.origins)Uq(t.json.origins[e]),qq(t.json.origins[e]),Vq(t.json.origins[e]);return!0}function Vq(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function Uq(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function qq(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function Gq(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=t?.ndimArray??0;t&&(i===1||"type"in t&&BX(t.type))?e.write.writer=n0e:i>1?e.write.writer=s0e(i):e.types?Array.isArray(e.types)?e.write.writer=r0e(e.types[0]):e.write.writer=i0e(e.types):e.write.writer=ES}function i0e(t){return(e,i,r,n)=>e?YX(e,t,n)?ES(e,i,r,n):void 0:ES(e,i,r,n)}function YX(t,e,i){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(i?.messages){const r=e.errorContext??"type",n=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new L(`${r}:unsupported`,n,{definition:t,context:i})),ie.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function r0e(t){return(e,i,r,n)=>!e||!Array.isArray(e)?ES(e,i,r,n):ES(e.filter(s=>YX(s,t,n)),i,r,n)}function ES(t,e,i,r){ur(i,eA(t,r),e)}function eA(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?tA(t):t}function tA(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function n0e(t,e,i,r){let n;t===null?n=null:t&&typeof t.map=="function"?(n=t.map(s=>eA(s,r)),typeof n.toArray=="function"&&(n=n.toArray())):n=[eA(t,r)],ur(i,n,e)}function QX(t,e,i){return i!==0&&Array.isArray(t)?t.map(r=>QX(r,e,i-1)):eA(t,e)}function s0e(t){return(e,i,r,n)=>{let s;if(e===null)s=null;else{s=QX(e,n,t);let o=t,u=s;for(;o>0&&Array.isArray(u);)o--,u=u[0];if(u!==void 0)for(let d=0;d<o;d++)s=[s]}ur(r,s,i)}}function o0e(t){const e=a0e(t);if(t.json.origins)for(const i in t.json.origins){const r=t.json.origins[i],n=r.types?l0e(r):e;zq(n,r,!1),r.types&&!r.write&&t.json.write?.enabled&&(r.write={...t.json.write}),Gq(n,r)}zq(e,t.json,!0),Gq(e,t.json)}function a0e(t){return t.json.types?dD(t.json):t.type?XX(t):dD(t)}function l0e(t){return t.type?XX(t):dD(t)}function XX(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!UX(i);)i=i[0],e++;return{type:i,ndimArray:e}}function dD(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function u0e(t){t0e(t)&&(Wve(t),o0e(t))}const zR=new Set,FR=new Set;function M(t){return e=>{t??="esri.core.Accessor",e.prototype.declaredClass=t,d0e(e);const i=[],r=[];let n=e.prototype;for(;n;)n.hasOwnProperty("initialize")&&!zR.has(n.initialize)&&(zR.add(n.initialize),i.push(n.initialize)),n.hasOwnProperty("destroy")&&!FR.has(n.destroy)&&(FR.add(n.destroy),r.push(n.destroy)),n=Object.getPrototypeOf(n);zR.clear(),FR.clear();const s=class extends e{constructor(...u){if(super(...u),this.constructor===s&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let d=i.length-1;d>=0;d--)i[d].call(this)}}),r.length){let d=!1;const h=this[GX];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!d){this.__accessor__.lifecycle=Lo.DESTROYING,d=!0,h.call(this);for(let m=0;m<r.length;m++)r[m].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=_w(e.prototype),s.prototype.declaredClass=t;const o=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:o,configurable:!0}),s}}function c0e(t,e){return e.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r===void 0)return;i.mutable&&Ve(r);const n=i.store;return n.has(t)?n.get(t):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r!==void 0)return r.getComputed(i)}}function d0e(t){const e=t.prototype,i=_w(e),r={};for(const n of Object.getOwnPropertyNames(i)){const s=i[n];u0e(s),r[n]={enumerable:!0,configurable:!0,get:c0e(n,s),set(o){const u=this.__accessor__;if(u!==void 0){if(u.mutable)return u.initialized&&s.readOnly?Bq("read-only",n):u.lifecycle===Lo.CONSTRUCTED&&s.constructOnly?Bq("construct-only",n):void u.set(n,o)}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,r)}const Bq=(t,e)=>{ie.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)},p0e="modulepreload",h0e=function(t){return"/my-project/dist/"+t},Hq={},H=function(e,i,r){let n=Promise.resolve();if(i&&i.length>0){let d=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=o?.nonce||o?.getAttribute("nonce");n=d(i.map(h=>{if(h=h0e(h),h in Hq)return;Hq[h]=!0;const m=h.endsWith(".css"),v=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const b=document.createElement("link");if(b.rel=m?"stylesheet":p0e,m||(b.as="script"),b.crossOrigin="",b.href=h,u&&b.setAttribute("nonce",u),document.head.appendChild(b),m)return new Promise((_,x)=>{b.addEventListener("load",_),b.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return n.then(o=>{for(const u of o||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})},Wq=new WeakMap;function f0e(t,e,i=!1){const r=` DEPRECATED - ${e}`;if(!i)return void t.warn(r);let n=Wq.get(t);n||(n=new Set,Wq.set(t,n)),n.has(e)||(n.add(e),t.warn(r))}const iA="https://www.esriurl.com/";function m0e(t,e,i,r={}){q("esri-deprecation-warnings")&&of(t,`This widget is deprecated. Use the ${e} component instead.`,{see:[`${e} component reference: ${iA}${i}/`,`Esri's move to web components: ${iA}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function y0e(t,e,i,r={}){q("esri-deprecation-warnings")&&of(t,`This view model is deprecated. Use the ${e} component directly instead.`,{see:[`${e} component reference: ${iA}${i}/`,`Esri's move to web components: ${iA}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function tWe(t,e,i={}){q("esri-deprecation-warnings")&&of(t,`Module: ${e}`,i)}function KX(t,e,i={}){if(q("esri-deprecation-warnings")){const{moduleName:r}=i;of(t,`Function: ${(r?r+"::":"")+e+"()"}`,i)}}function pD(t,e,i={}){if(q("esri-deprecation-warnings")){const{moduleName:r}=i;of(t,`Property: ${(r?r+"::":"")+e}`,i)}}function g0e(t,e,i={}){q("esri-deprecation-warnings")&&of(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...i})}function of(t,e,i={}){if(q("esri-deprecation-warnings")){const{replacement:r,version:n,see:s,warnOnce:o}=i;let u=e;if(r&&(u+=`
	 Replacement: ${r}`),n&&(u+=`
	 Version: ${n}`),s)if(Array.isArray(s)){u+=`
	 See for more details:`;for(const d of s)u+=`
		${d}`}else u+=`
	 See ${s} for more details.`;f0e(t,u,o)}}function iWe(t){const e=[];return function*(){yield*e;let i,r=e.length;for(;!(i=t.next()).done;)for(e.push(i.value),yield i.value;++r<e.length;)yield e[r]}}function v0e(t,e){for(const i of t)if(i!=null&&e(i))return i}function Fb(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let xw=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(Fb(e)){const r=this._getOrCreateGroup(i);for(const n of e)Jq(n)&&r.push(n)}else Jq(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(dT(e))}remove(e){if(typeof e!="string"&&Fb(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(Zq(this._getGroup(e)),this._groups.delete(dT(e)),this):this}removeAll(){return this._groups.forEach(Zq),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(dT(e),i),i}_getGroup(e){return this._groups.get(dT(e))}};function dT(t){return t||"_default_"}function Zq(t){for(const e of t)e instanceof xw?e.removeAll():e.remove()}function Jq(t){return t!=null&&(!!t.remove||t instanceof xw)}let Yq=class extends pX{constructor(e,i){super(),this.propertyName=e,this.metadata=i,this.trackingTarget=new OI(this),this.flags=0,this.flags=Di.Dirty|(i.nonNullable?Di.NonNullable:0)|(i.hasOwnProperty("value")?Di.HasDefaultValue:0)|(i.get===void 0?Di.DepTrackingInitialized:0)|(i.dependsOn===void 0?Di.AutoTracked:0)}destroy(){this.flags&Di.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&Ve(this);const i=e.store,r=this.propertyName,n=this.flags,s=i.get(r);if(n&Di.Computing||~n&Di.Dirty&&i.has(r))return s;this.flags|=Di.Computing;const o=e.host;let u;n&Di.AutoTracked?u=ic(this.trackingTarget,this.metadata.get,o):(dX(o,this),u=this.metadata.get.call(o)),this.flags|=Di.DepTrackingInitialized,i.set(r,u,1);const d=i.get(r);return d===s?this.flags&=-2:Age(this.commit,this),this.flags&=-5,d}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&Di.Overridden&&(this.flags|=Di.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onCommitted()}}};const hD=8;function qd(t){switch(t){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"link-chart":return 6;case"user":return 7;default:return null}}function MS(t){switch(t){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"link-chart";case 7:return"user"}}function b0e(t){return MS(t)}let w0e=class eK{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new eK;return this._values.forEach((r,n)=>{e&&e.has(n)||i.set(n,z(r))}),i}get(e){return this._values.get(e)}originOf(){return 7}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}isAtOrigin(e,i){return this.has(e)}isBelowOrigin(e,i){return!this.has(e)}forEach(e){this._values.forEach(e)}};function Wg(t,e,i){return t!==void 0}function Qq(t,e,i,r){return t!==void 0&&(!(i==null&&t.flags&Di.NonNullable)||(r.lifecycle,!1))}let _0e=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Lo.INITIALIZING,this.store=new w0e,this.mutable=!0,this._origin=7;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const n=new Yq(r,i[r]);this.propertiesByName.set(r,n)}this.metadata=i}initialize(){this.lifecycle=Lo.CONSTRUCTING}constructed(){this.lifecycle=Lo.CONSTRUCTED}destroy(){this.lifecycle=Lo.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==Lo.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(!Wg(i))return;if(i.metadata.get)return i.getComputed(this);this.mutable&&Ve(i);const r=this.store;return r.has(e)?r.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.flags&Di.HasDefaultValue)return"defaults"}return MS(i)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(Wg(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const r=this.propertiesByName.get(e);Wg(r)&&this._internalSet(r,i)}getDependsInfo(e,i,r){const n=this.propertiesByName.get(i);if(!Wg(n))return"";const s=new OI,o=ic(s,()=>n.metadata.get?.call(e));let u=`${r}${e.declaredClass.split(".").pop()}.${i}: ${o}
`;const d=s.accessed??new Set;if(d.size===0)return u;r+="  ";for(const h of d)h instanceof Yq&&(u+=`${r}${h.propertyName}: undefined
`);return u}setAtOrigin(e,i,r){const n=this.propertiesByName.get(e);if(Wg(n))return this._setAtOrigin(n,i,r)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.flags&Di.Overridden)}clearOrigin(e,i){const r=this.store,n=this.propertiesByName.get(e);if(!Wg(n))return;const s=r.isAtOrigin(e,i)&&!(n.flags&Di.Overridden);r.delete(e,i),s&&n.notifyChange()}clearOverride(e){const i=this.propertiesByName.get(e);i&&i.flags&Di.Overridden&&(i.flags&=-3,i.notifyChange())}override(e,i){const r=this.propertiesByName.get(e);if(!Qq(r,e,i,this))return;const n=r.metadata.cast;if(n){const s=this._cast(n,i),{valid:o,value:u}=s;if(VR.release(s),!o)return;i=u}r.flags|=Di.Overridden,this._internalSet(r,i)}set(e,i){const r=this.propertiesByName.get(e);if(!Qq(r,e,i,this))return;const n=r.metadata.cast;if(n){const o=this._cast(n,i),{valid:u,value:d}=o;if(VR.release(o),!u)return;i=d}const s=r.metadata.set;s?s.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(e){this._origin=qd(e)}getDefaultOrigin(){return MS(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const r=this.lifecycle!==Lo.INITIALIZING?this._origin:0;this._setAtOrigin(e,i,r)}_setAtOrigin(e,i,r){const n=this.store,s=e.propertyName;if(n.isAtOrigin(s,r)&&Pz(i,n.get(s))&&~e.flags&Di.Overridden)return;const o=n.isBelowOrigin(s,r)||n.isAtOrigin(s,r);o&&e.invalidate(),n.set(s,i,r),o&&e.commit(),cX(this.host,e)}_cast(e,i){const r=VR.acquire();return r.valid=!0,r.value=i,e&&(r.value=e.call(this.host,i,r)),r}},S0e=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const VR=new gw(()=>new S0e);let x0e;function $0e(){return x0e}var Xq,Kq;function T0e(t){if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor?.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const zp=Symbol("Accessor-Handles"),UR=Symbol("Accessor-Initialized");var tf;let _e=(tf=class{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:n}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class o extends s{constructor(...d){super(...d),this.inherited=null,n&&n.apply(this,d)}}_w(o.prototype);for(const u in e){const d=e[u];o.prototype[u]=typeof d=="function"?function(...h){const m=this.inherited;let v;this.inherited=function(...b){if(s.prototype[u])return s.prototype[u].apply(this,b)};try{v=d.apply(this,h)}catch(b){throw this.inherited=m,b}return this.inherited=m,v}:e[u]}for(const u in i){const d=T0e(i[u]);p(d)(o.prototype,u)}return M(r)(o)}static freeze(e){return e instanceof tf?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof tf?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){if(this[Xq]=null,this[Kq]=!1,this.constructor===tf)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new _0e(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&(i.ctorArgs=this.normalizeCtorArgs?.apply(this,e)??e[0])}postscript(){const e=this.__accessor__,i=e.ctorArgs;e.initialize(),i&&(this.set(i),e.ctorArgs=null),e.constructed(),this.initialize(),this[UR]=!0}initialize(){}[GX](){this[zp]=at(this[zp])}destroy(){this.destroyed||(mve(this),this.__accessor__.destroy(),$0e()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[UR]}get destroyed(){return this.__accessor__?.lifecycle===Lo.DESTROYED||!1}get destroying(){return this.__accessor__?.lifecycle===Lo.DESTROYING||!1}commitProperty(e){Fl(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return X3(this,e,i),this}watch(e,i,r){return KX(ie.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),_ve(this,e,i,r)}addHandles(e,i){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const n of r)n.remove();return}(this[zp]??=new xw).add(e,i)}removeHandles(e){this[zp]?.remove(e)}removeAllHandles(){this[zp]?.removeAll()}removeHandlesReference(e){this[zp]?.removeReference(e)}hasHandles(e){return this[zp]?.has(e)===!0}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}},Xq=zp,Kq=UR,tf);const E0e=Symbol("ClonableMixin"),Re=t=>{var n;var e;const i=t;let r=(n=class extends i{constructor(){super(...arguments),this[e]=!0}clone(s){const o=As(this);vX(o,"unable to clone instance of non-accessor class");const u=o.metadata,d=o.store,h={},m=new Map;for(const b in u){const _=u[b],x=d?.originOf(b),$=_.clonable;if(_.readOnly||$===!1||x!==7&&x!==0&&x!==5&&x!==4)continue;const E=this[b];let A=null;if(typeof $=="function")A=$(E,s);else if($==="reference")A=E;else if(A=KP(E,s),E!=null&&A==null)continue;x===0?m.set(b,A):h[b]=A}const v=new(Object.getPrototypeOf(this)).constructor(h);if(m.size){const b=As(v)?.store;if(b)for(const[_,x]of m)b.set(_,x,0)}return v}},e=E0e,n);return r=l([M("esri.core.Clonable")],r),r},Jz=Re(_e);let cm=class extends Jz{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};l([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],cm.prototype,"row",void 0),l([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],cm.prototype,"column",void 0),l([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],cm.prototype,"rows",void 0),l([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],cm.prototype,"columns",void 0),cm=l([M("esri.CameraLayout")],cm);const tK=cm,eG=new Float32Array(1);function lWe(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function Qr(t,e,i){return Math.min(Math.max(t,e),i)}function uWe(t){return!(t&t-1)}function cWe(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function Vl(t,e,i){return t+(e-t)*i}function dWe(t,e,i,r,n){return Vl(r,n,(t-e)/(i-e))}function $w(t){return t*Math.PI/180}function iK(t){return 180*t/Math.PI}function pWe(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function Yz(t){return Math.acos(Qr(t,-1,1))}function Qz(t){return Math.asin(Qr(t,-1,1))}function ro(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}function rK(t,e,i=1e-6){return!ro(t,e,i)&&t>e}function fD(t,e,i=1e-6){return!ro(t,e,i)&&t<e}function M0e(t,e,i=1e-6){return ro(t,e,i)||t>e}const rA=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function mD(t){return rA.setFloat64(0,t),rA.getBigInt64(0)}function A0e(t){return rA.setBigInt64(0,t),rA.getFloat64(0)}const KE=1000000n,I0e=nK(1);function nK(t){const e=mD(t=Math.abs(t)),i=A0e(e<=KE?KE:e-KE);return Math.abs(t-i)}function k0e(t,e,i=I0e){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(i!=null&&nK(Math.min(Math.abs(t),Math.abs(e)))<i)return Math.abs(t-e)<=i;const r=mD(t),n=mD(e);return r<0!=n<0?!1:!((r<n?n-r:r-n)>KE)}function sK(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const r=Math.abs(t-e),n=Math.abs(t),s=Math.abs(e);if(t===0||e===0||n<1e-12&&s<1e-12){if(r>.01*i)return!1}else if(r/(n+s)>i)return!1;return!0}function hWe(t){return oK(Math.max(-tG,Math.min(t,tG)))}function oK(t){return eG[0]=t,eG[0]}function fWe(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(ro(e,1)&&ro(i,1)&&ro(r,1))}function mWe(t,e){return(t%e+e)%e}const tG=oK(34028234663852886e22);function yWe(t,e,i){if(i===void 0||+i==0)return Math[t](e);if(e=+e,i=+i,isNaN(e)||typeof i!="number"||i%1!=0)return NaN;let r=e.toString().split("e");return r=(e=Math[t](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+i:i))}let DI=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}normalize(e,i=0,r=!1){return iG(this.range,this.min,this.max,e,i,r)}clamp(e,i=0){return Qr(e-i,this.min,this.max)+i}monotonic(e,i,r){return e<i?i:i+yD(this.range,e-i,r)}minimalMonotonic(e,i,r){return iG(this.range,e,e+this.range,i,r)}center(e,i,r){return i=this.monotonic(e,i,r),this.normalize((e+i)/2,r)}diff(e,i,r){return this.monotonic(e,i,r)-e}shortestSignedDiff(e,i){e=this.normalize(e);const r=(i=this.normalize(i))-e,n=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(r)<Math.abs(n)?r:n}contains(e,i,r){return i=this.minimalMonotonic(e,i),(r=this.minimalMonotonic(e,r))>e&&r<i}};function iG(t,e,i,r,n=0,s=!1){return(r-=n)<e?r+=yD(t,e-r):r>i&&(r-=yD(t,r-i)),s&&r===i&&(r=e),r+n}function yD(t,e,i=0){return Math.ceil((e-i)/t)*t+i}const vWe=new DI(0,2*Math.PI),bWe=new DI(-Math.PI,Math.PI),aK=new DI(0,360);let O0e=class lK{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new lK;return this._values.forEach((r,n)=>{e&&e.has(n)||i.set(n,z(r.value),r.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const r=this._values.get(e);return i==null||r?.origin===i?r?.value:void 0}originOf(e){return this._values.get(e)?.origin??7}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(r=>this._values.get(r)?.origin===e)}set(e,i,r){if((r=this._normalizeOrigin(r))===0){const n=this._values.get(e);if(n?.origin!=null&&n.origin>r)return}this._values.set(e,new C0e(i,r))}delete(e,i){(i=this._normalizeOrigin(i))!=null&&this._values.get(e)?.origin!==i||this._values.delete(e)}has(e,i){return(i=this._normalizeOrigin(i))!=null?this._values.get(e)?.origin===i:this._values.has(e)}isAtOrigin(e,i){return i=this._normalizeOrigin(i),this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return i=this._normalizeOrigin(i),!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(({value:i},r)=>e(i,r))}_normalizeOrigin(e){if(e!=null)return e===0?e:7}},C0e=class{constructor(e,i){this.value=e,this.origin=i}};function uK(t,e,i){e.keys().forEach(n=>{i.set(n,e.get(n),0)});const r=t.metadata;Object.keys(r).forEach(n=>{t.internalGet(n)&&i.set(n,t.internalGet(n),0)})}function R0e(t,e,i){if(!t?.read||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.startsWith(e)&&Nq(r,i))return!0}else for(const n of r)if(n===e||n.includes(".")&&n.startsWith(e)&&Nq(n,i))return!0;return!1}function P0e(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function D0e(t,e,i,r,n){let s=K3(e[i],n);P0e(s)&&(t[i]=!0);for(const o of Object.getOwnPropertyNames(e))s=K3(e[o],n),R0e(s,i,r)&&(t[o]=!0)}function N0e(t,e,i,r){const n=i.metadata,s=Zve(n[e],r),o=s?.default;if(o===void 0)return;const u=typeof o=="function"?o.call(t,e,r):o;u!==void 0&&i.set(e,u)}const cK={origin:"service"};function dK(t,e,i=cK){if(!e||typeof e!="object")return;const r=As(t),n=r.metadata,s={};for(const o of Object.getOwnPropertyNames(e))D0e(s,n,o,e,i);r.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(s)){const u=K3(n[o],i).read,d=u?.source;let h;h=d&&typeof d=="string"?ux(e,d):e[o],u?.reader&&(h=u.reader.call(t,h,e,i)),h!==void 0&&r.set(o,h)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))s[o]||N0e(t,o,r,i)}r.setDefaultOrigin("user")}function pK(t,e,i,r=cK){const n={...r,messages:[]};i(n),n.messages?.forEach(s=>{s.type!=="warning"||t.loaded?r?.messages&&r.messages.push(s):t.loadWarnings.push(s)})}function L0e(t,e,i,r,n){const s={};return e.write?.writer?.call(t,r,s,i,n),s}function hK(t,e,i,r,n,s){if(!r?.write)return!1;const o=Fl(t,i);if(!n&&r.write.overridePolicy){const u=r.write.overridePolicy.call(t,o,i,s??void 0);u!==void 0&&(n=u)}if(n||(n=r.write),!n||n.enabled===!1||n.layerContainerTypes&&s?.layerContainerType&&!n.layerContainerTypes.includes(s.layerContainerType))return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const u=new L("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return u&&s?.messages?s.messages.push(u):u&&!s&&ie.getLogger("esri.core.accessorSupport.write").error(u.name,u.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===0)&&j0e(t,i,s,r,o)||!n.ignoreOrigin&&s?.origin&&e.store.multipleOriginsSupported&&e.store.originOf(i)<qd(s.origin))}function j0e(t,e,i,r,n){const s=r.default;if(s===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const o=s.call(t,e,i??void 0);return nx(o,n)}return!1}return s===n}function z0e(t,e,i,r){const n=As(t),s=n.metadata,o=HX(s[e],r);return!!o&&hK(t,n,e,o,i,r)}function fK(t,e,i){if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return ZE(e,t.toJSON(i));const r=As(t),n=r.metadata;for(const s in n){const o=HX(n[s],i);if(!hK(t,r,s,o,void 0,i))continue;const u=Fl(t,s),d=L0e(t,o,o.write&&typeof o.write.target=="string"?o.write.target:s,u,i);Object.keys(d).length>0&&(e=ZE(e,d),i?.resources?.pendingOperations?.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>ZE(e,d,()=>"replace-arrays"))),i?.writtenProperties&&i.writtenProperties.push({target:t,propName:s,oldOrigin:b0e(r.store.originOf(s)),newOrigin:i.origin}))}return e}const rp=t=>{const e=t;let i=class extends e{constructor(...r){super(...r);const n=As(this),s=n.store,o=new O0e;n.store=o,uK(n,s,o)}read(r,n){dK(this,r,n)}write(r,n){return fK(this,r??{},n)}toJSON(r){return this.write({},r)}static fromJSON(r,n){return F0e.call(this,r,n)}};return i=l([M("esri.core.JSONSupport")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function F0e(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}const B=rp(_e),V0e=Object.prototype.toString;function U0e(t){const e="__accessorMetadata__"in t?cr(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return q0e.apply(this,i)}}function q0e(t,e,i,r){dx(t,e).cast=r}function G0e(t){return(e,i)=>{dx(e,t).cast=e[i]}}function Ct(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&V0e.call(t[0])==="[object Function]"?U0e(t[0]):t.length===1&&typeof t[0]=="string"?G0e(t[0]):void 0}function se(t,e,i){let r,n;return e===void 0||Array.isArray(e)?(n=t,i=e,r=[void 0]):(n=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const u=s.constructor.prototype;r.forEach(d=>{const h=Bz(s,d,n);h.read&&typeof h.read=="object"||(h.read={}),h.read.reader=u[o],i&&(h.read.source=(h.read.source||[]).concat(i))})}}function pe(t,e,i){let r,n;return e===void 0?(n=t,r=[void 0]):typeof e!="string"?(n=t,r=[void 0],i=e):(n=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const u=s.constructor.prototype;for(const d of r){const h=Bz(s,d,n);h.write&&typeof h.write=="object"||(h.write={}),i&&(h.write.target=i),h.write.writer=u[o]}}}let Be=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=B0e(e),this.apiValues=rG(this._apiToJSON),this.jsonValues=rG(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,n,s)=>{const o=this.toJSON(r);o!==void 0&&ur(s,o,n)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?null:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function B0e(t){const e={};for(const i in t)e[t[i]]=i;return e}function rG(t){const e=[];for(const i in t)e.push(i);return e.sort(),e}function Fr(){return function(t,e){return new Be(t,{ignoreUnknown:!0,...e})}}let Xz=class{constructor(e,i,r,n,s,o){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=n,this.scaleHeight=s;const u=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*u,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Ji=new Xz(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Ju=new Xz(3396190,1/169.8944472236118,23e4,6e4,.111),af=new Xz(1737400,0,0,0,0);function AS(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}const H0e=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,W0e={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function nG(t){const e=t?.match(H0e);if(!e)return null;const[,i,r,n]=e;if(!i)return null;let s=null,o=null,u=null;const{devext:d,qaext:h,www:m}=W0e;if(r)if(s=i,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:u}=d);break;case"qa":({customBaseUrl:o,portalHostname:u}=h);break;default:return null}else({customBaseUrl:o,portalHostname:u}=m);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:u}=d);break;case"qaext":({customBaseUrl:o,portalHostname:u}=h);break;case"www":({customBaseUrl:o,portalHostname:u}=m);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:u,urlKey:s}}function mK(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function yK(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):i.test(t)?t=t.replace(i,"https://devext.arcgis.com"):r.test(t)&&(t=t.replace(r,"https://qaext.arcgis.com")),t}function gK(t){const e=atob(t),i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i.buffer}function Z0e(t){const e=new Uint8Array(t);let i="";for(let r=0;r<e.length;r++)i+=String.fromCharCode(e[r]);return btoa(i)}const J0e=()=>ie.getLogger("esri.core.urlUtils"),Tw=St.request,sG="esri/config: esriConfig.request.proxyUrl is not set.",vK=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,bK=/^\s*http:/i,Y0e=/^\s*https:/i,Q0e=/^\s*file:/i,wK=/:\d+$/,X0e=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,K0e=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ebe=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let uy=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(K0e);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(ebe),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const pT={},tbe=new uy(St.applicationUrl);let Yn=tbe;const ibe=rbe();let Kz=ibe;const e6=()=>Yn,$We=()=>Kz;function rbe(){const t=Yn.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${Yn.scheme}://${Yn.host}${Yn.port!=null?`:${Yn.port}`:""}`}${e}`}function Xr(t){if(!t)return null;const e={path:null,query:null},i=new uy(t),r=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.slice(0,r),e.query=t6(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.slice(0,e.path.length-(i.fragment.length+1)))),e}function t6(t){const e=t.split("&"),i={};for(const r of e){if(!r)continue;const n=r.indexOf("=");let s,o;n<0?(s=decodeURIComponent(r),o=""):(s=decodeURIComponent(r.slice(0,n)),o=decodeURIComponent(r.slice(n+1)));let u=i[s];typeof u=="string"&&(u=i[s]=[u]),Array.isArray(u)?u.push(o):i[s]=o}return i}function IS(t,e){return t?Object.keys(t).map(i=>{const r=t[i];if(r==null)return"";const n=encodeURIComponent(i)+"=",s=e?.[i];return s?n+encodeURIComponent(s(r)):Array.isArray(r)?r.map(o=>AS(o)?n+encodeURIComponent(JSON.stringify(o)):n+encodeURIComponent(o)).join("&"):AS(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function _K(t=!1){let e,i=Tw.proxyUrl;if(typeof t=="string"){e=TK(t);const r=NI(t);r&&(i=r.proxyUrl)}else e=!!t;if(!i)throw J0e().warn(sG),new L("urlUtils:proxy-not-set",sG);return e&&vD()&&(i=o6(i)),Xr(i)}function TWe(t,e=!1){const i=NI(t);let r,n;if(i){const s=i6(i.proxyUrl);r=s.path,n=s.query?t6(s.query):null}else if(e){const s=_K(t);r=s.path,n=s.query}if(r){const s=Xr(t);t=r+"?"+s.path;const o=IS({...n,...s.query});o&&(t=`${t}?${o}`)}return t}const B_={path:"",query:""};function i6(t){const e=t.indexOf("?");return e!==-1?(B_.path=t.slice(0,e),B_.query=t.slice(e+1)):(B_.path=t,B_.query=null),B_}function SK(t){return t=(t=sA(t=mbe(t=i6(t).path),!0)).toLowerCase()}function nbe(t){const e={proxyUrl:t.proxyUrl,urlPrefix:SK(t.urlPrefix)},i=Tw.proxyRules,r=e.urlPrefix;let n=i.length;for(let s=0;s<i.length;s++){const o=i[s].urlPrefix;if(r.startsWith(o)){if(r.length===o.length)return-1;n=s;break}o.startsWith(r)&&(n=s+1)}return i.splice(n,0,e),n}function NI(t){const e=Tw.proxyRules,i=SK(t);for(let r=0;r<e.length;r++)if(i.startsWith(e[r].urlPrefix))return e[r]}function sbe(t,e){if(!t||!e)return!1;t=nA(t),e=nA(e);const i=nG(t),r=nG(e);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&Yu(t,e,!0)}function xK(t,e){return t=nA(t),e=nA(e),sA(t)===sA(e)}function nA(t){const e=(t=Zl(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function gD(t,e=Tw.interceptors){const i=r=>r instanceof RegExp?r.test(t):typeof r=="string"?t.startsWith(r):r==null;if(e){for(const r of e)if(Array.isArray(r.urls)){if(r.urls.some(i))return r}else if(i(r.urls))return r}return null}function Yu(t,e,i=!1){if(!t||!e)return!1;const r=wD(t),n=wD(e);return!(!i&&r.scheme!==n.scheme)&&r.host!=null&&n.host!=null&&r.host.toLowerCase()===n.host.toLowerCase()&&r.port===n.port}function r6(t){if(typeof t=="string"){if(!no(t))return!0;t=wD(t)}if(Yu(t,Yn))return!0;const e=Tw.trustedServers||[];for(let i=0;i<e.length;i++){const r=obe(e[i]);for(let n=0;n<r.length;n++)if(Yu(t,r[n]))return!0}return!1}function obe(t){return pT[t]||(s6(t)||nc(t)?pT[t]=[new uy(jo(t))]:pT[t]=[new uy(`http://${t}`),new uy(`https://${t}`)]),pT[t]}function jo(t,e=Kz,i){return nc(t)?i?.preserveProtocolRelative?t:Yn.scheme==="http"&&Yn.authority===Go(t).slice(2)?`http:${t}`:`https:${t}`:s6(t)?t:Iy(t.startsWith("/")?hbe(e):e,t)}function n6(t,e=Kz,i){if(t==null||!no(t))return t;const r=Zl(t),n=r.toLowerCase(),s=Zl(e).toLowerCase().replace(/\/+$/,""),o=i?Zl(i).toLowerCase().replace(/\/+$/,""):null;if(o&&!s.startsWith(o))return t;const u=(v,b,_)=>(_=v.indexOf(b,_))===-1?v.length:_;let d=u(n,"/",n.indexOf("//")+2),h=-1;for(;n.slice(0,d+1)===s.slice(0,d)+"/"&&(h=d+1,d!==n.length);)d=u(n,"/",d+1);if(h===-1||o&&h<o.length)return t;t=r.slice(h);const m=s.slice(h-1).replaceAll(/[^/]+/g,"").length;if(m>0)for(let v=0;v<m;v++)t=`../${t}`;else t=`./${t}`;return t}function Zl(t){return t=vbe(t=gbe(t=ybe(t=jo(t=t.trim()))))}function Iy(...t){const e=t.filter(is);if(!e?.length)return;const i=[];if(no(e[0])){const n=e[0],s=n.indexOf("//");s!==-1&&(i.push(n.slice(0,s+1)),dbe(e[0])&&(i[0]+="/"),e[0]=n.slice(s+2))}else e[0].startsWith("/")&&i.push("");const r=e.reduce((n,s)=>s?n.concat(s.split("/")):n,[]);for(let n=0;n<r.length;n++){const s=r[n];s===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!s&&n===r.length-1||s&&(s!=="."||i.length===0))&&i.push(s)}return i.join("/")}function Go(t,e=!1){if(t==null||Ew(t)||np(t))return null;let i=t.indexOf("://");if(i===-1&&nc(t))i=2;else{if(i===-1)return null;i+=3}const r=t.indexOf("/",i);return r!==-1&&(t=t.slice(0,r)),e&&(t=sA(t,!0)),t}function no(t){return nc(t)||s6(t)}function Ew(t){return t!=null&&t.startsWith("blob:")}function np(t){return t!=null&&t.startsWith("data:")}function abe(t){const e=ky(t);return e?.isBase64?gK(e.data):null}function EWe(t){return Z0e(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const lbe=/^data:(.*?)(;base64)?,(.*)$/;function ky(t){const e=t.match(lbe);if(!e)return null;const[,i,r,n]=e;return{mediaType:i,isBase64:!!r,data:n}}function $K(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function ube(t){return(await fetch(t)).blob()}function MWe(t){const e=abe(t);if(!e)return null;const i=ky(t);return new Blob([e],{type:i.mediaType})}function nc(t){return t!=null&&t.startsWith("/")&&t[1]==="/"}function s6(t){return t!=null&&vK.test(t)}function TK(t){return t!=null&&Y0e.test(t)||Yn.scheme==="https"&&nc(t)}function cbe(t){return t!=null&&bK.test(t)||Yn.scheme==="http"&&nc(t)}function dbe(t){return t!=null&&Q0e.test(t)}function o6(t){return nc(t)?`https:${t}`:t.replace(bK,"https:")}function pbe(){return Yn.scheme==="http"}function vD(){return Yn.scheme==="https"}function sA(t,e=!1){return nc(t)?t.slice(2):(t=t.replace(vK,""),e&&t.length>1&&t.startsWith("/")&&t[1]==="/"&&(t=t.slice(2)),t)}function hbe(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function fbe(t){let e=0;if(no(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function AWe(t,e){if(!t)return"";const i=Xr(t).path.replace(/\/+$/,""),r=i.slice(i.lastIndexOf("/")+1);if(!e?.length)return r;const n=new RegExp(`\\.(${e.join("|")})$`,"i");return r.replace(n,"")}function mbe(t){return t.endsWith("/")?t:`${t}/`}function EK(t){return t.replace(/\/+$/,"")}function ybe(t){if(/^https?:\/\//i.test(t)){const e=i6(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function gbe(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function vbe(t){const e=Tw.httpsDomains;if(!cbe(t))return t;const i=t.indexOf("/",7);let r;if(r=i===-1?t:t.slice(0,i),r=r.toLowerCase().slice(7),wK.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return pbe()&&r===Yn.authority&&!X0e.test(t)||(vD()&&r===Yn.authority||e&&e.some(n=>r===n||r.endsWith(`.${n}`))||vD()&&!NI(t))&&(t=o6(t)),t}function bD(t,e,i){if(!(e&&i&&t&&no(t)))return t;const r=t.indexOf("//"),n=t.indexOf("/",r+2),s=t.indexOf(":",r+2),o=Math.min(n<0?t.length:n,s<0?t.length:s);return t.slice(r+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${i}${t.slice(o)}`}function MK(t,e){const i=new URL(t);return i.host=e,i.port&&!wK.test(e)&&(i.port=""),i.toString()}function bbe(t){return new URL(t).host}function wD(t){return typeof t=="string"?new uy(jo(t)):(t.scheme||(t.scheme=Yn.scheme),t)}function IWe(t){return wbe.test(t)}function AK(t,e){const i=Xr(t),r=Object.keys(i.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function IK(t,e,i){const r=Xr(t),n=r.query||{};return n[e]=String(i),`${r.path}?${IS(n)}`}function qR(t,e){if(!e)return t;const i=Xr(t),r=i.query||{};for(const[s,o]of Object.entries(e))o!=null&&(r[s]=o);const n=IS(r);return n?`${i.path}?${n}`:i.path}function kK(t){if(t==null)return null;const e=t.match(OK);return e?e[2]:null}function oG(t){if(t==null)return null;const e=t.match(OK);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function kWe(t){return typeof t=="string"?ky(t)??{data:t}:new Promise((e,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(ky(r.result)),r.onerror=n=>i(n)})}const OK=/([^.]*)\.([^/]*)$/,wbe=/(^data:image\/svg|\.svg$)/i,CK="20251114",RK="ec088c999de2dac6fb9478a47da1bad775545540";Symbol.dispose??=Symbol("Symbol.dispose"),Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");const PK="4.34";let pt,a6=PK;function OWe(t){pt=t}function CWe(t){const e=pt?.findCredential(t);return e?.token?IK(t,"token",e.token):t}a6="4.34.8",q("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),q("host-webworker");function Zy(t,e){const i=e?.url?.path;if(t&&i&&(t=jo(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const r=n6(t,e.portalItem.itemUrl);r!=null&&r.startsWith(_be)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(r).path)}return(t=_D(t,e?.portal))&&jI.test(t)?l6(t):t}function Oy(t,e,i=0){if((t=t&&jI.test(t)?jK(t):t)==null)return t;!no(t)&&e?.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let r=jo(t);if(e){const n=e.verifyItemRelativeUrls?.rootPath||e.url?.path;if(n){const s=_D(n,e.portal),o=_D(r,e.portal);r=n6(o,s,s),r!=null&&r!==o&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=LK(r,e?.portal),no(r)&&(r=Zl(r)),e?.resources&&e?.portalItem&&!no(r)&&!np(r)&&i===0&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function LI(t,e,i){return Zy(t,i)}function Cy(t,e,i,r){const n=Oy(t,r);n!==void 0&&(e[i]=n)}const jI=/\/items\/([^/]+)\/resources\/(.*)/,_be="./resources/";function DK(t){return(t?.match(jI)??null)?.[1]??null}function NK(t){const e=t?.match(jI)??null;if(e==null)return null;const i=e[2],r=i.lastIndexOf("/");if(r===-1){const{path:o,extension:u}=oG(i);return{prefix:null,filename:o,extension:u}}const{path:n,extension:s}=oG(i.slice(r+1));return{prefix:i.slice(0,r),filename:n,extension:s}}function LK(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?bD(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function _D(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,r=e6();return Yu(r,`${r.scheme}://${i}`)?bD(t,e.portalHostname,i):bD(t,i,e.portalHostname)}function l6(t){if(!t)return t||null;let e=t;return e&&pt&&!pt.findCredential(e)&&(e=yK(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function jK(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&pt&&!pt.findCredential(e)&&(e=yK(e)),e}const Sbe=Object.freeze(Object.defineProperty({__proto__:null,ensureMainOnlineDomain:LK,fromCDNUrl:jK,fromJSON:Zy,itemIdFromResourceUrl:DK,prefixAndFilenameFromResourceUrl:NK,read:LI,toCDNUrl:l6,toJSON:Oy,write:Cy},Symbol.toStringTag,{value:"Module"})),zK={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},FK=Object.values(zK),VK=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${FK.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),xbe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${FK.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),$be=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function RWe(t){return VK.test(t)}function sc(t){if(t==null)return null;const e=Xr(t),i=e?.path.match(VK)||e?.path.match(xbe);if(!i)return null;const[,r,n,s,o]=i,u=n.indexOf("/");return{title:u6(u!==-1?n.slice(u+1):n),serverType:zK[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function Tbe(t){const e=Xr(t).path.match($be);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function u6(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function Ebe(t,e){const i=[];if(t){const r=sc(t);r!=null&&r.title&&i.push(r.title)}if(e){const r=u6(e);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function oA(t){let e=Go(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(e)))}function Mbe(t,e){return t&&EK(AK(t,e))}function Abe(t){let{url:e}=t;if(!e)return{url:e};e=AK(e,t.logger);const i=Xr(e),r=sc(i.path);let n;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(n=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const s=Tbe(i.path);s!=null&&(e=s.serviceUrl,n=s.sublayerId)}return{url:EK(e),layerId:n}}function Ibe(t,e,i,r,n){Cy(e,r,"url",n),r.url&&t.layerId!=null&&(r.url=Iy(r.url,i,t.layerId.toString()))}function PWe(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),n=e.includes("/imageserver/wmsserver"),s=e.includes("/wmsserver");return i&&(r||n||s)}function DWe(t){if(!t)return!1;const e=new uy(jo(t)),i=e.authority?.toLowerCase();return i==="server.arcgisonline.com"||i==="services.arcgisonline.com"}const kbe=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function c6(t){if(!d6(t))return null;const e=r=>r instanceof RegExp?r.test(t):typeof r=="string"&&t.startsWith(r),i=St.apiKeys;if(Array.isArray(i.scopes)){for(const r of i.scopes)if(Array.isArray(r.urls)){if(r.urls.some(e))return r.token}else if(e(r.urls))return r.token}return i.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(t)?i.basemapStyles:St.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(t)?St.apiKey:null}function SD(){return St.apiKey!=null||St.apiKeys.basemapStyles!=null}function Obe(t,e){return e?d6(t):c6(t)!=null}function d6(t){const e=Go(t,!0);return!!e&&!kbe.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function Cbe(t,e,i=!1,r){return new Promise((n,s)=>{if(Rn(r))return void s(aG());let o=()=>{h(),s(new Error(`Unable to load ${e}`))},u=async()=>{const m=t;try{await m.decode()}catch{}h(),n(m)},d=()=>{if(!t)return;const m=t;h(),m.src="",s(aG())};const h=()=>{t&&(t.removeEventListener("error",o),t.removeEventListener("load",u),o=null,u=null,t=null,r?.removeEventListener("abort",d),d=null,i&&URL.revokeObjectURL(e))};r?.addEventListener("abort",d),t.addEventListener("error",o),t.addEventListener("load",u)})}function aG(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const UK="Timeout exceeded";function Rbe(){return new Error(UK)}function NWe(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===UK}function Pbe(t){St.request.crossOriginNoCorsDomains||(St.request.crossOriginNoCorsDomains={});const e=St.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[Go(i)??""]=0:(e[Go("http://"+i)??""]=0,e[Go("https://"+i)??""]=0)}function Dbe(t){const e=St.request.crossOriginNoCorsDomains;if(e){let i=Go(t);if(i)return i=i.toLowerCase(),!Yu(i,e6())&&e[i]<Date.now()-36e5}return!1}async function Nbe(t){const e=Xr(t);t=e.path,e.query?.f==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const i=St.request.crossOriginNoCorsDomains,r=Go(t);i&&r&&(i[r.toLowerCase()]=Date.now())}const xD=new Map;function Lbe(t,e){const i=e?.preferredHost;if(!i||Yu(t,`https://${i}`,!0))return;const r=sc(t);if(!r||r.serverType!=="FeatureServer"||mK(t))return;const n=r.url.path.toLowerCase();xD.has(n)||xD.set(n,i)}function lG(t){const e=sc(t)?.url.path.toLowerCase();if(!e)return t;const i=xD.get(e);return i?MK(t,i):t}async function $t(t,e){t instanceof URL&&(t=t.toString()),e?.query instanceof URLSearchParams&&(e.query=t6(e.query.toString().replaceAll("+"," ")));const i=np(t),r=Ew(t);r||i||(t=Zl(t));const n={url:t,requestOptions:{...e}},s=_=>({data:_,getAllHeaders:Vb,getHeader:Vb,httpStatus:200,requestOptions:n.requestOptions,url:n.url}),o=gD(t,Ca.internalInterceptors);if(o){const _=await cG(o,n);if(_!=null)return s(_)}let u=gD(t);if(u){const _=await cG(u,n);if(_!=null)return s(_);u.after||u.error||(u=null)}if(t=n.url,(e=n.requestOptions).responseType==="image"&&(q("host-webworker")||q("host-node")))throw Jl("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(e.method==="head"){if(e.body)throw Jl("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(i||r)throw Jl("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await Ube(),aA)return aA.execute(t,e);const d=new AbortController,h=Wa(e,()=>d.abort()),m={controller:d,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:u,params:n,redoRequest:!1,useIdentity:Ca.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},v=e.useRequestQueue?Wbe(m):TD(m),b=await v.finally(()=>h?.remove());return u?.after?.(b),b}let aA,qK=!1;const Ca=St.request,GK="FormData"in globalThis,jbe=new Set([499,498,403,401]),zbe=new Set(["COM_0056","COM_0057","SB_0008"]),Fbe=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Vb=()=>null,lA=Symbol();function Vbe(t){const e=Go(t);e&&!$t._corsServers.includes(e)&&$t._corsServers.push(e)}function uG(t){const e=Go(t);return!e||e.endsWith(".arcgis.com")||$t._corsServers.includes(e)||r6(e)}function Jl(t,e,i,r){let n;const s={url:i.url,requestOptions:i.requestOptions,getAllHeaders:Vb,getHeader:Vb,ssl:!1};if(e instanceof L)return e.details?(e.details=z(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=s,e;if(e){const o=r&&(()=>Array.from(r.headers)),u=r&&(m=>r.headers.get(m)),d=r?.status,h=e.message;h&&(n=h),o&&u&&(s.getAllHeaders=o,s.getHeader=u),s.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||d||0,s.subCode=e.subcode,s.messageCode=e.messageCode,typeof e.details=="string"?(s.messages=[e.details],n??=e.details):(s.messages=e.details,n??=s.messages?.[0]),s.raw=lA in e?e[lA]:e}return n??="Error",Yr(e)?xt():new L(t,n,s)}async function Ube(){q("host-webworker")&&(!aA&&globalThis.invokeStaticMessage?aA=await H(()=>import("./request-DPX0qMPZ.js"),[]):qK=!0)}async function $D(){pt||await H(()=>import("./IdentityManager-CYdNQob-.js"),[])}async function qbe(t){const e=t.params.url,i=t.params.requestOptions,r=t.controller.signal,n=i.body;let s=null,o=null;if(GK&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(o=n),t.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},keepalive:i.keepAlive??!1,method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Ca.priority,redirect:"follow",signal:r},(s||o)&&(t.fetchOptions.body=s||o),(qK||i.authMode==="anonymous")&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||i.query?.token||s?.get("token")),!t.hasToken){const u=c6(e);u&&(i.query??={},i.query.token=u,t.hasToken=!0)}if(t.useIdentity&&!t.hasToken&&!t.credential&&!t.credentialToken&&!BK(e)&&!Rn(r)){let u;i.authMode==="immediate"?(await $D(),u=await pt.getCredential(e,{signal:r})):i.authMode==="no-prompt"?(await $D(),u=await pt.getCredential(e,{prompt:!1,signal:r}).catch(()=>{})):pt&&(u=pt.findCredential(e)),u&&(t.credential=u,t.credentialToken=u.token,t.useSSL=!!u.ssl)}}function BK(t){return Fbe.some(e=>e.test(t))}async function Gbe(t){let e=t.params.url,i=lG(e);const r=t.params.requestOptions,n=t.fetchOptions??{},s=Ew(e)||np(e),o=r.responseType||"json",u=s?0:r.timeout!=null?r.timeout:Ca.timeout;let d=!1;if(!s){t.useSSL&&(e=o6(e));let _={...r.query};t.credentialToken&&(_.token=t.credentialToken);let x=IS(_);q("esri-url-encodes-apostrophe")&&(x=x.replaceAll("'","%27"));const $=i.length+1+x.length;let E;d=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||$>Ca.maxUrlLength;const A=r.useProxy||!!NI(e);if(A){const O=_K(e);E=O.path,!d&&E.length+1+$>Ca.maxUrlLength&&(d=!0),O.query&&(_={...O.query,..._})}if(n.method==="HEAD"&&(d||A)){if(d)throw $>Ca.maxUrlLength?Jl("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):Jl("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(A)throw Jl("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}d?(n.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?e=qR(e,_):(n.body=IS(_),n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded")):e=qR(e,_),A&&(t.useProxy=!0,e=`${E}?${e}`),_.token&&GK&&n.body instanceof FormData&&!mK(e)&&n.body.set("token",_.token),r.hasOwnProperty("withCredentials")?t.withCredentials=r.withCredentials:Yu(e,e6())||(r6(e)||pt&&pt.findServerInfo(e)?.webTierAuth)&&(t.withCredentials=!0),t.withCredentials&&(n.credentials="include",Dbe(e)&&await Nbe(d?qR(e,_):e)),i=lG(e)}let h,m,v=0,b=!1;u>0&&(v=setTimeout(()=>{b=!0,t.controller.abort()},u));try{if(r.responseType==="native-request-init")m=n,m.url=i,r.signal?m.signal=r.signal:delete m.signal;else if(r.responseType!=="image"||n.cache!=="default"||n.keepalive||n.method!=="GET"||d||Bbe(r.headers)||!s&&!t.useProxy&&Ca.proxyUrl&&!uG(e)){if($t._beforeFetch&&await $t._beforeFetch(e,n),h=await fetch(i,n),$t._afterFetch&&await $t._afterFetch(h),t.useProxy||Vbe(e),r.responseType==="native")m=h;else if(n.method!=="HEAD")if(h.ok){switch(o){case"array-buffer":m=await h.arrayBuffer();break;case"blob":case"image":m=await h.blob();break;default:m=await h.text()}if(v&&(clearTimeout(v),v=0),o==="json"||o==="xml"||o==="document")if(m)switch(o){case"json":m=JSON.parse(m);break;case"xml":m=dG(m,"application/xml");break;case"document":m=dG(m,"text/html")}else m=null;if(m){if(o==="array-buffer"||o==="blob"){const _=h.headers.get("Content-Type");if(_&&/application\/json|text\/plain/i.test(_)&&m[o==="blob"?"size":"byteLength"]<=750)try{const x=await new Response(m).json();x.error&&(m=x)}catch{}}o==="image"&&m instanceof Blob&&(m=await pG(URL.createObjectURL(m),t,!0))}}else{m=await h.text();try{m=JSON.parse(m)}catch{}}}else m=await pG(i,t)}catch(_){if(_.name==="AbortError")throw b?Rbe():xt("Request canceled");if(!(!h&&_ instanceof TypeError&&Ca.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||t.useProxy||uG(e))throw _;t.redoRequest=!0,nbe({proxyUrl:Ca.proxyUrl,urlPrefix:Go(e)??""})}finally{v&&clearTimeout(v)}return[h,m]}async function cG(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,r;try{r=await t.before(e)}catch(n){i=Jl("request:interceptor",n,e)}if((r instanceof Error||r instanceof L)&&(i=Jl("request:interceptor",r,e)),i)throw t.error&&t.error(i),i;return r}}function Bbe(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function dG(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}$t._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],$t._beforeFetch=void 0,$t._afterFetch=void 0;const Hbe=new Map;async function Wbe(t){const e=Jbe(t.params.url);if(!e)return TD(t);const{QueueProcessor:i}=await H(()=>import("./QueueProcessor-n03ew7Gz.js"),[]);return Wy(Hbe,e.origin,()=>{const n=e.isHosted?q("request-queue-concurrency-hosted"):q("request-queue-concurrency-non-hosted");return new i({concurrency:n,process:s=>{if(Rn(s.params.requestOptions))throw Jl("",xt("Request canceled"),s.params);return TD(s)}})}).push(t)}async function TD(t){let e,i;await qbe(t);try{do[e,i]=await Gbe(t);while(!await Zbe(t,e,i))}catch(s){const o=Jl("request:server",s,t.params,e);throw o.details.ssl=t.useSSL,t.interceptor?.error&&t.interceptor.error(o),o}const r=t.params.url;if(i)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&i.user?.username&&!r6(r)){const s=Go(r,!0);s&&Ca.trustedServers.push(s)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&Pbe(i.authorizedCrossOriginNoCorsDomains)}else(t.params.requestOptions.responseType||"json")==="json"&&Lbe(r,i);const n=t.credential;if(n&&pt){let o=pt.findServerInfo(n.server)?.owningSystemUrl;if(o){o=o.replace(/\/?$/,"/sharing");const u=pt.findCredential(o,n.userId);u&&pt._getIdenticalSvcIdx(o,u)===-1&&u.resources.unshift(o)}}return{data:i,getAllHeaders:e?()=>Array.from(e.headers):Vb,getHeader:e?s=>e.headers.get(s):Vb,httpStatus:e?.status??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function Zbe(t,e,i){if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let n,s;if(i&&(i.error&&typeof i.error=="object"?n=i.error:i.status==="error"&&Array.isArray(i.messages)&&(n={...i},n[lA]=i,n.details=i.messages)),!n&&!e.ok)throw n=new Error(`Unable to load ${e.url} status: ${e.status}`),n[lA]=i,n;let o,u=null;n&&(s=Number(n.code),u=n.hasOwnProperty("subcode")?Number(n.subcode):null,o=n.messageCode,o=o?.toUpperCase());const d=r.authMode;if(s===403&&(u===4||n.message?.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(d!=="no-prompt"||s===498)&&s!==void 0&&jbe.has(s)&&!BK(t.params.url)&&(s!==403||(!o||!zbe.has(o))&&(u==null||u===2&&t.credentialToken))){await $D();try{const h=await pt.getCredential(t.params.url,{error:Jl("request:server",n,t.params),credential:t.credential,prompt:d!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=h,t.credentialToken=h.token,t.useSSL=t.useSSL||h.ssl,!1}catch(h){if(d==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;n=h}}if(n)throw n;return!0}function pG(t,e,i=!1){const r=e.controller.signal,n=new Image;return e.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=Ca.priority,n.src=t,Cbe(n,t,i,r)}function Jbe(t){let e,i;return typeof t=="string"?(e=Go(t,!0),i=oA(t)):(e=t.origin,i=oA(t.toString())),e==null?null:{origin:e,isHosted:i}}function rr(t){if(!St.assetsPath)throw ie.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new L("assets:path-not-set","config.assetsPath is not set");return Iy(St.assetsPath,t)}let GR,F=null;function p6(){return!!F}function Ybe(){return!!q("esri-wasm")}function HK(){return GR||(GR=H(async()=>{const{default:t}=await import("./pe-wasm-B87Q3u4k.js");return{default:t}},[]).then(({default:t})=>t({locateFile:e=>rr(`esri/geometry/support/${e}`)})).then(t=>{XK(t)}),GR)}const eM={geogToProj(t,e,i){F.ensureCache.prepare();const r=Ry(i),n=i===r,s=F.ensureFloat64(r),o=F._pe_geog_to_proj(F.getPointer(t),e,s);return o&&lf(i,e,s,n),o},projGeog(t,e,i,r){switch(r){case Hi.PE_TRANSFORM_P_TO_G:return eM.projToGeog(t,e,i);case Hi.PE_TRANSFORM_G_TO_P:return eM.geogToProj(t,e,i)}return 0},projToGeog:(t,e,i)=>eM.projToGeogCenter(t,e,i,0),projToGeogCenter(t,e,i,r){F.ensureCache.prepare();const n=Ry(i),s=i===n,o=F.ensureFloat64(n),u=F._pe_proj_to_geog_center(F.getPointer(t),e,o,r);return u&&lf(i,e,o,s),u}};let Hi=class Rt{static init(){Rt.PE_BUFFER_MAX=F.PeDefs.prototype.PE_BUFFER_MAX,Rt.PE_NAME_MAX=F.PeDefs.prototype.PE_NAME_MAX,Rt.PE_MGRS_MAX=F.PeDefs.prototype.PE_MGRS_MAX,Rt.PE_USNG_MAX=F.PeDefs.prototype.PE_USNG_MAX,Rt.PE_DD_MAX=F.PeDefs.prototype.PE_DD_MAX,Rt.PE_DDM_MAX=F.PeDefs.prototype.PE_DDM_MAX,Rt.PE_DMS_MAX=F.PeDefs.prototype.PE_DMS_MAX,Rt.PE_UTM_MAX=F.PeDefs.prototype.PE_UTM_MAX,Rt.PE_PARM_MAX=F.PeDefs.prototype.PE_PARM_MAX,Rt.PE_TYPE_NONE=F.PeDefs.prototype.PE_TYPE_NONE,Rt.PE_TYPE_GEOGCS=F.PeDefs.prototype.PE_TYPE_GEOGCS,Rt.PE_TYPE_PROJCS=F.PeDefs.prototype.PE_TYPE_PROJCS,Rt.PE_TYPE_GEOGTRAN=F.PeDefs.prototype.PE_TYPE_GEOGTRAN,Rt.PE_TYPE_COORDSYS=F.PeDefs.prototype.PE_TYPE_COORDSYS,Rt.PE_TYPE_UNIT=F.PeDefs.prototype.PE_TYPE_UNIT,Rt.PE_TYPE_LINUNIT=F.PeDefs.prototype.PE_TYPE_LINUNIT,Rt.PE_STR_OPTS_NONE=F.PeDefs.prototype.PE_STR_OPTS_NONE,Rt.PE_STR_AUTH_NONE=F.PeDefs.prototype.PE_STR_AUTH_NONE,Rt.PE_STR_AUTH_TOP=F.PeDefs.prototype.PE_STR_AUTH_TOP,Rt.PE_STR_NAME_CANON=F.PeDefs.prototype.PE_STR_NAME_CANON,Rt.PE_STR_FMT_WKT=F.PeDefs.prototype.PE_STR_FMT_WKT,Rt.PE_STR_FMT_WKT2=F.PeDefs.prototype.PE_STR_FMT_WKT2,Rt.PE_PARM_X0=F.PeDefs.prototype.PE_PARM_X0,Rt.PE_PARM_ND=F.PeDefs.prototype.PE_PARM_ND,Rt.PE_TRANSFORM_1_TO_2=F.PeDefs.prototype.PE_TRANSFORM_1_TO_2,Rt.PE_TRANSFORM_2_TO_1=F.PeDefs.prototype.PE_TRANSFORM_2_TO_1,Rt.PE_TRANSFORM_P_TO_G=F.PeDefs.prototype.PE_TRANSFORM_P_TO_G,Rt.PE_TRANSFORM_G_TO_P=F.PeDefs.prototype.PE_TRANSFORM_G_TO_P,Rt.PE_HORIZON_RECT=F.PeDefs.prototype.PE_HORIZON_RECT,Rt.PE_HORIZON_POLY=F.PeDefs.prototype.PE_HORIZON_POLY,Rt.PE_HORIZON_LINE=F.PeDefs.prototype.PE_HORIZON_LINE,Rt.PE_HORIZON_DELTA=F.PeDefs.prototype.PE_HORIZON_DELTA}},WK=null;const hG={},fG={},mG=t=>{const e=t.getType();switch(e){case Hi.PE_TYPE_GEOGCS:t=F.castObject(t,F.PeGeogcs);break;case Hi.PE_TYPE_PROJCS:t=F.castObject(t,F.PeProjcs);break;case Hi.PE_TYPE_GEOGTRAN:t=F.castObject(t,F.PeGeogtran);break;default:e&Hi.PE_TYPE_UNIT&&(t=F.castObject(t,F.PeUnit))}return t},bv={initialize(){F.PeFactory.prototype.initialize(null)},coordsys:t=>bv.factoryByType(Hi.PE_TYPE_COORDSYS,t),factoryByType(t,e){let i=null,r=hG[t];if(r||(r={},hG[t]=r),r.hasOwnProperty(String(e))&&(i=r[e],F.compare(i,F.NULL)&&(i=null)),!i){const n=F.PeFactory.prototype.factoryByType(t,e);F.compare(n,F.NULL)||(i=mG(n),r[e]=i)}return i},fromString(t,e){let i=null,r=fG[t];if(r||(r={},fG[t]=r),r.hasOwnProperty(e)&&(i=r[e],F.compare(i,F.NULL)&&(i=null)),!i){const n=F.PeFactory.prototype.fromString(t,e);F.compare(n,F.NULL)||(i=mG(n),r[e]=i)}return i},geogcs:t=>bv.factoryByType(Hi.PE_TYPE_GEOGCS,t),geogtran:t=>bv.factoryByType(Hi.PE_TYPE_GEOGTRAN,t),getCode:t=>F.PeFactory.prototype.getCode(t),projcs:t=>bv.factoryByType(Hi.PE_TYPE_PROJCS,t),unit:t=>bv.factoryByType(Hi.PE_TYPE_UNIT,t)};let yG,ZK=null;const h6={PE_GTLIST_OPTS_COMMON:0,init(){h6.PE_GTLIST_OPTS_COMMON=F.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,yG=F._pe_getPeGTlistExtendedEntrySize()},getGTlist(t,e,i,r,n,s){let o=null;const u=new F.PeInteger(s);try{const d=F.PeGTlistExtended.prototype.getGTlist(t,e,i,r,n,u);if((s=u.val)&&(o=[d],s>1)){const h=F.getPointer(d);for(let m=1;m<s;m++)o.push(F.wrapPointer(h+yG*m,F.PeGTlistExtendedEntry))}}finally{F.destroy(u)}return o}},Qbe={destroy(t){if(t?.length){for(const e of t)Tl(e),e.getEntries().forEach(i=>{Tl(i);const r=i.getGeogtran();Tl(r),r.getParameters().forEach(Tl),[r.getGeogcs1(),r.getGeogcs2()].forEach(n=>{Tl(n);const s=n.getDatum();Tl(s),Tl(s.getSpheroid()),Tl(n.getPrimem()),Tl(n.getUnit())})});F.PeGTlistExtendedEntry.prototype.Delete(t[0])}}},Xbe={geogToGeog(t,e,i,r,n){F.ensureCache.prepare();const s=Ry(i),o=i===s,u=F.ensureFloat64(s);let d=0;r&&(d=F.ensureFloat64(r));const h=F._pe_geog_to_geog(F.getPointer(t),e,u,d,n);return h&&lf(i,e,u,o),h}},Kbe={geodesicCoordinate(t,e,i,r,n,s,o,u){F.PeLineType.prototype.geodesic_coordinate(t,e,i,r,n,s,o,u)},geodeticCoordinate(t,e,i,r,n,s,o,u,d){F.PeLineType.prototype.geodetic_coordinate(t,e,i,r,n,s,o,u,d)},geodeticDistance(t,e,i,r,n,s,o,u,d,h){F.PeLineType.prototype.geodetic_distance(t,e,i,r,n,s,o,u,d,h)},greatEllipticDistance(t,e,i,r,n,s,o,u,d){F.PeLineType.prototype.great_elliptic_distance(t,e,i,r,n,s,o,u,d)}},ewe={phiToEta:(t,e)=>F.PeMath.prototype.phi_to_eta(t,e),etaToPhi:(t,e)=>F.PeMath.prototype.eta_to_phi(t,e),phiToPhig:(t,e)=>F.PeMath.prototype.phi_to_phig(t,e),q:(t,e,i)=>F.PeMath.prototype.q(t,e,i),q90:(t,e)=>F.PeMath.prototype.q90(t,e)},BR=(t,e,i,r,n,s)=>{let o,u;switch(F.ensureCache.prepare(),t){case"dd":o=F._pe_geog_to_dd,u=Hi.PE_DD_MAX;break;case"ddm":o=F._pe_geog_to_ddm,u=Hi.PE_DDM_MAX;break;case"dms":o=F._pe_geog_to_dms,u=Hi.PE_DMS_MAX}let d=0;e&&(d=F.getPointer(e));const h=Ry(r),m=F.ensureFloat64(h),v=zI(i,u),b=o(d,i,m,n,F.ensureInt32(v));if(b)for(let _=0;_<i;_++)s[_]=F.UTF8ToString(v[_]);return b},HR=(t,e,i,r,n)=>{let s;switch(F.ensureCache.prepare(),t){case"dd":s=F._pe_dd_to_geog;break;case"ddm":s=F._pe_ddm_to_geog;break;case"dms":s=F._pe_dms_to_geog}let o=0;e&&(o=F.getPointer(e));const u=r.map(v=>F.ensureString(v)),d=F.ensureInt32(u),h=F.ensureFloat64(new Array(2*i)),m=s(o,i,d,h);return m&&lf(n,i,h),m},twe={geogToDms:(t,e,i,r,n)=>BR("dms",t,e,i,r,n),dmsToGeog:(t,e,i,r)=>HR("dms",t,e,i,r),geogToDdm:(t,e,i,r,n)=>BR("ddm",t,e,i,r,n),ddmToGeog:(t,e,i,r)=>HR("ddm",t,e,i,r),geogToDd:(t,e,i,r,n)=>BR("dd",t,e,i,r,n),ddToGeog:(t,e,i,r)=>HR("dd",t,e,i,r)};let JK=class wv{static init(){wv.PE_MGRS_STYLE_NEW=F.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,wv.PE_MGRS_STYLE_OLD=F.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,wv.PE_MGRS_STYLE_AUTO=F.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,wv.PE_MGRS_180_ZONE_1_PLUS=F.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,wv.PE_MGRS_ADD_SPACES=F.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}static geogToMgrsExtended(e,i,r,n,s,o,u){F.ensureCache.prepare();let d=0;e&&(d=F.getPointer(e));const h=Ry(r),m=F.ensureFloat64(h),v=zI(i,Hi.PE_MGRS_MAX),b=F.ensureInt32(v),_=F._pe_geog_to_mgrs_extended(d,i,m,n,s,o,b);if(_)for(let x=0;x<i;x++)u[x]=F.UTF8ToString(v[x]);return _}static mgrsToGeogExtended(e,i,r,n,s){F.ensureCache.prepare();let o=0;e&&(o=F.getPointer(e));const u=r.map(v=>F.ensureString(v)),d=F.ensureInt32(u),h=F.ensureFloat64(new Array(2*i)),m=F._pe_mgrs_to_geog_extended(o,i,d,n,h);return m&&lf(s,i,h),m}};const iwe={geogToUsng(t,e,i,r,n,s,o){F.ensureCache.prepare();let u=0;t&&(u=F.getPointer(t));const d=Ry(i),h=F.ensureFloat64(d),m=zI(e,Hi.PE_MGRS_MAX),v=F.ensureInt32(m),b=F._pe_geog_to_usng(u,e,h,r,n,s,v);if(b)for(let _=0;_<e;_++)o[_]=F.UTF8ToString(m[_]);return b},usngToGeog(t,e,i,r){F.ensureCache.prepare();let n=0;t&&(n=F.getPointer(t));const s=i.map(h=>F.ensureString(h)),o=F.ensureInt32(s),u=F.ensureFloat64(new Array(2*e)),d=F._pe_usng_to_geog(n,e,o,u);return d&&lf(r,e,u),d}};let YK=class tM{static init(){tM.PE_UTM_OPTS_NONE=F.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,tM.PE_UTM_OPTS_ADD_SPACES=F.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,tM.PE_UTM_OPTS_NS=F.PeNotationUtm.prototype.PE_UTM_OPTS_NS}static geogToUtm(e,i,r,n,s){F.ensureCache.prepare();let o=0;e&&(o=F.getPointer(e));const u=Ry(r),d=F.ensureFloat64(u),h=zI(i,Hi.PE_UTM_MAX),m=F.ensureInt32(h),v=F._pe_geog_to_utm(o,i,d,n,m);if(v)for(let b=0;b<i;b++)s[b]=F.UTF8ToString(h[b]);return v}static utmToGeog(e,i,r,n,s){F.ensureCache.prepare();let o=0;e&&(o=F.getPointer(e));const u=r.map(v=>F.ensureString(v)),d=F.ensureInt32(u),h=F.ensureFloat64(new Array(2*i)),m=F._pe_utm_to_geog(o,i,d,n,h);return m&&lf(s,i,h),m}};var Qs;let QK=(Qs=class{static init(){Qs.PE_PCSINFO_OPTION_NONE=F.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,Qs.PE_PCSINFO_OPTION_DOMAIN=F.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,Qs.PE_POLE_OUTSIDE_BOUNDARY=F.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,Qs.PE_POLE_POINT=F.PePCSInfo.prototype.PE_POLE_POINT}static generate(e,i=Qs.PE_PCSINFO_OPTION_DOMAIN){let r=null,n=null;return Qs.cache.has(e)&&(n=Qs.cache.get(e),n[i]&&(r=n[i])),r||(r=F.PePCSInfo.prototype.generate(e,i),n||(n=[],Qs.cache.set(e,n)),n[i]=r),r}},Qs.cache=new Map,Qs);const rwe={versionString:()=>F.PeVersion.prototype.version_string()};function XK(t){function e(s,o,u){s[o]=u(s[o])}F=t,Hi.init(),h6.init(),JK.init(),YK.init(),QK.init(),WK=class extends F.PeDouble{constructor(s=NaN){super(s)}destroy(){F.destroy(this)}[Symbol.dispose](){this.destroy()}},ZK=class extends F.PeGCSExtent{destroy(){F.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[F.PeAngunit,F.PeDatum,F.PeGeogcs,F.PeGeogtran,F.PeObject,F.PeParameter,F.PePrimem,F.PeProjcs,F.PeSpheroid,F.PeUnit];for(const s of i)e(s.prototype,"getName",o=>function(){return o.call(this,new Array(Hi.PE_NAME_MAX))});for(const s of[F.PeGeogtran,F.PeProjcs])e(s.prototype,"getParameters",o=>function(){const u=new Array(Hi.PE_PARM_MAX);let d=o.call(this);for(let h=0;h<u.length;h++){const m=F.getValue(d,"*");u[h]=m?F.wrapPointer(m,F.PeParameter):null,d+=Int32Array.BYTES_PER_ELEMENT}return u});e(F.PeHorizon.prototype,"getCoord",s=>function(o=!1){const u=this.getSize();if(!u)return null;const d=[];return lf(d,u,s.call(this),o),d}),e(F.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=F._pe_getPeGTlistExtendedGTsSize();return function(){let u=null;const d=s.call(this);if(!F.compare(d,F.NULL)){u=[d];const h=this.getSteps();if(h>1){const m=F.getPointer(d);for(let v=1;v<h;v++)u.push(F.wrapPointer(m+o*v,F.PeGTlistExtendedGTs))}}return u}});const r=F._pe_getPeHorizonSize(),n=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let u=null;const d=s.call(this);if(!F.compare(d,F.NULL)){u=[d];const h=d.getNump();if(h>1){const m=F.getPointer(d);for(let v=1;v<h;v++)u.push(F.wrapPointer(m+r*v,F.PeHorizon))}}return o.set(s,u),u};e(F.PeProjcs.prototype,"horizonGcsGenerate",n),e(F.PeProjcs.prototype,"horizonPcsGenerate",n),F.PeObject.prototype.toString=function(s=Hi.PE_STR_OPTS_NONE){F.ensureCache.prepare();const o=F.getPointer(this),u=F.ensureInt8(new Array(Hi.PE_BUFFER_MAX));return F.UTF8ToString(F._pe_object_to_string_ext(o,s,u))},F.PeGeogcs.prototype.destroy=function(){this.Delete(),Tl(this),this.ptr=0},F.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},F.PeProjcs.prototype.destroy=function(){this.Delete(),Tl(this),this.ptr=0},F.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Tl(t){if(!t)return;const e=F.getClass(t);if(!e)return;const i=F.getCache(e);if(!i)return;const r=F.getPointer(t);r&&delete i[r]}function zI(t,e){const i=[],r=new Array(e);for(let n=0;n<t;n++)i.push(F.ensureInt8(r));return i}function Ry(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function lf(t,e,i,r=!1){if(r)for(let n=0;n<2*e;n++)t[n]=F.getValue(i+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=t.length===0;for(let s=0;s<e;s++)n&&(t[s]=new Array(2)),t[s][0]=F.getValue(i,"double"),t[s][1]=F.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}const nwe=Object.freeze(Object.defineProperty({__proto__:null,PeCSTransformations:eM,PeDefs:Hi,get PeDouble(){return WK},PeFactory:bv,get PeGCSExtent(){return ZK},PeGTTransformations:Xbe,PeGTlistExtended:h6,PeGTlistExtendedEntry:Qbe,PeLineType:Kbe,PeMath:ewe,PeNotationDms:twe,PeNotationMgrs:JK,PeNotationUsng:iwe,PeNotationUtm:YK,PePCSInfo:QK,PeVersion:rwe,_init:XK,get _pe(){return F},isLoaded:p6,isSupported:Ybe,load:HK},Symbol.toStringTag,{value:"Module"}));let y;const I={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(y=2e3;y<=2045;y++)I[y]=0;for(y=2056;y<=2065;y++)I[y]=0;for(y=2067;y<=2135;y++)I[y]=0;for(y=2137;y<=2154;y++)I[y]=0;for(y=2161;y<=2170;y++)I[y]=0;for(y=2172;y<=2193;y++)I[y]=0;for(y=2195;y<=2198;y++)I[y]=0;for(y=2200;y<=2203;y++)I[y]=0;for(y=2205;y<=2217;y++)I[y]=0;for(y=2222;y<=2224;y++)I[y]=1;for(y=2225;y<=2250;y++)I[y]=2;for(y=2251;y<=2253;y++)I[y]=1;for(y=2257;y<=2264;y++)I[y]=2;for(y=2274;y<=2279;y++)I[y]=2;for(y=2280;y<=2282;y++)I[y]=1;for(y=2283;y<=2289;y++)I[y]=2;for(y=2290;y<=2292;y++)I[y]=0;for(y=2308;y<=2313;y++)I[y]=0;for(y=2315;y<=2491;y++)I[y]=0;for(y=2494;y<=2866;y++)I[y]=0;for(y=2867;y<=2869;y++)I[y]=1;for(y=2870;y<=2888;y++)I[y]=2;for(y=2891;y<=2895;y++)I[y]=2;for(y=2896;y<=2898;y++)I[y]=1;for(y=2902;y<=2908;y++)I[y]=2;for(y=2915;y<=2920;y++)I[y]=2;for(y=2921;y<=2923;y++)I[y]=1;for(y=2924;y<=2930;y++)I[y]=2;for(y=2931;y<=2962;y++)I[y]=0;for(y=2964;y<=2968;y++)I[y]=2;for(y=2969;y<=2973;y++)I[y]=0;for(y=2975;y<=2991;y++)I[y]=0;for(y=2995;y<=3051;y++)I[y]=0;for(y=3054;y<=3079;y++)I[y]=0;for(y=3081;y<=3088;y++)I[y]=0;for(y=3092;y<=3101;y++)I[y]=0;for(y=3106;y<=3138;y++)I[y]=0;for(y=3146;y<=3151;y++)I[y]=0;for(y=3153;y<=3166;y++)I[y]=0;for(y=3168;y<=3172;y++)I[y]=0;for(y=3174;y<=3203;y++)I[y]=0;for(y=3294;y<=3358;y++)I[y]=0;for(y=3367;y<=3403;y++)I[y]=0;for(y=3408;y<=3416;y++)I[y]=0;for(y=3417;y<=3438;y++)I[y]=2;for(y=3441;y<=3446;y++)I[y]=2;for(y=3447;y<=3450;y++)I[y]=0;for(y=3451;y<=3459;y++)I[y]=2;for(y=3460;y<=3478;y++)I[y]=0;for(y=3554;y<=3559;y++)I[y]=0;for(y=3560;y<=3570;y++)I[y]=2;for(y=3571;y<=3581;y++)I[y]=0;for(y=3594;y<=3597;y++)I[y]=0;for(y=3601;y<=3604;y++)I[y]=0;for(y=3637;y<=3639;y++)I[y]=0;for(y=3665;y<=3667;y++)I[y]=0;for(y=3693;y<=3695;y++)I[y]=0;for(y=3701;y<=3727;y++)I[y]=0;for(y=3728;y<=3739;y++)I[y]=2;for(y=3740;y<=3751;y++)I[y]=0;for(y=3753;y<=3760;y++)I[y]=2;for(y=3761;y<=3773;y++)I[y]=0;for(y=3775;y<=3777;y++)I[y]=0;for(y=3779;y<=3781;y++)I[y]=0;for(y=3783;y<=3785;y++)I[y]=0;for(y=3788;y<=3791;y++)I[y]=0;for(y=3797;y<=3802;y++)I[y]=0;for(y=3814;y<=3816;y++)I[y]=0;for(y=3825;y<=3829;y++)I[y]=0;for(y=3832;y<=3841;y++)I[y]=0;for(y=3844;y<=3852;y++)I[y]=0;for(y=3873;y<=3885;y++)I[y]=0;for(y=3890;y<=3893;y++)I[y]=0;for(y=3907;y<=3912;y++)I[y]=0;for(y=3942;y<=3950;y++)I[y]=0;for(y=3968;y<=3970;y++)I[y]=0;for(y=3973;y<=3976;y++)I[y]=0;for(y=3986;y<=3989;y++)I[y]=0;for(y=3994;y<=3997;y++)I[y]=0;for(y=4048;y<=4051;y++)I[y]=0;for(y=4056;y<=4063;y++)I[y]=0;for(y=4093;y<=4096;y++)I[y]=0;for(y=4390;y<=4398;y++)I[y]=0;for(y=4399;y<=4413;y++)I[y]=2;for(y=4418;y<=4433;y++)I[y]=2;for(y=4455;y<=4457;y++)I[y]=2;for(y=4484;y<=4489;y++)I[y]=0;for(y=4491;y<=4554;y++)I[y]=0;for(y=4568;y<=4589;y++)I[y]=0;for(y=4652;y<=4656;y++)I[y]=0;for(y=4766;y<=4800;y++)I[y]=0;for(y=5014;y<=5016;y++)I[y]=0;for(y=5069;y<=5072;y++)I[y]=0;for(y=5105;y<=5130;y++)I[y]=0;for(y=5167;y<=5188;y++)I[y]=0;for(y=5253;y<=5259;y++)I[y]=0;for(y=5269;y<=5275;y++)I[y]=0;for(y=5292;y<=5311;y++)I[y]=0;for(y=5329;y<=5331;y++)I[y]=0;for(y=5343;y<=5349;y++)I[y]=0;for(y=5355;y<=5357;y++)I[y]=0;for(y=5387;y<=5389;y++)I[y]=0;for(y=5459;y<=5463;y++)I[y]=0;for(y=5479;y<=5482;y++)I[y]=0;for(y=5518;y<=5520;y++)I[y]=0;for(y=5530;y<=5539;y++)I[y]=0;for(y=5550;y<=5552;y++)I[y]=0;for(y=5562;y<=5583;y++)I[y]=0;for(y=5623;y<=5625;y++)I[y]=2;for(y=5631;y<=5639;y++)I[y]=0;for(y=5649;y<=5653;y++)I[y]=0;for(y=5663;y<=5680;y++)I[y]=0;for(y=5682;y<=5685;y++)I[y]=0;for(y=5875;y<=5877;y++)I[y]=0;for(y=5896;y<=5899;y++)I[y]=0;for(y=5921;y<=5940;y++)I[y]=0;for(y=6050;y<=6125;y++)I[y]=0;for(y=6244;y<=6275;y++)I[y]=0;for(y=6328;y<=6348;y++)I[y]=0;for(y=6350;y<=6356;y++)I[y]=0;for(y=6366;y<=6372;y++)I[y]=0;for(y=6381;y<=6387;y++)I[y]=0;for(y=6393;y<=6404;y++)I[y]=0;for(y=6480;y<=6483;y++)I[y]=0;for(y=6511;y<=6514;y++)I[y]=0;for(y=6579;y<=6581;y++)I[y]=0;for(y=6619;y<=6624;y++)I[y]=0;for(y=6625;y<=6627;y++)I[y]=2;for(y=6628;y<=6632;y++)I[y]=0;for(y=6634;y<=6637;y++)I[y]=0;for(y=6669;y<=6692;y++)I[y]=0;for(y=6707;y<=6709;y++)I[y]=0;for(y=6720;y<=6723;y++)I[y]=0;for(y=6732;y<=6738;y++)I[y]=0;for(y=6931;y<=6933;y++)I[y]=0;for(y=6956;y<=6959;y++)I[y]=0;for(y=7005;y<=7007;y++)I[y]=0;for(y=7057;y<=7070;y++)I[y]=2;for(y=7074;y<=7082;y++)I[y]=0;for(y=7109;y<=7118;y++)I[y]=0;for(y=7119;y<=7127;y++)I[y]=1;for(y=7374;y<=7376;y++)I[y]=0;for(y=7528;y<=7586;y++)I[y]=0;for(y=7587;y<=7645;y++)I[y]=2;for(y=7692;y<=7696;y++)I[y]=0;for(y=7755;y<=7787;y++)I[y]=0;for(y=7791;y<=7795;y++)I[y]=0;for(y=7799;y<=7801;y++)I[y]=0;for(y=7803;y<=7805;y++)I[y]=0;for(y=7825;y<=7831;y++)I[y]=0;for(y=7845;y<=7859;y++)I[y]=0;for(y=8013;y<=8032;y++)I[y]=0;for(y=8065;y<=8068;y++)I[y]=1;for(y=8518;y<=8529;y++)I[y]=2;for(y=8533;y<=8536;y++)I[y]=2;for(y=8538;y<=8540;y++)I[y]=2;for(y=8677;y<=8679;y++)I[y]=0;for(y=8836;y<=8840;y++)I[y]=0;for(y=8857;y<=8859;y++)I[y]=0;for(y=8908;y<=8910;y++)I[y]=0;for(y=9154;y<=9159;y++)I[y]=0;for(y=9205;y<=9218;y++)I[y]=0;for(y=9271;y<=9273;y++)I[y]=0;for(y=9295;y<=9297;y++)I[y]=0;for(y=9356;y<=9360;y++)I[y]=0;for(y=9404;y<=9407;y++)I[y]=0;for(y=9476;y<=9482;y++)I[y]=0;for(y=9487;y<=9494;y++)I[y]=0;for(y=9697;y<=9699;y++)I[y]=0;for(y=9821;y<=9865;y++)I[y]=0;for(y=10285;y<=10291;y++)I[y]=0;for(y=10314;y<=10317;y++)I[y]=0;for(y=10448;y<=10465;y++)I[y]=0;for(y=10726;y<=10729;y++)I[y]=0;for(y=10731;y<=10733;y++)I[y]=0;for(y=11114;y<=11118;y++)I[y]=0;for(y=20004;y<=20032;y++)I[y]=0;for(y=20047;y<=20049;y++)I[y]=0;for(y=20062;y<=20092;y++)I[y]=0;for(y=20135;y<=20138;y++)I[y]=0;for(y=20248;y<=20258;y++)I[y]=0;for(y=20348;y<=20358;y++)I[y]=0;for(y=20436;y<=20440;y++)I[y]=0;for(y=20822;y<=20824;y++)I[y]=0;for(y=20904;y<=20932;y++)I[y]=0;for(y=20934;y<=20936;y++)I[y]=0;for(y=21004;y<=21032;y++)I[y]=0;for(y=21035;y<=21037;y++)I[y]=0;for(y=21095;y<=21097;y++)I[y]=0;for(y=21148;y<=21150;y++)I[y]=0;for(y=21207;y<=21264;y++)I[y]=0;for(y=21307;y<=21364;y++)I[y]=0;for(y=21413;y<=21423;y++)I[y]=0;for(y=21453;y<=21463;y++)I[y]=0;for(y=21473;y<=21483;y++)I[y]=0;for(y=21780;y<=21782;y++)I[y]=0;for(y=21891;y<=21894;y++)I[y]=0;for(y=21896;y<=21899;y++)I[y]=0;for(y=22171;y<=22177;y++)I[y]=0;for(y=22181;y<=22187;y++)I[y]=0;for(y=22191;y<=22197;y++)I[y]=0;for(y=22207;y<=22222;y++)I[y]=0;for(y=22229;y<=22232;y++)I[y]=0;for(y=22234;y<=22236;y++)I[y]=0;for(y=22243;y<=22250;y++)I[y]=0;for(y=22262;y<=22265;y++)I[y]=0;for(y=22307;y<=22322;y++)I[y]=0;for(y=22348;y<=22357;y++)I[y]=0;for(y=22407;y<=22422;y++)I[y]=0;for(y=22462;y<=22465;y++)I[y]=0;for(y=22521;y<=22525;y++)I[y]=0;for(y=22607;y<=22622;y++)I[y]=0;for(y=22641;y<=22646;y++)I[y]=0;for(y=22648;y<=22657;y++)I[y]=0;for(y=22707;y<=22722;y++)I[y]=0;for(y=22762;y<=22765;y++)I[y]=0;for(y=22807;y<=22822;y++)I[y]=0;for(y=22991;y<=22994;y++)I[y]=0;for(y=23028;y<=23038;y++)I[y]=0;for(y=23301;y<=23333;y++)I[y]=2;for(y=23830;y<=23853;y++)I[y]=0;for(y=23866;y<=23872;y++)I[y]=0;for(y=23877;y<=23884;y++)I[y]=0;for(y=23886;y<=23894;y++)I[y]=0;for(y=23946;y<=23948;y++)I[y]=0;for(y=24311;y<=24313;y++)I[y]=0;for(y=24342;y<=24347;y++)I[y]=0;for(y=24370;y<=24374;y++)I[y]=10;for(y=24375;y<=24381;y++)I[y]=0;for(y=24718;y<=24721;y++)I[y]=0;for(y=24817;y<=24821;y++)I[y]=0;for(y=24877;y<=24882;y++)I[y]=0;for(y=24891;y<=24893;y++)I[y]=0;for(y=25391;y<=25395;y++)I[y]=0;for(y=25828;y<=25838;y++)I[y]=0;for(y=26191;y<=26195;y++)I[y]=0;for(y=26391;y<=26393;y++)I[y]=0;for(y=26701;y<=26722;y++)I[y]=0;for(y=26729;y<=26799;y++)I[y]=2;for(y=26801;y<=26803;y++)I[y]=2;for(y=26811;y<=26813;y++)I[y]=2;for(y=26847;y<=26870;y++)I[y]=2;for(y=26891;y<=26899;y++)I[y]=0;for(y=26901;y<=26923;y++)I[y]=0;for(y=26929;y<=26946;y++)I[y]=0;for(y=26948;y<=26998;y++)I[y]=0;for(y=27037;y<=27040;y++)I[y]=0;for(y=27205;y<=27232;y++)I[y]=0;for(y=27258;y<=27260;y++)I[y]=0;for(y=27391;y<=27398;y++)I[y]=0;for(y=27561;y<=27564;y++)I[y]=0;for(y=27571;y<=27574;y++)I[y]=0;for(y=27581;y<=27584;y++)I[y]=0;for(y=27591;y<=27594;y++)I[y]=0;for(y=27700;y<=27707;y++)I[y]=0;for(y=28191;y<=28193;y++)I[y]=0;for(y=28348;y<=28358;y++)I[y]=0;for(y=28402;y<=28432;y++)I[y]=0;for(y=28462;y<=28492;y++)I[y]=0;for(y=29118;y<=29122;y++)I[y]=0;for(y=29168;y<=29172;y++)I[y]=0;for(y=29177;y<=29185;y++)I[y]=0;for(y=29187;y<=29195;y++)I[y]=0;for(y=29900;y<=29903;y++)I[y]=0;for(y=30161;y<=30179;y++)I[y]=0;for(y=30491;y<=30494;y++)I[y]=0;for(y=30729;y<=30732;y++)I[y]=0;for(y=31251;y<=31259;y++)I[y]=0;for(y=31265;y<=31268;y++)I[y]=0;for(y=31275;y<=31279;y++)I[y]=0;for(y=31281;y<=31297;y++)I[y]=0;for(y=31461;y<=31469;y++)I[y]=0;for(y=31491;y<=31495;y++)I[y]=0;for(y=31917;y<=31922;y++)I[y]=0;for(y=31965;y<=32e3;y++)I[y]=0;for(y=32001;y<=32003;y++)I[y]=2;for(y=32005;y<=32031;y++)I[y]=2;for(y=32033;y<=32060;y++)I[y]=2;for(y=32064;y<=32067;y++)I[y]=2;for(y=32074;y<=32077;y++)I[y]=2;for(y=32081;y<=32086;y++)I[y]=0;for(y=32107;y<=32130;y++)I[y]=0;for(y=32133;y<=32159;y++)I[y]=0;for(y=32164;y<=32167;y++)I[y]=2;for(y=32180;y<=32199;y++)I[y]=0;for(y=32201;y<=32260;y++)I[y]=0;for(y=32301;y<=32360;y++)I[y]=0;for(y=32401;y<=32460;y++)I[y]=0;for(y=32501;y<=32560;y++)I[y]=0;for(y=32601;y<=32662;y++)I[y]=0;for(y=32664;y<=32667;y++)I[y]=2;for(y=32701;y<=32761;y++)I[y]=0;for(y=53001;y<=53004;y++)I[y]=0;for(y=53008;y<=53019;y++)I[y]=0;for(y=53021;y<=53032;y++)I[y]=0;for(y=53034;y<=53037;y++)I[y]=0;for(y=53042;y<=53046;y++)I[y]=0;for(y=53074;y<=53080;y++)I[y]=0;for(y=54001;y<=54004;y++)I[y]=0;for(y=54008;y<=54019;y++)I[y]=0;for(y=54021;y<=54032;y++)I[y]=0;for(y=54034;y<=54037;y++)I[y]=0;for(y=54042;y<=54046;y++)I[y]=0;for(y=54048;y<=54053;y++)I[y]=0;for(y=54074;y<=54080;y++)I[y]=0;for(y=54090;y<=54096;y++)I[y]=0;for(y=54098;y<=54101;y++)I[y]=0;for(y=65161;y<=65163;y++)I[y]=0;for(y=102001;y<=102040;y++)I[y]=0;for(y=102042;y<=102063;y++)I[y]=0;for(y=102065;y<=102067;y++)I[y]=0;for(y=102070;y<=102117;y++)I[y]=0;for(y=102122;y<=102216;y++)I[y]=0;for(y=102221;y<=102377;y++)I[y]=0;for(y=102382;y<=102388;y++)I[y]=0;for(y=102389;y<=102398;y++)I[y]=2;for(y=102399;y<=102444;y++)I[y]=0;for(y=102445;y<=102447;y++)I[y]=2;for(y=102448;y<=102458;y++)I[y]=0;for(y=102459;y<=102468;y++)I[y]=2;for(y=102469;y<=102499;y++)I[y]=0;for(y=102500;y<=102519;y++)I[y]=1;for(y=102520;y<=102524;y++)I[y]=0;for(y=102525;y<=102529;y++)I[y]=2;for(y=102530;y<=102588;y++)I[y]=0;for(y=102590;y<=102598;y++)I[y]=0;for(y=102601;y<=102603;y++)I[y]=0;for(y=102605;y<=102628;y++)I[y]=0;for(y=102629;y<=102646;y++)I[y]=2;for(y=102648;y<=102700;y++)I[y]=2;for(y=102701;y<=102703;y++)I[y]=0;for(y=102707;y<=102730;y++)I[y]=2;for(y=102733;y<=102758;y++)I[y]=2;for(y=102767;y<=102900;y++)I[y]=0;for(y=102901;y<=102933;y++)I[y]=2;for(y=102934;y<=102950;y++)I[y]=13;for(y=102951;y<=102963;y++)I[y]=0;for(y=102965;y<=102969;y++)I[y]=0;for(y=102971;y<=102973;y++)I[y]=0;for(y=102975;y<=102989;y++)I[y]=0;for(y=102990;y<=102992;y++)I[y]=1;for(y=102997;y<=103002;y++)I[y]=0;for(y=103003;y<=103008;y++)I[y]=2;for(y=103009;y<=103011;y++)I[y]=0;for(y=103012;y<=103014;y++)I[y]=2;for(y=103019;y<=103021;y++)I[y]=0;for(y=103022;y<=103024;y++)I[y]=2;for(y=103029;y<=103031;y++)I[y]=0;for(y=103032;y<=103034;y++)I[y]=2;for(y=103065;y<=103068;y++)I[y]=0;for(y=103074;y<=103076;y++)I[y]=0;for(y=103077;y<=103079;y++)I[y]=1;for(y=103080;y<=103082;y++)I[y]=0;for(y=103083;y<=103085;y++)I[y]=2;for(y=103090;y<=103093;y++)I[y]=0;for(y=103097;y<=103099;y++)I[y]=0;for(y=103100;y<=103102;y++)I[y]=2;for(y=103107;y<=103109;y++)I[y]=0;for(y=103110;y<=103112;y++)I[y]=2;for(y=103113;y<=103116;y++)I[y]=0;for(y=103117;y<=103120;y++)I[y]=2;for(y=103153;y<=103157;y++)I[y]=0;for(y=103158;y<=103162;y++)I[y]=2;for(y=103163;y<=103165;y++)I[y]=0;for(y=103166;y<=103168;y++)I[y]=1;for(y=103169;y<=103171;y++)I[y]=2;for(y=103186;y<=103188;y++)I[y]=0;for(y=103189;y<=103191;y++)I[y]=2;for(y=103192;y<=103195;y++)I[y]=0;for(y=103196;y<=103199;y++)I[y]=2;for(y=103200;y<=103224;y++)I[y]=0;for(y=103225;y<=103227;y++)I[y]=1;for(y=103232;y<=103237;y++)I[y]=0;for(y=103238;y<=103243;y++)I[y]=2;for(y=103244;y<=103246;y++)I[y]=0;for(y=103247;y<=103249;y++)I[y]=2;for(y=103254;y<=103256;y++)I[y]=0;for(y=103257;y<=103259;y++)I[y]=2;for(y=103264;y<=103266;y++)I[y]=0;for(y=103267;y<=103269;y++)I[y]=2;for(y=103300;y<=103375;y++)I[y]=0;for(y=103381;y<=103383;y++)I[y]=0;for(y=103384;y<=103386;y++)I[y]=1;for(y=103387;y<=103389;y++)I[y]=0;for(y=103390;y<=103392;y++)I[y]=2;for(y=103397;y<=103399;y++)I[y]=0;for(y=103400;y<=103471;y++)I[y]=2;for(y=103476;y<=103478;y++)I[y]=0;for(y=103479;y<=103481;y++)I[y]=2;for(y=103486;y<=103488;y++)I[y]=0;for(y=103489;y<=103491;y++)I[y]=2;for(y=103492;y<=103495;y++)I[y]=0;for(y=103496;y<=103499;y++)I[y]=2;for(y=103528;y<=103543;y++)I[y]=0;for(y=103544;y<=103548;y++)I[y]=2;for(y=103549;y<=103551;y++)I[y]=0;for(y=103552;y<=103554;y++)I[y]=1;for(y=103555;y<=103557;y++)I[y]=2;for(y=103558;y<=103560;y++)I[y]=0;for(y=103571;y<=103573;y++)I[y]=0;for(y=103574;y<=103576;y++)I[y]=2;for(y=103577;y<=103580;y++)I[y]=0;for(y=103581;y<=103583;y++)I[y]=2;for(y=103595;y<=103694;y++)I[y]=0;for(y=103696;y<=103699;y++)I[y]=0;for(y=103700;y<=103793;y++)I[y]=2;for(y=103794;y<=103890;y++)I[y]=0;for(y=103891;y<=103896;y++)I[y]=2;for(y=103900;y<=103971;y++)I[y]=2;for(y=103972;y<=103977;y++)I[y]=0;for(y=112e3;y<=112101;y++)I[y]=0;const KK=[102100,102113,3857,3785,900913],swe=[104905,104971],owe=[104903],awe=[4326,...KK,...swe,...owe],kS=[-20037508342788905e-9,20037508342788905e-9],ED=[-20037508342787e-6,20037508342787e-6],WR={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:kS,origin:ED,dx:1e-5},eee={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:kS,origin:ED,dx:1e-5},102100:WR,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:kS,origin:ED,dx:1e-5},3857:WR,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:WR,104903:{wkTemplate:'GEOGCS["GCS_Moon_2000",DATUM["D_Moon_2000",SPHEROID["Moon_2000_IAU_IAG",1737400,0,AUTHORITY["ESRI","107903"]],AUTHORITY["ESRI","106903"]],PRIMEM["Reference_Meridian",0,AUTHORITY["ESRI","108900"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["ESRI","104903"]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Fi(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const i=t.wkid,r=e.wkid;if(i!=null||r!=null){if(i===r||Yo(t)&&Yo(e))return!0;const o=t.latestWkid;if(o!=null&&r===o)return!0;const u=e.latestWkid;return u!=null&&i===u}let n,s;return t.wkt2&&e.wkt2?(n=t.wkt2,s=e.wkt2):t.wkt&&e.wkt&&(n=t.wkt,s=e.wkt),!(!n||!s)&&n.toUpperCase()===s.toUpperCase()}function es(t){const e=t?.wkid;return e!=null&&e>=2e3&&eee[e]||null}function uA(t){if(!t)return;const{wkid:e,vcsWkid:i}=t;if(e)return i?JSON.stringify({wkid:e,vcsWkid:i}):String(e);const r=t.wkt||t.wkt2;return JSON.stringify(r?i?{wkt:r,vcsWkid:i}:{wkt:r}:{})}function Jy(t){if(!Fo(t))return!1;const{wkid:e}=t;if(e)return I[e]==null;const i=t.wkt2||t.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function tee(t){return!(iee(t)||ree(t))}function uf(t){return t?.wkid===4326}function LWe(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function MD(t){return t?.wkid===4490}function Yo(t){const e=t?.wkid;return e!=null&&e>=2e3&&KK.includes(e)}function AD(t){return t?.wkid===32662}function Ub(t){return t===104971||t===104905}function iee(t){return Ub(t?.wkid)}function qb(t){return t===104903}function ree(t){return qb(t?.wkid)}function lwe(t){const e=t?.wkid;return e!=null&&e>=2e3&&awe.includes(e)}function Fo(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const nee={wkid:4326,wkt:ip(eee[4326].wkTemplate,{Central_Meridian:"0.0"})},see={wkid:102100,latestWkid:3857},uwe={wkid:32662};function f6(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const oee=f6(Ji),FI=f6(Ju),VI=f6(af),aee={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Ji.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},cwe=FI.wkt.toUpperCase(),dwe=VI.wkt.toUpperCase();function UI(t){if(t!=null&&Fo(t)){const e=t.wkid,i=t.wkt2??t.wkt;if(Ub(e))return Ju;const r=i?.toUpperCase();if(i&&r===cwe)return Ju;if(qb(e)||r&&r===dwe)return af}return Ji}function jWe(t){return Ub(t)?Ju:qb(t)?af:Ji}function OS(t){return Fi(t,oee)}function cf(t){return OS(t)||Fi(t,FI)||Fi(t,VI)}const lee=39.37,pwe=Ji.radius*Math.PI/200,uee=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Gb=I,cee=/UNIT\[([^\]]+)]/i,hwe=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),fwe=Fr()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),ol=t=>t*t,Fp=t=>t*t*t,CS={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:ol(.001)},"square-centimeters":{inBaseUnits:ol(.01)},"square-decimeters":{inBaseUnits:ol(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:ol(1e3)},"square-inches":{inBaseUnits:ol(.0254)},"square-feet":{inBaseUnits:ol(.3048)},"square-yards":{inBaseUnits:ol(.9144)},"square-miles":{inBaseUnits:ol(1609.344)},"square-nautical-miles":{inBaseUnits:ol(1852)},"square-us-feet":{inBaseUnits:ol(1200/3937)},acres:{inBaseUnits:.0015625*ol(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Fp(.001)},"cubic-centimeters":{inBaseUnits:1e3*Fp(.01)},"cubic-decimeters":{inBaseUnits:1e3*Fp(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Fp(1e3)},"cubic-inches":{inBaseUnits:1e3*Fp(.0254)},"cubic-feet":{inBaseUnits:1e3*Fp(.3048)},"cubic-yards":{inBaseUnits:1e3*Fp(.9144)},"cubic-miles":{inBaseUnits:1e3*Fp(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},mwe=(()=>{const t={};for(const e in CS)for(const i in CS[e].units)t[i]=e;return t})();function ywe(t,e,i){return t*CS[i].units[e].inBaseUnits}function gwe(t,e,i){return t/CS[i].units[e].inBaseUnits}const vwe=["inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],bwe=["metric","imperial"],cA=[...bwe,...vwe],wwe=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function _we(t){return t==="imperial"||t==="metric"}function Py(t){const e=mwe[t];if(!e)throw new Error("unknown type");return e}function gG(t,e=null){return e=e||Py(t),CS[e].baseUnit===t}function rt(t,e,i){if(e===i)return t;const r=Py(e);if(r!==Py(i))throw new Error("incompatible units");const n=gG(e,r)?t:ywe(t,e,r);return gG(i,r)?n:gwe(n,i,r)}function zWe(t,e,i,r=!1){if(!r&&Jy(e))throw new Error("Unable to convert from an angular unit to a linear unit.");const n=Yy(e);return n!==i&&(t=n?rt(t,n,i):rt(t*=Kr(e),"meters",i)),t}function FWe(t,e,i,r=!1){if(!r&&Jy(i))throw new Error("Unable to convert from a linear unit to an angular unit.");const n=Yy(i);return e!==n&&(t=n?rt(t,e,n):rt(t,e,"meters")/Kr(i)),t}function Swe(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function VWe(t){return Swe(t)}function UWe(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function xwe(t,e,i){switch(i){case"metric":return m6(t,e);case"imperial":return g6(t,e);default:return i}}function $we(t,e,i){switch(i){case"metric":return y6(t,e);case"imperial":return v6(t,e);default:return i}}function m6(t,e){const i=rt(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function y6(t,e){const i=rt(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function g6(t,e){const i=rt(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function v6(t,e){const i=rt(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function Twe(t,e){const i=rt(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function Ewe(t,e){const i=rt(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function Mwe(t,e,i){return rt(t,e,"meters")/(i*Math.PI/180)}function b6(t){return fwe.fromJSON(t.toLowerCase())||null}function Kl(t){if(t!=null&&!tee(t))return 1;const e=Kr(t);return e>1e5?1:e}function dee(t){return Kr(t)>=UI(t).metersPerDegree?"meters":Yy(t)}function Kr(t,e=Ji.metersPerDegree){return Awe(t,!0)??e}function Awe(t,e=!1){const i=t?.wkid??null,r=t?.wkt2??t?.wkt??null;let n=null;if(i){if(Ub(i))return Ju.metersPerDegree;if(qb(i))return af.metersPerDegree;n=Gb.values[Gb[i]],!n&&e&&hwe.has(i)&&(n=pwe)}else r&&(yee(r)?n=vG(uee.exec(r),n):mee(r)&&(n=vG(cee.exec(r),n)));return n}function qWe(t){return Jy(t)?1:Kr(t)}function vG(t,e){return t?.[1]?pee(t[1]):e}function pee(t){return parseFloat(t.split(",")[1])}function Yy(t){const e=t?.wkid??null,i=t?.wkt2??t?.wkt??null;let r=null;if(e)r=Gb.units[Gb[e]];else if(i){const n=yee(i)?uee:mee(i)?cee:null;if(n){const s=n.exec(i);s?.[1]&&(r=Owe(s[1]))}}return r!=null?b6(r):null}function hee(t){const e=Yy(t);return e!=null&&cA.includes(e)?e:null}function fee(t){const e=dee(t);return e!=null&&cA.includes(e)?e:null}function Iwe(t){const e=Yy(t);return e==null?null:wwe.get(e)}function mee(t){return/^GEOCCS/i.test(t)}function yee(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const kwe=1e-7;function Owe(t){let i=/[\\"']([^\\"']+)/.exec(t)?.[1];if(!i||!b6(i)){const r=pee(t);i=null;const n=Gb.values;for(let s=0;s<n.length;++s)if(Math.abs(r-n[s])<kwe){i=Gb.units[s];break}}return i}function Cwe(t){const e=Yy(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const Rwe={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},Pwe={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Dwe={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},Nwe=Fr()(Rwe),Lwe=Fr()(Pwe),GWe=Fr()(Dwe);var mu,Hu;let we=(Hu=class extends B{static fromJSON(e){if(!e)return null;if(e?.wkid===102100)return mu.WebMercator;if(e?.wkid===4326)return mu.WGS84;const i=new mu;return i.read(e),i}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return uf(this)}get isWebMercator(){return Yo(this)}get isGeographic(){return Jy(this)}get isWrappable(){return lwe(this)}get metersPerUnit(){return Kr(this)}get unit(){return Yy(this)||(this.isGeographic?"degrees":null)}writeWkt(e,i){this.wkid||(i.wkt=e)}clone(){if(this===mu.WGS84)return new mu(nee);if(this===mu.WebMercator)return new mu(see);const e=new mu;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=z(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:i,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:n}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return i==null||n?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):r?s.id===i&&s.referenceServiceName===r:s.id===i}return Fi(this,e)}toJSON(e){return this.write(void 0,e)}},mu=Hu,Hu.GCS_NAD_1927=null,Hu.WGS84=null,Hu.WebMercator=null,Hu.PlateCarree=null,Hu);l([p({readOnly:!0})],we.prototype,"isWGS84",null),l([p({readOnly:!0})],we.prototype,"isWebMercator",null),l([p({readOnly:!0})],we.prototype,"isGeographic",null),l([p({readOnly:!0})],we.prototype,"isWrappable",null),l([p({type:tt,json:{write:!0}})],we.prototype,"latestWkid",void 0),l([p({readOnly:!0})],we.prototype,"metersPerUnit",null),l([p({readOnly:!0})],we.prototype,"unit",null),l([p({type:tt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],we.prototype,"wkid",void 0),l([p({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],we.prototype,"wkt",void 0),l([pe("wkt"),pe("web-scene","wkt")],we.prototype,"writeWkt",null),l([p({type:String,json:{write:!1}})],we.prototype,"wkt2",void 0),l([p({type:tt,json:{write:!0}})],we.prototype,"vcsWkid",void 0),l([p({type:tt,json:{write:!0}})],we.prototype,"latestVcsWkid",void 0),l([p()],we.prototype,"imageCoordinateSystem",void 0),we=mu=l([M("esri.geometry.SpatialReference")],we),we.prototype.toJSON.isDefaultToJSON=!0,we.GCS_NAD_1927=_e.freeze(new we({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),we.WGS84=_e.freeze(new we(nee)),we.WebMercator=_e.freeze(new we(see)),we.PlateCarree=_e.freeze(new we(uwe));let Wr=class extends B{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=we.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof we)return e;if(e!=null){const r=new we;return r.read(e,i),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};l([p()],Wr.prototype,"type",void 0),l([p({readOnly:!0})],Wr.prototype,"cache",null),l([p({readOnly:!0})],Wr.prototype,"extent",null),l([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Wr.prototype,"hasM",void 0),l([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Wr.prototype,"hasZ",void 0),l([p({type:we,json:{write:!0},value:we.WGS84})],Wr.prototype,"spatialReference",void 0),l([se("spatialReference")],Wr.prototype,"readSpatialReference",null),Wr=l([M("esri.geometry.Geometry")],Wr);function Bb(t){if(t&&typeof t=="object"&&"type"in t&&t.type==="mesh")throw new L("internal:mesh","Mesh geometries are not supported for this operation")}function jwe(t){t.forEach(Bb)}const zwe=57.29577951308232,Fwe=.017453292519943;function bG(t){return t*zwe}function wG(t){return t*Fwe}function HWe(t){return Math.PI/2-2*Math.atan(Math.exp(-t/Ji.radius))}function ID(t){return t.wkid!=null||t.wkt!=null}const ZR=[0,0];function dA(t,e,i,r,n){const s=t,o=n;if(o.spatialReference=i,"x"in s&&"x"in o)[o.x,o.y]=e(s.x,s.y,ZR,r);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=e(s.xmin,s.ymin,ZR,r),[o.xmax,o.ymax]=e(s.xmax,s.ymax,ZR,r);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const u="paths"in s?s.paths:s.rings,d=[];let h;for(let m=0;m<u.length;m++){const v=u[m];h=[],d.push(h);for(let b=0;b<v.length;b++)h.push(e(v[b][0],v[b][1],[0,0],r)),v[b].length>2&&h[b].push(v[b][2]),v[b].length>3&&h[b].push(v[b][3])}"paths"in o?o.paths=d:o.rings=d}else if("points"in s&&"points"in o){const u=s.points,d=[];for(let h=0;h<u.length;h++)d[h]=e(u[h][0],u[h][1],[0,0],r),u[h].length>2&&d[h].push(u[h][2]),u[h].length>3&&d[h].push(u[h][3]);o.points=d}return n}function iM(t,e){const i=t&&(ID(t)?t:t.spatialReference),r=e&&(ID(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!r)&&(!!Fi(r,i)||Yo(r)&&uf(i)||Yo(i)&&uf(r))}function qI(t,e){if(t==null)return null;const i=t.spatialReference,r=e&&(ID(e)?e:e.spatialReference);return iM(i,r)?Fi(i,r)?z(t):Yo(r)?dA(t,E0,we.WebMercator,!1,z(t)):uf(r)?dA(t,GI,we.WGS84,!1,z(t)):null:null}function E0(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=wG(e);return i[0]=wG(t)*Ji.radius,i[1]=Ji.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function GI(t,e,i=[0,0],r=!1){if(t===kS[0])i[0]=-180;else if(t===kS[1])i[0]=180;else{const n=bG(t/Ji.radius);i[0]=r?n:n-360*Math.floor((n+180)/360)}return i[1]=bG(Math.PI/2-2*Math.atan(Math.exp(-e/Ji.radius))),i}function Wh(t,e=!1,i=z(t)){return Bb(t),Bb(i),dA(t,E0,we.WebMercator,e,i)}function M0(t,e=!1,i=z(t)){return Bb(t),Bb(i),dA(t,GI,we.WGS84,e,i)}function gee(t,e){const i=t.x-e.x,r=t.y-e.y,n=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(i*i+r*r+n*n)}function Vwe(t){return vee(t,bee)?.[0]??null}function Uwe(t){return vee(t,bee)?.[1]??null}function vee({x:t,y:e,spatialReference:i},r=[0,0]){if(i){if(Yo(i))return GI(t,e,r);if(Jy(i))return r[0]=t,r[1]=e,r}return null}const bee=[0,0];var rM;const JR=[0,0];function _G(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let je=rM=class extends Wr{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",_e.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,r,n){let s;if(Array.isArray(t))s=t,n=e,t=s[0],e=s[1],i=s[2],r=s[3];else if(t&&typeof t=="object"){if(s=t,t=s.x!=null?s.x:s.longitude,e=s.y!=null?s.y:s.latitude,i=s.z,r=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new we(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)ie.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)ie.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&n?.isWebMercator){const u=E0(s.longitude,s.latitude,JR);t=u[0],e=u[1]}}}else _G(i)?(n=i,i=null):_G(r)&&(n=r,r=null);const o={x:t,y:e};return o.x==null&&o.y!=null?ie.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&ie.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),i!=null&&(o.z=i),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return Uwe(this)}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",E0(i,t,JR)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return Vwe(this)}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",E0(t,e,JR)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new rM;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return rM.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:r,m:n,spatialReference:s}=this,{z:o,m:u}=t;let{x:d,y:h,spatialReference:m}=t;if(!s.equals(m))if(s.isWebMercator&&m.isWGS84)[d,h]=E0(d,h),m=s;else{if(!s.isWGS84||!m.isWebMercator)return!1;[d,h]=GI(d,h),m=s}return e===d&&i===h&&r===o&&n===u&&s.wkid===m.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=es(this.spatialReference);if(!t)return this;let e=this.x;const[i,r]=t.valid,n=2*r;let s;return e>r?(s=Math.ceil(Math.abs(e-r)/n),e-=s*n):e<i&&(s=Math.ceil(Math.abs(e-i)/n),e+=s*n),this._set("x",e),this}distance(t){return gee(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};l([p({readOnly:!0})],je.prototype,"cache",null),l([p({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],je.prototype,"hasM",null),l([p({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],je.prototype,"hasZ",null),l([p({type:Number})],je.prototype,"latitude",null),l([p({type:Number})],je.prototype,"longitude",null),l([p({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Ct(t=>isNaN(t)?t:_s(t))],je.prototype,"x",void 0),l([pe("x")],je.prototype,"writeX",null),l([se("x")],je.prototype,"readX",null),l([p({type:Number,json:{write:!0}})],je.prototype,"y",void 0),l([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],je.prototype,"z",void 0),l([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],je.prototype,"m",void 0),je=rM=l([M("esri.geometry.Point")],je),je.prototype.toJSON.isDefaultToJSON=!0;let yu=class extends Re(B){constructor(...e){super(...e),this.position=new je([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new tK}normalizeCtorArgs(e,i,r,n){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return i!=null&&(s.heading=i),r!=null&&(s.tilt=r),n!=null&&(s.fov=n),s}return e}writePosition(e,i,r,n){const s=e.clone();s.x=_s(e.x||0),s.y=_s(e.y||0),s.z=e.hasZ?_s(e.z||0):e.z,i[r]=s.write({},n)}readPosition(e,i){const r=new je;return r.read(e,i),r.x=_s(r.x||0),r.y=_s(r.y||0),r.z=r.hasZ?_s(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};l([p({type:je,json:{write:{isRequired:!0}}})],yu.prototype,"position",void 0),l([pe("position")],yu.prototype,"writePosition",null),l([se("position")],yu.prototype,"readPosition",null),l([p({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ct(t=>aK.normalize(_s(t)))],yu.prototype,"heading",void 0),l([p({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ct(t=>Qr(_s(t),-180,180))],yu.prototype,"tilt",void 0),l([p({type:Number,nonNullable:!0,json:{default:55,write:!0}}),Ct(t=>Qr(_s(t,55),1,170))],yu.prototype,"fov",void 0),l([p({type:tK,nonNullable:!0,json:{read:!1,write:!1}})],yu.prototype,"layout",void 0),yu=l([M("esri.Camera")],yu);const qwe=yu,YR=[0,0];function px(t,e){return e!=null&&ms(t,e.x,e.y,e.z)}function ZWe(t,e){if(!e.points?.length)return!1;for(const i of e.points)if(!Hb(t,i))return!1;return!0}function Gwe(t,e){const{xmin:i,ymin:r,zmin:n,xmax:s,ymax:o,zmax:u}=e;return t.hasZ&&e.hasZ?ms(t,i,r,n)&&ms(t,i,o,n)&&ms(t,s,o,n)&&ms(t,s,r,n)&&ms(t,i,r,u)&&ms(t,i,o,u)&&ms(t,s,o,u)&&ms(t,s,r,u):ms(t,i,r)&&ms(t,i,o)&&ms(t,s,o)&&ms(t,s,r)}function Hb(t,e){return ms(t,e[0],e[1])}function Bwe(t,e){return ms(t,e[0],e[1],e[2])}function ms(t,e,i,r){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function w6(t,e){return YR[1]=e.y,YR[0]=e.x,Hwe(t,YR)}function Hwe(t,e){return _6(t.rings,e)}function _6(t,e){if(!t||t.length<1)return!1;if(Wwe(t))return SG(!1,t,e);let i=!1;for(let r=0,n=t.length;r<n;r++)i=SG(i,t[r],e);return i}function Wwe(t){return!Array.isArray(t[0][0])}function SG(t,e,i){const[r,n]=i;let s=t,o=0;for(let u=0,d=e.length;u<d;u++){o++,o===d&&(o=0);const[h,m]=e[u],[v,b]=e[o];(m<n&&b>=n||b<n&&m>=n)&&h+(n-m)/(b-m)*(v-h)<r&&(s=!s)}return s}function Zwe(t,e){return px(t,e)}function Jwe(t,e){const i=t.hasZ&&e.hasZ;let r,n,s;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(n=e.ymin,t.ymax<n)return!1}else if(n=t.ymin,e.ymax<n)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(s=e.zmin,t.zmax<s)return!1}else if(s=t.zmin,e.zmax<s)return!1}return!0}function Ywe(t,e){const{points:i,hasZ:r}=e,n=r?Bwe:Hb;for(const s of i)if(n(t,s))return!0;return!1}const Dy=[0,0],Ny=[0,0],Ly=[0,0],jy=[0,0],Qwe=[Dy,Ny,Ly,jy],wee=[[Ly,Dy],[Dy,Ny],[Ny,jy],[jy,Ly]];function Xwe(t,e){return Kwe(t,e.rings)}function Kwe(t,e){Dy[0]=t.xmin,Dy[1]=t.ymax,Ny[0]=t.xmax,Ny[1]=t.ymax,Ly[0]=t.xmin,Ly[1]=t.ymin,jy[0]=t.xmax,jy[1]=t.ymin;for(const i of Qwe)if(_6(e,i))return!0;for(const i of e){if(!i.length)continue;let r=i[0];if(Hb(t,r))return!0;for(let n=1;n<i.length;n++){const s=i[n];if(Hb(t,s)||_ee(r,s,wee))return!0;r=s}}return!1}function e_e(t,e){Dy[0]=t.xmin,Dy[1]=t.ymax,Ny[0]=t.xmax,Ny[1]=t.ymax,Ly[0]=t.xmin,Ly[1]=t.ymin,jy[0]=t.xmax,jy[1]=t.ymin;const i=e.paths;for(const r of i){if(!i.length)continue;let n=r[0];if(Hb(t,n))return!0;for(let s=1;s<r.length;s++){const o=r[s];if(Hb(t,o)||_ee(n,o,wee))return!0;n=o}}return!1}const nn=[0,0];function t_e(t){for(let e=0;e<t.length;e++){const i=t[e];for(let n=0;n<i.length-1;n++){const s=i[n],o=i[n+1];for(let u=e+1;u<t.length;u++)for(let d=0;d<t[u].length-1;d++){const h=t[u][d],m=t[u][d+1];if(kD(s,o,h,m,nn)&&!(nn[0]===s[0]&&nn[1]===s[1]||nn[0]===h[0]&&nn[1]===h[1]||nn[0]===o[0]&&nn[1]===o[1]||nn[0]===m[0]&&nn[1]===m[1]))return!0}}const r=i.length;if(!(r<=4))for(let n=0;n<r-3;n++){let s=r-1;n===0&&(s=r-2);const o=i[n],u=i[n+1];for(let d=n+2;d<s;d++){const h=i[d],m=i[d+1];if(kD(o,u,h,m,nn)&&!(nn[0]===o[0]&&nn[1]===o[1]||nn[0]===h[0]&&nn[1]===h[1]||nn[0]===u[0]&&nn[1]===u[1]||nn[0]===m[0]&&nn[1]===m[1]))return!0}}}return!1}function _ee(t,e,i){for(let r=0;r<i.length;r++)if(kD(t,e,i[r][0],i[r][1]))return!0;return!1}function kD(t,e,i,r,n){const[s,o]=t,[u,d]=e,[h,m]=i,[v,b]=r,_=v-h,x=s-h,$=u-s,E=b-m,A=o-m,O=d-o,D=E*$-_*O;if(D===0)return!1;const R=(_*A-E*x)/D,P=($*A-O*x)/D;return R>=0&&R<=1&&P>=0&&P<=1&&(n&&(n[0]=s+R*(u-s),n[1]=o+R*(d-o)),!0)}function i_e(t){switch(t){case"esriGeometryEnvelope":case"extent":return Jwe;case"esriGeometryMultipoint":case"multipoint":return Ywe;case"esriGeometryPoint":case"point":return Zwe;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return Xwe;case"esriGeometryPolyline":case"polyline":return e_e}}var hl;function r_e(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function Vp(t,e,i){return e==null?i:i==null?e:t(e,i)}let Xe=hl=class extends Wr{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,r,n){return r_e(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?we.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:r,spatialReference:n??we.WGS84}}static fromPoint(t){return new hl({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new je({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new hl;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&iM(e,i)&&(t=e.isWebMercator?Wh(t):M0(t,!0)),t.type==="point"?px(this,t):t.type==="extent"&&Gwe(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&iM(e,i)&&(t=e.isWebMercator?Wh(t):M0(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,r=this.height*e;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const n=(this.zmax-this.zmin)*e;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*e;this.mmin+=n,this.mmax-=n}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!Fi(e,i)&&iM(e,i)&&(t=e.isWebMercator?Wh(t):M0(t,!0)),i_e(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Vp(Math.min,this.zmin,t.zmin),this.zmax=Vp(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Vp(Math.min,this.mmin,t.mmin),this.mmax=Vp(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Vp(Math.max,this.zmin,t.zmin),this.zmax=Vp(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Vp(Math.max,this.mmin,t.mmin),this.mmax=Vp(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=es(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const r=e.isWebMercator?M0(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(r.x=QR(r.x,t).x),this.spatialReference=new we(ip((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[i,r]=t.valid,n=this.xmin,s=this.xmax;return n>=i&&n<=r&&s>=i&&s<=r||(e=this.center),e}_normalize(t,e,i){const r=this.spatialReference;if(!r)return this;const n=i??es(r);if(n==null)return this;const s=this._getParts(n).map(d=>d.extent);if(s.length<2)return s[0]||this;if(s.length>2)return t?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(t)return this._shiftCM(n);if(e)return s;let o=!0,u=!0;return s.forEach(d=>{d.hasZ||(o=!1),d.hasM||(u=!1)}),{rings:s.map(d=>{const h=[[d.xmin,d.ymin],[d.xmin,d.ymax],[d.xmax,d.ymax],[d.xmax,d.ymin],[d.xmin,d.ymin]];if(o){const m=(d.zmax-d.zmin)/2;for(let v=0;v<h.length;v++)h[v].push(m)}if(u){const m=(d.mmax-d.mmin)/2;for(let v=0;v<h.length;v++)h[v].push(m)}return h}),hasZ:o,hasM:u,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:n,ymax:s,spatialReference:o}=this,u=this.width,d=this.xmin,h=this.xmax;let m;t=t||es(o);const[v,b]=t.valid;m=QR(this.xmin,t);const _=m.x,x=m.frameId;m=QR(this.xmax,t);const $=m.x,E=m.frameId,A=_===$&&u>0;if(u>2*b){const O=new hl(d<h?_:$,n,b,s,o),D=new hl(v,n,d<h?$:_,s,o),R=new hl(0,n,b,s,o),P=new hl(v,n,0,s,o),j=[],Q=[];O.contains(R)&&j.push(x),O.contains(P)&&Q.push(x),D.contains(R)&&j.push(E),D.contains(P)&&Q.push(E);for(let re=x+1;re<E;re++)j.push(re),Q.push(re);e.push({extent:O,frameIds:[x]},{extent:D,frameIds:[E]},{extent:R,frameIds:j},{extent:P,frameIds:Q})}else _>$||A?e.push({extent:new hl(_,n,b,s,o),frameIds:[x]},{extent:new hl(v,n,$,s,o),frameIds:[E]}):e.push({extent:new hl(_,n,$,s,o),frameIds:[x]});this.cache._parts=e}const i=this.hasZ,r=this.hasM;if(i||r){const n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),r&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<e.length;s++)e[s].extent.set(n)}return e}};function QR(t,e){const[i,r]=e.valid,n=2*r;let s,o=0;return t>r?(s=Math.ceil(Math.abs(t-r)/n),t-=s*n,o=s):t<i&&(s=Math.ceil(Math.abs(t-i)/n),t+=s*n,o=-s),{x:t,frameId:o}}l([p({readOnly:!0})],Xe.prototype,"cache",null),l([p({readOnly:!0})],Xe.prototype,"center",null),l([p({readOnly:!0})],Xe.prototype,"extent",null),l([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Xe.prototype,"hasM",null),l([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Xe.prototype,"hasZ",null),l([p({readOnly:!0})],Xe.prototype,"height",null),l([p({readOnly:!0})],Xe.prototype,"width",null),l([p({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Xe.prototype,"xmin",void 0),l([p({type:Number,json:{write:!0}})],Xe.prototype,"ymin",void 0),l([p({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],Xe.prototype,"mmin",void 0),l([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Xe.prototype,"zmin",void 0),l([p({type:Number,json:{write:!0}})],Xe.prototype,"xmax",void 0),l([p({type:Number,json:{write:!0}})],Xe.prototype,"ymax",void 0),l([p({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],Xe.prototype,"mmax",void 0),l([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Xe.prototype,"zmax",void 0),Xe=hl=l([M("esri.geometry.Extent")],Xe),Xe.prototype.toJSON.isDefaultToJSON=!0;function io(t=u_e){return[t[0],t[1],t[2],t[3]]}function See(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function n_e(t,e,i,r,n=io()){return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n}function JWe(t,e=io()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function s_e(t,e,i=new Xe){return i.xmin=t[0],i.ymin=t[1],i.xmax=t[2],i.ymax=t[3],i.spatialReference=e,i}function ja(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function o_e(t,e){e<t[0]&&(t[0]=e),e>t[2]&&(t[2]=e)}function a_e(t,e){e<t[1]&&(t[1]=e),e>t[3]&&(t[3]=e)}function YWe(t,e,i){if(e!=null)if("length"in e)CD(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else See(i,t)}function QWe(t,e,i=t){const r=e.length;let n=t[0],s=t[1],o=t[2],u=t[3];for(let d=0;d<r;d++){const h=e[d];n=Math.min(n,h[0]),s=Math.min(s,h[1]),o=Math.max(o,h[0]),u=Math.max(u,h[1])}return i[0]=n,i[1]=s,i[2]=o,i[3]=u,i}function XWe(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function S6(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function x6(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function KWe(t){return S6(t)*x6(t)}function eZe(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function tZe(t){const e=S6(t),i=x6(t);return Math.sqrt(e*e+i*i)}function iZe(t,e){return!!t&&OD(t,e.x,e.y)}function OD(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function rZe(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function nZe(t,e,i){return Math.max(e[0],t[0])-i<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])-i<=Math.min(e[3],t[3])}function l_e(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function sZe(t,e,i,r){return r??=t,r[0]=t[0]+e,r[1]=t[1]+i,r[2]=t[2]+e,r[3]=t[3]+i,r}function oZe(t){return t?See(t,xG):io(xG)}function CD(t){return t!=null&&t.length===4}function aZe(t,e){return CD(t)&&CD(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const xG=[1/0,1/0,-1/0,-1/0],u_e=[0,0,0,0];let $6=1e-6;function Zi(){return $6}function c_e(t){$6=t}const hx=Math.random,d_e=Math.PI/180,p_e=180/Math.PI;function T6(t){return t*d_e}function h_e(t){return t*p_e}function f_e(t,e){return Math.abs(t-e)<=$6*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:hx,equals:f_e,getEpsilon:Zi,setEpsilon:c_e,toDegree:h_e,toRadian:T6},Symbol.toStringTag,{value:"Module"}));function cy(t,e){return t[0]=e[0],t[1]=e[1],t}function Nr(t,e,i){return t[0]=e,t[1]=i,t}function E6(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function zr(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function xee(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function $ee(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function m_e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function y_e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function g_e(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function v_e(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function b_e(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Mw(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function Yl(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}function Aw(t,e){const i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}function zy(t,e){const i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function Wb(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function Qd(t){const e=t[0],i=t[1];return e*e+i*i}function Tee(t,e){return t[0]=-e[0],t[1]=-e[1],t}function w_e(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function RD(t,e){const i=e[0],r=e[1];let n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t}function wf(t,e){return t[0]*e[0]+t[1]*e[1]}function Eee(t,e,i){const r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t}function M6(t,e,i,r){const n=e[0],s=e[1];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t}function __e(t,e=1){const i=2*hx()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function S_e(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n,t[1]=i[1]*r+i[3]*n,t}function Uu(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n+i[4],t[1]=i[1]*r+i[3]*n+i[5],t}function nM(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function x_e(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t}function $_e(t,e,i,r){const n=e[0]-i[0],s=e[1]-i[1],o=Math.sin(r),u=Math.cos(r);return t[0]=n*u-s*o+i[0],t[1]=n*o+s*u+i[1],t}function T_e(t,e){const i=t[0],r=t[1],n=e[0],s=e[1];let o=i*i+r*r;o>0&&(o=1/Math.sqrt(o));let u=n*n+s*s;u>0&&(u=1/Math.sqrt(u));const d=(i*n+r*s)*o*u;return d>1?0:d<-1?Math.PI:Math.acos(d)}function E_e(t){return"vec2("+t[0]+", "+t[1]+")"}function pA(t,e){return t[0]===e[0]&&t[1]===e[1]}function M_e(t,e){const i=t[0],r=t[1],n=e[0],s=e[1],o=Zi();return Math.abs(i-n)<=o*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))}function A_e(t,e,i,r,n){let s=e[0]-i[0],o=e[1]-i[1];const u=(r[0]*s+r[1]*o)*(n-1);return s=r[0]*u,o=r[1]*u,t[0]=e[0]+s,t[1]=e[1]+o,t}const I_e=Wb,BI=zr,k_e=xee,O_e=$ee,C_e=Aw,R_e=zy,P_e=Qd;Object.freeze(Object.defineProperty({__proto__:null,add:E6,angle:T_e,ceil:m_e,copy:cy,cross:Eee,dist:C_e,distance:Aw,div:O_e,divide:$ee,dot:wf,equals:M_e,exactEquals:pA,floor:y_e,inverse:w_e,len:I_e,length:Wb,lerp:M6,max:v_e,min:g_e,mul:k_e,multiply:xee,negate:Tee,normalize:RD,projectAndScale:A_e,random:__e,rotate:$_e,round:b_e,scale:Mw,scaleAndAdd:Yl,set:Nr,sqrDist:R_e,sqrLen:P_e,squaredDistance:zy,squaredLength:Qd,str:E_e,sub:BI,subtract:zr,transformMat2:S_e,transformMat2d:Uu,transformMat3:nM,transformMat4:x_e},Symbol.toStringTag,{value:"Module"}));function Od(t,e,i,r){return t[0]=e[0]*(1-r)+i[0]*r,t[1]=e[1]*(1-r)+i[1]*r,t}function Es(t,e){return zy(t,e)}function lZe(t,e,i){const r=Es(e,i);if(r===0)return Es(e,t);const n=(e[0]-t[0])*(i[1]-t[1])-(e[1]-t[1])*(i[0]-t[0]);return n*n/r}function D_e(t,e,i,r,n){const[s,o]=e,[u,d]=i,[h,m]=r,[v,b]=n,_=(s-u)*(m-b)-(o-d)*(h-v);if(_===0)return null;const x=(s*d-o*u)*(h-v)-(s-u)*(h*b-m*v),$=(s*d-o*u)*(m-b)-(o-d)*(h*b-m*v);return t[0]=x/_,t[1]=$/_,t}const Ul=2*Math.PI;function dy(t,e){const i=Math.atan2(t,e);return i<0?i+Ul:i}function Mee(t){return Math.abs(t)%Ul}function $G(t){const e=Mee(t);return e<Math.PI?e:Ul-e}function HI(t,e){return{min:Math.min(t,e),max:Math.max(t,e)}}function Aee(t,e,i,r){if(ro(Mee(t-e),0))return i?[t,t]:[t,r?t-Ul:t+Ul];const[n,s]=r?[t-Ul,t]:[t,t+Ul];return[t,fx({min:n,max:s},e)]}function fx({min:t,max:e},i){let r;return r=e-i,r>=Ul?(r-=r%Ul,i+r):(r=i-t,r>=Ul?(r-=r%Ul,i-r):i)}function N_e(t,e){const i=fx(t,e);return i>t.min&&i<t.max?i:$G(i-t.min)<$G(i-t.max)?t.min:t.max}function Iee(t,e,i,r=10){return e.map(n=>{let s=n;for(let o=0;o<r;o++){const[u,d,h,m,v,b]=i(s),_=t[0]-u,x=t[1]-d,$=-h,E=-m;s+=-(2*_*$+2*x*E)/(2*$*$+2*_*-v+2*E*E+2*x*-b||1e-6)}return s})}const L_e=[0,0];function kee(t){const e=1-t,i=e*e,r=t*t;return[i*e,3*t*i,3*r*e,r*t]}function PD(t,e,i,r,n){const[s,o,u,d]=kee(n);return[t[0]*s+e[0]*o+i[0]*u+r[0]*d,t[1]*s+e[1]*o+i[1]*u+r[1]*d]}function TG(t,e,i,r,n){const[s,o,u,d]=kee(n);return t*s+e*o+i*u+r*d}function uZe(t,e,i){const r=t,[n,s,o]=e.b;return PD(r,s,o,n,i)}function j_e(t,e,i){const r=t,[n,s,o]=e.b,u=Od([0,0],r,s,i),d=Od(L_e,s,o,i),h=Od([0,0],o,n,i),m=Od([0,0],u,d,i),v=Od([0,0],d,h,i);return[{b:[Od([],m,v,i),u,m]},{b:[[...n],v,h]}]}function cZe(t,e,i){const r=t,[n,s,o]=e.b,u=Iee(i,[.1,.5,.9],v=>{const b=1-v,[_,x]=PD(r,s,o,n,v);return[_,x,3*b*b*(s[0]-r[0])+6*b*v*(o[0]-s[0])+3*v*v*(n[0]-o[0]),3*b*b*(s[1]-r[1])+6*b*v*(o[1]-s[1])+3*v*v*(n[1]-o[1]),6*b*(o[0]-2*s[0]+r[0])+6*v*(n[0]-2*o[0]+s[0]),6*b*(o[1]-2*s[1]+r[1])+6*v*(n[1]-2*o[1]+s[1])]}).map(v=>Math.min(1,Math.max(0,v)));u.push(0,1);let d=1/0;const h=u.map(v=>{const b=PD(r,s,o,n,v),[_,x]=b,$=i[0]-_,E=i[1]-x,A=Math.sqrt($*$+E*E);return d=Math.min(A,d),{t:v,curvePoint:b,distance:A}}),m=[];for(const v of h){const{t:b,distance:_}=v;sK(_,d)&&!m.some(({t:x})=>ro(x,b))&&m.push(v)}return m}function z_e(t,e,i){const r=e,[n,s,o]=i.b;if(ja(t,r),ja(t,n),OD(t,s[0],s[1])&&OD(t,o[0],o[1]))return t;for(const u of EG(r[0],s[0],o[0],n[0]))u>0&&u<1&&o_e(t,TG(r[0],s[0],o[0],n[0],u));for(const u of EG(r[1],s[1],o[1],n[1]))u>0&&u<1&&a_e(t,TG(r[1],s[1],o[1],n[1],u));return t}function EG(t,e,i,r){const n=3*(3*(e-i)-t+r),s=6*(t-2*e+i),o=3*(e-t);if(n===0)return s!==0?[-o/s]:[];const u=Math.sqrt(s*s-4*n*o);return[(-s+u)/(2*n),(-s-u)/(2*n)]}function dZe(t,e,i){let n=0,s=[e];for(let o=0;o<16;o++){let u=t;const d=[];for(const m of s)d.push(...j_e(u,m,.5)),u=m.b[0];s=d,u=t,n=0;let h=0;for(const m of s){const[v,b,_]=m.b,x=Math.sqrt(Es(u,v));n+=(x+(Math.sqrt(Es(u,b))+Math.sqrt(Es(b,_))+Math.sqrt(Es(_,v))))/2,h+=x,u=v}if(n-h<i)return n}return n}function F_e(t,e,i){const[r,n]=t,[s,o]=e,[u,d]=i,[h,m]=[s-r,o-n];let v=h*(u-r)+m*(d-n);v/=h**2+m**2,v=Qr(v,0,1);const b=Od([0,0],t,e,v);return{t:v,curvePoint:b,distance:Math.sqrt(Es(b,i))}}let Oee=class{constructor(e,i,r,n,s,o){this.cx=e,this.cy=i,this.radius=r,this.thetaStart=n,this.thetaEnd=s,this.isInvalid=o}get startPoint(){const{cx:e,cy:i,radius:r,thetaStart:n}=this;return[e+r*Math.cos(n),i+r*Math.sin(n)]}get endPoint(){const{cx:e,cy:i,radius:r,thetaEnd:n}=this;return[e+r*Math.cos(n),i+r*Math.sin(n)]}};function hA(t,e){const{cx:i,cy:r,radius:n}=t;return[i+n*Math.cos(e),r+n*Math.sin(e)]}function sM(t,e){if(t.isInvalid)return Od([0,0],t.startPoint,t.endPoint,e);const{thetaStart:i,thetaEnd:r}=t;return hA(t,i*(1-e)+r*e)}function hZe(t,e){if(t.isInvalid)return F_e(t.startPoint,t.endPoint,e);const{cx:i,cy:r,thetaStart:n,thetaEnd:s}=t,[o,u]=e,d=N_e(HI(n,s),Math.atan2(u-r,o-i)),h=hA(t,d);return{t:(d-n)/(s-n),curvePoint:h,distance:Math.sqrt(Es(e,h))}}function MG(t,e){if(e.isInvalid)return ja(t,e.startPoint),ja(t,e.endPoint),t;const{cx:i,cy:r,radius:n,thetaStart:s,thetaEnd:o}=e;ja(t,hA(e,s)),ja(t,hA(e,o));const u=HI(s,o),d=Math.PI/2;let h=0;for(const m of[[i+n,r],[i,r+n],[i-n,r],[i,r-n]])h=fx(u,h),h>u.min&&h<u.max&&ja(t,m),h+=d;return t}function fZe(t){if(t.isInvalid)return 2*t.radius;const{radius:e,thetaStart:i,thetaEnd:r}=t;return e*Math.abs(r-i)}function V_e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function U_e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function F0(t,e,i,r,n,s,o,u,d,h){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t[6]=u,t[7]=d,t[8]=h,t}function Cee(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ree(t,e){if(t===e){const i=e[1],r=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Pee(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],u=e[5],d=e[6],h=e[7],m=e[8],v=m*o-u*h,b=-m*s+u*d,_=h*s-o*d;let x=i*v+r*b+n*_;return x?(x=1/x,t[0]=v*x,t[1]=(-m*r+n*h)*x,t[2]=(u*r-n*o)*x,t[3]=b*x,t[4]=(m*i-n*d)*x,t[5]=(-u*i+n*s)*x,t[6]=_*x,t[7]=(-h*i+r*d)*x,t[8]=(o*i-r*s)*x,t):null}function q_e(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],u=e[5],d=e[6],h=e[7],m=e[8];return t[0]=o*m-u*h,t[1]=n*h-r*m,t[2]=r*u-n*o,t[3]=u*d-s*m,t[4]=i*m-n*d,t[5]=n*s-i*u,t[6]=s*h-o*d,t[7]=r*d-i*h,t[8]=i*o-r*s,t}function oM(t){const e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],u=t[6],d=t[7],h=t[8];return e*(h*s-o*d)+i*(-h*n+o*u)+r*(d*n-s*u)}function RS(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],u=e[4],d=e[5],h=e[6],m=e[7],v=e[8],b=i[0],_=i[1],x=i[2],$=i[3],E=i[4],A=i[5],O=i[6],D=i[7],R=i[8];return t[0]=b*r+_*o+x*h,t[1]=b*n+_*u+x*m,t[2]=b*s+_*d+x*v,t[3]=$*r+E*o+A*h,t[4]=$*n+E*u+A*m,t[5]=$*s+E*d+A*v,t[6]=O*r+D*o+R*h,t[7]=O*n+D*u+R*m,t[8]=O*s+D*d+R*v,t}function DD(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],u=e[4],d=e[5],h=e[6],m=e[7],v=e[8],b=i[0],_=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=u,t[5]=d,t[6]=b*r+_*o+h,t[7]=b*n+_*u+m,t[8]=b*s+_*d+v,t}function Dee(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],u=e[4],d=e[5],h=e[6],m=e[7],v=e[8],b=Math.sin(i),_=Math.cos(i);return t[0]=_*r+b*o,t[1]=_*n+b*u,t[2]=_*s+b*d,t[3]=_*o-b*r,t[4]=_*u-b*n,t[5]=_*d-b*s,t[6]=h,t[7]=m,t[8]=v,t}function Nee(t,e,i){const r=i[0],n=i[1],s=i[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=s*e[6],t[7]=s*e[7],t[8]=s*e[8],t}function G_e(t,e,i){const r=i[0],n=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t}function B_e(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function H_e(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function W_e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Z_e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function fA(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,u=r+r,d=n+n,h=i*o,m=r*o,v=r*u,b=n*o,_=n*u,x=n*d,$=s*o,E=s*u,A=s*d;return t[0]=1-v-x,t[3]=m-A,t[6]=b+E,t[1]=m+A,t[4]=1-h-x,t[7]=_-$,t[2]=b-E,t[5]=_+$,t[8]=1-h-v,t}function Lee(t,e){const i=e[0],r=e[1],n=e[2],s=e[4],o=e[5],u=e[6],d=e[8],h=e[9],m=e[10],v=m*o-u*h,b=-m*s+u*d,_=h*s-o*d,x=i*v+r*b+n*_;if(!x)return null;const $=1/x;return t[0]=v*$,t[1]=(-m*r+n*h)*$,t[2]=(u*r-n*o)*$,t[3]=b*$,t[4]=(m*i-n*d)*$,t[5]=(-u*i+n*s)*$,t[6]=_*$,t[7]=(-h*i+r*d)*$,t[8]=(o*i-r*s)*$,t}function J_e(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],u=e[5],d=e[6],h=e[7],m=e[8],v=e[9],b=e[10],_=e[11],x=e[12],$=e[13],E=e[14],A=e[15],O=i*u-r*o,D=i*d-n*o,R=i*h-s*o,P=r*d-n*u,j=r*h-s*u,Q=n*h-s*d,re=m*$-v*x,ce=m*E-b*x,ue=m*A-_*x,ye=v*E-b*$,he=v*A-_*$,Pe=b*A-_*E;let ve=O*Pe-D*he+R*ye+P*ue-j*ce+Q*re;return ve?(ve=1/ve,t[0]=(u*Pe-d*he+h*ye)*ve,t[1]=(d*ue-o*Pe-h*ce)*ve,t[2]=(o*he-u*ue+h*re)*ve,t[3]=(n*he-r*Pe-s*ye)*ve,t[4]=(i*Pe-n*ue+s*ce)*ve,t[5]=(r*ue-i*he-s*re)*ve,t[6]=($*Q-E*j+A*P)*ve,t[7]=(E*R-x*Q-A*D)*ve,t[8]=(x*j-$*R+A*O)*ve,t):null}function Y_e(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Q_e(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function X_e(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function K_e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function jee(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function e1e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function t1e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t}function i1e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function r1e(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],u=t[5],d=t[6],h=t[7],m=t[8],v=e[0],b=e[1],_=e[2],x=e[3],$=e[4],E=e[5],A=e[6],O=e[7],D=e[8],R=Zi();return Math.abs(i-v)<=R*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(r-b)<=R*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-_)<=R*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(s-x)<=R*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(o-$)<=R*Math.max(1,Math.abs(o),Math.abs($))&&Math.abs(u-E)<=R*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(d-A)<=R*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(h-O)<=R*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(m-D)<=R*Math.max(1,Math.abs(m),Math.abs(D))}function n1e(t){const e=Zi(),i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],u=t[5],d=t[6],h=t[7],m=t[8];return Math.abs(1-(i*i+s*s+d*d))<=e&&Math.abs(1-(r*r+o*o+h*h))<=e&&Math.abs(1-(n*n+u*u+m*m))<=e}const s1e=RS,o1e=jee;Object.freeze(Object.defineProperty({__proto__:null,add:K_e,adjoint:q_e,copy:U_e,determinant:oM,equals:r1e,exactEquals:i1e,frob:X_e,fromMat2d:Z_e,fromMat4:V_e,fromQuat:fA,fromRotation:H_e,fromScaling:W_e,fromTranslation:B_e,identity:Cee,invert:Pee,isOrthoNormal:n1e,mul:s1e,multiply:RS,multiplyScalar:e1e,multiplyScalarAndAdd:t1e,normalFromMat4:J_e,normalFromMat4Legacy:Lee,projection:Y_e,rotate:Dee,scale:Nee,scaleByVec2:G_e,set:F0,str:Q_e,sub:o1e,subtract:jee,translate:DD,transpose:Ree},Symbol.toStringTag,{value:"Module"}));function tu(){return[1,0,0,0,1,0,0,0,1]}function a1e(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function zee(t,e,i,r,n,s,o,u,d){return[t,e,i,r,n,s,o,u,d]}const l1e=tu();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:l1e,clone:a1e,create:tu,fromValues:zee},Symbol.toStringTag,{value:"Module"}));const Zg=tu();function u1e(t,e,i){const[r,n]=t,[s,o]=e,[u,d]=i;F0(Zg,r,s,u,n,o,d,1,1,1);const h=oM(Zg),m=4*h/(Es(t,e)+Es(e,i)+Es(i,t));if(!isFinite(m)||Math.abs(m)<1e-8)return null;const v=r**2+n**2,b=s**2+o**2,_=u**2+d**2;F0(Zg,v,b,_,n,o,d,1,1,1);const x=oM(Zg);return F0(Zg,v,b,_,r,s,u,1,1,1),[x/h*.5,oM(Zg)/h*-.5]}function Fee(t,e){const[i,r]=e.c,n=u1e(t,r,i),s=n==null,o=n??Od([],t,i,.5),[u,d]=t,[h,m]=r,[v,b]=i,[_,x]=o,$=u-_,E=d-x,A=Math.sqrt($*$+E*E),O=dy(d-x,u-_),D=dy(m-x,h-_);let R=dy(b-x,v-_);return(D-O)*(R-D)<0&&(R+=2*Math.sign(O-R)*Math.PI),new Oee(_,x,A,O,R,s)}function mZe(t,e,i){const r=sM(t,i/2),n=sM(t,i),s=sM(t,(i+1)/2);return[{c:[n,r]},{c:[[...e.c[0]],s]}]}function yZe(t,e){const[i]=e.c,{cx:r,cy:n,thetaStart:s,thetaEnd:o,radius:u,isInvalid:d}=Fee(t,e);return{a:[i,[r,n],Math.abs(o-s)<Math.PI?1:0,s>o?1:0,d?s:0,u,d?0:1]}}function gZe(t){return"curveRings"in t&&!!t.curveRings?.length||"curvePaths"in t&&!!t.curvePaths?.length}function vZe(t){return"curveRings"in t?t.curveRings:t.curvePaths}function A6(t){return"b"in t}function I6(t){return"c"in t}function WI(t){return Array.isArray(t)}function bZe(t){return"a"in t}function Vee(t){return"a"in t&&t.a.length===4}function c1e(t){return"a"in t&&t.a.length===7}function XR(t){return WI(t)?t:A6(t)?t.b[0]:I6(t)?t.c[0]:t.a[0]}function d1e(t){if(A6(t)){const[e,i,r]=t.b;return{b:[[...e],[...i],[...r]]}}if(I6(t)){const[e,i]=t.c;return{c:[[...e],[...i]]}}if(WI(t))return[...t];if(Vee(t)){const[e,i,r,n]=t.a;return{a:[[...e],[...i],r,n]}}if(c1e(t)){const[e,i,r,n,s,o,u]=t.a;return{a:[[...e],[...i],r,n,s,o,u]}}return t}function p1e(t,e){const[i,r,n,s]=e.a,[o,u]=t,[d,h]=i,[m,v]=r,b=o-m,_=u-v,x=Math.sqrt(b*b+_*_),$=d-m,E=h-v,A=Math.sqrt($*$+E*E),O=x===0||A===0||!sK(x,A),D=x,[R,P]=Aee(dy(u-v,o-m),Math.atan2(h-v,d-m),n,s);return new Oee(m,v,D,R,P,O)}function wZe(t,e,i){const{cx:r,cy:n,thetaStart:s,thetaEnd:o}=t,[u,d,h,m]=e.a,v=s*(1-i)+o*i;return[{a:[sM(t,i),[r,n],Math.abs(v-s)<Math.PI?1:0,m]},{a:[[...u],[r,n],Math.abs(o-v)<Math.PI?1:0,m]}]}let h1e=class{constructor(e,i,r,n,s,o,u,d,h){this.cx=e,this.cy=i,this.a=r,this.b=n,this.cosR=s,this.sinR=o,this.u1=u,this.u2=d,this.isInvalid=h}};function k6(t,e){const[i,r,n,s,o,u,d]=e.a,[h,m]=t,[v,b]=i,[_,x]=r,$=u*d,E=Math.cos(o),A=Math.sin(o),[O,D]=Aee(dy(1/$*(m-x)*E-1/$*(h-_)*A,1/u*(m-x)*A+1/u*(h-_)*E),Math.atan2(1/$*(b-x)*E-1/$*(v-_)*A,1/u*(b-x)*A+1/u*(v-_)*E),n,s);return new h1e(_,x,u,$,E,A,O,D,u===0||$===0)}function PS(t,e){const{a:i,b:r,cosR:n,sinR:s,cx:o,cy:u}=t,d=Math.cos(e),h=Math.sin(e);return[i*d*n-r*h*s+o,i*d*s+r*h*n+u]}function _v(t,e){const{u1:i,u2:r}=t;return PS(t,i*(1-e)+r*e)}function SZe(t,e,i){if(i<0||i>1)return[];if(i===0||i===1)return[d1e(e)];const[r,[n,s],o,u,d,h,m]=e.a,{u1:v,u2:b}=t,_=v*(1-i)+b*i;return[{a:[[..._v(t,i)],[n,s],Math.abs(_-v)<Math.PI?1:0,u,d,h,m]},{a:[[...r],[n,s],Math.abs(b-_)<Math.PI?1:0,u,d,h,m]}]}function xZe(t,e){const{a:i,b:r,cosR:n,sinR:s,u1:o,u2:u}=t,d=Math.PI/6,h=Iee(e,[1*d,2*d,4*d,5*d,7*d,8*d,10*d,11*d],$=>{const E=Math.cos($),A=Math.sin($),[O,D]=PS(t,$);return[O,D,-i*n*A-r*s*E,-i*s*A+r*n*E,-i*n*E+r*s*A,-i*s*E-r*n*A]}),m=HI(o,u),v=new Set(h.map($=>fx(m,$)).filter($=>$>m.min&&$<m.max));v.add(o),v.add(u);let b,_,x=1/0;for(const $ of v){const E=PS(t,$),[A,O]=E,D=e[0]-A,R=e[1]-O,P=D*D+R*R;P<x&&(b=($-o)/(u-o),_=E,x=P)}return{t:b,curvePoint:_,distance:Math.sqrt(x)}}function f1e(t,e,i){const r=k6(e,i),{a:n,b:s,u1:o,u2:u,cosR:d,sinR:h,isInvalid:m}=r,v=i.a[0];if(ja(t,e),ja(t,v),m)return t;const b=Math.atan2(-s*h,n*d),_=b+Math.PI,x=Math.atan2(s*d,n*h),$=x+Math.PI,E=HI(o,u);for(const A of[b,_,x,$].map(O=>fx(E,O)))A>E.min&&A<E.max&&ja(t,PS(r,A));return t}function $Ze(t,e,i){const[r,n,s,o,u,d,h]=e.a,m=k6(t,e),{u1:v,u2:b,isInvalid:_}=m,x=b-v;if(_)return Math.sqrt(Es(t,r));const $=14,E=[0,0];let A=0,O=[_v(m,0),_v(m,.25),_v(m,.5),_v(m,.75),_v(m,1)];for(let D=0;D<$;D++){const R=O.length-1,P=x/(2*R),j=[];for(let re=0;re<R;re++)j.push(O[re]),j.push(PS(m,v+(2*re+1)*P));j.push(O[O.length-1]),O=j,A=0;let Q=0;for(let re=1;re<O.length;re++){const ce=O[re-1],ue=O[re];if(A+=Math.sqrt(Es(ce,ue)),re>1){const ye=O[re-2],he=D_e(E,ye,ce,n,ue);Q+=he?Math.sqrt(Es(ce,he)):Math.abs(ue[0]-ce[0])+Math.abs(ue[1]-ce[1])}else Q+=A}if(Q-A<i)return A}return A}const AG=tu(),hT=tu(),IG=tu(),Up=tu();function TZe(t,e,i){const[r,n,s,o,u,d,h]=e.a,m=k6(t,e),{cosR:v,sinR:b,a:_,b:x,cx:$,cy:E}=m,A=nM([0,0],r,i),O=nM([0,0],n,i),D=i[0]*i[4]<0?1-o:o;{const R=_*_*b*b+x*x*v*v,P=2*(x*x-_*_)*b*v,j=_*_*v*v+x*x*b*b,Q=-2*R*$-P*E,re=-P*$-2*j*E;F0(AG,R,P/2,Q/2,P/2,j,re/2,Q/2,re/2,R*$*$+P*$*E+j*E*E-_*_*x*x)}if(Pee(hT,i),hT==null){const R=nM([0,0],t,i);return{a:[A,O,s,o,dy(A[1],A[0]),Math.sqrt(Es(A,R))/2,0]}}Ree(IG,hT),RS(Up,RS(Up,IG,AG),hT);{const R=Up[0],P=2*Up[1],j=Up[4],Q=2*Up[2],re=2*Up[5],ce=P*P-4*R*j,ue=2*(R*re*re+j*Q*Q-P*Q*re+ce*Up[8]),ye=Math.sqrt((R-j)**2+P*P),he=-Math.sqrt(ue*(R+j+ye))/ce,Pe=-Math.sqrt(ue*(R+j-ye))/ce;return{a:[A,O,s,D,.5*dy(-P,j-R),he,Pe/he]}}}function m1e(t,e,i){if(WI(i))return ja(t,e),ja(t,i),t;if(A6(i))return z_e(t,e,i);if(I6(i)){const r=Fee(e,i);return MG(t,r)}if(Vee(i)){const r=p1e(e,i);return MG(t,r)}return f1e(t,e,i)}function Uee(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function qee(t){return t.points!==void 0}function Gee(t){return t.x!==void 0&&t.y!==void 0}function Bee(t){return t.paths!==void 0}function Hee(t){return t.rings!==void 0}function Wee(t){function e(i,r){return i==null?r:r==null?i:t(i,r)}return e}const Lh=Wee(Math.min),jh=Wee(Math.max);function EZe(t,e){return Bee(e)?Zb(t,e.curvePaths??e.paths,!1,!1)??t:Hee(e)?Zb(t,e.curveRings??e.rings,!1,!1)??t:qee(e)?O6(t,e.points,!1,!1,!1,!1):Uee(e)?Zee(t,e):(Gee(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function MZe(t){let e,i,r,n;for(t.reset(),e=r=1/0,i=n=-1/0;t.nextPath();){const s=y1e(t);e=Math.min(s[0],e),r=Math.min(s[1],r),i=Math.max(s[2],i),n=Math.max(s[3],n)}return io([e,r,i,n])}function y1e(t){let e,i,r,n;for(e=r=1/0,i=n=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),i=Math.max(t.x,i),n=Math.max(t.y,n);return io([e,r,i,n])}function AZe(t,e){return Bee(e)?Zb(t,e.curvePaths??e.paths,!0,!1)??t:Hee(e)?Zb(t,e.curveRings??e.rings,!0,!1)??t:qee(e)?O6(t,e.points,!0,!1,!0,!1):Uee(e)?Zee(t,e,!0,!1,!0,!1):(Gee(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function Zb(t,e,i,r){const n=i?3:2;if(!e.length||!e[0].length)return null;let s,o,u,d,[h,m]=XR(e[0][0]),v=h,b=m;for(let _=0;_<e.length;_++){const x=e[_];for(let $=0;$<x.length;$++){const E=XR(x[$]),[A,O]=E;if(h=Lh(h,A),m=Lh(m,O),v=jh(v,A),b=jh(b,O),i&&E.length>2){const j=E[2];s=Lh(s,j),o=jh(o,j)}if(r&&E.length>n){const j=E[n];u=Lh(s,j),d=jh(o,j)}const D=x[$];if(WI(D)||$<1)continue;const R=XR(x[$-1]),P=n_e(h,m,v,b);[h,m,v,b]=m1e(P,R,D)}}return i?r?(t[0]=h,t[1]=m,t[2]=s,t[3]=u,t[4]=v,t[5]=b,t[6]=o,t[7]=d,t.length=8,t):(t[0]=h,t[1]=m,t[2]=s,t[3]=v,t[4]=b,t[5]=o,t.length=6,t):r?(t[0]=h,t[1]=m,t[2]=u,t[3]=v,t[4]=b,t[5]=d,t.length=6,t):(t[0]=h,t[1]=m,t[2]=v,t[3]=b,t.length=4,t)}function Zee(t,e,i,r,n,s){const o=e.xmin,u=e.xmax,d=e.ymin,h=e.ymax;let m=e.zmin,v=e.zmax,b=e.mmin,_=e.mmax;return n?(m=m||0,v=v||0,s?(b=b||0,_=_||0,t[0]=o,t[1]=d,t[2]=m,t[3]=b,t[4]=u,t[5]=h,t[6]=v,t[7]=_,t):(t[0]=o,t[1]=d,t[2]=m,t[3]=u,t[4]=h,t[5]=v,t)):s?(b=b||0,_=_||0,t[0]=o,t[1]=d,t[2]=b,t[3]=u,t[4]=h,t[5]=_,t):(t[0]=o,t[1]=d,t[2]=u,t[3]=h,t)}function O6(t,e,i,r,n,s){const o=i?3:2,u=r&&s,d=i&&n;if(!e.length||!e[0].length)return null;let h,m,v,b,[_,x]=e[0],[$,E]=e[0];for(let A=0;A<e.length;A++){const O=e[A],[D,R]=O;if(_=Lh(_,D),x=Lh(x,R),$=jh($,D),E=jh(E,R),d&&O.length>2){const P=O[2];h=Lh(h,P),m=jh(m,P)}if(u&&O.length>o){const P=O[o];v=Lh(h,P),b=jh(m,P)}}return n?(h=h||0,m=m||0,s?(v=v||0,b=b||0,t[0]=_,t[1]=x,t[2]=h,t[3]=v,t[4]=$,t[5]=E,t[6]=m,t[7]=b,t):(t[0]=_,t[1]=x,t[2]=h,t[3]=$,t[4]=E,t[5]=m,t)):s?(v=v||0,b=b||0,t[0]=_,t[1]=x,t[2]=v,t[3]=$,t[4]=E,t[5]=b,t):(t[0]=_,t[1]=x,t[2]=$,t[3]=E,t)}function g1e(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function v1e(t){return t.points!==void 0}function b1e(t){return t.x!==void 0&&t.y!==void 0}function w1e(t){return t.paths!==void 0}function _1e(t){return t.rings!==void 0}const C6=[];function Jee(t,e,i,r){return{xmin:t,ymin:e,xmax:i,ymax:r}}function Yee(t,e,i,r,n,s){return{xmin:t,ymin:e,zmin:i,xmax:r,ymax:n,zmax:s}}function Qee(t,e,i,r,n,s){return{xmin:t,ymin:e,mmin:i,xmax:r,ymax:n,mmax:s}}function Xee(t,e,i,r,n,s,o,u){return{xmin:t,ymin:e,zmin:i,mmin:r,xmax:n,ymax:s,zmax:o,mmax:u}}function R6(t,e=!1,i=!1){return e?i?Xee(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):Yee(t[0],t[1],t[2],t[3],t[4],t[5]):i?Qee(t[0],t[1],t[2],t[3],t[4],t[5]):Jee(t[0],t[1],t[2],t[3])}function IZe(t){return t?g1e(t)?t:b1e(t)?S1e(t):_1e(t)?ete(t):w1e(t)?tte(t):v1e(t)?Kee(t):null:null}function Kee(t){const{hasZ:e,hasM:i,points:r}=t,n=O6(C6,r,e??!1,i??!1,e??!1,i??!1);return n?R6(n,e,i):null}function S1e(t){const{x:e,y:i,z:r,m:n}=t,s=n!=null;return r!=null?s?Xee(e,i,r,n,e,i,r,n):Yee(e,i,r,e,i,r):s?Qee(e,i,n,e,i,n):Jee(e,i,e,i)}function ete(t){const{hasZ:e,hasM:i,rings:r,curveRings:n}=t,s=Zb(C6,n??r,e??!1,i??!1);return s?R6(s,e,i):null}function tte(t){const{hasZ:e,hasM:i,paths:r,curvePaths:n}=t,s=Zb(C6,n??r,e??!1,i??!1);return s?R6(s,e,i):null}function Jb(t,e,i=!1){let{hasM:r,hasZ:n}=t;Array.isArray(e)?e.length!==4||r||n?e.length===3&&i&&!r?(n=!0,r=!1):e.length===3&&r&&n&&(r=!1,n=!1):(r=!0,n=!0):(n=!n&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!n||e.hasZ)),t.hasZ=n,t.hasM=r}var ND;function x1e(t){if(!t)return;let{points:e,hasM:i,hasZ:r,spatialReference:n}=t;switch(e??=[],e?.at(0)?.length){case 4:r??=!0,i??=!0;break;case 3:r??=i!==!0,i??=!r;break;default:r??=!1,i??=!1}return n??=we.WGS84,{...t,hasM:i,hasZ:r,points:e,spatialReference:n}}let Jn=ND=class extends Wr{constructor(t){super(x1e(t)),this.points=[],this.type="multipoint"}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=Kee(this);return t?new Xe({...t,spatialReference:this.spatialReference}):null}writePoints(t,e){e.points=z(this.points)}clone(){const{points:t,spatialReference:e,hasM:i,hasZ:r}=this;return new ND({points:z(t),spatialReference:e.clone(),hasM:i,hasZ:r})}addPoint(t){return Jb(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=e[2],r=3),this.hasM&&(i.m=e[r]),new je(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new je(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(Jb(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};l([p({readOnly:!0})],Jn.prototype,"cache",null),l([p({readOnly:!0})],Jn.prototype,"extent",null),l([p({type:[[Number]],json:{write:{isRequired:!0}}})],Jn.prototype,"points",void 0),l([pe("points")],Jn.prototype,"writePoints",null),Jn=ND=l([M("esri.geometry.Multipoint")],Jn),Jn.prototype.toJSON.isDefaultToJSON=!0;function kZe(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function $1e(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}function kG(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.map(r=>[r]);if(t.type==="extent"){const r=t.clone().normalize();if(!r)return null;let n=!1,s=!1;return r.forEach(o=>{o.hasZ&&(n=!0),o.hasM&&(s=!0)}),r.map(o=>{const u=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(n&&o.hasZ){const d=.5*(o.zmax-o.zmin);for(let h=0;h<u.length;h++)u[h].push(d)}if(s&&o.hasM){const d=.5*(o.mmax-o.mmin);for(let h=0;h<u.length;h++)u[h].push(d)}return u})}return null}function ZI(t,e){const i=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const n=t[2]-e[2];return Math.sqrt(i*i+r*r+n*n)}return Math.sqrt(i*i+r*r)}function ite(t,e,i){const r=t[0]+i*(e[0]-t[0]),n=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[r,n,t[2]+i*(e[2]-t[2])]:[r,n]}function T1e(t,e,i,r){return E1e(t,e,i[r],i[r+1])}function E1e(t,e,i,r){const[n,s]=e,[o,u]=i,[d,h]=r,m=d-o,v=h-u,b=m*m+v*v,_=(n-o)*m+(s-u)*v,x=Math.min(1,Math.max(0,_/b));return t[0]=o+m*x,t[1]=u+v*x,t}function OZe(t,e,i,r,n,s){let o=i,u=r,d=n-o,h=s-u;if(d!==0||h!==0){const m=((t-o)*d+(e-u)*h)/(d*d+h*h);m>1?(o=n,u=s):m>0&&(o+=d*m,u+=h*m)}return d=t-o,h=e-u,d*d+h*h}function rte(t,e){return ite(t,e,.5)}function CZe(t){const e=t.length;let i=0;for(let r=0;r<e-1;++r)i+=ZI(t[r],t[r+1]);return i}function RZe(t,e){if(e<=0)return t[0];const i=t.length;let r=0;for(let n=0;n<i-1;++n){const s=ZI(t[n],t[n+1]);if(e-r<s){const o=(e-r)/s;return ite(t[n],t[n+1],o)}r+=s}return t[i-1]}function nte(t,e=0,i=1){let r=0;const n=t.length;let s=t[0];for(let o=1;o<n;o++){const u=t[o];r+=(u[e]-s[e])*(u[i]+s[i]),s=u}if(ste(t)){const o=t[0];r+=(o[e]-s[e])*(o[i]+s[i])}return r>=0}function ste(t){const e=t.length;return e>0&&!nx(t[0],t[e-1])}function PZe(t){"rings"in t&&(M1e(t),A1e(t))}function M1e(t){if("rings"in t)for(const e of t.rings)ste(e)&&e.push(e[0].slice())}function A1e(t){if(!("rings"in t)||t.rings.length===0||nte(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function DZe(t){return t.type!=="polygon"&&t.type!=="polyline"||I1e(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function I1e(t,e){const i=es(e);if(!i)return;const r=i.valid[0],n=i.valid[1],s=n-r;for(const o of t){let u=1/0,d=-1/0;for(const m of o){const v=ote(m[0],r,n);u=Math.min(u,v),d=Math.max(d,v),m[0]=v}const h=d-u;s-h<h&&o.forEach(m=>{m[0]<0&&(m[0]+=s)})}}function ote(t,e,i){const r=i-e;return t<e?i-(e-t)%r:t>i?e+(t-e)%r:t}function NZe(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[i,r]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return i.length===r.length&&i.every((n,s)=>n.length===r[s].length)}function LZe(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function k1e(t){return C1e(t.rings,t.hasZ??!1)}function O1e(t){const e=k1e(t);if(!e)return null;const{hasZ:i,spatialReference:r}=t,[n,s,o]=e;return isNaN(n)||isNaN(s)||i&&isNaN(o)?null:{x:n,y:s,z:i?o:void 0,spatialReference:r}}function C1e(t,e){if(!t?.length)return null;const i=[],r=[],n=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=t.length;s<o;s++){const u=ate(t[s],e,n);u&&r.push(u)}if(r.sort((s,o)=>{let u=s[2]-o[2];return u===0&&e&&(u=s[4]-o[4]),u}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],e&&(i[2]=r[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||e&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){const s=t[0]&&t[0].length?R1e(t[0],e):null;if(!s)return null;i[0]=s[0],i[1]=s[1],e&&s.length>2&&(i[2]=s[2])}return i}function ate(t,e,i){let r=0,n=0,s=0,o=0,u=0;const d=t.length?t[0][0]:0,h=t.length?t[0][1]:0,m=t.length&&e?t[0][2]:0;for(let b=0;b<t.length;b++){const _=t[b],x=t[(b+1)%t.length],[$,E,A]=_,O=$-d,D=E-h,[R,P,j]=x,Q=R-d,re=P-h,ce=O*re-Q*D;if(o+=ce,r+=(O+Q)*ce,n+=(D+re)*ce,e&&_.length>2&&x.length>2){const ue=A-m,ye=j-m,he=O*ye-Q*ue;s+=(ue+ye)*he,u+=he}$<i[0]&&(i[0]=$),$>i[1]&&(i[1]=$),E<i[2]&&(i[2]=E),E>i[3]&&(i[3]=E),e&&(A<i[4]&&(i[4]=A),A>i[5]&&(i[5]=A))}if(o>0&&(o*=-1),u>0&&(u*=-1),!o)return null;o*=.5,u*=.5;const v=[r/(6*o)+d,n/(6*o)+h,o];return e&&(i[4]===i[5]||u===0?(v[3]=(i[4]+i[5])/2,v[4]=0):(v[3]=s/(6*u)+m,v[4]=u)),v}function jZe(t,e){let i=0,r=0,n=0;t.nextPoint();const s=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let u=0;u<t.pathSize;u++){t.seekInPath(u);const d=[t.x,t.y];t.seekInPath((u+1)%t.pathSize);const h=[t.x,t.y],[m,v]=d,b=m-s,_=v-o,[x,$]=h,E=x-s,A=$-o,O=b*A-E*_;n+=O,i+=(b+E)*O,r+=(_+A)*O,m<e[0]&&(e[0]=m),m>e[1]&&(e[1]=m),v<e[2]&&(e[2]=v),v>e[3]&&(e[3]=v)}return n>0&&(n*=-1),n?(n*=.5,[i/(6*n)+s,r/(6*n)+o,n]):null}function R1e(t,e){const i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,s=0,o=0,u=0;for(let d=0,h=t.length;d<h-1;d++){const m=t[d],v=t[d+1];if(m&&v){i[0]=m[0],i[1]=m[1],r[0]=v[0],r[1]=v[1],e&&m.length>2&&v.length>2&&(i[2]=m[2],r[2]=v[2]);const b=ZI(i,r);if(b){n+=b;const _=rte(m,v);s+=b*_[0],o+=b*_[1],e&&_.length>2&&(u+=b*_[2])}}}return n>0?e?[s/n,o/n,u/n]:[s/n,o/n]:t.length?t[0]:null}function P1e(t){const{hasZ:e,totalSize:i}=t;if(i===0)return null;const r=[],n=[],s=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=ate($1e(t),t.hasZ,s);o&&n.push(o)}if(n.sort((o,u)=>{let d=o[2]-u[2];return d===0&&e&&(d=o[4]-u[4]),d}),n.length&&(r[0]=n[0][0],r[1]=n[0][1],e&&(r[2]=n[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||e&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const o=t.pathSize?D1e(t):null;if(!o)return null;r[0]=o[0],r[1]=o[1],e&&o.length>2&&(r[2]=o[2])}return r}function D1e(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let n=0,s=0,o=0,u=0;if(t.nextPoint()){let d=t.x,h=t.y,m=t.z;for(;t.nextPoint();){const v=t.x,b=t.y,_=t.z;i[0]=d,i[1]=h,r[0]=v,r[1]=b,e&&(i[2]=m,r[2]=_);const x=ZI(i,r);if(x){n+=x;const $=rte(i,r);s+=x*$[0],o+=x*$[1],e&&$.length>2&&(u+=x*$[2])}d=v,h=b,m=_}}return n>0?e?[s/n,o/n,u/n]:[s/n,o/n]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const N1e=1e-6;function zZe(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<N1e){const n=P1e(t);return n?[n[0],n[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)j1e(i,r,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=r[0],i[1]+=r[1],i}const L1e=1/3;function j1e(t,e,i){if(!t||!i||i.pathSize<3)return null;i.nextPoint();const r=i.x,n=i.y;i.nextPoint();let s,o=i.x-r,u=i.y-n,d=0,h=0;for(;i.nextPoint();)d=i.x-r,h=i.y-n,s=.5*L1e*(d*u-h*o),t[0]+=s*(o+d),t[1]+=s*(u+h),o=d,u=h;const m=i.getCurrentRingArea(),v=[r,n];return v[0]-=e[0],v[1]-=e[1],v[0]*=m,v[1]*=m,t[0]+=v[0],t[1]+=v[1],t}var aM;function OG(t){return!Array.isArray(t[0])}function z1e(t){return typeof t[0]?.[0]=="number"}function F1e(t){if(!t)return;let{rings:e,hasM:i,hasZ:r,spatialReference:n}=t;switch(e??=[],z1e(e)&&(e=[e]),e[0]?.[0]?.length){case 4:r??=!0,i??=!0;break;case 3:r??=i!==!0,i??=!r;break;default:r??=!1,i??=!1}return n??=we.WGS84,{...t,hasM:i,hasZ:r,rings:e,spatialReference:n}}let hi=aM=class extends Wr{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:i}=t;let r=!1,n=!1;for(const o of e)o.hasZ&&(r=!0),o.hasM&&(n=!0);const s={rings:e.map(o=>{const u=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const d=o.zmin+.5*(o.zmax-o.zmin);for(let h=0;h<u.length;h++)u[h].push(d)}if(n&&o.hasM){const d=o.mmin+.5*(o.mmax-o.mmin);for(let h=0;h<u.length;h++)u[h].push(d)}return u}),spatialReference:i};return r&&(s.hasZ=!0),n&&(s.hasM=!0),new aM(s)}constructor(t){super(F1e(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){pD(ie.getLogger(this),"centroid",{replacement:"Please use centroidOperator.execute() instead.",version:"4.34",warnOnce:!0});const t=O1e(this);return t?je.fromJSON(t):null}writeCurveRings(t,e){e.curveRings=z(t)}get extent(){const t=ete(this),{spatialReference:e}=this;return t?new Xe({...t,spatialReference:e}):null}get isSelfIntersecting(){return pD(ie.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),t_e(this.rings)}writeRings(t,e){e.rings=z(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(OG(t)){const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new aM;return t.spatialReference=this.spatialReference,t.rings=z(this.rings),t.curveRings=z(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const r=([n,s,o,u],[d,h,m,v])=>n===d&&s===h&&(o==null&&m==null||o===m)&&(u==null&&v==null||u===v);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],o=t.rings[n];if(!nx(s,o,r))return!1}return!0}contains(t){if(!t)return!1;const e=qI(t,this.spatialReference);return w6(this,e??t)}isClockwise(t){const e=OG(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t;return nte(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new je(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new je(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new je(i[0],i[1],i[2],i[3],this.spatialReference):new je(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(Jb(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new je(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,r=e.map(n=>new je(n,i));return this.notifyChange("rings"),r}setPoint(t,e,i){return this._validateInputs(t,e)?(Jb(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};l([p({readOnly:!0})],hi.prototype,"cache",null),l([p({readOnly:!0})],hi.prototype,"centroid",null),l([p({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],hi.prototype,"curveRings",void 0),l([pe("curveRings")],hi.prototype,"writeCurveRings",null),l([p({readOnly:!0})],hi.prototype,"extent",null),l([p({readOnly:!0})],hi.prototype,"isSelfIntersecting",null),l([p({type:[[[Number]]],json:{write:{isRequired:!0}}})],hi.prototype,"rings",void 0),l([pe("rings")],hi.prototype,"writeRings",null),hi=aM=l([M("esri.geometry.Polygon")],hi),hi.prototype.toJSON.isDefaultToJSON=!0;var LD;function V1e(t){return!Array.isArray(t[0])}function U1e(t){return typeof t[0]?.[0]=="number"}function q1e(t){if(!t)return;let{paths:e,hasM:i,hasZ:r,spatialReference:n}=t;switch(e??=[],U1e(e)&&(e=[e]),e[0]?.[0]?.length){case 4:r??=!0,i??=!0;break;case 3:r??=i!==!0,i??=!r;break;default:r??=!1,i??=!1}return n??=we.WGS84,{...t,hasM:i,hasZ:r,paths:e,spatialReference:n}}let Kt=LD=class extends Wr{constructor(t){super(q1e(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=z(t)}get extent(){const t=tte(this),{spatialReference:e}=this;return t?new Xe({...t,spatialReference:e}):null}writePaths(t,e){e.paths=z(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(V1e(t)){const r=[];for(let n=0,s=t.length;n<s;n++)r[n]=t[n].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new LD;return t.spatialReference=this.spatialReference,t.paths=z(this.paths),t.curvePaths=z(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],r=this.hasZ,n=this.hasM;return r&&!n?new je(i[0],i[1],i[2],void 0,this.spatialReference):n&&!r?new je(i[0],i[1],void 0,i[2],this.spatialReference):r&&n?new je(i[0],i[1],i[2],i[3],this.spatialReference):new je(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(Jb(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,r=e.map(n=>new je(n,i));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new je(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(Jb(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};l([p({readOnly:!0})],Kt.prototype,"cache",null),l([p({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],Kt.prototype,"curvePaths",void 0),l([pe("curvePaths")],Kt.prototype,"writeCurvePaths",null),l([p({readOnly:!0})],Kt.prototype,"extent",null),l([p({type:[[[Number]]],json:{write:{isRequired:!0}}})],Kt.prototype,"paths",void 0),l([pe("paths")],Kt.prototype,"writePaths",null),Kt=LD=l([M("esri.geometry.Polyline")],Kt),Kt.prototype.toJSON.isDefaultToJSON=!0;function lte(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function ute(t){return t.points!==void 0}function cte(t){return t.x!==void 0&&t.y!==void 0}function dte(t){return t.paths!==void 0||t.curvePaths!==void 0}function V0(t){return t.rings!==void 0||t.curveRings!==void 0}function oc(t){return t==null?null:t instanceof Wr?t:cte(t)?je.fromJSON(t):dte(t)?Kt.fromJSON(t):V0(t)?hi.fromJSON(t):ute(t)?Jn.fromJSON(t):lte(t)?Xe.fromJSON(t):null}function Iw(t){return t?cte(t)?"esriGeometryPoint":dte(t)?"esriGeometryPolyline":V0(t)?"esriGeometryPolygon":lte(t)?"esriGeometryEnvelope":ute(t)?"esriGeometryMultipoint":null:null}const G1e={esriGeometryPoint:je,esriGeometryPolyline:Kt,esriGeometryPolygon:hi,esriGeometryEnvelope:Xe,esriGeometryMultipoint:Jn,esriGeometryMultiPatch:hi};function B1e(t){return t&&G1e[t]||null}const H1e=Fr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),CG=Fr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),kw={base:Wr,key:"type",typeMap:{extent:Xe,multipoint:Jn,point:je,polyline:Kt,polygon:hi}};function FZe(t){return t.type==="point"}function VZe(t){return t.type==="multipoint"}function UZe(t){return t.type==="polygon"}function qZe(t){return t.type==="polyline"}var jD;let th=jD=class extends B{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new jD({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};l([p({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:KR}}}}})],th.prototype,"rotation",void 0),l([Ct("rotation")],th.prototype,"castRotation",null),l([p({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:KR}}}}})],th.prototype,"scale",void 0),l([p({types:kw,json:{read:oc,write:!0,origins:{"web-scene":{read:oc,write:{overridePolicy:KR}}}}})],th.prototype,"targetGeometry",void 0),l([p({type:qwe,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],th.prototype,"camera",void 0),th=jD=l([M("esri.Viewpoint")],th);const Jr=th;function KR(){return{enabled:!this.camera}}const JI=t=>{const e=t;class i extends e{constructor(){super(...arguments),this._listenersMap=null}clearEvents(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clearEvents()}emit(n,s){let o=this._listenersMap?.get(n);if(!o)return!1;let u=!1;for(const d of o.slice()){const h="deref"in d?d.deref():d;h?h?.call(this,s):u=!0}return u&&(o=o.filter(d=>!("deref"in d)||d.deref()!=null),this._listenersMap.set(n,o)),o.length>0}on(n,s){if(Array.isArray(n)){const u=n.map(d=>this.on(d,s));return uo(u)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??=new Map;const o=this._listenersMap.get(n)||[];return o.push(s),this._listenersMap.set(n,o),ut(()=>{const u=this._listenersMap?.get(n),d=u?.indexOf(s)??-1;d>=0&&u.splice(d,1)})}once(n,s){const o=this.on(n,u=>{o.remove(),("deref"in s?s.deref():s)?.call(null,u)});return o}hasEventListener(n){const s=this._listenersMap?.get(n);return s!=null&&s.length>0}}return i},pte=JI(class{}),hte=pte,sp=JI(_e);function P6(t){return(e,i)=>{e[i]=t}}var Bc;let W1e=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},Z1e=class{constructor(e,i,r,n,s){this.target=e,this.added=i,this.removed=r,this.start=n,this.deleteCount=s}};const pa=new gw(()=>new W1e,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function RG(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function e5(t){return t?t instanceof Sh?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function t5(t){if(t?.length)return t[0]}function J1e(t,e,i,r){const n=Math.min(t.length-i,e.length-r);let s=0;for(;s<n&&t[i+s]===e[r+s];)s++;return s}function fte(t,e,i,r){e&&e.forEach((n,s,o)=>{t.push(n),fte(t,i.call(r,n,s,o),i,r)})}const qp=new Set,Gp=new Set,Bp=new Set,i5=new Map;let Y1e=0,Sh=Bc=class extends sp{static ofType(t){if(!t)return Bc;if(i5.has(t))return i5.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const r in t.typeMap){const n=t.typeMap[r].prototype.declaredClass;e?e+=` | ${n}`:e=n}let i=class extends Bc{};return l([P6({Type:t,ensureType:typeof t=="function"?cr(t):rc(t)})],i.prototype,"itemType",void 0),i=l([M(`esri.core.Collection<${e}>`)],i),i5.set(t,i),i}static isCollection(t){return t!=null&&t instanceof Bc}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new fw,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Y1e++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof Bc?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),super.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return Ve(this._observable),this._items}set items(t){this._emitBeforeChanges(1)||(this._splice(0,this.length,e5(t)),this._emitAfterChanges(1))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:super.hasEventListener(t))}on(t,e){if(this.destroyed)return ut();if(t==="change"){const i=this._chgListeners,r={removed:!1,callback:e};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),ut(()=>{r.removed=!0,i.splice(i.indexOf(r),1)})}return super.on(t,e)}once(t,e){const i="deref"in e?()=>e.deref():()=>e,r=this.on(t,n=>{i()?.call(null,n),r.remove()});return r}add(t,e){if(Ve(this._observable),this._emitBeforeChanges(1))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(1),this}addMany(t,e=this._items.length){if(Ve(this._observable),!t?.length)return this;if(this._emitBeforeChanges(1))return this;const i=this.getNextIndex(e);return this._splice(i,0,e5(t)),this._emitAfterChanges(1),this}at(t){if(Ve(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(Ve(this._observable),!this.length||this._emitBeforeChanges(2))return[];const t=this._removeAllRaw();return this._emitAfterChanges(2),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Ve(this._observable),this._createNewInstance({items:this._items.map(z)})}concat(...t){Ve(this._observable);const e=t.map(e5);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(Ve(this._observable),!this.length||this._emitBeforeChanges(2))return;const i=this._splice(0,this.length),r=i.length;for(let n=0;n<r;n++)t.call(e,i[n],n,i);this._emitAfterChanges(2)}destroyAll(){this.drain(RG)}destroyMany(t){const e=this.removeMany(t);return e.forEach(RG),e}every(t,e){return Ve(this._observable),this._items.every(t,e)}filter(t,e){Ve(this._observable);const i=arguments.length===2?this._items.filter(t,e):this._items.filter(t);return this._createNewInstance({items:i})}find(t,e){return Ve(this._observable),this._items.find(t,e)}findIndex(t,e){return Ve(this._observable),this._items.findIndex(t,e)}flatten(t,e){Ve(this._observable);const i=[];return fte(i,this,t,e),new Bc(i)}forEach(t,e){return Ve(this._observable),this._items.forEach(t,e)}getItemAt(t){return Ve(this._observable),this._items[t]}getNextIndex(t){Ve(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return Ve(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return Ve(this._observable),this._items.indexOf(t,e)}join(t=","){return Ve(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return Ve(this._observable),this._items.lastIndexOf(t,e)}map(t,e){Ve(this._observable);const i=this._items.map(t,e);return new Bc({items:i})}reorder(t,e=this.length-1){Ve(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(4))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(4)}return t}}pop(){if(Ve(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=t5(this._splice(this.length-1,1));return this._emitAfterChanges(2),t}push(...t){return Ve(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,t),this._emitAfterChanges(1)),this.length}reduce(t,e){Ve(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){Ve(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return Ve(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(Ve(this._observable),t<0||t>=this.length||this._emitBeforeChanges(2))return;const e=t5(this._splice(t,1));return this._emitAfterChanges(2),e}removeMany(t){if(Ve(this._observable),!t?.length||this._emitBeforeChanges(2))return[];const e=t instanceof Bc?t.toArray():t,i=this._items,r=[],n=e.length;for(let s=0;s<n;s++){const o=e[s],u=i.indexOf(o);if(u>-1){const d=1+J1e(e,i,s+1,u+1),h=this._splice(u,d);h&&h.length>0&&r.push.apply(r,h),s+=d-1}}return this._emitAfterChanges(2),r}reverse(){if(Ve(this._observable),this._emitBeforeChanges(4))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(4),this}shift(){if(Ve(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=t5(this._splice(0,1));return this._emitAfterChanges(2),t}slice(t=0,e=this.length){return Ve(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return Ve(this._observable),this._items.some(t,e)}sort(t){if(Ve(this._observable),!this.length||this._emitBeforeChanges(4)||!this._requiresSort(t))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(4),this}_requiresSort(t=(e,i)=>e===i?0:e<i?-1:1){const e=this.length-1;for(let i=0;i<e;i++)if(t(this.items[i],this.items[i+1])>0)return!0;return!1}splice(t,e,...i){Ve(this._observable),arguments.length===1&&(e=this.length),e??=0;const r=(e?2:0)|(i.length?1:0);if(this._emitBeforeChanges(r))return[];const n=this._splice(t,e,i)||[];return this._emitAfterChanges(r),n}toArray(){return Ve(this._observable),this._items.slice()}toJSON(t){return Ve(this._observable),this.toArray().map(e=>AS(e)?e.toJSON(t):e)}toLocaleString(){return Ve(this._observable),this._items.toLocaleString()}toString(){return Ve(this._observable),this._items.toString()}unshift(...t){return Ve(this._observable),!t.length||this._emitBeforeChanges(1)||(this._splice(0,0,t),this._emitAfterChanges(1)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const r=this._items,n=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=vw(()=>this._dispatchChange())),t<0&&(t+=this.length),e){if(o=r.splice(t,e),this.hasEventListener("before-remove")){const u=pa.acquire();u.target=this,u.cancellable=!0;for(let d=0,h=o.length;d<h;d++)s=o[d],u.reset(s),this.emit("before-remove",u),u.defaultPrevented&&(o.splice(d,1),r.splice(t,0,s),t+=1,d-=1,h-=1);pa.release(u)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const u=pa.acquire();u.target=this,u.cancellable=!1;const d=o.length;for(let h=0;h<d;h++)u.reset(o[h]),this.emit("after-remove",u);pa.release(u)}}if(i?.length){if(n){const m=[];for(const v of i){const b=n.ensureType(v);b==null&&v!=null||m.push(b)}i=m}const u=this.hasEventListener("before-add"),d=this.hasEventListener("after-add"),h=t===this.length;if(u||d){const m=pa.acquire();m.target=this,m.cancellable=!0;const v=pa.acquire();v.target=this,v.cancellable=!1;for(const b of i)u?(m.reset(b),this.emit("before-add",m),m.defaultPrevented||(h?r.push(b):r.splice(t++,0,b),this._set("length",r.length),d&&(v.reset(b),this.emit("after-add",v)))):(h?r.push(b):r.splice(t++,0,b),this._set("length",r.length),v.reset(b),this.emit("after-add",v));pa.release(v),pa.release(m)}else{if(h)for(const m of i)r.push(m);else r.splice(t,0,...i);this._set("length",r.length)}}if((i?.length||o?.length)&&this._notifyChangeEvent(i,o),this.hasEventListener("after-splice")){const u=new Z1e(this,i,o,t,e);this.emit("after-splice",u)}return o}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=pa.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,pa.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=pa.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),pa.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;qp.clear(),Gp.clear(),Bp.clear();for(const{added:d,removed:h}of i){if(d)if(Bp.size===0&&Gp.size===0)for(const m of d)qp.add(m);else for(const m of d)Gp.has(m)?(Bp.add(m),Gp.delete(m)):Bp.has(m)||qp.add(m);if(h)if(Bp.size===0&&qp.size===0)for(const m of h)Gp.add(m);else for(const m of h)qp.has(m)?qp.delete(m):(Bp.delete(m),Gp.add(m))}const r=ws.acquire();qp.forEach(d=>{r.push(d)});const n=ws.acquire();Gp.forEach(d=>{n.push(d)});const s=this._items,o=e.items,u=ws.acquire();if(Bp.forEach(d=>{o.indexOf(d)!==s.indexOf(d)&&u.push(d)}),e.listeners&&(r.length||n.length||u.length)){const d={target:this,added:r,removed:n,moved:u},h=e.listeners.length;for(let m=0;m<h;m++){const v=e.listeners[m];v.removed||v.callback.call(this,d)}}ws.release(r),ws.release(n),ws.release(u)}qp.clear(),Gp.clear(),Bp.clear()}};l([p()],Sh.prototype,"_updating",void 0),l([p()],Sh.prototype,"length",void 0),l([p()],Sh.prototype,"items",null),l([p({readOnly:!0})],Sh.prototype,"updating",null),Sh=Bc=l([M("esri.core.Collection")],Sh);const fe=Sh;let Ll=class extends fe{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(RX(()=>this._refresh(),Zo))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections?.();if(e==null)return void this.removeAll();let i=0;for(const r of e)r!=null&&(i=this._processCollection(i,r));this.splice(i)}_createNewInstance(e){return new fe(e)}_processCollection(e,i){if(!i)return e;const r=this.itemFilterFunction??(n=>!!n);for(const n of i)if(n){if(r(n)){const s=this.indexOf(n,e);s>=0?s!==e&&this.reorder(n,e):this.add(n,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(n);if(Array.isArray(s))for(const o of s)e=this._processCollection(e,o);else e=this._processCollection(e,s)}}return e}};l([p()],Ll.prototype,"getCollections",void 0),l([p()],Ll.prototype,"getChildrenFunction",void 0),l([p()],Ll.prototype,"itemFilterFunction",void 0),Ll=l([M("esri.core.CollectionFlattener")],Ll);let DS=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new fw,this._items=new Set}get length(){return Ve(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return Ve(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(r=>{e(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Ve(this._observable),yield*this._items}};const mte=new FinalizationRegistry(t=>{t.close()});function Q1e(t,e){mte.register(t,e,e)}function X1e(t){mte.unregister(t)}function yte(t,e){return new Proxy({},{get:(i,r,n)=>(...s)=>{let o,u;const d=s[s.length-1];return K1e(d)&&(o=d.signal,u=d.transferList,s.pop()),t.apply(e?`${e}.${r.toString()}`:r.toString(),s,{transferList:u,signal:o})}})}function K1e(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const e2e={statsWorker:()=>H(()=>import("./statsWorker-DnoeSfDz.js"),__vite__mapDeps([0,1,2,3,4,5])),geometryEngineWorker:()=>H(()=>import("./geometryEngineWorker-BkMQzpX8.js"),__vite__mapDeps([6,7,8,9])),arcadeGeometryOperatorsWorker:()=>H(()=>import("./operatorsWorker-B9GvJ001.js"),[]),CSVSourceWorker:()=>H(()=>import("./CSVSourceWorker-CpmVWq1C.js"),__vite__mapDeps([10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,2,1,3,4,5,26,27,28,29,30])),EdgeProcessingWorker:()=>H(()=>import("./EdgeProcessingWorker-BvbiiJKf.js"),__vite__mapDeps([31,32,33,34,35,36,37,38,39,40,41])),ElevationSamplerWorker:()=>H(()=>import("./ElevationSamplerWorker-Dwd3yYlv.js"),__vite__mapDeps([42,18,43,44,45,46,34,47])),FeatureServiceSnappingSourceWorker:()=>H(()=>import("./FeatureServiceSnappingSourceWorker-BwaTqR-6.js"),__vite__mapDeps([48,14,15,12,13,16,17,18,19,20,21,22,23,24,25,2,1,3,4,5,26,27,49,50,51,52])),GaussianSplatSortWorker:()=>H(()=>import("./GaussianSplatSortWorker-CkystscD.js"),[]),GeoJSONSourceWorker:()=>H(()=>import("./GeoJSONSourceWorker-MYec8gkJ.js"),__vite__mapDeps([53,15,12,13,16,14,17,18,19,20,21,22,23,24,25,2,1,3,4,5,26,27,54,11,30,55])),LercWorker:()=>H(()=>import("./LercWorker-BOPpRnvg.js"),[]),MemorySourceWorker:()=>H(()=>import("./MemorySourceWorker-Dn-4R8nn.js"),__vite__mapDeps([56,15,12,13,16,57,14,17,18,19,20,21,22,23,24,25,2,1,3,4,5,26,27,30,55,11])),PBFDecoderWorker:()=>H(()=>import("./PBFDecoderWorker-DBJVmwhI.js"),__vite__mapDeps([58,59,13,15,12,16,50,51])),FeaturePipelineWorker:()=>H(()=>import("./FeaturePipelineWorker-B8rw2dob.js"),__vite__mapDeps([60,61,62,63,36,64,65,12,13,15,16,66,2,67,20,19,68,69,70,71,72,73,74,75,76,77,78,21,22,23,24,25,1,3,4,5,26,27,79,80,81,82,83,84,85,86,54,11,30,55,52,50,51,87,88])),PointCloudWorker:()=>H(()=>import("./PointCloudWorker-D8LT7736.js"),__vite__mapDeps([89,90,91,92])),RasterWorker:()=>H(()=>import("./RasterWorker-DNk-zUXs.js"),__vite__mapDeps([93,94,95,9,96,97,98,99,100,101,102])),SceneLayerSnappingSourceWorker:()=>H(()=>import("./SceneLayerSnappingSourceWorker-BzVXudKS.js"),__vite__mapDeps([103,104,34,38,39,40,33,35,36,37,41])),SceneLayerWorker:()=>H(()=>import("./SceneLayerWorker-DgpaUxPc.js"),__vite__mapDeps([105,43,46])),WFSSourceWorker:()=>H(()=>import("./WFSSourceWorker-DMP_pji8.js"),__vite__mapDeps([106,15,12,13,16,14,17,18,19,20,21,22,23,24,25,2,1,3,4,5,26,27,54,11,55,107,108])),WorkerTileHandler:()=>H(()=>import("./WorkerTileHandler-DgRxfZ-j.js"),__vite__mapDeps([109,73,110,74,111,51,13,76,112,113,37,36,97,72])),Lyr3DWorker:()=>H(()=>import("./Lyr3DWorker-B3FFqyhg.js"),[]),Feature3DPipelineWorker:()=>H(()=>import("./Feature3DPipelineWorker-CtvX_kv_.js"),__vite__mapDeps([114,22,15,12,13,16,23,24,19,20,25,2,1,3,4,5,26,27,115,45,43,116,90,117,40,34,118,119,37,36,120,33,35,121,122,123,124,125,126,127,128,129,130,131,18,52,50,51,132,133])),TextureCompressionWorker:()=>H(()=>import("./TextureCompressionWorker-DEaqri24.js"),[]),FlowWorker:()=>H(()=>import("./FlowWorker-CRoIy_Ut.js"),__vite__mapDeps([134,102])),ParquetSourceWorker:()=>H(()=>import("./ParquetSourceWorker-DbZWFWPX.js"),__vite__mapDeps([135,78,22,15,12,13,16,23,24,19,20,25,2,1,3,4,5,26,27,30,136,29,81,65,66,80,79])),PanoramicMeshWorker:()=>H(()=>import("./PanoramicMeshWorker-VIH5MUjs.js"),__vite__mapDeps([137,94]))},gte="worker:port-closed",Wd={HANDSHAKE:0,OPEN:1,OPENED:2,RESPONSE:3,INVOKE:4,ABORT:5,CLOSE:6,OPEN_PORT:7,ON:8};let t2e=0;function vte(){return t2e++}function i2e(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function mA(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function bte(t,e,i,r){if(e.type===Wd.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==Wd.INVOKE&&e.type!==Wd.RESPONSE)return void t.postMessage(e);let n;i2e(i)?(n=PG(i.transferList),e.data=i.result):(n=PG(r),e.data=i),n?t.postMessage(e,n):t.postMessage(e)}function NS(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function PG(t){if(!t?.length)return null;if(q("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!r2e(i));return e.length?e:null}function r2e(t){return t instanceof ArrayBuffer||t?.constructor?.name==="ArrayBuffer"}async function ZZe(t){try{return await t}catch(e){const i=e?.name===gte;if(!(Yr(e)||i))throw e;return}}const{CLOSE:fT,ABORT:zD,INVOKE:DG,RESPONSE:H_,OPEN_PORT:NG,ON:LG}=Wd,n2e=2;let s2e=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===zD?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var Pa;let Yb=(Pa=class{static connect(e,i){const r=new MessageChannel;let n;n=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const s=new Pa(r.port1,{channel:r,client:n,schedule:i});return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=s),Pa.clients.set(s,n),r.port2}static loadWorker(e){const i=e2e[e];return i?i():Promise.resolve(null)}constructor(e,i,r,n){this._port=e,this._jobQueue=r,this._lowPriorityJobQueue=n,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new s2e(s=>this._onInvokeMessage(s)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:fT}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const n=r?.signal,s=r?.transferList;if(!this._port)return Promise.reject(new L(gte,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const o=vte();return new Promise((u,d)=>{if(Rn(n))return this._processWork(),void d(xt());const h=Wa(n,()=>{const v=this._outJobs.get(o);v&&(this._outJobs.delete(o),this._processWork(),gi(v.abortHandle),this._post({type:zD,jobId:o}),d(xt()))}),m={resolve:u,reject:d,abortHandle:h,debugInfo:e};this._outJobs.set(o,m),this._post({type:DG,jobId:o,methodName:e,abortable:n!=null},i,s)})}createInvokeProxy(e){return yte(this,e)}on(e,i){const r=new MessageChannel;function n(s){i(s.data)}return this._port.postMessage({type:LG,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),ut(()=>{r.port1.postMessage({type:fT}),r.port1.close(),r.port1.removeEventListener("message",n)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:NG,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=n2e)return;const e=this._jobQueue?.pop()??this._lowPriorityJobQueue?.pop();if(!e)return;const{methodName:i,data:r,invokeOptions:n,resolver:s}=e;this.apply(i,r,n).then(o=>s.resolve(o)).catch(o=>s.reject(o))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{gi(e.abortHandle),e.reject(xt(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null,this._onMessage=null,this._channel=null,this._jobQueue=void 0,this._invokeQueue=void 0,this._lowPriorityJobQueue=void 0}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,i){const r=NS(e);if(r)switch(r.type){case H_:this._onResponseMessage(r);break;case DG:i?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case zD:this._onAbortMessage(r);break;case fT:this._onCloseMessage();break;case NG:this._onOpenPortMessage(r);break;case LG:this._onOnMessage(r)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);this._invokeQueue.push(e),n&&(n.controller&&n.controller.abort(),i.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Pa.clients.get(this)===e&&e.destroy(),Pa.clients.delete(this),e?.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n=[],abortable:s}=e,o=s?new AbortController:null,u=this._inJobs;let d,h=this._client,m=h[i];try{if(!m&&i&&i.includes(".")){const v=i.split(".");for(let b=0;b<v.length-1;b++)h=h[v[b]],m=h[v[b+1]]}if(typeof m!="function")throw new TypeError(`${i} is not a function`);n.push({client:this,signal:o?o.signal:null}),d=m.apply(h,n)}catch(v){return void this._post({type:H_,jobId:r,error:mA(v)})}Kn(d)?(u.set(r,{controller:o,promise:d}),d.then(v=>{u.has(r)&&(u.delete(r),this._post({type:H_,jobId:r},v))},v=>{u.has(r)&&(u.delete(r),Yr(v)||this._post({type:H_,jobId:r,error:mA(v||{message:`Error encountered at method ${i}`})}))})):this._post({type:H_,jobId:r},d)}_onOpenPortMessage(e){new Pa(e.port,{client:this._client})}_onOnMessage(e){const{port:i}=e,r=this._client.on(e.eventType,s=>{i.postMessage(s)}),n=mw(e.port,"message",s=>{NS(s)?.type===fT&&(n.remove(),r.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,s=this._outJobs;if(!s.has(i))return;const o=s.get(i);s.delete(i),this._processWork(),gi(o.abortHandle),r?o.reject(L.fromJSON(JSON.parse(r))):o.resolve(n)}_post(e,i,r){return bte(this._port,e,i,r)}},Pa.kernelInfo={buildDate:CK,fullVersion:a6,revision:RK},Pa.clients=new Map,Pa),o2e=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new DS,this._ongoingLowPriorityJobsQueue=new DS}destroy(){this.close()}get closed(){return!this._clients?.length}open(e,i){return new Promise((r,n)=>{let s=!0;const o=u=>{ft(i.signal),s&&(s=!1,u())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let u=0;u<e.length;++u){const d=e[u];Kn(d)?this._clientPromises[u]=d.then(h=>(this._clients[u]=new Yb(h,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),o(r),this._clients[u]),()=>(o(n),null)):(this._clients[u]=new Yb(d,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[u]=Promise.resolve(this._clients[u]),o(r))}})}broadcast(e,i,r){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];n[s]=o.then(u=>u?.invoke(e,i,r))}return n}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(xt(`Worker closing, aborting job calling '${e.methodName}'`));for(;e=this._ongoingLowPriorityJobsQueue.pop();)e.resolver.reject(xt(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(r=>r?.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,X1e(this)}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const n=ao();(r?.priority==="low"?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:e,data:i,invokeOptions:r,resolver:n});for(let s=0;s<this._clientPromises.length;s++){const o=this._clients[s];o?o.jobAdded():this._clientPromises[s].then(u=>u?.jobAdded())}return n.promise}createInvokeProxy(e){return yte(this,e)}on(e,i){return Promise.all(this._clientPromises).then(()=>uo(this._clients.map(r=>r.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(s=>{s&&(i[n]=s.openPort()),--r===0&&e(i)})})}get test(){}};const a2e={async request(t,e){const i=t.options,r=i.responseType;i.signal=e?.signal,i.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&gD(t.url)?.after?r:"array-buffer";const n=await $t(t.url,i),s={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch(n.requestOptions?.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}};let z2;const l2e=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,FD=globalThis.document?.documentElement;function wte(){const t=FD?.getAttribute("lang"),e=globalThis.navigator?.language;return l2e??t??e??"en"}function so(){return z2===void 0&&(z2=wte()),z2}const u2e=/^(?<language>[a-z]{2,3})(?:-(?<extlang>[a-z]{3}))?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function D6(t=so()){return Ste(t)?.language}function _te(t=so()){const e=Ste(t);return e?.language&&e?.extlang?t.replace(`${e.language}-`,""):t}function Ste(t=so()){return u2e.exec(t)?.groups}const lM=[];function xte(t){return lM.push(t),ut(()=>{lM.splice(lM.indexOf(t),1)})}const uM=[];function N6(t){return uM.push(t),ut(()=>uM.splice(uM.indexOf(t),1))}function jG(){const t=wte();z2!==t&&([...uM].forEach(e=>e(t)),z2=t,[...lM].forEach(e=>e(t)))}globalThis.addEventListener?.("languagechange",jG),FD&&new MutationObserver(()=>{jG()}).observe(FD,{attributeFilter:["lang"]});const Za="system",df="unknown",pf="UTC",c2e=Intl.DateTimeFormat().resolvedOptions().timeZone,zG=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class Qy extends Error{}class d2e extends Qy{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class p2e extends Qy{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class h2e extends Qy{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class A0 extends Qy{}class $te extends Qy{constructor(e){super(`Invalid unit ${e}`)}}class Bn extends Qy{}class Hp extends Qy{constructor(){super("Zone is an abstract class")}}const Te="numeric",eu="short",Bo="long",yA={year:Te,month:Te,day:Te},Tte={year:Te,month:eu,day:Te},f2e={year:Te,month:eu,day:Te,weekday:eu},Ete={year:Te,month:Bo,day:Te},Mte={year:Te,month:Bo,day:Te,weekday:Bo},Ate={hour:Te,minute:Te},Ite={hour:Te,minute:Te,second:Te},kte={hour:Te,minute:Te,second:Te,timeZoneName:eu},Ote={hour:Te,minute:Te,second:Te,timeZoneName:Bo},Cte={hour:Te,minute:Te,hourCycle:"h23"},Rte={hour:Te,minute:Te,second:Te,hourCycle:"h23"},Pte={hour:Te,minute:Te,second:Te,hourCycle:"h23",timeZoneName:eu},Dte={hour:Te,minute:Te,second:Te,hourCycle:"h23",timeZoneName:Bo},Nte={year:Te,month:Te,day:Te,hour:Te,minute:Te},Lte={year:Te,month:Te,day:Te,hour:Te,minute:Te,second:Te},jte={year:Te,month:eu,day:Te,hour:Te,minute:Te},zte={year:Te,month:eu,day:Te,hour:Te,minute:Te,second:Te},m2e={year:Te,month:eu,day:Te,weekday:eu,hour:Te,minute:Te},Fte={year:Te,month:Bo,day:Te,hour:Te,minute:Te,timeZoneName:eu},Vte={year:Te,month:Bo,day:Te,hour:Te,minute:Te,second:Te,timeZoneName:eu},Ute={year:Te,month:Bo,day:Te,weekday:Bo,hour:Te,minute:Te,timeZoneName:Bo},qte={year:Te,month:Bo,day:Te,weekday:Bo,hour:Te,minute:Te,second:Te,timeZoneName:Bo};class Xy{get type(){throw new Hp}get name(){throw new Hp}get ianaName(){return this.name}get isUniversal(){throw new Hp}offsetName(e,i){throw new Hp}formatOffset(e,i){throw new Hp}offset(e){throw new Hp}equals(e){throw new Hp}get isValid(){throw new Hp}}let r5=null;class YI extends Xy{static get instance(){return r5===null&&(r5=new YI),r5}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return eie(e,i,r)}formatOffset(e,i){return F2(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const VD=new Map;function y2e(t){let e=VD.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),VD.set(t,e)),e}const g2e={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function v2e(t,e){const i=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,n,s,o,u,d,h,m]=r;return[o,n,s,u,d,h,m]}function b2e(t,e){const i=t.formatToParts(e),r=[];for(let n=0;n<i.length;n++){const{type:s,value:o}=i[n],u=g2e[s];s==="era"?r[u]=o:Qe(u)||(r[u]=parseInt(o,10))}return r}const n5=new Map;class lo extends Xy{static create(e){let i=n5.get(e);return i===void 0&&n5.set(e,i=new lo(e)),i}static resetCache(){n5.clear(),VD.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=lo.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return eie(e,i,r,this.name)}formatOffset(e,i){return F2(this.offset(e),i)}offset(e){if(!this.valid)return NaN;const i=new Date(e);if(isNaN(i))return NaN;const r=y2e(this.name);let[n,s,o,u,d,h,m]=r.formatToParts?b2e(r,i):v2e(r,i);u==="BC"&&(n=-Math.abs(n)+1);const b=XI({year:n,month:s,day:o,hour:d===24?0:d,minute:h,second:m,millisecond:0});let _=+i;const x=_%1e3;return _-=x>=0?x:1e3+x,(b-_)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let FG={};function w2e(t,e={}){const i=JSON.stringify([t,e]);let r=FG[i];return r||(r=new Intl.ListFormat(t,e),FG[i]=r),r}const UD=new Map;function qD(t,e={}){const i=JSON.stringify([t,e]);let r=UD.get(i);return r===void 0&&(r=new Intl.DateTimeFormat(t,e),UD.set(i,r)),r}const GD=new Map;function _2e(t,e={}){const i=JSON.stringify([t,e]);let r=GD.get(i);return r===void 0&&(r=new Intl.NumberFormat(t,e),GD.set(i,r)),r}const BD=new Map;function S2e(t,e={}){const{base:i,...r}=e,n=JSON.stringify([t,r]);let s=BD.get(n);return s===void 0&&(s=new Intl.RelativeTimeFormat(t,e),BD.set(n,s)),s}let C1=null;function x2e(){return C1||(C1=new Intl.DateTimeFormat().resolvedOptions().locale,C1)}const HD=new Map;function Gte(t){let e=HD.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),HD.set(t,e)),e}const WD=new Map;function $2e(t){let e=WD.get(t);if(!e){const i=new Intl.Locale(t);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,"minimalDays"in e||(e={...Bte,...e}),WD.set(t,e)}return e}function T2e(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let r,n;try{r=qD(t).resolvedOptions(),n=t}catch{const d=t.substring(0,i);r=qD(d).resolvedOptions(),n=d}const{numberingSystem:s,calendar:o}=r;return[n,s,o]}}function E2e(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function M2e(t){const e=[];for(let i=1;i<=12;i++){const r=Me.utc(2009,i,1);e.push(t(r))}return e}function A2e(t){const e=[];for(let i=1;i<=7;i++){const r=Me.utc(2016,11,13+i);e.push(t(r))}return e}function mT(t,e,i,r){const n=t.listingMode();return n==="error"?null:n==="en"?i(e):r(e)}function I2e(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||Gte(t.locale).numberingSystem==="latn"}class k2e{constructor(e,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:n,floor:s,...o}=r;if(!i||Object.keys(o).length>0){const u={useGrouping:!1,...r};r.padTo>0&&(u.minimumIntegerDigits=r.padTo),this.inf=_2e(e,u)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):V6(e,3);return Dr(i,this.padTo)}}}class O2e{constructor(e,i,r){this.opts=r,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),u=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&lo.create(u).valid?(n=u,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=qD(i,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class C2e{constructor(e,i,r){this.opts={style:"long",...r},!i&&Xte()&&(this.rtf=S2e(e,r))}format(e,i){return this.rtf?this.rtf.format(e,i):eSe(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const Bte={firstDay:1,minimalDays:4,weekend:[6,7]};class Jt{static fromOpts(e){return Jt.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,r,n,s=!1){const o=e||or.defaultLocale,u=o||(s?"en-US":x2e()),d=i||or.defaultNumberingSystem,h=r||or.defaultOutputCalendar,m=JD(n)||or.defaultWeekSettings;return new Jt(u,d,h,m,o)}static resetCache(){C1=null,UD.clear(),GD.clear(),BD.clear(),HD.clear(),WD.clear()}static fromObject({locale:e,numberingSystem:i,outputCalendar:r,weekSettings:n}={}){return Jt.create(e,i,r,n)}constructor(e,i,r,n,s){const[o,u,d]=T2e(e);this.locale=o,this.numberingSystem=i||u||null,this.outputCalendar=r||d||null,this.weekSettings=n,this.intl=E2e(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=I2e(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Jt.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,JD(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return mT(this,e,rie,()=>{const r=this.intl==="ja"||this.intl.startsWith("ja-");i&=!r;const n=i?{month:e,day:"numeric"}:{month:e},s=i?"format":"standalone";if(!this.monthsCache[s][e]){const o=r?u=>this.dtFormatter(u,n).format():u=>this.extract(u,n,"month");this.monthsCache[s][e]=M2e(o)}return this.monthsCache[s][e]})}weekdays(e,i=!1){return mT(this,e,oie,()=>{const r=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=i?"format":"standalone";return this.weekdaysCache[n][e]||(this.weekdaysCache[n][e]=A2e(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[n][e]})}meridiems(){return mT(this,void 0,()=>aie,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Me.utc(2016,11,13,9),Me.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return mT(this,e,lie,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[Me.utc(-40,1,1),Me.utc(2017,1,1)].map(r=>this.extract(r,i,"era"))),this.eraCache[e]})}extract(e,i,r){const n=this.dtFormatter(e,i),s=n.formatToParts(),o=s.find(u=>u.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new k2e(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new O2e(e,this.intl,i)}relFormatter(e={}){return new C2e(this.intl,this.isEnglish(),e)}listFormatter(e={}){return w2e(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Gte(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Kte()?$2e(this.locale):Bte}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let s5=null;class Lr extends Xy{static get utcInstance(){return s5===null&&(s5=new Lr(0)),s5}static instance(e){return e===0?Lr.utcInstance:new Lr(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Lr(KI(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${F2(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${F2(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return F2(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class R2e extends Xy{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Ch(t,e){if(Qe(t)||t===null)return e;if(t instanceof Xy)return t;if(z2e(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?YI.instance:i==="utc"||i==="gmt"?Lr.utcInstance:Lr.parseSpecifier(i)||lo.create(t)}else return Zh(t)?Lr.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new R2e(t)}const L6={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},VG={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},P2e=L6.hanidec.replace(/[\[|\]]/g,"").split("");function D2e(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);if(t[i].search(L6.hanidec)!==-1)e+=P2e.indexOf(t[i]);else for(const n in VG){const[s,o]=VG[n];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}const ZD=new Map;function N2e(){ZD.clear()}function al({numberingSystem:t},e=""){const i=t||"latn";let r=ZD.get(i);r===void 0&&(r=new Map,ZD.set(i,r));let n=r.get(e);return n===void 0&&(n=new RegExp(`${L6[i]}${e}`),r.set(e,n)),n}let UG=()=>Date.now(),qG="system",GG=null,BG=null,HG=null,WG=60,ZG,JG=null;class or{static get now(){return UG}static set now(e){UG=e}static set defaultZone(e){qG=e}static get defaultZone(){return Ch(qG,YI.instance)}static get defaultLocale(){return GG}static set defaultLocale(e){GG=e}static get defaultNumberingSystem(){return BG}static set defaultNumberingSystem(e){BG=e}static get defaultOutputCalendar(){return HG}static set defaultOutputCalendar(e){HG=e}static get defaultWeekSettings(){return JG}static set defaultWeekSettings(e){JG=JD(e)}static get twoDigitCutoffYear(){return WG}static set twoDigitCutoffYear(e){WG=e%100}static get throwOnInvalid(){return ZG}static set throwOnInvalid(e){ZG=e}static resetCaches(){Jt.resetCache(),lo.resetCache(),Me.resetCache(),N2e()}}class ql{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Hte=[0,31,59,90,120,151,181,212,243,273,304,334],Wte=[0,31,60,91,121,152,182,213,244,274,305,335];function Fa(t,e){return new ql("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function j6(t,e,i){const r=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const n=r.getUTCDay();return n===0?7:n}function Zte(t,e,i){return i+(mx(t)?Wte:Hte)[e-1]}function Jte(t,e){const i=mx(t)?Wte:Hte,r=i.findIndex(s=>s<e),n=e-i[r];return{month:r+1,day:n}}function z6(t,e){return(t-e+7)%7+1}function gA(t,e=4,i=1){const{year:r,month:n,day:s}=t,o=Zte(r,n,s),u=z6(j6(r,n,s),i);let d=Math.floor((o-u+14-e)/7),h;return d<1?(h=r-1,d=LS(h,e,i)):d>LS(r,e,i)?(h=r+1,d=1):h=r,{weekYear:h,weekNumber:d,weekday:u,...ek(t)}}function YG(t,e=4,i=1){const{weekYear:r,weekNumber:n,weekday:s}=t,o=z6(j6(r,1,e),i),u=U0(r);let d=n*7+s-o-7+e,h;d<1?(h=r-1,d+=U0(h)):d>u?(h=r+1,d-=U0(r)):h=r;const{month:m,day:v}=Jte(h,d);return{year:h,month:m,day:v,...ek(t)}}function o5(t){const{year:e,month:i,day:r}=t,n=Zte(e,i,r);return{year:e,ordinal:n,...ek(t)}}function QG(t){const{year:e,ordinal:i}=t,{month:r,day:n}=Jte(e,i);return{year:e,month:r,day:n,...ek(t)}}function XG(t,e){if(!Qe(t.localWeekday)||!Qe(t.localWeekNumber)||!Qe(t.localWeekYear)){if(!Qe(t.weekday)||!Qe(t.weekNumber)||!Qe(t.weekYear))throw new A0("Cannot mix locale-based week fields with ISO-based week fields");return Qe(t.localWeekday)||(t.weekday=t.localWeekday),Qe(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),Qe(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function L2e(t,e=4,i=1){const r=QI(t.weekYear),n=Va(t.weekNumber,1,LS(t.weekYear,e,i)),s=Va(t.weekday,1,7);return r?n?s?!1:Fa("weekday",t.weekday):Fa("week",t.weekNumber):Fa("weekYear",t.weekYear)}function j2e(t){const e=QI(t.year),i=Va(t.ordinal,1,U0(t.year));return e?i?!1:Fa("ordinal",t.ordinal):Fa("year",t.year)}function Yte(t){const e=QI(t.year),i=Va(t.month,1,12),r=Va(t.day,1,vA(t.year,t.month));return e?i?r?!1:Fa("day",t.day):Fa("month",t.month):Fa("year",t.year)}function Qte(t){const{hour:e,minute:i,second:r,millisecond:n}=t,s=Va(e,0,23)||e===24&&i===0&&r===0&&n===0,o=Va(i,0,59),u=Va(r,0,59),d=Va(n,0,999);return s?o?u?d?!1:Fa("millisecond",n):Fa("second",r):Fa("minute",i):Fa("hour",e)}function Qe(t){return typeof t>"u"}function Zh(t){return typeof t=="number"}function QI(t){return typeof t=="number"&&t%1===0}function z2e(t){return typeof t=="string"}function F2e(t){return Object.prototype.toString.call(t)==="[object Date]"}function Xte(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Kte(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function V2e(t){return Array.isArray(t)?t:[t]}function KG(t,e,i){if(t.length!==0)return t.reduce((r,n)=>{const s=[e(n),n];return r&&i(r[0],s[0])===r[0]?r:s},null)[1]}function U2e(t,e){return e.reduce((i,r)=>(i[r]=t[r],i),{})}function Qb(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function JD(t){if(t==null)return null;if(typeof t!="object")throw new Bn("Week settings must be an object");if(!Va(t.firstDay,1,7)||!Va(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!Va(e,1,7)))throw new Bn("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function Va(t,e,i){return QI(t)&&t>=e&&t<=i}function q2e(t,e){return t-e*Math.floor(t/e)}function Dr(t,e=2){const i=t<0;let r;return i?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function xh(t){if(!(Qe(t)||t===null||t===""))return parseInt(t,10)}function Yf(t){if(!(Qe(t)||t===null||t===""))return parseFloat(t)}function F6(t){if(!(Qe(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function V6(t,e,i="round"){const r=10**e;switch(i){case"expand":return t>0?Math.ceil(t*r)/r:Math.floor(t*r)/r;case"trunc":return Math.trunc(t*r)/r;case"round":return Math.round(t*r)/r;case"floor":return Math.floor(t*r)/r;case"ceil":return Math.ceil(t*r)/r;default:throw new RangeError(`Value rounding ${i} is out of range`)}}function mx(t){return t%4===0&&(t%100!==0||t%400===0)}function U0(t){return mx(t)?366:365}function vA(t,e){const i=q2e(e-1,12)+1,r=t+(e-i)/12;return i===2?mx(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function XI(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function eB(t,e,i){return-z6(j6(t,1,e),i)+e-1}function LS(t,e=4,i=1){const r=eB(t,e,i),n=eB(t+1,e,i);return(U0(t)-r+n)/7}function YD(t){return t>99?t:t>or.twoDigitCutoffYear?1900+t:2e3+t}function eie(t,e,i,r=null){const n=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},u=new Intl.DateTimeFormat(i,o).formatToParts(n).find(d=>d.type.toLowerCase()==="timezonename");return u?u.value:null}function KI(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const r=parseInt(e,10)||0,n=i<0||Object.is(i,-0)?-r:r;return i*60+n}function tie(t){const e=Number(t);if(typeof t=="boolean"||t===""||!Number.isFinite(e))throw new Bn(`Invalid unit value ${t}`);return e}function bA(t,e){const i={};for(const r in t)if(Qb(t,r)){const n=t[r];if(n==null)continue;i[e(r)]=tie(n)}return i}function F2(t,e){const i=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),n=t>=0?"+":"-";switch(e){case"short":return`${n}${Dr(i,2)}:${Dr(r,2)}`;case"narrow":return`${n}${i}${r>0?`:${r}`:""}`;case"techie":return`${n}${Dr(i,2)}${Dr(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function ek(t){return U2e(t,["hour","minute","second","millisecond"])}const G2e=["January","February","March","April","May","June","July","August","September","October","November","December"],iie=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B2e=["J","F","M","A","M","J","J","A","S","O","N","D"];function rie(t){switch(t){case"narrow":return[...B2e];case"short":return[...iie];case"long":return[...G2e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const nie=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],sie=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],H2e=["M","T","W","T","F","S","S"];function oie(t){switch(t){case"narrow":return[...H2e];case"short":return[...sie];case"long":return[...nie];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const aie=["AM","PM"],W2e=["Before Christ","Anno Domini"],Z2e=["BC","AD"],J2e=["B","A"];function lie(t){switch(t){case"narrow":return[...J2e];case"short":return[...Z2e];case"long":return[...W2e];default:return null}}function Y2e(t){return aie[t.hour<12?0:1]}function Q2e(t,e){return oie(e)[t.weekday-1]}function X2e(t,e){return rie(e)[t.month-1]}function K2e(t,e){return lie(e)[t.year<0?0:1]}function eSe(t,e,i="always",r=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&s){const v=t==="days";switch(e){case 1:return v?"tomorrow":`next ${n[t][0]}`;case-1:return v?"yesterday":`last ${n[t][0]}`;case 0:return v?"today":`this ${n[t][0]}`}}const o=Object.is(e,-0)||e<0,u=Math.abs(e),d=u===1,h=n[t],m=r?d?h[1]:h[2]||h[1]:d?n[t][0]:t;return o?`${u} ${m} ago`:`in ${u} ${m}`}function tB(t,e){let i="";for(const r of t)r.literal?i+=r.val:i+=e(r.val);return i}const tSe={D:yA,DD:Tte,DDD:Ete,DDDD:Mte,t:Ate,tt:Ite,ttt:kte,tttt:Ote,T:Cte,TT:Rte,TTT:Pte,TTTT:Dte,f:Nte,ff:jte,fff:Fte,ffff:Ute,F:Lte,FF:zte,FFF:Vte,FFFF:qte};class Qn{static create(e,i={}){return new Qn(e,i)}static parseFormat(e){let i=null,r="",n=!1;const s=[];for(let o=0;o<e.length;o++){const u=e.charAt(o);u==="'"?((r.length>0||n)&&s.push({literal:n||/^\s+$/.test(r),val:r===""?"'":r}),i=null,r="",n=!n):n||u===i?r+=u:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=u,i=u)}return r.length>0&&s.push({literal:n||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return tSe[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0,r=void 0){if(this.opts.forceSimple)return Dr(e,i);const n={...this.opts};return i>0&&(n.padTo=i),r&&(n.signDisplay=r),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,i){const r=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(_,x)=>this.loc.extract(e,_,x),o=_=>e.isOffsetFixed&&e.offset===0&&_.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,_.format):"",u=()=>r?Y2e(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),d=(_,x)=>r?X2e(e,_):s(x?{month:_}:{month:_,day:"numeric"},"month"),h=(_,x)=>r?Q2e(e,_):s(x?{weekday:_}:{weekday:_,month:"long",day:"numeric"},"weekday"),m=_=>{const x=Qn.macroTokenToFormatOpts(_);return x?this.formatWithSystemDefault(e,x):_},v=_=>r?K2e(e,_):s({era:_},"era"),b=_=>{switch(_){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return u();case"d":return n?s({day:"numeric"},"day"):this.num(e.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return h("short",!0);case"cccc":return h("long",!0);case"ccccc":return h("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return h("short",!1);case"EEEE":return h("long",!1);case"EEEEE":return h("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return d("short",!0);case"LLLL":return d("long",!0);case"LLLLL":return d("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(e.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return d("short",!1);case"MMMM":return d("long",!1);case"MMMMM":return d("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(e.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return v("short");case"GG":return v("long");case"GGGGG":return v("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return m(_)}};return tB(Qn.parseFormat(i),b)}formatDurationFromString(e,i){const r=this.opts.signMode==="negativeLargestOnly"?-1:1,n=m=>{switch(m[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},s=(m,v)=>b=>{const _=n(b);if(_){const x=v.isNegativeDuration&&_!==v.largestUnit?r:1;let $;return this.opts.signMode==="negativeLargestOnly"&&_!==v.largestUnit?$="never":this.opts.signMode==="all"?$="always":$="auto",this.num(m.get(_)*x,b.length,$)}else return b},o=Qn.parseFormat(i),u=o.reduce((m,{literal:v,val:b})=>v?m:m.concat(b),[]),d=e.shiftTo(...u.map(n).filter(m=>m)),h={isNegativeDuration:d<0,largestUnit:Object.keys(d.values)[0]};return tB(o,s(d,h))}}const uie=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Ow(...t){const e=t.reduce((i,r)=>i+r.source,"");return RegExp(`^${e}$`)}function Cw(...t){return e=>t.reduce(([i,r,n],s)=>{const[o,u,d]=s(e,n);return[{...i,...o},u||r,d]},[{},null,1]).slice(0,2)}function Rw(t,...e){if(t==null)return[null,null];for(const[i,r]of e){const n=i.exec(t);if(n)return r(n)}return[null,null]}function cie(...t){return(e,i)=>{const r={};let n;for(n=0;n<t.length;n++)r[t[n]]=xh(e[i+n]);return[r,null,i+n]}}const die=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,iSe=`(?:${die.source}?(?:\\[(${uie.source})\\])?)?`,U6=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,pie=RegExp(`${U6.source}${iSe}`),q6=RegExp(`(?:[Tt]${pie.source})?`),rSe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,nSe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,sSe=/(\d{4})-?(\d{3})/,oSe=cie("weekYear","weekNumber","weekDay"),aSe=cie("year","ordinal"),lSe=/(\d{4})-(\d\d)-(\d\d)/,hie=RegExp(`${U6.source} ?(?:${die.source}|(${uie.source}))?`),uSe=RegExp(`(?: ${hie.source})?`);function q0(t,e,i){const r=t[e];return Qe(r)?i:xh(r)}function cSe(t,e){return[{year:q0(t,e),month:q0(t,e+1,1),day:q0(t,e+2,1)},null,e+3]}function Pw(t,e){return[{hours:q0(t,e,0),minutes:q0(t,e+1,0),seconds:q0(t,e+2,0),milliseconds:F6(t[e+3])},null,e+4]}function yx(t,e){const i=!t[e]&&!t[e+1],r=KI(t[e+1],t[e+2]),n=i?null:Lr.instance(r);return[{},n,e+3]}function gx(t,e){const i=t[e]?lo.create(t[e]):null;return[{},i,e+1]}const dSe=RegExp(`^T?${U6.source}$`),pSe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function hSe(t){const[e,i,r,n,s,o,u,d,h]=t,m=e[0]==="-",v=d&&d[0]==="-",b=(_,x=!1)=>_!==void 0&&(x||_&&m)?-_:_;return[{years:b(Yf(i)),months:b(Yf(r)),weeks:b(Yf(n)),days:b(Yf(s)),hours:b(Yf(o)),minutes:b(Yf(u)),seconds:b(Yf(d),d==="-0"),milliseconds:b(F6(h),v)}]}const fSe={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function G6(t,e,i,r,n,s,o){const u={year:e.length===2?YD(xh(e)):xh(e),month:iie.indexOf(i)+1,day:xh(r),hour:xh(n),minute:xh(s)};return o&&(u.second=xh(o)),t&&(u.weekday=t.length>3?nie.indexOf(t)+1:sie.indexOf(t)+1),u}const mSe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function ySe(t){const[,e,i,r,n,s,o,u,d,h,m,v]=t,b=G6(e,n,r,i,s,o,u);let _;return d?_=fSe[d]:h?_=0:_=KI(m,v),[b,new Lr(_)]}function gSe(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const vSe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,bSe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,wSe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function iB(t){const[,e,i,r,n,s,o,u]=t;return[G6(e,n,r,i,s,o,u),Lr.utcInstance]}function _Se(t){const[,e,i,r,n,s,o,u]=t;return[G6(e,u,i,r,n,s,o),Lr.utcInstance]}const SSe=Ow(rSe,q6),xSe=Ow(nSe,q6),$Se=Ow(sSe,q6),TSe=Ow(pie),fie=Cw(cSe,Pw,yx,gx),ESe=Cw(oSe,Pw,yx,gx),MSe=Cw(aSe,Pw,yx,gx),ASe=Cw(Pw,yx,gx);function ISe(t){return Rw(t,[SSe,fie],[xSe,ESe],[$Se,MSe],[TSe,ASe])}function kSe(t){return Rw(gSe(t),[mSe,ySe])}function OSe(t){return Rw(t,[vSe,iB],[bSe,iB],[wSe,_Se])}function CSe(t){return Rw(t,[pSe,hSe])}const RSe=Cw(Pw);function PSe(t){return Rw(t,[dSe,RSe])}const DSe=Ow(lSe,uSe),NSe=Ow(hie),LSe=Cw(Pw,yx,gx);function jSe(t){return Rw(t,[DSe,fie],[NSe,LSe])}const rB="Invalid Duration",mie={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},zSe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...mie},ha=146097/400,Jg=146097/4800,FSe={years:{quarters:4,months:12,weeks:ha/7,days:ha,hours:ha*24,minutes:ha*24*60,seconds:ha*24*60*60,milliseconds:ha*24*60*60*1e3},quarters:{months:3,weeks:ha/28,days:ha/4,hours:ha*24/4,minutes:ha*24*60/4,seconds:ha*24*60*60/4,milliseconds:ha*24*60*60*1e3/4},months:{weeks:Jg/7,days:Jg,hours:Jg*24,minutes:Jg*24*60,seconds:Jg*24*60*60,milliseconds:Jg*24*60*60*1e3},...mie},Qm=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],VSe=Qm.slice(0).reverse();function Pc(t,e,i=!1){const r={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Pt(r)}function yie(t,e){let i=e.milliseconds??0;for(const r of VSe.slice(1))e[r]&&(i+=e[r]*t[r].milliseconds);return i}function nB(t,e){const i=yie(t,e)<0?-1:1;Qm.reduceRight((r,n)=>{if(Qe(e[n]))return r;if(r){const s=e[r]*i,o=t[n][r],u=Math.floor(s/o);e[n]+=u*i,e[r]-=u*o*i}return n},null),Qm.reduce((r,n)=>{if(Qe(e[n]))return r;if(r){const s=e[r]%1;e[r]-=s,e[n]+=s*t[r][n]}return n},null)}function sB(t){const e={};for(const[i,r]of Object.entries(t))r!==0&&(e[i]=r);return e}class Pt{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let r=i?FSe:zSe;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Jt.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,i){return Pt.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new Bn(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Pt({values:bA(e,Pt.normalizeUnit),loc:Jt.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(Zh(e))return Pt.fromMillis(e);if(Pt.isDuration(e))return e;if(typeof e=="object")return Pt.fromObject(e);throw new Bn(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[r]=CSe(e);return r?Pt.fromObject(r,i):Pt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[r]=PSe(e);return r?Pt.fromObject(r,i):Pt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new Bn("need to specify a reason the Duration is invalid");const r=e instanceof ql?e:new ql(e,i);if(or.throwOnInvalid)throw new h2e(r);return new Pt({invalid:r})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new $te(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Qn.create(this.loc,r).formatDurationFromString(this,e):rB}toHuman(e={}){if(!this.isValid)return rB;const i=e.showZeros!==!1,r=Qm.map(n=>{const s=this.values[n];return Qe(s)||s===0&&!i?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(s)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=V6(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Me.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?yie(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=Pt.fromDurationLike(e),r={};for(const n of Qm)(Qb(i.values,n)||Qb(this.values,n))&&(r[n]=i.get(n)+this.get(n));return Pc(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const i=Pt.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=tie(e(this.values[r],r));return Pc(this,{values:i},!0)}get(e){return this[Pt.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...bA(e,Pt.normalizeUnit)};return Pc(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:r,matrix:n}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:n,conversionAccuracy:r};return Pc(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return nB(this.matrix,e),Pc(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=sB(this.normalize().shiftToAll().toObject());return Pc(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Pt.normalizeUnit(o));const i={},r={},n=this.toObject();let s;for(const o of Qm)if(e.indexOf(o)>=0){s=o;let u=0;for(const h in r)u+=this.matrix[h][o]*r[h],r[h]=0;Zh(n[o])&&(u+=n[o]);const d=Math.trunc(u);i[o]=d,r[o]=(u*1e3-d*1e3)/1e3}else Zh(n[o])&&(r[o]=n[o]);for(const o in r)r[o]!==0&&(i[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return nB(this.matrix,i),Pc(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return Pc(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=sB(this.values);return Pc(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(r,n){return r===void 0||r===0?n===void 0||n===0:r===n}for(const r of Qm)if(!i(this.values[r],e.values[r]))return!1;return!0}}const Yg="Invalid Interval";function USe(t,e){return!t||!t.isValid?nr.invalid("missing or invalid start"):!e||!e.isValid?nr.invalid("missing or invalid end"):e<t?nr.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class nr{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new Bn("need to specify a reason the Interval is invalid");const r=e instanceof ql?e:new ql(e,i);if(or.throwOnInvalid)throw new p2e(r);return new nr({invalid:r})}static fromDateTimes(e,i){const r=W_(e),n=W_(i),s=USe(r,n);return s??new nr({start:r,end:n})}static after(e,i){const r=Pt.fromDurationLike(i),n=W_(e);return nr.fromDateTimes(n,n.plus(r))}static before(e,i){const r=Pt.fromDurationLike(i),n=W_(e);return nr.fromDateTimes(n.minus(r),n)}static fromISO(e,i){const[r,n]=(e||"").split("/",2);if(r&&n){let s,o;try{s=Me.fromISO(r,i),o=s.isValid}catch{o=!1}let u,d;try{u=Me.fromISO(n,i),d=u.isValid}catch{d=!1}if(o&&d)return nr.fromDateTimes(s,u);if(o){const h=Pt.fromISO(n,i);if(h.isValid)return nr.after(s,h)}else if(d){const h=Pt.fromISO(r,i);if(h.isValid)return nr.before(u,h)}}return nr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const r=this.start.startOf(e,i);let n;return i?.useLocaleWeeks?n=this.end.reconfigure({locale:r.locale}):n=this.end,n=n.startOf(e,i),Math.floor(n.diff(r,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?nr.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(W_).filter(o=>this.contains(o)).sort((o,u)=>o.toMillis()-u.toMillis()),r=[];let{s:n}=this,s=0;for(;n<this.e;){const o=i[s]||this.e,u=+o>+this.e?this.e:o;r.push(nr.fromDateTimes(n,u)),n=u,s+=1}return r}splitBy(e){const i=Pt.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,n=1,s;const o=[];for(;r<this.e;){const u=this.start.plus(i.mapUnits(d=>d*n));s=+u>+this.e?this.e:u,o.push(nr.fromDateTimes(r,s)),r=s,n+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return i>=r?null:nr.fromDateTimes(i,r)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return nr.fromDateTimes(i,r)}static merge(e){const[i,r]=e.sort((n,s)=>n.s-s.s).reduce(([n,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[n,s.union(o)]:[n.concat([s]),o]:[n,o],[[],null]);return r&&i.push(r),i}static xor(e){let i=null,r=0;const n=[],s=e.map(d=>[{time:d.s,type:"s"},{time:d.e,type:"e"}]),o=Array.prototype.concat(...s),u=o.sort((d,h)=>d.time-h.time);for(const d of u)r+=d.type==="s"?1:-1,r===1?i=d.time:(i&&+i!=+d.time&&n.push(nr.fromDateTimes(i,d.time)),i=null);return nr.merge(n)}difference(...e){return nr.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Yg}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=yA,i={}){return this.isValid?Qn.create(this.s.loc.clone(i),e).formatInterval(this):Yg}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Yg}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Yg}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Yg}toFormat(e,{separator:i="  "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:Yg}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):Pt.invalid(this.invalidReason)}mapEndpoints(e){return nr.fromDateTimes(e(this.s),e(this.e))}}class yT{static hasDST(e=or.defaultZone){const i=Me.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return lo.isValidZone(e)}static normalizeZone(e){return Ch(e,or.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||Jt.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||Jt.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||Jt.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Jt.create(i,r,s)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Jt.create(i,r,s)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||Jt.create(i,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:n=null}={}){return(n||Jt.create(i,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Jt.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return Jt.create(i,null,"gregory").eras(e)}static features(){return{relative:Xte(),localeWeek:Kte()}}}function oB(t,e){const i=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(e)-i(t);return Math.floor(Pt.fromMillis(r).as("days"))}function qSe(t,e,i){const r=[["years",(d,h)=>h.year-d.year],["quarters",(d,h)=>h.quarter-d.quarter+(h.year-d.year)*4],["months",(d,h)=>h.month-d.month+(h.year-d.year)*12],["weeks",(d,h)=>{const m=oB(d,h);return(m-m%7)/7}],["days",oB]],n={},s=t;let o,u;for(const[d,h]of r)i.indexOf(d)>=0&&(o=d,n[d]=h(t,e),u=s.plus(n),u>e?(n[d]--,t=s.plus(n),t>e&&(u=t,n[d]--,t=s.plus(n))):t=u);return[t,n,u,o]}function GSe(t,e,i,r){let[n,s,o,u]=qSe(t,e,i);const d=e-n,h=i.filter(v=>["hours","minutes","seconds","milliseconds"].indexOf(v)>=0);h.length===0&&(o<e&&(o=n.plus({[u]:1})),o!==n&&(s[u]=(s[u]||0)+d/(o-n)));const m=Pt.fromObject(s,r);return h.length>0?Pt.fromMillis(d,r).shiftTo(...h).plus(m):m}const BSe="missing Intl.DateTimeFormat.formatToParts support";function Vt(t,e=i=>i){return{regex:t,deser:([i])=>e(D2e(i))}}const HSe="",gie=`[ ${HSe}]`,vie=new RegExp(gie,"g");function WSe(t){return t.replace(/\./g,"\\.?").replace(vie,gie)}function aB(t){return t.replace(/\./g,"").replace(vie," ").toLowerCase()}function ll(t,e){return t===null?null:{regex:RegExp(t.map(WSe).join("|")),deser:([i])=>t.findIndex(r=>aB(i)===aB(r))+e}}function lB(t,e){return{regex:t,deser:([,i,r])=>KI(i,r),groups:e}}function gT(t){return{regex:t,deser:([e])=>e}}function ZSe(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function JSe(t,e){const i=al(e),r=al(e,"{2}"),n=al(e,"{3}"),s=al(e,"{4}"),o=al(e,"{6}"),u=al(e,"{1,2}"),d=al(e,"{1,3}"),h=al(e,"{1,6}"),m=al(e,"{1,9}"),v=al(e,"{2,4}"),b=al(e,"{4,6}"),_=E=>({regex:RegExp(ZSe(E.val)),deser:([A])=>A,literal:!0}),$=(E=>{if(t.literal)return _(E);switch(E.val){case"G":return ll(e.eras("short"),0);case"GG":return ll(e.eras("long"),0);case"y":return Vt(h);case"yy":return Vt(v,YD);case"yyyy":return Vt(s);case"yyyyy":return Vt(b);case"yyyyyy":return Vt(o);case"M":return Vt(u);case"MM":return Vt(r);case"MMM":return ll(e.months("short",!0),1);case"MMMM":return ll(e.months("long",!0),1);case"L":return Vt(u);case"LL":return Vt(r);case"LLL":return ll(e.months("short",!1),1);case"LLLL":return ll(e.months("long",!1),1);case"d":return Vt(u);case"dd":return Vt(r);case"o":return Vt(d);case"ooo":return Vt(n);case"HH":return Vt(r);case"H":return Vt(u);case"hh":return Vt(r);case"h":return Vt(u);case"mm":return Vt(r);case"m":return Vt(u);case"q":return Vt(u);case"qq":return Vt(r);case"s":return Vt(u);case"ss":return Vt(r);case"S":return Vt(d);case"SSS":return Vt(n);case"u":return gT(m);case"uu":return gT(u);case"uuu":return Vt(i);case"a":return ll(e.meridiems(),0);case"kkkk":return Vt(s);case"kk":return Vt(v,YD);case"W":return Vt(u);case"WW":return Vt(r);case"E":case"c":return Vt(i);case"EEE":return ll(e.weekdays("short",!1),1);case"EEEE":return ll(e.weekdays("long",!1),1);case"ccc":return ll(e.weekdays("short",!0),1);case"cccc":return ll(e.weekdays("long",!0),1);case"Z":case"ZZ":return lB(new RegExp(`([+-]${u.source})(?::(${r.source}))?`),2);case"ZZZ":return lB(new RegExp(`([+-]${u.source})(${r.source})?`),2);case"z":return gT(/[a-z_+-/]{1,256}?/i);case" ":return gT(/[^\S\n\r]/);default:return _(E)}})(t)||{invalidReason:BSe};return $.token=t,$}const YSe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function QSe(t,e,i){const{type:r,value:n}=t;if(r==="literal"){const d=/^\s+$/.test(n);return{literal:!d,val:d?" ":n}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=i.hour12?"hour12":"hour24");let u=YSe[o];if(typeof u=="object"&&(u=u[s]),u)return{literal:!1,val:u}}function XSe(t){return[`^${t.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,t]}function KSe(t,e,i){const r=t.match(e);if(r){const n={};let s=1;for(const o in i)if(Qb(i,o)){const u=i[o],d=u.groups?u.groups+1:1;!u.literal&&u.token&&(n[u.token.val[0]]=u.deser(r.slice(s,s+d))),s+=d}return[r,n]}else return[r,{}]}function exe(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return Qe(t.z)||(i=lo.create(t.z)),Qe(t.Z)||(i||(i=new Lr(t.Z)),r=t.Z),Qe(t.q)||(t.M=(t.q-1)*3+1),Qe(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),Qe(t.u)||(t.S=F6(t.u)),[Object.keys(t).reduce((s,o)=>{const u=e(o);return u&&(s[u]=t[o]),s},{}),i,r]}let a5=null;function txe(){return a5||(a5=Me.fromMillis(1555555555555)),a5}function ixe(t,e){if(t.literal)return t;const i=Qn.macroTokenToFormatOpts(t.val),r=Sie(i,e);return r==null||r.includes(void 0)?t:r}function bie(t,e){return Array.prototype.concat(...t.map(i=>ixe(i,e)))}class wie{constructor(e,i){if(this.locale=e,this.format=i,this.tokens=bie(Qn.parseFormat(i),e),this.units=this.tokens.map(r=>JSe(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,n]=XSe(this.units);this.regex=RegExp(r,"i"),this.handlers=n}}explainFromTokens(e){if(this.isValid){const[i,r]=KSe(e,this.regex,this.handlers),[n,s,o]=r?exe(r):[null,null,void 0];if(Qb(r,"a")&&Qb(r,"H"))throw new A0("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:r,result:n,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function _ie(t,e,i){return new wie(t,i).explainFromTokens(e)}function rxe(t,e,i){const{result:r,zone:n,specificOffset:s,invalidReason:o}=_ie(t,e,i);return[r,n,s,o]}function Sie(t,e){if(!t)return null;const r=Qn.create(e,t).dtFormatter(txe()),n=r.formatToParts(),s=r.resolvedOptions();return n.map(o=>QSe(o,t,s))}const l5="Invalid DateTime",uB=864e13;function R1(t){return new ql("unsupported zone",`the zone "${t.name}" is not supported`)}function u5(t){return t.weekData===null&&(t.weekData=gA(t.c)),t.weekData}function c5(t){return t.localWeekData===null&&(t.localWeekData=gA(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function Qf(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new Me({...i,...e,old:i})}function xie(t,e,i){let r=t-e*60*1e3;const n=i.offset(r);if(e===n)return[r,e];r-=(n-e)*60*1e3;const s=i.offset(r);return n===s?[r,n]:[t-Math.min(n,s)*60*1e3,Math.max(n,s)]}function vT(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function cM(t,e,i){return xie(XI(t),e,i)}function cB(t,e){const i=t.o,r=t.c.year+Math.trunc(e.years),n=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:n,day:Math.min(t.c.day,vA(r,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Pt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),u=XI(s);let[d,h]=xie(u,i,t.zone);return o!==0&&(d+=o,h=t.zone.offset(d)),{ts:d,o:h}}function Qg(t,e,i,r,n,s){const{setZone:o,zone:u}=i;if(t&&Object.keys(t).length!==0||e){const d=e||u,h=Me.fromObject(t,{...i,zone:d,specificOffset:s});return o?h:h.setZone(u)}else return Me.invalid(new ql("unparsable",`the input "${n}" can't be parsed as ${r}`))}function bT(t,e,i=!0){return t.isValid?Qn.create(Jt.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function d5(t,e,i){const r=t.c.year>9999||t.c.year<0;let n="";if(r&&t.c.year>=0&&(n+="+"),n+=Dr(t.c.year,r?6:4),i==="year")return n;if(e){if(n+="-",n+=Dr(t.c.month),i==="month")return n;n+="-"}else if(n+=Dr(t.c.month),i==="month")return n;return n+=Dr(t.c.day),n}function dB(t,e,i,r,n,s,o){let u=!i||t.c.millisecond!==0||t.c.second!==0,d="";switch(o){case"day":case"month":case"year":break;default:if(d+=Dr(t.c.hour),o==="hour")break;if(e){if(d+=":",d+=Dr(t.c.minute),o==="minute")break;u&&(d+=":",d+=Dr(t.c.second))}else{if(d+=Dr(t.c.minute),o==="minute")break;u&&(d+=Dr(t.c.second))}if(o==="second")break;u&&(!r||t.c.millisecond!==0)&&(d+=".",d+=Dr(t.c.millisecond,3))}return n&&(t.isOffsetFixed&&t.offset===0&&!s?d+="Z":t.o<0?(d+="-",d+=Dr(Math.trunc(-t.o/60)),d+=":",d+=Dr(Math.trunc(-t.o%60))):(d+="+",d+=Dr(Math.trunc(t.o/60)),d+=":",d+=Dr(Math.trunc(t.o%60)))),s&&(d+="["+t.zone.ianaName+"]"),d}const $ie={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},nxe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},sxe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},dM=["year","month","day","hour","minute","second","millisecond"],oxe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],axe=["year","ordinal","hour","minute","second","millisecond"];function pM(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new $te(t);return e}function pB(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return pM(t)}}function lxe(t){if(P1===void 0&&(P1=or.now()),t.type!=="iana")return t.offset(P1);const e=t.name;let i=QD.get(e);return i===void 0&&(i=t.offset(P1),QD.set(e,i)),i}function hB(t,e){const i=Ch(e.zone,or.defaultZone);if(!i.isValid)return Me.invalid(R1(i));const r=Jt.fromObject(e);let n,s;if(Qe(t.year))n=or.now();else{for(const d of dM)Qe(t[d])&&(t[d]=$ie[d]);const o=Yte(t)||Qte(t);if(o)return Me.invalid(o);const u=lxe(i);[n,s]=cM(t,u,i)}return new Me({ts:n,zone:i,loc:r,o:s})}function fB(t,e,i){const r=Qe(i.round)?!0:i.round,n=Qe(i.rounding)?"trunc":i.rounding,s=(u,d)=>(u=V6(u,r||i.calendary?0:2,i.calendary?"round":n),e.loc.clone(i).relFormatter(i).format(u,d)),o=u=>i.calendary?e.hasSame(t,u)?0:e.startOf(u).diff(t.startOf(u),u).get(u):e.diff(t,u).get(u);if(i.unit)return s(o(i.unit),i.unit);for(const u of i.units){const d=o(u);if(Math.abs(d)>=1)return s(d,u)}return s(t>e?-0:0,i.units[i.units.length-1])}function mB(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}let P1;const QD=new Map;class Me{constructor(e){const i=e.zone||or.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new ql("invalid input"):null)||(i.isValid?null:R1(i));this.ts=Qe(e.ts)?or.now():e.ts;let n=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[n,s]=[e.old.c,e.old.o];else{const u=Zh(e.o)&&!e.old?e.o:i.offset(this.ts);n=vT(this.ts,u),r=Number.isNaN(n.year)?new ql("invalid input"):null,n=r?null:n,s=r?null:u}this._zone=i,this.loc=e.loc||Jt.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new Me({})}static local(){const[e,i]=mB(arguments),[r,n,s,o,u,d,h]=i;return hB({year:r,month:n,day:s,hour:o,minute:u,second:d,millisecond:h},e)}static utc(){const[e,i]=mB(arguments),[r,n,s,o,u,d,h]=i;return e.zone=Lr.utcInstance,hB({year:r,month:n,day:s,hour:o,minute:u,second:d,millisecond:h},e)}static fromJSDate(e,i={}){const r=F2e(e)?e.valueOf():NaN;if(Number.isNaN(r))return Me.invalid("invalid input");const n=Ch(i.zone,or.defaultZone);return n.isValid?new Me({ts:r,zone:n,loc:Jt.fromObject(i)}):Me.invalid(R1(n))}static fromMillis(e,i={}){if(Zh(e))return e<-uB||e>uB?Me.invalid("Timestamp out of range"):new Me({ts:e,zone:Ch(i.zone,or.defaultZone),loc:Jt.fromObject(i)});throw new Bn(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(Zh(e))return new Me({ts:e*1e3,zone:Ch(i.zone,or.defaultZone),loc:Jt.fromObject(i)});throw new Bn("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const r=Ch(i.zone,or.defaultZone);if(!r.isValid)return Me.invalid(R1(r));const n=Jt.fromObject(i),s=bA(e,pB),{minDaysInFirstWeek:o,startOfWeek:u}=XG(s,n),d=or.now(),h=Qe(i.specificOffset)?r.offset(d):i.specificOffset,m=!Qe(s.ordinal),v=!Qe(s.year),b=!Qe(s.month)||!Qe(s.day),_=v||b,x=s.weekYear||s.weekNumber;if((_||m)&&x)throw new A0("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(b&&m)throw new A0("Can't mix ordinal dates with month/day");const $=x||s.weekday&&!_;let E,A,O=vT(d,h);$?(E=oxe,A=nxe,O=gA(O,o,u)):m?(E=axe,A=sxe,O=o5(O)):(E=dM,A=$ie);let D=!1;for(const ue of E){const ye=s[ue];Qe(ye)?D?s[ue]=A[ue]:s[ue]=O[ue]:D=!0}const R=$?L2e(s,o,u):m?j2e(s):Yte(s),P=R||Qte(s);if(P)return Me.invalid(P);const j=$?YG(s,o,u):m?QG(s):s,[Q,re]=cM(j,h,r),ce=new Me({ts:Q,zone:r,o:re,loc:n});return s.weekday&&_&&e.weekday!==ce.weekday?Me.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${ce.toISO()}`):ce.isValid?ce:Me.invalid(ce.invalid)}static fromISO(e,i={}){const[r,n]=ISe(e);return Qg(r,n,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[r,n]=kSe(e);return Qg(r,n,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[r,n]=OSe(e);return Qg(r,n,i,"HTTP",i)}static fromFormat(e,i,r={}){if(Qe(e)||Qe(i))throw new Bn("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=r,o=Jt.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[u,d,h,m]=rxe(o,e,i);return m?Me.invalid(m):Qg(u,d,r,`format ${i}`,e,h)}static fromString(e,i,r={}){return Me.fromFormat(e,i,r)}static fromSQL(e,i={}){const[r,n]=jSe(e);return Qg(r,n,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new Bn("need to specify a reason the DateTime is invalid");const r=e instanceof ql?e:new ql(e,i);if(or.throwOnInvalid)throw new d2e(r);return new Me({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const r=Sie(e,Jt.fromObject(i));return r?r.map(n=>n?n.val:null).join(""):null}static expandFormat(e,i={}){return bie(Qn.parseFormat(e),Jt.fromObject(i)).map(n=>n.val).join("")}static resetCache(){P1=void 0,QD.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?u5(this).weekYear:NaN}get weekNumber(){return this.isValid?u5(this).weekNumber:NaN}get weekday(){return this.isValid?u5(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?c5(this).weekday:NaN}get localWeekNumber(){return this.isValid?c5(this).weekNumber:NaN}get localWeekYear(){return this.isValid?c5(this).weekYear:NaN}get ordinal(){return this.isValid?o5(this.c).ordinal:NaN}get monthShort(){return this.isValid?yT.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?yT.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?yT.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?yT.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,r=XI(this.c),n=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-n*i),u=this.zone.offset(r-s*i);if(o===u)return[this];const d=r-o*i,h=r-u*i,m=vT(d,o),v=vT(h,u);return m.hour===v.hour&&m.minute===v.minute&&m.second===v.second&&m.millisecond===v.millisecond?[Qf(this,{ts:d}),Qf(this,{ts:h})]:[this]}get isInLeapYear(){return mx(this.year)}get daysInMonth(){return vA(this.year,this.month)}get daysInYear(){return this.isValid?U0(this.year):NaN}get weeksInWeekYear(){return this.isValid?LS(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?LS(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:r,calendar:n}=Qn.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:n}}toUTC(e=0,i={}){return this.setZone(Lr.instance(e),i)}toLocal(){return this.setZone(or.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(e=Ch(e,or.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(i||r){const s=e.offset(this.ts),o=this.toObject();[n]=cM(o,s,e)}return Qf(this,{ts:n,zone:e})}else return Me.invalid(R1(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:r}={}){const n=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:r});return Qf(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=bA(e,pB),{minDaysInFirstWeek:r,startOfWeek:n}=XG(i,this.loc),s=!Qe(i.weekYear)||!Qe(i.weekNumber)||!Qe(i.weekday),o=!Qe(i.ordinal),u=!Qe(i.year),d=!Qe(i.month)||!Qe(i.day),h=u||d,m=i.weekYear||i.weekNumber;if((h||o)&&m)throw new A0("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&o)throw new A0("Can't mix ordinal dates with month/day");let v;s?v=YG({...gA(this.c,r,n),...i},r,n):Qe(i.ordinal)?(v={...this.toObject(),...i},Qe(i.day)&&(v.day=Math.min(vA(v.year,v.month),v.day))):v=QG({...o5(this.c),...i});const[b,_]=cM(v,this.o,this.zone);return Qf(this,{ts:b,o:_})}plus(e){if(!this.isValid)return this;const i=Pt.fromDurationLike(e);return Qf(this,cB(this,i))}minus(e){if(!this.isValid)return this;const i=Pt.fromDurationLike(e).negate();return Qf(this,cB(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const r={},n=Pt.normalizeUnit(e);switch(n){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(n==="weeks")if(i){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?Qn.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):l5}toLocaleString(e=yA,i={}){return this.isValid?Qn.create(this.loc.clone(i),e).formatDateTime(this):l5}toLocaleParts(e={}){return this.isValid?Qn.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:n=!0,extendedZone:s=!1,precision:o="milliseconds"}={}){if(!this.isValid)return null;o=pM(o);const u=e==="extended";let d=d5(this,u,o);return dM.indexOf(o)>=3&&(d+="T"),d+=dB(this,u,i,r,n,s,o),d}toISODate({format:e="extended",precision:i="day"}={}){return this.isValid?d5(this,e==="extended",pM(i)):null}toISOWeekDate(){return bT(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:n=!1,extendedZone:s=!1,format:o="extended",precision:u="milliseconds"}={}){return this.isValid?(u=pM(u),(n&&dM.indexOf(u)>=3?"T":"")+dB(this,o==="extended",i,e,r,s,u)):null}toRFC2822(){return bT(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return bT(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?d5(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let n="HH:mm:ss.SSS";return(i||e)&&(r&&(n+=" "),i?n+="z":e&&(n+="ZZ")),bT(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():l5}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",r={}){if(!this.isValid||!e.isValid)return Pt.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=V2e(i).map(Pt.normalizeUnit),o=e.valueOf()>this.valueOf(),u=o?this:e,d=o?e:this,h=GSe(u,d,s,n);return o?h.negate():h}diffNow(e="milliseconds",i={}){return this.diff(Me.now(),e,i)}until(e){return this.isValid?nr.fromDateTimes(this,e):this}hasSame(e,i,r){if(!this.isValid)return!1;const n=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(i,r)<=n&&n<=s.endOf(i,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||Me.fromObject({},{zone:this.zone}),r=e.padding?this<i?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(n=e.unit,s=void 0),fB(i,this.plus(r),{...e,numeric:"always",units:n,unit:s})}toRelativeCalendar(e={}){return this.isValid?fB(e.base||Me.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Me.isDateTime))throw new Bn("min requires all arguments be DateTimes");return KG(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(Me.isDateTime))throw new Bn("max requires all arguments be DateTimes");return KG(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,r={}){const{locale:n=null,numberingSystem:s=null}=r,o=Jt.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return _ie(o,e,i)}static fromStringExplain(e,i,r={}){return Me.fromFormatExplain(e,i,r)}static buildFormatParser(e,i={}){const{locale:r=null,numberingSystem:n=null}=i,s=Jt.fromOpts({locale:r,numberingSystem:n,defaultToEN:!0});return new wie(s,e)}static fromFormatParser(e,i,r={}){if(Qe(e)||Qe(i))throw new Bn("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:s=null}=r,o=Jt.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});if(!o.equals(i.locale))throw new Bn(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${i.locale}`);const{result:u,zone:d,specificOffset:h,invalidReason:m}=i.explainFromTokens(e);return m?Me.invalid(m):Qg(u,d,r,`format ${i.format}`,e,h)}static get DATE_SHORT(){return yA}static get DATE_MED(){return Tte}static get DATE_MED_WITH_WEEKDAY(){return f2e}static get DATE_FULL(){return Ete}static get DATE_HUGE(){return Mte}static get TIME_SIMPLE(){return Ate}static get TIME_WITH_SECONDS(){return Ite}static get TIME_WITH_SHORT_OFFSET(){return kte}static get TIME_WITH_LONG_OFFSET(){return Ote}static get TIME_24_SIMPLE(){return Cte}static get TIME_24_WITH_SECONDS(){return Rte}static get TIME_24_WITH_SHORT_OFFSET(){return Pte}static get TIME_24_WITH_LONG_OFFSET(){return Dte}static get DATETIME_SHORT(){return Nte}static get DATETIME_SHORT_WITH_SECONDS(){return Lte}static get DATETIME_MED(){return jte}static get DATETIME_MED_WITH_SECONDS(){return zte}static get DATETIME_MED_WITH_WEEKDAY(){return m2e}static get DATETIME_FULL(){return Fte}static get DATETIME_FULL_WITH_SECONDS(){return Vte}static get DATETIME_HUGE(){return Ute}static get DATETIME_HUGE_WITH_SECONDS(){return qte}}function W_(t){if(Me.isDateTime(t))return t;if(t&&t.valueOf&&Zh(t.valueOf()))return Me.fromJSDate(t);if(t&&typeof t=="object")return Me.fromObject(t);throw new Bn(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const uxe="shortOffset";function cxe(t){return"timeZoneIANA"in t}function dxe(t){return t.startsWith("UTC")}function wA(t,e=!1){return{json:{read:{source:t,reader:(i,r)=>r[t]?hM(r[t]):null},write:!!e&&{allowNull:!0,writer(i,r){r[t]=i?pxe(i):null}}}}}function hM(t,e=Za){return t?cxe(t)?t.timeZoneIANA:hxe(t,e):e}function pxe(t){return{timeZoneIANA:t}}function hxe(t,e=Za){if(!t||!zG.has(t.timeZone))return e;const i=zG.get(t.timeZone);return dxe(t.timeZone)||t.respectsDaylightSaving?i:fxe(i)}function fxe(t){const e=Me.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Lr.instance(-i).formatOffset(0,"narrow")}`}function QZe(t,e,i,r,n){if(e&&n==="date")return{timeZone:pf,timeZoneName:void 0};const s=r.hour,o=i===df;return{timeZone:o?n==="timestamp-offset"?void 0:t??pf:i,timeZoneName:o&&s?uxe:void 0}}function mxe(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));return t===Za||t===df||e.has(t.toLowerCase())||i.has(t.toLowerCase())}const yxe={dateStyle:void 0,year:void 0,month:void 0,day:void 0,weekday:void 0},gxe={timeStyle:void 0,hour12:void 0,hourCycle:void 0,hour:void 0,minute:void 0,second:void 0},Tie={timeZone:pf},cu={year:"numeric",month:"numeric",day:"numeric"},Z_={year:"numeric",month:"long",day:"numeric"},J_={year:"numeric",month:"short",day:"numeric"},Y_={year:"numeric",month:"long",weekday:"long",day:"numeric"},$h={hour:"numeric",minute:"numeric"},dm={...$h,second:"numeric"},Eie={hourCycle:"h23"},Q_={...$h,...Eie},X_={...dm,...Eie},Mie={"short-date":cu,"short-date-short-time":{...cu,...$h},"short-date-short-time-24":{...cu,...Q_},"short-date-long-time":{...cu,...dm},"short-date-long-time-24":{...cu,...X_},"short-date-le":cu,"short-date-le-short-time":{...cu,...$h},"short-date-le-short-time-24":{...cu,...Q_},"short-date-le-long-time":{...cu,...dm},"short-date-le-long-time-24":{...cu,...X_},"long-month-day-year":Z_,"long-month-day-year-short-time":{...Z_,...$h},"long-month-day-year-short-time-24":{...Z_,...Q_},"long-month-day-year-long-time":{...Z_,...dm},"long-month-day-year-long-time-24":{...Z_,...X_},"day-short-month-year":J_,"day-short-month-year-short-time":{...J_,...$h},"day-short-month-year-short-time-24":{...J_,...Q_},"day-short-month-year-long-time":{...J_,...dm},"day-short-month-year-long-time-24":{...J_,...X_},"long-date":Y_,"long-date-short-time":{...Y_,...$h},"long-date-short-time-24":{...Y_,...Q_},"long-date-long-time":{...Y_,...dm},"long-date-long-time-24":{...Y_,...X_},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":$h,"long-time":dm},vxe=Fr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),Aie={ar:"ar-u-nu-latn-ca-gregory",nn:"no-NN"},bxe=new Intl.DateTimeFormat("bs",{month:"long"}).formatToParts(new Date(2025,2)),wxe=bxe.find(({type:t})=>t==="month")?.value.toLowerCase();function Iie(){const t=D6();return(t&&Aie[t])??_te()}wxe!=="mart"&&(Aie.bs="sr-Latn-CS");let XD=new WeakMap;const tk=Mie["short-date-short-time"];function _xe(t){let e=XD.get(t);if(!e){const i=Iie(),r=B6(t.timeZone??Za),n={...t,timeZone:r};e=new Intl.DateTimeFormat(i,n),XD.set(t,e)}return e}function XZe(t){return Mie[t]}function KZe(t){const{dateStyle:e,timeStyle:i,hour12:r,year:n,month:s}=t,o={};return e?o.dateStyle=e:n&&(o.year=n,o.month=s||void 0),i&&!o.year&&(o.timeStyle=i,o.hour12=r==="auto"?void 0:r==="always"),o}function Fy(t,e=tk){return _xe(e).format(t)}function eJe(t,e=tk){return Fy(new Date(t),{...e,...Tie,...gxe})}function tJe(t,e=tk){return Fy(new Date(`1970-01-01T${t}Z`),{...e,...Tie,...yxe})}function iJe(t,e=tk){if(e.timeZone)return Fy(new Date(t),e);const i=Me.fromISO(t,{setZone:!0}),r=i.offset===0?pf:e.timeZone,n={...e,timeZone:r};return i.toLocaleString(n,{locale:Iie()})}function B6(t){switch(t){case Za:return c2e;case df:return pf;default:return t}}N6(()=>{XD=new WeakMap});const Sxe={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let fM=new WeakMap,kie={};function KD(t){const e=t||kie;if(!fM.has(e)){const i=D6(),r=i&&Sxe[i]||_te();fM.set(e,new Intl.NumberFormat(r,t))}return fM.get(e)}function rJe(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function nJe(t){const{minimumFractionDigits:e,maximumFractionDigits:i,useGrouping:r}=t;return{minimumFractionDigits:e,maximumFractionDigits:i,useGrouping:r==="auto"?"auto":r==="always"}}function hf(t,e){return Object.is(t,-0)&&(t=0),KD(e).format(t)}function sJe(t,e=so()){if(!t)return null;let i=yB.get(e);if(!i){const r=KD().formatToParts(12345.6),n=[...KD({useGrouping:!1}).format(9876543210)].reverse(),s=new Map(n.map((v,b)=>[v,b])),o=new RegExp(`[${r.find(v=>v.type==="group")?.value}]`,"g"),u=new RegExp(`[${r.find(v=>v.type==="decimal")?.value}]`),d=new RegExp(`[${n.join("")}]`,"g"),h=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,m=/[-\u2212\u2013\u2014\u2015]/g;i=v=>{if((v=v.trim().replaceAll(o,"").replace(u,".").replace(d,_=>String(s.get(_))).replaceAll(h,"").replaceAll(m,"-"))==="")return null;const b=Number(v);return isNaN(b)?null:b},yB.set(e,i)}return i(t)}N6(()=>{fM=new WeakMap,kie={}});const yB=new Map,Oie=()=>ie.getLogger("esri.intl.substitute");function xxe(t,e,i={}){const{format:r={}}=i;return ip(t,n=>$xe(n,e,r))}function $xe(t,e,i){let r,n;const s=t.indexOf(":");if(s===-1?r=t.trim():(r=t.slice(0,s).trim(),n=t.slice(s+1).trim()),!r)return"";const o=sx(r,e);if(o==null)return"";const u=(n?i?.[n]:null)??i?.[r];return u?Txe(o,u):n?Exe(o,n):H6(o)}function Txe(t,e){switch(e.type){case"date":return Fy(t,e.intlOptions);case"number":return hf(t,e.intlOptions);default:return Oie().warn("missing format descriptor for key {key}"),H6(t)}}function Exe(t,e){switch(e.toLowerCase()){case"dateformat":return Fy(t);case"numberformat":return hf(t);default:return Oie().warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?Fy(t):/^numberformat/i.test(e)?hf(t):H6(t)}}function H6(t){switch(typeof t){case"string":return t;case"number":return hf(t);case"boolean":return""+t;default:return t instanceof Date?Fy(t):""}}const Cie={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function Mxe(t){return t in Cie}function gB(t){if(Mxe(t)){const e=Cie[t];return e===!0?t:e}return null}const D1=[],G0=new Map;function vB(t){for(const e of G0.keys())Die(t.pattern,e)&&G0.delete(e)}function Axe(t){return D1.includes(t)||(vB(t),D1.unshift(t)),ut(()=>{const e=D1.indexOf(t);e>-1&&(D1.splice(e,1),vB(t))})}async function Rie(t){const e=so();G0.has(t)||G0.set(t,Ixe(t,e));const i=G0.get(t);return i&&await kxe.add(i),i}function Pie(t){const e=D6(t);return e?gB(t)??gB(e):null}async function Ixe(t,e){const i=[];for(const r of D1)if(Die(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(n){i.push(n)}throw i.length?new L("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new L("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function Die(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}N6(()=>{G0.clear()});const kxe=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=ao())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function Oxe(t,e,i,r){const n=e.exec(i);if(!n)throw new L("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const s=n[1]?`${n[1]}/`:"",o=n[2],u=Pie(r),d=`${s}${o}.json`,h=u?`${s}${o}_${u}.json`:d;let m;try{m=await bB(t(h))}catch(v){if(h===d)throw new L("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:v});try{m=await bB(t(d))}catch(b){throw new L("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:b})}}return m}async function bB(t){if(wB.fetchBundleAsset!=null)return wB.fetchBundleAsset(t);const e=await $t(t,{responseType:"text"});return JSON.parse(e.data)}let Cxe=class{constructor({base:e="",pattern:i,location:r=new URL(window.location.href)}){let n;n=typeof r=="string"?s=>new URL(s,new URL(r,window.location.href)).href:r instanceof URL?s=>new URL(s,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=n,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,i){return Oxe(this.getAssetUrl,this.matcher,e,i)}};function Rxe(t){return new Cxe(t)}const wB={};Axe(Rxe({pattern:"esri/",location:rr}));const _B={};function Pxe(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages?.slice()||[],paths:{..._B.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=_B.baseUrl),e}let Dxe=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>e[i](...r)})}},mM=class{constructor(){this._dispatcher=new Dxe,this._workerPostMessage({type:Wd.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){Lb(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,r){this._dispatcher.addEventListener(e,i,r)}removeEventListener(e,i,r){this._dispatcher.removeEventListener(e,i,r)}_workerPostMessage(e){Lb(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=NS(e);if(i&&i.type===Wd.OPEN){const{modulePath:r,jobId:n}=i;let s=await Yb.loadWorker(r);s||(s=await import(r));const o=Yb.connect(s);this._workerPostMessage({type:Wd.OPENED,jobId:n,data:o})}}};const eN=()=>ie.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:Nxe}=Wd,Lxe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}).finally(()=>{t&&t.removeEventListener("abort",s)})}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://esriurl.com/using-local-assets.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||new Promise(e=>{require([o.modulePath],e)})).then(t)}):"System"in self&&"function"==typeof System.import?System.import(workerPath).then(e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath))).then(e=>e||System.import(o.modulePath)).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||import(o.modulePath)).then(t)}):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let wT,_T;const SB="Failed to create Worker. Fallback to execute module in main thread";async function jxe(){if(!q("esri-workers"))return xB(new mM);if(!wT&&!_T)try{const e=Lxe.split("{CONFIGURATION}").join(zxe());wT=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){_T=e||{}}let t;if(wT)try{t=new Worker(wT,{name:"esri-worker-"+Fxe++})}catch{eN().warn(SB,_T),t=new mM}else eN().warn(SB,_T),t=new mM;return xB(t)}async function xB(t){return new Promise(e=>{function i(n){const s=NS(n);s&&s.type===Nxe&&(t.removeEventListener("message",i),t.removeEventListener("error",r),e(t))}function r(n){n.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",r),eN().warn("Failed to create Worker. Fallback to execute module in main thread",n),(t=new mM).addEventListener("message",i),t.addEventListener("error",r)}t.addEventListener("message",i),t.addEventListener("error",r)})}function zxe(){let t;if(St.default!=null){const n={...St};delete n.default,t=JSON.parse(JSON.stringify(n))}else t=JSON.parse(JSON.stringify(St));t.assetsPath=jo(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?jo(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=so(),t.has={"esri-csp-restrictions":q("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":q("esri-2d-update-debug"),"esri-2d-log-updating":q("esri-2d-log-updating"),"featurelayer-pbf":q("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":q("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":q("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":q("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":q("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":q("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":q("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":q("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":q("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":q("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":q("featurelayer-snapshot-enabled"),"parquetlayer-full-query-feature-count":q("parquetlayer-full-query-feature-count"),"esri-atomics":q("esri-atomics"),"esri-shared-array-buffer":q("esri-shared-array-buffer"),"esri-tiles-debug":q("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":q("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":q("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=jo(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=jo(t.workers.workerPath):t.workers.workerPath=jo(rr("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=St.workers.loaderConfig,i=Pxe({baseUrl:e?.baseUrl,locale:so(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e?.has},map:{...e?.map},paths:{...e?.paths},packages:e?.packages||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:CK,fullVersion:a6,revision:RK}})}let Fxe=0;const{ABORT:$B,INVOKE:Vxe,OPEN:Uxe,OPENED:qxe,RESPONSE:K_}=Wd;let Gxe=class Nie{static async create(e){const i=await jxe();return new Nie(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",r=>{r.preventDefault(),ie.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:r}=i,n=vte();return new Promise((s,o)=>{const u={resolve:s,reject:o,abortHandle:Lz(r,()=>{this._outJobs.delete(n),this._post({type:$B,jobId:n})})};this._outJobs.set(n,u),this._post({type:Uxe,jobId:n,modulePath:e})})}_onMessage(e){const i=NS(e);if(i)switch(i.type){case qxe:this._onOpenedMessage(i);break;case K_:this._onResponseMessage(i);break;case $B:this._onAbortMessage(i);break;case Vxe:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,n=i.get(r);n&&(n.controller&&n.controller.abort(),i.delete(r))}_onInvokeMessage(e){const{methodName:i,jobId:r,data:n,abortable:s}=e,o=s?new AbortController:null,u=this._inJobs,d=a2e[i];let h;try{if(typeof d!="function")throw new TypeError(`${i} is not a function`);h=d.call(null,n,{signal:o?o.signal:null})}catch(m){return void this._post({type:K_,jobId:r,error:mA(m)})}Kn(h)?(u.set(r,{controller:o,promise:h}),h.then(m=>{u.has(r)&&(u.delete(r),this._post({type:K_,jobId:r},m))},m=>{u.has(r)&&(u.delete(r),m||(m={message:"Error encountered at method"+i}),Yr(m)||this._post({type:K_,jobId:r,error:mA(m||{message:`Error encountered at method ${i}`})}))})):this._post({type:K_,jobId:r},h)}_onOpenedMessage(e){const{jobId:i,data:r}=e,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),gi(n.abortHandle),n.resolve(r))}_onResponseMessage(e){const{jobId:i,error:r,data:n}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),gi(s.abortHandle),r?s.reject(L.fromJSON(JSON.parse(r))):s.resolve(n))}_post(e,i,r){return bte(this.worker,e,i,r)}};const TB=q("host-browser")?Math.min(navigator.hardwareConcurrency-1,q("workers-pool-size")??8):0;let Xm=q("esri-mobile")?Math.min(TB,3):TB;Xm||(Xm=q("safari")&&q("mac")?7:2);let EB=0;const yM=[];function Bxe(){Lie()}async function ST(t,e){const i=new o2e,{registryTarget:r,...n}=e;return await i.open(t,n),r&&Q1e(r,i),i}async function Hxe(t,e={}){if(typeof t!="string")throw new L("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(q("host-webworker")&&!q("esri-workers")&&(i="local"),i==="local"){let r=await Yb.loadWorker(t);r||(r=await import(t)),ft(e.signal);const n=e.client||r;return ST([Yb.connect(r,e.schedule)],{...e,client:n})}if(await Lie(),ft(e.signal),i==="dedicated"){const r=EB++%Xm;return ST([await yM[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,Xm);if(r<Xm){const n=new Array(r);for(let s=0;s<r;++s){const o=EB++%Xm;n[s]=yM[o].open(t,e)}return ST(n,e)}}return ST(yM.map(r=>r.open(t,e)),e)}let xT=null;async function Lie(){if(xT)return xT;new AbortController;const t=[];for(let e=0;e<Xm;e++){const i=Gxe.create(e).then(r=>(yM[e]=r,r));t.push(i)}return xT=Promise.all(t),xT}function Ql(t,e,i=fe){return e||(e=new i),e===t||e.destroyed||(e.removeAll(),Wxe(t)?e.addMany(t):t&&e.add(t)),e}function jie(t){return t}function Wxe(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}let V2=class extends fe{constructor(e){super(e),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){this.destroyed||e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(fe.ofType(this.itemType.Type))(e):new fe(e)}};function _A(t,e){return{type:t,cast:jie,set(i){const r=Ql(i,this._get(e),t);r&&!r.destroyed&&(r.owner=this),this._set(e,r)}}}l([p()],V2.prototype,"owner",null),V2=l([M("esri.core.support.OwningCollection")],V2);function Y(){return[0,0,0]}function mn(t){return[t[0],t[1],t[2]]}function Ms(t,e,i){return[t,e,i]}function zie(t,e,i){return[t,e,i]}function Zxe(t,e=Y()){const i=Math.min(3,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function Fie(){return Y()}function Vie(){return Ms(1,1,1)}function Uie(){return Ms(1,0,0)}function qie(){return Ms(0,1,0)}function Gie(){return Ms(0,0,1)}const Bie=Fie(),Jxe=Vie(),Yxe=Uie(),Qxe=qie(),jS=Gie();Object.freeze(Object.defineProperty({__proto__:null,ONES:Jxe,UNIT_X:Yxe,UNIT_Y:Qxe,UNIT_Z:jS,ZEROS:Bie,clone:mn,create:Y,freeze:zie,fromArray:Zxe,fromValues:Ms,ones:Vie,unitX:Uie,unitY:qie,unitZ:Gie,zeros:Fie},Symbol.toStringTag,{value:"Module"}));var tN;let Sv=tN=class extends _e{constructor(t){super(t),this.isInverse=!1,this.wkt=null,this.wkid=null}getInverse(){return new tN({isInverse:!this.isInverse,wkid:this.wkid,wkt:this.wkt})}};l([p()],Sv.prototype,"isInverse",void 0),l([p()],Sv.prototype,"wkt",void 0),l([p()],Sv.prototype,"wkid",void 0),Sv=tN=l([M("esri.geometry.operators.support.GeographicTransformationStep")],Sv);var iN;let U2=iN=class extends _e{constructor(t){super(t),this.steps=[]}getInverse(){const t=new iN;for(let e=this.steps.length-1;e>=0;e--){const i=this.steps[e];t.steps.push(i.getInverse())}return t}};l([p({type:[Sv],nonNullable:!0})],U2.prototype,"steps",void 0),U2=iN=l([M("esri.geometry.operators.support.GeographicTransformation")],U2);const bs=Math.PI/180,Xxe=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Wp=Ji.radius,ul=Ji.eccentricitySquared,Kxe={a1:Wp*ul,a2:Wp*ul*Wp*ul,a3:Wp*ul*ul/2,a4:Wp*ul*Wp*ul*2.5,a5:Wp*ul+Wp*ul*ul/2,a6:1-ul},e$e={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:Ji.radius,f:Ji.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:af.radius,f:af.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Ju.radius,f:Ju.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Ju.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}},N1={2:{5:Ri,7:null,9:null,10:Ri,1:G2,6:null,8:null,0:null,3:B0,11:H0,2:Ri,4:J0},5:{5:Ri,7:null,9:null,10:Ri,1:G2,6:null,8:null,0:null,3:B0,11:H0,2:Ri,4:J0},7:{5:null,7:Ri,9:null,10:Ri,1:null,6:IB,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:Ri,10:Ri,1:null,6:null,8:AB,0:null,3:null,11:null,2:null,4:null},3:{5:q2,7:null,9:null,10:q2,1:t$e,6:null,8:null,0:null,3:Ri,11:n$e,2:q2,4:i$e},4:{5:Y0,7:null,9:null,10:Y0,1:h$e,6:null,8:null,0:null,3:f$e,11:s$e,2:Y0,4:Ri},1:{5:Z0,7:null,9:null,10:Z0,1:Ri,6:null,8:null,0:null,3:c$e,11:o$e,2:Z0,4:d$e},6:{5:null,7:OB,9:null,10:OB,1:null,6:Ri,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:kB,10:kB,1:null,6:null,8:Ri,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:Ri,3:null,11:null,2:null,4:null},10:{5:Ri,7:Ri,9:Ri,10:Ri,1:G2,6:IB,8:AB,0:null,3:B0,11:H0,2:Ri,4:J0},11:{5:W0,7:null,9:null,10:W0,1:a$e,6:null,8:null,0:null,3:l$e,11:Ri,2:W0,4:u$e}};function ik(t,e){return Hie(t,e)?.projector}function Hie(t,e){if(t==null||e==null)return null;if(Dc.source.spatialReference===t&&Dc.dest.spatialReference===e)return Dc;const i=MB(t,Dc.source),r=MB(e,Dc.dest);return i===0&&r===0?Fi(t,e)?Dc.projector=Ri:Dc.projector=null:Dc.projector=N1[i][r],Dc}function MB(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=Kr(t,1)),OS(t)?e.spatialReferenceId=1:uf(t)?e.spatialReferenceId=2:Yo(t)?e.spatialReferenceId=3:AD(t)?e.spatialReferenceId=11:t.wkt===aee.wkt?e.spatialReferenceId=4:t.wkid===4490?e.spatialReferenceId=5:t.wkt===FI.wkt?e.spatialReferenceId=6:t.wkt===VI.wkt?e.spatialReferenceId=8:iee(t)?e.spatialReferenceId=7:ree(t)?e.spatialReferenceId=9:e.spatialReferenceId=0):0}function Ri(t,e,i,r){t!==i&&(i[r++]=t[e++],i[r++]=t[e++],i[r]=t[e])}function q2(t,e,i,r){i[r]=Kb*(t[e]/py),i[r+1]=Kb*(Wie-2*Math.atan(Math.exp(-t[e+1]/py))),i[r+2]=t[e+2]}function t$e(t,e,i,r){const n=t[e]/py,s=Wie-2*Math.atan(Math.exp(-t[e+1]/py)),o=py+t[e+2],u=Math.cos(s)*o;i[r]=Math.cos(n)*u,i[r+1]=Math.sin(n)*u,i[r+2]=Math.sin(s)*o}function i$e(t,e,i,r){q2(t,e,i,r),J0(i,r,i,r)}function r$e(t,e,i,r,n){const s=.4999999*Math.PI,o=Qr(Xb*t[e+1],-s,s),u=Math.sin(o);i[r++]=Xb*t[e]*n.radius,i[r++]=n.halfSemiMajorAxis*Math.log((1+u)/(1-u)),i[r]=t[e+2]}function B0(t,e,i,r){r$e(t,e,i,r,Ji)}function H0(t,e,i,r){i[r]=t[e]*CB,i[r+1]=t[e+1]*CB,i[r+2]=t[e+2]}function W0(t,e,i,r){i[r]=t[e]*RB,i[r+1]=t[e+1]*RB,i[r+2]=t[e+2]}function n$e(t,e,i,r){q2(t,e,i,r),H0(i,r,i,r)}function s$e(t,e,i,r){Y0(t,e,i,r),H0(i,r,i,r)}function o$e(t,e,i,r){Z0(t,e,i,r),H0(i,r,i,r)}function a$e(t,e,i,r){W0(t,e,i,r),G2(i,r,i,r)}function l$e(t,e,i,r){W0(t,e,i,r),B0(i,r,i,r)}function u$e(t,e,i,r){W0(t,e,i,r),J0(i,r,i,r)}function W6(t,e,i,r,n){const s=n+t[e+2],o=Xb*t[e+1],u=Xb*t[e],d=Math.cos(o)*s;i[r]=Math.cos(u)*d,i[r+1]=Math.sin(u)*d,i[r+2]=Math.sin(o)*s}function AB(t,e,i,r){W6(t,e,i,r,af.radius)}function IB(t,e,i,r){W6(t,e,i,r,Ju.radius)}function G2(t,e,i,r){W6(t,e,i,r,Ji.radius)}function Z6(t,e,i,r,n){const s=t[e],o=t[e+1],u=t[e+2],d=Math.sqrt(s*s+o*o+u*u),h=Qz(u/(d===0?1:d)),m=Math.atan2(o,s);i[r++]=Kb*m,i[r++]=Kb*h,i[r]=d-n}function kB(t,e,i,r){Z6(t,e,i,r,af.radius)}function OB(t,e,i,r){Z6(t,e,i,r,Ju.radius)}function Z0(t,e,i,r){Z6(t,e,i,r,Ji.radius)}function c$e(t,e,i,r){Z0(t,e,i,r),B0(i,r,i,r)}function d$e(t,e,i,r){Z0(t,e,i,r),J0(i,r,i,r)}function p$e(t,e,i,r,n){const s=Xb*t[e],o=Xb*t[e+1],u=t[e+2],d=Math.sin(o),h=Math.cos(o),m=n.radius/Math.sqrt(1-n.eccentricitySquared*d*d);i[r++]=(m+u)*h*Math.cos(s),i[r++]=(m+u)*h*Math.sin(s),i[r++]=(m*(1-n.eccentricitySquared)+u)*d}function J0(t,e,i,r){p$e(t,e,i,r,Ji)}function Y0(t,e,i,r){const n=Kxe,s=t[e],o=t[e+1],u=t[e+2];let d,h,m,v,b,_,x,$,E,A,O,D,R,P,j,Q,re,ce,ue,ye,he;d=Math.abs(u),h=s*s+o*o,m=Math.sqrt(h),v=h+u*u,b=Math.sqrt(v),ye=Math.atan2(o,s),_=u*u/v,x=h/v,P=n.a2/b,j=n.a3-n.a4/b,x>.3?($=d/b*(1+x*(n.a1+P+_*j)/b),ue=Math.asin($),A=$*$,E=Math.sqrt(1-A)):(E=m/b*(1-_*(n.a5-P-x*j)/b),ue=Math.acos(E),A=1-E*E,$=Math.sqrt(A)),O=1-Ji.eccentricitySquared*A,D=Ji.radius/Math.sqrt(O),R=n.a6*D,P=m-D*E,j=d-R*$,re=E*P+$*j,Q=E*j-$*P,ce=Q/(R/O+re),ue+=ce,he=re+Q*ce/2,u<0&&(ue=-ue),i[r++]=Kb*ye,i[r++]=Kb*ue,i[r]=he}function h$e(t,e,i,r){Y0(t,e,i,r),G2(i,r,i,r)}function f$e(t,e,i,r){Y0(t,e,i,r),B0(i,r,i,r)}const Dc={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Ri},Xb=$w(1),Kb=iK(1),Wie=.5*Math.PI,py=Ji.radius,CB=py*Math.PI/180,RB=180/(py*Math.PI);function uc(t,e,i,r,n,s,o=Math.floor(t.length/3)){const u=ik(e,n);if(u==null)return!1;if(u===Ri){if(t===r&&i===s)return!0;const h=i+3*o;for(let m=i,v=s;m<h;m++,v++)r[v]=t[m];return!0}const d=i+3*o;for(let h=i,m=s;h<d;h+=3,m+=3)u(t,h,r,m);return!0}const cJe=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:uc},Symbol.toStringTag,{value:"Module"}));function PB(t,e,i,r,n,s){return $T[0]=t,$T[1]=e,$T[2]=i,uc($T,r,0,n,s,0)}const $T=Y();function Zie(t,e,i){if(e==null||i==null||i.vcsWkid||Fi(e,i)||cf(e)||cf(i))return null;const r=Kl(e)/Kl(i);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return n=>m$e(n,r);case"polyline":case"esriGeometryPolyline":return n=>g$e(n,r);case"polygon":case"esriGeometryPolygon":return n=>y$e(n,r);case"multipoint":case"esriGeometryMultipoint":return n=>v$e(n,r);case"extent":case"esriGeometryEnvelope":return n=>b$e(n,r);default:return null}}function m$e(t,e){t?.z!=null&&(t.z*=e)}function y$e(t,e){if(t)for(const i of t.rings)for(const r of i)r.length>2&&(r[2]*=e)}function g$e(t,e){if(t)for(const i of t.paths)for(const r of i)r.length>2&&(r[2]*=e)}function v$e(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function b$e(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let B2=null,zS=null,FS=null,ew=null,rN={};const J6=new fw;function cc(){return!!(zS?.isLoaded()&&FS?.isLoaded()&&ew?.isLoaded())}function Jie(){return!!cc()||(Ve(J6),Xd(),!1)}function Yie(t,e){return!t||!e||Qo(t,e)||Jie()}function w$e(t,e){return!Qo(t,e)&&!cc()}async function Xd(t){B2==null&&(B2=Promise.all([H(()=>import("./projectOperator-B8_tK1SU.js"),__vite__mapDeps([138,139,83])).then(e=>(zS=e,zS.load())),H(()=>import("./projectOperator-CJirxKLe.js"),__vite__mapDeps([140,139,83])).then(e=>(FS=e,FS.load())),H(()=>import("./geographicTransformationUtils-6Ds3Enc8.js"),[]).then(e=>(ew=e,ew.load()))])),await B2,ft(t),J6.notify()}function Is(t,e,i){return Array.isArray(t)?t.length===0?[]:(jwe(t),nN(t,t[0].spatialReference,e,i)):(Bb(t),nN([t],t.spatialReference,e,i)[0])}function nN(t,e,i,r){if(e==null||i==null)return t;if(Qo(e,i,r))return t.map(n=>gM(n,e,i));if(r?.geographicTransformation==null&&OS(e))return t.map(n=>gM(n,e,we.WGS84)).map(n=>tw(n,i));if(r?.geographicTransformation==null&&OS(i))return t.map(n=>tw(n,we.WGS84)).map(n=>gM(n,we.WGS84,i));if(!cc())throw new Xie;if(!r?.geographicTransformation){if(r?.extendedParams)r={...r,geographicTransformation:ew.getTransformation(e,i,r.areaOfInterestExtent)||new U2};else if(!r?.areaOfInterestExtent){const n=_$e(e,i);let s=rN[n];s||(s=ew.getTransformation(e,i)||new U2,rN[n]=s),r={geographicTransformation:s}}}return t[0].spatialReference||(t[0].spatialReference=e),t[0]instanceof Wr?zS.executeMany(t,i,r):FS.executeMany(t,i,r)}function _$e(t,e){return[t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??"",e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??""].join()}function S$e(t,e){const i=Qie([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function Qie(t,e){if(!cc()){for(const i of t)if(i!=null&&!Fi(i.spatialReference,e)&&Fo(i.spatialReference)&&Fo(e)&&!Qo(i.spatialReference,e))return Ve(J6),{pending:Xd(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:Fi(i.spatialReference,e)?i:Fo(i.spatialReference)&&Fo(e)?tw(i,e):null)}}let Xie=class extends L{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function x$e(){B2=null,zS=null,FS=null,ew=null,rN={}}const $$e={get loadPromise(){return B2}};function tw(t,e){try{const i=Is(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const r=Zie(i.type,t.spatialReference,e);return r?.(i),i}catch(i){if(!(i instanceof Xie))throw i;return null}}async function Kie(t,e,i){const r=t.spatialReference;return r!=null&&e!=null&&await ff(r,e,null,i),tw(t,e)}function Qo(t,e,i){return!(i?.areaOfInterestExtent||i?.extendedParams||i?.geographicTransformation)&&(!!Fi(t,e)||Fo(t)&&Fo(e)&&!!ik(t,e))}function T$e(t,e){if(Fi(t,e))return!0;if(!Fo(t)||!Fo(e))return!1;const i=uf(t)||Yo(t)||MD(t),r=uf(e)||Yo(e)||MD(e);return i&&r}async function ff(t,e,i,r){if(cc())return Rq(r);if(Array.isArray(t)){for(const{source:n,dest:s,options:o}of t)if(n&&s&&!Qo(n,s,o))return Xd(r)}else if(t&&e&&!Qo(t,e,i))return Xd(r);return Rq(r)}function gM(t,e,i){return t?"x"in t?ere(t,e,new je,i,0):"xmin"in t?sre(t,e,new Xe,i,0):"rings"in t?nre(t,e,new hi,i,0):"paths"in t?ire(t,e,new Kt,i,0):"points"in t?tre(t,e,new Jn,i,0):null:null}function E$e(t,e,i=e.spatialReference,r=0){return i!=null&&t.spatialReference!=null&&ere(t,t.spatialReference,e,i,r)!=null}function ere(t,e,i,r,n){Hn[0]=t.x,Hn[1]=t.y;const s=t.z;return Hn[2]=s!==void 0?s:n,uc(Hn,e,0,Hn,r,0)?(i.x=Hn[0],i.y=Hn[1],i.spatialReference=r,s!==void 0||cf(r)?(i.z=Hn[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function M$e(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&tre(t,t.spatialReference,e,i,r)!=null}function tre(t,e,i,r,n){const{points:s,hasZ:o,hasM:u}=t,d=[],h=s.length,m=[];for(const b of s)m.push(b[0],b[1],o?b[2]:n);if(!uc(m,e,0,m,r,0,h))return null;const v=o||cf(r);for(let b=0;b<h;++b){const _=3*b,x=m[_],$=m[_+1];v&&u?d.push([x,$,m[_+2],s[b][3]]):v?d.push([x,$,m[_+2]]):u?d.push([x,$,s[b][2]]):d.push([x,$])}return i.points=d,i.spatialReference=r,i.hasZ=o,i.hasM=u,i}function A$e(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&ire(t,t.spatialReference,e,i,r)!=null}function ire(t,e,i,r,n){const{paths:s,hasZ:o,hasM:u}=t,d=[];if(!ore(s,o??!1,u??!1,e,d,r,n))return null;const h=o||cf(r);return i.paths=d,i.spatialReference=r,i.hasZ=h,i.hasM=u,i}function rre(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&nre(t,t.spatialReference,e,i,r)!=null}function nre(t,e,i,r,n){const{rings:s,hasZ:o,hasM:u}=t,d=[];if(!ore(s,o??!1,u??!1,e,d,r,n))return null;const h=o||cf(r);return i.rings=d,i.spatialReference=r,i.hasZ=h,i.hasM=u,i}function I$e(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&sre(t,t.spatialReference,e,i,r)!=null}function sre(t,e,i,r,n){const{xmin:s,ymin:o,xmax:u,ymax:d,hasZ:h,hasM:m}=t,v=h?t.zmin:n;if(!PB(s,o,v,e,Hn,r))return null;const b=h||cf(r);i.xmin=Hn[0],i.ymin=Hn[1],b&&(i.zmin=Hn[2]);const _=h?t.zmax:n;return PB(u,d,_,e,Hn,r)?(i.xmax=Hn[0],i.ymax=Hn[1],b&&(i.zmax=Hn[2]),m&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=r,i):null}function ore(t,e,i,r,n,s,o=0){const u=new Array;for(const m of t)for(const v of m)u.push(v[0],v[1],e?v[2]:o);if(!uc(u,r,0,u,s,0))return!1;let d=0;n.length=0;const h=e||cf(s);for(const m of t){const v=new Array;for(const b of m)h&&i?v.push([u[d++],u[d++],u[d++],b[3]]):h?v.push([u[d++],u[d++],u[d++]]):i?(v.push([u[d++],u[d++],b[2]]),d++):(v.push([u[d++],u[d++]]),d++);n.push(v)}return!0}const Hn=Y(),pJe=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Qo,initializeProjection:ff,isEqualBaseGCS:T$e,isLoaded:cc,isLoadedOrLoad:Jie,isLoadedOrLoadFor:Yie,load:Xd,project:Is,projectExtent:I$e,projectMany:nN,projectMultipoint:M$e,projectOrLoad:S$e,projectOrLoadMany:Qie,projectPoint:E$e,projectPolygon:rre,projectPolyline:A$e,projectWithZConversion:Kie,projectWithoutEngine:gM,requiresLoad:w$e,test:$$e,tryProjectWithZConversion:tw,unload:x$e},Symbol.toStringTag,{value:"Module"}));var sN,lb;let In=(lb=class extends B{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new sN({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}},sN=lb,lb);l([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],In.prototype,"cols",void 0),l([p({type:tt,json:{write:!0}})],In.prototype,"level",void 0),l([p({type:String,json:{write:!0}})],In.prototype,"levelValue",void 0),l([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],In.prototype,"origin",void 0),l([p({type:Number,json:{write:!0}})],In.prototype,"resolution",void 0),l([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],In.prototype,"rows",void 0),l([p({type:Number,json:{write:!0}})],In.prototype,"scale",void 0),In=sN=l([M("esri.layers.support.LOD")],In);let k$e=class are{constructor(e,i,r,n=io()){this._level=e,this._row=i,this._col=r,this.extent=n}get id(){return this._id??=`${this.level}/${this.row}/${this.col}`,this._id}get level(){return this._level}set level(e){this._level=e,this._id=null}get row(){return this._row}set row(e){this._row=e,this._id=null}get col(){return this._col}set col(e){this._col=e,this._id=null}toJSON(){return{level:this._level,row:this._row,col:this._col,extent:this.extent}}static fromJSON(e){return new are(e.level,e.row,e.col,e.extent)}};var xv;const DB=new Be({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});var ub;let cs=(ub=class extends B{static create(e={}){const{resolutionFactor:i=1,scales:r,size:n=256,spatialReference:s=we.WebMercator,numLODs:o=24}=e;if(!Fo(s)){const b=[];if(r)for(let _=0;_<r.length;_++){const x=r[_];b.push(new In({level:_,scale:x,resolution:x}))}else{let _=5e-4;for(let x=o-1;x>=0;x--)b.unshift(new In({level:x,scale:_,resolution:_})),_*=2}return new xv({dpi:96,lods:b,origin:new je(0,0,s),size:[n,n],spatialReference:s})}const u=es(s),d=e.origin?new je({x:e.origin.x,y:e.origin.y,spatialReference:s}):new je(u?{x:u.origin[0],y:u.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),h=96,m=1/(Kr(s)*39.37*h),v=[];if(r)for(let b=0;b<r.length;b++){const _=r[b],x=_*m;v.push(new In({level:b,scale:_,resolution:x}))}else{let b=Jy(s)?512/n*5916575275917094e-7:256/n*591657527591555e-6;const _=Math.ceil(o/i);v.push(new In({level:0,scale:b,resolution:b*m}));for(let x=1;x<_;x++){const $=b/2**i,E=$*m;v.push(new In({level:x,scale:$,resolution:E})),b=$}}return new xv({dpi:h,lods:v,origin:d,size:[n,n],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:i}=this;if(e&&i){const r=es(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-i.x)<=r.dx}return!1}readOrigin(e,i){return je.fromJSON({spatialReference:i.spatialReference,...e})}set lods(e){let i=0,r=0;const n=[],s=this._levelToLOD={};e&&(i=-1/0,r=1/0,e.forEach(o=>{n.push(o.scale),i=o.scale>i?o.scale:i,r=o.scale<r?o.scale:r,s[o.level]=o})),this._set("scales",n),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,i){return[i.cols,i.rows]}writeSize(e,i){i.cols=e[0],i.rows=e[1]}zoomToScale(e){const i=this.scales;if(e<=0)return i[0];if(e>=i.length-1)return i[i.length-1];const r=Math.floor(e),n=r+1;return i[r]/(i[r]/i[n])**(e-r)}scaleToZoom(e){const i=this.scales,r=i.length-1;let n=0;for(;n<r;n++){const s=i[n],o=i[n+1];if(s<=e)return n;if(o===e)return n+1;if(s>e&&o<e)return n+Math.log(s/e)/Math.log(s/o)}return n}tileAt(e,i,r,n){const s=this.lodAt(e);if(!s)return null;let o,u;if(typeof i=="number")o=i,u=r;else if(Fi(i.spatialReference,this.spatialReference))o=i.x,u=i.y,n=r;else{const m=qI(i,this.spatialReference);if(m==null)return null;o=m.x,u=m.y,n=r}const d=s.resolution*this.size[0],h=s.resolution*this.size[1];return n??=new k$e(0,0,0),n.level=e,n.row=Math.floor((this.origin.y-u)/h+.001),n.col=Math.floor((o-this.origin.x)/d+.001),this.updateTileInfo(n),n}updateTileInfo(e,i=0){if(!("extent"in e))return!1;let r=this.lodAt(e.level);if(!r&&i===1){const u=this.lods[this.lods.length-1];u.level<e.level&&(r=u)}if(!r)return!1;const n=e.level-r.level,s=r.resolution*this.size[0]/2**n,o=r.resolution*this.size[1]/2**n;return e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+o,!0}upsampleTile(e){const i=this._upsampleLevels[e.level];return!(!i||i.parentLevel===-1)&&(e.level=i.parentLevel,e.row=Math.floor(e.row/i.factor+.001),e.col=Math.floor(e.col/i.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,i){const r=this.lodAt(i.level);if(r==null)return null;const{resolution:n}=r,s=n*this.size[0],o=n*this.size[1];return e[0]=this.origin.x+i.col*s,e[1]=this.origin.y-(i.row+1)*o,e[2]=e[0]+s,e[3]=e[1]+o,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return xv.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const i=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&i===0)return this;const r=[],n=this.lods.length-i;for(let s=0;s<n;s++){const o=s+i,{scale:u,resolution:d}=o>=0?this.lods[o]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new In({level:s,scale:u,resolution:d}))}return new xv({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let i=null;for(let r=0;r<e.length;r++){const n=e[r];this._upsampleLevels[n.level]={parentLevel:i?i.level:-1,factor:i?i.resolution/n.resolution:0},i=n}}},xv=ub,ub);l([p({type:Number,json:{write:!0}})],cs.prototype,"compressionQuality",void 0),l([p({type:Number,json:{write:!0}})],cs.prototype,"dpi",void 0),l([p({type:String,json:{read:DB.read,write:DB.write,origins:{"web-scene":{read:!1,write:!1}}}})],cs.prototype,"format",void 0),l([p({readOnly:!0})],cs.prototype,"isWrappable",null),l([p({type:je,json:{write:!0}})],cs.prototype,"origin",void 0),l([se("origin")],cs.prototype,"readOrigin",null),l([p({type:[In],value:null,json:{write:!0}})],cs.prototype,"lods",null),l([p({readOnly:!0})],cs.prototype,"scales",void 0),l([p({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],cs.prototype,"size",void 0),l([se("size",["rows","cols"])],cs.prototype,"readSize",null),l([pe("size",{cols:{type:tt},rows:{type:tt}})],cs.prototype,"writeSize",null),l([p({type:we,json:{write:!0}})],cs.prototype,"spatialReference",void 0),cs=xv=l([M("esri.layers.support.TileInfo")],cs);let iw=class extends V2{constructor(e){super(e),this.addHandles(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(ie.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};iw=l([M("esri.support.AnalysesCollection")],iw);const vM={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],r=e[1],n=this.values;return r>=i?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},p5={xsmall:544,small:768,medium:992,large:1200};function O$e(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function h5(t,e){return e?vM[t].valueToClassName[e].split(" "):[]}const C$e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=p5}initialize(){this.addHandles(be(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Zr))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!O$e(r)){const n=JSON.stringify(p5,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n),r=p5}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=ws.acquire(),n=ws.acquire();let s,o=!1;for(s in vM){const u=this[s],d=vM[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});u!==d&&(o=!0,this[s]=d,h5(s,u).forEach(h=>n.push(h)),h5(s,d).forEach(h=>r.push(h)))}o&&(this._applyClassNameChanges(r,n),ws.release(r),ws.release(n))}_applyClassNameChanges(r,n){const s=this.container;s&&(n.forEach(o=>s.classList.remove(o)),r.forEach(o=>s.classList.add(o)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let n;for(n in vM)h5(n,this[n]).forEach(s=>r.classList.remove(s))}};return l([p()],i.prototype,"breakpoints",null),l([p()],i.prototype,"orientation",void 0),l([p()],i.prototype,"widthBreakpoint",void 0),l([p()],i.prototype,"heightBreakpoint",void 0),i=l([M("esri.views.BreakpointsOwner")],i),i};function Y6(t){return typeof t=="string"?document.getElementById(t):t??null}function NB(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let Jh=class extends _e{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,i,r={}){return this._installWatch(e,i,r,be)}addWhen(e,i,r={}){return this._installWatch(e,i,r,Pn)}addOnCollectionChange(e,i,{initial:r=!1,final:n=!1}={}){const s=++this._handleId;return this.addHandles([Wo(e,"after-changes",this._createSyncUpdatingCallback(),Zo),Wo(e,"change",i,{onListenerAdd:r?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:n?o=>i({added:[],removed:o.toArray()}):void 0})],s),ut(()=>this.removeHandles(s))}addPromise(e){if(e==null)return e;const i=++this._handleId;this.addHandles(ut(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(TT)||this._set("updating",!1))}),i),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this.removeHandles(i);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,i,r={},n){const s=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,s);const o=n(e,i,r);return this.addHandles(o,s),ut(()=>this.removeHandles(s))}_installSyncUpdatingWatch(e,i){const r=this._createSyncUpdatingCallback(),n=be(e,r,{sync:!0,equals:()=>!1});return this.addHandles(n,i),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(TT),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(vw(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(TT))}),TT)}}};l([p({readOnly:!0})],Jh.prototype,"updating",void 0),Jh=l([M("esri.core.support.UpdatingHandles")],Jh);const TT=-42;var SA=function(){return SA=Object.assign||function(e){for(var i,r=1,n=arguments.length;r<n;r++){i=arguments[r];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},SA.apply(this,arguments)},oN={exports:{}},Yi={},aN={exports:{}},Ky={};function lre(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function R$e(t,e,i){}function P$e(t,e,i){}var D$e=/javascript\s*\:/img;function N$e(t,e){return D$e.test(e)?"":e}Ky.whiteList=lre();Ky.getDefaultWhiteList=lre;Ky.onAttr=R$e;Ky.onIgnoreAttr=P$e;Ky.safeAttrValue=N$e;var L$e={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},e1=L$e;function j$e(t,e){t=e1.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,r=!1,n=0,s=0,o="";function u(){if(!r){var m=e1.trim(t.slice(n,s)),v=m.indexOf(":");if(v!==-1){var b=e1.trim(m.slice(0,v)),_=e1.trim(m.slice(v+1));if(b){var x=e(n,o.length,b,_,m);x&&(o+=x+"; ")}}}n=s+1}for(;s<i;s++){var d=t[s];if(d==="/"&&t[s+1]==="*"){var h=t.indexOf("*/",s+2);if(h===-1)break;s=h+1,n=s+1,r=!1}else d==="("?r=!0:d===")"?r=!1:d===";"?r||u():d===`
`&&u()}return e1.trim(o)}var z$e=j$e,ET=Ky,F$e=z$e;function LB(t){return t==null}function V$e(t){var e={};for(var i in t)e[i]=t[i];return e}function ure(t){t=V$e(t||{}),t.whiteList=t.whiteList||ET.whiteList,t.onAttr=t.onAttr||ET.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||ET.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||ET.safeAttrValue,this.options=t}ure.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onAttr,s=i.onIgnoreAttr,o=i.safeAttrValue,u=F$e(t,function(d,h,m,v,b){var _=r[m],x=!1;if(_===!0?x=_:typeof _=="function"?x=_(v):_ instanceof RegExp&&(x=_.test(v)),x!==!0&&(x=!1),v=o(m,v),!!v){var $={position:h,sourcePosition:d,source:b,isWhite:x};if(x){var E=n(m,v,$);return LB(E)?m+":"+v:E}else{var E=s(m,v,$);if(!LB(E))return E}}});return u};var U$e=ure;(function(t,e){var i=Ky,r=U$e;function n(o,u){var d=new r(u);return d.process(o)}e=t.exports=n,e.FilterCSS=r;for(var s in i)e[s]=i[s]})(aN,aN.exports);var Q6=aN.exports,X6={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,n;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,n=t.length;r<n;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},q$e=Q6.FilterCSS,G$e=Q6.getDefaultWhiteList,xA=X6;function cre(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var dre=new q$e;function B$e(t,e,i){}function H$e(t,e,i){}function W$e(t,e,i){}function Z$e(t,e,i){}function pre(t){return t.replace(Y$e,"&lt;").replace(Q$e,"&gt;")}function J$e(t,e,i,r){if(i=vre(i),e==="href"||e==="src"){if(i=xA.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(MT.lastIndex=0,MT.test(i))return""}else if(e==="style"){if(jB.lastIndex=0,jB.test(i)||(zB.lastIndex=0,zB.test(i)&&(MT.lastIndex=0,MT.test(i))))return"";r!==!1&&(r=r||dre,i=r.process(i))}return i=bre(i),i}var Y$e=/</g,Q$e=/>/g,X$e=/"/g,K$e=/&quot;/g,eTe=/&#([a-zA-Z0-9]*);?/gim,tTe=/&colon;?/gim,iTe=/&newline;?/gim,MT=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,jB=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,zB=/u\s*r\s*l\s*\(.*/gi;function hre(t){return t.replace(X$e,"&quot;")}function fre(t){return t.replace(K$e,'"')}function mre(t){return t.replace(eTe,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function yre(t){return t.replace(tTe,":").replace(iTe," ")}function gre(t){for(var e="",i=0,r=t.length;i<r;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return xA.trim(e)}function vre(t){return t=fre(t),t=mre(t),t=yre(t),t=gre(t),t}function bre(t){return t=hre(t),t=pre(t),t}function rTe(){return""}function nTe(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function r(o){return i?!0:xA.indexOf(t,o)!==-1}var n=[],s=!1;return{onIgnoreTag:function(o,u,d){if(r(o))if(d.isClosing){var h="[/removed]",m=d.position+h.length;return n.push([s!==!1?s:d.position,m]),s=!1,h}else return s||(s=d.position),"[removed]";else return e(o,u,d)},remove:function(o){var u="",d=0;return xA.forEach(n,function(h){u+=o.slice(d,h[0]),d=h[1]}),u+=o.slice(d),u}}}function sTe(t){for(var e="",i=0;i<t.length;){var r=t.indexOf("<!--",i);if(r===-1){e+=t.slice(i);break}e+=t.slice(i,r);var n=t.indexOf("-->",r);if(n===-1)break;i=n+3}return e}function oTe(t){var e=t.split("");return e=e.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}Yi.whiteList=cre();Yi.getDefaultWhiteList=cre;Yi.onTag=B$e;Yi.onIgnoreTag=H$e;Yi.onTagAttr=W$e;Yi.onIgnoreTagAttr=Z$e;Yi.safeAttrValue=J$e;Yi.escapeHtml=pre;Yi.escapeQuote=hre;Yi.unescapeQuote=fre;Yi.escapeHtmlEntities=mre;Yi.escapeDangerHtml5Entities=yre;Yi.clearNonPrintableCharacter=gre;Yi.friendlyAttrValue=vre;Yi.escapeAttrValue=bre;Yi.onIgnoreTagStripAll=rTe;Yi.StripTagBody=nTe;Yi.stripCommentTag=sTe;Yi.stripBlankChar=oTe;Yi.cssFilter=dre;Yi.getDefaultCSSWhiteList=G$e;var rk={},Th=X6;function aTe(t){var e=Th.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=Th.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function lTe(t){return t.slice(0,2)==="</"}function uTe(t,e,i){var r="",n=0,s=!1,o=!1,u=0,d=t.length,h="",m="";e:for(u=0;u<d;u++){var v=t.charAt(u);if(s===!1){if(v==="<"){s=u;continue}}else if(o===!1){if(v==="<"){r+=i(t.slice(n,u)),s=u,n=u;continue}if(v===">"){r+=i(t.slice(n,s)),m=t.slice(s,u+1),h=aTe(m),r+=e(s,r.length,h,m,lTe(m)),n=u+1,s=!1;continue}if(v==='"'||v==="'")for(var b=1,_=t.charAt(u-b);_.trim()===""||_==="=";){if(_==="="){o=v;continue e}_=t.charAt(u-++b)}}else if(v===o){o=!1;continue}}return n<t.length&&(r+=i(t.substr(n))),r}var cTe=/[^a-zA-Z0-9\\_:.-]/gim;function dTe(t,e){var i=0,r=0,n=[],s=!1,o=t.length;function u(b,_){if(b=Th.trim(b),b=b.replace(cTe,"").toLowerCase(),!(b.length<1)){var x=e(b,_||"");x&&n.push(x)}}for(var d=0;d<o;d++){var h=t.charAt(d),m,v;if(s===!1&&h==="="){s=t.slice(i,d),i=d+1,r=t.charAt(i)==='"'||t.charAt(i)==="'"?i:hTe(t,d+1);continue}if(s!==!1&&d===r){if(v=t.indexOf(h,d+1),v===-1)break;m=Th.trim(t.slice(r+1,v)),u(s,m),s=!1,d=v,i=d+1;continue}if(/\s|\n|\t/.test(h))if(t=t.replace(/\s|\n|\t/g," "),s===!1)if(v=pTe(t,d),v===-1){m=Th.trim(t.slice(i,d)),u(m),s=!1,i=d+1;continue}else{d=v-1;continue}else if(v=fTe(t,d-1),v===-1){m=Th.trim(t.slice(i,d)),m=FB(m),u(s,m),s=!1,i=d+1;continue}else continue}return i<t.length&&(s===!1?u(t.slice(i)):u(s,FB(Th.trim(t.slice(i))))),Th.trim(n.join(" "))}function pTe(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function hTe(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function fTe(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function mTe(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function FB(t){return mTe(t)?t.substr(1,t.length-2):t}rk.parseTag=uTe;rk.parseAttr=dTe;var yTe=Q6.FilterCSS,Al=Yi,wre=rk,gTe=wre.parseTag,vTe=wre.parseAttr,bM=X6;function AT(t){return t==null}function bTe(t){var e=bM.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=bM.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=bM.trim(t.slice(0,-1))),{html:t,closing:i}}function wTe(t){var e={};for(var i in t)e[i]=t[i];return e}function _Te(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(r){return r.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function _re(t){t=wTe(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Al.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=_Te(t.whiteList||t.allowList):t.whiteList=Al.whiteList,t.onTag=t.onTag||Al.onTag,t.onTagAttr=t.onTagAttr||Al.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Al.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Al.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Al.safeAttrValue,t.escapeHtml=t.escapeHtml||Al.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new yTe(t.css))}_re.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,n=i.onTag,s=i.onIgnoreTag,o=i.onTagAttr,u=i.onIgnoreTagAttr,d=i.safeAttrValue,h=i.escapeHtml,m=e.cssFilter;i.stripBlankChar&&(t=Al.stripBlankChar(t)),i.allowCommentTag||(t=Al.stripCommentTag(t));var v=!1;i.stripIgnoreTagBody&&(v=Al.StripTagBody(i.stripIgnoreTagBody,s),s=v.onIgnoreTag);var b=gTe(t,function(_,x,$,E,A){var O={sourcePosition:_,position:x,isClosing:A,isWhite:Object.prototype.hasOwnProperty.call(r,$)},D=n($,E,O);if(!AT(D))return D;if(O.isWhite){if(O.isClosing)return"</"+$+">";var R=bTe(E),P=r[$],j=vTe(R.html,function(Q,re){var ce=bM.indexOf(P,Q)!==-1,ue=o($,Q,re,ce);return AT(ue)?ce?(re=d($,Q,re,m),re?Q+'="'+re+'"':Q):(ue=u($,Q,re,ce),AT(ue)?void 0:ue):ue});return E="<"+$,j&&(E+=" "+j),R.closing&&(E+=" /"),E+=">",E}else return D=s($,E,O),AT(D)?h(E):D},h);return v&&(b=v.remove(b)),b};var STe=_re;(function(t,e){var i=Yi,r=rk,n=STe;function s(u,d){var h=new n(d);return h.process(u)}e=t.exports=s,e.filterXSS=s,e.FilterXSS=n,(function(){for(var u in i)e[u]=i[u];for(var d in r)e[d]=r[d]})();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(oN,oN.exports);var Xg=oN.exports,xTe=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Sre=(function(){function t(e,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=SA(SA({},Xg.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,u,d){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?r.sanitizeUrl(u):Xg.safeAttrValue(s,o,u,d)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;e&&!i?n=e:e&&i?(n=Object.create(this.arcgisFilterOptions),n.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(s){if(s==="whiteList")n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]);else if(s==="css"){var o=e.css.whiteList;o!=null&&e.css instanceof Object&&Object.keys(o).forEach(function(u){return n.css.whiteList[u]=o[u]})}else n[s]=e[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new Xg.FilterXSS(n)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var r=(i??{}).isProtocolRequired,n=r===void 0?!0:r,s=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",u=/^#/.test(e),d=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||u||d?Xg.escapeAttrValue(e):!s&&!n?Xg.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,r,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,r,n):Xg.safeAttrValue(e,i,r,n)},t.prototype.validate=function(e,i){i===void 0&&(i={});var r=this.sanitize(e,i);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,n){return i.test(r)?r:"&#x".concat(Number(e.charCodeAt(n)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(r){Object.keys(r).forEach(function(n){Array.isArray(r[n])&&Array.isArray(i[n])?i[n]=i[n].concat(r[n]):i[n]=r[n]})}),i},t.prototype._iterateOverObject=function(e,i){var r=this;i===void 0&&(i={});try{var n=!1,s=void 0;if(Array.isArray(e))s=e.reduce(function(u,d){var h=r.validate(d,i);return h.isValid?u.concat([d]):(n=!0,u.concat([h.sanitized]))},[]);else if(xTe(e)){var o=Object.keys(e);s=o.reduce(function(u,d){var h=e[d],m=r.validate(h,i);return m.isValid?u[d]=h:(n=!0,u[d]=m.sanitized),u},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return n?s:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t})();const $Te=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],TTe=$Te.reduce((t,e)=>(t[e]=[],t),{}),ETe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],xre=new Sre({whiteList:TTe,onTagAttr:(t,e,i)=>{const r=`${e}="${i}"`;if(ETe.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0),MTe=new Sre({whiteList:{br:[]},stripIgnoreTag:!0,escapeHtml:t=>t},!1),$re="http://www.w3.org/",nk=`${$re}2000/svg`,Tre=`${$re}1999/xlink`;let VB=[],K6=(t,e)=>{let i={};return Object.keys(t).forEach(r=>{i[r]=t[r]}),e&&Object.keys(e).forEach(r=>{i[r]=e[r]}),i},eF=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),Ere=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},ATe=(t,e,i)=>{if(e.vnodeSelector!==""){for(let r=i;r<t.length;r++)if(eF(t[r],e))return r}return-1},f5=(t,e,i,r)=>{let n=t[e];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<t.length;o++)if(o!==e){let u=t[o];if(eF(u,n))throw new Error(`${i.vnodeSelector} had a ${n.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},ITe=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},lN=[],uN=!1,Mre=t=>{(t.children||[]).forEach(Mre),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},UB=()=>{uN=!1,lN.forEach(Mre),lN.length=0},qB=t=>{lN.push(t),uN||(uN=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(UB,{timeout:16}):setTimeout(UB,16))},GB=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),qB(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),qB(t))},kTe=(t,e,i)=>{if(!e)return;let r=i.eventHandlerInterceptor,n=Object.keys(e),s=n.length;for(let o=0;o<s;o++){let u=n[o],d=e[u];if(u==="className")throw new Error('Property "className" is not supported, use "class".');if(u==="class")dN(t,d,!0);else if(u==="classes"){let h=Object.keys(d),m=h.length;for(let v=0;v<m;v++){let b=h[v];d[b]&&t.classList.add(b)}}else if(u==="styles"){let h=Object.keys(d),m=h.length;for(let v=0;v<m;v++){let b=h[v],_=d[b];_&&(Ere(_),i.styleApplyer(t,b,_))}}else if(u!=="key"&&d!=null){let h=typeof d;h==="function"?(u.lastIndexOf("on",0)===0&&(r&&(d=r(u,d,t,e)),u==="oninput"&&(function(){let m=d;d=function(v){m.apply(this,[v]),v.target["oninput-value"]=v.target.value}})()),t[u]=d):i.namespace===nk?u==="href"?t.setAttributeNS(Tre,u,d):t.setAttribute(u,d):h==="string"&&u!=="value"?u==="innerHTML"?t[u]=xre.sanitize(d):cN(t)&&u in t?t[u]=d:t.setAttribute(u,d):t[u]=d}}};function cN(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let $A,OTe=(t,e,i)=>{if(e)for(let r of e)H2(r,t,void 0,i)},Are=(t,e,i)=>{OTe(t,e.children,i),e.text&&(t.textContent=e.text),kTe(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},H2=(t,e,i,r)=>{let n,s=0,o=t.vnodeSelector,u=e.ownerDocument;if(o==="")n=t.domNode=u.createTextNode(t.text),i!==void 0?e.insertBefore(n,i):e.appendChild(n);else{for(let d=0;d<=o.length;++d){let h=o.charAt(d);if(d===o.length||h==="."||h==="#"){let m=o.charAt(s-1),v=o.slice(s,d);m==="."?n.classList.add(v):m==="#"?n.id=v:(v==="svg"&&(r=K6(r,{namespace:nk})),r.namespace!==void 0?n=t.domNode=u.createElementNS(r.namespace,v):(n=t.domNode=t.domNode||u.createElement(v),v==="input"&&t.properties&&t.properties.type!==void 0&&n.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(n,i):n.parentNode!==e&&e.appendChild(n)),s=d+1}}Are(n,t,r)}},dN=(t,e,i)=>{e&&e.split(" ").forEach(r=>{r&&t.classList.toggle(r,i)})},CTe=(t,e,i,r)=>{if(!i)return;let n=!1,s=Object.keys(i),o=s.length;for(let u=0;u<o;u++){let d=s[u],h=i[d],m=e[d];if(d==="class")m!==h&&(dN(t,m,!1),dN(t,h,!0));else if(d==="classes"){let v=t.classList,b=Object.keys(h),_=b.length;for(let x=0;x<_;x++){let $=b[x],E=!!h[$];E!==!!m[$]&&(n=!0,E?v.add($):v.remove($))}}else if(d==="styles"){let v=Object.keys(h),b=v.length;for(let _=0;_<b;_++){let x=v[_],$=h[x];$!==m[x]&&(n=!0,$?(Ere($),r.styleApplyer(t,x,$)):r.styleApplyer(t,x,""))}}else if(h||typeof m!="string"||(h=""),d!=="value"||cN(t)){if(h!==m){let v=typeof h;v==="function"&&r.eventHandlerInterceptor||(r.namespace===nk?d==="href"?t.setAttributeNS(Tre,d,h):t.setAttribute(d,h):v==="string"?d==="innerHTML"?t[d]=xre.sanitize(h):d==="role"&&h===""?t.removeAttribute(d):cN(t)&&d in t?t[d]=h:t.setAttribute(d,h):t[d]!==h&&(t[d]=h),n=!0)}}else{let v=t[d];v!==h&&(t["oninput-value"]?v===t["oninput-value"]:h!==m)&&(t[d]=h,t["oninput-value"]=void 0),h!==m&&(n=!0)}}return n},RTe=(t,e,i,r,n)=>{if(i===r)return!1;r=r||VB;let s,o=(i=i||VB).length,u=r.length,d=0,h=0,m=!1;for(;h<u;){let v=d<o?i[d]:void 0,b=r[h];if(v!==void 0&&eF(v,b))m=$A(v,b,n)||m,d++;else{let _=ATe(i,b,d+1);if(_>=0){for(s=d;s<_;s++)GB(i[s]),f5(i,s,t,"removed");m=$A(i[_],b,n)||m,d=_+1}else H2(b,e,d<o?i[d].domNode:void 0,n),ITe(b),f5(r,h,t,"added")}h++}if(o>d)for(s=d;s<o;s++)GB(i[s]),f5(i,s,t,"removed");return m};$A=(t,e,i)=>{let r=t.domNode,n=!1;if(t===e)return!1;let s=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(o,r),e.domNode=o,n=!0,n}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=K6(i,{namespace:nk})),t.text!==e.text&&(s=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,s=RTe(e,r,t.children,e.children,i)||s,s=CTe(r,t.properties,e.properties,i)||s,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,i,e.vnodeSelector,e.properties,e.children]);return s&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),n};let IT=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=i,$A(r,i,e)},domNode:t.domNode});const PTe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let L1=t=>K6(PTe,t),zh={append:(t,e,i)=>(i=L1(i),H2(e,t,void 0,i),IT(e,i)),insertBefore:(t,e,i)=>(i=L1(i),H2(e,t.parentNode,t,i),IT(e,i)),merge:(t,e,i)=>(i=L1(i),e.domNode=t,Are(t,e,i),IT(e,i)),replace:(t,e,i)=>(i=L1(i),H2(e,t.parentNode,t,i),t.parentNode.removeChild(t),IT(e,i))},Ire,DTe=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};Ire=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let NTe=(t,e)=>{let i=t;return e.forEach(r=>{i=i&&i.children?Ire(i.children,n=>n.domNode===r):void 0}),i},LTe=(t,e,i)=>{let r=function(n){i("domEvent",n);let s=e(),o=DTe(n.currentTarget,s.domNode);o.reverse();let u,d=NTe(s.getLastRender(),o);return t.scheduleRender(),d&&(u=d.properties[`on${n.type}`].apply(d.properties.bind||this,arguments)),i("domEventProcessed",n),u};return(n,s,o,u)=>r},BB=t=>{let e,i,r=L1(t),n=r.performanceLogger,s=!0,o=!1,u=[],d=[],h=(v,b,_)=>{let x,$=()=>x;r.eventHandlerInterceptor=LTe(e,$,n),x=v(b,_(),r),u.push(x),d.push(_)},m=()=>{if(i=void 0,s){s=!1,n("renderStart",void 0);for(let v=0;v<u.length;v++){let b=d[v]();n("rendered",void 0),u[v].update(b),n("patched",void 0)}n("renderDone",void 0),s=!0}};return e={renderNow:m,scheduleRender:()=>{i||o||(i=requestAnimationFrame(m))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,s=!0,e.scheduleRender()},append:(v,b)=>{h(zh.append,v,b)},insertBefore:(v,b)=>{h(zh.insertBefore,v,b)},merge:(v,b)=>{h(zh.merge,v,b)},replace:(v,b)=>{h(zh.replace,v,b)},detach:v=>{for(let b=0;b<d.length;b++)if(d[b]===v)return d.splice(b,1),u.splice(b,1)[0];throw new Error("renderFunction was not found")}},e},ih=class extends _e{constructor(){super(...arguments),this.items=new fe,this._watchUpdatingTracking=new Jh,this._callbacks=new Map,this._projector=BB(),this._hiddenProjector=BB()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const n=()=>r.render();this._callbacks.set(r,n),this._projector.append(this.surface,n)}for(const r of i.removed){const n=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(n.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,r=this._hiddenProjector;let n;const s=()=>(n=e.render(),n);r.append(i,s),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(n?.domNode){const u=n.domNode.getBoundingClientRect();o.left=u.left,o.top=u.top,o.right=u.right,o.bottom=u.bottom}for(r.detach(s);i.firstChild;)i.removeChild(i.firstChild);return o}overlaps(e,i){const r=this.computeBoundingRect(e),n=this.computeBoundingRect(i);return Math.max(r.left,n.left)<=Math.min(r.right,n.right)&&Math.max(r.top,n.top)<=Math.min(r.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,i){const r=!!i?.disableDecorations;if(!this.items.some(s=>s.visible&&!(r&&s.isDecoration)))return;const n=e.getContext("2d");n.save(),n.font=this._fontString(),this.items.forEach(s=>{r&&s.isDecoration||(n.save(),s.renderCanvas(n),n.restore())}),n.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};l([p({readOnly:!0})],ih.prototype,"surface",void 0),l([p({readOnly:!0})],ih.prototype,"items",void 0),l([p({readOnly:!0})],ih.prototype,"needsRender",null),l([p({readOnly:!0})],ih.prototype,"_watchUpdatingTracking",void 0),l([p({readOnly:!0})],ih.prototype,"updating",null),ih=l([M("esri.views.overlay.ViewOverlay")],ih);const HB=ih,m5=[0,0];function jTe(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return m5[0]=i.left+(e?.pageXOffset??0),m5[1]=i.top+(e?.pageYOffset??0),m5}function WB(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}function zTe(t){const e=document.createElement("div");return t.appendChild(e),e}const Kg=16,t1=750,FTe=512,VTe=2,UTe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._freqInfo={freq:Kg,time:t1},this._overlayRenderTaskHandle=null,this.aria={},this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([be(()=>this.cursor,n=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",n)}),be(()=>this.navigating,n=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",n.toString())}),be(()=>[this.aria,this.surface],()=>this._updateAria(),{initial:!0})])}initialize(){const r=this;this.addHandles([be(()=>this.ui,(n,s)=>this._handleUIChange(n,s),Zr),r.on("focus",()=>this.notifyChange("focused")),r.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui?.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(r){const n=this._get("container"),s=Y6(r);if(s||typeof r!="string"||ie.getLogger(this).error("#container",`element with id '${r}' not found`),n===s)return;if(this._stopMeasuring(),n&&(n.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(WB(this.root),this._set("root",null)),this.userContent&&(NB(this.userContent,n),WB(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const o=document.createElement("div");o.className="esri-view-user-storage",NB(s,o),s.appendChild(o),this._set("userContent",o);const u=document.createElement("div");u.className="esri-view-root",s.insertBefore(u,s.firstChild),this._set("root",u);const d=document.createElement("div");d.className="esri-view-surface",d.setAttribute("role","application"),d.tabIndex=0,u.appendChild(d),this._set("surface",d);const h=new HB;u.appendChild(h.surface),this._set("overlay",h),this.addHandles(be(()=>h.needsRender,m=>{m&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=jb({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=gi(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}set ui(r){const n=this._get("ui");n!==r&&n?.destroy(),this._set("ui",r)}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(r,n,s){const o=this.position;return r-=o?o[0]:0,n-=o?o[1]:0,s?(s[0]=r,s[1]=n):s=[r,n],s}containerToPage(r,n,s){const o=this.position;return r+=o?o[0]:0,n+=o?o[1]:0,s?(s[0]=r,s[1]=n):s=[r,n],s}_updateAria(){const{surface:r,aria:n}=this;r&&(r.ariaLabelledByElements=n?.labelledByElements??null,r.ariaDescribedByElements=n?.describedByElements??null,r.ariaLabel=n?.label??null,r.ariaDescription=n?.description??null)}_handleUIChange(r,n){this.removeHandles("ui"),n&&n!==r&&n.destroy(),r&&(r.view=this,this.addHandles(be(()=>this.root,s=>{r.container=s?zTe(s):null},Zr),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=Kg,r.time=t1;const n=jb({prepare:u=>{const d=this._measure(),h=this._freqInfo;if(h.time+=u.deltaTime,d&&(h.freq=Kg,this._get("resizing")||this._set("resizing",!0)),h.time<h.freq)return;h.time=0;const m=this._position();h.freq=m||d?Kg:Math.min(t1,h.freq*VTe),!d&&h.freq>=FTe&&(n.pause(),this._get("resizing")&&this._set("resizing",!1))}}),s=new ResizeObserver(u=>{r.freq=Kg,r.time=t1,n.resume()});this.container!=null&&s.observe(this.container);const o=ut(()=>s.disconnect());this.addHandles([mw(window,"resize",()=>{r.freq=Kg,r.time=t1,n.resume()}),o,n],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,n=r?r.clientWidth:0,s=r?r.clientHeight:0;if(n===0||s===0)return this.suspended||this._set("suspended",!0),!1;const o=this.width,u=this.height;return n===o&&s===u?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",n),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:u,width:n,height:s}),!0)}_position(){const r=this.container,n=this.position,s=r&&jTe(r);return!!s&&(!n||s[0]!==n[0]||s[1]!==n[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return l([p()],i.prototype,"aria",void 0),l([p()],i.prototype,"container",null),l([p({readOnly:!0})],i.prototype,"focused",null),l([p({readOnly:!0})],i.prototype,"height",void 0),l([p()],i.prototype,"messagesCommon",void 0),l([p({type:HB})],i.prototype,"overlay",void 0),l([p({readOnly:!0})],i.prototype,"position",void 0),l([p({readOnly:!0})],i.prototype,"resizing",void 0),l([p({readOnly:!0})],i.prototype,"root",void 0),l([p({value:null,readOnly:!0})],i.prototype,"size",null),l([p({readOnly:!0})],i.prototype,"surface",void 0),l([p({readOnly:!0})],i.prototype,"suspended",void 0),l([p({nonNullable:!0})],i.prototype,"ui",null),l([p({readOnly:!0})],i.prototype,"userContent",void 0),l([p({readOnly:!0})],i.prototype,"width",void 0),l([p()],i.prototype,"widthBreakpoint",void 0),i=l([M("esri.views.DOMContainer")],i),i};function yJe(t,e,i){return jz(t.map((r,n)=>e.apply(i,[r,n])))}async function qTe(t,e,i){return(await jz(t.map((r,n)=>e.apply(i,[r,n])))).map(r=>r.value)}function tF(t){return{ok:!0,value:t}}function iF(t){return{ok:!1,error:t}}function GTe(t){return t!=null&&t.ok===!0?t.value:null}function BTe(t){return t!=null&&t.ok===!1?t.error:null}async function sk(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return tF(await t)}catch(e){return iF(e)}}async function HTe(t){try{return tF(await t)}catch(e){return Dl(e),iF(e)}}function dc(t,e){return new rh(t,e)}let rh=class extends _e{get value(){return GTe(this._result)}get error(){return BTe(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=Cn(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(n=>{this._result=tF(n),this._cleanup()},n=>{this._result=iF(n),this._cleanup()}),this._abortHandle=Wa(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=gi(this._abortHandle),this._abortController=null}};l([p()],rh.prototype,"value",null),l([p()],rh.prototype,"error",null),l([p()],rh.prototype,"finished",null),l([p()],rh.prototype,"promise",void 0),l([p()],rh.prototype,"_result",void 0),rh=l([M("esri.core.asyncUtils.ReactiveTask")],rh);const kT="popup",ZB="manual";function Qu(t){return t!=null&&"open"in t&&"declaredClass"in t}function Kd(t){return!!t&&t.tagName.toLowerCase()==="arcgis-popup"&&"open"in t}function WTe(t,e,i){const[r,n,s]=e;if(i){const[o,u,d]=i;o&&Qu(u)&&(u.view=null,o.remove(u,kT),u!==n&&n&&u.destroy()),o&&d&&Kd(d)&&(d.view=null,o.remove(d,kT),d!==s&&s&&d.remove())}r&&Qu(n)&&(n.view=t,r.add(n,{key:kT,position:ZB,internal:!0})),r&&s&&Kd(s)&&(s.view=t,r.add(s,{key:kT,position:ZB,internal:!0}))}async function ZTe(t,e){const{popup:i,popupElement:r}=t;Qu(i)?await OT(i,null,e):r&&Kd(r)?await OT(null,r,e):e?.defer(async()=>{await t.setupPopup();const{popup:n,popupElement:s}=t;Qu(n)&&!t.destroyed&&t.ready&&t.popupEnabled?await OT(n,null,e):s&&Kd(s)&&await OT(null,s,e)})}function JTe(t,e){const{popup:i,popupElement:r}=t;if(Qu(i))return i.open(e);r&&Kd(r)&&r.open(e)}function YTe(t,e){Qu(t)&&t.close(),e&&Kd(e)&&(e.visible=!1)}async function OT(t,e,i){if(Qu(t)){const r=await t.viewModel.handleViewClick(i);return void(r?.promises?.length?t.open(r):t.visible&&t.close())}if(e&&Kd(e)){const r=await e.handleViewClick(i);r?.promises?.length?e.open(r):e.visible&&(e.visible=!1)}}const QTe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,XTe="screenUtils.toPt: input not recognized!",kre=96;function KTe(t){return t?t/72*kre:0}function Ja(t){return t?72*t/kre:0}function gt(t){if(typeof t=="string"){const e=t.match(QTe);if(e){const i=Number(e[1]),r=e[3]&&e[3].toLowerCase(),n=t.startsWith("-"),s=r==="px"?Ja(i):i;return n?-s:s}return console.warn(XTe),null}return t}function jr(t=0,e=0){return{x:t,y:e}}function vJe(t){return t?jr(t.x,t.y):null}function Ore(t=0,e=0){return[t,e]}function eEe(t=0,e=0,i=0){return[t,e,i]}function bJe(t){return t}function wJe(t){return t}function _Je(t){return t}function SJe(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}const Cre=q("mac")?"Meta":"Control",tEe=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),iEe=t=>tEe.has(t);let rEe=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}},en=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,r){let n;typeof i=="function"?(r=i,n=[]):n=i||[];const s=typeof e=="string"?new rEe(e,n):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},u=m=>{const v=this._incoming[m.match.eventType];if(v){const b=v.indexOf(m);v.splice(b,1),o(),this._manager&&this._manager.updateDependencies()}},d=new nEe(s,r,{onPause:u,onRemove:u,onResume:m=>{const v=this._incoming[m.match.eventType];v&&!v.includes(m)&&(v.push(m),o(),this._manager&&this._manager.updateDependencies())}});let h=this._incoming[s.eventType];return h||(h=[],this._incoming[s.eventType]=h),h.push(d),o(),this._manager&&this._manager.updateDependencies(),d}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new sEe(e,{onEmit:(r,n,s,o)=>{this._manager?.emit(r.eventType,n,s,o)},onRemove:r=>{delete this._outgoing[r.eventType],this._manager?.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){this._manager?.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager?.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){const i=this._incoming[e.type];if(i){for(const r of i)if(r.match.matches(e)&&(r.callback?.(e),e.shouldStopPropagation()))break}}},nEe=class{constructor(e,i,r){this.match=e,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},sEe=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,r){this._removed||this._handler.onEmit(this,e,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},oEe=class extends en{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this._id=null,this.registerIncoming("pointer-move",i=>this._update(i.data))}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:n,native:{pointerId:s}}=e;i===this._value&&this._x===r&&this._y===n&&this._id===s||(this._value=i,this._x=r,this._y=n,this._id=s,this._onChange(s,i,r,n))}},aEe=class extends en{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=My(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},lEe=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in e){const n=e[r],s=new _X(n,void 0,void 0,2,2);this._properties[r]={pool:s,acquired:[]}}this._afterDispatchHandle=vve(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const r of i.acquired)Lq(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),r=this._properties[e];let n=r.pool.acquire();for(r.acquired.push(n);n===i;)n=r.pool.acquire(),r.acquired.push(n);return NX(),n}_release(){for(const e in this._properties){const i=this._properties[e];let r=0;for(const n of i.acquired)Lq(n)?i.acquired[r++]=n:i.pool.release(n);i.acquired.length=r}}},uEe=class{constructor(){this.id=0,this.type="mouse",this.location=jr()}},fl=class extends _e{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=Cre,this._propertiesPool=new lEe({latestPointerInfo:()=>new uEe},this),this._latestPointerInfo=void 0,this._paused=!1,this._testTimestamp=void 0}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get latestPointerInfo(){return this._latestPointerInfo}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,r=Wt.INTERNAL){if(this._nameToGroup[e]||i.length===0)return;const n={name:e,handlers:i.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=n;for(let s=n.handlers.length-1;s>=0;s--){const o=n.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(u,d,h,m,v)=>{this._emitInputEvent(o.priorityIndex+1,u,d,h,v,m)},setPointerCapture:(u,d)=>{this._setPointerCapture(n,o,u,d)},setEventCallback:u=>{o.eventCallback=u},setUninstallCallback:u=>{o.uninstallCallback=u},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(r=>{r.removed=!0,r.uninstallCallback?.()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):ie.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const n=this._handlers[r];n.priorityIndex=r,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const n=this._handlersPriority[r];n.priorityIndex=r;let s=n.handler.hasSideEffects;if(!s){for(const o of n.handler.outgoingEventTypes)if(e.has(o)){s=!0;break}}if(s)for(const o of n.handler.incomingEventMatches){e.add(o.eventType);for(const u of o.keyModifiers)iEe(u)||i.add(u)}n.active=s}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,r,n){const s=this._latestPointerInfo;if(s==null||s.id!==e||s.type!==i||s.location.x!==r||s.location.y!==n){const o=this._propertiesPool.get("latestPointerInfo");o.id=e,o.type=i,o.location.x=r,o.location.y=n,this._latestPointerInfo=o}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const s=i;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,i);const r=this._testTimestamp??i.native?.timestamp,n=i.native?.cancelable;this._emitInputEventFromSource(e,i,r,n)}_updateKeyModifiers(e,i){if(!i)return;let r=!1;const n=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},s=(u,d)=>{d&&!this._activeKeyModifiers.has(u)?(n(),this._activeKeyModifiers.add(u)):!d&&this._activeKeyModifiers.has(u)&&(n(),this._activeKeyModifiers.delete(u))};if(e==="key-down"||e==="key-up"){const u=i.key;this._keyModifiers.has(u)&&s(u,e==="key-down")}const o=i.native;s("Alt",!!o?.altKey),s("Control",!!o?.ctrlKey),s("Ctrl",!!o?.ctrlKey),s("Shift",!!o?.shiftKey),s("Meta",!!o?.metaKey),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new oEe((e,i,r,n)=>this._setLatestPointer(e,i,r,n)),this._multiTouchHandler=new aEe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Wt.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Wt.INTERNAL)}_setPointerCapture(e,i,r,n){const s=e.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),n?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,r,n){this._emitInputEvent(0,e,i,r,n)}_emitInputEvent(e,i,r,n,s,o){const u=n??this._currentPropagation?.timestamp??performance.now(),d=s??!1,h={event:new cEe(i,r,u,o||this._activeKeyModifiers,d),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(h):this._doNewPropagation(h)}_doNewPropagation(e){this._currentPropagation={events:new DS,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:i,priorityIndex:r}=e.events.pop(),n=i.data?.eventId;if(!(n!=null&&this._stoppedPropagationEventIds.has(n)))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!i.shouldStopPropagation()&&e.currentHandler.eventCallback?.(i),i.shouldStopPropagation()){n!=null&&this._stoppedPropagationEventIds.add(n);break}if(i.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:i,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new DS;i.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const n of i.handler.incomingEventMatches){if(r.eventType!==n.eventType)continue;const s=r.keyModifiers.filter(o=>n.keyModifiers.includes(o));if(s.length===r.keyModifiers.length!=(s.length===n.keyModifiers.length))return r.keyModifiers.length>n.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const r of e){let n=0;for(;n<i.length&&this._compareHandlerPriority(r,i[n])>=0;)n++;i.splice(n,0,r)}return i}get test(){}};l([p({readOnly:!0})],fl.prototype,"hasPendingInputs",null),l([p({constructOnly:!0})],fl.prototype,"eventSource",void 0),l([p({constructOnly:!0})],fl.prototype,"recognizers",void 0),l([p()],fl.prototype,"multiTouchActive",null),l([p()],fl.prototype,"_latestPointerInfo",void 0),l([p()],fl.prototype,"latestPointerInfo",null),l([p()],fl.prototype,"_paused",void 0),l([p({readOnly:!0})],fl.prototype,"updating",null),fl=l([M("esri.views.input.InputManager")],fl);let cEe=class{constructor(e,i,r,n,s){this.type=e,this.data=i,this.timestamp=r,this.modifiers=n,this.cancelable=s,this._propagationState=0,this._resumeCallback=null}stopPropagation(){this._propagationState|=1}shouldStopPropagation(){return!!(1&this._propagationState)}defer(e){this._propagationState|=2;const i=(r,n)=>{this._propagationState&=-3;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw r;return r};return(typeof e=="function"?e():e).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(e){return!!(2&this._propagationState)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};const Wt={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3},dEe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([be(()=>[this.ui,this.popup,this.popupElement],([r,n,s],o)=>{const[u,d,h]=o??[];WTe(this,[r,n,s],[u,d,h])},Gt),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&ZTe(this,r)},Wt.WIDGET)]),zb(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>H(()=>import("./Popup-ByllqNsm.js").then(r=>r.P),__vite__mapDeps([141,142,143,3,144,145,146,52,50,51,13,12,16,147,148,149,68,150,151,152,153])))}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(Qu(this.popup))return this.popup.open(r);if(this.popupElement&&Kd(this.popupElement))this.popupElement.open(r).catch(()=>{});else try{if(await this.setupPopup(),!this.popup)return void ie.getLogger(this).error(new L("view:null-popup","Popup is null and can't be opened"));JTe(this,r)}catch{}}closePopup(){this._popupSetupTask?.abort(),YTe(this.popup,this.popupElement)}async fetchPopupFeatures(r,n){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,n),n)}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!Qu(this.popup))return this._popupSetupTask=dc(async r=>{if(!this.popupEnabled||!Kd(this.popupElement))if(this.dependencies.popup&&typeof this.dependencies.popup=="function")await this.dependencies.popup(),ft(r),customElements.get("arcgis-popup")||ie.getLogger(this).error(new L("view:undefined-popup-element","`arcgis-popup` custom element is undefined and can't be opened")),this.popupElement=document.createElement("arcgis-popup");else{const{default:n}=await H(()=>import("./Popup-ByllqNsm.js").then(o=>o.P),__vite__mapDeps([141,142,143,3,144,145,146,52,50,51,13,12,16,147,148,149,68,150,151,152,153]));if(ft(r),!this.popup||Qu(this.popup))return;const s=this.popup;if("open"in s||"close"in s){const{open:o,close:u,...d}=s;this.popup=new n({...d})}else this.popup=new n(s)}}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:n},s){const o=[],u=[];let d=!1;const h=Bge(s,q("popup-view-fetch-timeout")??hEe),m=_=>{const x=new pEe(_);return u.push(x),o.push(x.promise),x},v=_=>{const x=u.at(-1);return x&&x.layerView===_&&!d?x:m(_)};for(const _ of n)"graphic"in _?(v(_.layerView).graphics.push(_.graphic),d=!1):(o.push(_.layerView.fetchPopupFeaturesAtLocation(_.mapPoint,h)),d=!0);u.forEach(_=>_.resolve(h));const b=Gge(o).then(_=>_.filter(x=>!!x).flat());return{pendingFeatures:o,allGraphicsPromise:b,location:r}}async _getPopupHits(r,n){const{hits:s,location:o}=await this.popupHitTest(r);ft(n);const u=[];for(const d of s)if("graphic"in d){if(this._isValidPopupGraphic(d.graphic,n)){const h=this._isValidPopupGraphicsLayerView(d.layerView)?d.layerView:void 0;u.push({graphic:d.graphic,layerView:h})}}else this._isValidPopupLocationLayerView(d.layerView)&&u.push({mapPoint:d.mapPoint,layerView:d.layerView});return{hits:u,location:o}}_isValidPopupGraphic(r,n){return r&&!!r.getEffectivePopupTemplate(n?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return l([p()],i.prototype,"popup",void 0),l([p()],i.prototype,"popupElement",void 0),l([p()],i.prototype,"popupEnabled",void 0),i=l([M("esri.views.PopupView")],i),i};let pEe=class{constructor(e){this.layerView=e,this._resolver=ao(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:i,graphics:r,_resolver:n}=this;if(!i)return n.resolve(r),n.promise;let s;return i.fetchPopupFeaturesFromGraphics(r,e).catch(o=>(s=o,null)).then(o=>{o?n.resolve(o):n.reject(s)}),n.promise}};const hEe=5e3;let fEe=class{constructor(){this._resolver=ao(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=1,this._cleanUp()},()=>{this._status=2,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===1}isRejected(){return this._status===2}isFulfilled(){return this._status!==0}abort(){this._resolver.reject(xt())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=ao(),i=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==r||Yr(n)||this._resolver.reject(n)}),e.resolve()}};const ok=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._promiseProps=new fEe,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,n){return this._promiseProps.promise.then(()=>this).then(r,n)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}addResolvingTask(r){r&&!this._promiseProps.isFulfilled()&&(this.addHandles($ge(r)),this._promiseProps.addResolvingPromise(r.promise))}};return i=l([M("esri.core.Promise")],i),i},rF=ok(_e),mEe="not-loaded",yEe="loading",gEe="failed",JB="loaded",nF=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(n=>{const s=this.load.bind(this);this.load=o=>{const u=new Promise((d,h)=>{const m=Lz(o,h);this.destroyed&&h(new L("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(d,h).finally(()=>{m&&m.remove()})});if(this.loadStatus===mEe){this._set("loadStatus",yEe);const d=this._loadController=new AbortController;s({signal:d.signal})}return n(),u}})),this.when(()=>{this._set("loadStatus",JB),this._loadController=null},n=>{this.destroyed||(this._set("loadStatus",gEe),this._set("loadError",n),this._loadController=null)})}destroy(){this._loadController&&(this._loadController=Cn(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===JB}get loadWarnings(){return this._get("loadWarnings")}load(r){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new L("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return l([p({readOnly:!0})],i.prototype,"loaded",null),l([p({readOnly:!0})],i.prototype,"loadError",void 0),l([p({clonable:!1})],i.prototype,"loadStatus",void 0),l([p({type:[Jo],readOnly:!0})],i.prototype,"loadWarnings",null),i=l([M("esri.core.Loadable")],i),i},eg=nF(rF);function pN(t){return!(!t||!t.load)}async function ak(t,e){return await t.load(),vEe(t,e)}async function vEe(t,e){const i=[],r=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?r(...o):fe.isCollection(o)?o.forEach(u=>r(u)):pN(o)&&i.push(o))};e(r);let n=null;if(await qTe(i,async s=>{const o=await sk(bEe(s)?s.loadAll():s.load());o.ok!==!1||n||(n=o)}),n)throw n.error;return t}function bEe(t){return"loadAll"in t&&typeof t.loadAll=="function"}let CT;function wEe(t){return CT&&!CT.destroyed||(CT=t()),CT}var hN;const _Ee=new Be({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let sr=hN=class extends _e{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new hN({categories:this.categories?z(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let r="";if(this.extent){const o=qI(this.extent,we.WGS84);o!=null&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&t.extraQuery&&(n="("+n+")"+t.extraQuery);const s={categories:i,bbox:r,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>_Ee.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...e,...s}}}};l([p()],sr.prototype,"categories",void 0),l([p()],sr.prototype,"disableExtraQuery",void 0),l([p({type:Xe})],sr.prototype,"extent",void 0),l([p()],sr.prototype,"filter",void 0),l([p()],sr.prototype,"num",void 0),l([p()],sr.prototype,"query",void 0),l([p()],sr.prototype,"sortField",void 0),l([p()],sr.prototype,"sortOrder",null),l([p()],sr.prototype,"start",void 0),sr=hN=l([M("esri.portal.PortalQueryParams")],sr);var fN;let ir=fN=class extends B{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e&&this.portal?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){const t=this.portal?.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const i=e.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):i})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new L("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new fN({sourceJSON:t});return e.read(t),e}queryItems(t,e){let i=cr(sr,t);const r=this.portal;return parseFloat(r.currentVersion)>5?(i=i||new sr,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",e)):(i=i?i.clone():new sr,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,e))}_fetchCategorySchemaSet(t,e){const i=this.portal;return i.fetchSelf(i.authMode,!0,e).then(r=>{const n=r.contentCategorySetsGroupQuery;if(n){const s=new sr({disableExtraQuery:!0,num:1,query:n});return i.queryGroups(s,e)}throw new L("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const n=r.results[0],s=new sr({num:1,query:`typekeywords:"${t}"`});return n.queryItems(s,e)}throw new L("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",e).then(n=>{const s=n?.categorySchema;return s?.length?s:[]}):[])}};l([p()],ir.prototype,"access",void 0),l([p({type:Date})],ir.prototype,"created",void 0),l([p()],ir.prototype,"description",void 0),l([p()],ir.prototype,"id",void 0),l([p()],ir.prototype,"isInvitationOnly",void 0),l([p({type:Date})],ir.prototype,"modified",void 0),l([p()],ir.prototype,"owner",void 0),l([p()],ir.prototype,"portal",void 0),l([p()],ir.prototype,"snippet",void 0),l([p()],ir.prototype,"sortField",void 0),l([p()],ir.prototype,"sortOrder",void 0),l([p()],ir.prototype,"sourceJSON",void 0),l([p()],ir.prototype,"tags",void 0),l([p()],ir.prototype,"thumbnail",void 0),l([p({readOnly:!0})],ir.prototype,"thumbnailUrl",null),l([p()],ir.prototype,"title",void 0),l([p({readOnly:!0})],ir.prototype,"url",null),ir=fN=l([M("esri.portal.PortalGroup")],ir);let pm=class extends _e{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};l([p()],pm.prototype,"nextQueryParams",void 0),l([p()],pm.prototype,"queryParams",void 0),l([p()],pm.prototype,"results",void 0),l([p()],pm.prototype,"total",void 0),pm=l([M("esri.portal.PortalQueryResult")],pm);let Hc=class extends B{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new L("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};l([p({type:Date})],Hc.prototype,"created",void 0),l([p()],Hc.prototype,"id",void 0),l([p()],Hc.prototype,"portal",void 0),l([p()],Hc.prototype,"title",void 0),l([p({readOnly:!0})],Hc.prototype,"url",null),l([p()],Hc.prototype,"username",void 0),Hc=l([M("esri.portal.PortalFolder")],Hc);var mN;let Ht=mN=class extends B{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.portal?.restUrl;return t?`${t}/content/users/${this.id}`:null}get url(){const t=this.portal?.restUrl;return t?`${t}/community/users/${this.id}`:null}addItem(t){const e=t&&t.item,i=t?.data,r=t?.folder,n={method:"post"};e&&(n.query=e.createPostQuery(),i!=null&&(typeof i=="string"?n.query.text=i:typeof i=="object"&&(n.query.text=JSON.stringify(i))));let s=this.userContentUrl;return r&&(s+="/"+(typeof r=="string"?r:r.id)),this.portal.request(s+"/addItem",n).then(o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let i=this.userContentUrl;t.ownerFolder&&(i+="/"+t.ownerFolder);const r=e?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${t.id}/delete`,{method:"post",query:r}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const i=this.userContentUrl+"/deleteItems",r=[],n=t.map(s=>s.id);if(n.length){const s={method:"post",query:{items:n.join(","),permanentDelete:e}},o=await this.portal.request(i,s);for(const u of o.results){const d=t.find(v=>u.itemId===v.id),h=u.success;let m=null;h?(d.id=null,d.portal=null):u.error&&(m=new L("portal:delete-item-failed",u.error.message,u.error)),r.push({item:d,success:h,error:m})}}return r}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(r=>{const n=Hc.fromJSON(r);return n.portal=this.portal,n}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const r=ir.fromJSON(i);return r.portal=this.portal,r}):[],e})}async fetchItems(t){t??={};let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:i}=await H(()=>Promise.resolve().then(()=>Rre),void 0),r={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},n=await this.portal.request(e,{query:r});let s;return n?.items?(s=n.items.map(o=>{const u=i.fromJSON(o);return u.portal=this.portal,u}),await Promise.all(s.map(o=>o.load())),{items:s,nextStart:n.nextStart,total:n.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new ir({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new L("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const i=this.userContentUrl,r=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(i+`/items/${t.id}/restore`,{method:"post",query:r})}toJSON(){throw new L("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new mN({sourceJSON:t});return e.read(t),e}};l([p()],Ht.prototype,"access",void 0),l([p({type:Date})],Ht.prototype,"created",void 0),l([p()],Ht.prototype,"culture",void 0),l([p()],Ht.prototype,"description",void 0),l([p()],Ht.prototype,"email",void 0),l([p()],Ht.prototype,"favGroupId",void 0),l([p()],Ht.prototype,"fullName",void 0),l([p()],Ht.prototype,"id",void 0),l([p({type:Date})],Ht.prototype,"modified",void 0),l([p()],Ht.prototype,"orgId",void 0),l([p()],Ht.prototype,"portal",void 0),l([p()],Ht.prototype,"preferredView",void 0),l([p()],Ht.prototype,"privileges",void 0),l([p()],Ht.prototype,"region",void 0),l([p()],Ht.prototype,"role",void 0),l([p()],Ht.prototype,"roleId",void 0),l([p()],Ht.prototype,"sourceJSON",void 0),l([p()],Ht.prototype,"thumbnail",void 0),l([p({readOnly:!0})],Ht.prototype,"thumbnailUrl",null),l([p()],Ht.prototype,"units",void 0),l([p({readOnly:!0})],Ht.prototype,"userContentUrl",null),l([p({readOnly:!0})],Ht.prototype,"url",null),l([p()],Ht.prototype,"username",void 0),l([p()],Ht.prototype,"userLicenseTypeId",void 0),l([p()],Ht.prototype,"userType",void 0),Ht=mN=l([M("esri.portal.PortalUser")],Ht);var xo;let i1;const YB={PortalGroup:()=>Promise.resolve({default:ir}),PortalItem:()=>H(()=>Promise.resolve().then(()=>Rre),void 0),PortalUser:()=>Promise.resolve({default:Ht})};var Wu;let de=(Wu=class extends rp(eg){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.g3DTilesGalleryGroupQuery=null,this.g3dTilesEnabled=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=St.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){QB.unregister(this),this.defaultBasemap=at(this.defaultBasemap),this.defaultDevBasemap=at(this.defaultDevBasemap),this.defaultVectorBasemap=at(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=gi(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const i of e)St.request.trustedServers.includes(i)||St.request.trustedServers.push(i);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=this.user?.orgId,i=!e||this.canSearchPublic;return this.id&&!i?` AND orgid:${this.id}`:null}get hasAPIKey(){return Obe(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get loaded(){return super.loaded}get restUrl(){let e=this.url;if(e){const i=e.indexOf("/sharing");e=i>0?e.slice(0,i):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,i=this.thumbnail;return e&&i?this._normalizeSSL(e+"/portals/self/resources/"+i):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let i=null;return e&&(i=Ht.fromJSON(e),i.portal=this),i}load(e){const i=H(async()=>{const{default:r}=await Promise.resolve().then(()=>YEe);return{default:r}},void 0).then(({default:r})=>{ft(e),i1=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{if(!this.hasAPIKey&&pt){const n=pt;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==xo.AUTH_MODE_AUTO&&this.authMode!==xo.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=n.on("credential-create",SEe(new WeakRef(this))),QB.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),i=(await H(async()=>{const{default:r}=await import("./ElevationLayer-DTAAGdCJ.js");return{default:r}},__vite__mapDeps([154,155,156,157,13,158]))).default;return e?e.map(r=>new i({id:r.id,url:r.url})):[]}async fetchBasemaps(e,i){const r=await this._fetchBasemaps(e,i);if(i?.include3d===!0&&this.use3dBasemaps!==!1){const n=await this._fetchBasemaps3D(e,i);r.unshift(...n)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const i=new sr;i.query=this.default3DBasemapQuery,i.disableExtraQuery=!0;const r=(await this.queryItems(i,e)).results.find(n=>n.type==="Web Scene");return r?new i1({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(i=>i.categorySchema):Rn(e)?Promise.reject(xt()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(i=>i.classificationSchema):null}fetchFeaturedGroups(e){const i=this.featuredGroups,r=new sr({num:100,sortField:"title"});if(i?.length){const n=[];for(const s of i)n.push(`(title:"${s.title}" AND owner:${s.owner})`);return r.query=n.join(" OR "),this.queryGroups(r,e).then(s=>s.results)}return Rn(e)?Promise.reject(xt()):Promise.resolve([])}fetchRegions(e){const i=this.user?.culture||this.culture||so();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:i}})}fetchSettings(e){const i=this.user?.culture||this.culture||so();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:i}})}static getDefault(){return wEe(()=>new xo)}queryGroups(e,i){return this.queryPortal("/community/groups",e,"PortalGroup",i)}queryItems(e,i){return this.queryPortal("/search",e,"PortalItem",i)}queryUsers(e,i){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",i)}fetchSelf(e=this.authMode,i=!1,r){const n=this.restUrl+"/portals/self",s={authMode:e,query:{culture:so().toLowerCase()},withCredentials:!0,...r};return s.authMode==="auto"&&(s.authMode="no-prompt"),i&&(s.query.default=!0),this.request(n,s)}queryPortal(e,i,r,n){const s=cr(sr,i),o=u=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...n}).then(d=>{const h=s.clone();return h.start=d.nextStart,new pm({nextQueryParams:h,queryParams:s,total:d.total,results:xo._resultsToTypedArray(u,{portal:this},d,n)})}).then(d=>Promise.all(d.results.map(h=>typeof h.when=="function"?h.when():d)).then(()=>d,h=>(Dl(h),d)));return r&&YB[r]?YB[r]().then(({default:u})=>(ft(n),o(u))):o()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new L("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===xo.AUTH_MODE_ANONYMOUS||this.authMode===xo.AUTH_MODE_NO_PROMPT&&!pt)return Promise.reject(new L("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=i=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(i||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=i,this.fetchSelf("immediate"))):this.user&&this.credential===i?null:(this.credential=i,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return pt?pt.getCredential(this.restUrl,{prompt:this.authMode!==xo.AUTH_MODE_NO_PROMPT}).then(i=>e(i)):e(this.credential)}normalizeUrl(e){const i=this.credential?.token;return this._normalizeSSL(i?e+(e.includes("?")?"&":"?")+"token="+i:e)}requestToTypedArray(e,i,r){return this.request(e,i).then(n=>{const s=xo._resultsToTypedArray(r,{portal:this},n);return Promise.all(s.map(o=>typeof o.when=="function"?o.when():n)).then(()=>s,()=>s)})}request(e,i={}){const r={f:"json",...i.query},{authMode:n=this.authMode===xo.AUTH_MODE_ANONYMOUS||this.authMode===xo.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:o=!1,method:u="auto",responseType:d="json",signal:h}=i,m={authMode:n,body:s,cacheBust:o,method:u,query:r,responseType:d,timeout:0,signal:h};return i.withCredentials&&(m.withCredentials=!0),$t(this._normalizeSSL(e),m).then(v=>v.data)}toJSON(){throw new L("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new xo({sourceJSON:e})}_getHelperService(e){const i=this.helperServices?.[e];if(!i)throw new L("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return i}async _fetchBasemaps(e,i){const r=new sr;r.query=e||(SD()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const n=await this.queryGroups(r,i);if(!n.total)return[];const s=n.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(r,i);return o.total?o.results.filter(u=>u.type==="Web Map").map(u=>new i1({portalItem:u})):[]}async _fetchBasemaps3D(e,i){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];if(SD())return[];const n=new sr({query:r,disableExtraQuery:!0}),s=await this.queryGroups(n,i);if(!s.total)return[];const o=s.results[0];n.num=100,n.query='type:"Web Scene"',n.sortField=o.sortField||"name",n.sortOrder=o.sortOrder||"desc";const u=await o.queryItems(n,i);return u.total?u.results.filter(d=>d.type==="Web Scene").map(d=>new i1({portalItem:d})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const i=i1.fromJSON(e);return i.portalItem={portal:this},i}return null}static _resultsToTypedArray(e,i,r,n){let s;if(r){const o=n!=null?n.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||i)&&(s=s.map(u=>{const d=Object.assign(e?e.fromJSON(u):u,i);return typeof d.load=="function"&&d.load(o),d}))}else s=[];return s}},xo=Wu,Wu.AUTH_MODE_ANONYMOUS="anonymous",Wu.AUTH_MODE_AUTO="auto",Wu.AUTH_MODE_IMMEDIATE="immediate",Wu.AUTH_MODE_NO_PROMPT="no-prompt",Wu);l([p()],de.prototype,"access",void 0),l([p()],de.prototype,"allSSL",void 0),l([p()],de.prototype,"authMode",void 0),l([p()],de.prototype,"authorizedCrossOriginDomains",void 0),l([se("authorizedCrossOriginDomains")],de.prototype,"readAuthorizedCrossOriginDomains",null),l([p()],de.prototype,"basemapGalleryGroupQuery",void 0),l([p({json:{name:"3DBasemapGalleryGroupQuery"}})],de.prototype,"basemapGalleryGroupQuery3D",void 0),l([p({json:{name:"g3DTilesGalleryGroupQuery"}})],de.prototype,"g3DTilesGalleryGroupQuery",void 0),l([p({json:{name:"g3dTilesEnabled"}})],de.prototype,"g3dTilesEnabled",void 0),l([p()],de.prototype,"bingKey",void 0),l([p()],de.prototype,"canListApps",void 0),l([p()],de.prototype,"canListData",void 0),l([p()],de.prototype,"canListPreProvisionedItems",void 0),l([p()],de.prototype,"canProvisionDirectPurchase",void 0),l([p()],de.prototype,"canSearchPublic",void 0),l([p()],de.prototype,"canShareBingPublic",void 0),l([p()],de.prototype,"canSharePublic",void 0),l([p()],de.prototype,"canSignInArcGIS",void 0),l([p()],de.prototype,"canSignInIDP",void 0),l([p()],de.prototype,"colorSetsGroupQuery",void 0),l([p()],de.prototype,"commentsEnabled",void 0),l([p({type:Date})],de.prototype,"created",void 0),l([p()],de.prototype,"credential",void 0),l([p()],de.prototype,"culture",void 0),l([p()],de.prototype,"currentVersion",void 0),l([p()],de.prototype,"customBaseUrl",void 0),l([p()],de.prototype,"default3DBasemapQuery",void 0),l([p()],de.prototype,"defaultBasemap",void 0),l([se("defaultBasemap")],de.prototype,"readDefaultBasemap",null),l([p()],de.prototype,"defaultDevBasemap",void 0),l([se("defaultDevBasemap")],de.prototype,"readDefaultDevBasemap",null),l([p({type:Xe})],de.prototype,"defaultExtent",void 0),l([p()],de.prototype,"defaultVectorBasemap",void 0),l([se("defaultVectorBasemap")],de.prototype,"readDefaultVectorBasemap",null),l([p()],de.prototype,"description",void 0),l([p()],de.prototype,"devBasemapGalleryGroupQuery",void 0),l([p()],de.prototype,"eueiEnabled",void 0),l([p({readOnly:!0})],de.prototype,"extraQuery",null),l([p()],de.prototype,"featuredGroups",void 0),l([p()],de.prototype,"featuredItemsGroupQuery",void 0),l([p()],de.prototype,"galleryTemplatesGroupQuery",void 0),l([p()],de.prototype,"layoutGroupQuery",void 0),l([p()],de.prototype,"livingAtlasGroupQuery",void 0),l([p({readOnly:!0})],de.prototype,"hasAPIKey",null),l([p()],de.prototype,"hasCategorySchema",void 0),l([p()],de.prototype,"hasClassificationSchema",void 0),l([p()],de.prototype,"helpBase",void 0),l([p()],de.prototype,"helperServices",void 0),l([p()],de.prototype,"helpMap",void 0),l([p()],de.prototype,"homePageFeaturedContent",void 0),l([p()],de.prototype,"homePageFeaturedContentCount",void 0),l([p()],de.prototype,"httpPort",void 0),l([p()],de.prototype,"httpsPort",void 0),l([p()],de.prototype,"id",void 0),l([p()],de.prototype,"ipCntryCode",void 0),l([p({readOnly:!0})],de.prototype,"isOrganization",null),l([p()],de.prototype,"isPortal",void 0),l([p()],de.prototype,"isReadOnly",void 0),l([p({readOnly:!0})],de.prototype,"itemPageUrl",null),l([p()],de.prototype,"layerTemplatesGroupQuery",void 0),l([p()],de.prototype,"maxTokenExpirationMinutes",void 0),l([p({type:Date})],de.prototype,"modified",void 0),l([p()],de.prototype,"name",void 0),l([p()],de.prototype,"portalHostname",void 0),l([p()],de.prototype,"portalMode",void 0),l([p()],de.prototype,"portalProperties",void 0),l([p()],de.prototype,"region",void 0),l([p()],de.prototype,"recycleBinEnabled",void 0),l([p({readOnly:!0})],de.prototype,"restUrl",null),l([p()],de.prototype,"rotatorPanels",void 0),l([p()],de.prototype,"showHomePageDescription",void 0),l([p()],de.prototype,"sourceJSON",void 0),l([p()],de.prototype,"staticImagesUrl",void 0),l([p({json:{name:"2DStylesGroupQuery"}})],de.prototype,"stylesGroupQuery2d",void 0),l([p({json:{name:"stylesGroupQuery"}})],de.prototype,"stylesGroupQuery3d",void 0),l([p()],de.prototype,"supportsHostedServices",void 0),l([p()],de.prototype,"symbolSetsGroupQuery",void 0),l([p()],de.prototype,"templatesGroupQuery",void 0),l([p()],de.prototype,"thumbnail",void 0),l([p({readOnly:!0})],de.prototype,"thumbnailUrl",null),l([p()],de.prototype,"units",void 0),l([p()],de.prototype,"url",void 0),l([p()],de.prototype,"urlKey",void 0),l([se("urlKey")],de.prototype,"readUrlKey",null),l([p()],de.prototype,"user",void 0),l([se("user")],de.prototype,"readUser",null),l([p()],de.prototype,"use3dBasemaps",void 0),l([p()],de.prototype,"useDefault3dBasemap",void 0),l([p()],de.prototype,"useStandardizedQuery",void 0),l([p()],de.prototype,"useVectorBasemaps",void 0),l([p()],de.prototype,"vectorBasemapGalleryGroupQuery",void 0),de=xo=l([M("esri.portal.Portal")],de);const QB=new FinalizationRegistry(t=>{t.remove()});function SEe(t){const e=pt;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let Wc=class extends _e{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e?.portalItem&&e.path?{...e,path:XB(e.path,e.portalItem)}:e}set path(e){e!=null&&no(e)?ie.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return XB(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const r=this.cdnUrl;if(r==null)throw new L("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey,_ts:i?.cacheBust?Date.now():null},signal:i?.signal})}async update(e,i){const{addOrUpdateResources:r}=await H(()=>import("./resourceUtils-CRE0C0Xx.js"),[]);return await r(this.portalItem,[{resource:this,content:e,compress:i?.compress,access:i?.access}],"update",i),this}hasPath(){return this.path!=null}};function XB(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&no(t)&&(t=n6(t,e.itemUrl)),t?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}l([p()],Wc.prototype,"portalItem",void 0),l([p({type:String,value:null})],Wc.prototype,"path",null),l([Ct("path")],Wc.prototype,"_castPath",null),l([p({type:String,readOnly:!0})],Wc.prototype,"url",null),l([p({type:String,readOnly:!0})],Wc.prototype,"cdnUrl",null),l([p({type:String,readOnly:!0})],Wc.prototype,"itemRelativeUrl",null),Wc=l([M("esri.portal.PortalItemResource")],Wc);let Km=class extends _e{constructor(e){super(e),this.created=null,this.rating=null}};l([p({type:Date})],Km.prototype,"created",void 0),l([p()],Km.prototype,"rating",void 0),Km=l([M("esri.portal.PortalRating")],Km);var hm;const xEe=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),$Ee=new Set(["KML","GeoJson","CSV"]);let Ue=hm=class extends rp(eg){static from(t){return bw(hm,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Geocoding Service"?i="Locator":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t?.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="Raster function template"?i="Raster Function Template":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"?i="Excalibur Project":t==="3DTiles Service"?i="3D tiles layer":t==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(t){return t&&t.length?new Xe(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type?.toLowerCase()||"",e=this.typeKeywords||[],i="esri/images/portal/",r="16";let n,s=!1,o=!1,u=!1,d=!1,h=!1,m=!1,v=!1,b=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(s=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),u=e.includes("Route Layer"),d=e.includes("Markup"),h=e.includes("Spatiotemporal"),m=e.includes("UtilityNetwork"),n=h&&o?"spatiotemporaltable":o?"table":u?"routelayer":d?"markup":h?"spatiotemporal":m?"utilitynetwork":s?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(h=e.includes("Spatiotemporal"),v=e.includes("Relational"),n=h||v?"mapimages":s||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):n=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":e.includes("GaussianSplat")?"gaussiansplatlayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?n="maps":t==="web scene"?n=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?n="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?n="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?n="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?n="datafiles":t==="360 vr experience"?n="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?n="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?n="addindesktop":t==="pdf"?n="pdf":t==="microsoft word"?n="word":t==="microsoft excel"?n="excel":t==="microsoft powerpoint"?n="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?n="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?n="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?n="layersgray":t==="analysis model"?n="analysismodel":t==="scene package"?n="scenepackage":t==="3dtiles package"?n="3dtileslayerpackage":t==="3dtiles service"?n="3dtileslayer":t==="mobile scene package"?n="mobilescenepackage":t==="tile package"||t==="compact tile package"?n="tilepackage":t==="task file"?n="taskfile":t==="report template"?n="report-template":t==="statistical data collection"?n="statisticaldatacollection":t==="insights workbook"?n="workbook":t==="insights model"?n="insightsmodel":t==="insights page"?n="insightspage":t==="insights theme"?n="insightstheme":t==="hub initiative"?n="hubinitiative":t==="hub page"?n="hubpage":t==="hub site application"?n="hubsite":t==="hub event"?n="hubevent":t==="hub project"?n="hubproject":t==="relational database connection"?n="relationaldatabaseconnection":t==="big data file share"?n="datastorecollection":t==="image collection"?n="imagecollection":t==="desktop style"?n="desktopstyle":t==="style"?n=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?n="dashboard":t==="raster function template"?n="rasterprocessingtemplate":t==="vector tile package"?n="vectortilepackage":t==="ortho mapping project"?n="orthomappingproject":t==="ortho mapping template"?n="orthomappingtemplate":t==="solution"?n="solutions":t==="geopackage"?n="geopackage":t==="deep learning package"?n="deeplearningpackage":t==="real time analytic"?n="realtimeanalytics":t==="reality mapping project"?n="realitymappingproject":t==="big data analytic"?n="bigdataanalytics":t==="feed"?n="feed":t==="excalibur imagery project"?n="excaliburimageryproject":t==="notebook"?n="notebook":t==="storymap"?n="storymap":t==="survey123 add in"?n="survey123addin":t==="mission"?n="mission":t==="mission report"?n="missionreport":t==="mission template"?n="missiontemplate":t==="quickcapture project"?n="quickcaptureproject":t==="pro report"?n="proreport":t==="pro report template"?n="proreporttemplate":t==="urban model"?n="urbanmodel":t==="urban project"?n="urbanproject":t==="web experience"?n="experiencebuilder":t==="web experience template"?n="webexperiencetemplate":t==="experience builder widget"?n="experiencebuilderwidget":t==="experience builder widget package"?n="experiencebuilderwidgetpackage":t==="workflow"?n="workflow":t==="kernel gateway connection"?n="kernelgatewayconnection":t==="insights script"?n="insightsscript":t==="hub initiative template"?n="hubinitiativetemplate":t==="storymap theme"?n="storymaptheme":t==="knowledge graph"?n="knowledgegraph":t==="knowledge graph layer"?n="knowledgegraphlayer":t==="knowledge studio project"?n="knowledgestudio":t==="native application"?n="nativeapp":t==="native application installer"?n="nativeappinstaller":t==="web link chart"?n="linkchart":t==="knowledge graph web investigation"?n="investigation":t==="ogcfeatureserver"?n="features":t==="pro presentation"?n="propresentation":t==="pro project"?n="proproject":t==="insights workbook package"?n="insightsworkbookpackage":t==="apache parquet"?n="apacheparquet":t==="notebook code snippet library"?n="notebookcodesnippets":t==="suitability model"?n="suitabilitymodel":t==="esri classifier definition"?n="classifierdefinition":t==="esri classification schema"?n="classificationschema":t==="insights data engineering workbook"?n="dataengineeringworkbook":t==="insights data engineering model"?n="dataengineeringmodel":t==="deep learning studio project"?n="deeplearningproject":t==="discussion"?n="discussion":t==="allsource project"?n="allsourceproject":t==="api key"?n="apikey":t==="data pipeline"?n="datapipelines":t==="group layer"?(b=e.includes("Map"),n=b?"layergroup2d":"layergroup"):n=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":t==="xr experience"?"xrexperience":"maps",n?rr(i+n+r+".png"):null}get isLayer(){return this.type!=null&&xEe.has(this.type)}get itemCdnUrl(){return l6(this.itemUrl)}get itemPageUrl(){const t=this.portal?.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){const t=this.portal?.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get loaded(){return super.loaded}get thumbnailUrl(){const t=this.itemUrl,e=this.thumbnail;return t&&e?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`)??null:null}get userItemUrl(){const t=this.portal?.restUrl;if(!t)return null;const e=this.owner||this.portal?.user?.id;return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=de.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}},i=t instanceof Km?t.rating:t;return i==null||isNaN(i)||typeof t!="number"||(e.query.rating=i),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new Km({rating:i,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:z(this.applicationProxies),avgRating:this.avgRating,categories:z(this.categories),classification:z(this.classification),created:z(this.created),culture:this.culture,description:this.description,extent:z(this.extent),groupCategories:z(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:z(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:z(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:z(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:z(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new hm({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){const t=this.toJSON();for(const e of["tags","typeKeywords","categories"])t[e]=t[e]?.join(", ");for(const e of["extent","classification"]){const i=t[e];i&&(t[e]=JSON.stringify(i))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new Km(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},hm)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t?.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new L("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new L("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await e.signIn();const{copyResources:r,folder:n,tags:s,title:o}=t||{},u={method:"post",query:{copyPrivateResources:r==="all",folder:typeof n=="string"?n:n?.id,includeResources:!!r,tags:s?.join(","),title:o}},{itemId:d}=await e.request(`${i}/copy`,u);return new hm({id:d,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,r={method:"post"};if(typeof e=="string")np(e)?r.query={data:e}:r.query={url:jo(e)},i!=null&&(r.query.filename=i);else{const n=new FormData;i!=null?n.append("file",e,i):n.append("file",e),r.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new L("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await H(()=>import("./resourceUtils-CRE0C0Xx.js"),[]);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResources:r}=await H(()=>import("./resourceUtils-CRE0C0Xx.js"),[]);return t.portalItem=this,await r(this,[{resource:t,content:e,compress:i?.compress,access:i?.access}],"add",i),t}async removeResource(t,e){const{removeResource:i}=await H(()=>import("./resourceUtils-CRE0C0Xx.js"),[]);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new L("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await H(()=>import("./resourceUtils-CRE0C0Xx.js"),[]);return e(this,t)}resourceFromPath(t){return new Wc({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:z(this.categories),classification:z(this.classification),created:this.created?.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:z(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:z(this.typeKeywords),url:this.url};return yge(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new hm({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};l([p({type:["private","shared","org","public"]})],Ue.prototype,"access",void 0),l([p()],Ue.prototype,"accessInformation",void 0),l([p({type:String})],Ue.prototype,"apiKey",void 0),l([p({json:{read:{source:"appProxies"}}})],Ue.prototype,"applicationProxies",void 0),l([p()],Ue.prototype,"avgRating",void 0),l([p()],Ue.prototype,"categories",void 0),l([p()],Ue.prototype,"classification",void 0),l([p({type:Date})],Ue.prototype,"created",void 0),l([p()],Ue.prototype,"culture",void 0),l([p()],Ue.prototype,"description",void 0),l([p({readOnly:!0})],Ue.prototype,"displayName",null),l([p({type:Xe})],Ue.prototype,"extent",void 0),l([se("extent")],Ue.prototype,"readExtent",null),l([p()],Ue.prototype,"groupCategories",void 0),l([p({readOnly:!0})],Ue.prototype,"iconUrl",null),l([p()],Ue.prototype,"id",void 0),l([p({readOnly:!0})],Ue.prototype,"isLayer",null),l([p({type:Boolean,readOnly:!0})],Ue.prototype,"isOrgItem",void 0),l([p()],Ue.prototype,"itemControl",void 0),l([p({readOnly:!0})],Ue.prototype,"itemPageUrl",null),l([p({readOnly:!0})],Ue.prototype,"itemUrl",null),l([p()],Ue.prototype,"licenseInfo",void 0),l([p({type:Date})],Ue.prototype,"modified",void 0),l([p()],Ue.prototype,"name",void 0),l([p()],Ue.prototype,"numComments",void 0),l([p()],Ue.prototype,"numRatings",void 0),l([p()],Ue.prototype,"numViews",void 0),l([p()],Ue.prototype,"owner",void 0),l([p()],Ue.prototype,"ownerFolder",void 0),l([p({type:de})],Ue.prototype,"portal",void 0),l([p()],Ue.prototype,"screenshots",void 0),l([p()],Ue.prototype,"size",void 0),l([p()],Ue.prototype,"snippet",void 0),l([p()],Ue.prototype,"sourceJSON",void 0),l([p({type:String})],Ue.prototype,"sourceUrl",void 0),l([p({type:String})],Ue.prototype,"spatialReference",void 0),l([p()],Ue.prototype,"tags",void 0),l([p()],Ue.prototype,"thumbnail",void 0),l([p({readOnly:!0})],Ue.prototype,"thumbnailUrl",null),l([p()],Ue.prototype,"title",void 0),l([p()],Ue.prototype,"type",void 0),l([p()],Ue.prototype,"typeKeywords",void 0),l([p({type:String,json:{read(t,e){if($Ee.has(e.type)){const i=this.portal?.restUrl;t||=i&&this.id?`${i}/content/items/${this.id}/data`:null}return t}}})],Ue.prototype,"url",void 0),l([p({readOnly:!0})],Ue.prototype,"userItemUrl",null),Ue=hm=l([M("esri.portal.PortalItem")],Ue);const Rre=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Ue}},Symbol.toStringTag,{value:"Module"}));async function TEe(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,i=await Rie("esri/t9n/basemaps");return i[t]||i[e]}const yN={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return rr("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return rr("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return rr("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-hillshade",url:"https://services.arcgisonline.com/ArcGIS/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1},{id:"terrain-base",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/33064a20de0c48d2bb61efa8faca93a8/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Terrain Base"},{id:"terrain-reference",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/14fbc125ccc9488888b014db09f35f67/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Reference Reference",isReference:!0}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return rr("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/94329802cbfa44a18f423e6f1a0b875c/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return rr("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return rr("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return rr("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return rr("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return rr("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return rr("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return rr("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return rr("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return rr("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return rr("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return rr("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return rr("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Buildings_v1/SceneServer",itemId:"cd33b09dde0a419c986ca1a78a5fc06d",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return rr("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]}};let Zc=class extends _e{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const e=this.language;let i=e==="local"||e==="global"?e:Pie(e??so())??"global";return i=i==="no"?"nb":i,i}};l([p()],Zc.prototype,"apiKey",void 0),l([p()],Zc.prototype,"id",void 0),l([p()],Zc.prototype,"language",void 0),l([p()],Zc.prototype,"places",void 0),l([p()],Zc.prototype,"serviceUrl",void 0),l([p()],Zc.prototype,"worldview",void 0),Zc=l([M("esri.support.BasemapStyle")],Zc);const EEe=Zc,Pre=Symbol("BasemapInstance");function FJe(t){return t!=null&&typeof t=="object"&&Pre in t}let Dre=0;const lk=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Dre++})}};return i=l([M("esri.core.Identifiable")],i),i},sF=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Dre++})}};return i=l([M("esri.core.Identifiable.NumericIdentifiable")],i),i};lk(class{});async function MEe(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await H(async()=>{const{fromItem:r}=await import("./portalLayers-DPblME_V.js");return{fromItem:r}},__vite__mapDeps([159,160,161,162,163]));try{return await i(e)}catch(r){const n=e?.portalItem,s=n?.id||"unset",o=n?.portal?.url||St.portalUrl;throw ie.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+s+"')",r),r}}const KB={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function y5(t,e,i,r=Za){const n=new lo(B6(r)),s=Me.fromJSDate(t,{zone:n}),o=i==="decades"||i==="centuries"?"year":Lre(i);return i==="decades"&&(e*=10),i==="centuries"&&(e*=100),s.plus({[o]:e}).toJSDate()}function VJe(t,e,i="milliseconds"){const r=t.getTime(),n=Nre(e,i,"milliseconds");return new Date(r+n)}function eH(t,e,i=Za){const r=new lo(B6(i)),n=Me.fromJSDate(t,{zone:r});if(e==="decades"||e==="centuries"){const o=n.startOf("year"),{year:u}=o,d=u-u%(e==="decades"?10:100);return o.set({year:d}).toJSDate()}const s=Lre(e);return n.startOf(s).toJSDate()}function Nre(t,e,i){return t===0?0:t*KB[e]/KB[i]}function AEe(t,e){return t&&e?t.intersection(e):t||e}function Lre(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var ba,cb;let qt=(cb=class extends B{static get allTime(){return tH}static get empty(){return IEe}static fromArray(e){return new ba({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,i){return i.end!=null?new Date(i.end):null}writeEnd(e,i){i.end=e?.getTime()??null}get isAllTime(){return this.equals(ba.allTime)}get isEmpty(){return this.equals(ba.empty)}readStart(e,i){return i.start!=null?new Date(i.start):null}writeStart(e,i){i.start=e?.getTime()??null}clone(){return new ba({end:this.end,start:this.start})}equals(e){if(!e)return!1;const i=this.start?.getTime()??this.start,r=this.end?.getTime()??this.end,n=e.start?.getTime()??e.start,s=e.end?.getTime()??e.end;return i===n&&r===s}expandTo(e,i=Za){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=eH(r,e,i));let n=this.end;if(n){const s=eH(n,e,i);n=n.getTime()===s.getTime()?s:y5(s,1,e,i)}return new ba({start:r,end:n})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return ba.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const i=this.start?.getTime()??-1/0,r=this.end?.getTime()??1/0,n=e.start?.getTime()??-1/0,s=e.end?.getTime()??1/0;let o,u;return n>=i&&n<=r?o=n:i>=n&&i<=s&&(o=i),r>=n&&r<=s?u=r:s>=i&&s<=r&&(u=s),o==null||u==null||isNaN(o)||isNaN(u)?ba.empty:new ba({start:o===-1/0?null:new Date(o),end:u===1/0?null:new Date(u)})}offset(e,i,r=Za){if(this.isEmpty||this.isAllTime)return this.clone();const n=new ba,{start:s,end:o}=this;return s!=null&&(n.start=y5(s,e,i,r)),o!=null&&(n.end=y5(o,e,i,r)),n}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return tH.clone();const i=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new ba({start:i,end:r})}},ba=cb,cb);l([p({type:Date,json:{write:{allowNull:!0}}})],qt.prototype,"end",void 0),l([se("end")],qt.prototype,"readEnd",null),l([pe("end")],qt.prototype,"writeEnd",null),l([p({readOnly:!0,json:{read:!1}})],qt.prototype,"isAllTime",null),l([p({readOnly:!0,json:{read:!1}})],qt.prototype,"isEmpty",null),l([p({type:Date,json:{write:{allowNull:!0}}})],qt.prototype,"start",void 0),l([se("start")],qt.prototype,"readStart",null),l([pe("start")],qt.prototype,"writeStart",null),qt=ba=l([M("esri.time.TimeExtent")],qt);const tH=new qt,IEe=new qt({start:void 0,end:void 0});let kEe=0,xi=class extends JI(lk(eg)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Xe(-180,-90,180,90,we.WGS84),this.id=Date.now().toString(16)+"-layer-"+kEe++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=we.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await H(async()=>{const{fromUrl:r}=await import("./arcgisLayers-B0LBo4oC.js");return{fromUrl:r}},__vite__mapDeps([164,160,161,163]))).fromUrl(i)}static fromPortalItem(e){return MEe(e)}initialize(){this.when().catch(e=>{Yr(e)||ie.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const{parent:e}=this;e&&(this.parent=null,e.removeChildLayer?.(this))}get effectiveVisible(){return this.visible&&(this.parent?.effectiveVisible??!0)}get hasAttributionData(){return this.attributionDataUrl!=null}get loaded(){return super.loaded}removeFromParent(){const{parent:e}=this;e&&(e.removeChildLayer?.(this),this.parent=null)}get parsedUrl(){return Xr(this.url)}createLayerView(e,i){return Promise.reject(new L("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await $t(e,{query:{f:"json"},responseType:"json"})).data;throw new L("layer:no-attribution-data","Layer does not have attribution data")}};l([p({type:String})],xi.prototype,"attributionDataUrl",void 0),l([p({readOnly:!0})],xi.prototype,"effectiveVisible",null),l([p({type:Xe})],xi.prototype,"fullExtent",void 0),l([p({readOnly:!0})],xi.prototype,"hasAttributionData",null),l([p({type:String,clonable:!1})],xi.prototype,"id",void 0),l([p({type:Boolean,nonNullable:!0})],xi.prototype,"legendEnabled",void 0),l([p({type:["show","hide","hide-children"]})],xi.prototype,"listMode",void 0),l([p({type:Number,range:{min:0,max:1},nonNullable:!0})],xi.prototype,"opacity",void 0),l([p({clonable:!1})],xi.prototype,"parent",void 0),l([p({readOnly:!0})],xi.prototype,"parsedUrl",null),l([p({type:Boolean,readOnly:!0})],xi.prototype,"persistenceEnabled",void 0),l([p({type:Boolean})],xi.prototype,"popupEnabled",void 0),l([p({type:Boolean})],xi.prototype,"attributionVisible",void 0),l([p({type:we})],xi.prototype,"spatialReference",void 0),l([p({type:String})],xi.prototype,"title",void 0),l([p({readOnly:!0,json:{read:!1}})],xi.prototype,"type",void 0),l([p()],xi.prototype,"url",void 0),l([p({type:qt})],xi.prototype,"visibilityTimeExtent",void 0),l([p({type:Boolean,nonNullable:!0})],xi.prototype,"visible",void 0),xi=l([M("esri.layers.Layer")],xi);const RT=new WeakMap;function oF(t){return!t.destroyed&&(RT.has(t)||t.addHandles([be(()=>{const{parent:e}=t;return!!(e&&e instanceof xi)&&(e.type==="catalog-dynamic-group"||oF(e))},e=>RT.set(t,e),Gt),ut(()=>RT.delete(t))]),RT.get(t))}function jre(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function OEe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function CEe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function REe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function PEe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph-sublayer"}function iH(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function Fd(t){return t?.type==="subtype-sublayer"}const qJe={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function gN(t){const e=t?.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function DEe(t){return t.type==="integrated-mesh"||t.type==="integrated-mesh-3dtiles"}function uk(t){return t?.type==="feature"&&!t.url&&t.source?.type==="memory"}function GJe(t){const e=t?.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&t?.source?.type==="feature-layer"}function NEe(t){return t?.type==="feature"&&t.source?.type==="feature-layer"}function BJe(t){return jre(t)&&NEe(t)}async function aF(t,e){const i=pt?.findServerInfo(t);if(i?.currentVersion!=null)return i.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const n=`${t.slice(0,r)}/rest/info`,s=e!=null?e.signal:null,{data:o}=await $t(n,{query:{f:"json"},responseType:"json",signal:s});return o?.owningSystemUrl||null}function zre(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function LEe(t){return zre(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function jEe(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"knowledge-graph-sublayer":return!0;default:return!1}}function zEe(t){return!!jEe(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function HJe(t){const e=new fe;for(const i of t.allLayers.concat(t.allTables))i.type==="csv"||oF(i)||("charts"in i&&e.push(i),i.type==="subtype-group"&&e.push(...i.sublayers));return e}function FEe(t,e){return null}function WJe(t){return null}function vN(t){return!t||t.type==="Feature Service"&&!t.sourceUrl}function ZJe(t,e){!e||!vN(t)||FEe(t.url)}const VEe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),UEe=new Set(["integrated-mesh-3dtiles"]),Fre=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","parquet","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),qEe=new Set([...Fre,"link-chart"]);function GEe(t){switch(t.layerContainerType){case"basemap-base-layers":return VEe;case"basemap-ground-layers":return UEe;case"operational-layers":return t.origin==="link-chart"?qEe:Fre;default:return null}}function BEe(t,e){if(e.restrictedWebMapWriting){const i=GEe(e);return i==null||i.has(t.type)&&!uk(t)}return!0}function HEe(t,e){if(e)if(uk(t)){const i=sx("featureCollection.layers",e),r=i?.[0]?.layerDefinition;r&&rH(t,r)}else t.type!=="group"&&rH(t,e)}function rH(t,e){"maxScale"in t&&(e.maxScale=tA(t.maxScale)??void 0),"minScale"in t&&(e.minScale=tA(t.minScale)??void 0)}function WEe(t,e){if(HEe(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=tA(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(uk(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function wM(t,e,i){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return i?.messages&&i.messages.push(new L("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(uk(t)&&!t.isTable)e=t.resourceInfo;else if(BEe(t,i)){const r={};return t.write(r,i)?r:null}return e!=null&&WEe(t,e=z(e)),e}var nH,$v,wy;let js=(wy=class extends rp(eg){constructor(e){super(e),this[nH]=!0,this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.type="Basemap",this.id=Date.now().toString(16)+"-basemap-"+$v.idCounter++,this.baseLayers=new fe,this.referenceLayers=new fe,this.groundLayers=new fe;const i=u=>{const{parent:d}=u;d&&d!==this&&"remove"in d&&d.remove?.(u),u.parent=this,u.type!=="elevation"&&u.type!=="integrated-mesh-3dtiles"||ie.getLogger(this).error(`Layer '${u.title}, id:${u.id}' of type '${u.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=u=>{const{parent:d}=u;d&&d!==this&&"remove"in d&&d.remove?.(u),u.parent=this},n=u=>{const d=u.item;return d.parent===this?(ie.getLogger(this).error(`Layer '${d.title}, id:${d.id}' of type '${d.type}' already a ground layer, second add will be ignored.`),void u.preventDefault()):d.type!=="integrated-mesh-3dtiles"&&d.type!=="integrated-mesh"?(ie.getLogger(this).error(`Layer '${d.title}, id:${d.id}' of type '${d.type}' is not supported as a ground layer and will therefore be ignored.`),void u.preventDefault()):void 0},s=u=>{u.parent=null},o=u=>{u.parent===this&&(u.parent=null)};this.addHandles([this.baseLayers.on("after-add",u=>i(u.item)),this.baseLayers.on("after-remove",u=>s(u.item)),this.referenceLayers.on("after-add",u=>i(u.item)),this.referenceLayers.on("after-remove",u=>s(u.item)),this.groundLayers.on("before-add",n),this.groundLayers.on("after-add",u=>r(u.item)),this.groundLayers.on("after-remove",u=>o(u.item))])}initialize(){this.when().catch(e=>{ie.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const n of e)n.destroyed||n.destroy();const i=this.groundLayers.toArray();for(const n of i)n.destroyed||n.destroy();const r=this.referenceLayers.toArray();for(const n of r)n.destroyed||n.destroy();this.baseLayers.destroy(),this.groundLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=at(this.portalItem)}removeChildLayer(e){for(const i of[this.baseLayers,this.referenceLayers,this.groundLayers])i.remove(e)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Ql(e,this._get("baseLayers")))}_writeBaseLayers(e,i,r){const n=[];e&&(r={...r,layerContainerType:"basemap-base-layers"},this.baseLayers.forEach(s=>{const o=wM(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);o!=null&&n.push(o)}),this.referenceLayers.forEach(s=>{const o=wM(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);o!=null&&(s.type!=="scene"&&(o.isReference=!0),n.push(o))})),i.baseMapLayers=n}set groundLayers(e){this._set("groundLayers",Ql(e,this._get("groundLayers")))}_writeGroundLayers(e,i,r){const n=[];e&&(r={...r,layerContainerType:"basemap-ground-layers"},this.groundLayers.forEach(s=>{const o=wM(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);o!=null&&n.push(o)}),n.length>0&&(i.groundLayers=n))}get loaded(){return super.loaded}set referenceLayers(e){this._set("referenceLayers",Ql(e,this._get("referenceLayers")))}writeTitle(e,i){i.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return ak(this,e=>{e(this.baseLayers,this.groundLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(i=>N2(i)?i.clone():i),groundLayers:this.groundLayers.map(i=>N2(i)?i.clone():i),referenceLayers:this.referenceLayers.map(i=>N2(i)?i.clone():i)};return this.loaded&&(e.loadStatus="loaded"),new $v({resourceInfo:this.resourceInfo}).set(e)}read(e,i){this.resourceInfo||this._set("resourceInfo",{data:e,context:i}),super.read(e,i)}write(e,i){return e=e||{},i?.origin||(i={origin:"web-map",...i}),super.write(e,i),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const n=z(r);return n.url&&nc(n.url)&&(n.url=`https:${n.url}`),n.templateUrl&&nc(n.templateUrl)&&(n.templateUrl=`https:${n.templateUrl}`),n})),e}async _loadFromSource(e){const{resourceInfo:i,portalItem:r,style:n}=this;ft(e);const s=[];if(i){const o=i.context?i.context.url:null;if(s.push(this._loadLayersFromJSON(i.data,o,e)),i.data.id&&!i.data.title){const u=i.data.id;s.push(TEe(u).then(d=>{d&&this.read({title:d},i.context)}))}}else r?s.push(this._loadFromItem(r,e)):n&&s.push(this._loadFromStylesService(n,e));await Promise.all(s)}async _loadLayersFromJSON(e,i,r){const n=this.resourceInfo?.context,s=this.portalItem?.portal||n?.portal||null,o=JEe[n?.origin||""]??"web-map",{populateOperationalLayers:u}=await H(async()=>{const{populateOperationalLayers:h}=await import("./layersCreator-TDfSeS0d.js");return{populateOperationalLayers:h}},__vite__mapDeps([165,162,161,160,163,159])),d=[];if(ft(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const h={context:{...n,origin:o,url:i,portal:s,layerContainerType:"basemap-base-layers"},defaultLayerType:"DefaultTileLayer"},m=_=>o==="web-scene"&&_.layerType==="ArcGISSceneServiceLayer"||_.isReference,v=u(this.baseLayers,e.baseMapLayers.filter(_=>!m(_)),h);d.push(v);const b=u(this.referenceLayers,e.baseMapLayers.filter(m),h);d.push(b)}if(e.groundLayers&&Array.isArray(e.groundLayers)){const h={context:{...n,origin:o,url:i,portal:s,layerContainerType:"basemap-ground-layers"},defaultLayerType:"IntegratedMesh3DTilesLayer"},m=u(this.groundLayers,e.groundLayers,h);d.push(m)}await Promise.allSettled(d)}async _loadFromItem(e,i){const r=await e.load(i),n=await r.fetchData("json",i),s=Xr(e.itemUrl??"");return this._set("resourceInfo",{data:n.baseMap??{},context:{origin:ZEe[e.type||""]??"web-map",portal:e.portal||de.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:n.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||de.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,i)}async _loadFromStylesService(e,i){const r=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,n=`${r}/styles/${e.id}/self`,s=`${r}/webmaps/${e.id}`,o=e.apiKey??St.apiKeys.basemapStyles,[u,d]=await Promise.all([(await $t(n,{query:{token:o},signal:i?.signal})).data,(await $t(s,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:o},signal:i?.signal})).data]);this.thumbnailUrl??=u.thumbnailUrl;const h=Xr(s);if(this._set("resourceInfo",{data:d.baseMap??{},context:{origin:"web-map",url:h}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:d.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,h,i),o)for(const m of[...this.baseLayers,...this.groundLayers,...this.referenceLayers])"apiKey"in m&&(m.apiKey=o)}static fromId(e){const i=yN[e];return i?i.itemId?new $v({portalItem:{id:i.itemId,portal:{url:"https://www.arcgis.com"}}}):$v.fromJSON(i,i.is3d?{origin:"web-scene",portal:new de({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}},nH=Pre,$v=wy,wy.idCounter=0,wy);l([p({json:{read:!1,write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:fe}},writer(t,e,i,r){this._writeBaseLayers(t,e,r)}}}}}})],js.prototype,"baseLayers",null),l([p({json:{read:!1,write:{ignoreOrigin:!0,target:"groundLayers",writer(t,e,i,r){this._writeGroundLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{groundLayers:{type:fe}},writer(t,e,i,r){this._writeGroundLayers(t,e,r)}}}}}})],js.prototype,"groundLayers",null),l([p({type:String,json:{origins:{"web-scene":{write:!0}}}})],js.prototype,"id",void 0),l([p({type:Ue})],js.prototype,"portalItem",void 0),l([p()],js.prototype,"referenceLayers",null),l([p({readOnly:!0})],js.prototype,"resourceInfo",void 0),l([p({type:we})],js.prototype,"spatialReference",void 0),l([p({type:EEe})],js.prototype,"style",void 0),l([p()],js.prototype,"thumbnailUrl",void 0),l([p({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],js.prototype,"title",void 0),l([pe("title")],js.prototype,"writeTitle",null),js=$v=l([M("esri.Basemap")],js);const ZEe={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},JEe={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},W2=js,YEe=Object.freeze(Object.defineProperty({__proto__:null,default:W2},Symbol.toStringTag,{value:"Module"})),TA={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Vre(t){return!!TA[t]||!!TA[t.toLowerCase()]}function lF(t){return TA[t]??TA[t.toLowerCase()]}function QEe(t){return[...lF(t)]}function g5(t,e,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?t+(e-t)*r:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function Ure(t,e,i,r=1){const n=(t%360+360)%360/360,s=i<=.5?i*(e+1):i+e-i*e,o=2*i-s;return[Math.round(255*g5(o,s,n+1/3)),Math.round(255*g5(o,s,n)),Math.round(255*g5(o,s,n-1/3)),r]}function XEe(t){const e=t.length>5,i=e?8:4,r=(1<<i)-1,n=e?1:17,s=e?t.length===9:t.length===5;let o=+("0x"+t.slice(1));if(isNaN(o))return null;const u=[0,0,0,1];let d;return s&&(d=o&r,o>>=i,u[3]=n*d/255),d=o&r,o>>=i,u[2]=n*d,d=o&r,o>>=i,u[1]=n*d,d=o&r,o>>=i,u[0]=n*d,u}function qre(t){if(!t.startsWith("#")||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const e=parseInt(t.slice(1,2),16),i=parseInt(t.slice(2,3),16),r=parseInt(t.slice(3,4),16),n=t.length===4?15:parseInt(t.slice(4),16);return[e+16*e,i+16*i,r+16*r,(n+16*n)/255]}case 7:case 9:return[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16),(t.length===7?255:parseInt(t.slice(7),16))/255];default:return null}}function Gre(t){const e=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(e){const i=e[2].split(/\s*,\s*/),r=e[1];if(r==="rgb"&&i.length===3||r==="rgba"&&i.length===4){if(i[0].endsWith("%")){const n=i.map(s=>2.56*parseFloat(s));return i.length===4&&(n[3]=parseFloat(i[3])),sH(n)}return sH(i.map(n=>parseFloat(n)))}if(r==="hsl"&&i.length===3||r==="hsla"&&i.length===4)return Ure(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3]??"1"))}return null}function sH(t){return t[0]=Q0(t[0]),t[1]=Q0(t[1]),t[2]=Q0(t[2]),t[3]=t.length===4?Hre(t[3]):1,t}function Bre(t){let e=Vre(t)?lF(t):null;return e??=Gre(t),e??=qre(t),e}function JJe(t){const e=Bre(t);return e!=null?[e[0]/255,e[1]/255,e[2]/255,e[3]]:null}function Hre(t){return Wre(t,0,1)}function Q0(t){return Math.round(Wre(t,0,255))}function Wre(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}const Zre=2.2,KEe=1/Zre;function YJe(t){return t**Zre}function QJe(t){return t**KEe}function PT(t){return Qr(Gz(t),0,255)}function DT(t,e){const i=t.toString(16).padStart(2,"0");return e?i.slice(0,1):i}let Ie=class wa{static blendColors(e,i,r,n=new wa){return n.r=Math.round(e.r+(i.r-e.r)*r),n.g=Math.round(e.g+(i.g-e.g)*r),n.b=Math.round(e.b+(i.b-e.b)*r),n.a=e.a+(i.a-e.a)*r,n._sanitize()}static fromRgb(e,i){const r=Gre(e);return r?wa.fromArray(r,i):null}static fromHex(e,i=new wa){const r=qre(e);return r?wa.fromArray(r,i):null}static fromArray(e,i=new wa){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const r=Bre(e);return r?wa.fromArray(r,i):null}static fromJSON(e){return e!=null?new wa([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e,i){return e==null?null:(i??=[0,0,0,0],i[0]=e.r/255,i[1]=e.g/255,i[2]=e.b/255,i[3]=e.a!=null?e.a:1,i)}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?wa.fromString(e,this):Array.isArray(e)?wa.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof wa||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const i=e?.capitalize??!1,r=e?.digits??6,n=r===3||r===4,s=r===4||r===8,o=`#${DT(this.r,n)}${DT(this.g,n)}${DT(this.b,n)}${s?DT(Math.round(255*this.a),n):""}`;return i?o.toUpperCase():o}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=0){const i=PT(this.r),r=PT(this.g),n=PT(this.b);return e===0||this.a!==1?[i,r,n,PT(255*this.a)]:[i,r,n]}clone(){return new wa(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Q0(this.r),this.g=Q0(this.g),this.b=Q0(this.b),this.a=Hre(this.a),this}_set(e,i,r,n){this.r=e,this.g=i,this.b=r,this.a=n}};Ie.prototype.declaredClass="esri.Color";function Ae(t,e={}){const i=t instanceof Be?t:new Be(t,e),{alwaysWriteDefaults:r,default:n,ignoreUnknown:s=!0,name:o,nonNullable:u,readOnly:d=!1}=e;return p({type:s?i.apiValues:String,json:{type:i.jsonValues,default:n,name:o,read:!d&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:r}},nonNullable:u,readOnly:d})}var bN;let _M=bN=class extends B{constructor(t){super(t),this.type="none"}clone(){return new bN({type:this.type})}};l([Ae({none:"none",stayAbove:"stay-above"}),p({json:{write:{isRequired:!0}}})],_M.prototype,"type",void 0),_M=bN=l([M("esri.ground.NavigationConstraint")],_M);const Jre=Symbol("GroundInstance");function eMe(t){return t!=null&&typeof t=="object"&&Jre in t}function ck(t){const e=Gz(100*(1-t));return Math.max(0,Math.min(e,100))}function VS(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var oH,wN,FY;let _a=wN=(FY=class extends rp(eg){constructor(t){super(t),this[oH]=!0,this.parent=null,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new fe;const e=r=>{const{parent:n}=r;n&&n!==this&&"remove"in n&&n.remove?.(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&ie.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>i(r.item))]),this.allLayers=new Ll({getCollections:()=>[this.layers,this.parent?.basemap?.groundLayers]})}removeChildLayer(t){this.layers.remove(t)}initialize(){this.when().catch(t=>{Yr(t)||ie.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}get integratedMeshGround(){const t=this.parent?.basemap?.groundLayers.at(0);return t?.replacesTerrain?t:null}destroy(){const t=this.layers.removeAll();for(const e of t)at(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}get loaded(){return super.loaded}get layers(){return this._get("layers")}set layers(t){this._set("layers",Ql(t,this._get("layers")))}writeLayers(t,e,i,r){const n=[];t&&(r={...r,layerContainerType:"ground"},t.forEach(s=>{if("write"in s){const o={};sge(s)().write(o,r)&&n.push(o)}else r?.messages&&r.messages.push(new L("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),e.layers=n}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return ak(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e?.signal});const{queryAll:i}=await H(()=>import("./ElevationQuery-4j496afM.js"),[]);return ft(e),i(this.layers.filter(aH).toArray(),t,e)}async createElevationSampler(t,e){await this.load({signal:e?.signal});const{createSampler:i}=await H(()=>import("./ElevationQuery-4j496afM.js"),[]);return ft(e),i(this.layers.filter(aH).toArray(),t,e)}clone(){const t={opacity:this.opacity,surfaceColor:z(this.surfaceColor),navigationConstraint:z(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new wN({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,i){const r=e?.origin||"web-scene",n=e?.portal||null,s=e?.url||null,{populateOperationalLayers:o}=await H(async()=>{const{populateOperationalLayers:d}=await import("./layersCreator-TDfSeS0d.js");return{populateOperationalLayers:d}},__vite__mapDeps([165,162,161,160,163,159]));ft(i);const u=[];if(t.layers&&Array.isArray(t.layers)){const d={context:{origin:r,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};u.push(o(this.layers,t.layers,d))}await Promise.allSettled(u)}},oH=Jre,FY);function aH(t){return t&&"createElevationSampler"in t}l([p()],_a.prototype,"parent",void 0),l([p()],_a.prototype,"integratedMeshGround",null),l([p({json:{read:!1,write:{isRequired:!0}}})],_a.prototype,"layers",null),l([p()],_a.prototype,"allLayers",void 0),l([pe("layers")],_a.prototype,"writeLayers",null),l([p({readOnly:!0})],_a.prototype,"resourceInfo",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:tt,read:{reader:VS,source:"transparency"},write:{writer:(t,e)=>{e.transparency=ck(t)},target:"transparency"}}})],_a.prototype,"opacity",void 0),l([p({type:Ie,json:{type:[tt],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],_a.prototype,"surfaceColor",void 0),l([p({type:_M,json:{write:!0}})],_a.prototype,"navigationConstraint",void 0),_a=wN=l([M("esri.Ground")],_a);const EA=_a,tMe="randomUUID"in crypto;function tg(){if(tMe)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function XJe(){return`{${tg().toUpperCase()}}`}function iMe(){return`{${tg()}}`}function rMe(t){const e=t.toUpperCase();return t.startsWith("{")?e:`{${e}}`}const ev={Base64:0,Hex:1,String:2,Raw:3},X0=8,Yre=(1<<X0)-1;function Fh(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function nMe(t){const e=[];for(let i=0,r=t.length*X0;i<r;i+=X0)e[i>>5]|=(t.charCodeAt(i/X0)&Yre)<<i%32;return e}function sMe(t){const e=[];for(let i=0,r=32*t.length;i<r;i+=X0)e.push(String.fromCharCode(t[i>>5]>>>i%32&Yre));return e.join("")}function oMe(t){const e="0123456789abcdef",i=[];for(let r=0,n=4*t.length;r<n;r++)i.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return i.join("")}function aMe(t){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let n=0,s=4*t.length;n<s;n+=3){const o=(t[n>>2]>>n%4*8&255)<<16|(t[n+1>>2]>>(n+1)%4*8&255)<<8|t[n+2>>2]>>(n+2)%4*8&255;for(let u=0;u<4;u++)8*n+6*u>32*t.length?r.push("="):r.push(i.charAt(o>>6*(3-u)&63))}return r.join("")}function lMe(t,e){return t<<e|t>>>32-e}function dk(t,e,i,r,n,s){return Fh(lMe(Fh(Fh(e,t),Fh(r,s)),n),i)}function Ln(t,e,i,r,n,s,o){return dk(e&i|~e&r,t,e,n,s,o)}function jn(t,e,i,r,n,s,o){return dk(e&r|i&~r,t,e,n,s,o)}function zn(t,e,i,r,n,s,o){return dk(e^i^r,t,e,n,s,o)}function Fn(t,e,i,r,n,s,o){return dk(i^(e|~r),t,e,n,s,o)}function uMe(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,r=-271733879,n=-1732584194,s=271733878;for(let o=0;o<t.length;o+=16){const u=i,d=r,h=n,m=s;i=Ln(i,r,n,s,t[o],7,-680876936),s=Ln(s,i,r,n,t[o+1],12,-389564586),n=Ln(n,s,i,r,t[o+2],17,606105819),r=Ln(r,n,s,i,t[o+3],22,-1044525330),i=Ln(i,r,n,s,t[o+4],7,-176418897),s=Ln(s,i,r,n,t[o+5],12,1200080426),n=Ln(n,s,i,r,t[o+6],17,-1473231341),r=Ln(r,n,s,i,t[o+7],22,-45705983),i=Ln(i,r,n,s,t[o+8],7,1770035416),s=Ln(s,i,r,n,t[o+9],12,-1958414417),n=Ln(n,s,i,r,t[o+10],17,-42063),r=Ln(r,n,s,i,t[o+11],22,-1990404162),i=Ln(i,r,n,s,t[o+12],7,1804603682),s=Ln(s,i,r,n,t[o+13],12,-40341101),n=Ln(n,s,i,r,t[o+14],17,-1502002290),r=Ln(r,n,s,i,t[o+15],22,1236535329),i=jn(i,r,n,s,t[o+1],5,-165796510),s=jn(s,i,r,n,t[o+6],9,-1069501632),n=jn(n,s,i,r,t[o+11],14,643717713),r=jn(r,n,s,i,t[o],20,-373897302),i=jn(i,r,n,s,t[o+5],5,-701558691),s=jn(s,i,r,n,t[o+10],9,38016083),n=jn(n,s,i,r,t[o+15],14,-660478335),r=jn(r,n,s,i,t[o+4],20,-405537848),i=jn(i,r,n,s,t[o+9],5,568446438),s=jn(s,i,r,n,t[o+14],9,-1019803690),n=jn(n,s,i,r,t[o+3],14,-187363961),r=jn(r,n,s,i,t[o+8],20,1163531501),i=jn(i,r,n,s,t[o+13],5,-1444681467),s=jn(s,i,r,n,t[o+2],9,-51403784),n=jn(n,s,i,r,t[o+7],14,1735328473),r=jn(r,n,s,i,t[o+12],20,-1926607734),i=zn(i,r,n,s,t[o+5],4,-378558),s=zn(s,i,r,n,t[o+8],11,-2022574463),n=zn(n,s,i,r,t[o+11],16,1839030562),r=zn(r,n,s,i,t[o+14],23,-35309556),i=zn(i,r,n,s,t[o+1],4,-1530992060),s=zn(s,i,r,n,t[o+4],11,1272893353),n=zn(n,s,i,r,t[o+7],16,-155497632),r=zn(r,n,s,i,t[o+10],23,-1094730640),i=zn(i,r,n,s,t[o+13],4,681279174),s=zn(s,i,r,n,t[o],11,-358537222),n=zn(n,s,i,r,t[o+3],16,-722521979),r=zn(r,n,s,i,t[o+6],23,76029189),i=zn(i,r,n,s,t[o+9],4,-640364487),s=zn(s,i,r,n,t[o+12],11,-421815835),n=zn(n,s,i,r,t[o+15],16,530742520),r=zn(r,n,s,i,t[o+2],23,-995338651),i=Fn(i,r,n,s,t[o],6,-198630844),s=Fn(s,i,r,n,t[o+7],10,1126891415),n=Fn(n,s,i,r,t[o+14],15,-1416354905),r=Fn(r,n,s,i,t[o+5],21,-57434055),i=Fn(i,r,n,s,t[o+12],6,1700485571),s=Fn(s,i,r,n,t[o+3],10,-1894986606),n=Fn(n,s,i,r,t[o+10],15,-1051523),r=Fn(r,n,s,i,t[o+1],21,-2054922799),i=Fn(i,r,n,s,t[o+8],6,1873313359),s=Fn(s,i,r,n,t[o+15],10,-30611744),n=Fn(n,s,i,r,t[o+6],15,-1560198380),r=Fn(r,n,s,i,t[o+13],21,1309151649),i=Fn(i,r,n,s,t[o+4],6,-145523070),s=Fn(s,i,r,n,t[o+11],10,-1120210379),n=Fn(n,s,i,r,t[o+2],15,718787259),r=Fn(r,n,s,i,t[o+9],21,-343485551),i=Fh(i,u),r=Fh(r,d),n=Fh(n,h),s=Fh(s,m)}return[i,r,n,s]}function uF(t,e=ev.Hex){const i=e||ev.Base64,r=uMe(nMe(t),t.length*X0);switch(i){case ev.Raw:return r;case ev.Hex:return oMe(r);case ev.String:return sMe(r);case ev.Base64:return aMe(r)}}function cMe(t){return t&&"getAtOrigin"in t&&"originOf"in t}function _N(t){return cF[dMe(t)]||hMe}function dMe(t){return t.type==="json"?"application/json":t.type==="blob"?t.blob.type:pMe(t.url)}function pMe(t){const e=kK(t);return SN[e]||Qre}const cF={},Qre="text/plain",hMe=cF[Qre],SN={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const t in SN)cF[SN[t]]=t;function fMe(t){const e=t?.origins??[void 0];return(i,r)=>{const n=mMe(t,i,r);for(const s of e){const o=Bz(i,s,r);for(const u in n)o[u]=n[u]}}}function mMe(t,e,i){if(t?.type==="resource")return yMe(t,e,i);switch(t?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:r,write:n}=Sbe;return{read:r,write:n}}}}function yMe(t,e,i){const r=dx(e,i);return{type:String,read:(n,s,o)=>{const u=LI(n,s,o);return r.type===String?u:typeof r.type=="function"?new r.type({url:u}):void 0},write:{isRequired:r.json?.write?.isRequired,writer(n,s,o,u){if(!u?.resources)return typeof n=="string"?void(s[o]=Oy(n,u)):void(s[o]=n.write({},u));const d=bMe(n),h=Oy(d,{...u,verifyItemRelativeUrls:u?.verifyItemRelativeUrls?{writtenUrls:u.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},1),m=r.type!==String&&(!cMe(this)||u?.origin&&this.originIdOf(i)>qd(u.origin)),v={object:this,propertyName:i,value:n,targetUrl:h,dest:s,targetPropertyName:o,context:u,params:t};u?.portalItem&&h&&!no(h)?m&&t?.contentAddressed?xN(v):m?gMe(v):vMe(v):u?.portalItem&&(h==null||DK(h)!=null||Ew(h)||m)?xN(v):s[o]=h}}}}function xN(t){const{targetUrl:e,params:i,value:r,context:n,dest:s,targetPropertyName:o}=t;if(!n.portalItem)return;const u=NK(e),d=Kre(r,e,n);if(i?.contentAddressed&&d.type!=="json")return void n.messages?.push(new L("persistable:contentAddressingUnsupported",`Property "${o}" is trying to serializing a resource with content of type ${d.type} with content addressing. Content addressing is only supported for json resources.`,{content:d}));const h=i?.contentAddressed&&d.type==="json"?uF(d.jsonString):u?.filename??tg(),m=Iy(i?.prefix??u?.prefix,h),v=`${m}.${_N(d)}`;if(i?.contentAddressed&&n.resources&&d.type==="json"){const x=n.resources.toKeep.find(({resource:$})=>$.path===v)??n.resources.toAdd.find(({resource:$})=>$.path===v);if(x)return void(s[o]=x.resource.itemRelativeUrl)}const b=n.portalItem.resourceFromPath(v);Ew(e)&&n.resources&&n.resources.pendingOperations.push(ube(e).then(x=>{b.path=`${m}.${_N({type:"blob",blob:x})}`,s[o]=b.itemRelativeUrl}).catch(()=>{}));const _=i?.compress??!1;n.resources&&Xre({...t,resource:b,content:d,compress:_,updates:n.resources.toAdd}),s[o]=b.itemRelativeUrl}function gMe(t){const{context:e,targetUrl:i,params:r,value:n,dest:s,targetPropertyName:o}=t;if(!e.portalItem)return;const u=e.portalItem.resourceFromPath(i),d=Kre(n,i,e),h=_N(d),m=kK(u.path),v=r?.compress??!1;h===m?(e.resources&&Xre({...t,resource:u,content:d,compress:v,updates:e.resources.toUpdate}),s[o]=i):xN(t)}function vMe({context:t,targetUrl:e,dest:i,targetPropertyName:r}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(e),compress:!1}),i[r]=e)}function Xre({object:t,propertyName:e,updates:i,resource:r,content:n,compress:s}){const o=u=>{wMe(t,e,u)};i.push({resource:r,content:n,compress:s,finish:o})}function Kre(t,e,i){return typeof t=="string"?{type:"url",url:e}:{type:"json",jsonString:JSON.stringify(t.toJSON(i))}}function bMe(t){return t==null?null:typeof t=="string"?t:t.url}function wMe(t,e,i){typeof t[e]=="string"?t[e]=i.url:t[e].url=i.url}let SM=class extends Re(B){constructor(e){super(e),this.color=null}};l([p({type:Ie,json:{type:[tt],write:!0}})],SM.prototype,"color",void 0),SM=l([M("esri.effects.FocusAreaOutline")],SM);const _Me=SM;var xM;let $N=xM=class extends rp(fe.ofType(hi)){constructor(t){super(t)}clone(){return new xM(this.items.map(t=>t.clone()))}write(t,e){return this.toJSON(e)}toJSON(t){const e=t?.layer?.spatialReference;return e?this.toArray().map(i=>{if(!e.equals(i.spatialReference)){if(!Qo(i.spatialReference,e))return t?.messages?.push(new Jo("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})),null;const n=new hi;rre(i,n,e),i=n}const r=i.toJSON(t);return delete r.spatialReference,r}).filter(i=>i!=null):this.toArray().map(i=>i.toJSON(t))}static fromJSON(t,e){const i=new xM;return t.forEach(r=>i.add(hi.fromJSON(r,e))),i}};$N=xM=l([M("esri.layers.support.PolygonCollection")],$N);const Z2=$N;let Jc=class extends rp(Jz){constructor(e){super(e),this.id=`focusarea-${tg()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new Z2}readGeometries(e,i,r){Array.isArray(e)?this.geometries=Z2.fromJSON(e,r):r.origin!=="web-scene"&&r.origin!=="portal-item"||r.hooks?.onAfterLoad?.(()=>this._loadGeometries(Zy(e,r),r))}async _loadGeometries(e,i){const r=await $t(e,{responseType:"json"});this.geometries=Z2.fromJSON(r.data,i)}};l([p({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),p()],Jc.prototype,"id",void 0),l([p({type:String,json:{write:!0}})],Jc.prototype,"title",void 0),l([p({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Jc.prototype,"enabled",void 0),l([p({type:_Me,json:{write:!0}})],Jc.prototype,"outline",void 0),l([p({type:Z2,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new Z2(t.items.map(e=>e.clone()))}),fMe({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],Jc.prototype,"geometries",void 0),l([se(["web-scene","portal-item","service"],"geometries")],Jc.prototype,"readGeometries",null),Jc=l([M("esri.effects.FocusArea")],Jc);const SMe=Jc;let j1=class extends rp(Jz){constructor(e){super(e),this.areas=new fe,this.style="bright"}};l([p({type:fe.ofType(SMe),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new fe(t.items.map(e=>e.clone()))})],j1.prototype,"areas",void 0),l([p({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],j1.prototype,"style",void 0),j1=l([M("esri.effects.FocusAreas")],j1);const ene=j1;function xMe(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function tne(t){return!(!xMe(t)||!LEe(t)?.operations?.supportsEditing||"editingEnabled"in t&&!zEe(t)||oF(t))}function pk(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function $Me(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function TMe(t,e,i,r,n,s,o,u,d,h,m,v,b,_,x,$){const E=new Float32Array(16);return E[0]=t,E[1]=e,E[2]=i,E[3]=r,E[4]=n,E[5]=s,E[6]=o,E[7]=u,E[8]=d,E[9]=h,E[10]=m,E[11]=v,E[12]=b,E[13]=_,E[14]=x,E[15]=$,E}const EMe=pk();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:EMe,clone:$Me,create:pk,fromValues:TMe},Symbol.toStringTag,{value:"Module"}));function Zd(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function _f(t,e,i,r,n,s,o,u,d,h,m,v,b,_,x,$,E){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t[6]=u,t[7]=d,t[8]=h,t[9]=m,t[10]=v,t[11]=b,t[12]=_,t[13]=x,t[14]=$,t[15]=E,t}function vx(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ya(t,e){if(t===e){const i=e[1],r=e[2],n=e[3],s=e[6],o=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=n,t[13]=o,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function MMe(t,e){return hy(t,e)||vx(t),t}function hy(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],u=e[5],d=e[6],h=e[7],m=e[8],v=e[9],b=e[10],_=e[11],x=e[12],$=e[13],E=e[14],A=e[15],O=i*u-r*o,D=i*d-n*o,R=i*h-s*o,P=r*d-n*u,j=r*h-s*u,Q=n*h-s*d,re=m*$-v*x,ce=m*E-b*x,ue=m*A-_*x,ye=v*E-b*$,he=v*A-_*$,Pe=b*A-_*E;let ve=O*Pe-D*he+R*ye+P*ue-j*ce+Q*re;return ve?(ve=1/ve,t[0]=(u*Pe-d*he+h*ye)*ve,t[1]=(n*he-r*Pe-s*ye)*ve,t[2]=($*Q-E*j+A*P)*ve,t[3]=(b*j-v*Q-_*P)*ve,t[4]=(d*ue-o*Pe-h*ce)*ve,t[5]=(i*Pe-n*ue+s*ce)*ve,t[6]=(E*R-x*Q-A*D)*ve,t[7]=(m*Q-b*R+_*D)*ve,t[8]=(o*he-u*ue+h*re)*ve,t[9]=(r*ue-i*he-s*re)*ve,t[10]=(x*j-$*R+A*O)*ve,t[11]=(v*R-m*j-_*O)*ve,t[12]=(u*ce-o*ye-d*re)*ve,t[13]=(i*ye-r*ce+n*re)*ve,t[14]=($*D-x*P-E*O)*ve,t[15]=(m*P-v*D+b*O)*ve,t):null}function AMe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],u=e[5],d=e[6],h=e[7],m=e[8],v=e[9],b=e[10],_=e[11],x=e[12],$=e[13],E=e[14],A=e[15];return t[0]=u*(b*A-_*E)-v*(d*A-h*E)+$*(d*_-h*b),t[1]=-(r*(b*A-_*E)-v*(n*A-s*E)+$*(n*_-s*b)),t[2]=r*(d*A-h*E)-u*(n*A-s*E)+$*(n*h-s*d),t[3]=-(r*(d*_-h*b)-u*(n*_-s*b)+v*(n*h-s*d)),t[4]=-(o*(b*A-_*E)-m*(d*A-h*E)+x*(d*_-h*b)),t[5]=i*(b*A-_*E)-m*(n*A-s*E)+x*(n*_-s*b),t[6]=-(i*(d*A-h*E)-o*(n*A-s*E)+x*(n*h-s*d)),t[7]=i*(d*_-h*b)-o*(n*_-s*b)+m*(n*h-s*d),t[8]=o*(v*A-_*$)-m*(u*A-h*$)+x*(u*_-h*v),t[9]=-(i*(v*A-_*$)-m*(r*A-s*$)+x*(r*_-s*v)),t[10]=i*(u*A-h*$)-o*(r*A-s*$)+x*(r*h-s*u),t[11]=-(i*(u*_-h*v)-o*(r*_-s*v)+m*(r*h-s*u)),t[12]=-(o*(v*E-b*$)-m*(u*E-d*$)+x*(u*b-d*v)),t[13]=i*(v*E-b*$)-m*(r*E-n*$)+x*(r*b-n*v),t[14]=-(i*(u*E-d*$)-o*(r*E-n*$)+x*(r*d-n*u)),t[15]=i*(u*b-d*v)-o*(r*b-n*v)+m*(r*d-n*u),t}function IMe(t){const e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],u=t[6],d=t[7],h=t[8],m=t[9],v=t[10],b=t[11],_=t[12],x=t[13],$=t[14],E=t[15];return(e*o-i*s)*(v*E-b*$)-(e*u-r*s)*(m*E-b*x)+(e*d-n*s)*(m*$-v*x)+(i*u-r*o)*(h*E-b*_)-(i*d-n*o)*(h*$-v*_)+(r*d-n*u)*(h*x-m*_)}function rw(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],u=e[4],d=e[5],h=e[6],m=e[7],v=e[8],b=e[9],_=e[10],x=e[11],$=e[12],E=e[13],A=e[14],O=e[15];let D=i[0],R=i[1],P=i[2],j=i[3];return t[0]=D*r+R*u+P*v+j*$,t[1]=D*n+R*d+P*b+j*E,t[2]=D*s+R*h+P*_+j*A,t[3]=D*o+R*m+P*x+j*O,D=i[4],R=i[5],P=i[6],j=i[7],t[4]=D*r+R*u+P*v+j*$,t[5]=D*n+R*d+P*b+j*E,t[6]=D*s+R*h+P*_+j*A,t[7]=D*o+R*m+P*x+j*O,D=i[8],R=i[9],P=i[10],j=i[11],t[8]=D*r+R*u+P*v+j*$,t[9]=D*n+R*d+P*b+j*E,t[10]=D*s+R*h+P*_+j*A,t[11]=D*o+R*m+P*x+j*O,D=i[12],R=i[13],P=i[14],j=i[15],t[12]=D*r+R*u+P*v+j*$,t[13]=D*n+R*d+P*b+j*E,t[14]=D*s+R*h+P*_+j*A,t[15]=D*o+R*m+P*x+j*O,t}function kMe(t,e,i){const r=i[0],n=i[1],s=i[2];if(e===t)t[12]=e[0]*r+e[4]*n+e[8]*s+e[12],t[13]=e[1]*r+e[5]*n+e[9]*s+e[13],t[14]=e[2]*r+e[6]*n+e[10]*s+e[14],t[15]=e[3]*r+e[7]*n+e[11]*s+e[15];else{const o=e[0],u=e[1],d=e[2],h=e[3],m=e[4],v=e[5],b=e[6],_=e[7],x=e[8],$=e[9],E=e[10],A=e[11];t[0]=o,t[1]=u,t[2]=d,t[3]=h,t[4]=m,t[5]=v,t[6]=b,t[7]=_,t[8]=x,t[9]=$,t[10]=E,t[11]=A,t[12]=o*r+m*n+x*s+e[12],t[13]=u*r+v*n+$*s+e[13],t[14]=d*r+b*n+E*s+e[14],t[15]=h*r+_*n+A*s+e[15]}return t}function OMe(t,e,i){const r=i[0],n=i[1],s=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function CMe(t,e,i,r){let n=r[0],s=r[1],o=r[2],u=Math.sqrt(n*n+s*s+o*o);if(u<=Zi())return void Zd(t,e);u=1/u,n*=u,s*=u,o*=u;const d=Math.sin(i),h=Math.cos(i),m=1-h,v=e[0],b=e[1],_=e[2],x=e[3],$=e[4],E=e[5],A=e[6],O=e[7],D=e[8],R=e[9],P=e[10],j=e[11],Q=n*n*m+h,re=s*n*m+o*d,ce=o*n*m-s*d,ue=n*s*m-o*d,ye=s*s*m+h,he=o*s*m+n*d,Pe=n*o*m+s*d,ve=s*o*m-n*d,We=o*o*m+h;t[0]=v*Q+$*re+D*ce,t[1]=b*Q+E*re+R*ce,t[2]=_*Q+A*re+P*ce,t[3]=x*Q+O*re+j*ce,t[4]=v*ue+$*ye+D*he,t[5]=b*ue+E*ye+R*he,t[6]=_*ue+A*ye+P*he,t[7]=x*ue+O*ye+j*he,t[8]=v*Pe+$*ve+D*We,t[9]=b*Pe+E*ve+R*We,t[10]=_*Pe+A*ve+P*We,t[11]=x*Pe+O*ve+j*We,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function RMe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[4],o=e[5],u=e[6],d=e[7],h=e[8],m=e[9],v=e[10],b=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*n+h*r,t[5]=o*n+m*r,t[6]=u*n+v*r,t[7]=d*n+b*r,t[8]=h*n-s*r,t[9]=m*n-o*r,t[10]=v*n-u*r,t[11]=b*n-d*r,t}function PMe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],u=e[2],d=e[3],h=e[8],m=e[9],v=e[10],b=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n-h*r,t[1]=o*n-m*r,t[2]=u*n-v*r,t[3]=d*n-b*r,t[8]=s*r+h*n,t[9]=o*r+m*n,t[10]=u*r+v*n,t[11]=d*r+b*n,t}function DMe(t,e,i){const r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],u=e[2],d=e[3],h=e[4],m=e[5],v=e[6],b=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n+h*r,t[1]=o*n+m*r,t[2]=u*n+v*r,t[3]=d*n+b*r,t[4]=h*n-s*r,t[5]=m*n-o*r,t[6]=v*n-u*r,t[7]=b*n-d*r,t}function ine(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function NMe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function rne(t,e,i){if(e===0)return vx(t);let r=i[0],n=i[1],s=i[2],o=Math.sqrt(r*r+n*n+s*s);if(o<=Zi())return null;o=1/o,r*=o,n*=o,s*=o;const u=Math.sin(e),d=Math.cos(e),h=1-d;return t[0]=r*r*h+d,t[1]=n*r*h+s*u,t[2]=s*r*h-n*u,t[3]=0,t[4]=r*n*h-s*u,t[5]=n*n*h+d,t[6]=s*n*h+r*u,t[7]=0,t[8]=r*s*h+n*u,t[9]=n*s*h-r*u,t[10]=s*s*h+d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function LMe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function jMe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function zMe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function nne(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],u=r+r,d=n+n,h=s+s,m=r*u,v=r*d,b=r*h,_=n*d,x=n*h,$=s*h,E=o*u,A=o*d,O=o*h;return t[0]=1-(_+$),t[1]=v+O,t[2]=b-A,t[3]=0,t[4]=v-O,t[5]=1-(m+$),t[6]=x+E,t[7]=0,t[8]=b+A,t[9]=x-E,t[10]=1-(m+_),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function FMe(t,e){const i=VMe,r=-e[0],n=-e[1],s=-e[2],o=e[3],u=e[4],d=e[5],h=e[6],m=e[7],v=r*r+n*n+s*s+o*o;return v>0?(i[0]=2*(u*o+m*r+d*s-h*n)/v,i[1]=2*(d*o+m*n+h*r-u*s)/v,i[2]=2*(h*o+m*s+u*n-d*r)/v):(i[0]=2*(u*o+m*r+d*s-h*n),i[1]=2*(d*o+m*n+h*r-u*s),i[2]=2*(h*o+m*s+u*n-d*r)),nne(t,e,i),t}const VMe=Y();function UMe(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function qMe(t,e){const i=e[0],r=e[1],n=e[2],s=e[4],o=e[5],u=e[6],d=e[8],h=e[9],m=e[10];return t[0]=Math.sqrt(i*i+r*r+n*n),t[1]=Math.sqrt(s*s+o*o+u*u),t[2]=Math.sqrt(d*d+h*h+m*m),t}function GMe(t,e){const i=e[0]+e[5]+e[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function BMe(t,e,i,r){const n=e[0],s=e[1],o=e[2],u=e[3],d=n+n,h=s+s,m=o+o,v=n*d,b=n*h,_=n*m,x=s*h,$=s*m,E=o*m,A=u*d,O=u*h,D=u*m,R=r[0],P=r[1],j=r[2];return t[0]=(1-(x+E))*R,t[1]=(b+D)*R,t[2]=(_-O)*R,t[3]=0,t[4]=(b-D)*P,t[5]=(1-(v+E))*P,t[6]=($+A)*P,t[7]=0,t[8]=(_+O)*j,t[9]=($-A)*j,t[10]=(1-(v+x))*j,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function HMe(t,e,i,r,n){const s=e[0],o=e[1],u=e[2],d=e[3],h=s+s,m=o+o,v=u+u,b=s*h,_=s*m,x=s*v,$=o*m,E=o*v,A=u*v,O=d*h,D=d*m,R=d*v,P=r[0],j=r[1],Q=r[2],re=n[0],ce=n[1],ue=n[2],ye=(1-($+A))*P,he=(_+R)*P,Pe=(x-D)*P,ve=(_-R)*j,We=(1-(b+A))*j,ee=(E+O)*j,ge=(x+D)*Q,Se=(E-O)*Q,nt=(1-(b+$))*Q;return t[0]=ye,t[1]=he,t[2]=Pe,t[3]=0,t[4]=ve,t[5]=We,t[6]=ee,t[7]=0,t[8]=ge,t[9]=Se,t[10]=nt,t[11]=0,t[12]=i[0]+re-(ye*re+ve*ce+ge*ue),t[13]=i[1]+ce-(he*re+We*ce+Se*ue),t[14]=i[2]+ue-(Pe*re+ee*ce+nt*ue),t[15]=1,t}function WMe(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,u=r+r,d=n+n,h=i*o,m=r*o,v=r*u,b=n*o,_=n*u,x=n*d,$=s*o,E=s*u,A=s*d;return t[0]=1-v-x,t[1]=m+A,t[2]=b-E,t[3]=0,t[4]=m-A,t[5]=1-h-x,t[6]=_+$,t[7]=0,t[8]=b+E,t[9]=_-$,t[10]=1-h-v,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function sne(t,e,i,r,n,s,o){const u=1/(i-e),d=1/(n-r),h=1/(s-o);return t[0]=2*s*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*d,t[6]=0,t[7]=0,t[8]=(i+e)*u,t[9]=(n+r)*d,t[10]=(o+s)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*h,t[15]=0,t}function ZMe(t,e,i,r,n){const s=1/Math.tan(e/2);let o;return t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,n!=null&&n!==1/0?(o=1/(r-n),t[10]=(n+r)*o,t[14]=2*n*r*o):(t[10]=-1,t[14]=-2*r),t}function JMe(t,e,i,r){const n=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),d=2/(o+u),h=2/(n+s);return t[0]=d,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=-(o-u)*d*.5,t[9]=(n-s)*h*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}function YMe(t,e,i,r,n,s,o){const u=1/(e-i),d=1/(r-n),h=1/(s-o);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*d,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+i)*u,t[13]=(n+r)*d,t[14]=(o+s)*h,t[15]=1,t}function one(t,e,i,r){const n=e[0],s=e[1],o=e[2];let u=n-i[0],d=s-i[1],h=o-i[2];const m=Zi();if(Math.abs(u)<m&&Math.abs(d)<m&&Math.abs(h)<m)return void vx(t);let v=1/Math.sqrt(u*u+d*d+h*h);u*=v,d*=v,h*=v;const b=r[0],_=r[1],x=r[2];let $=_*h-x*d,E=x*u-b*h,A=b*d-_*u;v=Math.sqrt($*$+E*E+A*A),v?(v=1/v,$*=v,E*=v,A*=v):($=0,E=0,A=0);let O=d*A-h*E,D=h*$-u*A,R=u*E-d*$;v=Math.sqrt(O*O+D*D+R*R),v?(v=1/v,O*=v,D*=v,R*=v):(O=0,D=0,R=0),t[0]=$,t[1]=O,t[2]=u,t[3]=0,t[4]=E,t[5]=D,t[6]=d,t[7]=0,t[8]=A,t[9]=R,t[10]=h,t[11]=0,t[12]=-($*n+E*s+A*o),t[13]=-(O*n+D*s+R*o),t[14]=-(u*n+d*s+h*o),t[15]=1}function QMe(t,e,i,r){const n=e[0],s=e[1],o=e[2],u=r[0],d=r[1],h=r[2];let m=n-i[0],v=s-i[1],b=o-i[2],_=m*m+v*v+b*b;_>0&&(_=1/Math.sqrt(_),m*=_,v*=_,b*=_);let x=d*b-h*v,$=h*m-u*b,E=u*v-d*m;return _=x*x+$*$+E*E,_>0&&(_=1/Math.sqrt(_),x*=_,$*=_,E*=_),t[0]=x,t[1]=$,t[2]=E,t[3]=0,t[4]=v*E-b*$,t[5]=b*x-m*E,t[6]=m*$-v*x,t[7]=0,t[8]=m,t[9]=v,t[10]=b,t[11]=0,t[12]=n,t[13]=s,t[14]=o,t[15]=1,t}function XMe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function KMe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function e3e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function ane(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function t3e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function i3e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t}function r3e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function lne(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],u=t[5],d=t[6],h=t[7],m=t[8],v=t[9],b=t[10],_=t[11],x=t[12],$=t[13],E=t[14],A=t[15],O=e[0],D=e[1],R=e[2],P=e[3],j=e[4],Q=e[5],re=e[6],ce=e[7],ue=e[8],ye=e[9],he=e[10],Pe=e[11],ve=e[12],We=e[13],ee=e[14],ge=e[15],Se=Zi();return Math.abs(i-O)<=Se*Math.max(1,Math.abs(i),Math.abs(O))&&Math.abs(r-D)<=Se*Math.max(1,Math.abs(r),Math.abs(D))&&Math.abs(n-R)<=Se*Math.max(1,Math.abs(n),Math.abs(R))&&Math.abs(s-P)<=Se*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(o-j)<=Se*Math.max(1,Math.abs(o),Math.abs(j))&&Math.abs(u-Q)<=Se*Math.max(1,Math.abs(u),Math.abs(Q))&&Math.abs(d-re)<=Se*Math.max(1,Math.abs(d),Math.abs(re))&&Math.abs(h-ce)<=Se*Math.max(1,Math.abs(h),Math.abs(ce))&&Math.abs(m-ue)<=Se*Math.max(1,Math.abs(m),Math.abs(ue))&&Math.abs(v-ye)<=Se*Math.max(1,Math.abs(v),Math.abs(ye))&&Math.abs(b-he)<=Se*Math.max(1,Math.abs(b),Math.abs(he))&&Math.abs(_-Pe)<=Se*Math.max(1,Math.abs(_),Math.abs(Pe))&&Math.abs(x-ve)<=Se*Math.max(1,Math.abs(x),Math.abs(ve))&&Math.abs($-We)<=Se*Math.max(1,Math.abs($),Math.abs(We))&&Math.abs(E-ee)<=Se*Math.max(1,Math.abs(E),Math.abs(ee))&&Math.abs(A-ge)<=Se*Math.max(1,Math.abs(A),Math.abs(ge))}function n3e(t){const e=Zi(),i=t[0],r=t[1],n=t[2],s=t[4],o=t[5],u=t[6],d=t[8],h=t[9],m=t[10];return Math.abs(1-(i*i+s*s+d*d))<=e&&Math.abs(1-(r*r+o*o+h*h))<=e&&Math.abs(1-(n*n+u*u+m*m))<=e}function s3e(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const o3e=rw,a3e=ane;Object.freeze(Object.defineProperty({__proto__:null,add:e3e,adjoint:AMe,copy:Zd,determinant:IMe,equals:lne,exactEquals:r3e,frob:KMe,fromQuat:WMe,fromQuat2:FMe,fromRotation:rne,fromRotationTranslation:nne,fromRotationTranslationScale:BMe,fromRotationTranslationScaleOrigin:HMe,fromScaling:NMe,fromTranslation:ine,fromXRotation:LMe,fromYRotation:jMe,fromZRotation:zMe,frustum:sne,getRotation:GMe,getScale:qMe,getTranslation:UMe,hasIdentityRotation:s3e,identity:vx,invert:hy,invertOrIdentity:MMe,isOrthoNormal:n3e,lookAt:one,mul:o3e,multiply:rw,multiplyScalar:t3e,multiplyScalarAndAdd:i3e,ortho:YMe,perspective:ZMe,perspectiveFromFieldOfView:JMe,rotate:CMe,rotateX:RMe,rotateY:PMe,rotateZ:DMe,scale:OMe,set:_f,str:XMe,sub:a3e,subtract:ane,targetTo:QMe,translate:kMe,transpose:Ya},Symbol.toStringTag,{value:"Module"}));const l3e=(t,e)=>{const i=_f(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Ya(i,i)},u3e=(t,e)=>{const i=_f(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Ya(i,i)},c3e=(t,e)=>{const i=1-e,r=_f(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Ya(r,r)},d3e=(t,e)=>{const i=Math.sin(e*Math.PI/180),r=Math.cos(e*Math.PI/180),n=_f(t,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return Ya(n,n)},p3e=(t,e)=>{const i=1-2*e,r=_f(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return Ya(r,r)},h3e=(t,e)=>{const i=_f(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Ya(i,i)},f3e=(t,e)=>{const i=1-e,r=_f(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Ya(r,r)};let une=class cne{constructor(e,i,r){this.strength=e,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(e,i,r){this.strength=Xs(e.strength,i.strength,r),this.radius=Xs(e.radius,i.radius,r),this.threshold=Xs(e.threshold,i.threshold,r)}clone(){return new cne(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:J2(this.radius),strength:this.strength,threshold:this.threshold}}},dne=class pne{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,r){this.radius=Math.round(Xs(e.radius,i.radius,r))}clone(){return new pne(this.radius)}toJSON(){return{type:"blur",radius:J2(this.radius)}}},TN=class hne{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.amount=Xs(e.amount,i.amount,r),this._updateMatrix()}clone(){return new hne(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||pk();switch(this.type){case"brightness":this._colorMatrix=l3e(e,this.amount);break;case"contrast":this._colorMatrix=u3e(e,this.amount);break;case"grayscale":this._colorMatrix=c3e(e,this.amount);break;case"invert":this._colorMatrix=p3e(e,this.amount);break;case"saturate":this._colorMatrix=h3e(e,this.amount);break;case"sepia":this._colorMatrix=f3e(e,this.amount)}}},fne=class mne{constructor(e,i,r,n){this.offsetX=e,this.offsetY=i,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(e,i,r){this.offsetX=Xs(e.offsetX,i.offsetX,r),this.offsetY=Xs(e.offsetY,i.offsetY,r),this.blurRadius=Xs(e.blurRadius,i.blurRadius,r),this.color[0]=Math.round(Xs(e.color[0],i.color[0],r)),this.color[1]=Math.round(Xs(e.color[1],i.color[1],r)),this.color[2]=Math.round(Xs(e.color[2],i.color[2],r)),this.color[3]=Xs(e.color[3],i.color[3],r)}clone(){return new mne(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:J2(this.offsetX),yoffset:J2(this.offsetY),blurRadius:J2(this.blurRadius),color:e}}},yne=class gne{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.angle=Xs(e.angle,i.angle,r),this._updateMatrix()}clone(){return new gne(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||pk();this._colorMatrix=d3e(e,this.angle)}},vne=class bne{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,r){this.amount=Xs(e.amount,i.amount,r)}clone(){return new bne(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Xs(t,e,i){return t+(e-t)*i}function J2(t){return Math.round(1e3*Ja(t))/1e3}function m3e(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new TN(t.type,0);case"saturate":case"brightness":case"contrast":return new TN(t.type,1);case"opacity":return new vne(1);case"hue-rotate":return new yne(0);case"blur":return new dne(0);case"drop-shadow":return new fne(0,0,0,[...lF("transparent")]);case"bloom":return new une(0,0,1)}}function y3e(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((r,n)=>r.type===i[n].type)}function g3e(t,e){const i=t.length>e.length?t:e,r=t.length>e.length?e:t;for(let n=r.length;n<i.length;n++)r.push(m3e(i[n]))}function v3e(t){const e=t[0];return!!e&&"type"in e}const v5=()=>ie.getLogger("esri.support.basemapUtils");function b3e(){return{}}function w3e(t){for(const e in t){const i=t[e];i&&!i.destroyed&&i.destroy(),delete t[e]}}function _3e(t,e){let i;if(typeof t=="string"){const r=t in yN,n=!r&&t.includes("/");if(!r&&!n){if(SD())v5().warn(`Unable to find basemap definition for: ${t}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const s=Object.entries(yN).filter(([o,u])=>u.classic||u.is3d).map(([o])=>`"${o}"`).sort().join(", ");v5().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${s}`)}return null}e&&(i=e[t]),i||(i=r?W2.fromId(t):new W2({style:{id:t}}),e&&(e[t]=i))}else i=cr(W2,t);return i?.destroyed&&(v5().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function S3e(t){return new Ll({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function NT(t){for(const e of t.values())e?.destroy();t.clear()}const lH={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function x3e(t){let e=null;if(typeof t=="string")if(t in lH){const i=lH[t];e=new EA({resourceInfo:{data:{layers:[i]}}})}else ie.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=cr(EA,t);return e}function EN(t,e,i){let r,n;if(t)for(let s=0,o=t.length;s<o;s++){if(r=t.at(s),r?.[e]===i)return r;if(r?.type==="group"&&(n=EN(r.layers,e,i),n))return n}}const $3e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.layers=new fe;const n=u=>{u.parent&&u.removeFromParent()},s=u=>{u.parent=this,this.layerAdded(u),u.type!=="elevation"&&u.type!=="base-elevation"||ie.getLogger(this).error(`Layer 'title:${u.title}, id:${u.id}' of type '${u.type}' is not supported as an operational layer and will therefore be ignored.`)},o=u=>{u.parent=null,this.layerRemoved(u)};this.addHandles([this.layers.on("before-add",u=>{if(u.item===this)return u.preventDefault(),void ie.getLogger(this).error("#add()","Cannot add layer to itself.");n(u.item)}),this.layers.on("after-add",u=>s(u.item)),this.layers.on("after-remove",u=>o(u.item))])}destroy(){const r=this.layers.toArray();for(const n of r)n.destroy();this.layers.destroy()}removeChildLayer(r){this.layers.remove(r),super.removeChildLayer?.(r)}set layers(r){this._set("layers",Ql(r,this._get("layers")))}add(r,n){const s=this.layers;if(n=s.getNextIndex(n),r instanceof xi){const o=r;o.parent===this?this.reorder(o,n):s.add(o,n)}else Kn(r)?r.then(o=>{this.destroyed||this.add(o,n)}):ie.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,n){const s=this.layers;let o=s.getNextIndex(n);r.slice().forEach(u=>{u.parent!==this?(s.add(u,o),o+=1):this.reorder(u,o)})}findLayerById(r){return EN(this.layers,"id",r)}findLayerByUid(r){return EN(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,n){return this.layers.reorder(r,n)}layerAdded(r){}layerRemoved(r){}};return l([p()],i.prototype,"layers",null),i=l([M("esri.support.LayersMixin")],i),i},T3e=new Set(["feature","subtype-group"]);function MN(t,e,i){if(t)for(let r=0,n=t.length;r<n;r++){const s=t.at(r);if(s[e]===i)return s;if(s?.type==="group"){const o=MN(s.tables,e,i);if(o)return o}}}const E3e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.tables=new fe,this.addHandles([this.tables.on("after-add",n=>{const s=n.item;s.parent&&s.parent!==this&&s.removeFromParent(),s.parent=this,T3e.has(s.type)||ie.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",n=>{n.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const n of r)n.destroy();this.tables.destroy()}removeChildLayer(r){this.tables.remove(r),super.removeChildLayer?.(r)}set tables(r){this._set("tables",Ql(r,this._get("tables")))}findTableById(r){return MN(this.tables,"id",r)}findTableByUid(r){return MN(this.tables,"uid",r)}};return l([p()],i.prototype,"tables",null),i=l([M("esri.support.TablesMixin")],i),i};let Sa=class extends E3e($3e(sp)){constructor(e){super(e),this.allLayers=new Ll({getCollections:()=>[this.basemap?.baseLayers,this.basemap?.groundLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:i=>"layers"in i?i.layers:null}),this.focusAreas=new ene,this.allTables=S3e(this),this.basemap=null,this.editableLayers=new Ll({getCollections:()=>[this.allLayers],itemFilterFunction:tne}),this.ground=new EA,this._basemapCache=b3e(),this.addHandles(Pn(()=>this.ground,(i,r)=>{r?.parent===this&&(r.parent=null),i.parent=this},{sync:!0}))}destroy(){w3e(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=at(this.basemap),at(this.ground),this._set("ground",null)}castBasemap(e){return _3e(e,this._basemapCache)}castGround(e){return x3e(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};l([p({readOnly:!0,dependsOn:[]})],Sa.prototype,"allLayers",void 0),l([p({type:ene,nonNullable:!0,json:{write:{overridePolicy:t=>({enabled:t.areas.length>0,ignoreOrigin:!0})}}})],Sa.prototype,"focusAreas",void 0),l([p({readOnly:!0})],Sa.prototype,"allTables",void 0),l([p({type:W2,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Sa.prototype,"basemap",void 0),l([Ct("basemap")],Sa.prototype,"castBasemap",null),l([p({readOnly:!0})],Sa.prototype,"editableLayers",void 0),l([p({type:EA,nonNullable:!0})],Sa.prototype,"ground",void 0),l([Ct("ground")],Sa.prototype,"castGround",null),l([p()],Sa.prototype,"undoRedo",void 0),Sa=l([M("esri.Map")],Sa);const wne=Sa;var z1;const MA=Fr()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),_ne=MA.jsonValues.slice();XP(_ne,"orthometric");const Y2=Fr()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let ys=z1=class extends B{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return MA.write(t,e,i)}readHeightModel(t,e,i){return MA.read(t)||(i?.messages&&i.messages.push(M3e(t,{context:i})),null)}readHeightUnit(t,e,i){return Y2.read(t)||(i?.messages&&i.messages.push(uH(t,{context:i})),null)}readHeightUnitService(t,e,i){return b6(t)||Y2.read(t)||(i?.messages&&i.messages.push(uH(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new z1({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=dee(e);return new z1({heightModel:t.heightModel,heightUnit:i??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new z1;return e.read(t,{origin:"web-scene"}),e}};function uH(t,e){return new Jo("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function M3e(t,e){return new Jo("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}l([p({type:MA.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:_ne,default:"ellipsoidal",write:{isRequired:!0}}}}})],ys.prototype,"heightModel",void 0),l([pe("web-scene","heightModel")],ys.prototype,"writeHeightModel",null),l([se(["web-scene","service"],"heightModel")],ys.prototype,"readHeightModel",null),l([p({type:Y2.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Y2.jsonValues,write:{writer:Y2.write,isRequired:!0}}}}})],ys.prototype,"heightUnit",void 0),l([se("web-scene","heightUnit")],ys.prototype,"readHeightUnit",null),l([se("service","heightUnit")],ys.prototype,"readHeightUnitService",null),l([p({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],ys.prototype,"vertCRS",void 0),l([se("service","vertCRS",["vertCRS","ellipsoid","geoid"])],ys.prototype,"readVertCRS",null),ys=z1=l([M("esri.geometry.HeightModelInfo")],ys);let b5;async function A3e(){return b5==null&&(b5=H(()=>import("./WhereClauseCache-6_hUT_97.js"),__vite__mapDeps([23,24])).then(t=>new t.WhereClauseCache(500,500))),b5}async function Sne(t,e){const i=await A3e(),r=i.get(t,e);if(r==null)throw i.getError(t,e);return r}function Q2(t,e){return t||=null,e||=null,t==="1=1"?e??t:e==="1=1"?t??e:t&&e?`(${t}) AND (${e})`:t??e}function AN(t,e){return t||=null,e||=null,t==="1=1"||e==="1=1"||t===e?t==="1=1"?t:e:t&&e?`(${t}) OR (${e})`:t??e}function I3e(t,e){return e.length===0?null:`${t} IN (${k3e(e)})`}function k3e(t){return t.map(e=>typeof e=="string"?O3e(e):e).join(",")}function O3e(t){return`'${t.replaceAll("'","''")}'`}function C3e(t){return typeof t=="number"}function rYe(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function nYe(t){return typeof t=="boolean"}function bx(t){return typeof t=="string"||t instanceof String}function R3e(t){return t==null||bx(t)}function sYe(t){return Array.isArray(t)}function xne(t){return t?.declaredClass==="esri.Graphic"}function oYe(t){return t instanceof Date}const P3e="HH:mm",D3e="HH:mm:ss",N3e="HH:mm:ss.SSS",L3e=[N3e,D3e,P3e,"TT"],j3e="yyyy-MM-dd";function cH(t){if(!t||!bx(t))return null;const e=Me.fromFormat(t,j3e);return e.isValid?e:null}function dH(t){return t&&bx(t)?Vge(L3e,e=>{const i=Me.fromFormat(t,e);return i.isValid?i:null})??null:null}function pH(t){if(!t||!bx(t))return null;const e=Me.fromISO(t);return e.isValid?e:null}const $ne=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function z3e(t){return t!=null&&$ne.has(t.type)}function Tne(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function Ene(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function Mne(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}const F3e=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);Vz($ne,F3e);function aYe(t,e){const i=t?.domain;if(!i||i.type!=="range")return;const r="range"in i?i.range[0]:i.minValue,n="range"in i?i.range[1]:i.maxValue,s=z3e(t);return Tne(t)||Mne(t)||Ene(t)?{...V3e(t,n,r),isInteger:s}:{min:r!=null&&typeof r=="number"?r:null,max:n!=null&&typeof n=="number"?n:null,rawMin:r,rawMax:n,isInteger:s}}function V3e(t,e,i){return Tne(t)?{min:cH(i)?.toMillis(),max:cH(e)?.toMillis(),rawMin:i,rawMax:e}:Mne(t)?{min:dH(i)?.toMillis(),max:dH(e)?.toMillis(),rawMin:i,rawMax:e}:Ene(t)?{min:pH(i)?.toMillis(),max:pH(e)?.toMillis(),rawMin:i,rawMax:e}:{max:null,min:null}}function U3e(t){if(!t)return;const e=t.match(q3e);return e?.groups?e.groups.doubleQuoted??e.groups.singleQuoted??e.groups.dotNotation:void 0}const q3e=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-z_][a-z0-9_]*))$/i;function G3e(t){return t.match(B3e)?.[1]?.replaceAll("\\'","'")??null}const B3e=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let w5;function Vy(){return w5||(w5=(async()=>{const[t,e,i]=await Promise.all([H(()=>import("./arcadeUtils-DWqdyd4v.js"),__vite__mapDeps([166,167,168,169,170,147,28,171,15,12,13,16,172,173,24,68,174,148,149,175])),H(()=>import("./batchExec-jVq3udcD.js"),__vite__mapDeps([176,78])),H(()=>import("./aiServices-Bt2lOJsZ.js").then(r=>r.a),__vite__mapDeps([172,169,170,147,28,173,168]))]);return{arcade:t.arcade,arcadeUtils:t,batchExec:e,aiServices:i,Dictionary:t.Dictionary,Feature:t.arcadeFeature,Voxel:t.Voxel,Pixel:t.Pixel}})()),w5}const H3e=/^([0-9_])/,W3e=/[^a-z0-9_\u0080-\uffff]+/gi;function Z3e(t){return t==null?null:t.trim().replaceAll(W3e,"_").replace(H3e,"F$1")||null}const J3e=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Y3e=["field","normalizationField"];function hH(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(fH(J3e,i,e),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)fH(Y3e,r,e)}}function fH(t,e,i){if(t)for(const r of t){const n=sx(r,e),s=n&&typeof n!="function"&&i.get(n);s&&ur(r,s.name,e)}}function Ane(t,e){if(t!=null&&e?.fields?.length)if("startField"in t){const i=e.get(t.startField),r=e.get(t.endField);t.startField=i?.name??null,t.endField=r?.name??null}else{const i=e.get(t.startTimeField),r=e.get(t.endTimeField);t.startTimeField=i?.name??null,t.endTimeField=r?.name??null}}const _5=new Set;function hk(t,e){return t&&e?(_5.clear(),Uy(_5,t,e),Array.from(_5).sort()):[]}function Uy(t,e,i){if(i)if(e?.fields?.length)if(i.includes("*"))for(const{name:r}of e.fields)t.add(r);else for(const r of i)ts(t,e,r);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const r of i)r!=null&&t.add(r)}}function ts(t,e,i){if(typeof i=="string")if(e){const r=e.get(i);r&&t.add(r.name)}else t.add(i)}function lYe(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}function uYe(t,e,i=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const r=hk(t,e);return r.length/t.fields.length>=i?["*"]:r}async function rs(t,e,i,r){if(!r)return;const n=U3e(r);if(n)ts(t,e,n);else{const{arcadeUtils:s}=await Vy(),o=s.extractFieldNames(r,i?.partitions??e?.fields?.map(u=>u.name));for(const u of o)ts(t,i?.index??e,u)}}async function dF(t,e,i){if(i&&i!=="1=1"){const r=await Sne(i,e);if(!r.isStandardized)throw new L("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});Uy(t,e,r.fieldNames)}}function Q3e({displayField:t,fields:e}){return t||(e?.length?X3e(e):null)}function X3e(t){return S5(t,"name-or-title")||S5(t,"unique-identifier")||S5(t,"type-or-category")||K3e(t)}function K3e(t){for(const e of t){if(!e?.name)continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function S5(t,e){for(const i of t)if(i?.valueType&&i.valueType===e)return i.name;return null}async function cYe(t,e){if(!e)return;const i=e.elevationInfo?.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function eAe(t,e,i){i.onStatisticExpression?rs(t,e,null,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function dYe(t,e,i){if(!e||!i||!("fields"in i))return;const r=[],n=i.popupTemplate;r.push(Ine(t,e,n)),i.fields&&r.push(...i.fields.map(async s=>eAe(t,e.fieldsIndex,s))),await Promise.all(r)}async function pYe(t,e){const{fieldsIndex:i,trackInfo:r}=e;if(!e||!r||!i)return;const n=[r.latestObservations.renderer?.collectRequiredFields(t,i),r.previousObservations.renderer?.collectRequiredFields(t,i),r.trackLines.renderer?.collectRequiredFields(t,i)];r.popupTemplate&&n.push(Ine(t,e,r.popupTemplate));for(const s of[r.latestObservations.labelingInfo,r.previousObservations.labelingInfo,r.trackLines.labelingInfo])if(s)for(const o of s)n.push(Rne(t,i,o));await Promise.all(n)}async function Ine(t,e,i){const r=[];i?.expressionInfos&&r.push(...i.expressionInfos.map(s=>rs(t,e.fieldsIndex,null,s.expression)));const n=i?.content;if(Array.isArray(n))for(const s of n)s.type==="expression"&&s.expressionInfo&&r.push(rs(t,e.fieldsIndex,null,s.expressionInfo.expression));await Promise.all(r)}async function hYe(t,e,i){e&&(e.timeInfo&&i?.timeExtent&&Uy(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&Uy(t,e.fieldsIndex,[e.floorInfo.floorField]),i?.where!=null&&await dF(t,e.fieldsIndex,i.where))}async function fYe(t,e,i){e&&i&&await Promise.all(i.map(r=>tAe(t,e,r)))}async function tAe(t,e,i){e&&i&&(i.valueExpression?await rs(t,e.fieldsIndex,null,i.valueExpression):i.field&&ts(t,e.fieldsIndex,i.field))}function mYe(t){return t?hk(t.fieldsIndex,kne(t)):[]}function iAe(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?hk(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function yYe(t,e,i){if(!e||!i)return;const r=e.fieldsIndex;await Promise.all(i.filters.map(n=>dF(t,r,n.where)))}const rAe=new Set(["oid","global-id","guid"]),nAe=new Set(["oid","global-id"]),sAe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function oAe(t){const e=new Set;One(t).forEach(r=>e.add(r)),iAe(t).forEach(r=>e.add(r.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>e.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>e.add(r.toLowerCase()))),Array.from(e)}function kne(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:r,editDateField:n,editorField:s}=e;return[i,r,n,s].filter(Boolean)}function One(t){return kne(t).map(e=>e.toLowerCase())}function Cne(t,e){return t.editable&&!rAe.has(t.type)&&!One(e).includes(t.name?.toLowerCase()??"")}function aAe(t,e){const i=t.name?.toLowerCase()??"";return!(e?.objectIdField!=null&&i===e.objectIdField.toLowerCase()||e?.globalIdField!=null&&i===e.globalIdField.toLowerCase()||oAe(e).includes(i)||nAe.has(t.type)||sAe.some(r=>r.test(i)))}async function gYe(t,e){const{labelingInfo:i,fieldsIndex:r}=e;i?.length&&await Promise.all(i.map(n=>Rne(t,r,n)))}async function Rne(t,e,i){if(!i)return;const r=i.getLabelExpression(),n=i.where;if(r.type==="arcade")await rs(t,e,null,r.expression);else{const s=r.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{ts(t,e,o.slice(1,-1))})}await dF(t,e,n)}function lAe(t){const e=t.defaultValue;return e!==void 0&&Dne(t,e)?e:t.nullable?null:void 0}function vYe(t){const e=typeof t=="string"?{type:t}:t;return Lne(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function Pne(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function uAe(t){return t===null||Pne(t)}function cAe(t){return t===null||Number.isInteger(t)}function dAe(){return!0}function Dne(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=t.nullable?cAe:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?uAe:Pne;break;case"string":case"esriFieldTypeString":i=t.nullable?R3e:bx;break;default:i=dAe}return arguments.length===1?i:i(e)}const pAe=["integer","small-integer","big-integer","long"],hAe=["single","double"],fAe=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],mAe=["esriFieldTypeSingle","esriFieldTypeDouble"],Nne=new Set([...pAe,...fAe]),yAe=new Set([...hAe,...mAe]),gAe=Vz(Nne,yAe);function vAe(t){return t!=null&&Nne.has(t.type)}function pF(t){return t!=null&&gAe.has(t.type)}function Lne(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function jne(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function bAe(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function wAe(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function zne(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function mH(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function yH(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function bYe(t,e){return _Ae(t,e)===null}function wYe(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function _Ae(t,e){return t==null||t.nullable&&e===null?null:Dne(t,e)?pF(t)&&!SAe(t.type,Number(e))?"numeric-range-validation-error::out-of-range":null:"type-validation-error::invalid-type"}function SAe(t,e){const i=typeof t=="string"?Fne(t):t;if(!i)return!1;const r=i.min,n=i.max;return i.isInteger?Number.isInteger(e)&&e>=r&&e<=n:e>=r&&e<=n}function Fne(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return xAe;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return $Ae;case"esriFieldTypeBigInteger":case"big-integer":return TAe;case"esriFieldTypeSingle":case"single":return EAe;case"esriFieldTypeDouble":case"double":return MAe}}const xAe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},$Ae={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},TAe={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},LT=(2-2**-23)*2**127,EAe={min:-LT,max:LT,isInteger:!1,rawMin:-LT,rawMax:LT},MAe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function _Ye(t,e,i){switch(t){case"domain-validation-error::invalid-coded-value":return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"domain-validation-error::value-out-of-range":return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"type-validation-error::invalid-type":return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case"numeric-range-validation-error::out-of-range":{const{min:r,max:n}=Fne(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${n}`}}}function AAe(t,e){return!IAe(t,e,null)}function IAe(t,e,i){if(!t?.attributes||!e)return!0;const r=new Set(Object.keys(t.attributes));let n=!1;for(const s of e)if(!r.has(s)&&(n=!0,i==null))break;return n}function kAe(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}function hF(t){const e=t?.match(/{[^}]+}/g);return e?e.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}let $M=class extends B{constructor(e){super(e),this.type=null}};l([p({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],$M.prototype,"type",void 0),$M=l([M("esri.popup.content.Content")],$M);const op=$M,jT=new Be({asc:"ascending",desc:"descending"});let F1=class extends Re(B){constructor(e){super(e),this.field=null,this.order="ascending"}};l([p({type:String,json:{write:!0}})],F1.prototype,"field",void 0),l([p({type:jT.apiValues,json:{type:jT.jsonValues,read:jT.read,write:jT.write}})],F1.prototype,"order",void 0),F1=l([M("esri.popup.support.AttachmentsOrderByInfo")],F1);const OAe=F1;let gu=class extends Re(op){constructor(e){super(e),this.attachmentKeywords=null,this.attachmentTypes=null,this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};l([p({type:[String],json:{write:!0}})],gu.prototype,"attachmentKeywords",void 0),l([p({type:[["application","audio","image","model","text","video"]],json:{write:!0}})],gu.prototype,"attachmentTypes",void 0),l([p({type:String,json:{write:!0}})],gu.prototype,"description",void 0),l([p({type:["auto","preview","list"],json:{write:!0}})],gu.prototype,"displayType",void 0),l([p({type:[OAe],json:{write:!0}})],gu.prototype,"orderByFields",void 0),l([p({type:String,json:{write:!0}})],gu.prototype,"title",void 0),l([p({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],gu.prototype,"type",void 0),gu=l([M("esri.popup.content.AttachmentsContent")],gu);const nw=gu;var IN;let fm=IN=class extends op{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new IN({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?z(this.outFields):null})}};l([p()],fm.prototype,"creator",void 0),l([p()],fm.prototype,"destroyer",void 0),l([p()],fm.prototype,"outFields",void 0),l([p({type:["custom"],readOnly:!0})],fm.prototype,"type",void 0),fm=IN=l([M("esri.popup.content.CustomContent")],fm);const CAe=fm;var kN;let Tv=kN=class extends B{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new kN({title:this.title,expression:this.expression})}};l([p({type:String,json:{write:!0}})],Tv.prototype,"title",void 0),l([p({type:String,json:{write:!0}})],Tv.prototype,"expression",void 0),l([p({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Tv.prototype,"returnType",void 0),Tv=kN=l([M("esri.popup.ElementExpressionInfo")],Tv);const RAe=Tv;var ON;let V1=ON=class extends op{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){return new ON({expressionInfo:this.expressionInfo?.clone()})}};l([p({type:RAe,json:{write:!0}})],V1.prototype,"expressionInfo",void 0),l([p({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],V1.prototype,"type",void 0),V1=ON=l([M("esri.popup.content.ExpressionContent")],V1);const fk=V1;let TM=class extends Re(B){constructor(e){super(e),this.type=null}};l([p({type:["date-time","number"],nonNullable:!0,readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],TM.prototype,"type",void 0),TM=l([M("esri.layers.support.FieldFormat")],TM);const fF=TM,Vne="auto";let Yc=class extends fF{constructor(e){super(e),this.dateStyle=null,this.hour12=Vne,this.month=null,this.timeStyle=null,this.type="date-time",this.year=null}};l([p({type:["full","long","medium","short"],json:{write:!0}})],Yc.prototype,"dateStyle",void 0),l([p({type:["always","auto","never"],nonNullable:!0,json:{default:Vne,write:!0}})],Yc.prototype,"hour12",void 0),l([p({type:["long","short"],json:{write:!0}})],Yc.prototype,"month",void 0),l([p({type:["full","long","medium","short"],json:{write:!0}})],Yc.prototype,"timeStyle",void 0),l([p({type:["date-time"]})],Yc.prototype,"type",void 0),l([p({type:["numeric"],json:{write:!0}})],Yc.prototype,"year",void 0),Yc=l([M("esri.layers.support.DateTimeFieldFormat")],Yc);const fy=Yc,gH={min:0,max:20},Une=2,qne=0,Gne="decimal",Bne="auto";let nh=class extends fF{constructor(e){super(e),this.maximumFractionDigits=Une,this.minimumFractionDigits=qne,this.style=Gne,this.type="number",this.useGrouping=Bne}};l([p({type:tt,nonNullable:!0,range:gH,json:{default:Une,write:!0}})],nh.prototype,"maximumFractionDigits",void 0),l([p({type:tt,nonNullable:!0,range:gH,json:{default:qne,write:!0}})],nh.prototype,"minimumFractionDigits",void 0),l([p({type:["decimal"],nonNullable:!0,json:{default:Gne,write:!0}})],nh.prototype,"style",void 0),l([p({type:["number"]})],nh.prototype,"type",void 0),l([p({type:["always","auto","never"],nonNullable:!0,json:{default:Bne,write:!0}})],nh.prototype,"useGrouping",void 0),nh=l([M("esri.layers.support.NumberFieldFormat")],nh);const AA=nh;let Ev=class extends Re(B){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};l([Ae(vxe)],Ev.prototype,"dateFormat",void 0),l([p({type:Boolean,json:{write:!0}})],Ev.prototype,"digitSeparator",void 0),l([p({type:tt,json:{write:!0}})],Ev.prototype,"places",void 0),Ev=l([M("esri.popup.support.FieldInfoFormat")],Ev);const Jd=Ev,Hne={base:fF,key:"type",errorContext:"field-configuration-field-format",typeMap:{"date-time":fy,number:AA}};function PAe(t,e){const{format:i}=t;return e&&ig(e)?i?Wne(i,e):X2(e,{hour12:"always",useGrouping:"always"}):null}function Wne(t,e){const{dateFormat:i}=t;if(!e)return i?bH(t):vH(t);if(!ig(e))return;const r={hour12:"always"};switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return Zne(t);case"single":case"double":return vH(t);case"date":case"timestamp-offset":return i?bH(t):X2(e,r);case"date-only":return i?DAe(t):X2(e);case"time-only":return i?NAe(t):X2(e,r)}}function ig(t){return pF(t)||jne(t)||bAe(t)||zne(t)||wAe(t)}function Zne(t){return new AA({useGrouping:t.digitSeparator?"always":"never"})}function vH(t){const e=Zne(t),{places:i}=t;return e.minimumFractionDigits=i??0,e.maximumFractionDigits=i??2,e}function bH(t){return new fy({dateStyle:Jne(t),year:Kne(t),month:Qne(t),timeStyle:Xne(t),hour12:Yne(t)})}function DAe(t){return new fy({dateStyle:Jne(t),year:Kne(t),month:Qne(t)})}function NAe(t){return new fy({timeStyle:Xne(t),hour12:Yne(t)})}function Jne(t){const{dateFormat:e}=t;return e?e.startsWith("short-date")?"short":e.startsWith("day-short-month-year")?"medium":e.startsWith("long-month-day-year")?"long":e.startsWith("long-date")?"full":null:null}function Yne(t){return t.dateFormat?.endsWith("-24")?"never":"always"}function Qne(t){switch(t.dateFormat){case"short-month-year":return"short";case"long-month-year":return"long";default:return null}}function Xne(t){const{dateFormat:e}=t;return e?e.includes("short-time")?"short":e.includes("long-time")?"medium":null:null}function Kne(t){switch(t.dateFormat){case"short-month-year":case"long-month-year":case"year":return"numeric";default:return null}}function mF(t,e){const i=t.type==="number",r=t.type==="date-time";if(!e)return i?wH(t):r?_H(t):null;if(ig(e))switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return i?ese(t):null;case"single":case"double":return i?wH(t):null;case"date":case"timestamp-offset":return r?_H(t):null;case"date-only":return r?LAe(t):null;case"time-only":return r?jAe(t):null}}function ese(t){return new Jd({digitSeparator:t.useGrouping!=="never"})}function wH(t){const e=ese(t);return e.places=t.maximumFractionDigits,e}function _H(t){let e;const i=tse(t),r=ise(t),n=t.hour12==="never"?"24":null,s=t.year==="numeric"?"year":null,o=rse(t);return i&&r&&n?e=`${i}-${r}-${n}`:i&&r?e=`${i}-${r}`:i?e=i:s&&o?e=`${o}-${s}`:s&&(e=s),e?new Jd({dateFormat:e}):null}function LAe(t){let e;const i=tse(t),r=t.year==="numeric"?"year":null,n=rse(t);return i?e=i:r&&n?e=`${n}-${r}`:r&&(e=r),e?new Jd({dateFormat:e}):null}function jAe(t){let e;const i=ise(t),r=t.hour12==="never"?"24":null;return i&&r?e=`short-date-${i}-${r}`:i&&(e=`short-date-${i}`),e?new Jd({dateFormat:e}):null}function tse(t){switch(t.dateStyle){case"short":return"short-date";case"medium":return"day-short-month-year";case"long":return"long-month-day-year";case"full":return"long-date";default:return}}function ise(t){return t.timeStyle&&(t.timeStyle==="short"?"short-time":"long-time")}function rse(t){switch(t.month){case"short":return"short-month";case"long":return"long-month";default:return}}function X2(t,e){if(!ig(t))return;const i=e?.useGrouping??"auto",r=e?.hour12??"auto";switch(t.type){case"integer":case"small-integer":case"big-integer":case"long":return new AA({minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:i});case"single":case"double":return new AA({minimumFractionDigits:0,maximumFractionDigits:2,useGrouping:i});case"date":case"timestamp-offset":return new fy({dateStyle:"short",timeStyle:"short",hour12:r});case"date-only":return new fy({dateStyle:"short"});case"time-only":return new fy({timeStyle:"short",hour12:r})}}let $o=class extends Re(B){constructor(e){super(e),this.fieldName=null,this.isEditable=!0,this.label=null,this.statisticType=null,this.stringFieldOption="text-box",this.tooltip=null,this.visible=!0}set fieldFormat(e){this._set("fieldFormat",e),this._set("format",e?mF(e):null)}set format(e){this._set("format",e),this._set("fieldFormat",e?Wne(e):null)}readFormat(e,i){if(!i.fieldFormat)return e?Jd.fromJSON(e):null}clone(){const e=super.clone();return e._set("format",this.format?.clone()),e._set("fieldFormat",this.fieldFormat?.clone()),e}};l([p({value:null,clonable:!1,types:Hne,json:{write:{overridePolicy(t,e,i){const{fieldName:r}=this;return{enabled:!!r&&!r.startsWith("expression/")&&!r.startsWith("relationships/")&&!!i?.writeFieldFormat}}}}})],$o.prototype,"fieldFormat",null),l([p({type:String,json:{write:!0}})],$o.prototype,"fieldName",void 0),l([p({value:null,clonable:!1,type:Jd,json:{write:!0}})],$o.prototype,"format",null),l([se("format")],$o.prototype,"readFormat",null),l([p({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],$o.prototype,"isEditable",void 0),l([p({type:String,json:{write:!0}})],$o.prototype,"label",void 0),l([p({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],$o.prototype,"statisticType",void 0),l([Ae(new Be({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],$o.prototype,"stringFieldOption",void 0),l([p({type:String,json:{write:!0}})],$o.prototype,"tooltip",void 0),l([p({type:Boolean,json:{write:!0}})],$o.prototype,"visible",void 0),$o=l([M("esri.popup.FieldInfo")],$o);const mk=$o;var CN;let sh=CN=class extends op{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}clone(){return new CN(z({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};l([p({type:Object,json:{write:!0}})],sh.prototype,"attributes",void 0),l([p({type:String,json:{write:!0}})],sh.prototype,"description",void 0),l([p({type:[mk],json:{write:!0}})],sh.prototype,"fieldInfos",void 0),l([p({type:String,json:{write:!0}})],sh.prototype,"title",void 0),l([p({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],sh.prototype,"type",void 0),sh=CN=l([M("esri.popup.content.FieldsContent")],sh);const sw=sh;let mm=class extends B{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};l([p({type:String,json:{write:!0}})],mm.prototype,"altText",void 0),l([p({type:String,json:{write:!0}})],mm.prototype,"caption",void 0),l([p({type:String,json:{write:!0}})],mm.prototype,"title",void 0),l([p({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],mm.prototype,"type",void 0),mm=l([M("esri.popup.content.mixins.MediaInfo")],mm);const yF=mm;var RN;let ym=RN=class extends _e{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new RN({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};l([p()],ym.prototype,"color",void 0),l([p()],ym.prototype,"fieldName",void 0),l([p()],ym.prototype,"tooltip",void 0),l([p()],ym.prototype,"value",void 0),ym=RN=l([M("esri.popup.content.support.ChartMediaInfoValueSeries")],ym);const zAe=ym;var PN;let oh=PN=class extends B{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new PN({colors:z(this.colors),fields:z(this.fields),normalizeField:this.normalizeField,series:z(this.series),tooltipField:this.tooltipField})}};l([p({type:[Ie],json:{type:[[tt]],write:!0}})],oh.prototype,"colors",void 0),l([p({type:[String],json:{write:{isRequired:!0}}})],oh.prototype,"fields",void 0),l([p({type:String,json:{write:!0}})],oh.prototype,"normalizeField",void 0),l([p({type:[zAe],json:{read:!1}})],oh.prototype,"series",void 0),l([p({type:String,json:{write:!0}})],oh.prototype,"tooltipField",void 0),oh=PN=l([M("esri.popup.content.support.ChartMediaInfoValue")],oh);const FAe=oh;let U1=class extends yF{constructor(e){super(e),this.type=null,this.value=void 0}};l([p({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],U1.prototype,"type",void 0),l([p({type:FAe,json:{write:{isRequired:!0}}})],U1.prototype,"value",void 0),U1=l([M("esri.popup.content.mixins.ChartMediaInfo")],U1);const yk=U1,gk=Fr()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var DN;let EM=DN=class extends yk{constructor(t){super(t),this.type="bar-chart"}clone(){return new DN({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};l([p({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:gk.write,isRequired:!0}}})],EM.prototype,"type",void 0),EM=DN=l([M("esri.popup.content.BarChartMediaInfo")],EM);const nse=EM;var NN;let MM=NN=class extends yk{constructor(t){super(t),this.type="column-chart"}clone(){return new NN({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};l([p({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:gk.write,isRequired:!0}}})],MM.prototype,"type",void 0),MM=NN=l([M("esri.popup.content.ColumnChartMediaInfo")],MM);const sse=MM;var LN;let q1=LN=class extends B{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new LN({linkURL:this.linkURL,sourceURL:this.sourceURL})}};l([p({type:String,json:{write:!0}})],q1.prototype,"linkURL",void 0),l([p({type:String,json:{write:{isRequired:!0}}})],q1.prototype,"sourceURL",void 0),q1=LN=l([M("esri.popup.content.support.ImageMediaInfoValue")],q1);const VAe=q1;var jN;let Mv=jN=class extends yF{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){return new jN({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};l([p({type:Number,json:{write:!0}})],Mv.prototype,"refreshInterval",void 0),l([p({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Mv.prototype,"type",void 0),l([p({type:VAe,json:{write:{isRequired:!0}}})],Mv.prototype,"value",void 0),Mv=jN=l([M("esri.popup.content.ImageMediaInfo")],Mv);const ose=Mv;var zN;let AM=zN=class extends yk{constructor(t){super(t),this.type="line-chart"}clone(){return new zN({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};l([p({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:gk.write,isRequired:!0}}})],AM.prototype,"type",void 0),AM=zN=l([M("esri.popup.content.LineChartMediaInfo")],AM);const ase=AM;var FN;let IM=FN=class extends yk{constructor(t){super(t),this.type="pie-chart"}clone(){return new FN({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};l([p({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:gk.write,isRequired:!0}}})],IM.prototype,"type",void 0),IM=FN=l([M("esri.popup.content.PieChartMediaInfo")],IM);const lse=IM,VN={base:yF,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":nse,"column-chart":sse,"line-chart":ase,"pie-chart":lse,image:ose}};var UN;let ml=UN=class extends op{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?ose.fromJSON(e):e.type==="barchart"?nse.fromJSON(e):e.type==="columnchart"?sse.fromJSON(e):e.type==="linechart"?ase.fromJSON(e):e.type==="piechart"?lse.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new UN(z({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};l([p()],ml.prototype,"activeMediaInfoIndex",void 0),l([p({type:Object,json:{write:!0}})],ml.prototype,"attributes",void 0),l([p({type:String,json:{write:!0}})],ml.prototype,"description",void 0),l([p({types:[VN]})],ml.prototype,"mediaInfos",void 0),l([se("mediaInfos")],ml.prototype,"readMediaInfos",null),l([pe("mediaInfos")],ml.prototype,"writeMediaInfos",null),l([p({type:String,json:{write:!0}})],ml.prototype,"title",void 0),l([p({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],ml.prototype,"type",void 0),ml=UN=l([M("esri.popup.content.MediaContent")],ml);const US=ml;var qN;let G1=qN=class extends B{constructor(t){super(t),this.field=null,this.order=null}clone(){return new qN({field:this.field,order:this.order})}};l([p({type:String,json:{write:!0}})],G1.prototype,"field",void 0),l([p({type:["asc","desc"],json:{write:!0}})],G1.prototype,"order",void 0),G1=qN=l([M("esri.popup.support.RelatedRecordsInfoFieldOrder")],G1);const gF=G1;let vu=class extends Re(op){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};l([p({type:String,json:{write:!0}})],vu.prototype,"description",void 0),l([p({type:Number,json:{type:tt,write:!0}})],vu.prototype,"displayCount",void 0),l([p({type:["list"],json:{write:{isRequired:!0}}})],vu.prototype,"displayType",void 0),l([p({type:[gF],json:{write:!0}})],vu.prototype,"orderByFields",void 0),l([p({type:Number,json:{type:tt,write:{isRequired:!0}}})],vu.prototype,"relationshipId",void 0),l([p({type:String,json:{write:!0}})],vu.prototype,"title",void 0),l([p({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],vu.prototype,"type",void 0),vu=l([M("esri.popup.content.RelationshipContent")],vu);const qS=vu;var GN;let B1=GN=class extends op{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new GN({text:this.text})}};l([p({type:String,json:{write:!0}})],B1.prototype,"text",void 0),l([p({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],B1.prototype,"type",void 0),B1=GN=l([M("esri.popup.content.TextContent")],B1);const GS=B1;let Qc=class extends Re(B){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};l([p({type:String,json:{write:!0}})],Qc.prototype,"title",void 0),l([p({type:String,json:{write:!0}})],Qc.prototype,"description",void 0),l([p({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Qc.prototype,"type",void 0),l([p({type:Number,json:{type:tt,write:!0}})],Qc.prototype,"associatedNetworkSourceId",void 0),l([p({type:Number,json:{type:tt,write:!0}})],Qc.prototype,"associatedAssetGroup",void 0),l([p({type:Number,json:{type:tt,write:!0}})],Qc.prototype,"associatedAssetType",void 0),Qc=l([M("esri.popup.support.UtilityNetworkAssociationType")],Qc);const use=Qc;let ah=class extends Re(op){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};l([p({type:String,json:{write:!0}})],ah.prototype,"description",void 0),l([p({type:Number,json:{type:tt,write:!0}})],ah.prototype,"displayCount",void 0),l([p({type:String,json:{write:!0}})],ah.prototype,"title",void 0),l([p({type:[use],json:{write:!0}})],ah.prototype,"associationTypes",void 0),l([Ae({utilityNetworkAssociations:"utility-network-associations"})],ah.prototype,"type",void 0),ah=l([M("esri.popup.content.UtilityNetworkAssociationsContent")],ah);const vF=ah,UAe={base:null,key:"type",typeMap:{attachment:nw,media:US,text:GS,expression:fk,field:sw,relationship:qS,utilityNetworkAssociations:vF}},qAe={base:null,key:"type",typeMap:{attachment:nw,media:US,text:GS,expression:fk,field:sw,relationship:qS}};var BN;let gm=BN=class extends B{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new BN({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};l([p({type:String,json:{write:!0}})],gm.prototype,"name",void 0),l([p({type:String,json:{write:!0}})],gm.prototype,"title",void 0),l([p({type:String,json:{write:!0}})],gm.prototype,"expression",void 0),l([p({type:["string","number"],json:{write:!0}})],gm.prototype,"returnType",void 0),gm=BN=l([M("esri.popup.ExpressionInfo")],gm);const GAe=gm;var HN;let H1=HN=class extends B{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new HN({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};l([p({type:Boolean,json:{write:!0}})],H1.prototype,"returnTopmostRaster",void 0),l([p({type:Boolean,json:{write:!0}})],H1.prototype,"showNoDataRecords",void 0),H1=HN=l([M("esri.popup.LayerOptions")],H1);const BAe=H1;var WN;let W1=WN=class extends B{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new WN({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?z(this.orderByFields):null})}};l([p({type:Boolean,json:{write:!0}})],W1.prototype,"showRelatedRecords",void 0),l([p({type:[gF],json:{write:!0}})],W1.prototype,"orderByFields",void 0),W1=WN=l([M("esri.popup.RelatedRecordsInfo")],W1);const SH=W1;var ZN;let xa=ZN=class extends lk(_e){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new ZN({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};l([p()],xa.prototype,"active",void 0),l([p()],xa.prototype,"className",void 0),l([p()],xa.prototype,"disabled",void 0),l([p()],xa.prototype,"icon",void 0),l([p()],xa.prototype,"id",void 0),l([p()],xa.prototype,"indicator",void 0),l([p()],xa.prototype,"title",void 0),l([p()],xa.prototype,"type",void 0),l([p()],xa.prototype,"visible",void 0),xa=ZN=l([M("esri.support.actions.ActionBase")],xa);const bF=xa;var JN;let kM=JN=class extends bF{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new JN({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};l([p()],kM.prototype,"image",void 0),kM=JN=l([M("esri.support.actions.ActionButton")],kM);const HAe=kM;var YN;let Z1=YN=class extends bF{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new YN({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};l([p()],Z1.prototype,"image",void 0),l([p()],Z1.prototype,"value",void 0),Z1=YN=l([M("esri.support.actions.ActionToggle")],Z1);const WAe=Z1,r1="relationships/",xH="expression/",ZAe=fe.ofType({key:"type",defaultKeyValue:"button",base:bF,typeMap:{button:HAe,toggle:WAe}}),JAe={base:op,key:"type",typeMap:{media:US,custom:CAe,text:GS,attachments:nw,fields:sw,expression:fk,relationship:qS,utilityNetworkAssociations:vF}},cse=new Set(["attachments","fields","media","text","expression","relationship"]),YAe=new Set([...cse,"utility-network-associations"]);let kr=class extends Re(B){constructor(e){super(e),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>rc(JAe,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Kn(e)?e:(ie.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeWebSceneContent(e,i,r,n){this._writePopupTemplateContent(e,i,n)}writeWebMapContent(e,i,r,n){this._writePopupTemplateContent(e,i,n)}writeFieldInfos(e,i,r,n){const{content:s}=this,o=Array.isArray(s)?s:null,{writeFieldFormat:u,...d}=n||{};if(e){const h=o?o.filter(v=>v.type==="fields"):[],m=h.length&&h.every(v=>v.fieldInfos?.length);i.fieldInfos=e.filter(Boolean).map(v=>{const b=v.toJSON(d);return m&&(b.visible=!1),b})}if(o)for(const h of o)h.type==="fields"&&this._writeFieldsContent(h,i,d)}writeLayerOptions(e,i,r,n){i[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(n)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i,r){const n=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,r,[...n,...this._getContentExpressionInfos(this.content,n)]),Uy(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e,i){const r=new Set;return await this.collectRequiredFields(r,e,i),[...r].sort()}_writePopupTemplateContent(e,i,r){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(n=>r?.origin==="web-scene"?cse.has(n.type):YAe.has(n.type)).map(n=>n?.toJSON(r)),i.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(i):n.type==="media"?this._writeMediaContent(n,i):n.type==="text"?this._writeTextContent(n,i):n.type==="relationship"&&this._writeRelationshipContent(n,i)})):i.description=e}_writeFieldsContent(e,i,r){const n=e.fieldInfos;if(!Array.isArray(n)||!n.length)return;const s=i.fieldInfos;if(Array.isArray(s))for(const o of n){const u=s.find(d=>d.fieldName?.toLowerCase()===o.fieldName?.toLowerCase());u?u.visible=!0:s.push(o.toJSON(r))}else i.fieldInfos=n.map(o=>o.toJSON(r))}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){const r=e.orderByFields?.map(s=>this._toFieldOrderJSON(s,e.relationshipId))||[],n=[...i.relatedRecordsInfo?.orderByFields||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...n?.length&&{orderByFields:n}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=z(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(e,i,r){const n={description:!1,mediaInfos:!1};return r.map(s=>s.type==="media"?(s.mediaInfos||!i||n.mediaInfos||(s.mediaInfos=i,n.mediaInfos=!0),US.fromJSON(s)):s.type==="text"?(s.text||!e||n.description||(s.text=e,n.description=!0),GS.fromJSON(s)):s.type==="attachments"?nw.fromJSON(s):s.type==="fields"?sw.fromJSON(s):s.type==="expression"?fk.fromJSON(s):s.type==="relationship"?qS.fromJSON(s):s.type==="utilityNetworkAssociations"?vF.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:r}=e;if(!i?.startsWith(r1))return null;const n=i.replace(r1,"").split("/");if(n.length!==2)return null;const s=parseInt(n[0],10),o=n[1];return!Number.isNaN(s)&&o?qS.fromJSON({relationshipId:s,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(e,i){const{order:r,field:n}=e;return{field:`${r1}${i}/${n}`,order:r}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:r,relatedRecordsInfo:n={showRelatedRecords:!1}}){const s=[];e?s.push(new GS({text:e})):s.push(new sw),Array.isArray(i)&&i.length&&s.push(US.fromJSON({mediaInfos:i})),r&&s.push(nw.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:u}=n;return o&&u?.length&&u.forEach(d=>{const h=this._toRelationshipContent(d);h&&s.push(h)}),s.length?s:e}_getContentElementFields(e){const i=e?.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((n,s)=>[...n,...this._getMediaInfoFields(s)],[])]}return i==="text"?this._extractFieldNames(e.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:i,title:r,value:n}=e,s=n||{},{fields:o,normalizeField:u,tooltipField:d,sourceURL:h,linkURL:m}=s,v=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(h),...this._extractFieldNames(m),...o??[]];return u&&v.push(u),d&&v.push(d),v}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((r,n)=>[...r,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,i,r,n){n&&await Promise.all(n.map(s=>rs(e,i,r,s.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:i,visible:r})=>!(r!==void 0&&!r||!i||i.startsWith(r1)||i.startsWith(xH))).map(i=>i.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:i,title:r,type:n}=e,s=n==="button"||n==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return hF(e).filter(i=>!(i.startsWith(r1)||i.startsWith(xH)))}};l([p({type:ZAe})],kr.prototype,"actions",void 0),l([p()],kr.prototype,"content",void 0),l([Ct("content")],kr.prototype,"castContent",null),l([se("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],kr.prototype,"readContent",null),l([pe("web-scene","content",{popupElements:{type:fe.ofType(qAe)},showAttachments:{type:Boolean},mediaInfos:{type:fe.ofType(VN)},description:{type:String},relatedRecordsInfo:{type:SH}})],kr.prototype,"writeWebSceneContent",null),l([pe("content",{popupElements:{type:fe.ofType(UAe)},showAttachments:{type:Boolean},mediaInfos:{type:fe.ofType(VN)},description:{type:String},relatedRecordsInfo:{type:SH}})],kr.prototype,"writeWebMapContent",null),l([p({type:[GAe],json:{write:!0}})],kr.prototype,"expressionInfos",void 0),l([p({type:[mk]})],kr.prototype,"fieldInfos",void 0),l([pe("fieldInfos")],kr.prototype,"writeFieldInfos",null),l([p({type:BAe})],kr.prototype,"layerOptions",void 0),l([pe("layerOptions")],kr.prototype,"writeLayerOptions",null),l([p({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],kr.prototype,"lastEditInfoEnabled",void 0),l([p()],kr.prototype,"outFields",void 0),l([p()],kr.prototype,"overwriteActions",void 0),l([p()],kr.prototype,"returnGeometry",void 0),l([p({json:{type:String}})],kr.prototype,"title",void 0),l([pe("title")],kr.prototype,"writeTitle",null),kr=l([M("esri.PopupTemplate")],kr);const Dw=kr,wF=Symbol("idFieldsProviderSymbol");function QAe(t){return!!t&&wF in t}function $H(t){return QAe(t)?t[wF]:void 0}const wx=Symbol("popupProvider");function NYe(t){return typeof t=="object"&&t!==null&&"popupEnabled"in t&&"popupTemplate"in t}function XAe(t){return!!t&&wx in t}function KAe(t){return XAe(t)?t[wx]:null}function LYe(t,e){switch(e.type){case"object-id":case"unique-id-simple":return t.attributes[e.fieldName];case"unique-id-composite":{const i=[];for(const r of e.fieldNames)i.push(t.attributes[r]??null);return JSON.stringify(i)}}}function TH(t,e){if("uniqueIdFields"in e&&e.uniqueIdFields?.length){if(e.uniqueIdFields.length===1)return t.attributes?.[e.uniqueIdFields[0]];const i=e.uniqueIdFields.map(r=>t.attributes?.[r]);return JSON.stringify(i)}return"objectIdField"in e&&e.objectIdField?t.attributes?.[e.objectIdField]:null}const EH=new Be({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let eIe=0,lr=class extends B{constructor(e){super(e),this.id="sym"+eIe++,this.type=null,this.color=new Ie([0,0,0,1])}readColor(e){return e?.[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};l([p({type:EH.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:EH.write,isRequired:!0}}})],lr.prototype,"type",void 0),l([p({type:Ie,json:{write:{allowNull:!0}}})],lr.prototype,"color",void 0),l([se("color")],lr.prototype,"readColor",null),lr=l([M("esri.symbols.Symbol")],lr);var QN;let kn=QN=class extends lr{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){if(this.data?.type==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const r=i.map(n=>{const s=n.valueExpressionInfo;return s?rs(t,e,null,s.expression):null});await Promise.all(r)}}}clone(){return new QN({data:z(this.data)})}hash(){return nX(JSON.stringify(this.data)).toString()}};l([p({json:{write:!1}})],kn.prototype,"color",void 0),l([p({json:{write:!0}})],kn.prototype,"data",void 0),l([se("data",["symbol"])],kn.prototype,"readData",null),l([pe("data",{})],kn.prototype,"writeData",null),l([Ae({CIMSymbolReference:"cim"},{readOnly:!0})],kn.prototype,"type",void 0),kn=QN=l([M("esri.symbols.CIMSymbol")],kn);let $s=class extends B{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,r){e||(i[r]=e)}};l([p({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],$s.prototype,"enabled",void 0),l([pe("enabled")],$s.prototype,"writeEnabled",null),l([p({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],$s.prototype,"type",void 0),$s=l([M("esri.symbols.Symbol3DLayer")],$s);function tIe(t,e){const i=e.transparency!=null?VS(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new Ie([r[0]||0,r[1]||0,r[2]||0,i]):null}function iIe(t,e){e.color=t.toJSON().slice(0,3);const i=ck(t.a);i!==0&&(e.transparency=i)}function Sf(t){return{type:Ie,nonNullable:t?.nonNullable,json:{type:[tt],default:null,read:{source:["color","transparency"],reader:tIe},write:{target:{color:{type:[tt],isRequired:t?.colorRequiredOnWrite},transparency:{type:tt}},writer:iIe}}}}const ac={type:Number,cast:gt,json:{write:!0}};function FYe(t){return t==="emissive"?0:1}let vm=class extends B{constructor(e){super(e),this.color=new Ie([0,0,0,1]),this.extensionLength=0,this.size=Ja(1)}clone(){}cloneProperties(){return{color:z(this.color),size:this.size,extensionLength:this.extensionLength}}};l([p({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],vm.prototype,"type",void 0),l([p(Sf({colorRequiredOnWrite:!0}))],vm.prototype,"color",void 0),l([p({...ac,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],vm.prototype,"extensionLength",void 0),l([p(ac)],vm.prototype,"size",void 0),vm=l([M("esri.symbols.edges.Edges3D")],vm);const _F=vm;var XN;let OM=XN=class extends _F{constructor(t){super(t),this.type="sketch"}clone(){return new XN(this.cloneProperties())}};l([Ae({sketch:"sketch"},{readOnly:!0})],OM.prototype,"type",void 0),OM=XN=l([M("esri.symbols.edges.SketchEdges3D")],OM);const rIe=OM;var KN;let CM=KN=class extends _F{constructor(t){super(t),this.type="solid"}clone(){return new KN(this.cloneProperties())}};l([Ae({solid:"solid"},{readOnly:!0})],CM.prototype,"type",void 0),CM=KN=l([M("esri.symbols.edges.SolidEdges3D")],CM);const dse=CM,pse={types:{key:"type",base:_F,typeMap:{solid:dse,sketch:rIe}},json:{write:!0}};var eL;let I0=eL=class extends B{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const t={strength:this.strength,source:this.source};return new eL(t)}};l([p({json:{write:!1}})],I0.prototype,"strength",void 0),l([p({json:{write:!1}})],I0.prototype,"source",void 0),I0=eL=l([M("esri.symbols.support.Symbol3DEmissive")],I0);var tL;let Vo=tL=class extends B{constructor(t){super(t),this.color=null,this.emissive=new I0({source:"emissive"})}clone(){const t={color:this.color?.clone()??null,emissive:this.emissive?.clone()??null};return new tL(t)}};l([p(Sf())],Vo.prototype,"color",void 0),l([p({type:I0,json:{write:!1}})],Vo.prototype,"emissive",void 0),Vo=tL=l([M("esri.symbols.support.Symbol3DMaterial")],Vo);var iL,db;let wd=(db=class extends $s{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new iL({edges:this.edges?.clone(),enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}},iL=db,db);l([Ae({Extrude:"extrude"},{readOnly:!0})],wd.prototype,"type",void 0),l([p({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],wd.prototype,"size",void 0),l([p({type:Vo,json:{write:!0}})],wd.prototype,"material",void 0),l([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],wd.prototype,"castShadows",void 0),l([p(pse)],wd.prototype,"edges",void 0),wd=iL=l([M("esri.symbols.ExtrudeSymbol3DLayer")],wd);let K2=class extends B{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};l([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],K2.prototype,"type",void 0),K2=l([M("esri.symbols.patterns.LinePattern3D")],K2);const nIe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var rL;const sIe=Fr()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let ey=rL=class extends K2{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new rL(t)}};l([p({type:["style"],json:{write:{isRequired:!0}}})],ey.prototype,"type",void 0),l([Ae(sIe),p({type:nIe,json:{write:{isRequired:!0}}})],ey.prototype,"style",void 0),ey=rL=l([M("esri.symbols.patterns.LineStylePattern3D")],ey);let eS=class extends B{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};l([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],eS.prototype,"type",void 0),eS=l([M("esri.symbols.patterns.Pattern3D")],eS);const oIe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var nL;let k0=nL=class extends eS{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new nL({style:this.style})}};l([p({type:["style"],json:{write:{isRequired:!0}}})],k0.prototype,"type",void 0),l([p({type:oIe,json:{read:!0,write:{isRequired:!0}}})],k0.prototype,"style",void 0),k0=nL=l([M("esri.symbols.patterns.StylePattern3D")],k0);const aIe={types:{key:"type",base:eS,typeMap:{style:k0}},json:{write:!0}},hse={types:{key:"type",base:K2,typeMap:{style:ey}},json:{write:!0}},tS=new Ie("white"),lIe=new Ie([255,255,255,0]);function uIe(t){return t.r===0&&t.g===0&&t.b===0}var sL;let iS=sL=class extends Vo{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color?.clone()??null,colorMixMode:this.colorMixMode,emissive:this.emissive?.clone()??null};return new sL(t)}};l([Ae({multiply:"multiply",replace:"replace",tint:"tint"})],iS.prototype,"colorMixMode",void 0),iS=sL=l([M("esri.symbols.support.Symbol3DFillMaterial")],iS);function On(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function cIe(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function dIe(t,e,i,r,n,s,o,u,d,h,m,v,b,_,x,$){return[t,e,i,r,n,s,o,u,d,h,m,v,b,_,x,$]}const fse=On();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:fse,clone:cIe,create:On,fromValues:dIe},Symbol.toStringTag,{value:"Module"}));function pIe(t){return t<=QQ?new Array(t).fill(0):new Float64Array(t)}function GYe(t){return(mge(t)?t.byteLength/8:t.length)<=QQ?Array.from(t):new Float64Array(t)}function BYe(t,e,i){return Array.isArray(t)?t.slice(e,e+i):t.subarray(e,e+i)}function HYe(t){return[...t]}function WYe(t){const e=On();for(let i=0;i<16;++i)e[i]=t[i];return e}function _x(t=yIe){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function SF(t,e,i,r,n,s,o=_x()){return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function ZYe(t,e=_x()){return hIe(t,0,t.length/3,e)}function hIe(t,e,i,r=_x()){return mse(r,oL),fIe(r,t,e,i),r}function JYe(t,e=pIe(24)){const[i,r,n,s,o,u]=t;return e[0]=i,e[1]=r,e[2]=n,e[3]=i,e[4]=r,e[5]=u,e[6]=i,e[7]=o,e[8]=n,e[9]=i,e[10]=o,e[11]=u,e[12]=s,e[13]=r,e[14]=n,e[15]=s,e[16]=r,e[17]=u,e[18]=s,e[19]=o,e[20]=n,e[21]=s,e[22]=o,e[23]=u,e}function YYe(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new Xe(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function QYe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function XYe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function KYe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function fIe(t,e,i=0,r=e.length/3){let n=t[0],s=t[1],o=t[2],u=t[3],d=t[4],h=t[5];for(let m=0;m<r;m++)n=Math.min(n,e[i+3*m]),s=Math.min(s,e[i+3*m+1]),o=Math.min(o,e[i+3*m+2]),u=Math.max(u,e[i+3*m]),d=Math.max(d,e[i+3*m+1]),h=Math.max(h,e[i+3*m+2]);t[0]=n,t[1]=s,t[2]=o,t[3]=u,t[4]=d,t[5]=h}function eQe(t,e,i){const r=e.length;let n=t[0],s=t[1],o=t[2],u=t[3],d=t[4],h=t[5];if(i)for(let m=0;m<r;m++){const v=e[m];n=Math.min(n,v[0]),s=Math.min(s,v[1]),o=Math.min(o,v[2]),u=Math.max(u,v[0]),d=Math.max(d,v[1]),h=Math.max(h,v[2])}else for(let m=0;m<r;m++){const v=e[m];n=Math.min(n,v[0]),s=Math.min(s,v[1]),u=Math.max(u,v[0]),d=Math.max(d,v[1])}t[0]=n,t[1]=s,t[2]=o,t[3]=u,t[4]=d,t[5]=h}function tQe(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function Sx(t){return t[0]>=t[3]?0:t[3]-t[0]}function xx(t){return t[1]>=t[4]?0:t[4]-t[1]}function $x(t){return t[2]>=t[5]?0:t[5]-t[2]}function iQe(t){const e=Sx(t),i=$x(t),r=xx(t);return Math.sqrt(e*e+i*i+r*r)}function rQe(t,e=[0,0,0]){return e[0]=t[0]+Sx(t)/2,e[1]=t[1]+xx(t)/2,e[2]=t[2]+$x(t)/2,e}function nQe(t,e=[0,0,0]){return e[0]=Sx(t),e[1]=xx(t),e[2]=$x(t),e}function sQe(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function mIe(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function oQe(t,e){return e==null||mIe(t,e)}function aQe(t,e,i,r,n=t){return n[0]=t[0]+e,n[1]=t[1]+i,n[2]=t[2]+r,n[3]=t[3]+e,n[4]=t[4]+i,n[5]=t[5]+r,n}function lQe(t,e,i=t){const r=t[0]+Sx(t)/2,n=t[1]+xx(t)/2,s=t[2]+$x(t)/2;return i[0]=r+(t[0]-r)*e,i[1]=n+(t[1]-n)*e,i[2]=s+(t[2]-s)*e,i[3]=r+(t[3]-r)*e,i[4]=n+(t[4]-n)*e,i[5]=s+(t[5]-s)*e,i}function uQe(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function cQe(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function dQe(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function mse(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function pQe(t){return t?mse(t,oL):_x(oL)}function hQe(t,e=io()){return e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function fQe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function mQe(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=n,t[5]=Number.POSITIVE_INFINITY,t}function MH(t){return t.length===6}function yQe(t){return Sx(t)===0&&xx(t)===0&&$x(t)===0}function gQe(t,e,i){if(t==null||e==null)return t===e;if(!MH(t)||!MH(e))return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const oL=[1/0,1/0,1/0,-1/0,-1/0,-1/0],yIe=[0,0,0,0,0,0];_x();function vQe(t,{isPrimitive:e,width:i,depth:r,height:n}){const s=e?10:1;if(i==null&&n==null&&r==null)return[s*t[0],s*t[1],s*t[2]];const o=Ms(i,r,n);let u;for(let d=0;d<3;d++){const h=o[d];if(h!=null){u=h/t[d];break}}for(let d=0;d<3;d++)o[d]==null&&(o[d]=t[d]*u);return o}const gIe=SF(-.5,-.5,-.5,.5,.5,.5),vIe=SF(-.5,-.5,0,.5,.5,1),bIe=SF(-.5,-.5,0,.5,.5,.5);function bQe(t){switch(t){case"sphere":case"cube":case"diamond":return gIe;case"cylinder":case"cone":case"inverted-cone":return vIe;case"tetrahedron":return bIe;default:return}}const xF=["butt","square","round"],wIe=[...xF,"none"],yse=["miter","bevel","round"];var aL;let bm=aL=class extends B{constructor(t){super(t),this.color=new Ie([0,0,0,1]),this.size=Ja(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new aL(t)}};l([p(Sf({colorRequiredOnWrite:!0}))],bm.prototype,"color",void 0),l([p({...ac,json:{write:{isRequired:!0}}})],bm.prototype,"size",void 0),l([p(hse)],bm.prototype,"pattern",void 0),l([p({type:xF,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],bm.prototype,"patternCap",void 0),bm=aL=l([M("esri.symbols.support.Symbol3DOutline")],bm);var RM,pb;let Wn=(pb=class extends $s{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new RM(e)}static fromSimpleFillSymbol(e){const i=e.outline&&e.outline.style&&e.outline.style!=="solid"?new ey({style:e.outline.style}):null,r={size:e.outline?.width??0,color:(e.outline?.color??tS).clone(),pattern:i};return i&&e.outline?.cap&&(r.patternCap=e.outline.cap),new RM({material:new iS({color:(e.color??lIe).clone()}),pattern:e.style&&e.style!=="solid"?new k0({style:e.style}):null,outline:r})}},RM=pb,pb);l([Ae({Fill:"fill"},{readOnly:!0})],Wn.prototype,"type",void 0),l([p({type:iS,json:{write:!0}})],Wn.prototype,"material",void 0),l([p(aIe)],Wn.prototype,"pattern",void 0),l([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Wn.prototype,"castShadows",void 0),l([p({type:bm,json:{write:!0}})],Wn.prototype,"outline",void 0),l([p(pse)],Wn.prototype,"edges",void 0),Wn=RM=l([M("esri.symbols.FillSymbol3DLayer")],Wn);var lL;const _Ie=Fr()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let wm=lL=class extends B{constructor(t){super(t)}readHref(t,e,i){return t?Zy(t,i):e.dataURI}writeHref(t,e,i,r){t&&(np(t)?e.dataURI=t:(e.href=Oy(t,r),no(e.href)&&(e.href=Zl(e.href))))}clone(){return new lL({href:this.href,primitive:this.primitive})}equals(t){return t.primitive===this.primitive&&t.href===this.href}};l([p({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],wm.prototype,"href",void 0),l([se("href")],wm.prototype,"readHref",null),l([pe("href",{href:{type:String},dataURI:{type:String}})],wm.prototype,"writeHref",null),l([Ae(_Ie)],wm.prototype,"primitive",void 0),wm=lL=l([M("esri.symbols.support.IconSymbol3DLayerResource")],wm);const wQe="circle";let PM=class extends Re(B){constructor(e){super(e),this.mode="hidden"}equals(e){return this.mode===e.mode}};l([p({type:["adaptive","hidden","visible"],json:{write:{isRequired:!0}}})],PM.prototype,"mode",void 0),PM=l([M("esri.symbols.support.OccludedVisibility")],PM);const gse=PM;var uL;let O0=uL=class extends _e{constructor(t){super(t),this.x=0,this.y=0}clone(){return new uL({x:this.x,y:this.y})}equals(t){return t.x===this.x&&t.y===this.y}};l([p({type:Number})],O0.prototype,"x",void 0),l([p({type:Number})],O0.prototype,"y",void 0),O0=uL=l([M("esri.symbols.support.Symbol3DAnchorPosition2D")],O0);var cL;let J1=cL=class extends B{constructor(t){super(t),this.color=new Ie([0,0,0,1]),this.size=Ja(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new cL(t)}equals(t){return t.size===this.size&&(this.color==null?t.color==null:this.color.equals(t.color))}};l([p(Sf({colorRequiredOnWrite:!0}))],J1.prototype,"color",void 0),l([p({...ac,json:{write:{isRequired:!0}}})],J1.prototype,"size",void 0),J1=cL=l([M("esri.symbols.support.Symbol3DIconOutline")],J1);var Av,hb;let pn=(hb=class extends $s{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0,this.occludedVisibility=null}clone(){return new Av({anchor:this.anchor,anchorPosition:z(this.anchorPosition),enabled:this.enabled,material:z(this.material),outline:z(this.outline),resource:z(this.resource),angle:this.angle,size:this.size,occludedVisibility:z(this.occludedVisibility)})}static fromSimpleMarkerSymbol(e){const i=e.color||tS,r=AH(e),n=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||tS).clone()}:null;return new Av({size:e.size,angle:e.angle,resource:{primitive:xIe(()=>ie.getLogger(this.prototype),e.style)},material:{color:i},outline:n,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const i=!e.color||uIe(e.color)?tS:e.color,r=AH(e);return new Av({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:i.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new Av({resource:{href:$K({mediaType:"application/json",data:JSON.stringify(e.data)})}})}},Av=hb,hb);function AH(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,r=IH(t.xoffset),n=IH(t.yoffset);return(r||n)&&e&&i?{x:-r/e,y:n/i}:null}function IH(t){return isFinite(t)?t:0}l([p({type:Vo,json:{write:!0}})],pn.prototype,"material",void 0),l([p({type:wm,json:{write:!0}})],pn.prototype,"resource",void 0),l([Ae({Icon:"icon"},{readOnly:!0})],pn.prototype,"type",void 0),l([p({...ac,json:{write:{isRequired:!0}}})],pn.prototype,"size",void 0),l([Ae({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],pn.prototype,"anchor",void 0),l([p({type:O0,json:{type:[Number],read:{reader:t=>new O0({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],pn.prototype,"anchorPosition",void 0),l([p({type:J1,json:{write:!0}})],pn.prototype,"outline",void 0),l([p({type:Number,json:{write:!0,default:0}})],pn.prototype,"angle",void 0),l([p({type:gse})],pn.prototype,"occludedVisibility",void 0),pn=Av=l([M("esri.symbols.IconSymbol3DLayer")],pn);const SIe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function xIe(t,e){return SIe[e]||(t().warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const $Ie=["begin","end","begin-end"],vse=["arrow","circle","square","diamond","cross","x"];let Cd=class extends Re(B){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};l([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Cd.prototype,"type",void 0),l([p({type:$Ie,json:{default:"begin-end",write:!0}})],Cd.prototype,"placement",void 0),l([p({type:vse,json:{default:"arrow",write:!0}})],Cd.prototype,"style",void 0),l([p({type:Ie,json:{type:[tt],default:null,write:!0}})],Cd.prototype,"color",void 0),Cd=l([M("esri.symbols.LineStyleMarker3D")],Cd);var DM,fb;let vs=(fb=class extends $s{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Ja(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new DM(e)}static fromSimpleLineSymbol(e){const i={enabled:!0,size:e.width??Ja(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new ey({style:e.style}):null,material:new Vo({color:(e.color||tS).clone()}),marker:e.marker?new Cd({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new DM(i)}},DM=fb,fb);l([p({type:Vo,json:{write:!0}})],vs.prototype,"material",void 0),l([Ae({Line:"line"},{readOnly:!0})],vs.prototype,"type",void 0),l([p({type:yse,json:{write:!0,default:"miter"}})],vs.prototype,"join",void 0),l([p({type:xF,json:{write:!0,default:"butt"}})],vs.prototype,"cap",void 0),l([p({...ac,json:{write:{isRequired:!0}}})],vs.prototype,"size",void 0),l([p(hse)],vs.prototype,"pattern",void 0),l([p({types:{key:"type",base:Cd,typeMap:{style:Cd}},json:{write:!0}})],vs.prototype,"marker",void 0),vs=DM=l([M("esri.symbols.LineSymbol3DLayer")],vs);var dL;const TIe=Fr()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Y1=dL=class extends B{clone(){return new dL({href:this.href,primitive:this.primitive})}};l([p({type:String,json:{read:LI,write:Cy}})],Y1.prototype,"href",void 0),l([Ae(TIe)],Y1.prototype,"primitive",void 0),Y1=dL=l([M("esri.symbols.support.ObjectSymbol3DLayerResource")],Y1);const xQe="sphere";var pL;let qm=pL=class extends _e{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new pL({x:this.x,y:this.y,z:this.z})}};l([p({type:Number})],qm.prototype,"x",void 0),l([p({type:Number})],qm.prototype,"y",void 0),l([p({type:Number})],qm.prototype,"z",void 0),qm=pL=l([M("esri.symbols.support.Symbol3DAnchorPosition3D")],qm);var hL,mb;let un=(mb=class extends $s{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new hL({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},hL=mb,mb);l([p({type:Vo,json:{write:!0}})],un.prototype,"material",void 0),l([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],un.prototype,"castShadows",void 0),l([p({type:Y1,json:{write:!0}})],un.prototype,"resource",void 0),l([Ae({Object:"object"},{readOnly:!0})],un.prototype,"type",void 0),l([p({type:Number,json:{write:!0}})],un.prototype,"width",void 0),l([p({type:Number,json:{write:!0}})],un.prototype,"height",void 0),l([p({type:Number,json:{write:!0}})],un.prototype,"depth",void 0),l([Ae({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],un.prototype,"anchor",void 0),l([p({type:qm,json:{type:[Number],read:{reader:t=>new qm({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],un.prototype,"anchorPosition",void 0),l([p({type:Number,json:{write:!0}})],un.prototype,"heading",void 0),l([p({type:Number,json:{write:!0}})],un.prototype,"tilt",void 0),l([p({type:Number,json:{write:!0}})],un.prototype,"roll",void 0),l([p({readOnly:!0})],un.prototype,"isPrimitive",null),un=hL=l([M("esri.symbols.ObjectSymbol3DLayer")],un);var fL,yb;let Mn=(yb=class extends $s{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,i){return e??(i.height==null&&i.size!=null?i.size:void 0)}readHeight(e,i){return e??(i.width==null&&i.size!=null?i.size:void 0)}clone(){return new fL({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},fL=yb,yb);l([p({type:Vo,json:{write:!0}})],Mn.prototype,"material",void 0),l([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Mn.prototype,"castShadows",void 0),l([Ae({Path:"path"},{readOnly:!0})],Mn.prototype,"type",void 0),l([p({type:["circle","quad"],nonNullable:!0,json:{write:!0,default:"circle"}})],Mn.prototype,"profile",void 0),l([p({type:yse,nonNullable:!0,json:{write:!0,default:"miter"}})],Mn.prototype,"join",void 0),l([p({type:wIe,nonNullable:!0,json:{write:!0,default:"butt"}})],Mn.prototype,"cap",void 0),l([p({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Mn.prototype,"width",void 0),l([se("width",["width","size","height"])],Mn.prototype,"readWidth",null),l([p({type:Number,json:{write:!0}})],Mn.prototype,"height",void 0),l([se("height",["height","size","width"])],Mn.prototype,"readHeight",null),l([p({type:["center","bottom","top"],nonNullable:!0,json:{write:!0,default:"center"}})],Mn.prototype,"anchor",void 0),l([p({type:["heading","all"],nonNullable:!0,json:{write:!0,default:"all"}})],Mn.prototype,"profileRotation",void 0),Mn=fL=l([M("esri.symbols.PathSymbol3DLayer")],Mn);const EIe=["none","underline","line-through"],MIe=["normal","italic","oblique"],AIe=["normal","lighter","bold","bolder"],bse={type:Number,cast:t=>{const e=_s(t);return e===0?1:Qr(e,.1,4)},nonNullable:!0},IIe=["left","right","center"],kIe=["baseline","top","middle","bottom"],wse={type:IIe,nonNullable:!0},_se={type:kIe,nonNullable:!0},$Qe=8;var mL;let ka=mL=class extends B{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return gt(t)}clone(){return new mL({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};l([p({type:EIe,json:{default:"none",write:!0}})],ka.prototype,"decoration",void 0),l([p({type:String,json:{write:!0}})],ka.prototype,"family",void 0),l([p({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],ka.prototype,"size",void 0),l([Ct("size")],ka.prototype,"castSize",null),l([p({type:MIe,json:{default:"normal",write:!0}})],ka.prototype,"style",void 0),l([p({type:AIe,json:{default:"normal",write:!0}})],ka.prototype,"weight",void 0),ka=mL=l([M("esri.symbols.Font")],ka);var yL;let C0=yL=class extends B{constructor(){super(...arguments),this.color=new Ie([0,0,0,1]),this.size=0}clone(){const t={color:z(this.color),size:this.size};return new yL(t)}};l([p(Sf())],C0.prototype,"color",void 0),l([p(ac)],C0.prototype,"size",void 0),C0=yL=l([M("esri.symbols.support.Symbol3DHalo")],C0);let rS=class extends Re(B){constructor(e){super(e),this.color=null}};l([p(Sf())],rS.prototype,"color",void 0),rS=l([M("esri.symbols.support.Symbol3DTextBackground")],rS);var NM,gb;let Pr=(gb=class extends $s{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline",this.occludedVisibility=null}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,i,r,n){const s={...n,textSymbol3D:!0};i.font=e.write({},s),delete i.font.size}get size(){return this._userSize!=null?this._userSize:this.font?.size!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new NM({enabled:this.enabled,font:z(this.font),halo:z(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:z(this.background),occludedVisibility:z(this.occludedVisibility)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new NM({font:e.font!=null?e.font.clone():new ka,halo:OIe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Vo({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new rS({color:e.backgroundColor.clone()}):null})}},NM=gb,gb);function OIe(t,e){return t&&e!=null&&e>0?new C0({color:z(t),size:e}):null}l([p({type:ka,json:{write:!0}})],Pr.prototype,"font",null),l([pe("font")],Pr.prototype,"writeFont",null),l([p({type:C0,json:{write:!0}})],Pr.prototype,"halo",void 0),l([p({...wse,json:{default:"center",write:!0}})],Pr.prototype,"horizontalAlignment",void 0),l([p({...bse,json:{default:1,write:!0}})],Pr.prototype,"lineHeight",void 0),l([p({type:Vo,json:{write:!0}})],Pr.prototype,"material",void 0),l([p({type:rS,json:{write:!0}})],Pr.prototype,"background",void 0),l([p(ac)],Pr.prototype,"size",null),l([p({type:String,json:{write:!0}})],Pr.prototype,"text",void 0),l([Ae({Text:"text"},{readOnly:!0})],Pr.prototype,"type",void 0),l([p({..._se,json:{default:"baseline",write:!0}})],Pr.prototype,"verticalAlignment",void 0),l([p({type:gse})],Pr.prototype,"occludedVisibility",void 0),Pr=NM=l([M("esri.symbols.TextSymbol3DLayer")],Pr);var gL,vb;let _d=(vb=class extends $s{constructor(e){super(e),this.color=vL.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new gL({color:this.color.clone(),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},gL=vb,vb);l([p({type:Ie,nonNullable:!0,json:{type:[tt],write:(t,e,i)=>e[i]=t.toArray(1),default:()=>vL.clone(),defaultEquals:t=>t.toCss(!0)===vL.toCss(!0)}})],_d.prototype,"color",void 0),l([Ae({Water:"water"},{readOnly:!0})],_d.prototype,"type",void 0),l([p({type:["small","medium","large"],json:{write:!0,default:"medium"}})],_d.prototype,"waterbodySize",void 0),l([p({type:Number,json:{write:!0,default:null}})],_d.prototype,"waveDirection",void 0),l([p({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],_d.prototype,"waveStrength",void 0),_d=gL=l([M("esri.symbols.WaterSymbol3DLayer")],_d);const vL=new Ie([0,119,190]);var bL;let Rd=bL=class extends _e{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new bL({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};l([p({type:String})],Rd.prototype,"name",void 0),l([p({type:String})],Rd.prototype,"styleUrl",void 0),l([p({type:String})],Rd.prototype,"styleName",void 0),l([p({type:de})],Rd.prototype,"portal",void 0),Rd=bL=l([M("esri.symbols.support.StyleOrigin")],Rd);var wL;let nS=wL=class extends _e{constructor(){super(...arguments),this.url=""}clone(){return new wL({url:this.url})}};l([p({type:String})],nS.prototype,"url",void 0),nS=wL=l([M("esri.symbols.support.Thumbnail")],nS);const Sse={icon:pn,object:un,line:vs,path:Mn,fill:Wn,extrude:wd,text:Pr,water:_d},CIe=fe.ofType({base:$s,key:"type",typeMap:Sse,errorContext:"symbol-layer"});let Js=class extends lr{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=i?.type,n=r||fe;this._set("symbolLayers",new n)}get color(){return null}set color(e){this.constructed&&ie.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Ql(e,this._get("symbolLayers"))}readStyleOrigin(e,i,r){if(e.styleUrl&&e.name){const n=Zy(e.styleUrl,r);return new Rd({styleUrl:n,name:e.name})}if(e.styleName&&e.name)return new Rd({portal:r?.portal||de.getDefault(),styleName:e.styleName,name:e.name});r?.messages&&r.messages.push(new Jo("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,i,r,n){if(e.styleUrl&&e.name){let s=Oy(e.styleUrl,n);no(s)&&(s=Zl(s)),i.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&n?.portal&&!xK(e.portal.restUrl,n.portal.restUrl)?n?.messages&&n.messages.push(new Jo("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof $s||e&&Sse[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};l([p({json:{read:!1,write:!1}})],Js.prototype,"color",null),l([p({type:CIe,nonNullable:!0,json:{write:!0}}),Ct(jie)],Js.prototype,"symbolLayers",null),l([p({type:Rd})],Js.prototype,"styleOrigin",void 0),l([se("styleOrigin")],Js.prototype,"readStyleOrigin",null),l([pe("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Js.prototype,"writeStyleOrigin",null),l([p({type:nS,json:{read:!1}})],Js.prototype,"thumbnail",void 0),l([p({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Js.prototype,"type",void 0),Js=l([M("esri.symbols.Symbol3D")],Js);let R0=class extends B{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};l([p({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],R0.prototype,"type",void 0),l([p({readOnly:!0})],R0.prototype,"visible",void 0),R0=l([M("esri.symbols.callouts.Callout3D")],R0);var _L;let LM=_L=class extends B{constructor(t){super(t),this.color=new Ie("white")}clone(){return new _L({color:z(this.color)})}};l([p(Sf({colorRequiredOnWrite:!0}))],LM.prototype,"color",void 0),LM=_L=l([M("esri.symbols.callouts.LineCallout3DBorder")],LM);const RIe=LM;var SL;let Sd=SL=class extends R0{constructor(t){super(t),this.type="line",this.color=new Ie([0,0,0,1]),this.size=Ja(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new SL({color:z(this.color),size:this.size,border:z(this.border)})}};l([Ae({line:"line"})],Sd.prototype,"type",void 0),l([p(Sf({colorRequiredOnWrite:!0}))],Sd.prototype,"color",void 0),l([p({...ac,json:{write:{isRequired:!0}}})],Sd.prototype,"size",void 0),l([p({type:RIe,json:{write:!0}})],Sd.prototype,"border",void 0),l([p({readOnly:!0})],Sd.prototype,"visible",null),Sd=SL=l([M("esri.symbols.callouts.LineCallout3D")],Sd);function $F(t){if(!t)return!1;const e=t.verticalOffset;return!(!e||e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function xse(t){return!t||!t.supportsCallout||!t.supportsCallout()?!1:!!t.callout?.visible&&!!$F(t)}function AQe(t){return t.type==="point-3d"||t.type==="label-3d"}function IQe(t){return t.horizontalAlignment==="center"}const $se={types:{key:"type",base:R0,typeMap:{line:Sd}},json:{write:!0}};var xL;let Rh=xL=class extends B{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new xL({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};l([p({...ac,json:{write:{isRequired:!0}}})],Rh.prototype,"screenLength",void 0),l([p({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Rh.prototype,"minWorldLength",void 0),l([p({type:Number,json:{write:!0}})],Rh.prototype,"maxWorldLength",void 0),Rh=xL=l([M("esri.symbols.support.Symbol3DVerticalOffset")],Rh);var jM;const Tse=fe.ofType({base:null,key:"type",typeMap:{text:Pr}});let Il=jM=class extends Js{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Tse,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return xse(this)}hasVisibleVerticalOffset(){return $F(this)}clone(){return new jM({styleOrigin:z(this.styleOrigin),symbolLayers:z(this.symbolLayers),thumbnail:z(this.thumbnail),callout:z(this.callout),verticalOffset:z(this.verticalOffset)})}static fromTextSymbol(t){return new jM({symbolLayers:new fe([Pr.fromTextSymbol(t)])})}};l([p({type:Rh,json:{write:!0}})],Il.prototype,"verticalOffset",void 0),l([p($se)],Il.prototype,"callout",void 0),l([p({json:{read:!1,write:!1}})],Il.prototype,"styleOrigin",void 0),l([p({type:Tse})],Il.prototype,"symbolLayers",void 0),l([Ae({LabelSymbol3D:"label-3d"},{readOnly:!0})],Il.prototype,"type",void 0),Il=jM=l([M("esri.symbols.LabelSymbol3D")],Il);var zM;const Ese=fe.ofType({base:null,key:"type",typeMap:{line:vs,path:Mn}}),PIe=fe.ofType({base:null,key:"type",typeMap:{line:vs,path:Mn}});let Gl=zM=class extends Js{constructor(t){super(t),this.symbolLayers=new Ese,this.type="line-3d"}clone(){return new zM({styleOrigin:z(this.styleOrigin),symbolLayers:z(this.symbolLayers),thumbnail:z(this.thumbnail)})}static fromSimpleLineSymbol(t){return new zM({symbolLayers:new fe([vs.fromSimpleLineSymbol(t)])})}};l([p({type:Ese,json:{type:PIe}})],Gl.prototype,"symbolLayers",void 0),l([Ae({LineSymbol3D:"line-3d"},{readOnly:!0})],Gl.prototype,"type",void 0),Gl=zM=l([M("esri.symbols.LineSymbol3D")],Gl);var FM;const Mse=fe.ofType({base:null,key:"type",typeMap:{fill:Wn}});let Zu=FM=class extends Js{constructor(t){super(t),this.symbolLayers=new Mse,this.type="mesh-3d"}clone(){return new FM({styleOrigin:z(this.styleOrigin),symbolLayers:z(this.symbolLayers),thumbnail:z(this.thumbnail)})}static fromSimpleFillSymbol(t){return new FM({symbolLayers:new fe([Wn.fromSimpleFillSymbol(t)])})}};l([p({type:Mse})],Zu.prototype,"symbolLayers",void 0),l([Ae({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Zu.prototype,"type",void 0),Zu=FM=l([M("esri.symbols.MeshSymbol3D")],Zu);let Q1=class extends lr{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};l([Ae({esriSLS:"simple-line"},{readOnly:!0})],Q1.prototype,"type",void 0),l([p({type:Number,cast:gt,json:{write:!0}})],Q1.prototype,"width",void 0),Q1=l([M("esri.symbols.LineSymbol")],Q1);var $L;let bu=$L=class extends B{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,r){e[i]=r?.origin==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t?.[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,r){r?.origin==="web-map"||(e[i]=t)}clone(){return new $L({color:z(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};l([p({type:["begin","end","begin-end"],json:{write:!0}})],bu.prototype,"placement",void 0),l([Ae({"line-marker":"line-marker"},{readOnly:!0}),p({json:{origins:{"web-map":{write:!1}}}})],bu.prototype,"type",void 0),l([p({type:vse})],bu.prototype,"style",void 0),l([pe("style")],bu.prototype,"writeStyle",null),l([p({type:Ie,value:null,json:{write:{allowNull:!0}}})],bu.prototype,"color",null),l([se("color")],bu.prototype,"readColor",null),l([pe("color")],bu.prototype,"writeColor",null),bu=$L=l([M("esri.symbols.LineSymbolMarker")],bu);const DIe=bu;var TL;const x5=new Be({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Bi=TL=class extends Q1{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,r,n,s){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),i!=null&&(o.width=gt(i)),r!=null&&(o.cap=r),n!=null&&(o.join=n),s!=null&&(o.miterLimit=gt(s)),o}clone(){return new TL({color:z(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};l([Ae({esriSLS:"simple-line"},{readOnly:!0})],Bi.prototype,"type",void 0),l([p({type:x5.apiValues,json:{read:x5.read,write:x5.write}})],Bi.prototype,"style",void 0),l([p({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&i?.origin==null})}}})],Bi.prototype,"cap",void 0),l([p({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&i?.origin==null})}}})],Bi.prototype,"join",void 0),l([p({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":DIe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Bi.prototype,"marker",void 0),l([p({type:Number,json:{read:!1,write:!1}})],Bi.prototype,"miterLimit",void 0),Bi=TL=l([M("esri.symbols.SimpleLineSymbol")],Bi);let P0=class extends lr{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline?.hash()}`}};l([p({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Bi}},json:{default:null,write:!0}})],P0.prototype,"outline",void 0),l([p({type:["simple-fill","picture-fill"],readOnly:!0})],P0.prototype,"type",void 0),P0=l([M("esri.symbols.FillSymbol")],P0);function NIe(t,e,i){return e.imageData?$K({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):Ase(e.url,i)}function Ase(t,e){if(!no(t)){const i=jIe(e);if(i)return Iy(i,"images",t)}return Zy(t,e)}function LIe(t,e,i,r){if(np(t)){const n=ky(t);if(!n)return;e.contentType=n.mediaType,e.imageData=n.data,i&&i.imageData===e.imageData&&i.url&&Cy(i.url,e,"url",r)}else Cy(t,e,"url",r)}const Ise={json:{read:{source:["imageData","url"],reader:NIe},write:{writer(t,e,i,r){LIe(t,e,this.source,r)}}}},kse={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=Ase(e.url,i)),r}}}};function jIe(t){if(!t)return null;const{origin:e,layer:i}=t;if(e!=="service"&&e!=="portal-item")return null;const r=i?.type;return r==="feature"||r==="stream"?i.parsedUrl?.path:r==="map-image"||r==="tile"?t.url?.path:null}var EL;let Hs=EL=class extends P0{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const n={};return t&&(n.url=t),e&&(n.outline=e),i!=null&&(n.width=gt(i)),r!=null&&(n.height=gt(r)),n}clone(){const t=new EL({color:z(this.color),height:this.height,outline:z(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",z(this.source)),t}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};l([Ae({esriPFS:"picture-fill"},{readOnly:!0})],Hs.prototype,"type",void 0),l([p(Ise)],Hs.prototype,"url",void 0),l([p({type:Number,json:{write:!0}})],Hs.prototype,"xscale",void 0),l([p({type:Number,json:{write:!0}})],Hs.prototype,"yscale",void 0),l([p({type:Number,cast:gt,json:{write:!0}})],Hs.prototype,"width",void 0),l([p({type:Number,cast:gt,json:{write:!0}})],Hs.prototype,"height",void 0),l([p({type:Number,cast:gt,json:{write:!0}})],Hs.prototype,"xoffset",void 0),l([p({type:Number,cast:gt,json:{write:!0}})],Hs.prototype,"yoffset",void 0),l([p(kse)],Hs.prototype,"source",void 0),Hs=EL=l([M("esri.symbols.PictureFillSymbol")],Hs);let xd=class extends lr{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};l([p({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],xd.prototype,"angle",void 0),l([p({type:["simple-marker","picture-marker"],readOnly:!0})],xd.prototype,"type",void 0),l([p({type:Number,cast:gt,json:{write:!0}})],xd.prototype,"xoffset",void 0),l([p({type:Number,cast:gt,json:{write:!0}})],xd.prototype,"yoffset",void 0),l([p({cast:t=>t==="auto"?t:_s(gt(t)),json:{write:!0}})],xd.prototype,"size",void 0),xd=l([M("esri.symbols.MarkerSymbol")],xd);var ML;let gs=ML=class extends xd{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=gt(e)),i!=null&&(r.height=gt(i)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new ML({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",z(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};l([p({json:{write:!1}})],gs.prototype,"color",void 0),l([Ae({esriPMS:"picture-marker"},{readOnly:!0})],gs.prototype,"type",void 0),l([p(Ise)],gs.prototype,"url",void 0),l([p(kse)],gs.prototype,"source",void 0),l([p({type:Number,cast:gt,json:{write:!0}})],gs.prototype,"height",void 0),l([se("height",["height","size"])],gs.prototype,"readHeight",null),l([p({type:Number,cast:gt,json:{write:!0}})],gs.prototype,"width",void 0),l([p({json:{write:!1}})],gs.prototype,"size",void 0),gs=ML=l([M("esri.symbols.PictureMarkerSymbol")],gs);var _m;const Ose=fe.ofType({base:null,key:"type",typeMap:{icon:pn,object:un,text:Pr}});let Ss=_m=class extends Js{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new Ose,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return xse(this)}hasVisibleVerticalOffset(){return $F(this)}clone(){return new _m({verticalOffset:z(this.verticalOffset),callout:z(this.callout),styleOrigin:z(this.styleOrigin),symbolLayers:z(this.symbolLayers),thumbnail:z(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new _m({symbolLayers:new fe([pn.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new _m({symbolLayers:new fe([pn.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){if(t.data?.symbol?.type!=="CIMPointSymbol")return null;const i=t.data.symbol;return new _m(i?.callout?{symbolLayers:new fe([pn.fromCIMSymbol(t)]),callout:new Sd({size:.5,color:new Ie([0,0,0])}),verticalOffset:new Rh({screenLength:40})}:{symbolLayers:new fe([pn.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new _m({symbolLayers:new fe([Pr.fromTextSymbol(t)])})}};l([p({type:Rh,json:{write:!0}})],Ss.prototype,"verticalOffset",void 0),l([p($se)],Ss.prototype,"callout",void 0),l([p({type:Ose,json:{origins:{"web-scene":{write:!0}}}})],Ss.prototype,"symbolLayers",void 0),l([Ae({PointSymbol3D:"point-3d"},{readOnly:!0})],Ss.prototype,"type",void 0),Ss=_m=l([M("esri.symbols.PointSymbol3D")],Ss);var X1;const Cse=fe.ofType({base:null,key:"type",typeMap:{extrude:wd,fill:Wn,icon:pn,line:vs,object:un,text:Pr,water:_d}});let Ua=X1=class extends Js{constructor(t){super(t),this.symbolLayers=new Cse,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&of(ie.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&of(ie.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(Wo(()=>this.symbolLayers,"after-add",({item:e})=>t(e),Zo))}clone(){return new X1({styleOrigin:z(this.styleOrigin),symbolLayers:z(this.symbolLayers),thumbnail:z(this.thumbnail)})}static fromJSON(t){const e=new X1;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const i=e.symbolLayers.at(0),r=e.symbolLayers.at(1);!r.enabled||t.symbolLayers?.[1]&&t.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:r.material!=null?r.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new X1({symbolLayers:new fe([Wn.fromSimpleFillSymbol(t)])})}};l([p({type:Cse,json:{write:!0}})],Ua.prototype,"symbolLayers",void 0),l([Ae({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Ua.prototype,"type",void 0),Ua=X1=l([M("esri.symbols.PolygonSymbol3D")],Ua);var AL;const $5=new Be({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Ks=AL=class extends P0{constructor(...t){super(...t),this.color=new Ie([0,0,0,.25]),this.outline=new Bi,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),i&&(r.color=i),r}clone(){return new AL({color:z(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};l([p()],Ks.prototype,"color",void 0),l([p()],Ks.prototype,"outline",void 0),l([Ae({esriSFS:"simple-fill"},{readOnly:!0})],Ks.prototype,"type",void 0),l([p({type:$5.apiValues,json:{read:$5.read,write:$5.write}})],Ks.prototype,"style",void 0),Ks=AL=l([M("esri.symbols.SimpleFillSymbol")],Ks);var IL;const T5=new Be({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let wr=IL=class extends xd{constructor(...t){super(...t),this.color=new Ie([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Bi}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string")return t;const n={};return t&&(n.style=t),e!=null&&(n.size=gt(e)),i&&(n.outline=i),r&&(n.color=r),n}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new IL({angle:this.angle,color:z(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};l([p()],wr.prototype,"color",void 0),l([pe("color")],wr.prototype,"writeColor",null),l([Ae({esriSMS:"simple-marker"},{readOnly:!0})],wr.prototype,"type",void 0),l([p()],wr.prototype,"size",void 0),l([p({type:T5.apiValues,json:{read:T5.read,write:T5.write}})],wr.prototype,"style",void 0),l([p({type:String,json:{write:!0}})],wr.prototype,"path",null),l([p({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Bi}},json:{default:null,write:!0}})],wr.prototype,"outline",void 0),wr=IL=l([M("esri.symbols.SimpleMarkerSymbol")],wr);var kL;let Ut=kL=class extends lr{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new ka,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),i&&(r.color=i),r}writeLineWidth(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}castLineWidth(t){return gt(t)}writeLineHeight(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}clone(){return new kL({angle:this.angle,backgroundColor:z(this.backgroundColor),borderLineColor:z(this.borderLineColor),borderLineSize:this.borderLineSize,color:z(this.color),font:this.font&&this.font.clone(),haloColor:z(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};l([p({type:Ie,json:{write:!0}})],Ut.prototype,"backgroundColor",void 0),l([p({type:Ie,json:{write:!0}})],Ut.prototype,"borderLineColor",void 0),l([p({type:Number,json:{write:!0},cast:gt})],Ut.prototype,"borderLineSize",void 0),l([p({type:ka,json:{write:!0}})],Ut.prototype,"font",void 0),l([p({...wse,json:{write:!0}})],Ut.prototype,"horizontalAlignment",void 0),l([p({type:Boolean,json:{write:!0}})],Ut.prototype,"kerning",void 0),l([p({type:Ie,json:{write:!0}})],Ut.prototype,"haloColor",void 0),l([p({type:Number,cast:gt,json:{write:!0}})],Ut.prototype,"haloSize",void 0),l([p({type:Boolean,json:{write:!0}})],Ut.prototype,"rightToLeft",void 0),l([p({type:Boolean,json:{write:!0}})],Ut.prototype,"rotated",void 0),l([p({type:String,json:{write:!0}})],Ut.prototype,"text",void 0),l([Ae({esriTS:"text"},{readOnly:!0})],Ut.prototype,"type",void 0),l([p({..._se,json:{write:!0}})],Ut.prototype,"verticalAlignment",void 0),l([p({type:Number,cast:gt,json:{write:!0}})],Ut.prototype,"xoffset",void 0),l([p({type:Number,cast:gt,json:{write:!0}})],Ut.prototype,"yoffset",void 0),l([p({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Ut.prototype,"angle",void 0),l([p({type:Number,json:{write:!0}})],Ut.prototype,"width",void 0),l([p({type:Number})],Ut.prototype,"lineWidth",void 0),l([pe("lineWidth")],Ut.prototype,"writeLineWidth",null),l([Ct("lineWidth")],Ut.prototype,"castLineWidth",null),l([p(bse)],Ut.prototype,"lineHeight",void 0),l([pe("lineHeight")],Ut.prototype,"writeLineHeight",null),Ut=kL=l([M("esri.symbols.TextSymbol")],Ut);var OL;let An=OL=class extends lr{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:de.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e?.portal,super.read(t,e)}clone(){return new OL({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol(t)}async fetchCIMSymbol(t){KX(ie.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const e=await this._fetchSymbol({...t,acceptedFormats:["cim"]});if(e?.type!=="cim")throw new L("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return e}async _fetchSymbol(t){const e=t!=null?t.cache:null,i=e?this._fetchCacheKey:null;if(e!=null){const o=i&&e.get(i);if(o)return o.clone()}const{resolveWebStyleSymbol:r}=await H(()=>import("./webStyleSymbolUtils-B6O1mKeN.js"),__vite__mapDeps([177,178]));ft(t);const n=r(this,{portal:this.portal},t);n.catch(o=>{ie.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)});const s=await n;return e?.set(i,s.clone()),s}};l([p({json:{write:!1}})],An.prototype,"color",void 0),l([p({type:String,json:{write:!0}})],An.prototype,"styleName",void 0),l([p({type:de,json:{write:!1}})],An.prototype,"portal",void 0),l([p({type:String,json:{read:LI,write:Cy}})],An.prototype,"styleUrl",void 0),l([p({type:nS,json:{read:!1}})],An.prototype,"thumbnail",void 0),l([p({type:String,json:{write:!0}})],An.prototype,"name",void 0),l([Ae({styleSymbolReference:"web-style"},{readOnly:!0})],An.prototype,"type",void 0),l([p()],An.prototype,"_fetchCacheKey",null),An=OL=l([M("esri.symbols.WebStyleSymbol")],An);function RQe(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Rse(t){switch(t?.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const zo={base:lr,key:"type",typeMap:{"simple-fill":Ks,"picture-fill":Hs,"picture-marker":gs,"simple-line":Bi,"simple-marker":wr,text:Ut,"label-3d":Il,"line-3d":Gl,"mesh-3d":Zu,"point-3d":Ss,"polygon-3d":Ua,"web-style":An,cim:kn},errorContext:"symbol"},PQe={base:lr,key:"type",typeMap:{"picture-marker":gs,"simple-marker":wr,"point-3d":Ss,cim:kn},errorContext:"symbol"},DQe={base:lr,key:"type",typeMap:{"simple-line":Bi,"line-3d":Gl,cim:kn},errorContext:"symbol"},NQe={base:lr,key:"type",typeMap:{"simple-fill":Ks,"picture-fill":Hs,"polygon-3d":Ua,cim:kn},errorContext:"symbol"},zIe={base:lr,key:"type",typeMap:{"picture-marker":gs,"simple-marker":wr,text:Ut,"web-style":An,cim:kn},errorContext:"symbol"},FIe=Sw({types:zo}),Pse={base:lr,key:"type",typeMap:{"simple-fill":Ks,"picture-fill":Hs,"picture-marker":gs,"simple-line":Bi,"simple-marker":wr,text:Ut,"line-3d":Gl,"mesh-3d":Zu,"point-3d":Ss,"polygon-3d":Ua,"web-style":An,cim:kn},errorContext:"symbol"},VIe={base:lr,key:"type",typeMap:{text:Ut,"label-3d":Il},errorContext:"symbol"},kH={base:lr,key:"type",typeMap:{"line-3d":Gl,"mesh-3d":Zu,"point-3d":Ss,"polygon-3d":Ua,"web-style":An,cim:kn},errorContext:"symbol"},UIe={base:lr,key:"type",typeMap:{"label-3d":Il},errorContext:"symbol"},Dse=rc(zo);var CL;function qIe(t){if(!t)return null;const e={};for(const i in t){const r=oc(t[i]);r&&(e[i]=r)}return Object.keys(e).length!==0?e:null}function GIe(t){if(t==null)return null;const e={};for(const i in t){const r=t[i];r&&(e[i]=r.toJSON())}return Object.keys(e).length!==0?e:null}var bb;let Ti=(bb=class extends Re(B){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:QE(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&g0e(ie.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const i=this._get("aggregateGeometries");JSON.stringify(i)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const i=this._get("attributes");i!==e&&(this._set("attributes",e),this._notifyLayer("attributes",i,e))}set geometry(e){const i=this._get("geometry");i!==e&&(this._set("geometry",e),e?.type!=="mesh"&&this._notifyLayer("geometry",i,e))}set popupTemplate(e){const i=this._get("popupTemplate");i!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",i,e))}set symbol(e){const i=this._get("symbol");i!==e&&(this._set("symbol",e),this._notifyLayer("symbol",i,e))}get version(){return this._version}set visible(e){const i=this._get("visible");i!==e&&(this._set("visible",e),this._notifyLayer("visible",i,e))}cloneShallow(){return new CL({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const i=KAe(this.origin);if(i)return i.popupTemplate??(e?i.defaultPopupTemplate:null)??null;const r=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const n of[r,this.sourceLayer,this.layer])if(n&&typeof n=="object"){if("popupTemplate"in n&&n.popupTemplate)return n.popupTemplate;if(e&&"defaultPopupTemplate"in n&&n.defaultPopupTemplate!=null)return n.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,i){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=i,this._notifyLayer("attributes",r,i,e)}else this.attributes={[e]:i}}getObjectId(){const e=$H(this.origin);if(e)return TH(this,e);const i=this.sourceLayer??this.layer;return i?TH(this,i):null}getGlobalId(){const e=$H(this.origin);if(e?.globalIdField)return this.getAttribute(e.globalIdField);const i=this.sourceLayer??this.layer;return i&&"globalIdField"in i&&i.globalIdField?this.getAttribute(i.globalIdField):null}toJSON(){return{aggregateGeometries:GIe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:AS(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){const{geometry:i}=this;if(i?.type==="mesh"){const r={origin:i.origin,transform:i.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,i,r,n){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:i,newValue:r};e==="origin-transform"&&(s.action=n),e==="attributes"&&(s.attributeName=n),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([Pn(()=>this.geometry?.type==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0,({localMatrix:e,origin:i})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===i||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=i,this.notifyMeshTransformChanged())}),Pn(()=>this.geometry?.type==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0,()=>{const e=this.geometry;e?.type==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,i)=>e===i,sync:!0})])}},CL=bb,bb);l([p({value:null,json:{read:qIe}})],Ti.prototype,"aggregateGeometries",null),l([p({value:null})],Ti.prototype,"attributes",null),l([p({value:null,types:kw,json:{read:oc}})],Ti.prototype,"geometry",null),l([p({type:Boolean})],Ti.prototype,"isAggregate",void 0),l([p({clonable:!1})],Ti.prototype,"layer",void 0),l([p({clonable:"reference"})],Ti.prototype,"origin",void 0),l([p({type:Dw,value:null})],Ti.prototype,"popupTemplate",null),l([p({clonable:"reference"})],Ti.prototype,"sourceLayer",void 0),l([p({value:null,types:zo})],Ti.prototype,"symbol",null),l([p({clonable:!1,json:{read:!1,write:!1}})],Ti.prototype,"_version",void 0),l([p({type:Boolean,value:!0})],Ti.prototype,"visible",null),Ti=CL=l([M("esri.Graphic")],Ti);let my=class extends V2{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};l([P6({Type:Ti,ensureType:cr(Ti)})],my.prototype,"itemType",void 0),my=l([M("esri.support.GraphicsCollection")],my);let Xc=class extends _e{constructor(e){super(e),this.view=null,this.baseLayerViews=new fe,this.groundLayerViews=new fe,this.referenceLayerViews=new fe,this._loadingHandle=be(()=>this.view?.map?.basemap,i=>{i&&i.load().catch(()=>{})},Zr)}destroy(){this._set("view",null),this._loadingHandle=gi(this._loadingHandle),this.baseLayerViews.destroyAll(),this.groundLayerViews.destroyAll(),this.referenceLayerViews.destroyAll()}get suspended(){return this.view?.suspended??!0}get updating(){return this.view?.suspended?!1:!!this.view?.map?.basemap?.loaded&&(this.baseLayerViews.some(i=>i.updating)||this.groundLayerViews.some(i=>i.updating)||this.referenceLayerViews.some(i=>i.updating))}};l([p({constructOnly:!0})],Xc.prototype,"view",void 0),l([p({readOnly:!0})],Xc.prototype,"baseLayerViews",void 0),l([p({readOnly:!0})],Xc.prototype,"groundLayerViews",void 0),l([p({readOnly:!0})],Xc.prototype,"referenceLayerViews",void 0),l([p({readOnly:!0})],Xc.prototype,"suspended",null),l([p({type:Boolean,readOnly:!0})],Xc.prototype,"updating",null),Xc=l([M("esri.views.BasemapView")],Xc);const BIe=Xc;let To=class extends _e{constructor(e){super(e),this.factor=1.5,this.offset=jr(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};l([p({type:Number})],To.prototype,"factor",void 0),l([p({nonNullable:!0})],To.prototype,"offset",void 0),l([p()],To.prototype,"position",void 0),l([p({type:Number,range:{min:0}})],To.prototype,"size",void 0),l([p()],To.prototype,"maskUrl",void 0),l([p()],To.prototype,"maskEnabled",void 0),l([p()],To.prototype,"overlayUrl",void 0),l([p()],To.prototype,"overlayEnabled",void 0),l([p({readOnly:!0})],To.prototype,"version",null),l([p({type:Boolean})],To.prototype,"visible",void 0),To=l([M("esri.views.Magnifier")],To);const Nse=To;let K0=class{constructor(e){this._observable=new fw,this._map=new Map(e)}get size(){return Ve(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const i=this._map.delete(e);return i&&this._observable.notify(),i}entries(){return Ve(this._observable),this._map.entries()}forEach(e,i){Ve(this._observable),this._map.forEach((r,n)=>e.call(i,r,n,this),i)}get(e){return Ve(this._observable),this._map.get(e)}has(e){return Ve(this._observable),this._map.has(e)}keys(){return Ve(this._observable),this._map.keys()}set(e,i){return this._map.set(e,i),this._observable.notify(),this}values(){return Ve(this._observable),this._map.values()}[Symbol.iterator](){return Ve(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var RL;let ty=RL=class extends B{constructor(t){super(t),this.name=null,this.code=null}clone(){return new RL({name:this.name,code:this.code})}};l([p({type:String,json:{write:{isRequired:!0}}})],ty.prototype,"name",void 0),l([p({type:[String,Number],json:{write:{isRequired:!0}}})],ty.prototype,"code",void 0),ty=RL=l([M("esri.layers.support.CodedValue")],ty);const HIe=new Be({inherited:"inherited",codedValue:"coded-value",range:"range"});let Vh=class extends B{constructor(e){super(e),this.name=null,this.type=null}};l([p({type:String,json:{write:!0}})],Vh.prototype,"name",void 0),l([Ae(HIe),p({json:{write:{isRequired:!0}}})],Vh.prototype,"type",void 0),Vh=l([M("esri.layers.support.Domain")],Vh);var PL,wb;let Uh=(wb=class extends Vh{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let i=null;if(this.codedValues){const r=String(e);this.codedValues.some(n=>(String(n.code)===r&&(i=n.name),!!i))}return i}clone(){return new PL({codedValues:z(this.codedValues),name:this.name})}},PL=wb,wb);l([p({type:[ty],json:{write:{isRequired:!0}}})],Uh.prototype,"codedValues",void 0),l([Ae({codedValue:"coded-value"})],Uh.prototype,"type",void 0),Uh=PL=l([M("esri.layers.support.CodedValueDomain")],Uh);var DL,_b;let sS=(_b=class extends Vh{constructor(e){super(e),this.type="inherited"}clone(){return new DL}},DL=_b,_b);l([Ae({inherited:"inherited"})],sS.prototype,"type",void 0),sS=DL=l([M("esri.layers.support.InheritedDomain")],sS);var NL,Sb;let Gm=(Sb=class extends Vh{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new NL({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},NL=Sb,Sb);l([p({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]},isRequired:!0}}})],Gm.prototype,"maxValue",void 0),l([p({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[0]},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]},isRequired:!0}}})],Gm.prototype,"minValue",void 0),l([Ae({range:"range"})],Gm.prototype,"type",void 0),Gm=NL=l([M("esri.layers.support.RangeDomain")],Gm);const Lse={key:"type",base:Vh,typeMap:{range:Gm,"coded-value":Uh,inherited:sS}};function vk(t){if(!t?.type)return null;switch(t.type){case"range":return Gm.fromJSON(t);case"codedValue":return Uh.fromJSON(t);case"inherited":return sS.fromJSON(t)}return null}const TF=new Be({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var LL;const WIe=new Be({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",currency:"currency",dateAndTime:"date-and-time",description:"description",emailAddress:"email-address",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",phoneNumber:"phone-number",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var xb;let cn=(xb=class extends B{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return r?.value??null}readValueType(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return r?WIe.fromJSON(r.fieldValueType):null}clone(){return new LL({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},LL=xb,xb);l([p({type:String,json:{write:!0}})],cn.prototype,"alias",void 0),l([p({type:[String,Number],json:{write:{allowNull:!0}}})],cn.prototype,"defaultValue",void 0),l([p()],cn.prototype,"description",void 0),l([se("description")],cn.prototype,"readDescription",null),l([p({types:Lse,json:{read:{reader:vk},write:!0}})],cn.prototype,"domain",void 0),l([p({type:Boolean,json:{write:!0}})],cn.prototype,"editable",void 0),l([p({type:tt,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],cn.prototype,"length",void 0),l([p({type:String,json:{write:!0}})],cn.prototype,"name",void 0),l([p({type:Boolean,json:{write:!0}})],cn.prototype,"nullable",void 0),l([Ae(TF)],cn.prototype,"type",void 0),l([p()],cn.prototype,"valueType",void 0),l([se("valueType",["description"])],cn.prototype,"readValueType",null),l([p({type:Boolean,json:{read:!1}})],cn.prototype,"visible",void 0),cn=LL=l([M("esri.layers.support.Field")],cn);var jL;let Iv=jL=class extends B{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new jL({mapLayerId:t,gdbVersion:e})}};l([Ae({mapLayer:"map-layer"}),p({json:{write:{isRequired:!0}}})],Iv.prototype,"type",void 0),l([p({type:tt,json:{write:{isRequired:!0}}})],Iv.prototype,"mapLayerId",void 0),l([p({type:String,json:{write:!0}})],Iv.prototype,"gdbVersion",void 0),Iv=jL=l([M("esri.layers.support.source.MapLayerSource")],Iv);var zL;let Kc=zL=class extends B{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:r,geometryType:n}=this,s={workspaceId:t,query:e,oidFields:i,spatialReference:r?.clone()??void 0,geometryType:n};return new zL(s)}};l([Ae({queryTable:"query-table"}),p({json:{write:{isRequired:!0}}})],Kc.prototype,"type",void 0),l([p({type:String,json:{write:!0}})],Kc.prototype,"workspaceId",void 0),l([p({type:String,json:{write:!0}})],Kc.prototype,"query",void 0),l([p({type:String,json:{write:!0}})],Kc.prototype,"oidFields",void 0),l([p({type:we,json:{write:!0}})],Kc.prototype,"spatialReference",void 0),l([Ae(H1e)],Kc.prototype,"geometryType",void 0),Kc=zL=l([M("esri.layers.support.source.QueryTableDataSource")],Kc);var FL;let kv=FL=class extends B{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new FL({workspaceId:t,dataSourceName:e})}};l([Ae({raster:"raster"}),p({json:{write:{isRequired:!0}}})],kv.prototype,"type",void 0),l([p({type:String,json:{write:!0}})],kv.prototype,"dataSourceName",void 0),l([p({type:String,json:{write:!0}})],kv.prototype,"workspaceId",void 0),kv=FL=l([M("esri.layers.support.source.RasterDataSource")],kv);var VL;let Sm=VL=class extends B{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new VL({workspaceId:t,gdbVersion:e,dataSourceName:i})}};l([Ae({table:"table"}),p({json:{write:{isRequired:!0}}})],Sm.prototype,"type",void 0),l([p({type:String,json:{write:!0}})],Sm.prototype,"workspaceId",void 0),l([p({type:String,json:{write:!0}})],Sm.prototype,"gdbVersion",void 0),l([p({type:String,json:{write:!0}})],Sm.prototype,"dataSourceName",void 0),Sm=VL=l([M("esri.layers.support.source.TableDataSource")],Sm);var UL,qL;const ZIe=Fr()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Eo=UL=class extends B{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return OH()(t,e,i)}castLeftTableSource(t){return rc(GL(),t)}readRightTableSource(t,e,i){return OH()(t,e,i)}castRightTableSource(t){return rc(GL(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:r,joinType:n}=this,s={leftTableKey:t,rightTableKey:e,leftTableSource:i?.clone()??void 0,rightTableSource:r?.clone()??void 0,joinType:n};return new UL(s)}};l([Ae({joinTable:"join-table"}),p({json:{write:{isRequired:!0}}})],Eo.prototype,"type",void 0),l([p({type:String,json:{write:!0}})],Eo.prototype,"leftTableKey",void 0),l([p({type:String,json:{write:!0}})],Eo.prototype,"rightTableKey",void 0),l([p({json:{write:!0}})],Eo.prototype,"leftTableSource",void 0),l([se("leftTableSource")],Eo.prototype,"readLeftTableSource",null),l([Ct("leftTableSource")],Eo.prototype,"castLeftTableSource",null),l([p({json:{write:!0}})],Eo.prototype,"rightTableSource",void 0),l([se("rightTableSource")],Eo.prototype,"readRightTableSource",null),l([Ct("rightTableSource")],Eo.prototype,"castRightTableSource",null),l([Ae(ZIe)],Eo.prototype,"joinType",void 0),Eo=UL=l([M("esri.layers.support.source.JoinTableDataSource")],Eo);let E5=null;function OH(){return E5||(E5=Sw({types:GL()})),E5}let M5=null;function GL(){return M5||(M5={key:"type",base:null,typeMap:{"data-layer":kl,"map-layer":Iv}}),M5}const JIe={key:"type",base:null,typeMap:{"join-table":Eo,"query-table":Kc,raster:kv,table:Sm}};var $b;let kl=($b=class extends B{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:i}=this;return new qL({fields:e,dataSource:i})}},qL=$b,$b);l([Ae({dataLayer:"data-layer"}),p({json:{write:{isRequired:!0}}})],kl.prototype,"type",void 0),l([p({type:[cn],json:{write:!0}})],kl.prototype,"fields",void 0),l([p({types:JIe,json:{write:!0}})],kl.prototype,"dataSource",void 0),kl=qL=l([M("esri.layers.support.source.DataLayerSource")],kl),kl.from=cr(kl);let xm=class extends Re(B){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};l([p({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],xm.prototype,"onFields",void 0),l([p({type:String,json:{write:!0}})],xm.prototype,"operator",void 0),l([p({type:String,json:{write:!0}})],xm.prototype,"searchTerm",void 0),l([p({type:String,json:{write:!0}})],xm.prototype,"searchType",void 0),xm=l([M("esri.rest.support.FullTextSearch")],xm);const YIe=xm;var BL;const CH=new Be({upperLeft:"upper-left",lowerLeft:"lower-left"});let Eh=BL=class extends B{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new BL(z({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};l([p({type:Xe,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Eh.prototype,"extent",void 0),l([p({type:["view","edit"],json:{write:!0}})],Eh.prototype,"mode",void 0),l([p({type:String,json:{read:CH.read,write:CH.write}})],Eh.prototype,"originPosition",void 0),l([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Eh.prototype,"tolerance",void 0),Eh=BL=l([M("esri.rest.support.QuantizationParameters")],Eh);const QIe=t=>{const e=t;let i=class extends e{};return i=l([M("esri.rest.support.QueryMixin")],i),i},XIe=new Be({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var HL;const RH=new Be({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let yl=HL=class extends B{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=z(t))}clone(){return new HL({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:z(this.statisticParameters)})}};l([p({type:Number,json:{write:!0}})],yl.prototype,"maxPointCount",void 0),l([p({type:Number,json:{write:!0}})],yl.prototype,"maxRecordCount",void 0),l([p({type:Number,json:{write:!0}})],yl.prototype,"maxVertexCount",void 0),l([p({type:String,json:{write:!0}})],yl.prototype,"onStatisticField",void 0),l([p({type:String,json:{write:!0}})],yl.prototype,"outStatisticFieldName",void 0),l([p({type:String,json:{read:{source:"statisticType",reader:RH.read},write:{target:"statisticType",writer:RH.write}}})],yl.prototype,"statisticType",void 0),l([p({type:Object})],yl.prototype,"statisticParameters",void 0),l([pe("statisticParameters")],yl.prototype,"writeStatisticParameters",null),yl=HL=l([M("esri.rest.support.StatisticDefinition")],yl);var VM;const KIe=new Be({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var _y;let Oe=(_y=class extends QIe(B){static from(e){return bw(VM,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeParameterValues(e,i){if(e){const r={};for(const n in e){const s=e[n];Array.isArray(s)?r[n]=s.map(o=>o instanceof Date?o.getTime():o):s instanceof Date?r[n]=s.getTime():r[n]=s}i.parameterValues=r}}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,i.where="1=1"}writeWhere(e,i){i.where=e||"1=1"}clone(){return new VM(z({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},VM=_y,_y.MAX_MAX_RECORD_COUNT_FACTOR=5,_y);l([p({json:{write:!0}})],Oe.prototype,"aggregateIds",void 0),l([p({type:Boolean,json:{write:!0}})],Oe.prototype,"cacheHint",void 0),l([p({type:Boolean,json:{default:!1,write:!0}})],Oe.prototype,"compactGeometryEnabled",void 0),l([p({json:{write:!0}})],Oe.prototype,"datumTransformation",void 0),l([Ct("datumTransformation")],Oe.prototype,"castDatumTransformation",null),l([p({type:Boolean,json:{default:!1,write:!0}})],Oe.prototype,"defaultSpatialReferenceEnabled",void 0),l([p({type:Number,json:{write:!0}})],Oe.prototype,"distance",void 0),l([p({type:kl,json:{write:!0}})],Oe.prototype,"dynamicDataSource",void 0),l([p({type:String,json:{write:!0}})],Oe.prototype,"formatOf3DObjects",void 0),l([p({type:[YIe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],Oe.prototype,"fullText",void 0),l([p({type:String,json:{write:!0}})],Oe.prototype,"gdbVersion",void 0),l([p({types:kw,json:{read:oc,write:!0}})],Oe.prototype,"geometry",void 0),l([p({type:Number,json:{write:!0}})],Oe.prototype,"geometryPrecision",void 0),l([p({type:[String],json:{write:!0}})],Oe.prototype,"groupByFieldsForStatistics",void 0),l([p({type:String,json:{write:!0}})],Oe.prototype,"having",void 0),l([p({type:Date})],Oe.prototype,"historicMoment",void 0),l([pe("historicMoment")],Oe.prototype,"writeHistoricMoment",null),l([p({type:Number,json:{write:!0}})],Oe.prototype,"maxAllowableOffset",void 0),l([p({type:Number,cast:t=>t<1?1:t>Oe.MAX_MAX_RECORD_COUNT_FACTOR?Oe.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],Oe.prototype,"maxRecordCountFactor",void 0),l([p({type:["xyFootprint"],json:{write:!0}})],Oe.prototype,"multipatchOption",void 0),l([p({type:Number,json:{read:{source:"resultRecordCount"}}})],Oe.prototype,"num",void 0),l([p({json:{write:!0}})],Oe.prototype,"objectIds",void 0),l([p({type:[String],json:{write:!0}})],Oe.prototype,"orderByFields",void 0),l([p({type:[String],json:{write:!0}})],Oe.prototype,"outFields",void 0),l([p({type:we,json:{name:"outSR",write:!0}})],Oe.prototype,"outSpatialReference",void 0),l([p({type:[yl],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],Oe.prototype,"outStatistics",void 0),l([p({json:{write:!0}})],Oe.prototype,"parameterValues",void 0),l([pe("parameterValues")],Oe.prototype,"writeParameterValues",null),l([p({type:je,json:{write:!0}})],Oe.prototype,"pixelSize",void 0),l([p({type:Eh,json:{write:!0}})],Oe.prototype,"quantizationParameters",void 0),l([p({type:[Object],json:{write:!0}})],Oe.prototype,"rangeValues",void 0),l([p({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Oe.prototype,"relationParameter",void 0),l([p({type:String,json:{write:!0}})],Oe.prototype,"resultType",void 0),l([p({type:Boolean,json:{default:!1,write:!0}})],Oe.prototype,"returnCentroid",void 0),l([p({type:Boolean,json:{default:!1,write:!0}})],Oe.prototype,"returnDistinctValues",void 0),l([p({type:Boolean,json:{default:!0,write:!0}})],Oe.prototype,"returnExceededLimitFeatures",void 0),l([p({type:Boolean,json:{write:!0}})],Oe.prototype,"returnGeometry",void 0),l([p({type:Boolean,json:{default:!1,write:!0}})],Oe.prototype,"returnQueryGeometry",void 0),l([p({type:Boolean,json:{default:!1,write:!0}})],Oe.prototype,"returnM",void 0),l([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Oe.prototype,"returnZ",void 0),l([p({type:Boolean,json:{write:!0}})],Oe.prototype,"returnTrueCurves",void 0),l([p({type:we,json:{write:!0}})],Oe.prototype,"sourceSpatialReference",void 0),l([Ae(XIe,{ignoreUnknown:!1,name:"spatialRel"})],Oe.prototype,"spatialRelationship",void 0),l([p({type:Number,json:{read:{source:"resultOffset"}}})],Oe.prototype,"start",void 0),l([pe("start"),pe("num")],Oe.prototype,"writeStart",null),l([p({type:String,json:{write:!0}})],Oe.prototype,"sqlFormat",void 0),l([p({type:String,json:{write:!0}})],Oe.prototype,"text",void 0),l([p({type:qt,json:{write:!0}})],Oe.prototype,"timeExtent",void 0),l([p({type:Boolean,json:{default:!1,write:!0}})],Oe.prototype,"timeReferenceUnknownClient",void 0),l([Ae(KIe,{ignoreUnknown:!1}),p({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null}}}}})],Oe.prototype,"units",void 0),l([p({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],Oe.prototype,"where",void 0),l([pe("where")],Oe.prototype,"writeWhere",null),Oe=VM=l([M("esri.rest.support.Query")],Oe);function Zp(t){return!(t==null||typeof t!="object"||!("createQuery"in t)||!t.createQuery)}let $a=class extends sp{constructor(e){super(e),this._selectionMap=new K0,this._sources=new fe,this._trashCan=[],this._layerEditHandles=new fe,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([be(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),be(()=>this.view,e=>{e?.when().then(()=>this.syncSources())},Zr),Wo(()=>this.sources,"change",e=>{const i=this._selectionMap,r=[];for(const n of e.removed){const s=i.get(n);s&&(i.delete(n),s.highlightHandle?.remove(),r.push({layer:n,selection:[],added:[],removed:[...s.selection]}))}this._refreshListeners(),r.length&&this._onSelectionChange(r)},{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(gi)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{const[i,r]=e;return{layer:i,selection:[...r.selection]}})}get count(){let e=0;for(const i of this._selectionMap.values())e+=i.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){Ql(e,this._sources)}syncSources(){const e=new Set,i=this.view?.map;if(!i)return;const r=n=>{REe(n)?(n.layers?.forEach(r),n.tables?.forEach(r)):CEe(n)?(n.sublayers?.forEach(r),n.subtables?.forEach(r)):iH(n)?n.sublayers?.forEach(r):Zp(n)&&e.add(n)};i.allLayers.forEach(r),i.allTables.forEach(r),this.sources=[...e]}async getSelectedFeatures(e,i={},r="layerView"){const{view:n,selections:s}=this;if(!n&&r==="layerView")return ie.getLogger(this).warn("Cannot query layer views without a view."),[];const o=(e?.length?s.filter(u=>e.includes(u.layer)):s).map(async u=>{const{layer:d,selection:h}=u;if(!h.length)return;const m=Fd(d)?d.parent:d;if(m!=null){if(n&&r==="layerView"&&!PH(m)&&DH(m)){const v=await n.whenLayerView(m).catch(()=>null);if(v)return NH(v,h,i)}return NH(m,h,i)}}).filter(is);return(await Promise.all(o)).filter(is)}updateSelection(e){const i=new Map;for(const[s,o]of this._selectionMap)i.set(s,[...o.selection]);let r=!1;const n=e.current.concat(e.added);for(const s of n){const o=s.sourceLayer,u=s.getObjectId();if(this.sources.includes(o)&&(Zp(o)||Fd(o))&&u!==null){const d=Wy(i,o,()=>[]);d.includes(u)||(d.push(u),r=!0)}}for(const s of e.removed){const o=s.sourceLayer,u=s.getObjectId();if(this.sources.includes(o)&&(Zp(o)||Fd(o))&&u!==null){const d=i.get(o),h=d?.indexOf(u);h!==void 0&&h>=0&&(d?.splice(h,1),r=!0)}}if(r){const{_selectionMap:s,_trashCan:o}=this,u=[];for(const[d,h]of i){const m=s.get(d);m!==void 0&&o.push(m),s.set(d,{selection:h}),u.push({layer:d,selection:h,...YP(m!==void 0?m.selection:[],h)})}this._onSelectionChange(u)}}setSelection(e,i){this._setSelection(e,i)}getSelection(e){return this._selectionMap.get(e)?.selection}appendToSelection(e,i){const r=this._selectionMap.get(e),n=r!==void 0?[...r.selection]:[];for(const s of i)n.includes(s)||n.push(s);this._setSelection(e,n)}removeFromSelection(e,i){const r=this._selectionMap.get(e);if(!r)return;const n=[];for(const s of r.selection)i.includes(s)||n.push(s);this._setSelection(e,n)}toggleInSelection(e,i){const r=this._selectionMap.get(e);if(!r||r.selection.length===0)return void this._setSelection(e,i);const n=new Set(r.selection),s=new Set(i),o=pve(n,s);this._setSelection(e,Array.from(o))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const i=[];for(const[r,n]of this._selectionMap.entries())i.push({layer:r,added:[],removed:[...n.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();if(this.view==null)return;const{sources:e,view:i,_selectionMap:r,showHighlight:n}=this,s=this._vizTaskId;for(const o of e){const u=r.get(o),d=Fd(o)?o.parent:o;if(d!=null&&DH(d)){if(PH(d))continue;i.whenLayerView(d).then(h=>{u?.highlightHandle?.remove(),u!=null&&n&&s===this._vizTaskId&&"highlight"in h&&typeof h.highlight=="function"&&u.selection.length>0&&(u.highlightHandle=h.highlight(u.selection,this.highlightName))}).catch(()=>{u?.highlightHandle?.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(gi);const e=new Set(this.sources.map(i=>Fd(i)?i.parent:i));for(const i of e)Zp(i)&&"on"in i&&i.on&&this._layerEditHandles.push(i.on("edits",r=>this._onLayerEdit(r,i)))}_onLayerEdit(e,i){if(iH(i))this._onParentLayerEdit(e,i);else if(e.deletedFeatures.length&&this._selectionMap.has(i)){const r=[];e.deletedFeatures.forEach(({error:n,objectId:s})=>{s!=null&&n==null&&r.push(s)}),this.removeFromSelection(i,r)}}_onParentLayerEdit(e,i){const{deletedFeatures:r,edits:n,updatedFeatures:s}=e;if(n?.updateFeatures?.forEach(o=>{const u=o.getObjectId()??o.attributes[i.objectIdField];if(u==null||s.find(m=>m.objectId===u)?.error)return;const d=i.findSublayerForFeature(o);if(!Zp(d))return;const h=i.sublayers.find(m=>!(!Zp(m)||!this.getSelection(m)?.includes(u)));Zp(h)&&h!==d&&(this.removeFromSelection(h,[u]),this.appendToSelection(d,[u]))}),r.length){const o=[];r.forEach(({error:u,objectId:d})=>{d!=null&&u==null&&o.push(d)}),i.sublayers.forEach(u=>{Zp(u)&&this._selectionMap.has(u)&&this.removeFromSelection(u,o)})}}_setSelection(e,i){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const r=this._selectionMap.get(e);if(r===void 0||!tke(r,{selection:i})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(e,{selection:[...i]});const n={layer:e,selection:[...i],...YP(r!==void 0?r.selection:[],i)};this._onSelectionChange([n])}}};l([p()],$a.prototype,"_selectionMap",void 0),l([p()],$a.prototype,"_sources",void 0),l([p({readOnly:!0,nonNullable:!0})],$a.prototype,"selections",null),l([p({readOnly:!0,nonNullable:!0})],$a.prototype,"count",null),l([p()],$a.prototype,"view",void 0),l([p({readOnly:!0,nonNullable:!0})],$a.prototype,"hasSelection",null),l([p()],$a.prototype,"showHighlight",void 0),l([p()],$a.prototype,"sources",null),l([p()],$a.prototype,"highlightName",void 0),$a=l([M("esri.views.SelectionManager")],$a);const PH=t=>Fd(t)?t.parent?.isTable===!0:t.isTable,eke=t=>t.layer!==void 0,DH=t=>t?.when!==void 0,tke=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const i=[...t.selection],r=[...e.selection];if(i.length!==r.length)return!1;i.sort(),r.sort();for(let n=0;n<i.length;n++)if(i[n]!==r[n])return!1}return!0},NH=async(t,e,i={})=>{let r;if(eke(t)){const n=t;r=n===void 0?null:await n.queryFeatures(new Oe({...i,objectIds:e})).then(s=>({data:s,layer:t.layer}))}else{const n=t;r=n===void 0?null:await n.queryFeatures(new Oe({...i,objectIds:e})).then(s=>({data:s,layer:n}))}return r},ike=$a;let K1=class extends Re(_e){constructor(e){super(e),this.accentColor=new Ie([255,127,0]),this.textColor=new Ie([255,255,255])}};l([p({type:Ie,nonNullable:!0})],K1.prototype,"accentColor",void 0),l([p({type:Ie,nonNullable:!0})],K1.prototype,"textColor",void 0),K1=l([M("esri.views.Theme")],K1);const WL=K1,jse=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],zse={};function Fse(t){return!!zse[t]}function rke(t){for(const e of t)if(!Fse(e))return!1;return!0}jse.forEach(t=>{zse[t]=!0});let Vse=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:r},n)=>this.inputManager?.installHandlers(n,[i],r))}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>this.inputManager?.uninstallHandlers(i)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,r,n){const s=Array.isArray(e)?e:e.split(",");if(!rke(s))return s.some(Fse)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,u;Array.isArray(i)?u=i:(o=i,u=[]),typeof r=="function"?o=r:n=r,n=n??Wt.DEFAULT;const d=this._createUniqueGroupName(),h=new nke(this.view,s,u,o);this._handlers.set(d,{handler:h,priority:n});for(const m of s){const v=this._handlerCounts.get(m)||0;this._handlerCounts.set(m,v+1)}return this.inputManager&&this.inputManager.installHandlers(d,[h],n),ut(()=>this._removeHandler(d,s))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of i){const n=this._handlerCounts.get(r);n===void 0||(n===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,n-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},nke=class extends en{constructor(e,i,r,n){super(!0),this._latestDragStart=void 0,this.view=e;for(const s of i)switch(s){case"click":this.registerIncoming("click",r,o=>n(ake(e,o)));break;case"double-click":this.registerIncoming("double-click",r,o=>n(lke(e,o)));break;case"immediate-click":this.registerIncoming("immediate-click",r,o=>n(uke(e,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,o=>n(cke(e,o)));break;case"hold":this.registerIncoming("hold",r,o=>n(dke(e,o)));break;case"drag":this.registerIncoming("drag",r,o=>{const u=this._wrapDrag(o);u&&n(u)});break;case"key-down":this.registerIncoming("key-down",r,o=>n(pke(o)));break;case"key-up":this.registerIncoming("key-up",r,o=>n(hke(o)));break;case"pointer-down":this.registerIncoming("pointer-down",r,o=>n(n1(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,o=>n(n1(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,o=>n(n1(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,o=>n(fke(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,o=>n(mke(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,o=>n(n1(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,o=>n(n1(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,o=>{n(yke(o))});break;case"focus":this.registerIncoming("focus",r,o=>{n(ske(o))});break;case"blur":this.registerIncoming("blur",r,o=>{n(oke(o))})}}_wrapDrag(e){const i=e.data,{x:r,y:n}=i.center,{action:s,pointerType:o,button:u}=i;if(s==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const d=i.pointer.native,h=i.buttons,{cancelable:m,timestamp:v}=e,b={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:r,y:n,origin:b,pointerType:o,button:u,buttons:h,radius:i.radius,angle:iK(i.angle),native:d,timestamp:v,cancelable:m,stopPropagation:()=>e.stopPropagation(),defer:_=>e.defer(_),preventDefault:()=>e.preventDefault()}}};function ske(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function oke(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function ake(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:u,eventId:d}=e.data,{cancelable:h,timestamp:m}=e;return{type:"click",pointerType:i,button:r,buttons:n,x:s,y:o,native:u,timestamp:m,screenPoint:jr(s,o),mapPoint:Tx(t,s,o),eventId:d,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:v=>e.defer(v),preventDefault:()=>e.preventDefault()}}function lke(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:u,eventId:d}=e.data,{cancelable:h,timestamp:m}=e;return{type:"double-click",pointerType:i,button:r,buttons:n,x:s,y:o,native:u,timestamp:m,mapPoint:Tx(t,s,o),eventId:d,cancelable:h,stopPropagation:()=>e.stopPropagation(),defer:v=>e.defer(v),preventDefault:()=>e.preventDefault()}}function uke(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:u,eventId:d}=e.data,h=u.pointerId,{cancelable:m,timestamp:v}=e;return{type:"immediate-click",pointerId:h,pointerType:i,button:r,buttons:n,x:s,y:o,native:u,timestamp:v,mapPoint:Tx(t,s,o),eventId:d,cancelable:m,stopPropagation:()=>e.stopPropagation(),defer:b=>e.defer(b),preventDefault:()=>e.preventDefault()}}function cke(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:u,eventId:d}=e.data,h=u.pointerId,{cancelable:m,timestamp:v}=e;return{type:"immediate-double-click",pointerId:h,pointerType:i,button:r,buttons:n,x:s,y:o,native:u,timestamp:v,mapPoint:Tx(t,s,o),eventId:d,cancelable:m,stopPropagation:()=>e.stopPropagation(),defer:b=>e.defer(b),preventDefault:()=>e.preventDefault()}}function dke(t,e){const{pointerType:i,button:r,buttons:n,x:s,y:o,native:u}=e.data,{cancelable:d,timestamp:h}=e;return{type:"hold",pointerType:i,button:r,buttons:n,x:s,y:o,native:u,timestamp:h,mapPoint:Tx(t,s,o),cancelable:d,stopPropagation:()=>e.stopPropagation(),defer:m=>e.defer(m),preventDefault:()=>e.preventDefault()}}function Tx(t,e,i){return t.toMap(jr(e,i),{exclude:[]})}function pke(t){const{key:e,repeat:i,native:r}=t.data,{cancelable:n,timestamp:s}=t;return{type:"key-down",key:e,repeat:i,native:r,timestamp:s,cancelable:n,stopPropagation:()=>t.stopPropagation(),defer:o=>t.defer(o),preventDefault:()=>t.preventDefault()}}function hke(t){const{key:e,native:i}=t.data,{cancelable:r,timestamp:n}=t;return{type:"key-up",key:e,native:i,timestamp:n,cancelable:r,stopPropagation:()=>t.stopPropagation(),defer:s=>t.defer(s),preventDefault:()=>t.preventDefault()}}function n1(t,e){const{x:i,y:r,button:n,buttons:s,native:o,eventId:u}=t.data,d=o.pointerId,h=o.pointerType,{cancelable:m,timestamp:v}=t;return{type:e,x:i,y:r,pointerId:d,pointerType:h,button:n,buttons:s,native:o,timestamp:v,eventId:u,cancelable:m,stopPropagation:()=>t.stopPropagation(),defer:b=>t.defer(b),preventDefault:()=>t.preventDefault()}}function fke(t){const{x:e,y:i,buttons:r,native:n,eventId:s}=t.data.currentEvent,{button:o}=t.data.startEvent,u=t.data.startEvent.native.pointerId,d=t.data.startEvent.native.pointerType,h=t.data.action,m={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:v,timestamp:b}=t;return{type:"pointer-drag",x:e,y:i,pointerId:u,pointerType:d,button:o,buttons:r,action:h,origin:m,native:n,timestamp:b,eventId:s,cancelable:v,stopPropagation:()=>t.stopPropagation(),defer:_=>t.defer(_),preventDefault:()=>t.preventDefault()}}function mke(t){const{cancelable:e,data:i,timestamp:r}=t,{x:n,y:s,deltaY:o,native:u}=i;return{type:"mouse-wheel",x:n,y:s,deltaY:o,native:u,timestamp:r,cancelable:e,stopPropagation:()=>t.stopPropagation(),defer:d=>t.defer(d),preventDefault:()=>t.preventDefault()}}function yke(t){const{action:e,state:i,device:r}=t.data,{cancelable:n,timestamp:s}=t,{buttons:o,axes:u}=i;return{type:"gamepad",device:r,timestamp:s,action:e,buttons:o,axes:u,cancelable:n,stopPropagation:()=>t.stopPropagation(),defer:d=>t.defer(d),preventDefault:()=>t.preventDefault()}}const gke="z",vke="r",Use={cancel:"Escape",complete:"Enter"},Ki={...Use,redo:vke,undo:gke,center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},LH={toggle:"Control"},WQe={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},ZQe={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:Cre,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let JQe=class{constructor(){this._bindings=new Map}add(e,i){return this.addToggle(e,r=>{r.type==="key-down"&&i(r)})}addToggle(e,i){const r=bke.fromDefinition(e,i),n=Wy(this._bindings,r.key,()=>[]);return n.push(r),ut(()=>kz(n,r))}register(e,i=Wt.WIDGET){return uo([e.on("key-down",r=>this.dispatch(e.inputManager,r),i),e.on("key-up",r=>this.dispatch(e.inputManager,r),i)])}dispatch(e,i){const r=i.key,n=this._bindings.get(r);if(n)for(const s of n)s.process(e,i)}},bke=class ZL{constructor(e,i,r,n,s){this.key=e,this.modifiers=i,this.repeats=r,this.continuePropagation=n,this.callback=s}process(e,i){if(!(i.key!==this.key||"repeat"in i&&i.repeat&&!this.repeats)){for(const r of this.modifiers)if(!e.isModifierKeyDown(r))return;this.continuePropagation||i.stopPropagation(),this.callback(i)}}static fromDefinition(e,i){if(typeof e=="string")return new ZL(e,[],!1,!1,i);const{key:r,modifier:n,repeats:s,continuePropagation:o}=e;return new ZL(r,n?Array.isArray(n)?n:[n]:[],!!s,!!o,i)}};function wke(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return ie.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function JL(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(0)&&t.getEditableFlag(1)}function _ke(t){return t.type==="key-down"&&t.key===Use.cancel}function Aa(t){return jr(t.x,t.y)}function qse(t,e){const i=(t instanceof HTMLElement?t:t.surface)?.getBoundingClientRect();return i?jr(e.clientX-i.left,e.clientY-i.top):jr(0,0)}function Gse(t,e){return e instanceof Event?qse(t,e):Aa(e)}function Bse(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let UM=class extends _e{constructor(){super(...arguments),this._pointerLocations=new Map,this._hoveredManipulators=new K0,this._grabbedManipulators=new K0,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1}get cursor(){return this._cursorFromMap(this._grabbedManipulators,"grabbing")??this._cursorFromMap(this._hoveredManipulators,"pointer")}get hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":jH(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!zH(e))break;const n=Aa(e),s=tv(n,e.pointerType,i.tools);if(s==null)break;const o=s.manipulator,u=s.tool;o==null||u==null||!o.interactive||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,e,i),o!=null&&u!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:u,start:n,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:n}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!zH(e))break;const n=this._grabbedManipulators.get(e.pointerId),s=n?.manipulator,o=n?.tool;if(s==null||o==null)break;const u=Aa(e);u.x=Qr(u.x,0,i.view.width),u.y=Qr(u.y,0,i.view.height);const d=n.start,h=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,h?s.events.emit("drag",{action:"update",start:d,screenPoint:u}):s.events.emit("drag",{action:"start",start:d,screenPoint:u,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:s,start:d}));break;case"end":s.dragging=!1,h&&s.events.emit("drag",{action:"end",start:d,screenPoint:u}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}r();break}case"immediate-click":{const n=Aa(e),s=tv(n,e.pointerType,i.tools);if(!Ske(e)){for(const h of i.tools)if((s==null||s.tool!==h||h.automaticManipulatorSelection)&&h.manipulators){let m=!1;h.manipulators.forEach(({manipulator:v})=>{v.selected&&(v.selected=!1,m=!0)}),m&&h.onManipulatorSelectionChanged&&h.onManipulatorSelectionChanged()}}if(s==null)break;const{manipulator:o,tool:u}=s;if(!o.interactive)break;o.selectable&&u.automaticManipulatorSelection&&(o.selected=!o.selected,u.onManipulatorSelectionChanged&&u.onManipulatorSelectionChanged());const d=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:d,stopPropagation:r}),A5(o,r);break}case"click":{const n=Aa(e),s=tv(n,e.pointerType,i.tools),o=s?.manipulator;if(o==null||!o.interactive)break;const u=e.native.shiftKey;o.events.emit(e.type,{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:u}),r();break}case"double-click":{const n=Aa(e),s=tv(n,e.pointerType,i.tools),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const u=e.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:u,stopPropagation:r}),A5(o,r);break}case"immediate-double-click":{const n=Aa(e),s=tv(n,e.pointerType,i.tools),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const u=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:u,stopPropagation:r}),e.pointerType==="mouse"&&A5(o,r);break}}this._onFocusChange(i.tools)}_releaseManipulatorBeforeDragging(e,i,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Aa(i)}),this._grabbedManipulators.forEach(({manipulator:n},s)=>{n===e&&this._grabbedManipulators.delete(s)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(e,i){const r=this._grabbedManipulators.get(e.pointerId)?.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:Aa(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(e){this._updateFocusedManipulatorTools(e)}_updateFocusedManipulatorTools(e){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:n})=>i.add(n)),this._hoveredManipulators.forEach(({tool:n})=>r.add(n));for(const n of e){n.hasGrabbedManipulators=i.has(n),n.hasHoveredManipulators=r.has(n);const s=this._grabbedManipulators.values(),o=v0e(s,({tool:u})=>u===n);n.firstGrabbedManipulator=o!=null?o.manipulator:null}}clearPointers(e,{tools:i,setActiveTool:r},n=!0,s){const o=(u,d)=>u===e&&(s==null||s===d);this._grabbedManipulators.forEach(({tool:u,manipulator:d,pointerType:h},m)=>{o(u,d)&&(this._grabbedManipulators.delete(m),d.grabbing=!1,d.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:h}))}),this._draggedManipulators.forEach(({tool:u,manipulator:d},h)=>{o(u,d)&&(this._draggedManipulators.delete(h),d.dragging=!1,d.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:u,manipulator:d},h)=>{o(u,d)&&(this._hoveredManipulators.delete(h),d.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(jr(i.x,i.y),r,i.pointerType,e)})}handleHoverEvent(e,i){const r=e.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!jH(e.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(Aa(e),e.pointerId,e.pointerType,i))}_updateHoveredStateForPointerAtScreenPosition(e,i,r,n){let s=tv(e,r,n);const o=this._hoveredManipulators.get(i)?.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(i,s)):this._hoveredManipulators.delete(i),this._onFocusChange(n))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach(({manipulator:i},r)=>{e===r&&(this._hoveredManipulators.delete(e),i.hovering=!1)})}_cursorFromMap(e,i){if(!e?.size)return null;for(const{manipulator:r}of e.values())if(r?.interactive){if(r.grabbing&&r.grabCursor)return r.grabCursor;if(r.cursor)return r.cursor}return i}};function tv(t,e,i){for(const r of i){if(r.manipulators==null||!JL(r))continue;const n=r.manipulators.intersect(t,e);if(n!=null)return{tool:r,manipulator:n}}return null}function jH(t){return t==="mouse"}function zH(t){return t.pointerType!=="mouse"||t.button===0}function Ske(t){return!!t.native.shiftKey}function A5(t,e){t?.consumesClicks&&e()}l([p()],UM.prototype,"cursor",null),UM=l([M("esri.views.interactive.ToolViewManagerManipulatorState")],UM);const FH="attached",I5="tools",xke=1e3;let wu=class extends _e{constructor(e){super(e),this._updatingHandles=new Jh,this._clock=yw,this._manipulatorState=new UM,this.tools=new fe,this._interacting=!1,this._interactingTimeout=xke,this._interactingTimeoutHandle=null}initialize(){this.addHandles([this.view.on(jse,e=>{this._handleInputEvent(e)},Wt.TOOL),...wke(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy(),this._manipulatorState.destroy()}get _manipulatorStateEventArgs(){return{tools:this.tools,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void ie.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i?.deactivate(),e?.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const n=JL(r);this.activeTool!=null&&n||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!n)}}get cursor(){const e=this._manipulatorState.cursor;if(e!=null)return e;for(const i of this.tools)if(i.visible&&i.cursor!=null)return i.cursor;return null}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=gi(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([be(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider.on("elevation-change",e=>this._forEachManipulator(i=>i.onElevationChange(e)))],FH):this.addHandles(be(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(FH),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){for(const i of this.tools)i.manipulators&&i.manipulators.forEach(({manipulator:r})=>e(r,i))}_handleInputEvent(e){let i=!1;const r={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};if(this.activeTool!=null)this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r);else for(const n of this.tools)!i&&n.visible&&n.handleInputEvent(r);!i&&_ke(e)&&this.activeTool&&(e.stopPropagation(),e.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this.tools),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(I5);for(const e of this.tools){if(e instanceof _e){const i=be(()=>[e.cursor,e.visible,e.editable],()=>{JL(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)});this.addHandles(i,I5)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)})],I5)}this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)}_updateToolEditableFlag(e){e.setEditableFlag?.(1,this.activeTool==null||e===this.activeTool)}_removeIncompleteTools(e){this.tools.filter(i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){}};l([p({constructOnly:!0,nonNullable:!0})],wu.prototype,"view",void 0),l([p({value:null})],wu.prototype,"activeTool",null),l([p({readOnly:!0,type:fe})],wu.prototype,"tools",void 0),l([p()],wu.prototype,"cursor",null),l([p({readOnly:!0})],wu.prototype,"updating",null),l([p()],wu.prototype,"_interacting",void 0),l([p({readOnly:!0})],wu.prototype,"interacting",null),wu=l([M("esri.views.ToolViewManager")],wu);const $ke=new Ie("cyan"),Tke=1,Eke=.25,Mke=new Ie("black"),Ake=.4,Ike=.2,KQe=.25,EF="default",kke="temporary",Oke=new Ie("yellow");var YL;let Mo=YL=class extends _e{constructor(t){super(t),this.name=EF,this.color=$ke.clone(),this.haloColor=null,this.haloOpacity=Tke,this.fillOpacity=Eke,this.shadowColor=Mke.clone(),this.shadowOpacity=Ake,this.shadowDifference=Ike,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur&&this.shadowColor.equals(t.shadowColor)&&this.shadowOpacity===t.shadowOpacity&&this.shadowDifference===t.shadowDifference}clone(){return new YL({...this,color:this.color.clone(),haloColor:this.haloColor?.clone(),shadowColor:this.shadowColor?.clone()})}assignFrom(t){this.color=t.color.clone(),this.haloColor=t.haloColor?.clone(),this.haloOpacity=t.haloOpacity,this.fillOpacity=t.fillOpacity,this.shadowColor=t.shadowColor.clone(),this.shadowDifference=t.shadowDifference,this.shadowOpacity=t.shadowOpacity,this.haloBlur=t.haloBlur,this.haloWidth=t.haloWidth}};l([p({type:String,constructOnly:!0,nonNullable:!0})],Mo.prototype,"name",void 0),l([p({type:Ie,nonNullable:!0})],Mo.prototype,"color",void 0),l([p({type:Ie})],Mo.prototype,"haloColor",void 0),l([p({nonNullable:!0})],Mo.prototype,"haloOpacity",void 0),l([p({nonNullable:!0})],Mo.prototype,"fillOpacity",void 0),l([p({type:Ie,nonNullable:!0})],Mo.prototype,"shadowColor",void 0),l([p({nonNullable:!0})],Mo.prototype,"shadowOpacity",void 0),l([p({nonNullable:!0})],Mo.prototype,"shadowDifference",void 0),l([p({nonNullable:!0})],Mo.prototype,"haloWidth",void 0),l([p({nonNullable:!0})],Mo.prototype,"haloBlur",void 0),Mo=YL=l([M("esri.views.support.HighlightOptions")],Mo);const Yh=Mo;function Cke(){return new(fe.ofType(Yh))([new Yh({name:EF}),new Yh({name:kke,color:Oke})])}let Ov=class extends _e{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":Rke.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return Pke[this.deviceType]}};l([p({nonNullable:!0,readOnly:!0})],Ov.prototype,"nativeIndex",void 0),l([p({type:String,readOnly:!0})],Ov.prototype,"deviceType",null),l([p({type:Number,readOnly:!0})],Ov.prototype,"axisThreshold",null),Ov=l([M("esri.views.input.gamepad.GamepadInputDevice")],Ov);const MF=Ov,Rke=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),Pke={standard:.15,spacemouse:.025,unknown:0};let e2=class extends _e{constructor(e){super(e),this.devices=new fe,this.enabledFocusMode="document"}};l([p({type:fe.ofType(MF),readOnly:!0})],e2.prototype,"devices",void 0),l([p({type:["document","view","none"]})],e2.prototype,"enabledFocusMode",void 0),e2=l([M("esri.views.input.gamepad.GamepadSettings")],e2);const Dke=e2;let qM=class extends _e{constructor(){super(...arguments),this.gamepad=new Dke}};l([p({readOnly:!0})],qM.prototype,"gamepad",void 0),qM=l([M("esri.views.input.Input")],qM);const Nke=qM,k5=()=>p({type:["pan","rotate","zoom","none"],nonNullable:!0});let $m=class extends _e{constructor(e){super(e),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};l([k5()],$m.prototype,"dragPrimary",void 0),l([k5()],$m.prototype,"dragSecondary",void 0),l([k5()],$m.prototype,"dragTertiary",void 0),l([p({type:["zoom","none"],nonNullable:!0})],$m.prototype,"mouseWheel",void 0),$m=l([M("esri.views.navigation.NavigationActionMap")],$m);const AF=$m;let lh=class extends _e{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};l([p({type:Boolean,nonNullable:!0})],lh.prototype,"enabled",void 0),l([p({type:MF})],lh.prototype,"device",void 0),l([p({type:["pan","zoom"],nonNullable:!0})],lh.prototype,"mode",void 0),l([p({type:["forward-down","forward-up"],nonNullable:!0})],lh.prototype,"tiltDirection",void 0),l([p({type:Number,nonNullable:!0})],lh.prototype,"velocityFactor",void 0),lh=l([M("esri.views.navigation.gamepad.GamepadSettings")],lh);const Hse=lh;let uh=class extends _e{constructor(e){super(e),this.actionMap=new AF,this.browserTouchPanEnabled=!0,this.gamepad=new Hse,this.momentumEnabled=!0}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(e){pD(ie.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=e?"zoom":"none"}};l([p({type:AF,nonNullable:!0})],uh.prototype,"actionMap",void 0),l([p({type:Boolean})],uh.prototype,"browserTouchPanEnabled",void 0),l([p({type:Hse,nonNullable:!0})],uh.prototype,"gamepad",void 0),l([p({type:Boolean})],uh.prototype,"momentumEnabled",void 0),l([p({type:Boolean})],uh.prototype,"mouseWheelZoomEnabled",null),uh=l([M("esri.views.navigation.Navigation")],uh);const bk=uh;function oXe(t,e,i){const r=Wse(t),n=e,s=Lke(r,n,i);if(r){const o=ys.deriveUnitFromSR(r,t.spatialReference).heightUnit;if(!i&&o!==r.heightUnit){const u=new L("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new L("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:u})}}if(!jke(t)||s===4)return new L("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(s){case 1:{const o=r?.heightUnit||"unknown",u=n?.heightUnit||"unknown",d=new L("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${u})`,{layerUnit:o,sceneUnit:u});return new L("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:d})}case 2:{const o=r?.heightModel||"unknown",u=n?.heightModel||"unknown",d=new L("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${u})`,{layerHeightModel:o,sceneHeightModel:u});return new L("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:d})}case 3:{const o=r?.vertCRS||"unknown",u=n?.vertCRS||"unknown",d=new L("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${u})`,{layerDatum:o,sceneDatum:u});return new L("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:n,error:d})}}return null}function Lke(t,e,i){if(!VH(t)||!VH(e))return 4;if(t==null||e==null)return 0;if(!i&&t.heightUnit!==e.heightUnit)return 1;if(t.heightModel!==e.heightModel)return 2;switch(t.heightModel){case"gravity-related-height":return 0;case"ellipsoidal":return t.vertCRS===e.vertCRS?0:3;default:return 4}}function VH(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function jke(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!Yse(t)}function Wse(t){if(t.type==="integrated-mesh-3dtiles"||t.type==="gaussian-splat")return null;const e=t.url?sc(t.url):void 0;return!(t.spatialReference?.vcsWkid==null&&e!=null&&e.serverType==="ImageServer")&&Zse(t)&&t.heightModelInfo?t.heightModelInfo:Yse(t)?ys.deriveUnitFromSR(Fke,t.spatialReference):null}function Zse(t){return"heightModelInfo"in t}function Jse(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function Yse(t){return Jse(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):Qse(t)}function zke(t){return t.layers!=null||Qse(t)||Jse(t)||Zse(t)}function Qse(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"gaussian-splat":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}const Fke=new ys({heightModel:"gravity-related-height"});let QL,O5=null;async function Vke(t){O5||(O5=H(()=>import("./geometryServiceUtils-CwAxGzQO.js"),[]).then(e=>QL=e)),await O5,ft(t)}async function Xse(t,e,i,r){if(!t)return null;const n=t.spatialReference;return cc()||Qo(n,e)?Is(t,e):QL?QL.projectGeometry(t,e,i,r):(await Promise.race([Vke(r),Xd(r)]),Xse(t,e,i,r))}async function aXe(t,e){try{return t?.spatialReference?await Kie(t,e):null}catch{return null}}let si=class extends _e{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Cn(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const e=this.map?.(),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),i}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,r=>{const n=this._getSupportedSpatialReferences(r);if(n.length>0){const s=this._narrowDownSpatialReferenceCandidates(e,n);s!=null&&(e=s)}return e?.length===1})&&e?.length!==1)return{updating:!0};const i=this._pickSpatialReferenceCandidate(e);return{spatialReference:i?.spatialReference??null,viewingMode:i?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=this.map?.(),i=this.spatialReference;if(!i)return{updating:this._spatialReferenceTask.updating};let r;const n=this._collectLayers([{parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers}],s=>!(!("tileInfo"in s)||!s.tileInfo?.spatialReference.equals(i))&&(r=s,!0),s=>"tileInfo"in s);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:n}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let e={};const i=this._collectLayers(this.mapCollections,r=>{const n=Wse(r);return!!n&&(e={heightModelInfo:n,vcsWkid:r.spatialReference?.vcsWkid,latestVcsWkid:r.spatialReference?.latestVcsWkid},!0)},r=>zke(r));return{...e,updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],i=this._collectLayers(this.mapCollections,r=>{const n="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:n[0],o=n.find(u=>u.spatialReference.equals(this.spatialReference))??s;if(o)return e.push({extent:o,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const u of n)e.push({extent:u,layer:r});return!1});return{candidates:e,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),n=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=Cn(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:n.clone(),task:dc(async s=>{try{const o=await Xse(r.extent,n,"portalItem"in r.layer?r.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(Rn(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const r=new Array;for(const n of e)for(const s of i){if(!n.spatialReference.equals(s.spatialReference))continue;const o=qke(n.viewingMode,s.viewingMode);if(o!==!1){r.push({spatialReference:n.spatialReference,viewingMode:o});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some(({spatialReference:r})=>r.equals(i))&&(e=e.filter(({spatialReference:r})=>r.equals(i))),e.length>1&&e.some(({viewingMode:r})=>r!==2)&&(e=e.filter(({viewingMode:r})=>r!==2)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const n of i){const s=this.getSpatialReferenceSupport(n,e);if(s!=null){const o=s.constraints??[{spatialReference:n,viewingMode:null}];for(const{spatialReference:u,viewingMode:d}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!u.equals(this.userSpatialReference)||r.push({spatialReference:u,viewingMode:d})}}return r}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:r})=>i.equals(r.spatialReference))||e[0]}_collectLayers(e,i,r=()=>!0){switch(this._loadMaybe(this.map?.())){case"loading":return!0;case"failed":return!1}const n=new Uke(r,i);for(const s of e)if(this._collectCollection(s,n),n.done||n.preloading===this.sourcePreloadCount)break;return n.updating}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of e.layers)if((r.type!=="graphics"||!r.internal)&&i.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":if(i.updating||(i.done=i.pushLayer(r)),i.done||i.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.done||i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(i=>{Yr(i)}),"loading"):e.loadStatus:"loaded"}};l([p()],si.prototype,"required",void 0),l([p({constructOnly:!0})],si.prototype,"map",void 0),l([p({constructOnly:!0})],si.prototype,"getSpatialReferenceSupport",void 0),l([p()],si.prototype,"defaultSpatialReference",void 0),l([p()],si.prototype,"userSpatialReference",void 0),l([p()],si.prototype,"sourcePreloadCount",void 0),l([p()],si.prototype,"priorityCollection",void 0),l([p()],si.prototype,"requiresExtentInSpatialReference",void 0),l([p()],si.prototype,"suspended",void 0),l([p({readOnly:!0})],si.prototype,"ready",null),l([p({readOnly:!0})],si.prototype,"heightModelInfoReady",null),l([p({readOnly:!0})],si.prototype,"spatialReference",null),l([p({readOnly:!0})],si.prototype,"extent",null),l([p({readOnly:!0})],si.prototype,"heightModelInfo",null),l([p({readOnly:!0})],si.prototype,"vcsWkid",null),l([p({readOnly:!0})],si.prototype,"latestVcsWkid",null),l([p({readOnly:!0})],si.prototype,"viewingMode",null),l([p({readOnly:!0})],si.prototype,"tileInfo",null),l([p({readOnly:!0})],si.prototype,"mapCollections",null),l([p({readOnly:!0})],si.prototype,"_spatialReferenceTask",null),l([p({readOnly:!0})],si.prototype,"_tileInfoTask",null),l([p({readOnly:!0})],si.prototype,"_heightModelInfoTask",null),l([p({readOnly:!0})],si.prototype,"_extentCandidatesTask",null),l([p()],si.prototype,"_extentTask",null),l([p()],si.prototype,"_projectExtentTask",void 0),si=l([M("esri.views.support.DefaultsFromMap")],si);let Uke=class{constructor(e,i){this.layerFilter=e,this.pushLayer=i,this.preloading=-1,this.updating=!1,this.done=!1}};function qke(t,e){return t!=null?e!=null?t===e&&t:t:e}function Gke(t){return"tryRecycleWith"in t}let Bke=class{constructor(e,i,r){this.layer=e,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._started=!1,this.done=!1,this._deferred=ao(),this.promise=this._deferred.promise,Wa(this._controller.signal,()=>{this._recycleController?.abort();const n=new L("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred?.reject(n)})}tryRecycle(e){if(!this.done||!this.layerView||!Gke(this.layerView))return null;this._recycleController?.abort(),this._recycleController=new AbortController;const i=this.layer.type,r=this._recycleController.signal;for(let n=0;n<e.length;n++){const s=e[n];if(s.type!==i)continue;const o=this.layerView.tryRecycleWith(s,{signal:r});if(o){e.splice(n,1),this.layer=s;const u=this.layerView,d=u.view;return this.promise=o.then(()=>(ft(r),s.emit("layerview-destroy",{view:d,layerView:u}),d.emit("layerview-destroy",{view:d,layerView:u}),s.emit("layerview-create",{view:d,layerView:u}),d.emit("layerview-create",{view:d,layerView:u}),u)),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null,this.promise=null,this._deferred=null}async start(){const{view:e}=this;if(this._started||!e.map)return;this._started=!0;const{_controller:{signal:i},layer:r}=this;this._map=e.map;try{let n,s;if(await r.load({signal:i}),r.prefetchResources&&await r.prefetchResources({signal:i}),Hke(r))n=await r.createLayerView(e,{signal:i});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new L("layer:view-not-supported","No layerview implementation was found");const d=await this.layerViewImporter.importLayerView(r);ft(i),n="default"in d?new d.default({layer:r,view:e}):new d({layer:r,view:e})}const o=()=>{s=gi(s),n.destroyed||n.destroy(),this.done=!0};s=Wa(i,o),ft(i);try{await n.when()}catch(d){throw o(),d}if(!this._map?.allLayers?.includes(r))return o(),void this._deferred?.reject(new L("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=n,r.emit("layerview-create",{view:e,layerView:n}),e.emit("layerview-create",{layer:r,layerView:n}),this.done=!0,this._deferred?.resolve(n)}catch(n){r.emit("layerview-create-error",{view:e,error:n}),e.emit("layerview-create-error",{layer:r,error:n}),this.done=!0,this._deferred?.reject(new L("layerview:create-error","layerview creation failed",{layer:r,error:n}))}}};function Hke(t){return t.createLayerView!==xi.prototype.createLayerView}function Wke(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let zs=class extends _e{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Jh,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const i=this.view.map?.allLayers;if(i)for(const r of i)this.layerViewFilter?.(r)!==!1&&this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=ao(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(vw(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;const{map:i}=this.view;if(!i)return void this.clear();if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,n=[],s=this.view.ready,o=m=>{if(m!=null){for(const v of m)if(v){if(this.layerViewFilter?.(v)===!1)continue;r.add(v);const b=this._layerLayerViewInfoMap.get(v);b&&s?b.start():b||this._recyclingInfoMap.has(v)||n.push(v),"layers"in v&&v.layers&&o(v.layers)}}};for(const m of this._rootCollectionNames)o(Fl(this,m));const u=new Array,d=m=>{const v=m.tryRecycle(n);v?(this._recyclingInfoMap.set(m.layer,m),this.notifyChange("updating"),v.then(()=>{this._recyclingInfoMap.delete(m.layer),this._layerLayerViewInfoMap.set(m.layer,m),this._reschedule(),this.notifyChange("updating")}).catch(b=>{Yr(b)||(this._recyclingInfoMap.delete(m.layer),m.destroy(),this._reschedule(),this.notifyChange("updating"))})):u.push(m)};for(const m of this._layerLayerViewInfoMap.values())r.has(m.layer)||(this._layerLayerViewInfoMap.delete(m.layer),d(m));for(const m of this._recyclingInfoMap.values())r.has(m.layer)||(this._recyclingInfoMap.delete(m.layer),d(m));for(const m of n)this._createLayerView(m);this._refreshCollections(),u.forEach(m=>m.destroy());const h=[i?.ground?.layers,i?.basemap?.baseLayers,i?.basemap?.groundLayers,i?.basemap?.referenceLayers,i?.layers].filter(m=>!!m);r.forEach(m=>"layers"in m&&h.push(m.layers)),this.addHandles(h.map(m=>this._watchUpdatingTracking.addOnCollectionChange(()=>m,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null},this._layersToLayerViews=new Map(e.layerviewMapping)}initialize(){this.addHandles([Wo(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),be(()=>{const e=this.view,i=e?.map;return[i?.basemap,i?.ground,i?.layers,e?.ready]},()=>this._reschedule(),Gt)]),this._preloadLayerViewModules(),this._reschedule()}clearHandles(){this._watchUpdatingTracking.removeAll()}destroy(){this.clear(),NT(this._recyclingInfoMap),NT(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(xt()),this._workPromise=null)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||Mve(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(this._clearCollections(),NT(this._layerLayerViewInfoMap),NT(this._recyclingInfoMap))}async whenLayerView(e){await this._reschedule();const i=this._layerLayerViewInfoMap.get(e)?.promise;if(!i){const r=this._recyclingInfoMap.get(e)?.promise;if(!r)throw new L("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return r}return i}isCreatingLayerViewsForLayer(e,i){this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(e);if(!r?.done)return!0;const n=r.layerView;return!(!n||!i||n.parent===i)||!!(r.done&&n&&"layers"in e&&e.layers?.length)&&e.layers.some(s=>this.isCreatingLayerViewsForLayer(s,n))}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(Fl(this,e),Fl(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){for(const e of this._layersToLayerViews.values())Fl(this,e)?.removeAll()}_populateLayerViewsOwners(e,i,r){if(!e||!i)return void i?.removeAll();let n=0;for(const s of e){const o=this._layerLayerViewInfoMap.get(s);if(!o?.layerView)continue;const{layerView:u}=o;u.layer=s,u.parent=r,i.at(n)!==u&&i.splice(n,0,u),"layers"in s&&Wke(u)&&this._populateLayerViewsOwners(s.layers,u.layerViews,u),++n}n<i.length&&i.splice(n)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new Bke(e,this.view,this.layerViewImporter);i.promise?.then(()=>this._refreshCollections(),r=>{r&&(Yr(r)||r.name==="cancelled:layerview-create")||ie.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this.destroyed||this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};l([p()],zs.prototype,"_workPromise",void 0),l([p({readOnly:!0})],zs.prototype,"_watchUpdatingTracking",void 0),l([p({readOnly:!0})],zs.prototype,"_layersToLayerViews",void 0),l([p({constructOnly:!0})],zs.prototype,"layerviewMapping",void 0),l([p({readOnly:!0})],zs.prototype,"_rootCollectionNames",null),l([p({constructOnly:!0})],zs.prototype,"layerViewFilter",void 0),l([p()],zs.prototype,"layerViewImporter",void 0),l([p()],zs.prototype,"supportsGround",void 0),l([p({readOnly:!0})],zs.prototype,"updating",null),l([p({readOnly:!0})],zs.prototype,"updatingRemaining",null),l([p({constructOnly:!0})],zs.prototype,"view",void 0),zs=l([M("esri.views.support.LayerViewManager")],zs);const Zke=zs;let Cv=class extends _e{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};l([p()],Cv.prototype,"featureTitleFields",void 0),l([p()],Cv.prototype,"utilityNetworkFields",void 0),l([p()],Cv.prototype,"globalIdField",void 0),Cv=l([M("esri.views.support.RequiredFieldsOptions")],Cv);const Jke=Cv;var Rv,rf;let ke=(rf=class extends JI(rF){constructor(e){super(e),this._userSpatialReference=null,this.handles=new xw,this.updatingHandles=new Jh,this.allLayerViews=new Ll({getCollections:()=>this.layerviewCollections,getChildrenFunction:Qke}),this.analyses=new iw,this.basemapView=null,this.dependencies={popup:void 0},this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new my,this.typeSpecificPreconditionsReady=!0,this.layerViews=new fe,this.magnifier=new Nse,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this._lowPriorityCursorHandles=new fe,this._highPriorityCursorHandles=new fe,this.input=new Nke,this.navigation=new bk,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Vse(this),this.persistableViewModels=new fe,this.requiredFieldsOptions=new Jke,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(be(()=>this.preconditionsReady,i=>{const r=this.ready;if(i?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,Rv.views.add(this)):(this._lockedSpatialReference=null,Rv.views.remove(this)),this.notifyChange("spatialReference"),!i&&r)this.toolViewManager?.detach(),this.analysisViewManager?.detach(),this.layerViewManager?.clear(),this._teardown();else if(i&&!r){try{this._startup()}catch(n){return void queueMicrotask(()=>{this.fatalError=new L("view:startup-error","View._startup failed",n)})}this.analysisViewManager?.attach(),this.toolViewManager.attach()}},Zo))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this._validateWithErrorDisplay()]).then(()=>(this._isValid=!0,zb(()=>this.ready)))),this.basemapView=new BIe({view:this}),this.layerViewManager=new Zke({view:this,layerViewFilter:e=>this.layerViewFilter?.(e)??!0,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},layerviewMapping:this._layerToLayerviewMapping}),this.toolViewManager=new wu({view:this}),this.selectionManager=new ike({view:this}),this.addHandles([Pn(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{ie.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),be(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},Gt),be(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},Zo),be(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},Gt)])}get _layerToLayerviewMapping(){return Rv._layerToLayerview}destroy(){this.destroyed||(Rv.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=at(this.graphics),this.analyses=at(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.analysisViewManager=at(this.analysisViewManager),this.toolViewManager=at(this.toolViewManager),this.layerViewManager=at(this.layerViewManager),this.selectionManager=at(this.selectionManager),this.basemapView=at(this.basemapView),this.layerViews?.forEach(e=>e.destroy()),this.layerViews.length=0,this.invalidate(),this.handles.destroy(),this.map=at(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return ie.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get layerviewCollections(){return[this.basemapView?.baseLayerViews,this.basemapView?.groundLayerViews,this.layerViews,this.basemapView?.referenceLayerViews]}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new si({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,i)=>this.getSpatialReferenceSupport(e,i),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??Cke()}set highlights(e){this._set("highlights",Ql(e,this._get("highlights"),fe.ofType(Yh)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||pN(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(ie.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),pN(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((this.defaultsFromMap?.ready??!1)&&!this.spatialReference){const e=!("loaded"in this.map)||this.map.loaded,i=this.map.ground.loaded,r=this.map.basemap?.loaded??!0;return e&&r&&i&&!this.map?.allLayers.length?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=dc(n=>zz(q("view-readyState-waiting-delay"),null,n)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),this._readyStateWaitingTask?.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=Cn(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){const i=e.clone();return i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,i}return e}set spatialReference(e){const i=!Fi(e,this._get("spatialReference"));this._set("_userSpatialReference",e),i&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Za}set timeZone(e){this._userTimeZone=e,mxe(e)||ie.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._highPriorityCursorHandles.at(-1)?.cursor??this._lowPriorityCursorHandles.at(-1)?.cursor??"default"}acquireCursor(e,i="low"){const r=i==="high"?this._highPriorityCursorHandles:this._lowPriorityCursorHandles,n={cursor:e},s=ut(()=>r.remove(n));return r.add(n),this.addHandles(s),s}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new WL}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}getSurface(){return null}importLayerView(e){throw new L("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,i){return this.isResolved()&&!this.ready&&ie.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,i)}forceReadyCycle(){this.ready&&(Pn(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}on(e,i){return super.on(e,i)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}async _validateWithErrorDisplay(){try{await this.validate()}catch(e){const i=document.createElement("div");i.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const r=document.createElement("div");r.innerHTML="Unable to display map. WebGL2 support is required.",r.setAttribute("style","font-size: 24px; font-weight: bold;");const n=document.createElement("div");n.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",n.setAttribute("style","font-size: 18px;");const s=document.createElement("a");s.innerHTML="https://esriurl.com/webgl-faq",s.target="_blank",s.setAttribute("style","font-size: 18px;"),s.href="https://esriurl.com/webgl-faq",i.appendChild(r),i.appendChild(n),i.appendChild(s);const o=this.getSurface();throw o&&o.appendChild(i),e}}},Rv=rf,rf._layerToLayerview=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.basemap.groundLayers","view.basemapView.groundLayerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"],["view.map.layers","view.layerViews"]],rf.views=new fe,rf);l([p()],ke.prototype,"_userSpatialReference",void 0),l([p()],ke.prototype,"activeTool",null),l([p({readOnly:!0})],ke.prototype,"allLayerViews",void 0),l([p({readOnly:!0})],ke.prototype,"layerviewCollections",null),l([p(_A(iw,"analyses"))],ke.prototype,"analyses",void 0),l([p()],ke.prototype,"animation",null),l([p()],ke.prototype,"basemapView",void 0),l([p()],ke.prototype,"center",null),l([p()],ke.prototype,"defaultsFromMapSettings",null),l([p()],ke.prototype,"defaultsFromMap",null),l([p()],ke.prototype,"dependencies",void 0),l([p()],ke.prototype,"displayFilterEnabled",void 0),l([p({type:Xe})],ke.prototype,"extent",null),l([p()],ke.prototype,"fatalError",void 0),l([p(_A(my,"graphics"))],ke.prototype,"graphics",void 0),l([p({readOnly:!0,type:ys})],ke.prototype,"heightModelInfo",null),l([p({type:fe.ofType(Yh)})],ke.prototype,"highlights",null),l([p({readOnly:!0})],ke.prototype,"interacting",null),l([p({constructOnly:!0})],ke.prototype,"layerViewFilter",void 0),l([p({readOnly:!0})],ke.prototype,"navigating",null),l([p({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],ke.prototype,"preconditionsReady",null),l([p({readOnly:!0})],ke.prototype,"typeSpecificPreconditionsReady",void 0),l([p({type:fe,readOnly:!0})],ke.prototype,"layerViews",void 0),l([p()],ke.prototype,"resolution",null),l([p({type:Nse})],ke.prototype,"magnifier",void 0),l([p({value:null,type:wne})],ke.prototype,"map",null),l([p()],ke.prototype,"padding",void 0),l([p({readOnly:!0})],ke.prototype,"ready",void 0),l([p()],ke.prototype,"_readyStateWaitingTask",void 0),l([p({readOnly:!0})],ke.prototype,"readyState",null),l([p({type:we})],ke.prototype,"spatialReference",null),l([p()],ke.prototype,"stationary",null),l([p({type:qt})],ke.prototype,"timeExtent",null),l([p({type:String,nonNullable:!0})],ke.prototype,"timeZone",null),l([p()],ke.prototype,"tools",null),l([p()],ke.prototype,"toolViewManager",void 0),l([p({readOnly:!0})],ke.prototype,"type",void 0),l([p({type:Number})],ke.prototype,"scale",void 0),l([p({readOnly:!0})],ke.prototype,"updating",void 0),l([p({readOnly:!0})],ke.prototype,"initialExtentRequired",void 0),l([p({readOnly:!0})],ke.prototype,"initialExtent",null),l([p()],ke.prototype,"cursor",null),l([p({readOnly:!0})],ke.prototype,"input",void 0),l([p({type:bk,nonNullable:!0})],ke.prototype,"navigation",void 0),l([p()],ke.prototype,"layerViewManager",void 0),l([p()],ke.prototype,"analysisViewManager",void 0),l([p()],ke.prototype,"selectionManager",void 0),l([p()],ke.prototype,"width",void 0),l([p()],ke.prototype,"height",void 0),l([p({readOnly:!0})],ke.prototype,"resizing",void 0),l([p({value:null,readOnly:!0})],ke.prototype,"size",null),l([p({readOnly:!0})],ke.prototype,"suspended",void 0),l([p({readOnly:!0})],ke.prototype,"viewEvents",void 0),l([p({readOnly:!0})],ke.prototype,"persistableViewModels",void 0),l([p()],ke.prototype,"_isValid",void 0),l([p()],ke.prototype,"_readyCycleForced",void 0),l([p()],ke.prototype,"_lockedSpatialReference",void 0),l([p()],ke.prototype,"_userTimeZone",void 0),l([p()],ke.prototype,"_lockedTimeZone",void 0),l([p()],ke.prototype,"_userTimeExtent",void 0),l([p()],ke.prototype,"_lockedTimeExtent",void 0),l([p({type:WL})],ke.prototype,"theme",void 0),l([p({readOnly:!0,type:WL})],ke.prototype,"effectiveTheme",null),ke=Rv=l([M("esri.views.View")],ke);const C5=globalThis.$arcgis;C5&&!C5.views&&Object.defineProperty(C5,"views",{configurable:!1,enumerable:!0,writable:!1,value:ke.views});const Yke=ke;function Qke(t){return t.layerViews}function Tt(){return[0,0]}function Xke(t){return[t[0],t[1]]}function Xu(t,e){return[t,e]}function Kke(t,e){return[t,e]}function eOe(t,e=Tt()){const i=Math.min(2,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function Kse(){return Tt()}function eoe(){return Xu(1,1)}function toe(){return Xu(1,0)}function ioe(){return Xu(0,1)}const roe=Kse(),tOe=eoe(),iOe=toe(),rOe=ioe();Object.freeze(Object.defineProperty({__proto__:null,ONES:tOe,UNIT_X:iOe,UNIT_Y:rOe,ZEROS:roe,clone:Xke,create:Tt,freeze:Kke,fromArray:eOe,fromValues:Xu,ones:eoe,unitX:toe,unitY:ioe,zeros:Kse},Symbol.toStringTag,{value:"Module"}));function nOe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function noe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function sOe(t,e,i,r,n,s,o){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t}function IF(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],u=e[5];let d=i*s-r*n;return d?(d=1/d,t[0]=s*d,t[1]=-r*d,t[2]=-n*d,t[3]=i*d,t[4]=(n*u-s*o)*d,t[5]=(r*o-i*u)*d,t):null}function oOe(t){return t[0]*t[3]-t[1]*t[2]}function soe(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],u=e[4],d=e[5],h=i[0],m=i[1],v=i[2],b=i[3],_=i[4],x=i[5];return t[0]=r*h+s*m,t[1]=n*h+o*m,t[2]=r*v+s*b,t[3]=n*v+o*b,t[4]=r*_+s*x+u,t[5]=n*_+o*x+d,t}function Ex(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],u=e[4],d=e[5],h=Math.sin(i),m=Math.cos(i);return t[0]=r*m+s*h,t[1]=n*m+o*h,t[2]=r*-h+s*m,t[3]=n*-h+o*m,t[4]=u,t[5]=d,t}function wk(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],u=e[4],d=e[5],h=i[0],m=i[1];return t[0]=r*h,t[1]=n*h,t[2]=s*m,t[3]=o*m,t[4]=u,t[5]=d,t}function ow(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],u=e[4],d=e[5],h=i[0],m=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=r*h+s*m+u,t[5]=n*h+o*m+d,t}function ooe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t}function aoe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function kF(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function aOe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function lOe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function uOe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function loe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function cOe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function dOe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t}function pOe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function hOe(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],u=t[5],d=e[0],h=e[1],m=e[2],v=e[3],b=e[4],_=e[5],x=Zi();return Math.abs(i-d)<=x*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(r-h)<=x*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(n-m)<=x*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(s-v)<=x*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(o-b)<=x*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(u-_)<=x*Math.max(1,Math.abs(u),Math.abs(_))}const fOe=soe,mOe=loe;Object.freeze(Object.defineProperty({__proto__:null,add:uOe,copy:nOe,determinant:oOe,equals:hOe,exactEquals:pOe,frob:lOe,fromRotation:ooe,fromScaling:aoe,fromTranslation:kF,identity:noe,invert:IF,mul:fOe,multiply:soe,multiplyScalar:cOe,multiplyScalarAndAdd:dOe,rotate:Ex,scale:wk,set:sOe,str:aOe,sub:mOe,subtract:loe,translate:ow},Symbol.toStringTag,{value:"Module"}));function Ku(){return[1,0,0,1,0,0]}function yOe(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function gOe(t,e,i,r,n,s){return[t,e,i,r,n,s]}const vOe=Ku();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:vOe,clone:yOe,create:Ku,fromValues:gOe},Symbol.toStringTag,{value:"Module"}));const zT={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Kt({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:we.WebMercator}),minus180Line:new Kt({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:we.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Kt({paths:[[[180,-180],[180,180]]],spatialReference:we.WGS84}),minus180Line:new Kt({paths:[[[-180,-180],[-180,180]]],spatialReference:we.WGS84})}};function iy(t,e){return Math.ceil((t-e)/(2*e))}function uoe(t,e){const i=oS(t);for(const r of i)for(const n of r)n[0]+=e;return t}function oS(t){return V0(t)?t.rings:t.paths}function bOe(t,e){return e?{...e,query:{...t,...e.query}}:{query:t}}function coe(t){return typeof t=="string"?Xr(t):z(t)}function wOe(t,e,i){const r={};for(const n in t){if(n==="declaredClass")continue;const s=t[n];if(s!=null&&typeof s!="function")if(Array.isArray(s))r[n]=s.map(o=>wOe(o));else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(i?.[n]);r[n]=e?o:JSON.stringify(o)}else r[n]=e?s:JSON.stringify(s);else r[n]=s}return r}function _Oe(t,e){return t?e&&d6(t)?e:c6(t)??pt?.findCredential(t)?.token:null}async function hXe(t,e,i){const r=_Oe(t,e);return r||(!pt&&St.request.useIdentity&&await H(()=>import("./IdentityManager-CYdNQob-.js"),[]),(await pt.getCredential(t,i))?.token)}async function SOe(t,e,i,r){const n=coe(t),s=e[0].spatialReference,o={...r,responseType:"json",query:{...n.query,f:"json",sr:uA(s),target:JSON.stringify({geometryType:Iw(e[0]),geometries:e}),cutter:JSON.stringify(i)}},u=await $t(n.path+"/cut",o),{cutIndexes:d,geometries:h=[]}=u.data;return{cutIndexes:d,geometries:h.map(m=>{const v=oc(m);return v.spatialReference=s,v})}}function xOe(t){return{geometryType:Iw(t[0]),geometries:t.map(e=>e.toJSON())}}function doe(t,e,i){const r=B1e(e);return t.map(n=>{const s=r.fromJSON(n);return s.spatialReference=i,s})}async function $Oe(t,e,i){const r=typeof t=="string"?Xr(t):t,n=e[0].spatialReference,s=Iw(e[0]),o={...i,query:{...r.query,f:"json",sr:uA(n),geometries:JSON.stringify(xOe(e))}},{data:u}=await $t(r.path+"/simplify",o);return doe(u.geometries,s,n)}const poe=()=>ie.getLogger("esri.geometry.support.normalizeUtils");function TOe(t){return t.type==="polygon"}function EOe(t){return t[0].type==="polygon"}function MOe(t){return t[0].type==="polyline"}function UH(t){const e=[];let i=0,r=0;for(let n=0;n<t.length;n++){const s=t[n];let o=null;for(let u=0;u<s.length;u++)o=s[u],e.push(o),u===0?(i=o[0],r=i):(i=Math.min(i,o[0]),r=Math.max(r,o[0]));o&&e.push([(i+r)/2,0])}return e}function AOe(t,e){if(!(t instanceof Kt||t instanceof hi)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw poe().error(n),new L("internal:geometry",n)}const i=oS(t),r=[];for(const n of i){const s=[];r.push(s),s.push([n[0][0],n[0][1]]);for(let o=0;o<n.length-1;o++){const u=n[o][0],d=n[o][1],h=n[o+1][0],m=n[o+1][1],v=Math.sqrt((h-u)*(h-u)+(m-d)*(m-d)),b=(m-d)/v,_=(h-u)/v,x=v/e;if(x>1){for(let O=1;O<=x-1;O++){const D=O*e,R=_*D+u,P=b*D+d;s.push([R,P])}const $=(v+Math.floor(x-1)*e)/2,E=_*$+u,A=b*$+d;s.push([E,A])}s.push([h,m])}}return TOe(t)?new hi({rings:r,spatialReference:t.spatialReference}):new Kt({paths:r,spatialReference:t.spatialReference})}function qH(t,e,i){if(e){const r=AOe(t,1e6);t=M0(r,!0)}return i&&(t=uoe(t,i)),t}function GH(t,e,i){if(Array.isArray(t)){const r=t[0];if(r>e){const n=iy(r,e);t[0]=r+n*(-2*e)}else if(r<i){const n=iy(r,i);t[0]=r+n*(-2*i)}}else{const r=t.x;if(r>e){const n=iy(r,e);t=t.clone().offset(n*(-2*e),0)}else if(r<i){const n=iy(r,i);t=t.clone().offset(n*(-2*i),0)}}return t}function IOe(t,e){let i=-1;for(let r=0;r<e.cutIndexes.length;r++){const n=e.cutIndexes[r],s=e.geometries[r],o=oS(s);for(let u=0;u<o.length;u++){const d=o[u];d.some(h=>{if(h[0]<180)return!0;{let m=0;for(let b=0;b<d.length;b++){const _=d[b][0];m=_>m?_:m}m=Number(m.toFixed(9));const v=-360*iy(m,180);for(let b=0;b<d.length;b++){const _=s.getPoint(u,b);s.setPoint(u,b,_.clone().offset(v,0))}return!0}})}if(n===i){if(EOe(t))for(const u of oS(s))t[n]=t[n].addRing(u);else if(MOe(t))for(const u of oS(s))t[n]=t[n].addPath(u)}else i=n,t[n]=s}return t}async function kOe(t,e,i){if(!Array.isArray(t))return kOe([t],e);e&&typeof e!="string"&&poe().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:e?.url??St.geometryServiceUrl;let n,s,o,u,d,h,m,v,b=0;const _=[],x=[];for(const R of t)if(R!=null)if(n||(n=R.spatialReference,s=es(n),o=n.isWebMercator,h=o?102100:4326,u=zT[h].maxX,d=zT[h].minX,m=zT[h].plus180Line,v=zT[h].minus180Line),s)if(R.type==="mesh")x.push(R);else if(R.type==="point")x.push(GH(R.clone(),u,d));else if(R.type==="multipoint"){const P=R.clone();P.points=P.points.map(j=>GH(j,u,d)),x.push(P)}else if(R.type==="extent"){const P=R.clone()._normalize(!1,!1,s);x.push(P.rings?new hi(P):P)}else if(R.extent){const P=R.extent,j=iy(P.xmin,d)*(2*u);let Q=j===0?R.clone():uoe(R.clone(),j);P.offset(j,0);let{xmin:re,xmax:ce}=P;re=Number(re.toFixed(9)),ce=Number(ce.toFixed(9)),P.intersects(m)&&ce!==u?(b=ce>b?ce:b,Q=qH(Q,o),_.push(Q),x.push("cut")):P.intersects(v)&&re!==d?(b=ce*(2*u)>b?ce*(2*u):b,Q=qH(Q,o,360),_.push(Q),x.push("cut")):x.push(Q)}else x.push(R.clone());else x.push(R);else x.push(R);let $=iy(b,u),E=-90;const A=$,O=new Kt;for(;$>0;){const R=360*$-180;O.addPath([[R,E],[R,-1*E]]),E*=-1,$--}if(_.length>0&&A>0){const R=IOe(_,await SOe(r,_,O,i)),P=[],j=[];for(let ce=0;ce<x.length;ce++){const ue=x[ce];if(ue!=="cut")j.push(ue);else{const ye=R.shift(),he=t[ce];he!=null&&he.type==="polygon"&&he.rings&&he.rings.length>1&&ye.rings.length>=he.rings.length?(P.push(ye),j.push("simplify")):j.push(o?Wh(ye):ye)}}if(!P.length)return j;const Q=await $Oe(r,P,i),re=[];for(let ce=0;ce<j.length;ce++){const ue=j[ce];ue!=="simplify"?re.push(ue):re.push(o?Wh(Q.shift()):Q.shift())}return re}const D=[];for(let R=0;R<x.length;R++){const P=x[R];if(P!=="cut")D.push(P);else{const j=_.shift();D.push(o===!0?Wh(j):j)}}return D}function OOe(t){if(!t)return null;const e=t.extent;if(!e)return null;const i=t.spatialReference&&es(t.spatialReference);if(!i)return e;const[r,n]=i.valid,s=2*n,{width:o}=e;let u,{xmin:d,xmax:h}=e;if([d,h]=[h,d],t.type==="extent"||o===0||o<=n||o>s||d<r||h>n)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;u=UH(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;u=UH(t.paths);break;case"multipoint":u=t.points}const m=e.clone();for(let v=0;v<u.length;v++){let b=u[v][0];b<0?(b+=n,h=Math.max(b,h)):(b-=n,d=Math.min(b,d))}return m.xmin=d,m.xmax=h,m.width<o?(m.xmin-=n,m.xmax-=n,m):e}function OF(t,e,i){const r=es(i);if(r==null)return t;const[n,s]=r.valid,o=2*s;let u=0,d=0;e>s?u=Math.ceil(Math.abs(e-s)/o):e<n&&(u=-Math.ceil(Math.abs(e-n)/o)),t>s?d=Math.ceil(Math.abs(t-s)/o):t<n&&(d=-Math.ceil(Math.abs(t-n)/o));let h=t+(u-d)*o;const m=h-e;return m>s?h-=o:m<n&&(h+=o),h}function fXe(t,e){return CF(e)?.normalize(t)??t}function CF(t){const e=es(t);if(e==null)return null;const[i,r]=e.valid;return new DI(i,r)}const mXe=CF(we.WGS84);CF(we.WebMercator);const hoe=96,foe=39.37,COe=180/Math.PI;function moe(t){return t.wkid?t:t.spatialReference||we.WGS84}function RF(t,e){return e.type?Nr(t,e.x,e.y):cy(t,e)}function yoe(t){return Kr(t)}function _k(t,e,i=0){let r=t.width,n=t.height;if(i!==0){const u=$w(i),d=Math.abs(Math.cos(u)),h=Math.abs(Math.sin(u));r=t.width*d+t.height*h,n=t.width*h+t.height*d}const s=Math.max(1,e[0]),o=Math.max(1,e[1]);return Math.max(r/s,n/o)*FOe(t.spatialReference)}async function t2(t,e,i,r){let n,s;if(!t||Array.isArray(t)&&!t.length)return null;if(fe.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const u=t.every(m=>"attributes"in m),d=t.some(m=>!m.geometry);let h=t;if(u&&d&&e&&e.allLayerViews){const m=new Map;for(const x of t){const $=x.layer,E=m.get($)||[],A=x.attributes[$.objectIdField];A!=null&&E.push(A),m.set($,E)}const v=[];m.forEach((x,$)=>{const E=e.allLayerViews?.find(A=>A.layer.id===$.id);if(E&&"queryFeatures"in E){const A=$.createQuery();A.objectIds=x,A.returnGeometry=!0,v.push(E.queryFeatures(A))}});const b=await Promise.all(v),_=[];for(const x of b)if(x&&x.features&&x.features.length)for(const $ of x.features)$.geometry!=null&&_.push($.geometry);h=_}for(const m of h)r=await t2(m,e,i,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")n=new je(t);else if(t instanceof Wr)n=t;else if("geometry"in t){if(t.geometry)n=t.geometry;else if(t.layer){const u=t.layer,d=e.allLayerViews?.find(h=>h.layer.id===u.id);if(d&&"queryFeatures"in d){const h=u.createQuery();h.objectIds=[t.attributes[u.objectIdField]],h.returnGeometry=!0,n=(await d.queryFeatures(h))?.features?.[0]?.geometry}}}if(n==null)return null;switch(n.type){case"point":s=new Xe({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=OOe(n);break;default:s=n.extent}if(!s)return null;cc()||Qo(s.spatialReference,i)||await Xd();const o=Is(s,i);if(!o)return null;if(r){const u=o.center,d=u.clone();d.x=OF(u.x,r.center.x,i),d.x!==u.x&&o.centerAt(d),r=r.union(o)}else r=o;return r}function ROe(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer?.minScale!=null&&t.layer.maxScale!=null){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,i=0;for(const r of t){const n=r.layer;n?.minScale&&n.maxScale&&(e=n.minScale<e?n.minScale:e,i=n.maxScale>i?n.maxScale:i)}return e&&i?{min:e,max:i}:null}}}function BH(t,e){const i=moe(t);return Fi(i,e)||i.imageCoordinateSystem||e.imageCoordinateSystem?t:Is(t,e)}async function POe(t,e){if(!t||!e)return new Jr({targetGeometry:new je,scale:0,rotation:0});let i=e.spatialReference;const{constraints:r,padding:n,viewpoint:s,size:o}=e,u=[n?o[0]-n.left-n.right:o[0],n?o[1]-n.top-n.bottom:o[1]];let d=null;t instanceof Jr?d=t:t.viewpoint?d=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(d=t.target);let h=null;d?.targetGeometry?h=d.targetGeometry:t instanceof Xe?h=t:t instanceof Wr?h=await t2(t,e,i):t&&(h=await t2(t.center,e,i)||await t2(t.target,e,i)||await t2(t,e,i)),!h&&s?.targetGeometry?h=s.targetGeometry:!h&&e.extent&&(h=e.extent),i||(i=moe(e.spatialReference||e.extent||h)),cc()||Fi(h.spatialReference,i)||Qo(h.spatialReference,i)||await Xd();const m=BH(h,i),v="center"in m?m.center:m;e.pickClosestTarget!==!1&&v.type==="point"&&s.targetGeometry?.type==="point"&&(v.x=OF(v.x,s.targetGeometry.x,v.spatialReference));let b=0;d?b=d.rotation:t.hasOwnProperty("rotation")?b=t.rotation:s&&(b=s.rotation);let _=0;_=d?.targetGeometry!=null&&d.targetGeometry.type==="point"?d.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(t.zoom):Array.isArray(h)||h.type==="point"||h.type==="extent"&&h.width===0&&h.height===0?s.scale:_k(BH(h.extent,i),u,b);const x=ROe(t.target??t);x&&(x.min&&x.min<_?_=x.min:x.max&&x.max>_&&(_=x.max));let $=new Jr({targetGeometry:v,scale:_,rotation:b});return r&&($=r.fit($),r.constrainByGeometry($),r.rotationEnabled||($.rotation=s.rotation)),$}function Xn(t,e){const i=t.targetGeometry,r=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function DOe(t,e,i){return i?Nr(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):Mw(t,e,.5)}const NOe=(function(){const t=Tt();return function(e,i,r){const n=i.targetGeometry;RF(t,n);const s=.5*Nw(i);return e.xmin=t[0]-s*r[0],e.ymin=t[1]-s*r[1],e.xmax=t[0]+s*r[0],e.ymax=t[1]+s*r[1],e.spatialReference=n.spatialReference,e}})();function LOe(t,e,i,r,n){return XL(t,e,i.center),t.scale=_k(i,r),n?.constraints?.constrain(t),t}function jOe(t,e,i,r){return NF(t,e,i,r),IF(t,t)}const goe=(function(){const t=Tt();return function(e,i,r){return BI(e,VOe(e,i),DOe(t,i,r))}})(),zOe=(function(){const t=Ku(),e=Tt();return function(i,r,n,s){const o=Nw(r),u=PF(r);return Nr(e,o,o),aoe(t,e),Ex(t,t,u),ow(t,t,goe(e,n,s)),ow(t,t,[0,s.top-s.bottom]),Nr(i,t[4],t[5])}})();function Nw(t){return t.scale*voe(t.targetGeometry?.spatialReference)}function voe(t){return Fo(t)?1/(yoe(t)*foe*hoe):1}function PF(t){return T6(t.rotation)||0}function FOe(t){return Fo(t)?yoe(t)*foe*hoe:1}function VOe(t,e){return Mw(t,e,.5)}const DF=(function(){const t=Tt(),e=Tt(),i=Tt();return function(r,n,s,o,u,d){return Tee(t,n),Mw(e,s,.5*d),Nr(i,1/o*d,-1/o*d),kF(r,e),u&&Ex(r,r,u),wk(r,r,i),ow(r,r,t),r}})(),NF=(function(){const t=Tt();return function(e,i,r,n){const s=Nw(i),o=PF(i);return RF(t,i.targetGeometry),DF(e,t,r,s,o,n)}})(),UOe=(function(){const t=Tt();return function(e,i,r,n){const s=Nw(i);return RF(t,i.targetGeometry),DF(e,t,r,s,0,n)}})();function boe(t){const e=es(t);return e?e.valid[1]-e.valid[0]:0}function qOe(t,e){return Math.round(boe(t)/e)}const GOe=(function(){const t=Tt(),e=Tt(),i=[0,0,0];return function(r,n,s){zr(t,r,n),RD(t,t),zr(e,r,s),RD(e,e),Eee(i,t,e);let o=Math.acos(wf(t,e)/(Wb(t)*Wb(e)))*COe;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}})(),BOe=(function(){const t=Tt();return function(e,i,r,n){const s=e.targetGeometry;return Xn(e,i),zOe(t,i,r,n),s.x+=t[0],s.y+=t[1],e}})(),XL=function(t,e,i){Xn(t,e);const r=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t},HOe=(function(){const t=Tt();return function(e,i,r,n,s){s||(s="center"),BI(t,r,n),Mw(t,t,.5);const o=t[0],u=t[1];switch(s){case"center":Nr(t,0,0);break;case"left":Nr(t,-o,0);break;case"top":Nr(t,0,u);break;case"right":Nr(t,o,0);break;case"bottom":Nr(t,0,-u);break;case"top-left":Nr(t,-o,u);break;case"bottom-left":Nr(t,-o,-u);break;case"top-right":Nr(t,o,u);break;case"bottom-right":Nr(t,o,-u)}return Sk(e,i,t),e}})();function yXe(t,e,i){return Xn(t,e),t.rotation+=i,t}function WOe(t,e,i){return Xn(t,e),t.rotation=i,t}const ZOe=(function(){const t=Tt();return function(e,i,r,n,s){return Xn(e,i),isNaN(r)||r===0||(_oe(t,n,i,s),e.scale=i.scale*r,Soe(t,t,e,s),Sk(e,e,Nr(t,t[0]-n[0],n[1]-t[1]))),e}})();function HH(t,e,i){return Xn(t,e),t.scale=i,t}const woe=(function(){const t=Tt();return function(e,i,r,n,s,o){return Xn(e,i),isNaN(r)||r===0||(_oe(t,s,i,o),e.scale=i.scale*r,e.rotation+=n,Soe(t,t,e,o),Sk(e,e,Nr(t,t[0]-s[0],s[1]-t[1]))),e}})(),gXe=(function(){const t=Tt(),e=Tt();return function(i,r,n,s,o,u,d){return goe(e,u,d),E6(t,o,e),s?woe(i,r,n,s,t,u):ZOe(i,r,n,t,u)}})(),_oe=(function(){const t=Ku();return function(e,i,r,n){return Uu(e,i,jOe(t,r,n,1))}})(),Soe=(function(){const t=Ku();return function(e,i,r,n){return Uu(e,i,NF(t,r,n,1))}})(),Sk=(function(){const t=Tt(),e=Ku();return function(i,r,n){Xn(i,r);const s=Nw(r),o=i.targetGeometry;return ooe(e,PF(r)),wk(e,e,Xu(s,s)),Uu(t,n,e),o.x+=t[0],o.y+=t[1],i}})();function xoe(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function JOe(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function YOe(t,e,i,r,n,s){const o=new Float32Array(6);return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function $oe(t,e,i,r){const n=e[r],s=e[r+1];t[r]=i[0]*n+i[2]*s+i[4],t[r+1]=i[1]*n+i[3]*s+i[5]}function QOe(t,e,i,r=0,n=0,s=2){const o=n||e.length/s;for(let u=r;u<o;u++)$oe(t,e,i,u*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:JOe,create:xoe,fromValues:YOe,transform:$oe,transformMany:QOe},Symbol.toStringTag,{value:"Module"}));function GM(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function XOe(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function KOe(t,e,i,r,n,s,o,u,d){const h=new Float32Array(9);return h[0]=t,h[1]=e,h[2]=i,h[3]=r,h[4]=n,h[5]=s,h[6]=o,h[7]=u,h[8]=d,h}Object.freeze(Object.defineProperty({__proto__:null,clone:XOe,create:GM,fromValues:KOe},Symbol.toStringTag,{value:"Module"}));function Toe(){return new Float32Array(2)}function eCe(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function aw(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function Eoe(){return Toe()}function Moe(){return aw(1,1)}function Aoe(){return aw(1,0)}function Ioe(){return aw(0,1)}const tCe=Eoe(),iCe=Moe(),rCe=Aoe(),nCe=Ioe();Object.freeze(Object.defineProperty({__proto__:null,ONES:iCe,UNIT_X:rCe,UNIT_Y:nCe,ZEROS:tCe,clone:eCe,create:Toe,fromValues:aw,ones:Moe,unitX:Aoe,unitY:Ioe,zeros:Eoe},Symbol.toStringTag,{value:"Module"}));function sCe(t){return t instanceof Float32Array&&t.length>=2}function oCe(t){return Array.isArray(t)&&t.length>=2}function R5(t){return sCe(t)||oCe(t)}var KL;const Nc=[0,0];let ed=KL=class extends B{constructor(t){super(t),this._viewpoint2D={center:Tt(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Xe,this.id=0,this.inverseTransform=Ku(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Ku(),this.transformNoRotation=Ku(),this.displayMat3=GM(),this.displayViewMat3=GM(),this.viewMat3=GM(),this.viewMat2d=xoe(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=Xn(i,t.viewpoint),this._set("size",cy(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new KL({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return R5(e)?Uu(t,e,this.inverseTransform):(Nc[0]=e,Nc[1]=i,Uu(t,Nc,this.inverseTransform))}toScreen(t,e,i){return R5(e)?Uu(t,e,this.transform):(Nc[0]=e,Nc[1]=i,Uu(t,Nc,this.transform))}toScreenNoRotation(t,e,i){return R5(e)?Uu(t,e,this.transformNoRotation):(Nc[0]=e,Nc[1]=i,Uu(t,Nc,this.transformNoRotation))}wrapMapCoordinate(t,e){cy(t,e);const[i]=e,[r]=this.center,{extent:n,spatialReference:s}=this;let{xmin:o,xmax:u}=n;if(s.isWrappable){const d=boe(s)/2;o=Math.max(o,r-d),u=Math.min(u,r+d)}return(i<o||i>u)&&(t[0]=OF(i,r,s)),t}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,n=this._get("size");return DF(t,i,n,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),o=new Jr({targetGeometry:new je(t[0],t[1],e),scale:i,rotation:r});if(this._set("viewpoint",o),!s||!e||!i)return;this.resolution=Nw(o),this.rotation=r,this.scale=i,this.spatialReference=e,cy(this.center,t);const u=s[0]!==0?2/s[0]:0,d=s[1]!==0?-2/s[1]:0;F0(this.displayMat3,u,0,0,0,d,0,-1,1,1);const h=Cee(this.viewMat3),m=aw(s[0]/2,s[1]/2),v=aw(-s[0]/2,-s[1]/2),b=T6(r);DD(h,h,m),Dee(h,h,b),DD(h,h,v),RS(this.displayViewMat3,this.displayMat3,h);const _=kF(this.viewMat2d,m);return Ex(_,_,b),ow(_,_,v),NOe(this.extent,o,s),NF(this.transform,o,s,n),IF(this.inverseTransform,this.transform),UOe(this.transformNoRotation,o,s,n),this.worldScreenWidth=qOe(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};l([p({readOnly:!0})],ed.prototype,"id",void 0),l([p({value:1,json:{write:!0}})],ed.prototype,"pixelRatio",null),l([p({json:{write:!0}})],ed.prototype,"size",null),l([p()],ed.prototype,"spatialReference",void 0),l([p({type:Jr,json:{write:!0}})],ed.prototype,"viewpoint",null),l([p({readOnly:!0})],ed.prototype,"visibleArea",null),ed=KL=l([M("esri.views.2d.ViewState")],ed);const WH=ed;var e4,t4;let Pd=e4=class extends _e{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new e4({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};l([p()],Pd.prototype,"left",void 0),l([p()],Pd.prototype,"top",void 0),l([p()],Pd.prototype,"right",void 0),l([p()],Pd.prototype,"bottom",void 0),Pd=e4=l([M("esri.views.2d.PaddedViewState.Padding")],Pd);let Pv=t4=class extends WH{constructor(...t){super(...t),this.paddedViewState=new WH,this._updateContent=(()=>{const e=Tt();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const n=this.paddedViewState;Nr(e,r.left+r.right,r.top+r.bottom),zr(e,i,e),cy(n.size,e);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(be(()=>[this.size,this.padding],()=>this._updateContent(),Zo)),this.padding=new Pd,this.size=[0,0]}set padding(t){this._set("padding",t||new Pd)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const i=this._get("padding");i&&(e=BOe(t.clone(),t,this._get("size"),i));const{targetGeometry:r,rotation:n,scale:s}=e,{x:o,y:u,spatialReference:d}=r,h=this._viewpoint2D;h.center[0]=o,h.center[1]=u,h.rotation=n,h.scale=s,h.spatialReference=d,this._update()}}clone(){return new t4({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};l([p()],Pv.prototype,"paddedViewState",void 0),l([p({type:Pd})],Pv.prototype,"padding",null),l([p()],Pv.prototype,"viewpoint",null),Pv=t4=l([M("esri.views.2d.PaddedViewState")],Pv);const LF=Pv;let i2=class extends _e{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};l([p()],i2.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),l([p()],i2.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),i2=l([M("esri.views.support.debugFlags")],i2);const aCe=new i2,koe=Symbol("Yield");let lCe=class{constructor(){this._tasks=new Array,this._numPendingTasks=My(0),this._readyToRun=My(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get readyToRun(){return this._readyToRun.value}_updateReadyToRun(){this._readyToRun.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return koe;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,r){return this._addTask((n,s)=>new JH(n,s,e,i,r),Array.prototype.push)}unshift(e,i,r){return this._addTask((n,s)=>new JH(n,s,e,i,r),Array.prototype.unshift)}pushGenerator(e,i,r){return this._addTask((n,s)=>new uCe(n,s,e,i,r),Array.prototype.push)}_process(e){if(this._tasks.length===0)return!1;const i=this._tasks.shift();this._updateReadyToRun();try{if(Rn(i.signal))this._cancelTask(i,xt());else switch(i.type){case 0:this._processSimple(i,e);break;case 1:this._processGenerator(i,e);break;case 2:this._processIterator(i,e);break;default:}}catch(r){i.reject(r)}return!0}cancelAll(){const e=xt();for(const i of this._tasks)this._cancelTask(i,e);this._tasks.length=0,this._updateReadyToRun()}_cancelTask(e,i){if(e.abortCallback){const r=e.abortCallback(i);e.type===2&&e.iterator.return&&ZH(e.iterator.return()),Kn(r)?r.then(e.resolve,e.reject):e.resolve(r)}else e.type===2&&e.iterator.throw&&ZH(e.iterator.throw(i)),e.reject(i)}_onIteratorResult(e,i){i.done?e.resolve(i.value):(this._tasks.unshift(e),this._updateReadyToRun())}_processSimple(e,i){const r=e.callback(i);Kn(r)?r.then(e.resolve,e.reject):e.resolve(r)}_processGenerator(e,i){const r=e.generatorFunction(i),n=new cCe(e.resolve,e.reject,r,e.signal,e.abortCallback);this._processIterator(n,i)}_processIterator(e,i){const r=e.iterator.next(i);Kn(r)?r.then(n=>this._onIteratorResult(e,n),e.reject):this._onIteratorResult(e,r)}_addTask(e,i){return new Promise((r,n)=>{const s=e(r,n);i.call(this._tasks,s),++this._numPendingTasks.value,this._updateReadyToRun()}).finally(()=>--this._numPendingTasks.value)}};function ZH(t){Kn(t)?t.then(P5,P5):P5(t)}function P5(t){Yr(t)||t instanceof Error||t instanceof L||t!=null&&typeof t=="object"&&"done"in t&&t.done||ie.getLogger("esri.layers.support.PromiseQueue").warn("Generator iterator was aborted, but it is not done.")}let jF=class{constructor(e,i,r=void 0,n=void 0){this.resolve=e,this.reject=i,this.signal=r,this.abortCallback=n}},JH=class extends jF{constructor(e,i,r,n,s){super(e,i,n,s),this.callback=r,this.type=0}},uCe=class extends jF{constructor(e,i,r,n,s){super(e,i,n,s),this.generatorFunction=r,this.type=1}},cCe=class extends jF{constructor(e,i,r,n,s){super(e,i,n,s),this.iterator=r,this.type=2}};function dCe(){return new yCe}const et={RESOURCE_CONTROLLER_IMMEDIATE:"immediate",RESOURCE_CONTROLLER:"schedule",SLIDE:"slide",STREAM_DATA_LOADER:"stream loader",ELEVATION_QUERY:"elevation query",TERRAIN_SURFACE:"terrain",SURFACE_GEOMETRY_UPDATES:"surface geometry updates",LOD_RENDERER:"LoD renderer",GRAPHICS_CORE:"Graphics3D",I3S_CONTROLLER:"I3S",POINT_CLOUD_LAYER:"point cloud",FEATURE_TILE_FETCHER:"feature fetcher",STREAM_CONTROLLER:"stream controller",OVERLAY:"overlay",OVERLAY_RENDERER:"overlay renderer",STAGE:"stage",GRAPHICS_DECONFLICTOR:"graphics deconflictor",FILTER_VISIBILITY:"Graphics3D filter visibility",SCALE_VISIBILITY:"Graphics3D scale visibility",FRUSTUM_VISIBILITY:"Graphics3D frustum visibility",POINT_OF_INTEREST_FREQUENT:"POI frequent",POINT_OF_INTEREST_INFREQUENT:"POI infrequent",LABELER:"labeler",FEATURE_QUERY_ENGINE:"feature query",FEATURE_TILE_TREE:"feature tile tree",FEATURE_TILE_TREE_ACTIVE:"fast feature tile tree",ELEVATION_ALIGNMENT:"elevation alignment",ELEVATION_ALIGNMENT_SCENE:"elevation alignment scene",TEXT_TEXTURE_ATLAS:"text texture atlas",TEXTURE_UNLOAD:"texture unload",LINE_OF_SIGHT_TOOL:"line of sight tool",LINE_OF_SIGHT_TOOL_INTERACTIVE:"interactive line of sight tool",ELEVATION_PROFILE:"elevation profile",SNAPPING:"snapping",SHADOW_ACCUMULATOR:"shadow accumulator",CLOUDS_GENERATOR:"clouds generator",FLOW_GENERATOR:"flow generator",MAPVIEW_FETCH_QUEUE:"mapview fetch queue",MAPVIEW_LAYERVIEW_UPDATE:"mapview layerview update",MAPVIEW_VECTOR_TILE_PARSING_QUEUE:"mapview vector tile parsing queue",NONE:0,TEST_PRIO:1},Ia=0,YH=new Map([[et.RESOURCE_CONTROLLER_IMMEDIATE,Ia],[et.RESOURCE_CONTROLLER,4],[et.SLIDE,Ia],[et.STREAM_DATA_LOADER,Ia],[et.ELEVATION_QUERY,Ia],[et.TERRAIN_SURFACE,1],[et.SURFACE_GEOMETRY_UPDATES,1],[et.LOD_RENDERER,2],[et.GRAPHICS_CORE,2],[et.I3S_CONTROLLER,2],[et.POINT_CLOUD_LAYER,2],[et.FEATURE_TILE_FETCHER,2],[et.STREAM_CONTROLLER,2],[et.CLOUDS_GENERATOR,2],[et.OVERLAY,4],[et.OVERLAY_RENDERER,4],[et.STAGE,4],[et.GRAPHICS_DECONFLICTOR,4],[et.FILTER_VISIBILITY,4],[et.SCALE_VISIBILITY,4],[et.FRUSTUM_VISIBILITY,4],[et.POINT_OF_INTEREST_FREQUENT,6],[et.POINT_OF_INTEREST_INFREQUENT,30],[et.LABELER,8],[et.FEATURE_QUERY_ENGINE,8],[et.FEATURE_TILE_TREE,16],[et.FEATURE_TILE_TREE_ACTIVE,Ia],[et.ELEVATION_ALIGNMENT,12],[et.ELEVATION_ALIGNMENT_SCENE,14],[et.TEXT_TEXTURE_ATLAS,12],[et.TEXTURE_UNLOAD,12],[et.LINE_OF_SIGHT_TOOL,16],[et.LINE_OF_SIGHT_TOOL_INTERACTIVE,Ia],[et.SNAPPING,Ia],[et.SHADOW_ACCUMULATOR,30],[et.FLOW_GENERATOR,12],[et.MAPVIEW_FETCH_QUEUE,Ia],[et.MAPVIEW_LAYERVIEW_UPDATE,2],[et.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Ia]]);function QH(t){return YH.has(t)?YH.get(t):typeof t=="number"?t:1}const pCe=6.5,XH=1,hCe=30,fCe=1e3/30,mCe=100,KH=.9;let yCe=class{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(e=>e.needsUpdate)}constructor(){this._updating=My(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new j2("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new Ooe,this.state=1,this._tasks=new Array,this._runQueue=new Array,this._load=0,this._forceTask=!1,this._debug=!1,this._debugHandle=be(()=>aCe.SCHEDULER_LOG_SLOW_TASKS,e=>this._debug=e,Zr);for(const e of Object.keys(et))this.performanceInfo.tasks.set(et[e],new j2(String(et[e])))}destroy(){this._tasks.forEach(e=>e.remove()),this._tasks.length=0,this._runQueue.length=0,gi(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(e){this._updatingChanged(),e&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(e,i){const r=new gCe(this,e,i);return this._tasks.push(r),this._updatingChanged(),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new j2(e)),r}get load(){return this._load}frame(e){if(this._startFrameTaskTimes(),this._updateBudget(e)){const i=this._budget.now();return this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-i),!0}return this._recordFrameTaskTimes(0),!1}_updateBudget(e){this._test&&(this._test.usedBudget=0),++this._frameNumber;let i=pCe,r=e.frameDuration,n=XH;switch(this.state){case 2:i=0,r=Math.max(mCe,e.frameDuration),n=hCe;break;case 1:r=Math.max(fCe,e.frameDuration)}return r=r-e.elapsedFrameTime-i,this.state!==2&&r<XH&&!this._forceTask?(this._forceTask=!0,!1):(r=Math.max(r,n),this._budget.reset(r),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case 2:this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0),this._budget.madeProgress()}removeTask(e){XP(this._tasks,e),XP(this._runQueue,e),this._updatingChanged()}_updateTask(e){this._tasks.forEach(i=>{i.name===e&&i.setPriority(e)})}_getState(e){if(this._runQueue.some(r=>r.name===e))return"s";let i="i";return this._tasks.forEach(r=>{r.name===e&&r.needsUpdate&&(r.schedulePriority<=1?i="r":i!=="r"&&(i="w"))}),i}_getRuntime(e){let i=0;return this._tasks.forEach(r=>{r.name===e&&(i+=r.runtime)}),i}_resetRuntimes(){this._tasks.forEach(e=>e.runtime=0)}_getRunning(){const e=new Map;if(this._tasks.forEach(r=>{r.needsUpdate&&e.set(r.name,(e.get(r.name)||0)+1)}),e.size===0)return null;let i="";return e.forEach((r,n)=>{i+=r>1?` ${r}x ${n}`:` ${n}`}),i}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce((i,r)=>r.needsUpdate?++i:i,0);this._load=this._load*KH+e*(1-KH)}_schedule(){for(hge(this._runQueue,e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1)),this._tasks.forEach(e=>{e.basePriority===Ia&&e.needsUpdate&&!this._runQueue.includes(e)&&e.blockFrame!==this._frameNumber&&this._runQueue.unshift(e)});this._runQueue.length===0;){let e=!1,i=0;if(this._tasks.forEach(r=>{r.needsUpdate&&r.schedulePriority!==0&&r.basePriority!==Ia&&r.blockFrame!==this._frameNumber&&(e=!0,i=Math.max(i,r.basePriority),r.schedulePriority===1?(r.schedulePriority=0,this._runQueue.push(r)):--r.schedulePriority)}),!e)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const e=this._budget.now(),i=this._runQueue.pop();this._budget.resetProgress();try{i.task.runTask(this._budget)===koe&&(i.blockFrame=this._frameNumber)}catch(n){ie.getLogger("esri.views.support.Scheduler").error(`Exception in task "${i.name}"`,n),i.blockFrame=this._frameNumber}!this._budget.hasProgressed&&i.blockFrame!==this._frameNumber&&i.needsUpdate&&(i.name,i.blockFrame=this._frameNumber),i.schedulePriority=i.basePriority;const r=this._budget.now()-e;if(i.runtime+=r,this._frameTaskTimes.set(i.priority,this._frameTaskTimes.get(i.priority)+r),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const e of Object.keys(et))this._frameTaskTimes.set(et[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach((i,r)=>this.performanceInfo.tasks.get(r).push(i)),this.performanceInfo.total.push(e)}get test(){return this._test}},gCe=class{get task(){return this._task.value}get readyToRun(){return this._queue.readyToRun}get updating(){return this._queue.updating}constructor(e,i,r){this._scheduler=e,this.name=i,this.blockFrame=0,this.runtime=0,this._queue=new lCe,this._handles=new xw,this._basePriority=QH(i),this.schedulePriority=this._basePriority,this._task=My(r??this._queue),this._handles.add(Pn(()=>this.task.readyToRun,n=>e.taskRunningChanged(n)))}remove(){this.processQueue(aS),this._scheduler.removeTask(this),this.schedule=D5.schedule,this.reschedule=D5.reschedule,this.scheduleGenerator=D5.scheduleGenerator,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){if(this.name===e)return;this.name=e;const i=QH(e);this._basePriority!==Ia&&this.schedulePriority===0||(this.schedulePriority=i),this._basePriority=i}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.readyToRun||!this.task.destroyed&&this.task.readyToRun}schedule(e,i,r){return this._queue.push(e,i,r)}reschedule(e,i,r){return this._queue.unshift(e,i,r)}scheduleGenerator(e,i,r){return this._queue.pushGenerator(e,i,r)}processQueue(e){return this._queue.runTask(e)}},Ooe=class{constructor(){this._begin=performance?.now()??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(e){return!this.done&&(e()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e){this._begin=this.now(),this._budget=e,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}};const aS=new Ooe;aS.enabled=!1;let vCe=class{remove(){}processQueue(){}schedule(e,i,r){try{if(Rn(i)){const n=xt();return r?Promise.resolve(r(n)):Promise.reject(n)}return tD(e(aS))}catch(n){return Promise.reject(n)}}reschedule(e,i,r){return this.schedule(e,i,r)}async scheduleGenerator(e,i,r){if(Rn(i)){const s=xt();if(r)return r(s);throw s}const n=e(aS);for(;;){const s=n.next(aS),o=Kn(s)?await s:s;if(Rn(i)){const u=xt();if(r){const h=r(u),m=n.return(null);return Kn(m)&&await Yd(m),h}const d=n.throw(u);throw Kn(d)&&await Yd(d),u}if(o.done)return o.value}}};const D5=new vCe;let bCe=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=dCe(),this._schedulerHandle=Pn(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation?.target==null||Kn(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=i=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:r,graphicsView:n,labelManager:s,state:{id:o}}=this.view;r?.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),this.view.graphicsTileStore?.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=0:this.view.interacting?this._scheduler.state=1:this._scheduler.state=2,this._scheduler.frame(i)||this._updateRequested||this._scheduler.state!==2||this._frameTaskHandle?.pause()}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new LF,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=be(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=jb(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const i=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0),r!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews?.forEach(this._updateLayerView,this)}};function wCe(t,e){const{spatialReference:i}=e,r=[e.x,e.y];let n,s,o,u;const d=[0,0],h=_Ce(t);for(let b=0;b<h.length;b++){const _=h[b];for(let x=0;x<_.length-1;x++){T1e(d,r,_,x);const $=Aw(r,d);(n==null||$<n)&&(n=$,s=[...d],o=b,u=x)}}if(n==null||!s||o==null||u==null)throw new L("nearest-coordinate:failed","Failed to find the nearest coordinate");const[m,v]=s;return{coordinate:new je({x:m,y:v,spatialReference:i}),distance:n}}function _Ce(t){switch(t.type){case"extent":return[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]];case"polygon":return t.rings;case"polyline":return t.paths}}var i4;let Bm=i4=class extends sF(_e){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Is(this.geometry,this.spatialReference)}catch(t){return ie.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?px(this.normalizedGeometry,i):w6(this.normalizedGeometry,i))return t;const{coordinate:r}=wCe(this.normalizedGeometry,i);return r&&(t.targetGeometry=r),t}clone(){return new i4({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};l([p({constructOnly:!0})],Bm.prototype,"geometry",void 0),l([p({readOnly:!0})],Bm.prototype,"normalizedGeometry",null),l([p({constructOnly:!0})],Bm.prototype,"spatialReference",void 0),Bm=i4=l([M("esri.views.2d.constraints.GeometryConstraint")],Bm);var r4;let r2=r4=class extends sF(_e){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new r4({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};l([p()],r2.prototype,"enabled",void 0),l([p()],r2.prototype,"rotationEnabled",void 0),r2=r4=l([M("esri.views.2d.constraints.RotationConstraint")],r2);const Coe=r2;var n4;let Fs=n4=class extends sF(_e){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:r,minZoom:n,maxZoom:s}=this,o=-1,u=-1,d=!1,h=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!e?.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);e=e.map(m=>m.clone()),e.sort((m,v)=>v.scale-m.scale),e.forEach((m,v)=>m.level=v);for(const m of e)!d&&i>0&&i>=m.scale&&(o=m.level,d=!0),!h&&r>0&&r>=m.scale&&(u=t?t.level:-1,h=!0),t=m;n===-1&&(n=i===0?0:o),s===-1&&(s=r===0?e.length-1:u),n=Math.max(n,0),n=Math.min(n,e.length-1),s=Math.max(s,0),s=Math.min(s,e.length-1),n>s&&([n,s]=[s,n]),i=e[n].scale,r=e[s].scale,e.splice(0,n),e.splice(s-n+1),e.forEach((m,v)=>{this._lodByScale[m.scale]=m,this._scales[v]=m.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,r=this.effectiveMaxScale,n=t.targetGeometry,s=e&&e.targetGeometry,o=r!==0&&t.scale<r,u=i!==0&&t.scale>i;if(o||u){const d=u?i:r;if(e&&s){const h=(d-e.scale)/(t.scale-e.scale);n.x=s.x+(n.x-s.x)*h,n.y=s.y+(n.y-s.y)*h}t.scale=d}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.floor(t),r=Math.ceil(t);return e[i]+(t-i)*(e[r]-e[i])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let n=0;n<e.length-1;n++){if(i=e[n],r=e[n+1],r===t)return n+this.effectiveMinZoom+1;if(i>t&&r<t)return n+this.effectiveMinZoom+1-(t-r)/(i-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new n4({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};l([p({readOnly:!0})],Fs.prototype,"effectiveLODs",void 0),l([p({readOnly:!0})],Fs.prototype,"effectiveMinZoom",void 0),l([p({readOnly:!0})],Fs.prototype,"effectiveMaxZoom",void 0),l([p({readOnly:!0})],Fs.prototype,"effectiveMinScale",void 0),l([p({readOnly:!0})],Fs.prototype,"effectiveMaxScale",void 0),l([p()],Fs.prototype,"lods",void 0),l([p()],Fs.prototype,"minZoom",void 0),l([p()],Fs.prototype,"maxZoom",void 0),l([p()],Fs.prototype,"minScale",void 0),l([p()],Fs.prototype,"maxScale",void 0),l([p()],Fs.prototype,"snapToZoom",void 0),Fs=n4=l([M("esri.views.2d.constraints.ZoomConstraint")],Fs);const Roe=Fs,SCe={base:null,key:"type",typeMap:{extent:Xe,polygon:hi}};let tr=class extends _e{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new fe}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const e=this._get("_geometry");return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new Bm({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new Coe({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),i=this.lods||this.view?.constraintsInfo.lods,r=this.minZoom,n=this.maxZoom,s=this.minScale,o=this.maxScale,u=this.snapToZoom;return e&&e.lods===i&&e.minZoom===r&&e.maxZoom===n&&e.minScale===s&&e.maxScale===o&&e.snapToZoom===u?e:new Roe({lods:i,minZoom:r,maxZoom:n,minScale:s,maxScale:o,snapToZoom:u})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach(r=>r.constrain(e,i)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(i=>i.applyPanConstraint?.(e)),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};l([p({readOnly:!0})],tr.prototype,"effectiveLODs",null),l([p({readOnly:!0})],tr.prototype,"effectiveMinScale",null),l([p({readOnly:!0})],tr.prototype,"effectiveMaxScale",null),l([p({readOnly:!0})],tr.prototype,"effectiveMinZoom",null),l([p({readOnly:!0})],tr.prototype,"effectiveMaxZoom",null),l([p({types:SCe,value:null})],tr.prototype,"geometry",null),l([p({type:[In]})],tr.prototype,"lods",void 0),l([p()],tr.prototype,"minScale",void 0),l([p()],tr.prototype,"maxScale",void 0),l([p()],tr.prototype,"minZoom",void 0),l([p()],tr.prototype,"maxZoom",void 0),l([p()],tr.prototype,"rotationEnabled",void 0),l([p()],tr.prototype,"snapToZoom",void 0),l([p({type:fe})],tr.prototype,"customConstraints",void 0),l([p()],tr.prototype,"view",void 0),l([p({readOnly:!0})],tr.prototype,"version",null),l([p({type:Bm,readOnly:!0})],tr.prototype,"_geometry",null),l([p({type:Coe})],tr.prototype,"_rotation",null),l([p({readOnly:!0,type:Roe})],tr.prototype,"_zoom",null),tr=l([M("esri.views.2d.MapViewConstraints")],tr);const eW=tr;let Vn=class extends _e{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([be(()=>this.constraints?.version,i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Zo)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new je({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void ie.getLogger(this).error(new L("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:n}))}const r=this.viewpoint;XL(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void ie.getLogger(this).error(new L("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(n){return void ie.getLogger(this).error(new L("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const r=this.viewpoint;LOe(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;WOe(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;HH(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new L("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new L("mapview:invalid-viewpoint","geometry not defined"))}catch(s){r=new L("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:s})}if(r)return void ie.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const n=new Jr({targetGeometry:new je,scale:0,rotation:0});Xn(n,i),this.constraints?.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(e){if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const n=this._get("extent");return void(n&&(this._set("extent",void 0),this._set("center",n.center)))}const i=this.constraints?.zoomToScale(e)??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;HH(r,r,i),this.viewpoint=r,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,n=this._get("center"),s=this._get("extent"),o=this._get("scale"),u=this._get("rotation"),d=this._get("viewpoint"),h=this._get("zoom"),m=h!=null&&r!=null&&r.zoomToScale(h)||void 0;let v,b,_;const x=d?.rotation,$=d?.targetGeometry;$?.type==="extent"?v=$:$?.type==="point"&&(b=$,_=d?.scale);const E=s??v;return{center:n??b??E?.center,rotation:u??x,scale:(o??m??_??(E&&_k(E,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,r,n){const s=e.targetGeometry;try{this._project(e,r)}catch(o){ie.getLogger(this).warn(new Jo("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:r,error:o})),e.targetGeometry=n||new je({x:0,y:0,spatialReference:r})}this.constraints?.fit(e),this._set("state",new LF({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:r,rotation:n,scale:s}=this.state.paddedViewState,o=new je({x:e,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",n),this._set("scale",s),this._set("state",null)}changeSpatialReference(e){const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const d=i.viewpoint.clone();d.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=d}const r=i.clone(),[n,s]=i.center;let o=null;try{o=this._project(new je({x:n,y:s,spatialReference:i.spatialReference}),e)}catch(d){p6()||ie.getLogger(this).warn(new Jo("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o?.toJSON(),spatialReference:e,error:d}))}o||(o=new je({x:0,y:0,spatialReference:e}));const u=XL(new Jr({targetGeometry:new je,scale:0,rotation:0}),i.viewpoint,o);r.viewpoint=u;try{const h=[i.size[0]/2,i.size[1]/2],m=[h[0]+20,h[1]],v=i.toMap([0,0],m),{x:b,y:_}=this._project(new je({x:v[0],y:v[1],spatialReference:i.spatialReference}),e);v[0]=b,v[1]=_,r.toScreen(v,v);const x=GOe(h,v,m),$=Math.hypot(v[0]-h[0],v[1]-h[1])/20;!Number.isFinite($)||Math.abs($)>4?(u.rotation=0,u.targetGeometry=new je({x:0,y:0,spatialReference:e})):(u.scale*=$,u.scale>q("mapview-srswitch-adjust-rotation-scale-threshold")?u.rotation=0:u.rotation+=Number.isFinite(x)?x:0)}catch{}this._get("constraints")?.constrain(u,void 0),this._get("state").viewpoint=u}resize(e,i){if(!this.ready)return;const r=this.state;let n=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.slice();r.size=[e,i],HOe(n,n,s,this.state.paddedViewState.size,this.resizeAlign),n=this.constraints?.constrain(n,void 0)??n,this.state.viewpoint=n}toMap(e){if(!this.ready)return null;const i=[0,0],[r,n]=this.state.toMap(i,[e.x,e.y]),s=this.state.spatialReference;return new je({x:r,y:n,spatialReference:s})}toScreen(e,i){if(!this.ready)return null;const r=this._project(e,this.state.spatialReference),n=[r.x,r.y];return i?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(n,n),this.state.toScreen(n,n),jr(n[0],n[1])}_project(e,i){const r=e?.targetGeometry||e;if(!i)return e;if(!r)return null;if(i.imageCoordinateSystem||r.spatialReference?.imageCoordinateSystem||Fi(i,r.spatialReference))return e;const n=Is(r,i);if(!n)throw new L("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return xCe(e)?(e.targetGeometry=n,e):n}};function xCe(t){return t?.declaredClass==="esri.Viewpoint"}l([p({type:je})],Vn.prototype,"center",null),l([p()],Vn.prototype,"constraints",void 0),l([p({type:Xe})],Vn.prototype,"extent",null),l([p({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Vn.prototype,"padding",null),l([p()],Vn.prototype,"ready",void 0),l([p()],Vn.prototype,"resizeAlign",void 0),l([p({readOnly:!0})],Vn.prototype,"resolution",null),l([p({type:Number})],Vn.prototype,"rotation",null),l([p({type:Number})],Vn.prototype,"scale",null),l([p({readOnly:!0})],Vn.prototype,"state",void 0),l([p({type:Jr})],Vn.prototype,"viewpoint",null),l([p({readOnly:!0})],Vn.prototype,"visibleArea",null),l([p()],Vn.prototype,"zoom",null),Vn=l([M("esri.views.2d.ViewStateManager")],Vn);const tW=160;let n2=class extends _e{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=tW&&this.clear()},tW))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};l([p()],n2.prototype,"_timer",void 0),l([p()],n2.prototype,"stationary",null),n2=l([M("esri.views.2d.support.StationaryManager")],n2);const $Ce=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.fullOpacity=1,this.stateManager=new Vn({constraints:new eW({view:this})}),this.stationaryManager=new n2,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new bCe(this),this.viewEvents=new Vse(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([be(()=>this.viewpoint,()=>this.stationaryManager.flip(),Zo)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){return this.stateManager?.extent??null}set extent(r){this.stateManager.extent=r}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(r){const n=this._get("animation");if(r===n)return;if(n&&n.stop(),r!==this.animationManager.animation&&this.animationManager.stop(),!r||r.isFulfilled())return void this._set("animation",null);this._set("animation",r);const s=()=>{this.destroyed||r===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame())};r.when(s,s)}get constraints(){return this.stateManager?.constraints}set constraints(r){r.view=this;const n=this.stateManager.constraints;this.stateManager.constraints=r,n?.destroy()}get padding(){return this.stateManager?.padding}set padding(r){this.stateManager&&(this.stateManager.padding=r)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(r){this.stateManager.resizeAlign=r}get rotation(){return this.stateManager.rotation??0}set rotation(r){const{rotationEnabled:n}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=r,this.constraints.rotationEnabled=n}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(r){this.stateManager.viewpoint=r,this.frameTask.requestFrame()}};return l([p({readOnly:!0})],i.prototype,"animationManager",void 0),l([p({readOnly:!0})],i.prototype,"fullOpacity",void 0),l([p()],i.prototype,"stateManager",void 0),l([p()],i.prototype,"constraintsInfo",null),l([p()],i.prototype,"extent",null),l([p({readOnly:!0})],i.prototype,"state",null),l([p({readOnly:!0})],i.prototype,"mapViewNavigation",void 0),l([p()],i.prototype,"renderingOptions",void 0),l([p({readOnly:!0})],i.prototype,"interacting",null),l([p()],i.prototype,"stationary",null),l([p()],i.prototype,"animation",null),l([p({type:eW})],i.prototype,"constraints",null),l([p()],i.prototype,"padding",null),l([p()],i.prototype,"resizeAlign",null),l([p()],i.prototype,"rotation",null),l([p({readOnly:!0})],i.prototype,"viewEvents",void 0),l([p({type:Jr})],i.prototype,"viewpoint",null),i=l([M("esri.views.Viewport2DBaseMixin")],i),i},TCe=()=>St.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;var Tb;let Dv=(Tb=class extends rF{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=ao(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new L("view:animation-stopped","ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(e,i){i||(i=Kn(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}},Tb.state={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"},Tb);l([p({readOnly:!0})],Dv.prototype,"done",null),l([p({readOnly:!0,type:String})],Dv.prototype,"state",void 0),l([p()],Dv.prototype,"target",void 0),Dv=l([M("esri.views.ViewAnimation")],Dv);const s4=Dv;let BM=class extends _e{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,i){if(!e)return void ie.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new s4;this.view.animation=r,await zb(()=>this.view.ready,i);const n={...i,animate:i?.animate??(!TCe()&&this.view.animationsEnabled),animationMode:i?.animationMode??"auto"},{extent:s,spatialReference:o,size:u,viewpoint:d,constraints:h,padding:m,allLayerViews:v}=this.view,b=POe(e,{extent:s,spatialReference:o,size:u,viewpoint:d,constraints:h,padding:m,allLayerViews:v,pickClosestTarget:i?.pickClosestTarget??!0});return r?.update(b),this._gotoTask={},n.animate?this._gotoAnimated(b,n):this._gotoImmediate(b,n)}_gotoImmediate(e,i){const r=this._gotoTask,n=this.view.animation,s=e.then(o=>{if(ft(i),r!==this._gotoTask)throw new L("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=n.target=o,n.finish()});return this._cancellableGoTo(r,n,s,i)}_gotoAnimated(e,i){const r=this._gotoTask,n=this.view.animation;if(!n)return Promise.resolve();const s=e.then(o=>{if(ft(i),r!==this._gotoTask)throw new L("view:goto-interrupted","Goto was interrupted");return n.update(o),this.view.animationManager.animate(n,this.view.viewpoint,i),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,n,s,i)}_cancellableGoTo(e,i,r,n){const s=()=>e===this._gotoTask;return $S(r,n).finally(()=>{s()&&(i.done||i.stop())})}};l([p({constructOnly:!0})],BM.prototype,"view",void 0),BM=l([M("esri.views.2d.GoToManager")],BM);function Poe(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}function Doe(t,e){return e.some(i=>Poe(t,i))}function iW(t,{dragPrimary:e,dragSecondary:i,dragTertiary:r}){return[{key:"primary",value:e},{key:"secondary",value:i},{key:"tertiary",value:r}].filter(n=>n.value===t).map(n=>n.key)}let rW=class extends en{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(e,i){Poe(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},ECe=class extends en{constructor(e,i,r){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",r,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:r}=i;if(r!==this.pointerType)return;e.stopPropagation();const{action:n,delta:s}=i,{view:o}=this,{mapViewNavigation:u}=o;switch(n){case"begin":{const{scale:d}=o;this._startScale=d,this._currentScale=d,this._previousDelta=s,u.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const d=1.015**s.y,h=this._startScale*d,m=h/this._currentScale;u.setViewpointImmediate(m),this._currentScale=h;break}case"end":{const{constraints:d}=o,{effectiveLODs:h,snapToZoom:m}=d;if(!m||!h)return void u.end();const v=d.snapScale(this._currentScale),b=(s.y>0?Math.max(v,d.snapToPreviousScale(this._startScale)):Math.min(v,d.snapToNextScale(this._startScale)))/this._currentScale;u.zoom(b).then(()=>{u.end()});break}}}},xk=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){this._startEvent=e,this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},MCe=class extends en{constructor(e,i,r){super(!0),this.view=e,this.pointerActions=i,this.registerIncoming("drag",r,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new xk({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&Doe(r.data,this.pointerActions)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},ACe=class extends en{constructor(e,i,r){super(!0),this._view=e,this.pointerActions=i;const n=this._view.mapViewNavigation;this._dragEventSeparator=new xk({start:(s,o)=>{n.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{n.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{n.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&Doe(o.data,this.pointerActions)}),this.registerIncoming("drag",r,s=>this._dragEventSeparator.handle(s))}};function mi(t){const e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}function Sr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function vt(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function dr(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function ei(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function zF(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function Noe(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function ICe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function kCe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function BS(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function Loe(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function joe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function zoe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function OCe(t,e=0,i=1){return t[0]=Math.min(Math.max(t[0],e),i),t[1]=Math.min(Math.max(t[1],e),i),t[2]=Math.min(Math.max(t[2],e),i),t}function CCe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function ci(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function fi(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function ec(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)}function ep(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return i*i+r*r+n*n}function Lw(t){const e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}function RCe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function PCe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function ns(t,e){const i=e[0],r=e[1],n=e[2];let s=i*i+r*r+n*n;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function ht(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function yn(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],u=i[1],d=i[2];return t[0]=n*d-s*u,t[1]=s*o-r*d,t[2]=r*u-n*o,t}function DCe(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],u=i[1],d=i[2],h=n*d-s*u,m=s*o-r*d,v=r*u-n*o,b=Math.sqrt(h*h+m*m+v*v);return t[0]=h/b,t[1]=m/b,t[2]=v/b,t}function Mx(t,e,i,r){const n=e[0],s=e[1],o=e[2];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t}function NCe(t,e,i,r,n,s){const o=s*s,u=o*(2*s-3)+1,d=o*(s-2)+s,h=o*(s-1),m=o*(3-2*s);return t[0]=e[0]*u+i[0]*d+r[0]*h+n[0]*m,t[1]=e[1]*u+i[1]*d+r[1]*h+n[1]*m,t[2]=e[2]*u+i[2]*d+r[2]*h+n[2]*m,t}function LCe(t,e,i,r,n,s){const o=1-s,u=o*o,d=s*s,h=u*o,m=3*s*u,v=3*d*o,b=d*s;return t[0]=e[0]*h+i[0]*m+r[0]*v+n[0]*b,t[1]=e[1]*h+i[1]*m+r[1]*v+n[1]*b,t[2]=e[2]*h+i[2]*m+r[2]*v+n[2]*b,t}function jCe(t,e=1){const i=hx,r=2*i()*Math.PI,n=2*i()-1,s=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*s,t[1]=Math.sin(r)*s,t[2]=n*e,t}function qy(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12],t[1]=i[1]*r+i[5]*n+i[9]*s+i[13],t[2]=i[2]*r+i[6]*n+i[10]*s+i[14],t}function Foe(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=r*i[0]+n*i[3]+s*i[6],t[1]=r*i[1]+n*i[4]+s*i[7],t[2]=r*i[2]+n*i[5]+s*i[8],t}function Ra(t,e,i){const r=i[0],n=i[1],s=i[2],o=i[3],u=e[0],d=e[1],h=e[2],m=n*h-s*d,v=s*u-r*h,b=r*d-n*u,_=n*b-s*v,x=s*m-r*b,$=r*v-n*m,E=2*o;return t[0]=u+m*E+2*_,t[1]=d+v*E+2*x,t[2]=h+b*E+2*$,t}function zCe(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0],s[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),s[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function FCe(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),s[1]=n[1],s[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function VCe(t,e,i,r){const n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),s[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),s[2]=n[2],t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function UCe(t,e){ns(nW,t),ns(sW,e);const i=ht(nW,sW);return i>1?0:i<-1?Math.PI:Math.acos(i)}const nW=Y(),sW=Y();function qCe(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Ot(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Voe(t,e){if(t===e)return!0;const i=t[0],r=t[1],n=t[2],s=e[0],o=e[1],u=e[2],d=Zi();return Math.abs(i-s)<=d*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-o)<=d*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-u)<=d*Math.max(1,Math.abs(n),Math.abs(u))}function Uoe(t,e,i){const r=i[0]-e[0],n=i[1]-e[1],s=i[2]-e[2];let o=r*r+n*n+s*s;return o>0?(o=1/Math.sqrt(o),t[0]=r*o,t[1]=n*o,t[2]=s*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const fn=ei,GCe=zF,BCe=Noe,HCe=ec,IA=ep,qoe=mi,Gy=Lw;Object.freeze(Object.defineProperty({__proto__:null,abs:BS,add:dr,angle:UCe,bezier:LCe,ceil:ICe,clamp:OCe,copy:Sr,cross:yn,crossAndNormalize:DCe,direction:Uoe,dist:HCe,distance:ec,div:BCe,divide:Noe,dot:ht,equals:Voe,exactEquals:Ot,floor:kCe,hermite:NCe,inverse:PCe,len:qoe,length:mi,lerp:Mx,max:zoe,min:joe,mul:GCe,multiply:zF,negate:RCe,normalize:ns,random:jCe,rotateX:zCe,rotateY:FCe,rotateZ:VCe,round:CCe,scale:ci,scaleAndAdd:fi,set:vt,sign:Loe,sqrDist:IA,sqrLen:Gy,squaredDistance:ep,squaredLength:Lw,str:qCe,sub:fn,subtract:ei,transformMat3:Foe,transformMat4:qy,transformQuat:Ra},Symbol.toStringTag,{value:"Module"}));function cl(t){let e=t*t;return t<0&&(e*=-1),e}function WCe(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function ZCe(t,e,i){const r=i,n=t.state,s=t.device,o=e.tiltDirection==="forward-down"?1:-1,u=1;return s.deviceType==="standard"?(r.translation[0]=cl(n.axes[0]),r.translation[1]=cl(n.axes[1]),r.translation[2]=cl(n.buttons[7])-cl(n.buttons[6]),r.heading=cl(n.axes[2]),r.tilt=cl(n.axes[3])):s.deviceType==="spacemouse"&&(r.translation[0]=1.2*cl(n.axes[0]),r.translation[1]=1.2*cl(n.axes[1]),r.translation[2]=2*-cl(n.axes[2]),r.heading=1.2*cl(n.axes[5]),r.tilt=1.2*cl(n.axes[3])),r.tilt*=o,ci(r.translation,r.translation,u),r}function JCe(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let YCe=class extends en{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new xw,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([be(()=>this._view.navigation.gamepad?.enabled,i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=jb({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Zr)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,WCe(this._transformation)):(this._currentDevice=e.data.device,ZCe(e.data,this._view.navigation.gamepad,this._transformation)),this._frameTask?.resume())}_frameUpdate(e){const i=this._transformation;if(JCe(i))return void this._frameTask?.pause();const r=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,s=XCe*n*e;Sk(r,r,[i.translation[0]*s,-i.translation[1]*s]);const o=1+i.translation[2]*KCe*e,u=this._view.constraints.rotationEnabled?-i.heading*QCe*e:0,d=this._view.size,h=[d[0]/2,d[1]];woe(r,r,o,u,h,d);const m=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=m}};const QCe=.06,XCe=.7,KCe=6e-4;function Goe(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),ut(()=>document.removeEventListener("visibilitychange",e))}let eRe=class extends en{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=n=>{const s=this._keyMap[n.data.key];if(n.modifiers.has("Meta")||n.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;n.stopPropagation(),n.preventDefault();const o=n.type==="key-down";if(this._pressedKeys[o?"add":"delete"](s),o){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const u=this._timeout===void 0,d=this._pressedKeys.size>0;u||d?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=Goe(n=>n?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(e){const i=this._currentDirection!=null;if(e!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},tRe=class extends en{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(i),this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=Goe(n=>n?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,"clockwise"),this._addKeyMapping(e.counterClockwise,"counterClockwise"),this._addKeyMapping(e.reset,"reset")}_addKeyMapping(e,i){for(const r of e)this._keyToDirection.set(r,i)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection.get(e.data.key);if(this._pressed=n!=null,this._pressed){if(e.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},iRe=class extends en{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),i.zoomIn.forEach(n=>this._keysToZoomAction[n]=0),i.zoomOut.forEach(n=>this._keysToZoomAction[n]=1)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const n=this._keysToZoomAction[r],{mapViewNavigation:s}=this.view;let o=null;switch(n){case 0:o=s.zoomIn();break;case 1:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),e.stopPropagation()}};const rRe=.6;let nRe=class extends en{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:n,deltaY:s}=e.data,o=1/rRe**(1/60*s),u=i.zoom(o,[r,n]);this._canZoom=!1,u.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()})}},sRe=class extends en{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new xk({start:(r,n)=>{i.pinch.begin(this.view,n.data),n.stopPropagation()},update:(r,n)=>{i.pinch.update(this.view,n.data),n.stopPropagation()},end:(r,n)=>{i.pinch.end(this.view),n.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function oW(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>lRe(i,t.axisThreshold))}:{buttons:[],axes:[]}}function oRe(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function aRe(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function lRe(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let uRe=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,u=o.index,d=this._inputDevices[u];d&&(this._emitGamepadEvent(o,oW(d),!1),this._inputDevices.splice(u,1),this._latestUpdate.splice(u,1),this._input.gamepad.devices.remove(d),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=r&&n,this.supported&&(aW(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new MF(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=jb({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;aW(n=>{const s=this._inputDevices[n.index];if(!s)return;const o=this._latestUpdate[n.index],u=oW(s),d=r||aRe(u);o&&(o.timestamp===n.timestamp||!o.active&&d||oRe(o.state,u))||this._emitGamepadEvent(n,u,!d)})}_emitGamepadEvent(e,i,r){const n=this._latestUpdate[e.index],s=n&&n.active;if(!s&&!r)return;const o=!s&&r?"start":s&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:o})}};function cRe(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function aW(t){for(const e of navigator.getGamepads())cRe(e)&&t(e)}const lW=q("edge"),dRe=q("chrome"),pRe=q("ff"),hRe=q("safari"),uW="esri-view-surface",iv={touchNone:`${uW}--touch-none`,touchPan:`${uW}--touch-pan`};var Sy;let fRe=(Sy=class{constructor(e,i){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new uRe(e,i),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>this._releasePointerCaptureSafe(e)),this._activePointerCaptures.clear(),this._gamepadSource=at(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const r=this._active[i];this._element.removeEventListener(N5[i],r),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&N5[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(N5[i],r),this._active[i]=r}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=e?.has("gamepad")??!1)}setPointerCapture(e,i){i?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?iv.touchNone:iv.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?iv.touchPan:iv.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(iv.touchNone),this._element.classList.remove(iv.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const r=qse(this._element,e);return Sy.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(e,i){const{key:r}=i;r&&e==="key-up"&&this._keyDownState.delete(r);const n={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(n.key),this._callback(e,n)}_handlePointer(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,r)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&q("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,i){let r=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:lW&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}lW?r*=.7:dRe||hRe?r*=.6:pRe&&(r*=1.375);const n=100,s=Math.abs(r);s>n&&(r=r/s*200/(1+Math.exp(-.02*(s-n))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(e,o)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const r={native:i};i.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}},Sy.test={disableSubpixelCoordinates:!1},Sy);const N5={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let mRe=class extends en{constructor(){super(!0),this.registerIncoming("context-menu",e=>e.data.native.preventDefault())}};const Boe=()=>({maximumClickDelay:300}),yRe=(t={})=>({...Boe(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...t}),FF=(t={})=>({...Boe(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...t});function kA(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function gRe(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}function vRe(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:jr()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[D,R]=t,[P,j]=[R.x-D.x,R.y-D.y];return e.radius=Math.sqrt(P*P+j*j)/2,e.center.x=(D.x+R.x)/2,e.center.y=(D.y+R.y)/2,e}let i=0,r=0;for(let D=0;D<t.length;D++)i+=t[D].x,r+=t[D].y;i/=t.length,r/=t.length;const n=t.map(D=>D.x-i),s=t.map(D=>D.y-r);let o=0,u=0,d=0,h=0,m=0,v=0,b=0;for(let D=0;D<n.length;D++){const R=n[D],P=s[D],j=R*R,Q=P*P;o+=j,u+=Q,d+=R*P,h+=j*R,m+=Q*P,v+=R*Q,b+=P*j}const _=.5*(h+v),x=.5*(m+b),$=o*u-d*d,E=(_*u-x*d)/$,A=(o*x-d*_)/$,O=jr(E+i,A+r);return{radius:Math.sqrt(E*E+A*A+(o+u)/t.length),center:O}}function yy(t){const{native:e}=t,{pointerId:i,button:r,pointerType:n}=e;return n==="mouse"?`${i}:${r}`:`${n}`}let bRe=class extends en{constructor(e={},i=yw){super(!1),this._clock=i,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=jr(0,0),this._pointerState=new Map,this._parameters=FF(e),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new xk({start:(r,n)=>this._dragStart(r,n),update:(r,n)=>this._dragUpdate(n),end:(r,n)=>this._dragEnd(n)}),this.registerIncoming("drag",r=>this._dragEventSeparator.handle(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=gi(e.doubleTapTimeout)})}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=gi(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:n}=i,{center:s}=r;this._dragStartCenter=s;const o=L5("begin",jr(0,0),r);this._doubleTapDrag.emit(o,void 0,n),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,s=L5("update",jr(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(s,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:n}=i,s=L5("end",jr(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(s,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,r=yy(i),n=this._pointerState.get(r),{pointerType:s}=i.native;if(n){const o=s==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(r),kA(n.event.data,i)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:r}=i.native,n=yy(i),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(n),s);this._pointerState.set(n,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function L5(t,e,i){const{button:r,buttons:n,pointer:s,pointers:o,pointerType:u,timestamp:d}=i;return{action:t,delta:e,button:r,buttons:n,pointer:s,pointers:o,pointerType:u,timestamp:d}}let wRe=class extends en{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,r,n){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:n,pointers:_Re(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const i=e.native.pointerId,r=FT(this._activePointerMap).angle,n={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,n);const s=HM(n,Hoe(this._activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,r=this._activePointerMap.get(i);r?r.event=e:this._addPointer(e)}_removePointer(e){const i=FT(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=FT(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=HM(r,i)-e,r.lastAngle=HM(r,i)-e})}_emitEvent(e,i,r){const n=FT(this._activePointerMap);this._drag.emit(this._createPayload(e,i,n,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,r=i.currentEvent,n=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,n)):(this._addPointer(r),this._emitEvent("added",r,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function Hoe(t){const e=[];return t.forEach(i=>{e.push(jr(i.event.x,i.event.y))}),vRe(e)}function FT(t){const e=Hoe(t);let i=0;return t.forEach(r=>{let n=HM(r,e),s=n-r.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=r.lastAngle+s,r.lastAngle=n;const o=n-r.initialAngle;i+=o}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function _Re(t){const e=new Map;return t.forEach((i,r)=>e.set(r,i.event)),e}function HM(t,e){const i=t.event,r=i.x-e.center.x,n=i.y-e.center.y;return Math.atan2(n,r)}let SRe=class extends en{constructor(e={},i=yw){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=FF(e),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=yy(i);if(!this._pointerState.has(r)){const n={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(r,n),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,r=yy(i),n=this._pointerState.get(r);if(n&&n.downButton===i.native.button){const s=n.immediateDoubleClick,o=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),kA(s,e.data)>o?this._startImmediateDoubleClick(e,n):(this._immediateDoubleClick.emit(e.data,void 0,s.modifiers),this._removeState(i))):kA(n,e.data)>o?this._removeState(i):this._startImmediateDoubleClick(e,n)}}_startImmediateDoubleClick(e,i){const r=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const i=yy(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},xRe=class extends en{constructor(e={},i=yw){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=yRe(e),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",r=>this._handlePointerLoss(r,"pointer-up")),this.registerIncoming("pointer-capture-lost",r=>this._handlePointerLoss(r,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",r=>this._handlePointerLoss(r,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",r=>this._handlePointerMove(r)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=gi(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=i.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const u=o.previousEvent;this._pointerHold.emit(u,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._parameters.holdDelay));const s={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(r,s),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const i=e.data,r=i.native.pointerId,n=this._pointerState.get(r);n&&(n.isDragging?this._pointerDrag.emit(VT("update",n,i),void 0,n.modifiers):gRe(i,n.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),n.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(e){const i=e.data,r=i.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=e.modifiers,n.isDragging=!0,r===n.startEvent.native.pointerId?this._pointerDrag.emit(VT("start",n,i)):this._pointerDrag.emit(VT("start",n,n.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const r=e.data,n=r.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(VT("end",s,i==="pointer-up"?r:s.previousEvent),void 0,s.modifiers):i==="pointer-up"&&s.downButton===r.native.button&&e.timestamp-s.startTimestamp<=this._parameters.maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(n),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function VT(t,e,i){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}let $Re=class extends en{constructor(e={},i=yw){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=FF(e),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",r=>this._handleImmediateClick(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=gi(e.doubleClickTimer))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,i){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=gi(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const i=e.data,{pointerType:r}=i.native,n=TRe(i);if(!this._pointerState.has(n))return void this._startClick(e);const s=this._pointerState.get(n),{data:o,modifiers:u}=s.event,d=r==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;kA(o,i)>d?(this._clearDoubleClickTimer(n,!0),this._startClick(e)):(this._clearDoubleClickTimer(n,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,u))}_handlePointerDown(e){const i=yy(e.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:r}}=i,n=yy(i),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),s);this._pointerState.set(n,{event:e,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function TRe(t){const{pointerId:e,pointerType:i,button:r}=t.native;return i==="mouse"?`${e}:${r}`:`${i}`}const UT={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},cW=Symbol("handles");let Nv=class extends _e{initialize(){const e=()=>this.view?.ready;this.addHandles([Pn(()=>!e(),()=>this._disconnect()),Pn(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerInfo(){return this._inputManager?.latestPointerInfo}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(e){return this._inputManager?.isModifierKeyDown(e)??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(cW),this._inputManager=at(this._inputManager)}_connect(){const e=this.view.surface,i=new fRe(e,this.view.input),r=[new SRe,new xRe,new $Re,new wRe(this.view.navigation),new bRe],n=new fl({eventSource:i,recognizers:r}),s=new MCe(this.view,["primary"]),o=new ACe(this.view,["secondary"]);n.installHandlers("prevent-context-menu",[new mRe],Wt.INTERNAL),n.installHandlers("navigation",[new sRe(this.view),new YCe(this.view),new nRe(this.view),new rW(this.view),new rW(this.view,[UT.counter]),s,new eRe(this.view,UT.pan),new iRe(this.view,UT.zoom),new tRe(this.view,UT.rotate),o,new ECe(this.view,"touch")],Wt.INTERNAL),this.view.viewEvents.connect(n),this._source=i,this._inputManager=n,this.addHandles([be(()=>this.view?.navigation?.browserTouchPanEnabled,u=>{this._source&&(this._source.browserTouchPanningEnabled=!u)},Zr),be(()=>{const{actionMap:u}=this.view.navigation;return{panActions:iW("pan",u),rotateActions:iW("rotate",u)}},({panActions:u,rotateActions:d})=>{s.pointerActions=u,o.pointerActions=d},Gt)],cW)}get test(){}};l([p()],Nv.prototype,"view",void 0),l([p()],Nv.prototype,"latestPointerInfo",null),l([p()],Nv.prototype,"multiTouchActive",null),Nv=l([M("esri.views.2d.input.MapViewInputManager")],Nv);const ERe=Nv,MRe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.goToManager=new BM({view:this}),this.animationsEnabled=!0,this.inputManager=new ERe({view:this}),this.addHandles([this.on("resize",n=>this.stateManager.resize(n.width,n.height))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(r,n,s,o){return this.viewEvents.on(r,n,s,o)||super.on(r,n)}hasEventListener(r){return super.hasEventListener(r)||this.viewEvents.hasHandler(r)}goTo(r,n){return this.goToManager.goTo(r,n)}toMap(r){if(!this.ready)return null;const n=Bse(r)?Gse(this,r):r;return this.stateManager.toMap(n)}};return l([p()],i.prototype,"goToManager",void 0),l([p({readOnly:!0})],i.prototype,"interacting",null),l([p()],i.prototype,"stationary",null),l([p()],i.prototype,"animationsEnabled",void 0),l([p({readOnly:!0})],i.prototype,"inputManager",void 0),i=l([M("esri.views.Viewport2DMixin")],i),i};let dW=class{constructor(e){this._view=e,this.viewpoint=new Jr({targetGeometry:new je,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,i]=this._view.size;return Math.sqrt(e*e+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return voe(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,i){i.pan=gee(this.center,e.center);let r=Math.abs(e.rotation-this.rotation);r=r>=180?360-r:r,i.rotate=$w(r),i.sourceZoom=this.scale,i.targetZoom=e.scale}interpolate(e,i,r){const{pan:n,rotate:s,zoom:o,zoomOffset:u}=r,{center:d}=this;d.spatialReference=e.center.spatialReference,d.x=Vl(e.center.x,i.center.x,n),d.y=Vl(e.center.y,i.center.y,n),this.viewpoint.scale=Vl(e.scale,i.scale+u,o);let h=e.rotation;const m=i.rotation;Math.abs(m-h)>=180&&(h+=360*(h<m?1:-1)),this.viewpoint.rotation=Vl(h,m,s)}copyFrom(e){Xn(this.viewpoint,e.viewpoint),this._view=e.view}};function s1(t,e,i,r){const n=3*t,s=3*(i-t)-n,o=1-n-s,u=3*e,d=3*(r-e)-u,h=1-u-d;function m(x){return((o*x+s)*x+n)*x}function v(x){return((h*x+d)*x+u)*x}function b(x){return(3*o*x+2*s)*x+n}function _(x,$){let E,A,O,D,R,P;for(O=x,P=0;P<8;P++){if(D=m(O)-x,Math.abs(D)<$)return O;if(R=b(O),Math.abs(R)<1e-6)break;O-=D/R}if(E=0,A=1,O=x,O<E)return E;if(O>A)return A;for(;E<A;){if(D=m(O),Math.abs(D-x)<$)return O;x>D?E=O:A=O,O=.5*(A-E)+E}return O}return function(x,$=1e-6){return v(_(x,$))}}const Oa={};Oa.ease=s1(.25,.1,.25,1),Oa.linear=s1(0,0,1,1),Oa.easeIn=Oa["ease-in"]=s1(.42,0,1,1),Oa.easeOut=Oa["ease-out"]=s1(0,0,.58,1),Oa.easeInOut=Oa["ease-in-out"]=s1(.42,0,.58,1);const ARe=t=>t,HS=t=>t*t,OA=t=>1-HS(1-t),pW=t=>t<.5?HS(2*t)/2:(OA(2*(t-.5))+1)/2,CA=t=>t*t*t,o4=t=>1-CA(1-t),hW=t=>t<.5?CA(2*t)/2:(o4(2*(t-.5))+1)/2,RA=t=>t*t*t*t,a4=t=>1-RA(1-t),fW=t=>t<.5?RA(2*t)/2:(a4(2*(t-.5))+1)/2,PA=t=>t*t*t*t*t,l4=t=>1-PA(1-t),mW=t=>t<.5?PA(2*t)/2:(l4(2*(t-.5))+1)/2,DA=t=>1-Math.cos(t*Math.PI/2),u4=t=>1-DA(1-t),yW=t=>t<.5?DA(2*t)/2:(u4(2*(t-.5))+1)/2,NA=t=>2**(10*(t-1)),LA=t=>1-NA(1-t),gW=t=>t<.5?NA(2*t)/2:(LA(2*(t-.5))+1)/2,jA=t=>-(Math.sqrt(1-t*t)-1),c4=t=>1-jA(1-t),vW=t=>t<.5?jA(2*t)/2:(c4(2*(t-.5))+1)/2;function Qa(t){const e=2*(t-Math.sqrt((t-1)*t)),i=e/2/t;return r=>r<i?t*r*r:e*r-e+1}function Xa(t,e){return(i,r)=>i<e?e*t(i/e,r):1-t((1-i)/(1-e),r)*(1-e)}const bW=Xa(Qa(1),1),wW=Xa(Qa(1),0),zA=Xa(Qa(1),.5),_W=Xa(Qa(2),1),SW=Xa(Qa(2),0),xW=Xa(Qa(2),.5),$W=Xa(Qa(3),1),TW=Xa(Qa(3),0),EW=Xa(Qa(3),.5),MW=Xa(Qa(4),1),AW=Xa(Qa(4),0),IW=Xa(Qa(4),.5),kW={linear:ARe,"in-quad":HS,"out-quad":OA,"in-out-quad":pW,"in-coast-quad":bW,"out-coast-quad":wW,"in-out-coast-quad":zA,"in-cubic":CA,"out-cubic":o4,"in-out-cubic":hW,"in-coast-cubic":_W,"out-coast-cubic":SW,"in-out-coast-cubic":xW,"in-quart":RA,"out-quart":a4,"in-out-quart":fW,"in-coast-quart":$W,"out-coast-quart":TW,"in-out-coast-quart":EW,"in-quint":PA,"out-quint":l4,"in-out-quint":mW,"in-coast-quint":MW,"out-coast-quint":AW,"in-out-coast-quint":IW,"in-sine":DA,"out-sine":u4,"in-out-sine":yW,"in-expo":NA,"out-expo":LA,"in-out-expo":gW,"in-circ":jA,"out-circ":c4,"in-out-circ":vW,"quad-in":HS,"quad-out":OA,"quad-in-out":pW,"quad-in-coast":bW,"quad-out-coast":wW,"quad-in-out-coast":zA,"cubic-in":CA,"cubic-out":o4,"cubic-in-out":hW,"cubic-in-coast":_W,"cubic-out-coast":SW,"cubic-in-out-coast":xW,"quart-in":RA,"quart-out":a4,"quart-in-out":fW,"quart-in-coast":$W,"quart-out-coast":TW,"quart-in-out-coast":EW,"quint-in":PA,"quint-out":l4,"quint-in-out":mW,"quint-in-coast":MW,"quint-out-coast":AW,"quint-in-out-coast":IW,"sine-in":DA,"sine-out":u4,"sine-in-out":yW,"expo-in":NA,"expo-out":LA,"expo-in-out":gW,"circ-in":jA,"circ-out":c4,"circ-in-out":vW,ease:t=>Oa.ease(t),"ease-in":t=>Oa.easeIn(t),"ease-out":t=>Oa.easeOut(t),"ease-in-out":t=>Oa.easeInOut(t)};let IRe=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const FA={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},Woe={maxDuration:4e3};let kRe=class Zoe{constructor(e){this._createCamera=e,this.compared=new IRe,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:FA.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new Zoe(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,i,r){this.source!==e&&this.source.copyFrom(e),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??FA.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const i=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Zi()}get hasFov(){return Math.abs(this.compared.fov)>Zi()}get hasRotate(){return this.compared.rotate>Zi()}},ORe=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},CRe=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,i)=>e+i.time,0)}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),e*=this.time;let r=0,n=0;const s=this.definition,o=this.segments.reduce((u,d)=>u||d.definition.hasZoom,!1);for(let u=0;u<this.segments.length;u++){const d=this.segments[u],h=d.definition;if(e<=d.time||u===this.segments.length-1){if(this.segmentInterpolateComponentsAt(d,d.time===0?0:e/d.time,i),s.hasPan&&!isNaN(i.pan)&&isFinite(s.compared.pan)?i.pan=(r+h.compared.pan*i.pan)/s.compared.pan:i.pan=1,s.hasRotate&&!isNaN(i.rotate)&&isFinite(s.compared.rotate)?i.rotate=(n+h.compared.rotate*i.rotate)/s.compared.rotate:i.rotate=1,o&&!isNaN(i.zoom)&&isFinite(h.compared.targetZoom)){const{sourceZoom:m,targetZoom:v}=h.compared,b=i.zoom*(v-m)+m,_=this.segments[0].definition.compared.sourceZoom,x=this.segments[this.segments.length-1].definition.compared.targetZoom,$=Math.abs(v-_)>Math.abs(m-_)?v:m;i.zoomOffset=$-x,i.zoom=(b-_)/($-_)}else i.zoom=1;return i}e-=d.time,r+=h.compared.pan,n+=h.compared.rotate}}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r)}},j5=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,i=e.compared,r=i.sourceZoom,n=i.targetZoom;this._zoomSign=r>n?1:-1,this._panPixelsAtSource=i.pan*e.source.pixelsPerPanAtZoom(r);const s=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*s}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:r,hasPan:n,hasRotate:s}=this.definition;let o=0,u=0;r&&(n&&(o=(i/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(u=this._zoomSign*(Math.log(e/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const d=this.definition.desiredPixelFlow;if(r&&n&&s){const h=o+u+o*u;this._zoomPixelFlow=o*u/h*d,this._panPixelFlow=u/h*d,this._rotatePixelFlow=o/h*d}else if(r&&n){const h=1+o;this._zoomPixelFlow=o/h*d,this._panPixelFlow=1/h*d}else if(r&&s){const h=1+u;this._zoomPixelFlow=u/h*d,this._rotatePixelFlow=1/h*d}else if(n&&s){const h=this._panPixelsAtSource/this._rotatePixels,m=1+h;this._panPixelFlow=h/m*d,this._rotatePixelFlow=1/m*d}else n?this._panPixelFlow=d:r?this._zoomPixelFlow=d:s&&(this._rotatePixelFlow=d);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const h=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=h,this._panPixelFlow/=h,this._rotatePixelFlow/=h}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/RRe:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=e*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(i*(i/r)**-e-i)/(r-i)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:r}=this.definition;return i+e*(r-i)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*e*this._time)-1))/(i*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),i.zoom=this._interpolateComponentsZoom(e),i.pan=this._interpolateComponentsPan(e),i.rotate=this._interpolateComponentsRotate(e),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(e)}};const RRe=$w(45);function PRe(t,e,i){const r=e-t.compared.sourceZoom,n=t.halfWindowPanAtZoom(r);return-t.halfWindowSize*(i.ascensionFactor*Math.LN2*t.compared.pan+n)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*n)}function DRe(t,e,i){const r=1/e,n=Math.log(t.compared.sourceZoom*r),s=1/t.desiredPixelFlow,o=1/Math.LN2,u=e-t.compared.sourceZoom,d=1/u,h=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(u))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*r*s*o*d*h-t.halfWindowSize*n*s*o*d+t.halfWindowSize*n*s*o*h/(u*u)}function NRe(t,e,i){const r=e-t.compared.sourceZoom,n=1/r,s=1/e,o=Math.log(t.compared.sourceZoom*s),u=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(r))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*n*(-2*n*s*u+2*n*o+2*s-2*o*u/(r*r)-u/(e*e))/(t.desiredPixelFlow*Math.LN2)}function LRe(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function jRe(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function zRe(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function FRe(t,e,i){return-t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function VRe(t,e,i){return t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function URe(t,e,i){return-2*t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function qRe(t,e,i){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function GRe(t,e,i){const r=Math.log(e/t.compared.targetZoom),n=1/t.desiredPixelFlow,s=1/Math.LN2,o=-e+t.compared.targetZoom,u=1/o,d=(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*r*n*s*u+t.halfWindowSize*r*n*s*d/(o*o)+t.halfWindowSize*n*s*u*d/e}function BRe(t,e,i){const r=e-t.compared.targetZoom,n=1/r,s=1/e,o=Math.log(e/t.compared.targetZoom),u=(t.halfWindowPanAtZoom(e)+i.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*n*(-2*n*s*u-2*n*o+2*s+2*o*u/(r*r)-u/(e*e))/(t.desiredPixelFlow*Math.LN2)}function HRe(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function WRe(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function ZRe(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function JRe(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const i=Math.LN2*t.compared.pan,r=e,n=t.halfWindowPanAtZoom(r),s=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*n);return t.compared.sourceZoom<=t.compared.targetZoom?s*(i-n):s*(i+n)}function YRe(t,e){let i=QRe(t,e);const r={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},n=r.ascensionFactor===0,s=r.descensionFactor===0,o=n?LRe:PRe,u=n?jRe:DRe,d=n?zRe:NRe,h=s?HRe:qRe,m=s?WRe:GRe,v=s?ZRe:BRe,b=P=>o(t,P,r)+FRe(t,P,r)+h(t,P,r),_=P=>u(t,P,r)+VRe(t,P,r)+m(t,P,r),x=P=>d(t,P,r)+URe(t,P,r)+v(t,P,r);let $=b(i);const E=JRe(t);let A;const O=e.maximumIterations||20,D=e.maximumDistance!=null?e.maximumDistance:1/0;for(A=0;A<O;A++){const P=e.desiredSlope??1e-6;let j=_(i);Math.abs(j)>P&&(j+=P);const Q=j/x(i);if(isNaN(Q)||i>=D&&Q<0){if(!isFinite(D))return null;i=D,$=b(i);break}if(i-=Q,i<=t.compared.sourceZoom||i<=t.compared.targetZoom)return null;const re=b(i);if(Math.abs(re-$)/$<=.005)break;$=re}return isNaN($)||$>E*(1-.3)||i<=t.compared.sourceZoom||i<=t.compared.targetZoom?null:i}function QRe(t,e){const i=Math.max(t.compared.sourceZoom,t.compared.targetZoom),r=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return r<i?e.maximumDistance!=null?i+(e.maximumDistance-i)/2:1.5*i:e.maximumDistance?Math.min(e.maximumDistance,r):r}let XRe=class extends CRe{constructor(e,i){super(),this._preallocSegments=[new j5,new j5,new j5],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,i)}update(e,i){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const r=i?.apex?YRe(e,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,i?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r),e===this._ascensionSegment?r.zoom=OA(r.zoom):e===this._descensionSegment&&(r.zoom=HS(r.zoom))}_updateWithApex(e,i){const[r,n,s]=this._preallocSegments,o=i?.ascensionFactor??.5,u=Math.min(1-o,i?.ascensionFactor!=null&&i.descensionFactor!=null?i.descensionFactor:.5),d=1-o-u;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=e,r.definition.compared.pan=this.definition.compared.pan*o,r.definition.compared.rotate=this.definition.compared.rotate*o,r.definition.segmentEnd=o,r.update(),this._ascensionSegment=r,this.segments.push(r),d>0&&(n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.copyFrom(this.definition),n.definition.compared.sourceZoom=e,n.definition.compared.targetZoom=e,n.definition.compared.pan=this.definition.compared.pan*d,n.definition.compared.rotate=this.definition.compared.rotate*d,n.definition.segmentStart=r.definition.segmentEnd,n.definition.segmentEnd=r.definition.segmentEnd+d,n.update(),this.segments.push(n)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=e,s.definition.compared.pan=this.definition.compared.pan*u,s.definition.compared.rotate=this.definition.compared.rotate*u,s.definition.segmentStart=o+d,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const KRe=new ORe;let e5e=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=zA,this.definition=new kRe(e),this.path=new XRe}update(e,i,r){this.definition.update(e,i,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(Kge(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?zA:LA)}cameraAt(e,i){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const r=this.path.interpolateComponentsAt(e,KRe);i.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(e){const i=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(e,this._time)-i)/(r-i)}_applyTimeSettings(e,i){const r=i.speedFactor!=null?i.speedFactor:1,n=i.minDuration??FA.minDuration/r,s=i.maxDuration??FA.maxDuration/r;return e=i.duration!=null?i.duration:Math.min(Math.max(e/r,n),s)}};const t5e=2e3,i5e=64;let r5e=class{constructor(e){this._view=e,this._animation=new e5e(()=>new dW(this._view)),this._current=new dW(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,i,r={}){Xn(this._current.viewpoint,e),Xn(this._source.viewpoint,e),Xn(this._target.viewpoint,i),this._animation.update(this._source,this._target,r)}applyRatio(e,i){this._animation.cameraAt(i,this._current),Xn(e,this._current.viewpoint)}},Lv=class extends _e{constructor(e){super(e),this._animation=null,this._destinationViewState=new LF,this.updateFunction=null,this.easing=kW.ease,this.viewpoint=new Jr({targetGeometry:new je,scale:0,rotation:0}),this._updateTask=jb({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new r5e(e.view)}destroy(){this._updateTask=gi(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,i,r){this.stop();const n=this.viewpoint;Xn(n,i);const s=e.target;this._transition.update(this.viewpoint,s,{apex:{maximumDistance:Math.min(Math.min(i.scale,s.scale)*i5e,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r?.duration,maxDuration:r?.animationMode==="auto"?1/0:r?.maxDuration??Woe.maxDuration,speedFactor:r?.speedFactor,easing:(typeof r?.easing=="string"?kW[r.easing]:r?.easing)||this.easing}),r?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=s,n5e(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,s,{duration:0}));const o=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const r=new s4({target:e.clone()}),n=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const i=this.animation;if(i&&i.state!==s4.state.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),this.animation?.update(this.viewpoint);else{const r=performance.now()-this._startTime,n=this._transition.duration,s=n>0?r/n:1,o=s>=1;this._transition.applyRatio(this.viewpoint,s),o&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function n5e(t,e,i,r){if(e?.duration!=null)return!0;const{time:n,isLinear:s}=t,o=e?.speedFactor||1;if(n>(e?.maxDuration??Woe.maxDuration/o))return!1;if(s){const d=Tt(),h=jr(...r.toScreen(d,...i.center)),m=jr(...i.toScreen(d,...r.center)),v=m!=null&&m.x>-1*i.size[0]&&m.x<(1.5+.5)*i.size[0]&&m.y>-1*i.size[1]&&m.y<(1.5+.5)*i.size[1],b=h!=null&&h.x>-1*r.size[0]&&h.x<(1.5+.5)*r.size[0]&&h.y>-1*r.size[1]&&h.y<(1.5+.5)*r.size[1];if(n>t5e/o&&!v&&!b)return!1}return!0}l([p()],Lv.prototype,"easing",void 0),l([p()],Lv.prototype,"view",void 0),l([p()],Lv.prototype,"viewpoint",void 0),Lv=l([M("esri.views.2d.AnimationManager")],Lv);const s5e=Lv;function _i(){return Promise.all([H(()=>import("./webglDeps-CcX9gXvC.js"),__vite__mapDeps([179,131,180,181,182,13,37])),H(()=>import("./mapViewDeps-DY3Oo9GO.js"),__vite__mapDeps([183,97,71,72,66,12,13,73,70,74,63,184,185,131,180,181,121,64,186,67,182,37,130,36,187,62,90,188,111,15,16,68,78,189,75,76,190,191,2,179,192,87,193,194,110,195,118,119,196,51,61,65,20,19,197,77,198,69,138,139,83,199,79,84,59,200,201,202,203,126,204]))])}const o1=()=>_i().then(()=>H(()=>import("./TileLayerView2D-By3iProS.js"),__vite__mapDeps([205,70,71,72,66,12,13,73,74,63,190,97,191,2,188,187,62,36,181,182,37,130,131,90,111,15,16,192,185,180,121,186,67,87,193,194,110,51,184,64,68,78,75,76,118,119,199,61,65,20,19,79,84,59,206,207,208,203,209,153,210,201,202,211,212,213,214,215,216,217,218]))),Xf=()=>_i().then(()=>H(()=>import("./FeatureLayerView2D-0a1yrULT.js").then(t=>t.F),__vite__mapDeps([219,184,71,72,66,12,13,73,70,74,63,185,131,180,181,121,64,186,67,182,37,130,36,187,62,90,188,111,15,16,68,78,220,221,222,20,27,209,153,202,203,87,52,50,51,85,79,189,223,136,29,81,214,217,211,212,218]))),OW={"base-dynamic":()=>_i().then(()=>H(()=>import("./BaseDynamicLayerView2D-DmPmFZWw.js"),__vite__mapDeps([224,225,187,62,63,36,181,182,13,37,130,131,90,188,111,15,12,16,207,185,180,121,208,209,153,226,211,212]))),"base-tile":o1,"bing-maps":o1,catalog:()=>_i().then(()=>H(()=>import("./CatalogLayerView2D-sfgwbYgo.js"),__vite__mapDeps([227,209,188,153,211]))),"catalog-dynamic-group":()=>_i().then(()=>H(()=>import("./CatalogDynamicGroupLayerView2D-BYpA8c5q.js"),__vite__mapDeps([228,209,188,153,211]))),"catalog-footprint":()=>_i().then(()=>H(()=>import("./CatalogFootprintLayerView2D-rZ-tSBup.js"),__vite__mapDeps([229,219,184,71,72,66,12,13,73,70,74,63,185,131,180,181,121,64,186,67,182,37,130,36,187,62,90,188,111,15,16,68,78,220,221,222,20,27,209,153,202,203,87,52,50,51,85,79,189,223,136,29,81,214,217,211,212,218]))),csv:Xf,"geo-rss":()=>_i().then(()=>H(()=>import("./GeoRSSLayerView2D-DZPUHj4z.js"),__vite__mapDeps([230,209,188,153,200,201,202,13,64,62,63,36,180,131,203,187,181,182,37,130,90,111,15,12,16,184,71,72,66,73,70,74,185,121,186,67,68,78,199,190,97,191,2,61,65,20,19,79,84,59,211]))),feature:Xf,geojson:Xf,parquet:Xf,graphics:()=>_i().then(()=>H(()=>import("./GraphicsLayerView2D-CZhYNhEk.js"),__vite__mapDeps([231,209,188,153,200,201,202,13,64,62,63,36,180,131,203,187,181,182,37,130,90,111,15,12,16,184,71,72,66,73,70,74,185,121,186,67,68,78,199,190,97,191,2,61,65,20,19,79,84,59,211,218]))),group:()=>_i().then(()=>H(()=>import("./GroupLayerView2D-CTC5WQ5P.js"),__vite__mapDeps([232,209,188,153,211]))),imagery:()=>_i().then(()=>H(()=>import("./ImageryLayerView2D-BVJgWrdJ.js"),__vite__mapDeps([233,234,182,13,37,130,131,36,102,187,62,63,181,90,188,111,15,12,16,96,94,209,153,199,71,72,66,73,70,74,190,97,191,2,61,64,65,67,20,19,184,185,180,121,186,68,78,79,84,59,210,201,202,203,225,207,208,226,100,175,220,217,211,212,218]))),"imagery-tile":()=>_i().then(()=>H(()=>import("./ImageryTileLayerView2D-BheFMGhl.js"),__vite__mapDeps([235,236,234,182,13,37,130,131,36,102,187,62,63,181,90,188,111,15,12,16,96,94,209,153,99,237,203,185,180,121,198,186,67,208,238,100,218,175,220,217,211,212]))),kml:()=>_i().then(()=>H(()=>import("./KMLLayerView2D-DJ8JUZUr.js"),__vite__mapDeps([239,240,207,188,185,131,180,181,121,208,225,187,62,63,36,182,13,37,130,90,111,15,12,16,209,153,200,201,202,64,203,184,71,72,66,73,70,74,186,67,68,78,199,190,97,191,2,61,65,20,19,79,84,59,211,138,139,83,100,195,179,118,119,193,237]))),"knowledge-graph":()=>_i().then(()=>H(()=>import("./KnowledgeGraphLayerView2D-XHZBW3S2.js"),__vite__mapDeps([241,209,188,153,211]))),"link-chart":()=>_i().then(()=>H(()=>import("./KnowledgeGraphLayerView2D-XHZBW3S2.js"),__vite__mapDeps([241,209,188,153,211]))),"knowledge-graph-sublayer":Xf,"map-image":()=>_i().then(()=>H(()=>import("./MapImageLayerView2D-mnRjzk09.js"),__vite__mapDeps([242,225,187,62,63,36,181,182,13,37,130,131,90,188,111,15,12,16,207,185,180,121,208,209,153,199,71,72,66,73,70,74,190,97,191,2,61,64,65,67,20,19,184,186,68,78,79,84,59,210,201,202,203,226,211,243,214,216,220,212,213,215,217,218]))),"map-notes":()=>_i().then(()=>H(()=>import("./MapNotesLayerView2D-CPrfFcwW.js"),__vite__mapDeps([244,209,188,153,200,201,202,13,64,62,63,36,180,131,203,187,181,182,37,130,90,111,15,12,16,184,71,72,66,73,70,74,185,121,186,67,68,78,199,190,97,191,2,61,65,20,19,79,84,59,211,218]))),media:()=>_i().then(()=>H(()=>import("./MediaLayerView2D-Cu4BnGHg.js"),__vite__mapDeps([245,246,84,70,71,72,66,12,13,73,74,63,190,97,191,2,188,187,62,36,181,182,37,130,131,90,111,15,16,192,185,180,121,186,67,87,193,194,110,51,184,64,68,78,75,76,118,119,199,61,65,20,19,79,59,197,77,247,198,209,153,211]))),"ogc-feature":()=>_i().then(()=>H(()=>import("./OGCFeatureLayerView2D-qNZbnkqE.js"),__vite__mapDeps([248,219,184,71,72,66,12,13,73,70,74,63,185,131,180,181,121,64,186,67,182,37,130,36,187,62,90,188,111,15,16,68,78,220,221,222,20,27,209,153,202,203,87,52,50,51,85,79,189,223,136,29,81,214,217,211,212,218]))),"open-street-map":o1,"oriented-imagery":Xf,route:()=>_i().then(()=>H(()=>import("./RouteLayerView2D-BTLHekAy.js"),__vite__mapDeps([249,250,251,209,188,153,200,201,202,13,64,62,63,36,180,131,203,187,181,182,37,130,90,111,15,12,16,184,71,72,66,73,70,74,185,121,186,67,68,78,199,190,97,191,2,61,65,20,19,79,84,59,211,218]))),stream:()=>_i().then(()=>H(()=>import("./StreamLayerView2D-DQsVyXb4.js"),__vite__mapDeps([252,219,184,71,72,66,12,13,73,70,74,63,185,131,180,181,121,64,186,67,182,37,130,36,187,62,90,188,111,15,16,68,78,220,221,222,20,27,209,153,202,203,87,52,50,51,85,79,189,223,136,29,81,214,217,211,212,218]))),"subtype-group":()=>_i().then(()=>H(()=>import("./SubtypeGroupLayerView2D-opVWQ6X3.js"),__vite__mapDeps([253,219,184,71,72,66,12,13,73,70,74,63,185,131,180,181,121,64,186,67,182,37,130,36,187,62,90,188,111,15,16,68,78,220,221,222,20,27,209,153,202,203,87,52,50,51,85,79,189,223,136,29,81,214,217,211,212,218]))),tile:o1,"vector-tile":()=>_i().then(()=>H(()=>import("./VectorTileLayerView2D-D6uyQK5l.js"),__vite__mapDeps([254,74,51,13,70,110,194,111,73,131,182,37,130,187,62,63,36,181,90,188,15,12,16,203,18,112,113,97,209,153,211,212]))),video:()=>_i().then(()=>H(()=>import("./VideoLayerView2D-EmYQjE6J.js"),__vite__mapDeps([255,256,145,144,247,90,187,62,63,36,181,182,13,37,130,131,188,111,15,12,16,184,71,72,66,73,70,74,185,180,121,64,186,67,68,78,198,257,209,153,200,201,202,203,199,190,97,191,2,61,65,20,19,79,84,59,211]))),wcs:()=>_i().then(()=>H(()=>import("./ImageryTileLayerView2D-BheFMGhl.js"),__vite__mapDeps([235,236,234,182,13,37,130,131,36,102,187,62,63,181,90,188,111,15,12,16,96,94,209,153,99,237,203,185,180,121,198,186,67,208,238,100,218,175,220,217,211,212]))),"web-tile":o1,wfs:Xf,wms:()=>_i().then(()=>H(()=>import("./WMSLayerView2D-Div7dvQf.js"),__vite__mapDeps([258,225,187,62,63,36,181,182,13,37,130,131,90,188,111,15,12,16,207,185,180,121,208,209,153,226,211,212,259,220]))),wmts:()=>_i().then(()=>H(()=>import("./WMTSLayerView2D-CYLZJKW6.js"),__vite__mapDeps([260,206,207,188,185,131,180,181,121,208,187,62,63,36,182,13,37,130,90,111,15,12,16,203,209,153,211,212]))),"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"gaussian-splat":null,"integrated-mesh-3dtiles":null,"integrated-mesh":null,"line-of-sight":null,"point-cloud":null,scene:null,unknown:null,unsupported:null,viewshed:null,voxel:null};function o5e(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new L(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const CW={hasLayerViewModule:t=>OW[t.type]!=null,importLayerView:t=>{const e=OW[t.type];if(e==null)throw o5e(t);return e(t)}};var No;let jw=(No=class{static getId(e,i,r,n){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${r}/${n}`}constructor(e,i,r,n){this.set(e,i,r,n)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|e<<8|r}acquire(e,i,r,n){this.set(e,i,r,n)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}containsChild(e){const i=e.level-this.level;return i>0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new No(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,r,n){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[s,o,u,d]=e.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(u),this.world=parseFloat(d)}else this.level=+e,this.row=+i,this.col=+r,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new No(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,i,r){const n=this.clone();return n.col+=e,n.row+=i,r.normalizeKey(n),n}getChildKeys(){const e=this.level+1,i=this.row<<1,r=this.col<<1,n=this.world;return[new No(e,i,r,n),new No(e,i,r+1,n),new No(e,i+1,r,n),new No(e,i+1,r+1,n)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}},No.pool=new gw(()=>new No(""),null,null,25,50),No);function rv(t,e){return[t,e]}function Kf(t,e,i){return t[0]=e,t[1]=i,t}function a5e(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}const dl=new jw("0/0/0/0");let l5e=class Joe{static create(e,i,r=null){const n=es(e.spatialReference),s=i.origin||rv(e.origin.x,e.origin.y),o=rv(e.size[0]*i.resolution,e.size[1]*i.resolution),u=rv(-1/0,-1/0),d=rv(1/0,1/0),h=rv(1/0,1/0);r!=null&&(Kf(u,Math.max(0,Math.floor((r.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymax)/o[1]))),Kf(d,Math.max(0,Math.floor((r.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymin)/o[1]))),Kf(h,d[0]-u[0]+1,d[1]-u[1]+1));const{cols:m,rows:v}=i;let b,_,x,$;return!r&&m&&v&&(Kf(u,m[0],v[0]),Kf(d,m[1],v[1]),Kf(h,m[1]-m[0]+1,v[1]-v[0]+1)),e.isWrappable?(b=rv(Math.ceil(Math.round((n.valid[1]-n.valid[0])/i.resolution)/e.size[0]),h[1]),_=!0,x=n.origin,$=n.valid):(b=h,_=!1),new Joe(i.level,i.resolution,i.scale,s,u,d,h,o,b,_,x,$)}constructor(e,i,r,n,s,o,u,d,h,m,v,b){this.level=e,this.resolution=i,this.scale=r,this.origin=n,this.first=s,this.last=o,this.size=u,this.norm=d,this.worldSize=h,this.wrap=m,this._spatialReferenceOrigin=v,this._spatialReferenceValid=b}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}normalizeKey(e){if(!this.wrap)return;const i=this.worldSize[0],r=e.col;r<0?(e.col=r+i,e.world-=1):r>=i&&(e.col=r-i,e.world+=1)}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){const i=this.origin[0]+e*this.norm[0],r=this._spatialReferenceOrigin,n=this._spatialReferenceValid;return this.wrap&&r&&n?i===r[0]?n[0]:this.origin[0]===r[0]&&e===this.worldSize[0]?n[1]:i:i}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,r=!1){dl.set(i);const n=r?dl.col:this.denormalizeCol(dl.col,dl.world),s=dl.row;return a5e(e,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),e}getTileCoords(e,i,r=!1){dl.set(i);const n=r?dl.col:this.denormalizeCol(dl.col,dl.world);return Array.isArray(e)?Kf(e,this.getXForColumn(n),this.getYForRow(dl.row)):(e.x=this.getXForColumn(n),e.y=this.getYForRow(dl.row)),e}};var xy;let VF=(xy=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:i,colFrom:r,colTo:n}of this.spans)for(let s=r;s<=n;s++){const o=e.getWorldForColumn(s);yield new jw(e.level,i,e.normalizeCol(s),o)}}forEach(e,i){const{spans:r,lodInfo:n}=this,{level:s}=n;if(r.length!==0)for(const{row:o,colFrom:u,colTo:d}of r)for(let h=u;h<=d;h++)e.call(i,s,o,n.normalizeCol(h),n.getWorldForColumn(h))}},xy.pool=new gw(()=>new xy),xy),z5=class{constructor(e,i,r){this.row=e,this.colFrom=i,this.colTo=r}};const ki=new jw("0/0/0/0");let u5e=class Yoe{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[r,n]=e,[s,o]=i,u=s-r,d=o-n,h=d!==0?u/d:0,m=(Math.ceil(n)-n)*h,v=(Math.floor(n)-n)*h;return new Yoe(r,Math.floor(n),Math.ceil(o),h,u<0?m:v,u<0?v:m,u<0?s:r,u<0?r:s)}constructor(e,i,r,n,s,o,u,d){this.x=e,this.ymin=i,this.ymax=r,this.invM=n,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=u,this.rightBound=d}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const vo=[[0,0],[0,0],[0,0],[0,0]],c5e=1e-6;let d5e=class{constructor(e,i=null,r=e.lods[0].level,n=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=e.lods.filter(u=>u.level>=r&&u.level<=n);this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const o=this._lodInfos=s.map(u=>l5e.create(e,u,i));s.forEach((u,d)=>{this._infoByLevel[u.level]=o[d],this._infoByScale[u.scale]=o[d],this.scales[d]=u.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,r=!1){ki.set(i);const n=this._infoByLevel[ki.level];return n?n.getTileBounds(e,ki,r):e}getTileCoords(e,i,r=!1){ki.set(i);const n=this._infoByLevel[ki.level];return n?n.getTileCoords(e,ki,r):e}getTileCoverage(e,i=192,r=!0,n="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const s=n==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),o=VF.pool.acquire(s),u=this._wrap;let d,h,m,v=1/0,b=-1/0;const _=o.spans;vo[0][0]=vo[0][1]=vo[1][1]=vo[3][0]=-i,vo[1][0]=vo[2][0]=e.size[0]+i,vo[2][1]=vo[3][1]=e.size[1]+i;for(const A of vo)e.toMap(A,A),A[0]=s.getColumnForX(A[0]),A[1]=s.getRowForY(A[1]);const x=[];let $=3;for(let A=0;A<4;A++){if(vo[A][1]===vo[$][1]){$=A;continue}const O=u5e.create(vo[A],vo[$]);v=Math.min(O.ymin,v),b=Math.max(O.ymax,b),x[O.ymin]===void 0&&(x[O.ymin]=[]),x[O.ymin].push(O),$=A}if(v==null||b==null||b-v>100)return null;let E=[];for(d=v;d<b;){x[d]!=null&&(E=E.concat(x[d])),h=1/0,m=-1/0;for(let A=E.length-1;A>=0;A--){const O=E[A];h=Math.min(h,O.getLeftCol()),m=Math.max(m,O.getRightCol())}if(h=Math.floor(h),m=Math.floor(m),d>=s.first[1]&&d<=s.last[1])if(u)if(s.size[0]<s.worldSize[0]){const A=Math.floor(m/s.worldSize[0]);for(let O=Math.floor(h/s.worldSize[0]);O<=A;O++)_.push(new z5(d,Math.max(s.getFirstColumnForWorld(O),h),Math.min(s.getLastColumnForWorld(O),m)))}else _.push(new z5(d,h,m));else h>s.last[0]||m<s.first[0]||(h=Math.max(h,s.first[0]),m=Math.min(m,s.last[0]),_.push(new z5(d,h,m)));d+=1;for(let A=E.length-1;A>=0;A--){const O=E[A];O.ymax>=d?O.incrRow():E.splice(A,1)}}return o}getTileParentId(e){ki.set(e);const i=this._infoByLevel[ki.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(ki,this._lodInfos[r],ki),ki.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){ki.set(i);const r=this._infoByLevel[ki.level],n=e.lodInfo;if(n.resolution>r.resolution){this._getTileIdAtLOD(ki,n,ki);const o=n.denormalizeCol(ki.col,ki.world);for(const u of e.spans)if(u.row===ki.row&&u.colFrom<=o&&u.colTo>=o)return!0}if(n.resolution<r.resolution){const[o,u,d,h]=e.spans.reduce(($,E)=>($[0]=Math.min($[0],E.row),$[1]=Math.max($[1],E.row),$[2]=Math.min($[2],E.colFrom),$[3]=Math.max($[3],E.colTo),$),[1/0,-1/0,1/0,-1/0]),m=r.denormalizeCol(ki.col,ki.world),v=n.getColumnForX(r.getXForColumn(m)),b=n.getRowForY(r.getYForRow(ki.row)),_=n.getColumnForX(r.getXForColumn(m+1))-1,x=n.getRowForY(r.getYForRow(ki.row+1))-1;return!(v>h||_<d||b>u||x<o)}const s=n.denormalizeCol(ki.col,ki.world);return e.spans.some(o=>o.row===ki.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(e,i,r){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const n=es(this.tileInfo.spatialReference),s=-r*(n.valid[1]-n.valid[0]);e[0]+=s,e[2]+=s}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(e>i[r]+c5e)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((r,n)=>Math.abs(n-e)<Math.abs(r-e)?n:r,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=i.length-1;r>=0;r--)if(e<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-e)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,i,r){const n=this._infoByLevel[r.level];return e.set(r),i.resolution<n.resolution?null:(i.resolution===n.resolution||(e.level=i.level,e.col=Math.floor(r.col*n.resolution/i.resolution+.01),e.row=Math.floor(r.row*n.resolution/i.resolution+.01)),e)}},p5e=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},Qoe=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new K0,this._controllers=new K0,this._processingItems=new K0,this._pausedSignal=My(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new DS(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=gi(this._schedule),this._task=gi(this._task)}get updating(){return!!this._task?.updating||this.readyToRun}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,r)=>e(r))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,i){const r=this.get(e);if(r)return r;const n=new AbortController;let s=null;i&&(s=Wa(i,()=>n.abort()));const o=()=>{const m=this._processingItems.get(e);m&&m.controller.abort(),u(),h.reject(xt())},u=()=>{d.remove(),s?.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},d=Lz(n.signal,o),h=ao();return this._deferreds.set(e,h),this._controllers.set(e,n),h.promise.then(u,u),this._queue.push(e),this._scheduleNext(),h.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){const e=this._queue.popLast();return e&&(this._deferreds.get(e)?.reject(xt()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get readyToRun(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=vw(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const r=new AbortController,n=new p5e(e,r);this._processingItems.set(e,n);try{i=this.process(e,r.signal)}catch(s){this._processError(n,s)}Kn(i)?(n.promise=i,i.then(s=>this._processResult(n,s),s=>this._processError(n,s))):this._processResult(n,i)}get test(){}};const RW=[0,0];let td=class extends _e{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:i,scheduler:r,priority:n}=this;this._queue=new Qoe({concurrency:e,scheduler:r,priority:n,process:(s,o)=>{const u=this._keyToItem.get(s);return i(u,{signal:o})},peeker:s=>this._peek(s)})}destroy(){this.clear(),this._queue=at(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),n=this.tileInfoView.getTileScale(e.key),s=Wy(this._tilesByScale,n,()=>new Set),o=()=>{s.delete(e.key),s.size===0&&this._tilesByScale.delete(n),this._keyToItem.delete(i)};return s.add(e.key),this._keyToItem.set(i,e),r.then(o,o),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const i=new Set;for(const o of e)i.add(this._keyToItem.get(o).key);const r=this.state.scale;let n,s=Number.POSITIVE_INFINITY;for(const[o,u]of this._tilesByScale)if(MX(u,d=>i.has(d))){const d=Math.abs(o-r);d<s&&(n=u,s=d)}return this._getClosestTileKey(n,e).id}_getClosestTileKey(e,i){const r=this.tileInfoView,n=this.state.center;let s,o=Number.POSITIVE_INFINITY;for(const u of e)if(i.has(u.id)){r.getTileCoords(RW,u);const d=Aw(RW,n);d<o&&(o=d,s=u)}return s}};l([p({constructOnly:!0})],td.prototype,"concurrency",void 0),l([p({constructOnly:!0})],td.prototype,"priority",void 0),l([p({constructOnly:!0})],td.prototype,"process",void 0),l([p({constructOnly:!0})],td.prototype,"scheduler",void 0),l([p()],td.prototype,"state",void 0),l([p({constructOnly:!0})],td.prototype,"tileInfoView",void 0),td=l([M("esri.views.2d.tiling.TileQueue")],td);const pKe=td;let h5e=class{constructor(e,i,r){this.maxSize=e,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const r=i.key.level,n=this._tileKeysPerLevel[r];PW(this._tilePerId,e);for(let s=0;s<n.length;s++)if(n[s].id===e){n.splice(s,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const n=i.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(i)}prune(e,i,r){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==e&&(n=this._pruneAroundCenterTile(n,i,r,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,i,r,e))}_pruneAroundCenterTile(e,i,r,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return e;const{size:o,origin:u}=this._tileInfoView.tileInfo,d=r*o[0],h=r*o[1],m=[0,0],v=[0,0];for(s.sort((b,_)=>(m[0]=u.x+d*(b.col+.5),m[1]=u.y-h*(b.row+.5),v[0]=u.x+d*(_.col+.5),v[1]=u.y-h*(_.row+.5),zy(m,i)-zy(v,i)));s.length>0;){const b=s.pop();if(this._removeTile(b.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),PW(this._tilePerId,e)}};function PW(t,e){t.delete(e)}const em=new jw(0,0,0,0),Lc=new Map,a1=[],F5=[];let fKe=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new h5e(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){const{resampling:i,tileIndex:r}=this,{scale:n,center:s,resolution:o}=e.state,{minScale:u,maxScale:d}=this.tileInfoView,h=!e.stationary&&n>this._previousScale;if(this._previousScale=n,!i&&(n>u||n<d))return this.tiles.length=0,void this.clear();const m=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!m)return this.tiles.length=0,void this.clear();const{spans:v,lodInfo:b}=m,{level:_}=b;this.tiles.length=0,r.forEach(A=>A.visible=!0);let x=0,$=0;if(v.length>0)for(const{row:A,colFrom:O,colTo:D}of v)for(let R=O;R<=D;R++){x++;const P=em.set(_,A,b.normalizeCol(R),b.getWorldForColumn(R)).id;let j=r.get(P);if(j)j.isReady?(Lc.set(P,j),$++):h||this._addParentTile(P,Lc);else{if(this._tileCache?.has(P)){if(j=this._tileCache.pop(P),this.tileIndex.set(P,j),j.isReady){Lc.set(P,j),$++;continue}}else j=this.acquireTile(em),this.tileIndex.set(P,j);h||this._addParentTile(P,Lc)}}const E=$===x;for(const[A,O]of r){if(Lc.has(A))continue;em.set(A);const D=this.tileInfoView.intersects(m,em),R=this.cachePolicy==="purge"?em.level!==_:em.level>_;!D||!h&&E?!R&&D||a1.push(O):O.isReady?R&&this.cachePolicy==="purge"&&this._hasReadyAncestor(em,_)?a1.push(O):F5.push(O):R&&a1.push(O)}for(const A of F5)A.isReady&&Lc.set(A.key.id,A);for(const A of a1)this._tileCache?this._tileCache.add(A):this.releaseTile(A),r.delete(A.key.id);for(const A of Lc.values())this.tiles.push(A);for(const A of r.values())Lc.has(A.key.id)||(A.visible=!1);this._tileCache?.prune(_,s,o),VF.pool.release(m),F5.length=0,a1.length=0,Lc.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){for(const i of this.tileIndex.values())e(i);this._tileCache?.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){let r=e,n=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(n=this.tileIndex.get(r),n?.isReady){i.has(n.key.id)||i.set(n.key.id,n);break}}else if(this._tileCache?.has(r)&&(n=this._tileCache.pop(r),this.tileIndex.set(r,n),n?.isReady)){i.has(n.key.id)||i.set(n.key.id,n);break}}_hasReadyAncestor(e,i){const r=io();this.tileInfoView.getTileBounds(r,e,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=i&&n.key.level<e.level){const s=io();if(this.tileInfoView.getTileBounds(s,n.key,!0),l_e(s,r))return!0}return!1}};const f5e={"area-measurement":null,dimension:null,"direct-line-measurement":null,"elevation-profile":()=>H(()=>import("./ElevationProfileAnalysisView2D-DUZizUPR.js"),__vite__mapDeps([261,97,262,263,264,265,266,267,268,83,269,270,271,272,273,274])),"line-of-sight":null,slice:null,viewshed:null,"volume-measurement":null};function m5e(t){const e=f5e[t.type];if(!e)throw new L("analysis-view-module-import-utils:analysis-not-supported",`Analysis "${t.type}" is not supported`);return e()}let y5e=class{constructor(e,i={}){this.events=new hte,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,e!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),e.contains(this._canvas)||e.appendChild(this._canvas)):i.canvas!=null&&(this._canvas=i.canvas);const r={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let n=this._canvas.getContext("webgl2",r);n||(n=this._canvas.getContext("webgl2",{...r,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=n,this._handles=uo([mw(this._canvas,"webglcontextlost",s=>this.events.emit("webgl-context-lost",s))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(e,i){if(this._hasMajorPerformanceCaveat||q("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=q("esri-performance-mode-frames-between-render")&&(i(),this._lastRenderViewState=e.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[r,n,s,o,u,d]=this._computeViewTransform(this._lastRenderViewState,e.state);this._canvas.style.transform=`matrix(${r}, ${n}, ${s}, ${o}, ${u}, ${d})`}}else i()}resize(e){const i=this._canvas,r=i.style,{state:{size:n},pixelRatio:s}=e,o=n[0],u=n[1],d=Math.round(o*s),h=Math.round(u*s);i.width===d&&i.height===h||(i.width=d,i.height=h),r.width=o+"px",r.height=u+"px"}_computeViewTransform(e,i){const[r,n]=e.center,[s,o]=i.center,[u,d]=e.toScreen([0,0],s,o),[h,m]=e.toScreen([0,0],r,n),v=h-u,b=m-d,_=e.scale/i.scale,x=i.rotation-e.rotation,$=Ku();return noe($),wk($,$,[_,_]),Ex($,$,$w(x)),ow($,$,[v,b]),$}};function g5e(t,e,i,r,n){Xoe(t,e,i||0,r||t.length-1,n||v5e)}function Xoe(t,e,i,r,n){for(;r>i;){if(r-i>600){var s=r-i+1,o=e-i+1,u=Math.log(s),d=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*d*(s-d)/s)*(o-s/2<0?-1:1);Xoe(t,e,Math.max(i,Math.floor(e-o*d/s+h)),Math.min(r,Math.floor(e+(s-o)*d/s+h)),n)}var m=t[e],v=i,b=r;for(l1(t,i,e),n(t[r],m)>0&&l1(t,i,r);v<b;){for(l1(t,v,b),v++,b--;n(t[v],m)<0;)v++;for(;n(t[b],m)>0;)b--}n(t[i],m)===0?l1(t,i,b):l1(t,++b,r),b<=e&&(i=b+1),e<=b&&(r=b-1)}}function l1(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function v5e(t,e){return t<e?-1:t>e?1:0}function VA(t,e){if(!(this instanceof VA))return new VA(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function b5e(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function nv(t,e){s2(t,0,t.children.length,e,t)}function s2(t,e,i,r,n){n||(n=jv(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=e;o<i;o++)s=t.children[o],o2(n,t.leaf?r(s):s);return n}function o2(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function DW(t,e){return t.minX-e.minX}function NW(t,e){return t.minY-e.minY}function V5(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function qT(t){return t.maxX-t.minX+(t.maxY-t.minY)}function w5e(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function _5e(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,s-r)}function U5(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function GT(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function jv(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function LW(t,e,i,r,n){for(var s,o=[e,i];o.length;)(i=o.pop())-(e=o.pop())<=r||(s=e+Math.ceil((i-e)/r/2)*r,g5e(t,s,e,i,n),o.push(e,s,s,i))}VA.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!GT(t,e))return i;for(var n,s,o,u,d=[];e;){for(n=0,s=e.children.length;n<s;n++)o=e.children[n],GT(t,u=e.leaf?r(o):o)&&(e.leaf?i.push(o):U5(t,u)?this._all(o,i):d.push(o));e=d.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!GT(t,e))return!1;for(var r,n,s,o,u=[];e;){for(r=0,n=e.children.length;r<n;r++)if(s=e.children[r],GT(t,o=e.leaf?i(s):s)){if(e.leaf||U5(t,o))return!0;u.push(s)}e=u.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=jv([]),this},remove:function(t,e){if(t==null)return this;for(var i,r,n,s,o=this.data,u=this.toBBox(t),d=[],h=[];o||d.length;){if(o||(o=d.pop(),r=d[d.length-1],i=h.pop(),s=!0),o.leaf&&(n=b5e(t,o.children,e))!==-1)return o.children.splice(n,1),d.push(o),this._condense(d),this;s||o.leaf||!U5(o,u)?r?(i++,o=r.children[i],s=!1):o=null:(d.push(o),h.push(i),i=0,r=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:DW,compareMinY:NW,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,s=i-e+1,o=this._maxEntries;if(s<=o)return nv(n=jv(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),(n=jv([])).leaf=!1,n.height=r;var u,d,h,m,v=Math.ceil(s/o),b=v*Math.ceil(Math.sqrt(o));for(LW(t,e,i,b,this.compareMinX),u=e;u<=i;u+=b)for(LW(t,u,h=Math.min(u+b-1,i),v,this.compareMinY),d=u;d<=h;d+=v)m=Math.min(d+v-1,h),n.children.push(this._build(t,d,m,r-1));return nv(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,s,o,u,d,h,m,v;r.push(e),!e.leaf&&r.length-1!==i;){for(m=v=1/0,n=0,s=e.children.length;n<s;n++)d=V5(o=e.children[n]),(h=w5e(t,o)-d)<v?(v=h,m=d<m?d:m,u=o):h===v&&d<m&&(m=d,u=o);e=u||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),s=[],o=this._chooseSubtree(n,this.data,e,s);for(o.children.push(t),o2(o,n);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(n,s,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var s=this._chooseSplitIndex(i,n,r),o=jv(i.children.splice(s,i.children.length-s));o.height=i.height,o.leaf=i.leaf,nv(i,this.toBBox),nv(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(t,e){this.data=jv([t,e]),this.data.height=t.height+1,this.data.leaf=!1,nv(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,s,o,u,d,h,m;for(d=h=1/0,r=e;r<=i-e;r++)o=_5e(n=s2(t,0,r,this.toBBox),s=s2(t,r,i,this.toBBox)),u=V5(n)+V5(s),o<d?(d=o,m=r,h=u<h?u:h):o===d&&u<h&&(h=u,m=r);return m},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:DW,n=t.leaf?this.compareMinY:NW;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,s,o=this.toBBox,u=s2(t,0,e,o),d=s2(t,i-e,i,o),h=qT(u)+qT(d);for(n=e;n<i-e;n++)s=t.children[n],o2(u,t.leaf?o(s):s),h+=qT(u);for(n=i-e-1;n>=e;n--)s=t.children[n],o2(d,t.leaf?o(s):s),h+=qT(d);return h},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)o2(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():nv(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function S5e(t,{timeZone:e,timeExtent:i}){return{$view:{scale:t,timeZone:e,timeProperties:{currentStart:i?.start,currentEnd:i?.end}}}}let jW=class Koe{constructor(e,i){this.key=new jw(0,0,0,0),this.bounds=io(),this.objectIds=new Set,this.key.set(i);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=e.zoomToScale(r.level-1),this.maxScale=e.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return s_e(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return S5e(this.scale,e)}createChildTiles(){const e=this.key.getChildKeys(),i=ws.acquire();for(let r=0;r<e.length;r++)i[r]=new Koe(this.tileInfoView,e[r]);return i}getQuantizationParameters(){return Eh.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const tm={added:[],removed:[]},q5=new Set,x5e=new jw(0,0,0,0);function $5e(t,e){const i=es(e);if(!i)return null;const[r,n]=i.valid;return t[2]>n?[io([t[0],t[1],n,t[3]]),io([r,t[1],r+t[2]-n,t[3]])]:t[0]<r?[io([r,t[1],t[2],t[3]]),io([n-(r-t[0]),t[1],n,t[3]])]:null}let T5e=class extends pte{constructor(e){super(),this._tiles=new Map,this._index=VA(9,q("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){super.destroy(),this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||S6(e)===0||x6(e)===0)return[];const i=$5e(e,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const n=new jW(this.tileScheme,r);this._tiles.set(r,n),this._index.insert(n),i.added.push(n)}for(const r of e.removed)if(this.has(r)){const n=this.get(r);this._tiles.delete(r),this._index.remove(n),i.removed.push(n)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:r,lodInfo:n}=i,{level:s}=n;if(r.length>0)for(const{row:o,colFrom:u,colTo:d}of r)for(let h=u;h<=d;h++){const m=x5e.set(s,o,n.normalizeCol(h),n.getWorldForColumn(h)).id;if(q5.add(m),!this.has(m)){const v=new jW(this.tileScheme,m);this._tiles.set(m,v),this._index.insert(v),this.tiles.push(v),tm.added.push(v)}}for(let o=this.tiles.length-1;o>=0;o--){const u=this.tiles[o];q5.has(u.id)||(this._tiles.delete(u.id),this.tiles.splice(o,1),this._index.remove(u),tm.removed.push(u))}(tm.added.length||tm.removed.length)&&this.emit("update",tm),VF.pool.release(i),q5.clear(),tm.added.length=0,tm.removed.length=0}};const vKe=1e-30,zW=512,BT=16777216,bKe=8,wKe=29,_Ke=24,SKe=4,xKe=0,$Ke=0,TKe=0,EKe=1,MKe=2,AKe=3,IKe=4,kKe=5,OKe=6,CKe=12,RKe=13,PKe=5,E5e=6,DKe=5,NKe=6,eae=6,M5e=1<<eae,LKe=M5e<<1,jKe=1.05,zKe=3,FKe=1,VKe=3,UKe=3,qKe=5,GKe=6,BKe=1.15,A5e=4,HKe=128,I5e=256,WKe=I5e-2*A5e,ZKe=2,JKe=128,YKe=1,QKe=10,XKe=1024,KKe=128,eet=4,tet=1,iet=1<<20,ret=.75,net=10,set=.75,oet=256,aet=32,uet=512,cet=0,det=1,k5e=1,pet=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],het=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],u1=256,O5e=()=>ie.getLogger("esri.views.webgl.checkWebGLError");function tae(t){switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case t.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case t.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case t.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case t.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case t.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const iae=!!q("enable-feature:webgl-debug");function rae(){return iae}function fet(){return iae}function im(t,e=rae()){if(e){const i=tae(t);if(i){const r=new Error().stack;O5e().error(new L("webgl-error","WebGL error occurred",{message:i,stack:r}))}}}const met={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},rm={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,HALF_FLOAT:5131},Le={RGBA4:32854,R16F:33325,RG16F:33327,RGB32F:34837,RGBA16F:34842,R32F:33326,RG32F:33328,RGBA32F:34836,R11F_G11F_B10F:35898,RGB8:32849,RGBA8:32856,RGB5_A1:32855,R8:33321,RG8:33323,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,RGB16F:34843,RGB9_E5:35901,SRGB8:35905,SRGB8_ALPHA8:35907,RGB565:36194,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2:32857,RGB10_A2UI:36975},C5e=Object.values(Le),UA={DEPTH24_STENCIL8:35056,DEPTH32F_STENCIL8:36013},lS={DEPTH_COMPONENT16:33189,DEPTH_COMPONENT24:33190,DEPTH_COMPONENT32F:36012},d4={FLOAT:rm.FLOAT,UNSIGNED_BYTE:rm.UNSIGNED_BYTE,UNSIGNED_INT_24_8:34042,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,BYTE:rm.BYTE,UNSIGNED_SHORT:rm.UNSIGNED_SHORT,SHORT:rm.SHORT,UNSIGNED_INT:rm.UNSIGNED_INT,INT:rm.INT,HALF_FLOAT:5131,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269},yet=33984,FW={Texture:0,TileTexture:1,BufferObject:2,VertexArrayObject:3,Shader:4,Program:5,FramebufferObject:6,Renderbuffer:7,TransformFeedback:8,Sync:9,UNCOUNTED:10,LinesOfCode:10,Uniform:11,COUNT:12},get=1029,vet=0,bet=36064,wet=36065,_et=36066,xet=36067,$et=33306,Tet=36096,Eet=36128,qn={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497};function Met(t,e,i,r=0){const n=t.gl;t.bindBuffer(i);for(const s of i.layout){const o=e.get(s.name);if(o==null){console.warn(`There is no location for vertex attribute '${s.name}' defined.`);continue}const u=r*s.stride;if(s.count<=4)n.vertexAttribPointer(o,s.count,s.type,s.normalized,s.stride,s.offset+u),n.enableVertexAttribArray(o),s.divisor>0&&n.vertexAttribDivisor(o,s.divisor);else if(s.count===9)for(let d=0;d<3;d++)n.vertexAttribPointer(o+d,3,s.type,s.normalized,s.stride,s.offset+12*d+u),n.enableVertexAttribArray(o+d),s.divisor>0&&n.vertexAttribDivisor(o+d,s.divisor);else if(s.count===16)for(let d=0;d<4;d++)n.vertexAttribPointer(o+d,4,s.type,s.normalized,s.stride,s.offset+16*d+u),n.enableVertexAttribArray(o+d),s.divisor>0&&n.vertexAttribDivisor(o+d,s.divisor);else console.error("Unsupported vertex attribute element count: "+s.count);if(rae()){const d=tae(t.gl);d&&console.error(`Unable to bind vertex attribute "${s.name}" with baseInstanceOffset ${u}:`,d,s)}}}function Aet(t){switch(t){case 6406:case 6409:case 6403:case 36244:case 6402:case 34041:return 1;case 6410:case 33319:case 33320:return 2;case 6407:case 36248:return 3;case 6408:case 36249:return 4}return 0}function R5e(t){switch(t){case 6406:case 6409:case 6403:case 36244:case Le.R8:case Le.R8I:case Le.R8UI:case Le.R8_SNORM:case 36168:return 1;case 6410:case 33319:case 33320:case Le.RGBA4:case Le.R16F:case Le.R16I:case Le.R16UI:case Le.RG8:case Le.RG8I:case Le.RG8UI:case Le.RG8_SNORM:case Le.RGB565:case Le.RGB5_A1:case lS.DEPTH_COMPONENT16:return 2;case 6407:case 36248:case Le.RGB8:case Le.RGB8I:case Le.RGB8UI:case Le.RGB8_SNORM:case Le.SRGB8:case lS.DEPTH_COMPONENT24:return 3;case 6408:case 36249:case Le.RGBA8:case Le.R32F:case Le.R11F_G11F_B10F:case Le.RG16F:case Le.R32I:case Le.R32UI:case Le.RG16I:case Le.RG16UI:case Le.RGBA8I:case Le.RGBA8UI:case Le.RGBA8_SNORM:case Le.SRGB8_ALPHA8:case Le.RGB9_E5:case Le.RGB10_A2UI:case Le.RGB10_A2:case lS.DEPTH_COMPONENT32F:case UA.DEPTH24_STENCIL8:return 4;case UA.DEPTH32F_STENCIL8:return 5;case Le.RGB16F:case Le.RGB16I:case Le.RGB16UI:return 6;case Le.RG32F:case Le.RG32I:case Le.RG32UI:case Le.RGBA16F:case Le.RGBA16I:case Le.RGBA16UI:return 8;case Le.RGB32F:case Le.RGB32I:case Le.RGB32UI:return 12;case Le.RGBA32F:case Le.RGBA32I:case Le.RGBA32UI:return 16;case qn.COMPRESSED_RGB_S3TC_DXT1_EXT:case qn.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case qn.COMPRESSED_RGBA_S3TC_DXT3_EXT:case qn.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case qn.COMPRESSED_R11_EAC:case qn.COMPRESSED_SIGNED_R11_EAC:case qn.COMPRESSED_RGB8_ETC2:case qn.COMPRESSED_SRGB8_ETC2:case qn.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case qn.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case qn.COMPRESSED_RG11_EAC:case qn.COMPRESSED_SIGNED_RG11_EAC:case qn.COMPRESSED_RGBA8_ETC2_EAC:case qn.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let nae=class{constructor(e=0,i=e){this.width=e,this.height=i,this.type=0,this.target=3553,this.pixelFormat=6408,this.dataType=d4.UNSIGNED_BYTE,this.samplingMode=9729,this.wrapMode=10497,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function P5e(t){return t.width<=0||t.height<=0||t.depth<=0?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(t.internalFormat==null?4:R5e(t.internalFormat))*(t.target===34067?6:1))}const c1=()=>ie.getLogger("esri/views/webgl/textureUtils");function d1(t){const{width:e,height:i,depth:r}=t;(e!=null&&e<0||i!=null&&i<0||r!=null&&r<0)&&c1().error("Negative dimension parameters are not allowed!");const{internalFormat:n}=t;if(n&&(sae(n)||oae(n))){const{linearFilterDepth:s,compareEnabled:o,samplingMode:u,hasMipmap:d}=t;d&&c1().error("Depth textures cannot have mipmaps"),s?u!==9729&&u!==9728&&c1().error("Depth textures cannot sample mipmaps"):(u!==9728&&c1().error("Depth textures without filtering must use NEAREST filtering"),o&&c1().error("Depth textures without filtering cannot use compare function"))}}function D5e(t){return C5e.includes(t)}function sae(t){return kI(lS,t)}function oae(t){return kI(UA,t)}function N5e(t){return t!=null&&kI(qn,t)}function zv(t){return t!=null&&"type"in t&&t.type==="compressed"}function L5e(t){return t!=null&&"byteLength"in t}function VW(t){return t!=null&&!zv(t)&&!L5e(t)}function sv(t){return t===32879||t===35866}function UW(t,e,i,r=1){let n=Math.max(e,i);return t===32879&&(n=Math.max(n,r)),Math.floor(Math.log2(n))+1}function HT(t){if(t.internalFormat!=null)return t.internalFormat;switch(t.dataType){case d4.FLOAT:switch(t.pixelFormat){case 6408:return Le.RGBA32F;case 6407:return Le.RGB32F;default:throw new L("texture:unknown-format","Unable to derive format")}case d4.UNSIGNED_BYTE:switch(t.pixelFormat){case 6408:return Le.RGBA8;case 6407:return Le.RGB8}}const{pixelFormat:e}=t;return t.internalFormat=e===34041?UA.DEPTH24_STENCIL8:e===6402?lS.DEPTH_COMPONENT24:e,t.internalFormat}function j5e(t){let e="width"in t?t.width:t.codedWidth,i="height"in t?t.height:t.codedHeight;return t instanceof HTMLVideoElement&&(e=t.videoWidth,i=t.videoHeight),{width:e,height:i,depth:1}}let z5e=class aae extends nae{constructor(e,i){switch(super(),this.context=e,Object.assign(this,i),this.internalFormat){case Le.R16F:case Le.R32F:case Le.R8_SNORM:case Le.R8:this.pixelFormat=6403;break;case Le.R8I:case Le.R8UI:case Le.R16I:case Le.R16UI:case Le.R32I:case Le.R32UI:this.pixelFormat=36244}}static validate(e,i){return new aae(e,i)}};const F5e=!!q("esri-tests-disable-gpu-memory-measurements"),jc=()=>ie.getLogger("esri/views/webgl/Texture");var Rr;let V5e=(Rr=class{constructor(e,i=null,r=null){if(this.type=1,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,r=i;else{const n=z5e.validate(e,i);if(!n)throw new L("texture:invalid-descriptor","Texture descriptor invalid");this._descriptor=n}this._descriptor.target===34067?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return F5e?0:P5e(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this.hasWebGLTextureObject&&this._descriptor.context?.gl&&(this._descriptor.context.instanceCounter.decrement(FW.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null,this._descriptor=null)}release(){this.dispose()}[Symbol.dispose](){this.dispose()}resize(e,i){const r=this._descriptor;if(r.width!==e||r.height!==i){if(this._wasImmutablyAllocated)throw new L("texture:immutable-resize","Immutable textures can't be resized!");r.width=e,r.height=i,this._descriptor.target===34067?this._setDataCubeMap(null):this.setData(null)}}enableCompression(e){this._descriptor.compress=e}disableCompression(){this._descriptor.compress=void 0}setData(e){this.abortCompression(),!zv(e)&&this._descriptor.internalFormat&&kI(qn,this._descriptor.internalFormat)&&(this._descriptor.internalFormat=void 0),this._setData(e),!zv(e)&&this._descriptor.compress&&this._compressOnWorker(e)}updateData(e,i,r,n,s,o,u=0){o||jc().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||jc().error("An attempt to update uninitialized texture!");const d=this._descriptor;d.internalFormat=HT(d);const{context:h,pixelFormat:m,dataType:v,target:b,isImmutable:_}=d;if(_&&!this._wasImmutablyAllocated)throw new L("texture:uninitialized","Cannot update immutable texture before allocation!");const x=h.bindTexture(this,Rr.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||r<0||i+n>d.width||r+s>d.height)&&jc().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:$}=h;u&&(n&&s||jc().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),$.pixelStorei($.UNPACK_SKIP_ROWS,u)),VW(o)?$.texSubImage2D(b,e,i,r,n,s,m,v,o):zv(o)?$.compressedTexSubImage2D(b,e,i,r,n,s,d.internalFormat,o.levels[e]):$.texSubImage2D(b,e,i,r,n,s,m,v,o),u&&$.pixelStorei($.UNPACK_SKIP_ROWS,0),h.bindTexture(x,Rr.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,i,r,n,s,o,u,d){d||jc().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||jc().error("An attempt to update an uninitialized texture!");const h=this._descriptor;h.internalFormat=HT(h);const{context:m,pixelFormat:v,dataType:b,isImmutable:_,target:x}=h;if(_&&!this._wasImmutablyAllocated)throw new L("texture:uninitialized","Cannot update immutable texture before allocation!");sv(x)||jc().warn("Attempting to set 3D texture data on a non-3D texture");const $=m.bindTexture(this,Rr.TEXTURE_UNIT_FOR_UPDATES);m.setActiveTexture(Rr.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||n<0||i+s>h.width||r+o>h.height||n+u>h.depth)&&jc().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:E}=m;if(zv(d))d=d.levels[e],E.compressedTexSubImage3D(x,e,i,r,n,s,o,u,h.internalFormat,d);else{const A=d;E.texSubImage3D(x,e,i,r,n,s,o,u,v,b,A)}m.bindTexture($,Rr.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(e.width===0||e.height===0)return;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new L("texture:immutable-change","Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,d1(e)}e.samplingMode===9729?(this._samplingModeDirty=!0,e.samplingMode=9985):e.samplingMode===9728&&(this._samplingModeDirty=!0,e.samplingMode=9984);const i=this._descriptor.context.bindTexture(this,Rr.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Rr.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(i,Rr.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new L("texture:immutable-change","Cannot delete mipmaps to immutable texture after allocation");e.hasMipmap=!1,this._samplingModeDirty=!0,d1(e)}e.samplingMode===9985?(this._samplingModeDirty=!0,e.samplingMode=9729):e.samplingMode===9984&&(this._samplingModeDirty=!0,e.samplingMode=9728)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,d1(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(e){e!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=e,this.setSamplingMode(e?9729:9728),d1(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=Cn(this._compressionAbortController)}_setData(e,i){const r=this._descriptor,n=r.context?.gl;if(!n)return;im(n),this.hasWebGLTextureObject||(this._glName=n.createTexture(),r.context.instanceCounter.increment(FW.Texture,this)),d1(r);const s=r.context.bindTexture(this,Rr.TEXTURE_UNIT_FOR_UPDATES);r.context.setActiveTexture(Rr.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),im(n);const o=i??r.target,u=sv(o);if(VW(e))this._setDataFromTexImageSource(e,o);else{const{width:d,height:h,depth:m}=r;if(d==null||h==null)throw new L("texture:missing-size","Width and height must be specified!");if(u&&m==null)throw new L("texture:missing-depth","Depth must be specified!");if(r.internalFormat=HT(r),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,r.internalFormat,r.hasMipmap,d,h,m),zv(e)){if(!N5e(r.internalFormat))throw new L("texture:format-mismatch","Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(e,r.internalFormat,o)}else this._texImage(o,0,r.internalFormat,d,h,m,e),im(n),r.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),im(n),r.context.bindTexture(s,Rr.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(e=null){for(let i=34069;i<=34074;i++)this._setData(e,i)}_configurePixelStorage(){const e=this._descriptor.context.gl,{unpackAlignment:i,flipped:r,preMultiplyAlpha:n}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,i),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n?1:0)}_setDataFromTexImageSource(e,i){const{gl:r}=this._descriptor.context,n=this._descriptor;n.internalFormat=HT(n);const s=sv(i),{width:o,height:u,depth:d}=j5e(e);n.width&&n.height,n.width||(n.width=o),n.height||(n.height=u),s&&n.depth,s&&(n.depth=d),n.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(i,n.internalFormat,n.hasMipmap,o,u,d),this._texImage(i,0,n.internalFormat,o,u,d,e),im(r),n.hasMipmap&&(this.generateMipmap(),im(r))}_setDataFromCompressedSource(e,i,r){const n=this._descriptor,{width:s,height:o,depth:u}=n,d=e.levels,h=UW(r,s,o,u),m=Math.min(h,d.length)-1;this._descriptor.context.gl.texParameteri(n.target,33085,m),this._forEachMipmapLevel((v,b,_,x)=>{const $=d[Math.min(v,d.length-1)];this._compressedTexImage(r,v,i,b,_,x,$)},m)}_texStorage(e,i,r,n,s,o){const{gl:u}=this._descriptor.context;if(!D5e(i)&&!sae(i)&&!oae(i))throw new L("texture:missing-format","Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const d=r?UW(e,n,s,o):1;if(sv(e)){if(o==null)throw new L("texture:missing-depth","Missing depth dimension for 3D texture upload");u.texStorage3D(e,d,i,n,s,o)}else u.texStorage2D(e,d,i,n,s);this._wasImmutablyAllocated=!0}_texImage(e,i,r,n,s,o,u){const d=this._descriptor.context.gl,h=sv(e),{isImmutable:m,pixelFormat:v,dataType:b}=this._descriptor;if(m){if(u!=null){const _=u;if(h){if(o==null)throw new L("texture:missing-depth","Missing depth dimension for 3D texture upload");d.texSubImage3D(e,i,0,0,0,n,s,o,v,b,_)}else d.texSubImage2D(e,i,0,0,n,s,v,b,_)}}else{const _=u;if(h){if(o==null)throw new L("texture:missing-depth","Missing depth dimension for 3D texture upload");d.texImage3D(e,i,r,n,s,o,0,v,b,_)}else d.texImage2D(e,i,r,n,s,0,v,b,_)}}_compressedTexImage(e,i,r,n,s,o,u){const d=this._descriptor.context.gl,h=sv(e);if(this._descriptor.isImmutable){if(u!=null)if(h){if(o==null)throw new L("texture:missing-depth","Missing depth dimension for 3D texture upload");d.compressedTexSubImage3D(e,i,0,0,0,n,s,o,r,u)}else d.compressedTexSubImage2D(e,i,0,0,n,s,r,u)}else if(h){if(o==null)throw new L("texture:missing-depth","Missing depth dimension for 3D texture upload");d.compressedTexImage3D(e,i,r,n,s,o,0,u)}else d.compressedTexImage2D(e,i,r,n,s,0,u)}async _compressOnWorker(e){const{width:i,height:r,context:n,flipped:s,preMultiplyAlpha:o,hasMipmap:u}=this._descriptor,d=this._descriptor.compress?.compressionTracker,h=this._descriptor.compress?.compressionCallback,{compressedTextureETC:m,compressedTextureS3TC:v}=n.capabilities;if(!Rr.compressionWorkerHandle?.isCompressible(e,this._descriptor)||!m&&!v)return;this.abortCompression();const b=new AbortController;let _;this._compressionAbortController=b,d?.increment();try{e instanceof Uint8Array?_=e.buffer:(_=await createImageBitmap(e,{imageOrientation:s?"flipY":"none"}),ft(b));const x={data:_,width:i,height:r,needsFlip:e instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===6408?4:3,preMultiplyAlpha:o,hasMipmap:u,hasETC:!!m,hasS3TC:!!v},$=await Rr.compressionWorkerHandle.invoke(x,b.signal,"low");if(ft(b),$.compressedTexture&&this.hasWebGLTextureObject){const E=this.usedMemory;this._descriptor.internalFormat=$.internalFormat,this._setData($.compressedTexture),h?.(E-this.usedMemory)}}catch(x){Yr(x)||jc().error("Texture compression failed!")}finally{d?.decrement(),this._compressionAbortController?.signal.aborted&&(this._compressionAbortController=null),_ instanceof ImageBitmap&&_.close()}}_forEachMipmapLevel(e,i=1/0){let{width:r,height:n,depth:s,hasMipmap:o,target:u}=this._descriptor;const d=u===32879;if(r==null||n==null||d&&s==null)throw new L("texture:missing-size","Missing texture dimensions for mipmap calculation");for(let h=0;e(h,r,n,s),o&&(r!==1||n!==1||d&&s!==1)&&!(h>=i);++h)r=Math.max(1,r>>1),n=Math.max(1,n>>1),d&&(s=Math.max(1,s>>1))}_applySamplingMode(){const e=this._descriptor,i=e.context?.gl;let r=e.samplingMode,n=e.samplingMode;r===9985||r===9987?(r=9729,e.hasMipmap||(n=9729)):r!==9984&&r!==9986||(r=9728,e.hasMipmap||(n=9728)),i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,r),i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,n)}_applyWrapMode(){const e=this._descriptor,i=e.context?.gl;typeof e.wrapMode=="number"?(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode)):(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode.s),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode.t))}_applyShadowMode(){const e=this._descriptor,i=e.context?.gl,r=e.compareEnabled?i.COMPARE_REF_TO_TEXTURE:i.NONE;i.texParameteri(e.target,i.TEXTURE_COMPARE_MODE,r),e.compareEnabled&&i.texParameteri(e.target,i.TEXTURE_COMPARE_FUNC,i.GREATER),im(i)}_applyAnisotropicFilteringParameters(){const e=this._descriptor,i=e.context.capabilities.textureFilterAnisotropic;i&&e.context.gl.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}},Rr.TEXTURE_UNIT_FOR_UPDATES=0,Rr.compressionWorkerHandle=null,Rr);const G5=()=>ie.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function U5e(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const q5e=[0,0,0,0];let lae=class{constructor(){this.type="single",this._highlightOptions=new Yh,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*u1),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,i){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,E5e),i.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<eae)-1,activeGradient:this}]}_updateGradientTexture(e){const i=G5e(this._highlightOptions);if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,U5e(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,n=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,s=r.outlinePosition-r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2,u=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,d=Math.sqrt(Math.PI/2)*k5e,h=Math.abs(n)>d?Math.round(10*(Math.abs(n)-d))/10:0,m=Math.abs(u)>d?Math.round(10*(Math.abs(u)-d))/10:0;let v;h&&!m?G5().error("The outer rim of the highlight is "+h+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!h&&m?G5().error("The inner rim of the highlight is "+m+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):h&&m&&G5().error("The highlight is "+Math.max(h,m)+"px away from the edge of the feature; consider reducing some width values.");const b=[void 0,void 0,void 0,void 0];function _($,E,A){b[0]=(1-A)*$[0]+A*E[0],b[1]=(1-A)*$[1]+A*E[1],b[2]=(1-A)*$[2]+A*E[2],b[3]=(1-A)*$[3]+A*E[3]}const{_texelData:x}=this;for(let $=0;$<u1;++$)v=n+$/(u1-1)*(u-n),v<n?(b[0]=0,b[1]=0,b[2]=0,b[3]=0):v<s?_(q5e,r.outlineColor,(v-n)/(s-n)):v<o?[b[0],b[1],b[2],b[3]]=r.outlineColor:v<u?_(r.outlineColor,r.fillColor,(v-o)/(u-o)):[b[0],b[1],b[2],b[3]]=r.fillColor,x[4*$]=255*b[0],x[4*$+1]=255*b[1],x[4*$+2]=255*b[2],x[4*$+3]=255*b[3];if(this._minMaxDistance[0]=n,this._minMaxDistance[1]=u,!this._shadeTex){const $=new nae(u1,1);$.wrapMode=33071,this._shadeTex=new V5e(e,$)}this._shadeTex.updateData(0,0,0,u1,1,this._texelData)}};function G5e(t){return`${t.color};${t.haloColor};${t.haloOpacity};${t.fillOpacity};${t.haloWidth};${t.haloBlur}`}let B5e=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let i=0;i<e.length;i++)this.gradients[i]||(this.gradients[i]=new lae),this.gradients[i].setHighlightOptions(e[i]);for(let i=e.length+1;i<this.gradients.length;i++)this.gradients[i].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const i=[];for(let r=0;r<this.gradients.length;r++){const n=this.gradients[r];i.push({activeReasons:e,activeGradient:n}),e<<=1}return i}};const uae={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{compare:514,mask:255,op:{fail:7680,zFail:7680,zPass:7681}}}},H5e={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},W5e={...uae,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function Z5e({pixelRatio:t,state:e,displayLevel:i,requiredLevel:r},n){const s=1/2**(i-n.key.level),o=1/2**(r-n.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:n.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:n.transforms.tileMat3,displayZoomFactor:s,requiredZoomFactor:o,tileOffset:[n.x,n.y],currentScale:e.scale,currentZoom:i,metersPerSRUnit:Kr(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function cae(t){return t.passOptions?.type==="highlight"}function dae(t){return t.passOptions?.type==="hittest"}function J5e(t){if(!dae(t))return null;const{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:n}=t.passOptions;return{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:n}}function Y5e(t){if(!cae(t))return null;const{activeReasons:e,highlightAll:i}=t.passOptions;return{activeReasons:e,highlightAll:i?1:0}}function Cet(t,e,i){const r={};for(const n in i)typeof i[n]!="function"?r[n]=i[n]:r[n]=i[n](t,e);return r}function Ret(t,e){const{attributeView:i,context:r}=t;return{storage:i.getUniforms(r),view:Z5e(t,e),hittestRequest:J5e(t),highlight:Y5e(t)}}function Pet(t){return{inside:t.selection===2,outside:t.selection===3}}function Q5e(t){return dae(t)?H5e:cae(t)&&t.passOptions.stepType==="clear"?W5e:uae}function Det(t){const{row:e,col:i}=t.key,r=i*zW,n=e*zW;return{tileOffsetFromLocalOrigin:[r%BT,n%BT],maxIntsToLocalOrigin:[Math.floor(r/BT),Math.floor(n/BT)]}}const X5e=new Be({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function Net(t){return X5e.toJSON(t)}function Let(t){const{bandCount:e,attributeTable:i,colormap:r,pixelType:n}=t.raster.rasterInfo;return e===1&&(i!=null||r!=null||n==="u8"||n==="s8")}function K5e(t,e){return e==null?(t?.destroy(),null):(t?.type==="single"&&Array.isArray(e)&&(t.destroy(),t=null),t?.type!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new B5e:new lae),Array.isArray(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function jet(t,e,i,r){const{painter:n,highlightGradient:s}=t,{highlight:o}=n.effects;if(!s)return;const u=t.passOptions,d=s.getReasonsWithGradients();for(let h=0;h<d.length;h++){const m={...t,passOptions:{type:"highlight",activeGradient:d[h].activeGradient,activeReasons:d[h].activeReasons,stepType:"burn",highlightAll:e}};if(o.bind(m),i(m),h<d.length-1){let b=0;for(let _=h+1;_<d.length;_++)b|=d[_].activeReasons;i({...t,passOptions:{type:"highlight",activeGradient:d[h].activeGradient,activeReasons:b,stepType:"clear",highlightAll:e}})}const v={...t,passOptions:{type:"highlight",activeGradient:d[h].activeGradient,activeReasons:d[h].activeReasons,stepType:"draw",highlightAll:e}};n.setPipelineState(Q5e(t)),n.updatePipelineState(t.context),o.draw(v),o.unbind()}t.passOptions=u}const WT=t=>parseFloat(t)/100;function ePe(t,e,i){const r=typeof t.left=="string"?WT(t.left)*e:t.left,n=typeof t.right=="string"?WT(t.right)*e:t.right,s=typeof t.top=="string"?WT(t.top)*i:t.top,o=typeof t.bottom=="string"?WT(t.bottom)*i:t.bottom,u=s;return{xmin:r,xmax:Math.max(e-n,r),ymin:u,ymax:Math.max(i-o,s)}}function pae(t,e,i,r){switch(e.type){case"rect":{const{width:n,height:s}=t,{xmin:o,xmax:u,ymin:d,ymax:h}=ePe(e,n,s),{x:m,y:v}=i;return m>o&&m<u&&v>d&&v<h}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||_6(e.path,[i.x,i.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?w6(e.geometry,r):px(e.geometry,r))}}function tPe(t){if(!t.highlights)return null;const e=t.highlights.findIndex(i=>i.name==="default");return e===-1?null:t.highlights.items[e]}function iPe(t,e){if(!t.highlights){if(!e)return;t.highlights=new fe([new Yh])}const i=t.highlights.findIndex(r=>r.name==="default");e?t.highlights.items[i].assignFrom(e):(t.highlights.removeAt(i),t.highlights.length===0&&(t.highlights=null))}async function rPe(t,e,i){const r=Bse(e)?Gse(t,e):e;if(!t.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let n=new Set;const s=new Set;let o=!1,u=null,d=null;i?.include?GW(i.include,qW(t,b=>{n.add(b),B5(b,_=>s.add(_))},(b,_)=>{s.add(b),n.add(_)},b=>{u||(u=new Set),u.add(b)},b=>n.add(b),()=>o=!0)):(o=!0,n=new Set(t.allLayerViews),n.forEach(b=>{B5(b,_=>s.add(_))})),i?.exclude&&GW(i.exclude,qW(t,b=>{n.delete(b),B5(b,_=>s.delete(_))},b=>s.delete(b),b=>{d||(d=new Set),d.add(b)}));const h=t.toMap(r),m=t.allLayerViews.filter(b=>!b.suspended&&n.has(b)&&b.clips.every(_=>pae(t,_,r,h))).reverse();let v=[...o?t.graphicsView.hitTest(h).map(b=>({type:"graphic",graphic:b,layer:null,mapPoint:h})):[],...await Promise.all(m.map(b=>b.hitTest(h,r)).toArray())].filter(is).flat().filter(is);return v=v.filter(b=>b.type!=="graphic"||b.layer?.type!=="subtype-group"||s.has(b.graphic.layer)),u&&(v=v.filter(b=>!("graphic"in b)||!b.graphic||u?.has(p4(b.graphic)))),d&&(v=v.filter(b=>!("graphic"in b)||!b.graphic||!d?.has(p4(b.graphic)))),{screenPoint:r,results:v}}function qW(t,e,i,r,n,s){return o=>{if(o instanceof Ti){if(o.layer===t)s?.();else{const u=t.allLayerViews.find(d=>d.layer===o.layer);u&&n?.(u)}r(p4(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const u=t.allLayerViews.find(d=>d.layer===o.parent);u&&i(o,u)}else{const u=t.allLayerViews.find(d=>d.layer===o);u&&e(u)}}}function GW(t,e){if(t)if(Fb(t))for(const i of t)if(Fb(i))for(const r of i)e(r);else e(i);else e(t)}function p4(t){const e=t.getObjectId();return e?`${t.layer?.uid??t.sourceLayer?.uid??"MapView"}/${e}`:`"MapView/${t.uid}`}function B5(t,e){const i=t.layer;i?.type==="subtype-group"&&i.sublayers.forEach(r=>{e(r)})}let p1=null,qA=!0;function nPe(t,e,i){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(qA)try{return new ImageData(t,e)}catch{qA=!1}return hae(t,e,i)}function zet(t,e,i,r){if(!e||!i)throw new Error("Cannot construct image data without dimensions");if(qA)try{return new ImageData(t,e,i)}catch{qA=!1}const n=hae(e,i,r);return n.data.set(t,0),n}function sPe(){return p1||(p1=document.createElement("canvas"),p1.width=1,p1.height=1),p1}function hae(t,e,i){return i||(i=sPe()),i.getContext("2d").createImageData(t,e)}async function oPe(t,e){const i=window.URL.createObjectURL(t);try{const{data:r}=await $t(i,{...e,responseType:"image"});return r}catch(r){throw Yr(r)?r:new L("invalid-image",`Could not fetch requested image at ${i}`)}finally{window.URL.revokeObjectURL(i)}}async function Fet(t,e){const{arrayBuffer:i,mediaType:r}=await aPe(t,e),n=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:s,parseGif:o}=await H(()=>import("./gif-D8fs-v2V.js"),[]);if(s(i))return o(i,e)}if(n){const{isAnimatedPNG:s,parseApng:o}=await H(()=>import("./apng-CgspLwNf.js"),__vite__mapDeps([275,9]));if(s(i))return o(i,e)}return oPe(new Blob([i],{type:r}),e)}async function aPe(t,e){const i=ky(t);if(i?.isBase64)return{arrayBuffer:gK(i.data),mediaType:i.mediaType};const r=await $t(t,{responseType:"array-buffer",...e});return{arrayBuffer:r.data,mediaType:r.getHeader?.("Content-Type")??""}}function fae(t,e,i){const{ctx:r,canvas:n}=yae(t,i),s=r.getImageData(0,0,t.width,t.height),o=vae(n,e);return gae(n),{dataUrl:o,data:s}}function mae(t,e){const{ctx:i,canvas:r}=yae(t,e),n=i.getImageData(0,0,t.width,t.height);return gae(r),n}function yae(t,e){const i=lPe();e.premultipliedAlpha&&pPe(t),i.width=t.width,i.height=t.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&dPe(r),{ctx:r,canvas:i}}function gae(t){t.width=0,t.height=0}function lPe(){return H5==null&&(H5=document.createElement("canvas")),H5}let H5=null;function vae(t,e){const i=hPe[e.format],r=e.quality/100;return t.toDataURL(i,r)}function bae(t,e){const i=cPe(t),r=mPe[i];return{format:i,quality:Qr(e??r,0,100)}}function wae(t,e){return e/Math.max(t[0],t[1])}function uPe(t,e,i,r=0,n=0,s=t.width-r,o=t.height-n,u=!1){const{data:d}=t,{width:h,height:m,data:v}=e,b=s/h,_=o/m,x=Math.ceil(b/2),$=Math.ceil(_/2),E=t.width;for(let A=0;A<m;A++)for(let O=0;O<h;O++){const D=4*(O+(u?m-A-1:A)*h);let R=0,P=0,j=0,Q=0,re=0,ce=0;const ue=(A+.5)*_;for(let ye=Math.floor(A*_);ye<(A+1)*_;ye++){const he=Math.abs(ue-(ye+.5))/$,Pe=(O+.5)*b,ve=he*he;for(let We=Math.floor(O*b);We<(O+1)*b;We++){const ee=Math.abs(Pe-(We+.5))/x,ge=Math.sqrt(ve+ee*ee);if(ge>=1)continue;let Se=2*ge*ge*ge-3*ge*ge+1;const nt=4*(r+We+(n+ye)*E);ce+=Se*d[nt+3],P+=Se,!i&&d[nt+3]<255&&(Se=Se*d[nt+3]/255),j+=Se*d[nt],Q+=Se*d[nt+1],re+=Se*d[nt+2],R+=Se}}v[D]=j/R,v[D+1]=Q/R,v[D+2]=re/R,v[D+3]=ce/P}return e}function cPe(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return fPe}}function dPe(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function pPe(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const n=e[r+3];if(n!==255&&n>0){const s=255/n;e[r]=e[r]*s,e[r+1]=e[r+1]*s,e[r+2]=e[r+2]*s}}}const hPe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},BW=98,fPe="png",mPe={png:100,jpg:BW,jpeg:BW},Vet=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:nPe,encode:fae,encodeData:mae,getFormatAndQuality:bae,getMaximumResolutionScale:wae,resampleHermite:uPe,toDataUrl:vae},Symbol.toStringTag,{value:"Module"})),_ae={flipY:!0,premultipliedAlpha:!0};async function yPe(t,e){const i=await Sae(t,e),{format:r,quality:n}=bae(e?.format,e?.quality);return fae(i,{format:r,quality:n},_ae)}async function gPe(t,e){const i=await Sae(t,e);return mae(i,_ae)}function Sae(t,e){const i=wPe(e||{},bPe(t.stage,t.size),t.size,t.padding),r=vPe(e,t.allLayerViews);return t.stage.takeScreenshot(i,r,t.backgroundColor,e?.rotation)}function vPe(t={},e){if(!t.layers)return;const i=[];return t.layers.forEach(r=>{const n=e.find(s=>s.layer.id===r.id);n?.container&&i.push(n.container)}),i}function bPe(t,e){return Math.min(4,wae(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function wPe(t,e,i,r){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let n=null;t.width!=null&&t.height!=null?n=[t.width,t.height]:t.width==null&&t.height!=null?n=[t.height,t.height]:t.width!=null&&t.height==null?n=[t.width,t.width]:t.width==null&&t.height==null&&(n=null);const s=i[0]-(r.left+r.right),o=i[1]-(r.top+r.bottom);let u,d,h=t.area||{x:0,y:0,width:s,height:o};if(n){const m=s/o,v=n[0]/n[1];if(v>m){const b=h.width/v;h={x:h.x,y:Math.round(h.y+(h.height-b)/2),width:h.width,height:Math.round(b)}}else{const b=h.height*v;h={x:Math.round(h.x+(h.width-b)/2),y:h.y,width:Math.round(b),height:h.height}}}else n=[h.width,h.height];return n[0]>h.width?(u=Math.min(n[0]/h.width,e),d=n[0]/h.width/u):(u=1,d=n[0]/h.width),{cropArea:{x:Math.round((h.x+r.left)*u),y:Math.round((h.y+r.top)*u),width:Math.round(h.width*u),height:Math.round(h.height*u)},outputScale:d,resolutionScale:u}}const _Pe=t=>t.includes("Brush");let xae=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),_Pe(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};const HW=Symbol("analyses-owner-handles");let ch=class extends _e{constructor(e){super(e),this._allAnalysisViews=new fe,this._creatingViewCount=0,this._attachedToViewResolver=WW(),this._items=new Map,this._moduleMap=new Map,this._scheduledUpdateHandle=null,this._emitOnView=(i,r)=>this.view.emit(i,r)}destroy(){this._disconnectOwners(),this._attachedToViewResolver.reject(xt("AnalysisViewManager was destroyed")),this._set("view",null)}attach(){this._connectOwners(),this._attachedToViewResolver.resolve()}detach(){this._disconnectOwners(),this._attachedToViewResolver.reject(xt()),this._attachedToViewResolver=WW()}get updating(){return!this.view.ready||this._creatingViewCount!==0||this._allAnalysisViews.some(e=>e.updating)}get testInfo(){}async whenAnalysisView(e){await this._attachedToViewResolver.promise;const i=this._items.get(e);if(i==null||i.state.list===1)throw new L("AnalysisViewManager:no-analysis-view-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return i.createAnalysisViewTask.promise}_connectOwners(){this.addHandles(this._connectAnalysesCollection(this.view.analyses),HW)}_disconnectOwners(){this.removeHandles(HW),this._update(),this._creatingViewCount=0}_connectAnalysesCollection(e){for(const n of e)this._addAnalysis(n);const i=e.on("after-add",n=>this._addAnalysis(n.item)),r=e.on("after-remove",n=>this._removeAnalysis(n.item));return ut(()=>{i.remove(),r.remove();for(const n of e)this._removeAnalysis(n)})}_addAnalysis(e){const i=this._items.get(e);if(i==null){const r={state:{view:0,list:0},analysis:e,view:null,createAnalysisViewTask:null};this._items.set(e,r),r.createAnalysisViewTask=dc(n=>this._createAnalysisViewPromise(r,n).then(s=>(this._emitOnView("analysis-view-create",{analysis:e,analysisView:s}),s),s=>{throw this._emitOnView("analysis-view-create-error",{analysis:e,error:s}),s}))}else i.state.list=0}_removeAnalysis(e){const i=this._items.get(e);i!=null?(i.state.list=1,this._scheduleUpdate()):ie.getLogger(this).error("Trying to remove analysis which was not added")}_scheduleUpdate(){this._scheduledUpdateHandle==null&&(this._scheduledUpdateHandle=vw(()=>this._update()))}_update(){this._scheduledUpdateHandle=gi(this._scheduledUpdateHandle),this._items.forEach(e=>{if(e.state.list!==1)return;const{analysis:i,view:r}=e;switch(this._items.delete(i),e.state.view){case 0:e.createAnalysisViewTask=Cn(e.createAnalysisViewTask);break;case 1:r!=null&&(this._allAnalysisViews.remove(r),e.view=at(r),e.createAnalysisViewTask=null,this._emitOnView("analysis-view-destroy",{analysis:i,analysisView:r}))}})}async _createAnalysisViewPromise(e,i){const{analysis:r}=e;if(this._creatingViewCount+=1,!this._moduleMap.has(r.type))try{this._moduleMap.set(r.type,await this.importAnalysisViewModule(r))}catch{throw this._creatingViewCount-=1,new L("AnalysisViewManager:no-analysis-view-for-analysis",`Analysis of type "${r.type}" is not supported`)}if(Rn(i))throw this._creatingViewCount-=1,xt("AnalysisView creation aborted");const n=new(this._moduleMap.get(r.type)).default({analysis:r,view:this.view});let s=!0;Wa(i,()=>{s&&this._destroyAnalysisView(r,n)});try{await n.when()}catch(o){throw s=!1,this._destroyAnalysisView(r,n),o}if(Rn(i))throw xt();return s=!1,e.view=n,e.state.view=1,this._allAnalysisViews.add(n),this._creatingViewCount-=1,n}_destroyAnalysisView(e,i){i.destroyed||(this._creatingViewCount-=1,i.destroy(),this._emitOnView("analysis-view-destroy",{analysis:e,analysisView:i}))}};l([p()],ch.prototype,"updating",null),l([p({constructOnly:!0})],ch.prototype,"importAnalysisViewModule",void 0),l([p({constructOnly:!0})],ch.prototype,"view",void 0),l([p()],ch.prototype,"_allAnalysisViews",void 0),l([p()],ch.prototype,"_creatingViewCount",void 0),ch=l([M("esri.views.support.AnalysisViewManager")],ch);const SPe=ch;function WW(){const t=ao();return t.promise.catch(()=>{}),t}let xPe=class{constructor(e){this.getUnmaskedRenderer=e}};function $Pe(t){const e=t.getExtension("WEBGL_debug_renderer_info");return e?new xPe(()=>t.getParameter(e.UNMASKED_RENDERER_WEBGL)):null}let ZW;function TPe(){return ZW??=APe(),ZW}let EPe=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function MPe(t){if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let i=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=e.getContext("webgl2"),i!=null&&(t.majorPerformanceCaveat=!0,t.unmaskedRenderer=$Pe(i)?.getUnmaskedRenderer()??"unknown")),i==null)return i;t.available=!0,t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return r&&(t.supportsHighPrecisionFragment=r.precision>0),i}function APe(){const t=new EPe,e=MPe(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function IPe(t){const e=TPe();return e.available?t==="3d"&&e.majorPerformanceCaveat?new L("webgl:major-performance-caveat-detected",`Your WebGL implementation (${e.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new L("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new L("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new L("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function kPe(t){return t&&"nodeType"in t}function OPe(t){return t&&typeof t.render=="function"}const JW={component:"esri-component"};let Tm=class extends _e{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(e){this._set("id",e)}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(JW.component),i&&i.classList.remove(JW.component),this._set("node",e))}castNode(e){return this.widget?.destroy(),e?typeof e=="string"||kPe(e)?(this._set("widget",null),Y6(e)):(OPe(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};l([p()],Tm.prototype,"id",null),l([p()],Tm.prototype,"node",null),l([Ct("node")],Tm.prototype,"castNode",null),l([p({readOnly:!0})],Tm.prototype,"widget",void 0),Tm=l([M("esri.views.ui.Component")],Tm);const WM=Tm,CPe="--esri-calcite-mode-name";function RPe(){const t=getComputedStyle(document.body).getPropertyValue(CPe).replaceAll(/\W/g,"").toLowerCase();return t==="dark"||t==="light"?t:void 0}const $ae="calcite-mode-";function Tae(t){return RPe()??vye(t??document.body)}function Wet(t){return Tae(t)==="dark"}function PPe(t){return`${$ae}${Tae(t)}`}function DPe(t){const e=PPe(t);NPe(t),t.classList.add(e)}function NPe(t){Array.from(t.classList).forEach(e=>{e.startsWith($ae)&&t.classList.remove(e)})}const $k=new Map;function Eae(){$k.clear()}function LPe(t){return $k.get(t)}function jPe(t,e){$k.set(t,e)}function W5(t){$k.delete(t)}function zPe(...t){const e=ws.acquire();for(let r=0;r<t.length;r++){const n=t[r],s=typeof n;if(s==="string")e.push(n);else if(Array.isArray(n))e.push.apply(e,n);else if(s==="object")for(const o in n)n[o]&&e.push(o)}const i=e.join(" ");return ws.release(e),i}(()=>{const t=new Map,e=new ResizeObserver(r=>{Eae();for(const n of r)t.get(n.target)?.(n)}),i=(r,n,s)=>(t.set(r,n),e.observe(r,s),ut(()=>{e.unobserve(r),t.delete(r)}));return(r,n,s)=>{let o=null;return uo([be(()=>typeof r=="function"?r():r,u=>{o?.remove(),u&&(o=i(u,n,s))},Gt),ut(()=>o?.remove())])}})();function FPe(t){const e=t?.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function Zet(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function Jet(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function VPe(t){return t==="Enter"||t===" "}async function UPe(t,e){await lve(lx(e));const i=typeof t=="function"?t():t;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const qPe={left:0,top:0,bottom:0,right:0},Mae={bottom:30,top:15,right:15,left:15},zc="esri-ui",Ls={ui:zc,corner:`${zc}-corner`,innerContainer:`${zc}-inner-container`,manualContainer:`${zc}-manual-container`,cornerContainer:`${zc}-corner-container`,topLeft:`${zc}-top-left`,topRight:`${zc}-top-right`,bottomLeft:`${zc}-bottom-left`,bottomRight:`${zc}-bottom-right`};function GPe(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function ZT(t){return t===0?"0":`${t}px`}function Z5(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function J5(t,{top:e,bottom:i,left:r,right:n}){t.style.top=e,t.style.bottom=i,t.style.left=r,t.style.right=n}let _u=class extends sp{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=so(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&J5(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&J5(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([be(()=>[this.view?.padding,this.container],this._applyViewPadding,Zr),be(()=>this.padding,this._applyUIPadding,Zr),be(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},Zr),xte(e=>{this._locale=e})])}destroy(){this.removeAllHandles(),this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear(),this.view=null,this._set("view",null)}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(Ls.ui),DPe(e),this._attachContainers(e)),i&&(i.classList.remove(Ls.ui),J5(i,{top:"",bottom:"",left:"",right:""}),i.textContent=""),this._set("container",e))}get height(){const e=this.view?.height??0;if(e===0)return e;const i=this._getViewPadding(),{top:r,bottom:n}=i;return Math.max(e-r-n,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...Mae,...e}}get width(){const e=this.view?.width??0;if(e===0)return e;const i=this._getViewPadding(),{left:r,right:n}=i;return Math.max(e-r-n,0)}add(e,i){let r,n,s;if(Array.isArray(e))return void e.forEach(u=>this.add(u,i));const o=Z5(e);o&&({index:r,position:i,component:e,key:n}=o),i&&typeof i=="object"&&({index:r,key:n,position:i,internal:s}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,r??this._getNumComponentsAtPosition(i),n,s)}remove(e,i){if(!e)return;if(Array.isArray(e))return e.map(n=>this.remove(n,i));const r=this._find(e);if(r){const n=this._componentMap.get(r);if(!n||n.key!==i)return;const s=this._components.indexOf(r);return r.node.parentNode?.removeChild(r.node),this._componentMap.delete(r),r.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach(u=>{const d=this._componentMap.get(u);d&&d.position===n.position&&d.index>n.index&&d.index--}),this._components.splice(s,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const s of e)this.empty(s,i);return}const r=this._positionNameToContainerLookup[e??"manual"],n=Array.prototype.slice.call(r.children).map(s=>this._findByNode(s)).filter(s=>s==null?!1:!(this._componentMap.get(s)?.internal??!1)||i.removeInternal);for(const s of n)this.remove(s)}move(e,i){if(Array.isArray(e)&&e.forEach(o=>this.move(o,i)),!e)return;let r;const n=Z5(e)||Z5(i);if(n&&(r=n.index,i=n.position,e=n.component||e),i&&!this._isValidPosition(i))return;const s=this.remove(e);s&&this.add(s,{position:i,index:r})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(r=>this._getComponentsAtPosition(r,i)):this._getComponentsAtPosition(e,i):this._components.filter(r=>i.includeInternal||!this._componentMap.get(r)?.internal).map(({widget:r,node:n})=>r??n)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,r,n,s){e instanceof WM||(e=new WM({node:e}));const{widget:o}=e;o!=null&&o instanceof _e&&o.addHandles(ut(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey);const u=this._positionNameToContainerLookup[i];this._components.some(d=>{const h=this._componentMap.get(d)?.position,m=h?this._positionNameToContainerLookup[h]:null;return u===m&&this._componentMap.get(d)?.index===r})&&this._components.forEach(d=>{const h=this._componentMap.get(d),m=h?.position,v=m?this._positionNameToContainerLookup[m]:null;h&&v===u&&h.index>=r&&h.index++}),this._place({component:e,position:i,index:r}),this._components.push(e),this._componentMap.set(e,{key:n,position:i,internal:s,index:r})}_find(e){return e?e instanceof WM?this._findByComponent(e):typeof e=="string"?this._findById(e):"domNode"in e?this._findByNode(e.domNode):this._findByNode(e):null}_getViewPadding(){return this.view?.padding??qPe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Ls.innerContainer,Ls.cornerContainer);const i=document.createElement("div");i.classList.add(Ls.innerContainer,Ls.manualContainer);const r=document.createElement("div");r.classList.add(Ls.topLeft,Ls.corner),e.appendChild(r);const n=document.createElement("div");n.classList.add(Ls.topRight,Ls.corner),e.appendChild(n);const s=document.createElement("div");s.classList.add(Ls.bottomLeft,Ls.corner),e.appendChild(s);const o=document.createElement("div");o.classList.add(Ls.bottomRight,Ls.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=i;const u=FPe();this._cornerNameToContainerLookup={"top-left":r,"top-right":n,"bottom-left":s,"bottom-right":o,"top-leading":u?n:r,"top-trailing":u?r:n,"bottom-leading":u?o:s,"bottom-trailing":u?s:o},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const i=e.position??"manual",{component:r,index:n}=e,s=this._positionNameToContainerLookup[i],o=n!=null&&n>-1;if(GPe(r.widget)&&r.widget.startup(),!o)return void s.appendChild(r.node);const u=Array.from(s.children);if(u.length!==0){for(const d of u){const h=this._findByNode(d);if(h&&n<(this._componentMap.get(h)?.index??0))return void d.parentNode?.insertBefore(r.node,d)}s.appendChild(r.node)}else s.appendChild(r.node)}_toPixelPosition(e){return{top:ZT(e.top),left:ZT(e.left),right:ZT(e.right),bottom:ZT(e.bottom)}}_findByComponent(e){return this._components.find(i=>i===e)??null}_findById(e){return this._components.find(({id:i})=>i===e)??null}_findByNode(e){return e?this._components.find(({node:i})=>i===e):null}_getComponentsAtPosition(e,i){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(n=>this._findByNode(n)).filter(is).filter(n=>i.includeInternal||!this._componentMap.get(n)?.internal).map(({widget:n,node:s})=>n??s)}_getNumComponentsAtPosition(e){return this._positionNameToContainerLookup[e]?.children.length??0}};l([p()],_u.prototype,"_locale",void 0),l([p()],_u.prototype,"container",null),l([p()],_u.prototype,"height",null),l([p({value:Mae})],_u.prototype,"padding",null),l([Ct("padding")],_u.prototype,"castPadding",null),l([p()],_u.prototype,"view",void 0),l([p()],_u.prototype,"width",null),_u=l([M("esri.views.ui.UI")],_u);const BPe=_u,HPe={handleInterceptedEvent:(t,e,i,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||i,[r]))},WPe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.startsWith("-")?t.style.setProperty(e,i):t.style[e]=i}},ZPe=t=>({...WPe,...t}),JPe=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},YPe=(t,e)=>t.find(e),YW=(t,e,i=!1)=>{let r=t;return e.forEach((n,s)=>{const o=r?.children?YPe(r.children,u=>u.domNode===n):void 0;i&&!o&&s!==e.length-1||(r=o)}),r},QPe=t=>{let e;const i={...HPe,...t},r=ZPe(i),n=r.performanceLogger;let s,o=!0,u=!1;const d=[],h=[],m=(b,_,x)=>{let $;r.eventHandlerInterceptor=(A,O,D,R)=>function(P){let j;n("domEvent",P);const Q=JPe(P.currentTarget,$.domNode),re=Q.some(ue=>customElements.get(ue?.tagName?.toLowerCase()));if(P.eventPhase===Event.CAPTURING_PHASE||!re)Q.reverse(),j=YW($.getLastRender(),Q);else{const ue=P.composedPath(),ye=ue.slice(ue.indexOf(P.currentTarget),ue.indexOf($.domNode)).reverse();j=YW($.getLastRender(),ye,!0)}let ce;return j&&(ce=i.handleInterceptedEvent(e,j,this,P)),n("domEventProcessed",P),ce},i.postProcessProjectionOptions?.(r);const E=x();$=b(_,E,r),r.eventHandlerInterceptor=void 0,d.push($),h.push(x),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered($,E)};let v=()=>{if(s=void 0,o){o=!1,n("renderStart",void 0);for(let b=0;b<d.length;b++){const _=h[b]();n("rendered",void 0);try{d[b].update(_)}catch(x){console.error(x)}n("patched",void 0)}n("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(v=i.modifyDoRenderImplementation(v,d,h)),e={renderNow:v,scheduleRender:()=>{s||u||(s=requestAnimationFrame(v))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),u=!0},resume:()=>{u=!1,o=!0,e.scheduleRender()},append:(b,_)=>{m(zh.append,b,_)},insertBefore:(b,_)=>{m(zh.insertBefore,b,_)},merge:(b,_)=>{m(zh.merge,b,_)},replace:(b,_)=>{m(zh.replace,b,_)},detach:b=>{for(let _=0;_<h.length;_++)if(h[_]===b)return h.splice(_,1),d.splice(_,1)[0];throw new Error("renderFunction was not found")}},e};let Aae=!1;const XPe=t=>{Aae=!0,gme(t)};let Iae;function KPe(){Aae||XPe(jo(rr(Iae)))}function xf(t){const e=[];for(const i of Object.keys(t))customElements.get(`calcite-${i}`)||e.push(t[i]?.());return e.length>0?Promise.all(e):null}Iae="components/assets";const kae=Symbol("widget"),Oae=Symbol("widget-test-data"),eDe=[],tDe={},GA=new WeakMap;function Cae(t,e){let i=e.children;if(i?.length)for(let n=0;n<i.length;++n)i[n]=Cae(t,i[n]);else i=eDe;const r=e.vnodeSelector;if(BA(r)){const n=e.properties||tDe,s=n.key||r,o={key:s,afterCreate:iDe,afterUpdate:rDe,afterRemoved:Rae,parentWidget:t,widgetConstructor:r,widgetProperties:{...n,key:s,children:i}};return{vnodeSelector:r.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return e}function iDe(t,e,i,{parentWidget:r,widgetConstructor:n,widgetProperties:s}){const o=new n(s);o.container=t,GA.set(t,o),o.afterCreate?.(o,t),r.addHandles(ut(()=>Rae(t))),queueMicrotask(()=>{o[Oae].projector?.renderNow()})}function rDe(t,e,i,{widgetProperties:r}){const n=GA.get(t);n&&(n.set(r),n.afterUpdate?.(n,t))}function Rae(t){const e=GA.get(t);e&&(e.afterRemoved?.(e,t),e.destroy(),GA.delete(t))}function BA(t){return typeof t=="function"&&t[kae]}const QW=new Set;function nDe(t){QW.add(t),t.finally(()=>QW.delete(t))}function sDe(t){return ut()}var XW;let oDe=0;function Pae(t,e){const i=Object.prototype.hasOwnProperty;for(const r in e)i.call(e,r)&&i.call(t,r)&&(t[r]!=null&&e[r]!=null&&typeof t[r]=="object"&&typeof e[r]=="object"?Pae(t[r],e[r]):t[r]=e[r]);return t}const aDe=QPe({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(r,n,s,o)=>{const u=e?.(r,n,s,o),d=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in s)||d){const h=r[2].toLowerCase()+r.slice(3),m=_=>u?.call(s,_);s.addEventListener(h,m,d);const v=()=>s.removeEventListener(h,m,d),b=o.afterRemoved;o.afterRemoved=_=>{b?.(_),v()}}return u}},handleInterceptedEvent(t,e,i,r){const{eventPhase:n,type:s}=r,o=n===Event.CAPTURING_PHASE;let u=`on${s}${o?"capture":""}`;const d=e.properties;(d&&u in d||(u=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,d&&u in d))&&(Eae(),t.scheduleRender(),d[u].call(d.bind||i,r))}});let Y5=!1;var $y;let an=($y=class extends ok(sp){constructor(e,i){super(e,i),this._attached=!1,this._projector=aDe,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=RI(async()=>{if(this._messageBundleProps?.length){const d=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:h,propertyName:m})=>{if(this.destroyed)return;let v=await Rie(h);this.destroyed||(this.uiStrings&&Object.keys(this.uiStrings)&&(v=Pae(z(v),this.uiStrings)),this[m]=v)}));if(this.destroyed)return;for(const h of d)h.status==="rejected"&&ie.getLogger(this).error("widget-intl:locale-error",this.declaredClass,h.reason)}await this.loadLocale()}),this.addHandles(sDe()),KPe();const r="esri-widget-uid-"+tg(),n=this.render.bind(this);this._trackingTarget=new ox(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const s=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{if(!this._readyForTrueRender||this.destroyed)return null;const d=n()??s(),h=d.properties??={};if(h.key??=r,BA(d.vnodeSelector)){if(!this.visible)return s()}else this.visible?h.styles||(h.styles={}):(h.class="",h.styles={display:"none"}),h.styles.display??="";let m=0;return d.children?.forEach(v=>{BA(v.vnodeSelector)||(v.properties??={},v.properties.key??=`${this.id}--${m++}`)}),Cae(this,d)};this.render=()=>{if(Y5)return o();let d=LPe(this)??null;if(d)return d;this._trackingTarget.clear(),Y5=!0;try{d=ic(this._trackingTarget,o)}catch(h){throw ie.getLogger(this).error(h),h}finally{Y5=!1}return d&&jPe(this,d),d};const u=this.beforeFirstRender();u?this._resourcesFetch=u.then(()=>{this.destroyed||(this._readyForTrueRender=!0,this._postInitialize())}):(this._resourcesFetch=Promise.resolve().then(()=>{this.destroyed||this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),nDe(this._resourcesFetch)}normalizeCtorArgs(e,i){const r={...e};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){const e=this.loadDependencies();return this._messageBundleProps?.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(eD):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(at(this._trackingTarget),at(this.viewModel),this._detach(this.container),this._set("container",null),this.render=()=>null,this._projector=null,W5(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return Y6(e)}get destroyed(){return super.destroyed}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+oDe++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(XW=kae,Oae)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(W5(this),this._projector.scheduleRender())}classes(...e){return zPe.apply(this,e)}renderNow(){W5(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles(be(()=>this.viewModel,(i,r)=>{r&&this.removeHandles("delegated-events"),i&&CI(i)&&this.addHandles(this._delegatedEventNames.map(n=>mw(i,n,s=>{this.emit(n,s)})),"delegated-events")},Gt)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(eD),this.scheduleRender()};this.addHandles([xte(e),be(()=>this.uiStrings,e)]),this.addHandles(Pn(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0}))}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&(this._projector.detach(this.render),this._attached=!1),e?.parentNode?.removeChild(e)}},$y[XW]=!0,$y.vnodeSelector="div",$y);l([p()],an.prototype,"_readyForTrueRender",void 0),l([p({value:null})],an.prototype,"container",null),l([Ct("container")],an.prototype,"castContainer",null),l([p()],an.prototype,"icon",null),l([p()],an.prototype,"id",null),l([p()],an.prototype,"label",null),l([p()],an.prototype,"renderable",null),l([p()],an.prototype,"uiStrings",void 0),l([p()],an.prototype,"viewModel",void 0),l([p({value:!0})],an.prototype,"visible",null),l([p()],an.prototype,"key",void 0),l([p()],an.prototype,"children",void 0),l([p()],an.prototype,"afterCreate",void 0),l([p()],an.prototype,"afterUpdate",void 0),l([p()],an.prototype,"afterRemoved",void 0),an=l([M("esri.widgets.Widget")],an);const pc=an,lDe=new Map;function uDe(t){return lDe.get(t)}function KW(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function cDe(t,e){return t.length!==e.length||t.some((i,r)=>i.text!==e[r].text)}function JT(t,e,i){!i||!e||t.find(r=>r.layerView===e&&r.text===i)||t.push({text:i,layerView:e})}function dDe(t){return t.type==="bing-maps"}const du=[];let Fv=class extends _e{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new fe,this.view=null,this._allLayerViewsChange=i=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=this.view?.allLayerViews;r&&(this.addHandles(r.map(n=>be(()=>[n.suspended,n.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),r.forEach(n=>{n.declaredClass==="esri.views.3d.layers.IntegratedMesh3DTilesLayerView3D"&&this.addHandles(n.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),i?.removed&&i.removed.forEach(n=>{this._pendingAttributions.delete(n),this._fetchedAttributionData.delete(n)}),this._updateAttributionItems()},this.addHandles([Wo(()=>this.view?.allLayerViews,"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Pn(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e?.allLayerViews;du.length=0;let r=!1,n=null;if(!e||!i)return void this._clear();i.forEach(o=>{if(o.suspended||!o.layer?.attributionVisible)return;const u=o.layer;if(KW(u,"user"))return void JT(du,o,u.copyright);if(u.type==="integrated-mesh-3dtiles"&&u.hasGoogleUrl&&(r=!0,n=o),u.hasAttributionData){if(this._fetchedAttributionData.has(o)){const h=this._fetchedAttributionData.get(o);return void(h?JT(du,o,this._getDynamicAttribution(h,e,u)):KW(u)&&JT(du,o,u.copyright))}return void this._fetchAttributionData(o)}const d="portalItem"in u?u.portalItem?.accessInformation:void 0;JT(du,o,d||u.copyright)});const s=i.find(o=>o.layer?.type==="integrated-mesh-3dtiles");if(this.view&&s){const o=uDe(this.view);if(o){const u=o.getAttributionText();for(let d=u.length-1;d>-1;--d)du.unshift({text:u[d],layerView:s})}}r&&n&&du.unshift({text:"Google Maps",layerView:n}),cDe(this.items,du)&&(this.items.removeAll(),this.items.addMany(du)),du.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await sk(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=i.ok?this._createContributionIndex(i.value,dDe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,i){const r=e.contributors,n={};if(!r)return n;for(let s=0;s<r.length;s++){const o=r[s],u=o.coverageAreas;if(!u)return;for(const d of u){const h=d.bbox,m=d.zoomMin-(i&&d.zoomMin?1:0),v=d.zoomMax-(i&&d.zoomMax?1:0),b=new Xe({xmin:h[1],ymin:h[0],xmax:h[3],ymax:h[2],spatialReference:we.WGS84}),_={extent:Wh(b),attribution:o.attribution||"",score:d.score!=null?d.score:100,id:s};for(let x=m;x<=v;x++)n[x]??=[],n[x].push(_)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(e,i,r){const{extent:n,scale:s}=i;let o=r.tileInfo?.scaleToZoom(s)??0;if(o=Math.min(e.maxKey??0,Math.round(o)),!n||o==null||o<=-1)return"";const u=e[o],d=qI(n.center.clone().normalize(),we.WebMercator),h=new Set;return u?u.filter(m=>{const v=m.id,b=!h.has(v)&&d&&m.extent&&px(m.extent,d);return b&&h.add(v),b}).sort((m,v)=>v.score-m.score||m.objectId-v.objectId).map(m=>m.attribution).join(", "):""}};l([p({readOnly:!0,type:fe})],Fv.prototype,"items",void 0),l([p({readOnly:!0})],Fv.prototype,"state",null),l([p()],Fv.prototype,"view",void 0),Fv=l([M("esri.widgets.Attribution.AttributionViewModel")],Fv);const Dae=Fv,Ho={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetDisabled:"esri-widget--disabled"};function pDe(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:fDe(t[e])}}}function hDe(t){const e=t?.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function fDe(t){return function(e,...i){hDe(e)?VPe(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function tc(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var mDe=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},Nae=function(t,e){for(var i=0,r=t.length;i<r;i++){var n=t[i];Array.isArray(n)?Nae(n,e):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=mDe(n)),e.push(n))}},yDe=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var n=[];return Nae(i,n),{vnodeSelector:t,properties:e||void 0,children:n,text:void 0,domNode:null}};function Fe(t,e,...i){return typeof t!="function"||BA(t)?yDe(t,e??null,...i):t(e,...i)}function Q5(...t){return t}const ov="esri-attribution",av={base:ov,poweredBy:`${ov}__powered-by`,sources:`${ov}__sources`,open:`${ov}--open`,sourcesOpen:`${ov}__sources--open`,link:`${ov}__link`};let ds=class extends pc{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._sourcesNode=null,this._overflowRequestAnimationFrame=null,this._resizeObserver=new ResizeObserver(r=>{r.forEach(({target:n})=>{this._scheduleOverflowCheck(n)})}),this._mutationObserver=new MutationObserver(r=>{let n=!1;for(const s of r)if(s.type==="childList"||s.type==="characterData"||s.type==="attributes"){n=!0;break}n&&this._sourcesNode&&this._scheduleOverflowCheck(this._sourcesNode)}),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new Dae}initialize(){this.addHandles(Wo(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect(),this._mutationObserver?.disconnect(),this._overflowRequestAnimationFrame!=null&&(cancelAnimationFrame(this._overflowRequestAnimationFrame),this._overflowRequestAnimationFrame=null)}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}_scheduleOverflowCheck(e){this._overflowRequestAnimationFrame==null&&(this._overflowRequestAnimationFrame=requestAnimationFrame(()=>{this._overflowRequestAnimationFrame=null,this._checkSourceTextOverflow(e)}))}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[av.open]:this._isOpen};return Fe("div",{bind:this,class:this.classes(av.base,Ho.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return Fe("div",{class:av.poweredBy},"Powered by"," ",Fe("a",{class:av.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,r=i?0:void 0,{attributionText:n}=this,s={[av.sourcesOpen]:e,[Ho.interactive]:i};return Fe("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(av.sources,s),innerHTML:n,tabIndex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._sourcesNode=e,this._resizeObserver.observe(e),this._mutationObserver.observe(e,{subtree:!0,childList:!0,characterData:!0,attributes:!0}),this._scheduleOverflowCheck(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:r,clientWidth:n,scrollWidth:s}=e,o=s>n,u=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,u&&(i=!0),this._isOpen){const d=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,d&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};l([p()],ds.prototype,"_isOpen",void 0),l([p()],ds.prototype,"_isInteractive",null),l([p()],ds.prototype,"_attributionTextOverflowed",void 0),l([p()],ds.prototype,"_prevSourceNodeHeight",void 0),l([p({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],ds.prototype,"attributionText",null),l([p()],ds.prototype,"icon",null),l([p()],ds.prototype,"itemDelimiter",void 0),l([p()],ds.prototype,"label",null),l([p(),tc("esri/widgets/Attribution/t9n/Attribution")],ds.prototype,"messages",void 0),l([p()],ds.prototype,"view",null),l([p({type:Dae})],ds.prototype,"viewModel",void 0),l([pDe()],ds.prototype,"_toggleState",null),ds=l([M("esri.widgets.Attribution")],ds);const gDe=ds;function vDe(){const t=q("mapview-essential-goto-duration");return t==null?t:t}function bDe(t){return t?.spatialReference?.isWebMercator||t?.spatialReference?.isGeographic||!1}function wDe(t,e,i){return t.goTo(e,i)}const _De=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:n}=this;return vX(n),this.goToOverride?this.goToOverride(n,r):wDe(n,r.target,r.options)}};return l([p()],i.prototype,"goToOverride",void 0),l([p()],i.prototype,"view",void 0),i=l([M("esri.widgets.support.GoTo")],i),i};let Em=class extends _De(_e){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(Zr)}destroy(){this.view=null}get canShowNorth(){return bDe(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&(this.view?.type==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:vDe()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(e){this.removeAllHandles(),this._watchForView(),e&&this.addHandles(e.type==="2d"?be(()=>e?.rotation,this._updateForRotation,Zr):be(()=>e?.camera,this._updateForCamera,Zr))}_watchForView(e){this.addHandles(be(()=>this.view,this._updateRotationWatcher,e))}};l([p({readOnly:!0})],Em.prototype,"canShowNorth",null),l([p({readOnly:!0})],Em.prototype,"orientation",void 0),l([p({readOnly:!0})],Em.prototype,"state",null),l([p()],Em.prototype,"view",void 0),Em=l([M("esri.widgets.Compass.CompassViewModel")],Em);const Lae=Em,eZ="esri-compass",tZ={base:eZ,iconContainer:`${eZ}__icon-container`};let id=class extends pc{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new Lae,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return xf({button:()=>H(()=>import("./index-DH8GEXan.js"),__vite__mapDeps([276,277,278,279,280])),icon:()=>H(()=>Promise.resolve().then(()=>SQ),void 0)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,{messages:r}=this;return Fe("div",{class:this.classes(tZ.base,Ho.widget)},Fe("calcite-button",{class:Ho.widgetButton,disabled:i==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},Fe("div",{"aria-hidden":"true",class:tZ.iconContainer,title:r.reset},Fe("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};l([p()],id.prototype,"goToOverride",null),l([p()],id.prototype,"icon",null),l([p()],id.prototype,"label",null),l([p(),tc("esri/widgets/Compass/t9n/Compass")],id.prototype,"messages",void 0),l([p()],id.prototype,"view",null),l([p({type:Lae})],id.prototype,"viewModel",void 0),id=l([M("esri.widgets.Compass")],id);const SDe=id,iZ="esri-navigation-toggle",rZ={base:iZ,isLayoutHorizontal:`${iZ}--horizontal`};let Vv=class extends _e{constructor(e){super(e),this._navigationMode="pan",this.view=null,e?.isDefaultViewModel||y0e(ie.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(e={}){const{isDefaultViewModel:i,...r}=e;return r}initialize(){this.addHandles(Pn(()=>this.view?.navigation?.actionMap,()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){const e=this.view?.navigation?.actionMap;if(!e)return;const i=this._navigationMode==="pan";e.dragPrimary=i?"pan":"rotate",e.dragSecondary=i?"rotate":"pan"}};l([p({readOnly:!0})],Vv.prototype,"state",null),l([p()],Vv.prototype,"_navigationMode",void 0),l([p()],Vv.prototype,"view",void 0),Vv=l([M("esri.widgets.NavigationToggle.NavigationToggleViewModel")],Vv);const jae=Vv;let rd=class extends pc{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new jae({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{const r=this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton;UPe(r),this.toggle()},e?.isDefaultUI||m0e(ie.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(e={}){const{isDefaultUI:i,...r}=e;return r}loadDependencies(){return xf({button:()=>H(()=>import("./index-DH8GEXan.js"),__vite__mapDeps([276,277,278,279,280]))})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.viewModel?.state==="disabled",i=this.viewModel?.navigationMode==="pan",r=this.messages.toggle;return Fe("div",{class:this.classes(rZ.base,Ho.widget,{[rZ.isLayoutHorizontal]:this.layout==="horizontal"})},Fe("calcite-button",{afterCreate:n=>{this._panButton=n},appearance:i?"outline-fill":"solid",class:Ho.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?void 0:-1,title:r}),Fe("calcite-button",{afterCreate:n=>{this._rotateButton=n},appearance:i?"solid":"outline-fill",class:Ho.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?-1:void 0,title:r}))}};l([p()],rd.prototype,"icon",null),l([p()],rd.prototype,"label",null),l([p({value:"vertical"})],rd.prototype,"layout",null),l([p(),tc("esri/widgets/NavigationToggle/t9n/NavigationToggle")],rd.prototype,"messages",void 0),l([p()],rd.prototype,"view",null),l([p({type:jae})],rd.prototype,"viewModel",void 0),rd=l([M("esri.widgets.NavigationToggle")],rd);const xDe=rd;let Mm=class extends _e{get canZoomIn(){if(!this.view?.ready)return!1;const i=this.view?.constraints?.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){const{view:e}=this;if(!e?.ready)return!1;const r=e.constraints?.effectiveMinScale;return r===0||this._scale<r}get _scale(){const e=this.view?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??this.view?.scale??0}};l([p({readOnly:!0})],Mm.prototype,"canZoomIn",null),l([p({readOnly:!0})],Mm.prototype,"canZoomOut",null),l([p()],Mm.prototype,"view",void 0),l([p()],Mm.prototype,"_scale",null),Mm=l([M("esri.widgets.Zoom.ZoomConditions2D")],Mm);const $De=Mm;let Uv=class extends _e{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};l([p({readOnly:!0})],Uv.prototype,"canZoomIn",null),l([p({readOnly:!0})],Uv.prototype,"canZoomOut",null),l([p()],Uv.prototype,"view",void 0),Uv=l([M("esri.widgets.Zoom.ZoomConditions3D")],Uv);const TDe=Uv;let dh=class extends _e{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new $De({view:e}):e.type==="3d"&&(this._zoomConditions=new TDe({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){const e=this.view;this.canZoomIn&&e&&(e.type==="2d"?e.mapViewNavigation.zoomIn():Yd(e.goTo({zoomFactor:2})))}zoomOut(){const e=this.view;this.canZoomOut&&e&&(e.type==="2d"?e.mapViewNavigation.zoomOut():Yd(e.goTo({zoomFactor:.5})))}};l([p()],dh.prototype,"_zoomConditions",void 0),l([p()],dh.prototype,"canZoomIn",null),l([p()],dh.prototype,"canZoomOut",null),l([p({readOnly:!0})],dh.prototype,"state",null),l([p()],dh.prototype,"view",null),dh=l([M("esri.widgets.Zoom.ZoomViewModel")],dh);const zae=dh,nZ={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let nd=class extends pc{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new zae,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return xf({button:()=>H(()=>import("./index-DH8GEXan.js"),__vite__mapDeps([276,277,278,279,280]))})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[nZ.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this.viewModel,{zoomIn:n,zoomOut:s}=this.messages;return Fe("div",{class:this.classes(nZ.base,Ho.widget,e)},Fe("calcite-button",{class:Ho.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:n,onclick:this.zoomIn,title:n}),Fe("calcite-button",{class:Ho.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}};l([p()],nd.prototype,"icon",null),l([p()],nd.prototype,"label",null),l([p({value:"vertical"})],nd.prototype,"layout",null),l([p(),tc("esri/widgets/Zoom/t9n/Zoom")],nd.prototype,"messages",void 0),l([p()],nd.prototype,"view",null),l([p({type:zae})],nd.prototype,"viewModel",void 0),nd=l([M("esri.widgets.Zoom")],nd);const EDe=nd;function MDe(t){return t?.view!==void 0}let ZM=class extends BPe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const n=this._find(r),s=n?.widget;MDe(s)&&(s.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([be(()=>this.components,this._componentsWatcher,Zr),be(()=>this.view,this._updateViewAwareWidgets,Zr)])}_add(e,i,r,n,s){let o=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;o=this._createComponent(e)}super._add(o,i,r,n,s)}_removeComponents(e){e.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);return new WM({id:e,node:i})}_createWidget(e){const i=this.view;switch(e){case"attribution":return new gDe({view:i});case"compass":return new SDe({view:i});case"navigation-toggle":return new xDe({view:i,isDefaultUI:!0});case"zoom":return new EDe({view:i})}}};l([p()],ZM.prototype,"components",void 0),ZM=l([M("esri.views.ui.DefaultUI")],ZM);const Fae=ZM;let JM=class extends Fae{constructor(e){super(e),this.components=["attribution","zoom"]}};l([p()],JM.prototype,"components",void 0),JM=l([M("esri.views.ui.2d.DefaultUI2D")],JM);const Vae=JM;let ADe=class{constructor(e={},i={},r=8,n=1/0){this.disabledExtensions=e,this.debugWebGLExtensions=i,this.maxAnisotropy=r,this.maxPreferredTexturePixels=n}},Uae=class h4{constructor(e,i,r=""){this.major=e,this.minor=i,this._context=r}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}greaterEqual(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new L(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new h4(this.major,this.minor,this._context)}static parse(e,i=""){const[r,n]=e.split("."),s=/^\s*\d+\s*$/;if(!r?.match||!s.test(r))throw new L((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!n?.match||!s.test(n))throw new L((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(r,10),u=parseInt(n,10);return new h4(o,u,i)}},eb=class extends Uae{constructor(e,i){super(e,i,"webmap")}};function YM(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}const qae=new eb(2,35);var f4;let QM=f4=class extends B{constructor(t){super(t),this.color=new Ie([0,0,0,1])}clone(){return new f4(z({color:this.color}))}};l([p({type:Ie,json:{write:!0}})],QM.prototype,"color",void 0),QM=f4=l([M("esri.webmap.background.ColorBackground")],QM);const Tk=QM;let Gae,Bae,Hae,Wae,Zae,Jae,Yae;async function IDe(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:r,MagnifierView2D:n,GridView2D:s,Stage:o}]=await Promise.all([H(()=>import("./webglDeps-CcX9gXvC.js"),__vite__mapDeps([179,131,180,181,182,13,37])),H(()=>import("./mapViewDeps-DY3Oo9GO.js"),__vite__mapDeps([183,97,71,72,66,12,13,73,70,74,63,184,185,131,180,181,121,64,186,67,182,37,130,36,187,62,90,188,111,15,16,68,78,189,75,76,190,191,2,179,192,87,193,194,110,195,118,119,196,51,61,65,20,19,197,77,198,69,138,139,83,199,79,84,59,200,201,202,203,126,204]))]);Bae=t,Hae=e,Wae=i,Zae=r,Jae=n,Yae=s,Gae=o}var Eb;let ct=(Eb=class extends MRe($Ce(C$e(dEe(UTe(Yke))))){get timeZone(){return super.timeZone}set timeZone(e){super.timeZone=e}constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Ll({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new bk({actionMap:new AF({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.analyses=new iw,this.analysisViewManager=new SPe({importAnalysisViewModule:i=>m5e(i),view:this}),this.floors=new fe,this.grid=null,this.map=null,this.timeline=new xae,this.type="2d",this.view2dType=null,this.ui=new Vae,this.animationsEnabled=!0,this.test={takeScreenshot:async i=>gPe(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},Bxe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=at(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new T5e(this.featuresTilingScheme)}get constraintsInfo(){const e=this.defaultsFromMap?.tileInfo,i=this.spatialReference;return{lods:e?.spatialReference?.equals(i)?e.lods:null,spatialReference:i}}get initialExtentRequired(){if(!this.stateManager)return!1;const{scale:e,constraints:i,center:r,viewpoint:n,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!s&&(i?.effectiveLODs||(o=-1),(!r||e===0&&o===-1)&&(n?.targetGeometry==null||n.targetGeometry.type!=="extent"&&!n.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=e.targetGeometry,r=this.spatialReference;return Yie(i.spatialReference,r)}get background(){return YM(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get constraints(){return super.constraints}set constraints(e){super.constraints=e}get highlightOptions(){return tPe(this)}set highlightOptions(e){iPe(this,e)}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return super.resizeAlign}set resizeAlign(e){super.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return super.rotation}set rotation(e){super.rotation=e}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get spatialReference(){return super.spatialReference}set spatialReference(e){super.spatialReference=e}get spatialReferenceLocked(){return this._get("spatialReferenceLocked")}set spatialReferenceLocked(e){this.stage&&ie.getLogger(this).warn("spatialReferenceLocked cannot be changed after the view has become ready"),this._set("spatialReferenceLocked",e)}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){const e=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),i=!this.destroyed&&(!this.analysisViewManager||!this.layerViewManager||!this.labelManager||!this.graphicsView||this.analysisViewManager.updating===!0||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(r=>!r.destroyed&&!("layerViews"in r)&&r.updating===!0)||e);if(q("esri-2d-log-updating")){const r=this.allLayerViews.reduce((n,s)=>({...n,[`${s.layer.id}(${s.layer.type})`]:!s.destroyed&&!("layerViews"in s)&&s.updating}),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(r)}
-> updatingMagnifier: ${e}
`)}return i}get viewpoint(){return super.viewpoint}set viewpoint(e){super.viewpoint=e}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new hi({rings:[e.map(i=>[i[0],i[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}async hitTest(e,i){return rPe(this,e,i)}async takeScreenshot(e){return yPe(this._getScreenshotView(e),e)}toScreen(e,i){return this.stateManager.toScreen(e,i)}async whenAnalysisView(e){if(e.parent==null)throw new L("view:no-analysisview-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return this.analysisViewManager.whenAnalysisView(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return YM(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return YM(this.map)?this.map.initialViewProperties.timeExtent:null}getSurface(){return this.surface}hasLayerViewModule(e){return CW.hasLayerViewModule(e)}importLayerView(e){return CW.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(ie.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){const i=this.toMap(e),r=await this.hitTest(e),n=this.allLayerViews.toArray().filter(h=>h.clips.every(m=>pae(this,m,e,i))).reverse(),s=new globalThis.Map(n.map(h=>[h.layer.uid,h])),o=[];let u=0,d=0;for(;u<r.results.length||d<n.length;){const h=r.results.at(u);if(h&&h.type!=="graphic"){++u;continue}const m=s.get((h?.layer??h?.graphic.layer)?.uid);if((!h||m)&&d<n.length&&n.at(d)!==m){const v=n.at(d);"fetchPopupFeaturesAtLocation"in v&&o.push({mapPoint:i,layerView:v}),++d}else h&&(o.push({graphic:h.graphic,layerView:m}),++u)}return{hits:o,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=IPe(this.type);if(q("safari")&&q("safari")<9&&(e=new L("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:q("safari")})),e!=null)throw ie.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return IDe()}_getDefaultViewpoint(){const{constraints:e,initialExtent:i,map:r,padding:n,size:s}=this;if(!e)return null;const o=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,u=this.stateManager.getUserStartupOptions(this.size),d=o?.viewpoint,h=d?.targetGeometry?.extent??i,m=h?.center,v=d?.rotation??0,b=d?.scale||h&&_k(h,[s[0]-n.left-n.right,s[1]-n.top-n.bottom]),_=u.center??m,x=u.rotation??v,$=u.scale??b;return _&&$?new Jr({targetGeometry:_,scale:$,rotation:x}):null}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const i=new y5e(this.surface),r=new Gae(this.surface,{canvas:this.renderCanvas,contextOptions:new ADe(this.deactivatedWebGLExtensions,this.debugWebGLExtensions),renderingOptions:this.renderingOptions,timeline:this.timeline},i);this.stage=r,this._magnifierView=new Jae,this._magnifierView.magnifier=this.magnifier,this._gridView=new Yae;const n=new Wae({view:this});this._set("labelManager",n);const s=new s5e({view:this});this._set("animationManager",s);const o=new Zae({view:this,animationManager:s});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),r.on("webgl-error",d=>this.fatalError=d.error),be(()=>this.stationary,d=>r.stationary=d,Gt),be(()=>this.background,d=>{r.backgroundColor=d?.color,this._magnifierView.backgroundColor=d?.color},Gt),be(()=>this.magnifier,d=>this._magnifierView.magnifier=d,Gt),be(()=>this.grid,d=>this._gridView.grid=d,Gt),be(()=>this.renderingOptions,d=>r.renderingOptions=d,Gt),be(()=>this.highlights.items.map(d=>({name:d.name,options:{fillColor:d.color,haloColor:d.haloColor,fillOpacity:d.fillOpacity,haloOpacity:d.haloOpacity,haloWidth:d.haloWidth,haloBlur:d.haloBlur}})),()=>{r.highlightGradient=K5e(r.highlightGradient,this.highlights.items)},Gt),be(()=>this.state.id,()=>r.state=this.state,Gt),be(()=>this.animationsEnabled,d=>{this.stage.animationsEnabled=d},Gt)],"map-view"),this._updateStageChildren();const u=this._resolveWhenReady;this._resolveWhenReady=[],u.forEach(d=>d(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new d5e(cs.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new Bae({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Hae(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){const{allLayerViews:i,padding:r,size:n,stage:s}=this;return{allLayerViews:i,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:r,size:n,stage:s}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},Eb.type="2d",Eb);l([p({constructOnly:!0})],ct.prototype,"deactivatedWebGLExtensions",void 0),l([p({constructOnly:!0})],ct.prototype,"debugWebGLExtensions",void 0),l([p({readOnly:!0})],ct.prototype,"featuresTilingScheme",void 0),l([p({readOnly:!0})],ct.prototype,"graphicsTileStore",null),l([p()],ct.prototype,"graphicsView",void 0),l([p()],ct.prototype,"constraintsInfo",null),l([p()],ct.prototype,"initialExtentRequired",null),l([p()],ct.prototype,"labelManager",void 0),l([p({type:bk,nonNullable:!0})],ct.prototype,"navigation",void 0),l([p({constructOnly:!0})],ct.prototype,"renderCanvas",void 0),l([p()],ct.prototype,"renderingOptions",void 0),l([p({constructOnly:!0})],ct.prototype,"supersampleScreenshotsEnabled",void 0),l([p()],ct.prototype,"defaultsFromMapSettings",null),l([p({readOnly:!0})],ct.prototype,"typeSpecificPreconditionsReady",null),l([p(_A(iw,"analyses"))],ct.prototype,"analyses",void 0),l([p()],ct.prototype,"analysisViewManager",void 0),l([p({type:Tk})],ct.prototype,"background",null),l([p()],ct.prototype,"center",null),l([p({type:fe})],ct.prototype,"floors",void 0),l([p()],ct.prototype,"grid",void 0),l([p({type:Yh})],ct.prototype,"highlightOptions",null),l([p()],ct.prototype,"map",void 0),l([p()],ct.prototype,"padding",null),l([p({readOnly:!0})],ct.prototype,"rendering",null),l([p({readOnly:!0})],ct.prototype,"resolution",null),l([p()],ct.prototype,"scale",null),l([p({type:Boolean,value:!1})],ct.prototype,"spatialReferenceLocked",null),l([p({readOnly:!0})],ct.prototype,"tileInfo",null),l([p({type:xae,readOnly:!0})],ct.prototype,"timeline",void 0),l([p({readOnly:!0})],ct.prototype,"type",void 0),l([p({readOnly:!0})],ct.prototype,"updating",null),l([p({readOnly:!0})],ct.prototype,"view2dType",void 0),l([p({readOnly:!0})],ct.prototype,"visibleArea",null),l([p()],ct.prototype,"zoom",null),l([p({readOnly:!0})],ct.prototype,"navigating",null),l([p(),Ct(t=>t instanceof Fae?t:bw(Vae,t))],ct.prototype,"ui",void 0),l([p()],ct.prototype,"animationsEnabled",void 0),ct=l([M("esri.views.View2D")],ct);const kDe=ct;let XM=class extends kDe{constructor(e){super(e),this.view2dType="map"}};l([p({readOnly:!0})],XM.prototype,"view2dType",void 0),XM=l([M("esri.views.MapView")],XM);const ODe=XM;let CDe=class Qae{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(hD),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new Qae,r=this._originStores[0];r&&r.forEach((n,s)=>{i.set(s,z(n),0)});for(let n=2;n<hD;n++){const s=this._originStores[n];s&&s.forEach((o,u)=>{e&&e.has(u)||i.set(u,z(o),n)})}return i}get(e,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,r=7){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const s=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,r),s!==i}return!1}delete(e,i=7){const r=this._originStores[i];if(!r)return;const n=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let s=i-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,s);break}}}return n}has(e,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const r=this._originStores[i],n=r?.get(e),s=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,i),s!==n}originOf(e){return this._propertyOriginMap.get(e)||0}isAtOrigin(e,i){return this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(e)}};const Xae=t=>{const e=t;let i=class extends e{constructor(...r){super(...r);const n=As(this),s=n.store,o=new CDe;n.store=o,uK(n,s,o)}read(r,n){dK(this,r,n)}getAtOrigin(r,n){const s=X5(this),o=qd(n);if(typeof r=="string")return s.get(r,o);const u={};return r.forEach(d=>{u[d]=s.get(d,o)}),u}originOf(r){return MS(this.originIdOf(r))}originIdOf(r){return X5(this).originOf(r)}revert(r,n){const s=X5(this),o=qd(n),u=As(this);let d;d=typeof r=="string"?r==="*"?s.keys(o):[r]:r,d.forEach(h=>{u.invalidate(h),s.revert(h,o),u.commit(h)})}};return i=l([M("esri.core.ReadOnlyMultiOriginJSONSupport")],i),i};function X5(t){return As(t).store}Xae(_e);const RDe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r)}clear(r,n="user"){As(this).clearOrigin(r,qd(n))}write(r,n){return fK(this,r=r||{},n),r}setAtOrigin(r,n,s){As(this).setAtOrigin(r,n,qd(s))}removeOrigin(r){const n=sZ(this),s=qd(r),o=n.keys(s);for(const u of o)n.originOf(u)===s&&n.set(u,n.get(u,s),7)}updateOrigin(r,n){const s=sZ(this),o=qd(n),u=Fl(this,r);for(let d=o+1;d<hD;++d)s.delete(r,d);s.set(r,u,o)}toJSON(r){return this.write({},r)}};return i=l([M("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function sZ(t){return As(t).store}const Ek=t=>{const e=RDe(Xae(t));let i=class extends e{};return i=l([M("esri.core.MultiOriginJSONSupport")],i),i},PDe=Ek(_e);async function DDe(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return M0(t);const i=we.WGS84;return await ff(e,i),Is(t,i)}function NDe(t,e){if(!UF(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function UF(t,e){return!!t.typeKeywords?.includes(e)}function ptt(t){return UF(t,qF.HOSTED_SERVICE)}function LDe(t,e){const i=t.typeKeywords;if(i){const r=i.indexOf(e);r>-1&&i.splice(r,1)}}function htt(t,e,i){i?NDe(t,e):LDe(t,e)}async function ftt(t){const e=t.clone().normalize();let i;if(e.length>1)for(const r of e)i?r.width>i.width&&(i=r):i=r;else i=e[0];return DDe(i)}const qF={CHARTS:"Charts",DYNAMIC:"Dynamic",DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function jDe(t){const{portal:e,isOrgItem:i,itemControl:r}=t,n=e.user?.privileges;let s=!n||n.includes("features:user:edit"),o=!!i&&!!n?.includes("features:user:fullEdit");const u=r==="update"||r==="admin";return u?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:u}}}let ph=class extends B{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};l([p({type:String,json:{write:{isRequired:!0}}})],ph.prototype,"facilityIdField",void 0),l([p({type:String,json:{write:{isRequired:!0}}})],ph.prototype,"layerId",void 0),l([p({type:String,json:{write:{isRequired:!0}}})],ph.prototype,"nameField",void 0),l([p({type:String,json:{write:!0}})],ph.prototype,"siteIdField",void 0),l([p({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],ph.prototype,"sublayerId",void 0),ph=l([M("esri.layers.support.FacilityLayerInfo")],ph);const zDe=ph;let gl=class extends B{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};l([p({type:String,json:{write:{isRequired:!0}}})],gl.prototype,"facilityIdField",void 0),l([p({type:String,json:{write:{isRequired:!0}}})],gl.prototype,"layerId",void 0),l([p({type:String,json:{write:{isRequired:!0}}})],gl.prototype,"levelIdField",void 0),l([p({type:String,json:{write:{isRequired:!0}}})],gl.prototype,"levelNumberField",void 0),l([p({type:String,json:{write:{isRequired:!0}}})],gl.prototype,"longNameField",void 0),l([p({type:String,json:{write:{isRequired:!0}}})],gl.prototype,"shortNameField",void 0),l([p({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],gl.prototype,"sublayerId",void 0),l([p({type:String,json:{write:{isRequired:!0}}})],gl.prototype,"verticalOrderField",void 0),gl=l([M("esri.layers.support.LevelLayerInfo")],gl);const FDe=gl;let Am=class extends B{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};l([p({type:String,json:{write:{isRequired:!0}}})],Am.prototype,"layerId",void 0),l([p({type:String,json:{write:{isRequired:!0}}})],Am.prototype,"nameField",void 0),l([p({type:String,json:{write:{isRequired:!0}}})],Am.prototype,"siteIdField",void 0),l([p({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Am.prototype,"sublayerId",void 0),Am=l([M("esri.layers.support.SiteLayerInfo")],Am);const VDe=Am;let qv=class extends B{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};l([p({type:FDe,json:{write:{isRequired:!0}}})],qv.prototype,"levelLayer",void 0),l([p({type:zDe,json:{write:{isRequired:!0}}})],qv.prototype,"facilityLayer",void 0),l([p({type:VDe,json:{write:!0}})],qv.prototype,"siteLayer",void 0),qv=l([M("esri.support.MapFloorInfo")],qv);const UDe=qv;var m4;let Gv=m4=class extends B{constructor(t){super(t),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new m4(z({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};l([p({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],Gv.prototype,"activeRange",void 0),l([p({type:[Number],json:{write:!0}})],Gv.prototype,"currentRangeExtent",void 0),l([p({type:[Number],json:{write:!0}})],Gv.prototype,"fullRangeExtent",void 0),Gv=m4=l([M("esri.webdoc.RangeInfo")],Gv);const GF=Gv;var y4;let Su=y4=class extends B{constructor(t){super(t),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new y4(z({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};l([p({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],Su.prototype,"enabled",void 0),l([p({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],Su.prototype,"longNames",void 0),l([p({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],Su.prototype,"minimized",void 0),l([p({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],Su.prototype,"pinnedLevels",void 0),l([p({type:String,json:{read:{source:"site"},write:{target:"site"}}})],Su.prototype,"site",void 0),l([p({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],Su.prototype,"facility",void 0),l([p({type:String,json:{read:{source:"level"},write:{target:"level"}}})],Su.prototype,"level",void 0),Su=y4=l([M("esri.webdoc.widgets.FloorFilter")],Su);const qDe=Su;var g4;const YT=new Be({slider:"slider",picker:"picker"});let Bv=g4=class extends B{constructor(t){super(t),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new g4({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};l([p({type:YT.apiValues,nonNullable:!0,json:{type:YT.jsonValues,default:null,read:{reader:YT.read},write:{isRequired:!0,writer:YT.write}}})],Bv.prototype,"interactionMode",void 0),l([p({type:tt,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const t=this.stopInterval!=null;return{enabled:!t,isRequired:!t}}}}})],Bv.prototype,"numStops",void 0),l([p({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],Bv.prototype,"stopInterval",void 0),Bv=g4=l([M("esri.webdoc.widgets.Range")],Bv);const GDe=Bv,BF=Fr()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let Bl=class extends Re(B){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return Nre(this.value,this.unit,"milliseconds")}};l([Ae(BF,{nonNullable:!0})],Bl.prototype,"unit",void 0),l([p({type:Number,json:{write:!0},nonNullable:!0})],Bl.prototype,"value",void 0),Bl=l([M("esri.time.TimeInterval")],Bl);var v4;let Ur=v4=class extends B{constructor(t){super(t),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(t){return t?qt.fromArray(t):void 0}writeCurrentTimeExtent(t,e,i){t&&ur(i,t.toArray(),e)}readFullTimeExtent(t,e){const i=e.properties;if(!i)return;const r=i.endTime!=null?new Date(i.endTime):null,n=i.startTime!=null?new Date(i.startTime):null;return new qt({start:n,end:r})}writeFullTimeExtent(t,e){if(!t)return;const i=e.properties=e.properties||{},r=t.end,n=t.start;r&&(i.endTime=r!=null?r.getTime():null),n&&(i.startTime=n!=null?n.getTime():null)}readStopInterval(t,e,i){return t?Bl.fromJSON({value:t.interval,unit:t.units},i):null}writeStopInterval(t,e,i,r){if(!t)return;const n=t.toJSON(r);ur("properties.timeStopInterval",{interval:n.value,units:n.unit},e)}readStops(t){return t?.length?t.map(e=>new Date(e)):null}writeStops(t,e,i){t?.length&&ur(i,t.map(r=>r.getTime()),e)}clone(){return new v4(z({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};l([p({type:qt,json:{type:[[tt,ww]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],Ur.prototype,"currentTimeExtent",void 0),l([se("currentTimeExtent")],Ur.prototype,"readCurrentTimeExtent",null),l([pe("currentTimeExtent")],Ur.prototype,"writeCurrentTimeExtent",null),l([p({type:qt,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],Ur.prototype,"fullTimeExtent",void 0),l([se("fullTimeExtent")],Ur.prototype,"readFullTimeExtent",null),l([pe("fullTimeExtent")],Ur.prototype,"writeFullTimeExtent",null),l([p({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],Ur.prototype,"loop",void 0),l([p({type:tt,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){const t=!!this.stopInterval,e=!!this.stops?.length,i=!(t||e);return{enabled:i,isRequired:i}}}}})],Ur.prototype,"numStops",void 0),l([p({type:[1,2],nonNullable:!0,json:{type:tt,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],Ur.prototype,"numThumbs",void 0),l([p({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],Ur.prototype,"stopDelay",void 0),l([p({type:Bl,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:BF.jsonValues.filter(t=>t!=="esriTimeUnitsUnknown")}},overridePolicy(){const t=this.numStops!=null,e=!!this.stops?.length;return{enabled:!e,isRequired:!(t||e)}}}}})],Ur.prototype,"stopInterval",void 0),l([se("stopInterval")],Ur.prototype,"readStopInterval",null),l([pe("stopInterval")],Ur.prototype,"writeStopInterval",null),l([p({type:[Date],json:{type:[tt],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],Ur.prototype,"stops",void 0),l([se("stops")],Ur.prototype,"readStops",null),l([pe("stops")],Ur.prototype,"writeStops",null),Ur=v4=l([M("esri.webdoc.widgets.TimeSlider")],Ur);const BDe=Ur;var b4;let Hv=b4=class extends B{constructor(t){super(t),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new b4(z({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};l([p({type:GDe,json:{write:!0}})],Hv.prototype,"range",void 0),l([p({type:BDe,json:{write:!0}})],Hv.prototype,"timeSlider",void 0),l([p({type:qDe,json:{write:!0}})],Hv.prototype,"floorFilter",void 0),Hv=b4=l([M("esri.webdoc.Widgets")],Hv);const HDe=Hv,WDe={width:600,height:400},QT=1.5;function ZDe(t,e){e=e||WDe;let{width:i,height:r}=e;const n=i/r;return n<QT?r=i/QT:n>QT&&(i=r*QT),i>t.width&&(r*=t.width/i,i=t.width),r>t.height&&(i*=t.height/r,r=t.height),{width:Math.round(i),height:Math.round(r)}}function JDe(t,e){return{...Kae(t,e),readResourcePaths:[]}}function wtt(t,e,i){const r=Xr(t.itemUrl);return{...Kae(t,e),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:r?{rootPath:r.path,writtenUrls:[]}:null,resources:i?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function Kae(t,e){return{origin:e,url:Xr(t.itemUrl),portal:t.portal||de.getDefault(),portalItem:t}}let Mh=class extends B{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(n=>n.toJSON()),i=this.geometries[0],r={};return r.outSR=uA(this.outSpatialReference),r.inSR=uA(i.spatialReference),r.geometries=JSON.stringify({geometryType:Iw(i),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};l([p()],Mh.prototype,"geometries",void 0),l([p({type:we,json:{read:{source:"outSR"}}})],Mh.prototype,"outSpatialReference",void 0),l([p()],Mh.prototype,"transformation",void 0),l([p()],Mh.prototype,"transformForward",void 0),Mh=l([M("esri.rest.support.ProjectParameters")],Mh);const YDe=cr(Mh);async function QDe(t,e,i){e=YDe(e);const r=coe(t),n={...r.query,f:"json",...e.toJSON()},s=e.outSpatialReference,o=Iw(e.geometries[0]),u=bOe(n,i);return $t(r.path+"/project",u).then(({data:{geometries:d}})=>doe(d,o,s))}function XDe(t,e){return e.resourceInfo?ele(e,e.resourceInfo,{origin:t.origin}):e.portalItem?.id?KDe(t,e,e.portalItem):Promise.resolve()}function ele(t,e,i){const r={context:{...i,layerContainerType:"operational-layers"}};return t.portalItem&&(r.context.portal=t.portalItem.portal||de.getDefault()),H(async()=>{const{populateOperationalLayers:n}=await import("./layersCreator-TDfSeS0d.js");return{populateOperationalLayers:n}},__vite__mapDeps([165,162,161,160,163,159])).then(({populateOperationalLayers:n})=>{const s=[],o=e.operationalLayers;o?.length&&s.push(n(t.layers,o,r));const u={...r,context:{...r.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},d=e.tables;return d?.length&&s.push(n(t.tables,d,u)),Promise.allSettled(s).then(()=>{})})}async function KDe(t,e,i){if(await i.load().catch(o=>{throw new L(`${t.name}:load-portal-item`,"Failed to load portal item",{error:o})}),i.type!==t.itemType)throw new L(`${t.name}:invalid-portal-item`,`Invalid portal item type '${i.type}', expected '${t.itemType}'`,{type:i.type});const r=await i.fetchData();e.resourceInfo=r;const n=JDe(i,t.origin);await eNe(t,e,r,n),e.resourceReferences={portalItem:i,paths:n.readResourcePaths};const s=await iNe(e.initialViewProperties,i,ie.getLogger(e));if(s){const o=e.initialViewProperties?.clone()??t.createInitialViewProperties();o.viewpoint=s,e.initialViewProperties=o}}function eNe(t,e,i,r){const n=tNe(t,i);return e.read(n,r),ele(e,n,r)}function tNe(t,e){const i=t.parseVersion(e.version||"",t.name);return t.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}async function iNe(t,e,i){if(t?.viewpoint?.targetGeometry)return null;const n=await rNe(t,e,i);return n?new Jr({targetGeometry:n}):null}async function rNe(t,e,i){const r=t?.spatialReference,n=e?.extent;if(!r||!n)return null;if(r.isWGS84)return n.clone();if(r.isWebMercator)return Wh(n);const{getGeometryServiceURL:s}=await H(()=>import("./geometryServiceUtils-CwAxGzQO.js"),[]);try{const o=await s(e),u=new Mh({geometries:[n],outSpatialReference:r});return(await QDe(o,u))[0]}catch(o){i.error("Error projecting item's extent:",o)}return null}function oZ(t){return{enabled:!!t?.length}}var w4;let Wv=w4=class extends B{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new w4({exactMatch:this.exactMatch,type:this.type,name:this.name})}};l([p({type:Boolean,json:{write:!0}})],Wv.prototype,"exactMatch",void 0),l([p({type:String,json:{write:!0}})],Wv.prototype,"name",void 0),l([Ae(TF)],Wv.prototype,"type",void 0),Wv=w4=l([M("esri.webdoc.applicationProperties.SearchLayerField")],Wv);const nNe=Wv;var _4;let Zv=_4=class extends B{constructor(t){super(t),this.field=null,this.id=null,this.subLayer=null}clone(){return new _4(z({field:this.field,id:this.id,subLayer:this.subLayer}))}};l([p({type:nNe,json:{write:{isRequired:!0}}})],Zv.prototype,"field",void 0),l([p({type:String,json:{write:{isRequired:!0}}})],Zv.prototype,"id",void 0),l([p({type:tt,json:{write:!0}})],Zv.prototype,"subLayer",void 0),Zv=_4=l([M("esri.webdoc.applicationProperties.SearchLayer")],Zv);const sNe=Zv;var S4;let Jv=S4=class extends B{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new S4({exactMatch:this.exactMatch,type:this.type,name:this.name})}};l([p({type:Boolean,json:{write:!0}})],Jv.prototype,"exactMatch",void 0),l([p({type:String,json:{write:!0}})],Jv.prototype,"name",void 0),l([Ae(TF)],Jv.prototype,"type",void 0),Jv=S4=l([M("esri.webdoc.applicationProperties.SearchTableField")],Jv);const oNe=Jv;var x4;let a2=x4=class extends B{constructor(t){super(t),this.field=null,this.id=null}clone(){return new x4(z({field:this.field,id:this.id}))}};l([p({type:oNe,json:{write:{isRequired:!0}}})],a2.prototype,"field",void 0),l([p({type:String,json:{write:{isRequired:!0}}})],a2.prototype,"id",void 0),a2=x4=l([M("esri.webdoc.applicationProperties.SearchTable")],a2);const aNe=a2;var $4;const tle=fe.ofType(sNe),ile=fe.ofType(aNe);let xu=$4=class extends B{constructor(t){super(t),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new tle,this.tables=new ile}readAddressSearchEnabled(t){return!t}writeAddressSearchEnabled(t,e,i){e[i]=!t}clone(){return new $4(z({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};l([p({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],xu.prototype,"addressSearchEnabled",void 0),l([se("addressSearchEnabled")],xu.prototype,"readAddressSearchEnabled",null),l([pe("addressSearchEnabled")],xu.prototype,"writeAddressSearchEnabled",null),l([p({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],xu.prototype,"enabled",void 0),l([p({type:String,json:{write:!0}})],xu.prototype,"hintText",void 0),l([p({type:tle,json:{write:{overridePolicy:oZ},origins:{"web-scene":{write:{isRequired:!0}}}}})],xu.prototype,"layers",void 0),l([p({type:ile,json:{read:!0,write:{overridePolicy:oZ}}})],xu.prototype,"tables",void 0),xu=$4=l([M("esri.webdoc.applicationProperties.Search")],xu);const lNe=xu;var T4;let KM=T4=class extends B{constructor(t){super(t),this.search=null}clone(){return new T4(z({search:this.search}))}};l([p({type:lNe,json:{write:!0}})],KM.prototype,"search",void 0),KM=T4=l([M("esri.webdoc.applicationProperties.Viewing")],KM);const uNe=KM;var E4;let Yv=E4=class extends B{constructor(t){super(t),this.editing=null,this.offline=null,this.viewing=null}clone(){return new E4(z({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};l([p({json:{write:!0}})],Yv.prototype,"editing",void 0),l([p({json:{write:!0}})],Yv.prototype,"offline",void 0),l([p({type:uNe,json:{write:!0}})],Yv.prototype,"viewing",void 0),Yv=E4=l([M("esri.webmap.ApplicationProperties")],Yv);const cNe=Yv;var M4;let Vd=M4=class extends B{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return TK(this.url)}get isDataURI(){return np(this.url)}clone(){return new M4({url:this.url})}};l([p({type:String,json:{write:{isRequired:!0}}})],Vd.prototype,"url",void 0),l([p()],Vd.prototype,"isSecureUrl",null),l([p()],Vd.prototype,"isDataURI",null),Vd=M4=l([M("esri.webdoc.support.SlideThumbnail")],Vd);const dNe={type:qt,json:{read:{source:"timeExtent",reader:t=>t?Array.isArray(t)?qt.fromArray(t):qt.fromJSON(t):null},write:{writer:(t,e,i,r)=>{t&&(t.isEmpty?r?.messages&&r.messages.push(new L("invalid-timeExtent","TimeExtent cannot be empty")):e[i]=t.toArray())},target:{timeExtent:{type:[[tt,ww]]}}}}};var A4;let $u=A4=class extends lk(B){constructor(t){super(t),this.name=null,this.thumbnail=new Vd,this.timeExtent=null}castThumbnail(t){return typeof t=="string"?new Vd({url:t}):cr(Vd,t)}set viewpoint(t){const{targetGeometry:e,scale:i}=t;e!=null&&e.type==="point"&&i==null&&ie.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",t),this._set("viewpoint",t)}readViewpoint(t,e){const{extent:i,viewpoint:r}=e;return Jr.fromJSON(r||{targetGeometry:i})}writeViewpoint(t,e,i,r){if(!t)return;const{targetGeometry:n}=t;if(n!=null&&n.type!=="extent"){const s="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";return void(r?.messages?r.messages.push(new L("property:unsupported",s)):ie.getLogger(this).error(s))}n!=null&&(e.extent=n.toJSON()),e[i]=t.toJSON()}clone(){return new A4(z({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};l([p({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],$u.prototype,"name",void 0),l([p({type:Vd,json:{write:{overridePolicy:t=>({enabled:!(!t||!t.url)})}}})],$u.prototype,"thumbnail",void 0),l([Ct("thumbnail")],$u.prototype,"castThumbnail",null),l([p(dNe)],$u.prototype,"timeExtent",void 0),l([p({type:Jr,nonNullable:!0,json:{write:!0}})],$u.prototype,"viewpoint",null),l([se("viewpoint",["extent","viewpoint"])],$u.prototype,"readViewpoint",null),l([pe("viewpoint")],$u.prototype,"writeViewpoint",null),$u=A4=l([M("esri.webmap.Bookmark")],$u);const pNe=$u;let sd=class extends Re(_e){constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeExtent=null,this.timeZone=Za,this.viewpoint=null}};l([p({type:Tk})],sd.prototype,"background",void 0),l([p({type:GF})],sd.prototype,"rangeInfo",void 0),l([p({type:we})],sd.prototype,"spatialReference",void 0),l([p({type:qt})],sd.prototype,"timeExtent",void 0),l([p({nonNullable:!0})],sd.prototype,"timeZone",void 0),l([p({type:Jr})],sd.prototype,"viewpoint",void 0),sd=l([M("esri.webmap.InitialViewProperties")],sd);const HA=sd,rle=fe.ofType(pNe),hNe=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),fNe="ArcGIS Pro",mNe=qF.JSAPI;let bi=class extends Ek(nF(ok(wne))){constructor(e){super(e),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new rle,this.floorInfo=null,this.initialViewProperties=new HA,this.portalItem=null,this.sourceVersion=null,this.widgets=null,this._debouncedSaveOperations=RI(async(i,r,n)=>{const{save:s,saveAs:o}=await H(()=>import("./webdocSaveUtils-B2Gt1oub.js"),__vite__mapDeps([281,282,283,284,285,286]));switch(i){case 0:return s(this.context,this,r);case 1:return o(this.context,this,n,r)}}),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=at(this.portalItem)}initialize(){if(this.when().catch(e=>{ie.getLogger(this).error("#load()","Failed to load web map",e)}),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(i){return void this.addResolvingPromise(Promise.reject(i))}this.read(e)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,i){e&&this._isAuthoringAppSetByUser?i.authoringApp=e:i.authoringApp=mNe}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,i){e&&this._isAuthoringAppVersionSetByUser?i.authoringAppVersion=e:i.authoringAppVersion=PK}readInitialViewProperties(e,i){const r=new HA;i.background&&(r.background=Tk.fromJSON(i.background));const n=i.initialState?.timeExtent;n&&(r.timeExtent=qt.fromArray(n));const s=i.initialState?.viewpoint;return s&&(s.rotation&&eb.parse(i.version||"","webmap").lessThan(2,20)&&i.authoringApp===fNe&&(s.rotation*=-1),r.viewpoint=Jr.fromJSON(s)),i.mapRangeInfo&&(r.rangeInfo=GF.fromJSON(i.mapRangeInfo)),i.spatialReference&&(r.spatialReference=we.fromJSON(i.spatialReference)),i.timeZone&&(r.timeZone=i.timeZone),r}writeInitialViewProperties(e,i,r,n){if(!e)return;e.background?.color&&(i.background=e.background.write({},n));const{timeExtent:s,viewpoint:o}=e;if(o||s){const u={};o&&(u.viewpoint=o.write({},n)),s&&(u.timeExtent=s.toArray()),i.initialState=u}e.rangeInfo&&(i.mapRangeInfo=e.rangeInfo.toJSON(n)),e.spatialReference&&(i.spatialReference=e.spatialReference.write({},n)),i.timeZone=e.timeZone}writeLayers(e,i,r,n){i[r]=this._writeLayers(e,n,"operational-layers")}get loaded(){return super.loaded}readSourceVersion(e,i){const[r,n]=i.version.split(".");return new eb(parseInt(r,10),parseInt(n,10))}writeSourceVersion(e,i,r){i[r]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(e,i,r,n){const s=this._writeLayers(e,n,"tables");s.length&&(i[r]=s)}get thumbnailUrl(){return this.portalItem?.thumbnailUrl||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(e){return this.addResolvingPromise(XDe(this.context,this)),Promise.resolve(this)}loadAll(){return ak(this,e=>{e(this.ground,this.basemap,this.layers,this.tables)})}read(e,i){i={...i,origin:this.context.origin};const r=this._getAuthoringPropsState();pK(this,e,n=>super.read(e,n),i),this._restoreAuthoringPropsFromState(r)}write(e,i){if(this.loadStatus!=="loaded"){const r=new L("webmap:not-loaded","Web map must be loaded before it can be serialized");throw ie.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),r}return this._removeDanglingLayerRefs(),i={...i,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this},super.write(e,i)}async save(e){return this._debouncedSaveOperations(0,e)}async saveAs(e,i){return this._debouncedSaveOperations(1,i,e)}async updateFrom(e,i){const r=this._updateFromInternal(e,i);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){const i=this.resourceInfo;return this._collectAllLayersJSON([...i?.baseMap?.baseMapLayers||[],...i?.operationalLayers||[],...this.basemap?.resourceInfo?.data?.baseMapLayers||[]]).find(r=>r.id===e.id)}async updateItemThumbnail(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await this.portalItem?.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())}getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:IK(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_collectAllLayersJSON(e){return e.reduce((i,r)=>(i.push(r),r.layerType==="GroupLayer"&&(i=i.concat(this._collectAllLayersJSON(r.layers||[]))),i),[])}_writeLayers(e,i,r){return i={...i,layerContainerType:r},e.map(n=>wM(n,r==="tables"?null:this.getLayerJSONFromResourceInfo(n),i)).filter(is).toArray()}_validateJSON(e){const i=eb.parse(e.version||"","webmap");return this.context.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}_removeDanglingLayerRefs(){const e=this.applicationProperties,i=e?.viewing?.search,r=o=>this.allLayers.some(u=>u.id===o);if(i?.layers&&(i.layers=i.layers.filter(o=>r(o.id))),i?.tables&&(i.tables=i.tables.filter(o=>this.tables.some(u=>u.id===o.id))),e){const o=e.editing?.locationTracking;o?.info&&!r(o.info.layerId)&&(e.editing=null)}const n="presentation"in this?this.presentation:null,s=n?.slides;s&&s.forEach(o=>{o.visibleLayers&&(o.visibleLayers=o.visibleLayers.filter(u=>r(u.id)))})}async _updateFromInternal(e,i){if(i??={},await zb(()=>e.ready),this._updateInitialViewProperties(e,i),e.map===this)for(const r of e.allLayerViews)"visible"in r&&"visible"in r.layer&&r._isOverridden("visible")&&(r.layer.visible=r.visible),"featureEffect"in r&&"featureEffect"in r.layer&&r._isOverridden("featureEffect")&&(r.layer.featureEffect=r.featureEffect);await this._updateThumbnailUrl(e,i)}_updateInitialViewProperties(e,i){if(i.backgroundExcluded||(this.initialViewProperties.background=e.background?.clone()),this.initialViewProperties.spatialReference=e.spatialReference?.clone(),this.initialViewProperties.timeZone=e.timeZone,i.viewpointExcluded||(this.initialViewProperties.viewpoint=new Jr({rotation:e.rotation,scale:i.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!i.widgetsExcluded)for(const r of e.persistableViewModels)r.updateWebDocument(this)}_getViewExtent(e){const i=e.center.clone().normalize(),r=e.extent.clone(),n=r.width/2;return r.xmin=i.x-n,r.xmax=i.x+n,r}async _updateThumbnailUrl(e,i){if(i.thumbnailExcluded)return;const r=ZDe(e,i.thumbnailSize),n=await e.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(n.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(np(e)){const i=ky(e),r=i?.mediaType,n=r&&hNe.get(r.toLowerCase())||null,s=`thumbnail${Date.now()}`;return n?`${s}.${n}`:s}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};l([p()],bi.prototype,"_updateFromPromise",void 0),l([p({type:cNe,json:{write:!0}})],bi.prototype,"applicationProperties",void 0),l([p({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],bi.prototype,"authoringApp",null),l([pe("authoringApp")],bi.prototype,"writeAuthoringApp",null),l([p({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],bi.prototype,"authoringAppVersion",null),l([pe("authoringAppVersion")],bi.prototype,"writeAuthoringAppVersion",null),l([p({type:rle,json:{write:{overridePolicy:t=>({enabled:!!(t&&t.length>0),ignoreOrigin:!0})}}})],bi.prototype,"bookmarks",void 0),l([p({type:UDe,json:{name:"mapFloorInfo",write:!0}})],bi.prototype,"floorInfo",void 0),l([p({type:HA,nonNullable:!0,json:{read:{source:["background","initialState.timeExtent","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:Tk},"initialState.timeExtent":{type:qt},"initialState.viewpoint":{type:Jr},mapRangeInfo:{type:GF},spatialReference:{type:we},"timeZone:":{type:String}}}}})],bi.prototype,"initialViewProperties",void 0),l([se("initialViewProperties")],bi.prototype,"readInitialViewProperties",null),l([pe("initialViewProperties")],bi.prototype,"writeInitialViewProperties",null),l([p({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],bi.prototype,"layers",void 0),l([pe("layers")],bi.prototype,"writeLayers",null),l([p({type:Ue})],bi.prototype,"portalItem",void 0),l([p()],bi.prototype,"resourceInfo",void 0),l([p({readOnly:!0,type:eb,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],bi.prototype,"sourceVersion",void 0),l([se("sourceVersion")],bi.prototype,"readSourceVersion",null),l([pe("sourceVersion")],bi.prototype,"writeSourceVersion",null),l([p({json:{read:!1,write:{ignoreOrigin:!0}}})],bi.prototype,"tables",void 0),l([pe("tables")],bi.prototype,"writeTables",null),l([p()],bi.prototype,"thumbnailUrl",null),l([p()],bi.prototype,"updatingFromView",null),l([p({type:HDe,json:{write:!0}})],bi.prototype,"widgets",void 0),bi=l([M("esri.WebDocument2D")],bi);const yNe=bi,ui=(t=>t)(["operational-layers","basemap-base-layers","basemap-ground-layers","ground"]);var I4;let Im=I4=class extends B{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new I4({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};l([p({type:String,json:{write:!0}})],Im.prototype,"expression",void 0),l([p({type:String,json:{write:!0}})],Im.prototype,"name",void 0),l([p({type:["boolean","date","number","string"],json:{write:!0}})],Im.prototype,"returnType",void 0),l([p({type:String,json:{write:!0}})],Im.prototype,"title",void 0),Im=I4=l([M("esri.form.ExpressionInfo")],Im);const gNe=Im;let eo=class extends B{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};l([p({type:String,json:{write:!0}})],eo.prototype,"description",void 0),l([p({type:String,json:{write:!0}})],eo.prototype,"label",void 0),l([p()],eo.prototype,"type",void 0),l([p({type:String,json:{write:!0}})],eo.prototype,"visibilityExpression",void 0),eo=l([M("esri.form.elements.Element")],eo);let e3=class extends Re(B){constructor(e){super(e),this.type=null}};l([p()],e3.prototype,"type",void 0),e3=l([M("esri.form.elements.inputs.attachments.Input")],e3);const mf=e3,Mk=["any","capture","upload"];let Qv=class extends mf{constructor(e){super(e),this.type="audio",this.inputMethod="any",this.maxDuration=null}};l([p({type:["audio"],readOnly:!0,json:{write:!0}})],Qv.prototype,"type",void 0),l([p({type:Mk,json:{write:!0}})],Qv.prototype,"inputMethod",void 0),l([p({type:Number,json:{write:!0}})],Qv.prototype,"maxDuration",void 0),Qv=l([M("esri.form.elements.inputs.attachments.AudioInput")],Qv);const aZ=Qv;let l2=class extends mf{constructor(e){super(e),this.type="document",this.maxFileSize=null}};l([p({type:["document"],readOnly:!0,json:{write:!0}})],l2.prototype,"type",void 0),l([p({type:Number,json:{write:!0}})],l2.prototype,"maxFileSize",void 0),l2=l([M("esri.form.elements.inputs.attachments.DocumentInput")],l2);const lZ=l2;let Xv=class extends mf{constructor(e){super(e),this.type="image",this.inputMethod="any",this.maxImageSize=null}};l([p({type:["image"],readOnly:!0,json:{write:!0}})],Xv.prototype,"type",void 0),l([p({type:Mk,json:{write:!0}})],Xv.prototype,"inputMethod",void 0),l([p({type:Number,json:{write:!0}})],Xv.prototype,"maxImageSize",void 0),Xv=l([M("esri.form.elements.inputs.attachments.ImageInput")],Xv);const uZ=Xv;let u2=class extends mf{constructor(e){super(e),this.type="signature",this.inputMethod="any"}};l([p({type:["signature"],readOnly:!0,json:{write:!0}})],u2.prototype,"type",void 0),l([p({type:Mk,json:{write:!0}})],u2.prototype,"inputMethod",void 0),u2=l([M("esri.form.elements.inputs.attachments.SignatureInput")],u2);const cZ=u2;let Kv=class extends mf{constructor(e){super(e),this.type="video",this.inputMethod="any",this.maxDuration=null}};l([p({type:["video"],readOnly:!0,json:{write:!0}})],Kv.prototype,"type",void 0),l([p({type:Mk,json:{write:!0}})],Kv.prototype,"inputMethod",void 0),l([p({type:Number,json:{write:!0}})],Kv.prototype,"maxDuration",void 0),Kv=l([M("esri.form.elements.inputs.attachments.VideoInput")],Kv);const dZ=Kv;function nle(t){return{nestableTypes:{base:mf,key:"type",typeMap:{audio:aZ,document:lZ,image:uZ,signature:cZ,video:dZ}},allTypes:{base:mf,key:"type",typeMap:{attachment:t,audio:aZ,document:lZ,image:uZ,signature:cZ,video:dZ}}}}function vNe(t,e,i){return t?t.map(r=>rc(e.nestableTypes,r)):null}function bNe(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function wNe(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter(n=>r[n.type]).map(n=>n.toJSON())}let ku=class extends mf{constructor(e){super(e),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(e){return vNe(e,K5)}readInputs(e,i){return bNe(i.inputTypes,K5)}writeInputs(e,i){i.inputTypes=wNe(e,K5)}};l([p({type:["attachment"],readOnly:!0,json:{write:!0}})],ku.prototype,"type",void 0),l([p({type:["any","exact","exactOrNone"],json:{write:!0}})],ku.prototype,"attachmentAssociationType",void 0),l([p({json:{write:{isRequired:!0}}})],ku.prototype,"inputTypes",void 0),l([Ct("inputTypes")],ku.prototype,"castInputs",null),l([se("inputTypes")],ku.prototype,"readInputs",null),l([pe("inputTypes")],ku.prototype,"writeInputs",null),ku=l([M("esri.form.elements.inputs.attachments.AttachmentInput")],ku);const K5=nle(ku),_Ne=ku;var k4;const SNe=nle(_Ne);let Ao=k4=class extends eo{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){return new k4({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:this.input?.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};l([p({type:Boolean,json:{write:!0}})],Ao.prototype,"allowUserRename",void 0),l([p({type:String,json:{write:{isRequired:!0}}})],Ao.prototype,"attachmentKeyword",void 0),l([p({type:Boolean,json:{write:!0}})],Ao.prototype,"displayFilename",void 0),l([p({type:String,json:{write:!0}})],Ao.prototype,"editableExpression",void 0),l([p({type:String,json:{write:!0}})],Ao.prototype,"filenameExpression",void 0),l([p({types:SNe.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],Ao.prototype,"input",void 0),l([p({type:Number,json:{write:!0}})],Ao.prototype,"maxAttachmentCount",void 0),l([p({type:Number,json:{write:!0}})],Ao.prototype,"minAttachmentCount",void 0),l([p({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Ao.prototype,"type",void 0),l([p({type:Boolean,json:{write:!0}})],Ao.prototype,"useOriginalFilename",void 0),Ao=k4=l([M("esri.form.elements.AttachmentElement")],Ao);const pZ=Ao;let t3=class extends B{constructor(e){super(e),this.type=null}};l([p()],t3.prototype,"type",void 0),t3=l([M("esri.form.elements.inputs.Input")],t3);const ap=t3;let c2=class extends ap{constructor(e){super(e),this.maxLength=null,this.minLength=0}};l([p({type:Number,json:{write:!0}})],c2.prototype,"maxLength",void 0),l([p({type:Number,json:{write:!0}})],c2.prototype,"minLength",void 0),c2=l([M("esri.form.elements.inputs.TextInput")],c2);const HF=c2;var O4;let i3=O4=class extends HF{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new O4({maxLength:this.maxLength,minLength:this.minLength})}};l([p({type:["barcode-scanner"],json:{read:!1,write:!0}})],i3.prototype,"type",void 0),i3=O4=l([M("esri.form.elements.inputs.BarcodeScannerInput")],i3);const xNe=i3;var C4;let e0=C4=class extends ap{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new C4({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};l([p({type:String,json:{write:!0}})],e0.prototype,"noValueOptionLabel",void 0),l([p({type:Boolean,json:{write:!0}})],e0.prototype,"showNoValueOption",void 0),l([p({type:["combo-box"],json:{read:!1,write:!0}})],e0.prototype,"type",void 0),e0=C4=l([M("esri.form.elements.inputs.ComboBoxInput")],e0);const $Ne=e0;var R4;function hZ(t){return t??null}function fZ(t){return t??null}let Tu=R4=class extends ap{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,e){return hZ(e.max)}writeMax(t,e){e.max=fZ(t)}readMin(t,e){return hZ(e.min)}writeMin(t,e){e.min=fZ(t)}clone(){return new R4({max:this.max,min:this.min})}};l([p({type:String,json:{type:String,write:!0}})],Tu.prototype,"max",void 0),l([se("max")],Tu.prototype,"readMax",null),l([pe("max")],Tu.prototype,"writeMax",null),l([p({type:String,json:{type:String,write:!0}})],Tu.prototype,"min",void 0),l([se("min")],Tu.prototype,"readMin",null),l([pe("min")],Tu.prototype,"writeMin",null),l([p({type:["date-picker"],json:{read:!1,write:!0}})],Tu.prototype,"type",void 0),Tu=R4=l([M("esri.form.elements.inputs.DatePickerInput")],Tu);const TNe=Tu;var P4;function eP(t){return t??null}function tP(t){return t??null}let Vs=P4=class extends ap{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,e){return eP(e.max)}writeMax(t,e){e.max=tP(t)}readMin(t,e){return eP(e.min)}writeMin(t,e){e.min=tP(t)}readTimeResolution(t,e){return eP(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=tP(t)}clone(){return new P4({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};l([p({type:Boolean,json:{write:!0}})],Vs.prototype,"includeTimeOffset",void 0),l([p({type:String,json:{type:String,write:!0}})],Vs.prototype,"max",void 0),l([se("max")],Vs.prototype,"readMax",null),l([pe("max")],Vs.prototype,"writeMax",null),l([p({type:String,json:{type:String,write:!0}})],Vs.prototype,"min",void 0),l([se("min")],Vs.prototype,"readMin",null),l([pe("min")],Vs.prototype,"writeMin",null),l([p({type:String,json:{type:String,write:!0}})],Vs.prototype,"timeResolution",void 0),l([se("timeResolution")],Vs.prototype,"readTimeResolution",null),l([pe("timeResolution")],Vs.prototype,"writeTimeResolution",null),l([p({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],Vs.prototype,"type",void 0),Vs=P4=l([M("esri.form.elements.inputs.DateTimeOffsetPickerInput")],Vs);const ENe=Vs;var D4;function mZ(t){return t!=null?new Date(t):null}function yZ(t){return t?t.getTime():null}let vl=D4=class extends ap{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return mZ(e.max)}writeMax(t,e){e.max=yZ(t)}readMin(t,e){return mZ(e.min)}writeMin(t,e){e.min=yZ(t)}clone(){return new D4({includeTime:this.includeTime,max:this.max,min:this.min})}};l([p({type:Boolean,json:{write:!0}})],vl.prototype,"includeTime",void 0),l([p({type:Date,json:{type:Number,write:!0}})],vl.prototype,"max",void 0),l([se("max")],vl.prototype,"readMax",null),l([pe("max")],vl.prototype,"writeMax",null),l([p({type:Date,json:{type:Number,write:!0}})],vl.prototype,"min",void 0),l([se("min")],vl.prototype,"readMin",null),l([pe("min")],vl.prototype,"writeMin",null),l([p({type:["datetime-picker"],json:{read:!1,write:!0}})],vl.prototype,"type",void 0),vl=D4=l([M("esri.form.elements.inputs.DateTimePickerInput")],vl);const MNe=vl;var N4;let t0=N4=class extends ap{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new N4({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};l([p({type:String,json:{write:!0}})],t0.prototype,"noValueOptionLabel",void 0),l([p({type:Boolean,json:{write:!0}})],t0.prototype,"showNoValueOption",void 0),l([p({type:["radio-buttons"],json:{read:!1,write:!0}})],t0.prototype,"type",void 0),t0=N4=l([M("esri.form.elements.inputs.RadioButtonsInput")],t0);const ANe=t0;var L4;let i0=L4=class extends ap{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new L4({offValue:this.offValue,onValue:this.onValue})}};l([p({type:[String,Number],json:{write:!0}})],i0.prototype,"offValue",void 0),l([p({type:[String,Number],json:{write:!0}})],i0.prototype,"onValue",void 0),l([p({type:["switch"],json:{read:!1,write:!0}})],i0.prototype,"type",void 0),i0=L4=l([M("esri.form.elements.inputs.SwitchInput")],i0);const INe=i0;var j4;let r3=j4=class extends HF{constructor(t){super(t),this.type="text-area"}clone(){return new j4({maxLength:this.maxLength,minLength:this.minLength})}};l([p({type:["text-area"],json:{read:!1,write:!0}})],r3.prototype,"type",void 0),r3=j4=l([M("esri.form.elements.inputs.TextAreaInput")],r3);const kNe=r3;var z4;let n3=z4=class extends HF{constructor(t){super(t),this.type="text-box"}clone(){return new z4({maxLength:this.maxLength,minLength:this.minLength})}};l([p({type:["text-box"],json:{read:!1,write:!0}})],n3.prototype,"type",void 0),n3=z4=l([M("esri.form.elements.inputs.TextBoxInput")],n3);const ONe=n3;var F4;function iP(t){return t??null}function rP(t){return t??null}let Io=F4=class extends ap{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,e){return iP(e.max)}writeMax(t,e){e.max=rP(t)}readMin(t,e){return iP(e.min)}writeMin(t,e){e.min=rP(t)}readTimeResolution(t,e){return iP(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=rP(t)}clone(){return new F4({max:this.max,min:this.min,timeResolution:this.timeResolution})}};l([p({type:String,json:{type:String,write:!0}})],Io.prototype,"max",void 0),l([se("max")],Io.prototype,"readMax",null),l([pe("max")],Io.prototype,"writeMax",null),l([p({type:String,json:{type:String,write:!0}})],Io.prototype,"min",void 0),l([se("min")],Io.prototype,"readMin",null),l([pe("min")],Io.prototype,"writeMin",null),l([p({type:String,json:{type:String,write:!0}})],Io.prototype,"timeResolution",void 0),l([se("timeResolution")],Io.prototype,"readTimeResolution",null),l([pe("timeResolution")],Io.prototype,"writeTimeResolution",null),l([p({type:["time-picker"],json:{read:!1,write:!0}})],Io.prototype,"type",void 0),Io=F4=l([M("esri.form.elements.inputs.TimePickerInput")],Io);const CNe=Io,RNe=xNe,PNe=$Ne,DNe=TNe,NNe=ENe,LNe=MNe,jNe=ANe,zNe=INe,FNe=kNe,VNe=ONe,UNe=CNe,qNe={base:ap,key:"type",typeMap:{"barcode-scanner":RNe,"combo-box":PNe,"date-picker":DNe,"datetime-picker":LNe,"datetimeoffset-picker":NNe,"radio-buttons":jNe,switch:zNe,"text-area":FNe,"text-box":VNe,"time-picker":UNe}};var V4;let Do=V4=class extends eo{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new V4({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};l([p({types:Lse,json:{read:{reader:vk},write:!0}})],Do.prototype,"domain",void 0),l([p({type:Boolean,json:{write:!0}})],Do.prototype,"editable",void 0),l([p({type:String,json:{write:!0}})],Do.prototype,"editableExpression",void 0),l([p({type:String,json:{write:!0}})],Do.prototype,"fieldName",void 0),l([p({type:String,json:{write:!0}})],Do.prototype,"hint",void 0),l([p({types:qNe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Do.prototype,"input",void 0),l([p({type:String,json:{write:!0}})],Do.prototype,"requiredExpression",void 0),l([p({type:String,json:{read:!1,write:!0}})],Do.prototype,"type",void 0),l([p({type:String,json:{write:!0}})],Do.prototype,"valueExpression",void 0),Do=V4=l([M("esri.form.elements.FieldElement")],Do);var U4;let od=U4=class extends eo{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new U4({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:z(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};l([p({type:Number,json:{write:!0}})],od.prototype,"displayCount",void 0),l([p({type:["list"],json:{write:!0}})],od.prototype,"displayType",void 0),l([p({type:String,json:{write:!0}})],od.prototype,"editableExpression",void 0),l([p({type:[gF],json:{write:!0}})],od.prototype,"orderByFields",void 0),l([p({type:Number,json:{write:!0}})],od.prototype,"relationshipId",void 0),l([p({type:["relationship"],json:{read:!1,write:!0}})],od.prototype,"type",void 0),od=U4=l([M("esri.form.elements.RelationshipElement")],od);const gZ=od;var q4;let r0=q4=class extends eo{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new q4({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};l([p({type:String,json:{write:!0}})],r0.prototype,"text",void 0),l([p({type:String,json:{write:!0}})],r0.prototype,"textFormat",void 0),l([p({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],r0.prototype,"type",void 0),r0=q4=l([M("esri.form.elements.TextElement")],r0);const vZ=r0;let n0=class extends Re(eo){constructor(e){super(e),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};l([p({type:[use],json:{write:{isRequired:!0}}})],n0.prototype,"associationTypes",void 0),l([p({type:String,json:{write:!0}})],n0.prototype,"editableExpression",void 0),l([p({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],n0.prototype,"type",void 0),n0=l([M("esri.form.elements.UtilityNetworkAssociationsElement")],n0);const bZ=n0,GNe=t=>t.type==="field",BNe=t=>t.type==="group",HNe=t=>t.type==="text";function sle(t){return{typesWithGroup:{base:eo,key:"type",typeMap:{attachment:pZ,field:Do,group:t,relationship:gZ,text:vZ,utilityNetworkAssociations:bZ}},typesWithoutGroup:{base:eo,key:"type",typeMap:{attachment:pZ,field:Do,relationship:gZ,text:vZ,utilityNetworkAssociations:bZ}}}}function ole(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>r[n.type].fromJSON(n))}function ale(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(n=>r[n.type]).map(n=>n.toJSON())}function lle(t,e,i=!0){return t?t.map(r=>rc(i?e.typesWithGroup:e.typesWithoutGroup,r)):null}var G4;let Ou=G4=class extends eo{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return lle(t,nP,!1)}readElements(t,e){return ole(e.formElements,nP,!1)}writeElements(t,e){e.formElements=ale(t,nP,!1)}clone(){return new G4({description:this.description,elements:z(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};l([p({json:{write:!0}})],Ou.prototype,"elements",void 0),l([Ct("elements")],Ou.prototype,"castElements",null),l([se("elements",["formElements"])],Ou.prototype,"readElements",null),l([pe("elements")],Ou.prototype,"writeElements",null),l([p({type:["collapsed","expanded"],json:{write:!0}})],Ou.prototype,"initialState",void 0),l([p({type:String,json:{read:!1,write:!0}})],Ou.prototype,"type",void 0),Ou=G4=l([M("esri.form.elements.GroupElement")],Ou);const nP=sle(Ou),WNe=Ou;var B4;const sP=sle(WNe);let bl=B4=class extends B{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return lle(t,sP)}readElements(t,e){return ole(e.formElements,sP)}writeElements(t,e){e.formElements=ale(t,sP)}clone(){return new B4({description:this.description,expressionInfos:z(this.expressionInfos),elements:z(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,e){const i=new Set,{description:r,elements:n,expressionInfos:s,title:o}=this;if(uS(i,t,r),uS(i,t,o),!n)return[];const u=ZNe(n,s).map(d=>rs(i,t,null,d));await Promise.all(u);for(const d of n)ule(i,{fieldsIndex:t,relationships:e},d);return Array.from(i).sort()}};function ule(t,e,i){const{fieldsIndex:r}=e;if(!r||r.fields.length!==t.size)switch(uS(t,r,i.label),uS(t,r,i.description),i.type){case"field":ts(t,r,i.fieldName);break;case"group":i.elements.forEach(n=>ule(t,e,n));break;case"relationship":if(e.relationships){const n=e.relationships.find(s=>s.id===i.relationshipId);n&&ts(t,r,n.keyField)}Uy(t,r,i.orderByFields?.map(n=>n.field));break;case"text":uS(t,r,i.text)}}function ZNe(t,e){if(!e||e.length===0)return[];const i=cle(t),r=[];for(const n of e)i.has(n.name)&&r.push(n.expression);return r}function cle(t){const e=new Set;for(const i of t)if(Dq(e,i.visibilityExpression),!HNe(i)){if(BNe(i))H3(e,cle(i.elements));else if(Dq(e,i.editableExpression),GNe(i)){const{requiredExpression:r,valueExpression:n}=i;H3(e,[r,n])}}return e}function uS(t,e,i){Uy(t,e,hF(i))}l([p({type:String,json:{write:!0}})],bl.prototype,"description",void 0),l([p({json:{write:!0}})],bl.prototype,"elements",void 0),l([Ct("elements")],bl.prototype,"castElements",null),l([se("elements",["formElements"])],bl.prototype,"readElements",null),l([pe("elements")],bl.prototype,"writeElements",null),l([p({type:[gNe],json:{write:!0}})],bl.prototype,"expressionInfos",void 0),l([p({type:Boolean,json:{default:!1,write:!0}})],bl.prototype,"preserveFieldValuesWhenHidden",void 0),l([p({type:String,json:{write:!0}})],bl.prototype,"title",void 0),bl=B4=l([M("esri.form.FormTemplate")],bl);const JNe=Symbol("getSliceableSymbol");let WS=class{};WS=l([M("esri.graphic.GraphicOrigin")],WS);const YNe=Symbol("isFeatureGraphicOrigin");var wZ;let QNe=class extends WS{get[(wZ=YNe,wx)](){return this.layer}get[wF](){return this.layer}get[JNe](){return this.layer}constructor(e){super(),this[wZ]=!0,this.type="feature",this.layer=e}get id(){return this.layer.id}};function _Z(t,e,i){if(t.hasM==null||t.hasZ)for(const r of e)for(const n of r)n.length>2&&(n[2]*=i)}function XNe(t,e,i){if(!t&&!e||!i)return;const r=Kl(i);SZ(t,i,r),SZ(e,i,r)}function SZ(t,e,i){if(t)for(const r of t)KNe(r.geometry,e,i)}function KNe(t,e,i){if(!t?.spatialReference||Fi(t.spatialReference,e))return;const r=Kl(t.spatialReference)/i;if(r!==1){if("x"in t)t.z!=null&&(t.z*=r);else if("rings"in t)_Z(t,t.rings,r);else if("paths"in t)_Z(t,t.paths,r);else if("points"in t&&(t.hasM==null||t.hasZ))for(const n of t.points)n.length>2&&(n[2]*=r)}}function xZ(t,e,i){if(!i?.features||!i.hasZ)return;const r=Zie(i.geometryType,e,t.outSpatialReference);if(r!=null)for(const n of i.features)r(n.geometry)}var H4;const W4=new Be({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Br=H4=class extends B{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){return this.readFeaturesWithClass(t,e,Ti)}writeGeometryType(t,e,i,r){if(t)return void W4.write(t,e,i,r);const{features:n}=this;if(n){for(const s of n)if(s?.geometry!=null)return void W4.write(s.geometry.type,e,i,r)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,r=oc(t);return r&&!i&&e.spatialReference&&(r.spatialReference=we.fromJSON(e.spatialReference)),r}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(e.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new H4(this.cloneProperties())}cloneProperties(){return z({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const r=e.features[i];if(r.geometry){const n=t?.[i];r.geometry=n?.toJSON()||r.geometry}}return e}quantize(t){const{scale:[e,i],translate:[r,n]}=t,s=h=>Math.round((h-r)/e),o=h=>Math.round((n-h)/i),u=this.features,d=this._getQuantizationFunction(this.geometryType,s,o);for(let h=0,m=u.length;h<m;h++)d?.(u[h].geometry)||(u.splice(h,1),h--,m--);return this.transform=t,this}unquantize(){const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[r,n],scale:[s,o]}=i,u=b=>b*s+r,d=b=>n-b*o;let h=null,m=null;if(this.hasZ&&i?.scale?.[2]!=null){const{translate:[,,b],scale:[,,_]}=i;h=x=>x*_+b}if(this.hasM&&i?.scale?.[3]!=null){const{translate:[,,,b],scale:[,,,_]}=i;m=x=>x==null?x:x*_+b}const v=this._getHydrationFunction(t,u,d,h,m);for(const{geometry:b}of e)b!=null&&v&&v(b);return this.transform=null,this}readFeaturesWithClass(t,e,i){const r=we.fromJSON(e.spatialReference),n=[];for(let s=0;s<t.length;s++){const o=t[s],u=i.fromJSON(o),d=o.geometry?.spatialReference;u.geometry==null||d||(u.geometry.spatialReference=r);const h=o.aggregateGeometries,m=u.aggregateGeometries;if(h&&m!=null)for(const v in m){const b=m[v],_=h[v],x=_?.spatialReference;b==null||x||(b.spatialReference=r)}n.push(u)}return n}_quantizePoints(t,e,i){let r,n;const s=[];for(let o=0,u=t.length;o<u;o++){const d=t[o];if(o>0){const h=e(d[0]),m=i(d[1]);h===r&&m===n||(s.push([h-r,m-n]),r=h,n=m)}else r=e(d[0]),n=i(d[1]),s.push([r,n])}return s.length>0?s:null}_getQuantizationFunction(t,e,i){return t==="point"?r=>(r.x=e(r.x),r.y=i(r.y),r):t==="polyline"||t==="polygon"?r=>{const n=V0(r)?r.rings:r.paths,s=[];for(let o=0,u=n.length;o<u;o++){const d=n[o],h=this._quantizePoints(d,e,i);h&&s.push(h)}return s.length>0?(V0(r)?r.rings=s:r.paths=s,r):null}:t==="multipoint"?r=>{const n=this._quantizePoints(r.points,e,i);return n&&n.length>0?(r.points=n,r):null}:t==="extent"?r=>r:null}_getHydrationFunction(t,e,i,r,n){return t==="point"?s=>{s.x=e(s.x),s.y=i(s.y),r&&(s.z=r(s.z))}:t==="polyline"||t==="polygon"?s=>{const o=V0(s)?s.rings:s.paths;let u,d;for(let h=0,m=o.length;h<m;h++){const v=o[h];for(let b=0,_=v.length;b<_;b++){const x=v[b];b>0?(u+=x[0],d+=x[1]):(u=x[0],d=x[1]),x[0]=e(u),x[1]=i(d)}}if(r&&n)for(let h=0,m=o.length;h<m;h++){const v=o[h];for(let b=0,_=v.length;b<_;b++){const x=v[b];x[2]=r(x[2]),x[3]=n(x[3])}}else if(r)for(let h=0,m=o.length;h<m;h++){const v=o[h];for(let b=0,_=v.length;b<_;b++){const x=v[b];x[2]=r(x[2])}}else if(n)for(let h=0,m=o.length;h<m;h++){const v=o[h];for(let b=0,_=v.length;b<_;b++){const x=v[b];x[2]=n(x[2])}}}:t==="extent"?s=>{s.xmin=e(s.xmin),s.ymin=i(s.ymin),s.xmax=e(s.xmax),s.ymax=i(s.ymax),r&&s.zmax!=null&&s.zmin!=null&&(s.zmax=r(s.zmax),s.zmin=r(s.zmin)),n&&s.mmax!=null&&s.mmin!=null&&(s.mmax=n(s.mmax),s.mmin=n(s.mmin))}:t==="multipoint"?s=>{const o=s.points;let u,d;for(let h=0,m=o.length;h<m;h++){const v=o[h];h>0?(u+=v[0],d+=v[1]):(u=v[0],d=v[1]),v[0]=e(u),v[1]=i(d)}if(r&&n)for(let h=0,m=o.length;h<m;h++){const v=o[h];v[2]=r(v[2]),v[3]=n(v[3])}else if(r)for(let h=0,m=o.length;h<m;h++){const v=o[h];v[2]=r(v[2])}else if(n)for(let h=0,m=o.length;h<m;h++){const v=o[h];v[2]=n(v[2])}}:null}};l([p({type:String,json:{write:!0}})],Br.prototype,"displayFieldName",void 0),l([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Br.prototype,"exceededTransferLimit",void 0),l([p({type:[Ti],json:{write:!0}})],Br.prototype,"features",void 0),l([se("features")],Br.prototype,"readFeatures",null),l([p({type:[cn],json:{write:!0}})],Br.prototype,"fields",void 0),l([p({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:W4.read}}})],Br.prototype,"geometryType",void 0),l([pe("geometryType")],Br.prototype,"writeGeometryType",null),l([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Br.prototype,"hasM",void 0),l([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Br.prototype,"hasZ",void 0),l([p({types:kw,json:{write:!0}})],Br.prototype,"queryGeometry",void 0),l([se("queryGeometry")],Br.prototype,"readQueryGeometry",null),l([p({type:we,json:{write:!0}})],Br.prototype,"spatialReference",void 0),l([pe("spatialReference")],Br.prototype,"writeSpatialReference",null),l([p({json:{write:!0}})],Br.prototype,"transform",void 0),Br=H4=l([M("esri.rest.support.FeatureSet")],Br),Br.prototype.toJSON.isDefaultToJSON=!0;let eLe=0,$d=class extends nF(ok(fe)){constructor(e){super(e),this._idToClientGeometry=null,this.type="memory"}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get _workerGeometryType(){const e=this.layer?.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);xZ(e,this.layer.spatialReference,r);const n=Br.fromJSON(r);if(!this._requiresClientGraphicMapping()||!this._idToClientGeometry)return n;const s=this.layer.objectIdField;for(const o of n.features){const u=o.attributes[s],d=this._idToClientGeometry.get(u);d!==void 0&&(o.geometry=d)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new L("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return xZ(e,this.layer.spatialReference,r),r}queryFeatureCount(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i))}queryObjectIds(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i))}queryExtent(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i)).then(r=>({count:r.count,extent:Xe.fromJSON(r.extent)}))}querySnapping(e,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",e,i))}async queryAttributeBins(e,i={}){return await this.load(),this._connection.invoke("queryAttributeBins",e?.toJSON(),i)}async _applyEdits(e){if(!this._connection)throw new L("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const n=[],s=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=m=>"objectId"in m&&m.objectId!=null?m.objectId:"attributes"in m&&m.attributes[i]!=null?m.attributes[i]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const m of e.deleteFeatures){const v=o(m);v!=null&&n.push(v)}const u=e.updateFeatures&&this._idToClientGeometry?new Map:null;if(e.updateFeatures){for(const m of e.updateFeatures)if(s.push(this._serializeFeature(m)),u&&m.geometry!=null){const v=o(m);v!=null&&u.set(v,m)}}XNe(r?r.features:null,s,this.layer.spatialReference);const{fullExtent:d,featureEditResults:h}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:s,deletes:n});return this.fullExtent=d,r&&r.finish(h.uidToObjectId),this._updateIdToClientGeometries(u,h),this._createEditsResult(h)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const r=[];for(const{geometry:n}of e)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||r.push(n.load({signal:i}));r.length&&await Promise.all(r)}_updateIdToClientGeometries(e,i){if(this._idToClientGeometry){if(e)for(const r of i.updateResults){if(!r.success)continue;const n=e.get(r.objectId);n!=null&&this._addIdToClientGeometry(n)}for(const r of i.deleteResults)r.success&&this._idToClientGeometry.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:""};return{objectId:e.objectId,globalId:e.globalId,error:i?new L("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,r=new Array(e.length);let n=null;for(let o=0;o<e.length;o++){const u=e[o],d=this._serializeFeature(u);n||u.geometry==null||(n=u.geometry.type),r[o]=d,i.set(`${d.uid}`,u)}const s=this;return{features:r,inferredGeometryType:n,finish(o){const u=s.sourceJSON.objectIdField;for(const d in o){const h=o[d],m=i.get(d);m&&(m.attributes||(m.attributes={}),h===-1?delete m.attributes[u]:m.attributes[u]=h,s._addIdToClientGeometry(m))}}}}_addIdToClientGeometry(e){if(!this._idToClientGeometry)return;const i=this.sourceJSON.objectIdField,r=e.attributes?.[i];r!=null&&this._idToClientGeometry.set(r,e.geometry??null)}get _layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,r=this._geometryForSerialization(e),n=(eLe++).toString();return r?{uid:n,geometry:r.toJSON(),attributes:i}:{uid:n,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?hi.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await Hxe("MemorySourceWorker",{strategy:q("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:i,spatialReference:r,objectIdField:n,hasM:s,hasZ:o,timeInfo:u,dateFieldsTimeZone:d}=this.layer,h=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const m=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",x=>{ie.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),x.preventDefault()}));const v={features:m.features,fields:i?.map(x=>x.toJSON()),geometryType:CG.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:n,spatialReference:h?null:r&&r.toJSON(),timeInfo:u?.toJSON()??null,dateFieldsTimeZone:d},b=await this._connection.invoke("load",v,{signal:e});for(const x of b.warnings)ie.getLogger(this.layer).warn("#load()",`${x.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:x});b.featureErrors.length&&ie.getLogger(this.layer).warn("#load()",`Encountered ${b.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:b.featureErrors});const _=b.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(m.inferredGeometryType)&&(_.geometryType=CG.toJSON(m.inferredGeometryType)),this.sourceJSON=_,this._requiresClientGraphicMapping()&&(this._idToClientGeometry=new Map),m.finish(b.assignedObjectIds)}};l([P6({Type:Ti,ensureType:cr(Ti)})],$d.prototype,"itemType",void 0),l([p()],$d.prototype,"type",void 0),l([p({constructOnly:!0})],$d.prototype,"layer",void 0),l([p({readOnly:!0})],$d.prototype,"_workerGeometryType",null),l([p()],$d.prototype,"sourceJSON",void 0),$d=l([M("esri.layers.graphics.sources.MemorySource")],$d);function tLe(t){return"portalItem"in t}const iLe=t=>{const e=t;let i=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):tLe(this)?this.portalItem?.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return l([p({type:String})],i.prototype,"apiKey",null),i=l([M("esri.layers.mixins.APIKeyMixin")],i),i},rLe=t=>{const e=t;let i=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=sc(this.url);if(r?.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",Mbe(r,ie.getLogger(this)))}};return l([p()],i.prototype,"title",null),l([p({type:String})],i.prototype,"url",null),i=l([M("esri.layers.mixins.ArcGISService")],i),i};let $Z=class extends SyntaxError{constructor(e,i,r,n){super(e),this.expected=i,this.found=r,this.location=n,this.name="SyntaxError"}format(e){let i="Error: "+this.message;if(this.location){let r=null;const n=e.find(d=>d.source===this.location.source);n&&(r=n.text.split(/\r\n|\n|\r/g));const s=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,u=this.location.source+":"+o.line+":"+o.column;if(r){const d=this.location.end,h="".padEnd(o.line.toString().length," "),m=r[s.line-1],v=(s.line===d.line?d.column:m.length+1)-s.column||1;i+=`
 --> `+u+`
`+h+` |
`+o.line+" | "+m+`
`+h+" | "+"".padEnd(s.column-1," ")+"".padEnd(v,"^")}else i+=`
 at `+u}return i}static buildMessage(e,i){function r(b){return b.codePointAt(0).toString(16).toUpperCase()}const n=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function s(b){return n?b.replace(n,_=>"\\u{"+r(_)+"}"):b}function o(b){return s(b.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,_=>"\\x0"+r(_)).replace(/[\x10-\x1F\x7F-\x9F]/g,_=>"\\x"+r(_)))}function u(b){return s(b.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,_=>"\\x0"+r(_)).replace(/[\x10-\x1F\x7F-\x9F]/g,_=>"\\x"+r(_)))}const d={literal:b=>'"'+o(b.text)+'"',class(b){const _=b.parts.map(x=>Array.isArray(x)?u(x[0])+"-"+u(x[1]):u(x));return"["+(b.inverted?"^":"")+_.join("")+"]"+(b.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:b=>b.description};function h(b){return d[b.type](b)}function m(b){const _=b.map(h);if(_.sort(),_.length>0){let x=1;for(let $=1;$<_.length;$++)_[$-1]!==_[$]&&(_[x]=_[$],x++);_.length=x}switch(_.length){case 1:return _[0];case 2:return _[0]+" or "+_[1];default:return _.slice(0,-1).join(", ")+", or "+_[_.length-1]}}function v(b){return b?'"'+o(b)+'"':"end of input"}return"Expected "+m(e)+" but "+v(i)+" found."}};function nLe(t,e){const i={},r=(e=e!==void 0?e:{}).grammarSource,n={start:Bx};let s=Bx;const o="none",u=")",d=",",h="(",m="%",v="px",b="cm",_="mm",x="in",$="pt",E="pc",A="deg",O="rad",D="grad",R="turn",P="#",j=".",Q="e",re=/^[ \t\n\r]/,ce=/^[a-z\-]/,ue=/^[0-9a-fA-F]/,ye=/^[+\-]/,he=/^[0-9]/,Pe=vi("none"),ve=pr("none",!1),We=pr(")",!1),ee=pr(",",!1),ge=dp([" ","	",`
`,"\r"],!1,!1,!1),Se=vi("function"),nt=pr("(",!1),zt=vi("identifier"),U=dp([["a","z"],"-"],!1,!1,!1),ae=vi("percentage"),$e=pr("%",!1),Ce=vi("length"),Ke=pr("px",!1),dt=pr("cm",!1),Dt=pr("mm",!1),gn=pr("in",!1),Vi=pr("pt",!1),Tf=pr("pc",!1),sg=vi("angle"),Jw=pr("deg",!1),Fx=pr("rad",!1),hc=pr("grad",!1),Yw=pr("turn",!1),Qw=vi("number"),rO=vi("color"),Vx=pr("#",!1),og=dp([["0","9"],["a","f"],["A","F"]],!1,!1,!1),ag=dp(["+","-"],!1,!1,!1),ea=dp([["0","9"]],!1,!1,!1),nO=pr(".",!1),sO=pr("e",!1);function ss(){return[]}function oO(C,W){return{type:"function",name:C,parameters:W||[]}}function Ux(C,W){return W.length>0?mO(C,W,3):[C]}function qx(C){return{type:"quantity",value:C.value,unit:C.unit}}function lg(C){return{type:"color",colorType:C.type,value:C.value}}function X8(C){return C}function Gx(){return cp()}function aO(C){return{value:C,unit:"%"}}function lO(C){return{value:C,unit:"px"}}function Ef(C){return{value:C,unit:"cm"}}function os(C){return{value:C,unit:"mm"}}function iu(C){return{value:C,unit:"in"}}function as(C){return{value:C,unit:"pt"}}function uO(C){return{value:C,unit:"pc"}}function cO(C){return{value:C,unit:"deg"}}function dO(C){return{value:C,unit:"rad"}}function ug(C){return{value:C,unit:"grad"}}function cg(C){return{value:C,unit:"turn"}}function dg(C){return{value:C,unit:null}}function fc(){return{type:"hex",value:cp()}}function pg(C){return{type:"function",value:C}}function Mf(){return{type:"named",value:cp()}}function pO(){return parseFloat(cp())}let K=0|e.peg$currPos,ti=K;const ta=[{line:1,column:1}];let Af,ks=K,If=e.peg$maxFailExpected||[],Ne=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in n))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');s=n[e.startRule]}function cp(){return t.substring(ti,K)}function Xw(C=K){const W=t.codePointAt(C);return W===void 0?"":String.fromCodePoint(W)}function pr(C,W){return{type:"literal",text:C,ignoreCase:W}}function dp(C,W,me,Ge){return{type:"class",parts:C,inverted:W,ignoreCase:me,unicode:Ge}}function ru(){return{type:"end"}}function vi(C){return{type:"other",description:C}}function vn(C){let W,me=ta[C];if(me)return me;if(C>=ta.length)W=ta.length-1;else for(W=C;!ta[--W];);for(me=ta[W],me={line:me.line,column:me.column};W<C;)t.charCodeAt(W)===10?(me.line++,me.column=1):me.column++,W++;return ta[C]=me,me}function mc(C,W,me){const Ge=vn(C),It=vn(W);return{source:r,start:{offset:C,line:Ge.line,column:Ge.column},end:{offset:W,line:It.line,column:It.column}}}function Ze(C){K<ks||(K>ks&&(ks=K,If=[]),If.push(C))}function hO(C,W,me){return new $Z($Z.buildMessage(C,W),C,W,me)}function Bx(){let C;return C=Hx(),C===i&&(C=kf()),C}function Hx(){let C,W;return Ne++,C=K,Ni(),t.substr(K,4)===o?(W=o,K+=4):(W=i,Ne===0&&Ze(ve)),W!==i?(Ni(),ti=C,C=ss()):(K=C,C=i),Ne--,C===i&&Ne===0&&Ze(Pe),C}function kf(){let C,W;if(C=[],W=Of(),W!==i)for(;W!==i;)C.push(W),W=Of();else C=i;return C}function Of(){let C,W,me,Ge;return C=K,Ni(),W=hp(),W!==i?(Ni(),me=pp(),me===i&&(me=null),Ni(),t.charCodeAt(K)===41?(Ge=u,K++):(Ge=i,Ne===0&&Ze(We)),Ge!==i?(Ni(),ti=C,C=oO(W,me)):(K=C,C=i)):(K=C,C=i),C}function pp(){let C,W,me,Ge,It,Mi,Li,tn;if(C=K,W=nu(),W!==i){for(me=[],Ge=K,It=Ni(),t.charCodeAt(K)===44?(Mi=d,K++):(Mi=i,Ne===0&&Ze(ee)),Mi===i&&(Mi=null),Li=Ni(),tn=nu(),tn!==i?(It=[It,Mi,Li,tn],Ge=It):(K=Ge,Ge=i);Ge!==i;)me.push(Ge),Ge=K,It=Ni(),t.charCodeAt(K)===44?(Mi=d,K++):(Mi=i,Ne===0&&Ze(ee)),Mi===i&&(Mi=null),Li=Ni(),tn=nu(),tn!==i?(It=[It,Mi,Li,tn],Ge=It):(K=Ge,Ge=i);ti=C,C=Ux(W,me)}else K=C,C=i;return C}function nu(){let C,W;return C=K,W=Wx(),W===i&&(W=Zx(),W===i&&(W=yc(),W===i&&(W=fp()))),W!==i&&(ti=C,W=qx(W)),C=W,C===i&&(C=K,W=fO(),W!==i&&(ti=C,W=lg(W)),C=W),C}function Ni(){let C,W;for(Ne++,C=[],W=t.charAt(K),re.test(W)?K++:(W=i,Ne===0&&Ze(ge));W!==i;)C.push(W),W=t.charAt(K),re.test(W)?K++:(W=i,Ne===0&&Ze(ge));return Ne--,C}function hp(){let C,W,me;return Ne++,C=K,W=hr(),W!==i?(t.charCodeAt(K)===40?(me=h,K++):(me=i,Ne===0&&Ze(nt)),me!==i?(ti=C,C=W):(K=C,C=i)):(K=C,C=i),Ne--,C===i&&(W=i,Ne===0&&Ze(Se)),C}function hr(){let C,W,me;if(Ne++,C=K,W=[],me=t.charAt(K),ce.test(me)?K++:(me=i,Ne===0&&Ze(U)),me!==i)for(;me!==i;)W.push(me),me=t.charAt(K),ce.test(me)?K++:(me=i,Ne===0&&Ze(U));else W=i;return W!==i&&(ti=C,W=Gx()),C=W,Ne--,C===i&&(W=i,Ne===0&&Ze(zt)),C}function Wx(){let C,W,me;return Ne++,C=K,Ni(),W=ls(),W!==i?(t.charCodeAt(K)===37?(me=m,K++):(me=i,Ne===0&&Ze($e)),me!==i?(ti=C,C=aO(W)):(K=C,C=i)):(K=C,C=i),Ne--,C===i&&Ne===0&&Ze(ae),C}function Zx(){let C,W,me;return Ne++,C=K,Ni(),W=ls(),W!==i?(t.substr(K,2)===v?(me=v,K+=2):(me=i,Ne===0&&Ze(Ke)),me!==i?(ti=C,C=lO(W)):(K=C,C=i)):(K=C,C=i),C===i&&(C=K,Ni(),W=ls(),W!==i?(t.substr(K,2)===b?(me=b,K+=2):(me=i,Ne===0&&Ze(dt)),me!==i?(ti=C,C=Ef(W)):(K=C,C=i)):(K=C,C=i),C===i&&(C=K,Ni(),W=ls(),W!==i?(t.substr(K,2)===_?(me=_,K+=2):(me=i,Ne===0&&Ze(Dt)),me!==i?(ti=C,C=os(W)):(K=C,C=i)):(K=C,C=i),C===i&&(C=K,Ni(),W=ls(),W!==i?(t.substr(K,2)===x?(me=x,K+=2):(me=i,Ne===0&&Ze(gn)),me!==i?(ti=C,C=iu(W)):(K=C,C=i)):(K=C,C=i),C===i&&(C=K,Ni(),W=ls(),W!==i?(t.substr(K,2)===$?(me=$,K+=2):(me=i,Ne===0&&Ze(Vi)),me!==i?(ti=C,C=as(W)):(K=C,C=i)):(K=C,C=i),C===i&&(C=K,Ni(),W=ls(),W!==i?(t.substr(K,2)===E?(me=E,K+=2):(me=i,Ne===0&&Ze(Tf)),me!==i?(ti=C,C=uO(W)):(K=C,C=i)):(K=C,C=i)))))),Ne--,C===i&&Ne===0&&Ze(Ce),C}function yc(){let C,W,me;return Ne++,C=K,W=ls(),W!==i?(t.substr(K,3)===A?(me=A,K+=3):(me=i,Ne===0&&Ze(Jw)),me!==i?(ti=C,C=cO(W)):(K=C,C=i)):(K=C,C=i),C===i&&(C=K,W=ls(),W!==i?(t.substr(K,3)===O?(me=O,K+=3):(me=i,Ne===0&&Ze(Fx)),me!==i?(ti=C,C=dO(W)):(K=C,C=i)):(K=C,C=i),C===i&&(C=K,W=ls(),W!==i?(t.substr(K,4)===D?(me=D,K+=4):(me=i,Ne===0&&Ze(hc)),me!==i?(ti=C,C=ug(W)):(K=C,C=i)):(K=C,C=i),C===i&&(C=K,W=ls(),W!==i?(t.substr(K,4)===R?(me=R,K+=4):(me=i,Ne===0&&Ze(Yw)),me!==i?(ti=C,C=cg(W)):(K=C,C=i)):(K=C,C=i)))),Ne--,C===i&&(W=i,Ne===0&&Ze(sg)),C}function fp(){let C,W;return Ne++,C=K,Ni(),W=ls(),W!==i?(ti=C,C=dg(W)):(K=C,C=i),Ne--,C===i&&Ne===0&&Ze(Qw),C}function fO(){let C,W,me,Ge;if(Ne++,C=K,t.charCodeAt(K)===35?(W=P,K++):(W=i,Ne===0&&Ze(Vx)),W!==i){if(me=[],Ge=t.charAt(K),ue.test(Ge)?K++:(Ge=i,Ne===0&&Ze(og)),Ge!==i)for(;Ge!==i;)me.push(Ge),Ge=t.charAt(K),ue.test(Ge)?K++:(Ge=i,Ne===0&&Ze(og));else me=i;me!==i?(ti=C,C=fc()):(K=C,C=i)}else K=C,C=i;return C===i&&(C=K,W=Of(),W!==i&&(ti=C,W=pg(W)),C=W,C===i&&(C=K,W=hr(),W!==i&&(ti=C,W=Mf()),C=W)),Ne--,C===i&&(W=i,Ne===0&&Ze(rO)),C}function ls(){let C,W,me,Ge,It,Mi,Li,tn;for(C=K,W=t.charAt(K),ye.test(W)?K++:(W=i,Ne===0&&Ze(ag)),W===i&&(W=null),me=K,Ge=[],It=t.charAt(K),he.test(It)?K++:(It=i,Ne===0&&Ze(ea));It!==i;)Ge.push(It),It=t.charAt(K),he.test(It)?K++:(It=i,Ne===0&&Ze(ea));if(t.charCodeAt(K)===46?(It=j,K++):(It=i,Ne===0&&Ze(nO)),It!==i){if(Mi=[],Li=t.charAt(K),he.test(Li)?K++:(Li=i,Ne===0&&Ze(ea)),Li!==i)for(;Li!==i;)Mi.push(Li),Li=t.charAt(K),he.test(Li)?K++:(Li=i,Ne===0&&Ze(ea));else Mi=i;Mi!==i?(Ge=[Ge,It,Mi],me=Ge):(K=me,me=i)}else K=me,me=i;if(me===i)if(me=[],Ge=t.charAt(K),he.test(Ge)?K++:(Ge=i,Ne===0&&Ze(ea)),Ge!==i)for(;Ge!==i;)me.push(Ge),Ge=t.charAt(K),he.test(Ge)?K++:(Ge=i,Ne===0&&Ze(ea));else me=i;if(me!==i){if(Ge=K,t.charCodeAt(K)===101?(It=Q,K++):(It=i,Ne===0&&Ze(sO)),It!==i){if(Mi=t.charAt(K),ye.test(Mi)?K++:(Mi=i,Ne===0&&Ze(ag)),Mi===i&&(Mi=null),Li=[],tn=t.charAt(K),he.test(tn)?K++:(tn=i,Ne===0&&Ze(ea)),tn!==i)for(;tn!==i;)Li.push(tn),tn=t.charAt(K),he.test(tn)?K++:(tn=i,Ne===0&&Ze(ea));else Li=i;Li!==i?(It=[It,Mi,Li],Ge=It):(K=Ge,Ge=i)}else K=Ge,Ge=i;Ge===i&&(Ge=null),ti=C,C=pO()}else K=C,C=i;return C}function Jx(C,W){return C.map(function(me){return me[W]})}function mO(C,W,me){return[C].concat(Jx(W,me))}Af=s();const mp=Af!==i&&K===t.length;function Cf(){throw Af!==i&&K<t.length&&Ze(ru()),hO(If,ks<t.length?Xw(ks):null,ks<t.length?mc(ks,ks+1):mc(ks,ks))}return e.peg$library?{peg$result:Af,peg$currPos:K,peg$FAILED:i,peg$maxFailExpected:If,peg$maxFailPos:ks,peg$success:mp,peg$throw:mp?void 0:Cf}:mp?Af:void Cf()}function dle(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=TZ(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new L("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:TZ(i.value)}});e.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!y3e(e[i].effects,e[i+1].effects))throw new L("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});g3e(e[i].effects,e[i+1].effects)}return e.sort((i,r)=>r.scale-i.scale),e}function TZ(t){let e;if(!t)return[];try{e=nLe(t)}catch(i){throw new L("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>sLe(i))}function sLe(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return oLe(t);case"opacity":return aLe(t);case"hue-rotate":return lLe(t);case"blur":return uLe(t);case"drop-shadow":return cLe(t);case"bloom":return dLe(t)}}catch(e){throw e.details.filter=t,e}throw new L("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function oLe(t){let e=1;return zw(t.parameters,1),t.parameters.length===1&&(e=Ol(t.parameters[0])),new TN(t.name,e)}function aLe(t){let e=1;return zw(t.parameters,1),t.parameters.length===1&&(e=Ol(t.parameters[0])),new vne(e)}function lLe(t){let e=0;return zw(t.parameters,1),t.parameters.length===1&&(e=gLe(t.parameters[0])),new yne(e)}function uLe(t){let e=0;return zw(t.parameters,1),t.parameters.length===1&&(e=JF(t.parameters[0]),Ax(e,t.parameters[0])),new dne(e)}function cLe(t){const e=[];let i=null;for(const r of t.parameters)if(r.type==="color"){if(e.length&&Object.freeze(e),i)throw new L("effect:type-error","Accepts only one color",{});i=vLe(r)}else{const n=JF(r);if(Object.isFrozen(e))throw new L("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(n),e.length===3&&Ax(n,r)}if(e.length<2||e.length>3)throw new L("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new fne(e[0],e[1],e[2]||0,i||ple("black"))}function dLe(t){let e=1,i=0,r=0;return zw(t.parameters,3),t.parameters[0]&&(e=Ol(t.parameters[0])),t.parameters[1]&&(i=JF(t.parameters[1]),Ax(i,t.parameters[1])),t.parameters[2]&&(r=Ol(t.parameters[2])),new une(e,i,r)}function zw(t,e){if(t.length>e)throw new L("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function Ak(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in ZF)return"<length>";if(t.unit in WF)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function Ax(t,e){if(t<0)throw new L("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function pLe(t){if(t.type!=="quantity"||t.unit!==null)throw new L("effect:type-error",`Expected <double>, Actual: ${Ak(t)}`,{term:t})}function hLe(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new L("effect:type-error",`Expected <double> or <percentage>, Actual: ${Ak(t)}`,{term:t})}const WF={deg:1,grad:.9,rad:180/Math.PI,turn:360};function fLe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&WF[t.unit]!=null))throw new L("effect:type-error",`Expected <angle>, Actual: ${Ak(t)}`,{term:t})}const ZF={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function mLe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&ZF[t.unit]!=null))throw new L("effect:type-error",`Expected <length>, Actual: ${Ak(t)}`,{term:t})}function Ol(t){hLe(t);const e=t.value;return Ax(e,t),t.unit==="%"?.01*e:e}function yLe(t){return pLe(t),Ax(t.value,t),t.value}function gLe(t){return fLe(t),t.value*WF[t.unit]||0}function JF(t){return mLe(t),t.value*ZF[t.unit]||0}function vLe(t){switch(t.colorType){case"hex":return XEe(t.value);case"named":return ple(t.value);case"function":return _Le(t.value)}}function ple(t){if(!Vre(t))throw new L("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return QEe(t)}const bLe=/^rgba?/i,wLe=/^hsla?/i;function _Le(t){if(zw(t.parameters,4),bLe.test(t.name))return[Ol(t.parameters[0]),Ol(t.parameters[1]),Ol(t.parameters[2]),t.parameters[3]?Ol(t.parameters[3]):1];if(wLe.test(t.name))return Ure(yLe(t.parameters[0]),Ol(t.parameters[1]),Ol(t.parameters[2]),t.parameters[3]?Ol(t.parameters[3]):1);throw new L("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function ZS(t,e,i){try{return xLe(t)}catch(r){i?.messages?.push(r)}return null}function JS(t,e,i,r){try{const n=SLe(t);ur(i,n,e)}catch(n){r.messages&&r.messages.push(n)}}function SLe(t){const e=dle(t);return e?v3e(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:r})=>({scale:i,value:r.map(n=>n.toJSON())})):null}function xLe(t){if(!t||t.length===0)return null;if($Le(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:EZ(i.value)});return e}return EZ(t)}function $Le(t){const e=t[0];return!!e&&"scale"in e}function EZ(t){if(!t?.length)return"";const e=[];for(const i of t){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[Fc(i,"amount")];break;case"blur":r=[Fc(i,"radius","pt")];break;case"hue-rotate":r=[Fc(i,"angle","deg")];break;case"drop-shadow":r=[Fc(i,"xoffset","pt"),Fc(i,"yoffset","pt"),Fc(i,"blurRadius","pt"),TLe(i,"color")];break;case"bloom":r=[Fc(i,"strength"),Fc(i,"radius","pt"),Fc(i,"threshold")]}const n=`${i.type}(${r.filter(Boolean).join(" ")})`;dle(n),e.push(n)}return e.join(" ")}function Fc(t,e,i){if(t[e]==null)throw new L("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function TLe(t,e){if(t[e]==null)throw new L("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const ELe={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:ui}},"portal-item":{read:!0,write:{layerContainerTypes:ui}}}}},MZ={read:{reader:ZS},write:{allowNull:!0,writer:JS,layerContainerTypes:ui}},MLe={json:{read:!1,write:!1,origins:{"web-map":MZ,"portal-item":MZ}}},hle=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return l([p(ELe)],i.prototype,"blendMode",void 0),l([p(MLe)],i.prototype,"effect",void 0),i=l([M("esri.layers.mixins.BlendLayer")],i),i},ALe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.customParameters=null}};return l([p({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],i.prototype,"customParameters",void 0),i=l([M("esri.layers.mixins.CustomParametersMixin")],i),i},fle=96;function ztt(t,e){const i=t.extent,r=t.width,n=Kr(i?.spatialReference);return i&&r?i.width/r*n*lee*fle:0}function Ftt(t,e){return t/(Kr(e)*lee*fle)}function Vtt(t,e,i){return ILe(t,e)&&kLe(t,i)}function ILe(t,e){return e===0||ro(t,e)||t<e}function kLe(t,e){return e===0||ro(t,e)||t>e}function OLe(t,e){return ro(t,e)?0:(t||Number.POSITIVE_INFINITY)>(e||Number.POSITIVE_INFINITY)?1:-1}const AZ={write:{overridePolicy:(t,e,i)=>({enabled:!i||i.filterMode==="scale"})}};let Td=class extends Re(B){constructor(e){super(e),this.id=tg(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};l([p({type:String,json:{write:!0}})],Td.prototype,"id",void 0),l([p({type:Number,json:AZ})],Td.prototype,"maxScale",void 0),l([p({type:Number,json:AZ})],Td.prototype,"minScale",void 0),l([p({type:String,json:{write:!0}})],Td.prototype,"title",void 0),l([p({type:String,json:{write:!0}})],Td.prototype,"where",void 0),Td=l([M("esri.layers.support.DisplayFilter")],Td);function CLe(t,e){return{...e,filterMode:t.mode}}function qtt(t,e){return mle(t,e).next().value??null}function Gtt(t,e,i){const r=RLe(t);if(r&&(rK(e,r[0])||fD(i,r[1])))return"";const n=Array.from(mle(t,e,i)),s=PLe(n,e,i)?"1=1":n.map(o=>o.where||"1=1").reduce((o,u)=>AN(o,u),"");return s&&s!=="1=1"?s:""}function RLe(t){if(yle(t)==="manual")return null;const e=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:i,maxScale:r}of t.filters)e[0]=Math.max(e[0],YS(i)),e[1]=Math.min(e[1],WA(r));return e}function*mle(t,e,i){if(yle(t)==="manual"){const r=t.filters.find(n=>n.id===t.activeFilterId);r&&(yield r)}else{typeof e=="object"&&(e=e.scale);for(const r of t.filters)DLe(r.minScale,r.maxScale,e,i)&&(yield r)}}function PLe(t,e,i){if(t.length===0)return!0;const r=YS(t.at(0)?.minScale),n=WA(t.at(-1)?.maxScale);if(fD(r,e)||rK(n,i))return!0;for(let s=0;s<t.length-1;s++){const o=t[s],u=t[s+1];if(fD(YS(u.minScale),WA(o.maxScale)))return!0}return!1}function DLe(t,e,i,r){return t=YS(t),i=YS(i),e=WA(e),!(!ro(i,t)&&(r??i)>t)&&!M0e(e,i)&&(r===void 0||!ro(r,t))}function yle(t){return"mode"in t?t.mode:t.filterMode}function YS(t){return t||Number.POSITIVE_INFINITY}function WA(t){return t||0}let km=class extends Re(B){constructor(e){super(e),this.activeFilterId=null,this.filters=new(fe.ofType(Td)),this.mode="manual"}writeFilters(e,i,r,n){const s=e.toArray();this.mode==="scale"&&s.sort((o,u)=>{const d=OLe(u.minScale,o.minScale),h=o.maxScale-u.maxScale;return d===0?h:d}),i[r]=s.map(o=>o.toJSON(n))}write(e,i){return super.write(e,CLe(this,i))}};l([p({type:String,json:{write:{overridePolicy:(t,e,i)=>({enabled:i.filterMode==="manual",isRequired:!0})}}})],km.prototype,"activeFilterId",void 0),l([p({type:fe.ofType(Td),nonNullable:!0,json:{write:!0}})],km.prototype,"filters",void 0),l([pe("filters")],km.prototype,"writeFilters",null),l([p({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],km.prototype,"mode",void 0),km=l([M("esri.layers.support.DisplayFilterInfo")],km);const NLe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return l([p(LLe)],i.prototype,"displayFilterEnabled",void 0),l([p(jLe)],i.prototype,"displayFilterInfo",void 0),i=l([M("esri.layers.mixins.DisplayFilteredLayer")],i),i},LLe={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:t=>!t},write:{layerContainerTypes:ui,writer(t,e,i){ur(i,!t,e)}},origins:{"web-scene":{write:!1,read:!1}}}},jLe={type:km,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:ui},origins:{"web-scene":{write:!1,read:!1}}}},Z4=iMe(),gle=new Map,vle=new Map;async function Htt(t,e,i){if(!t||!i)return!1;if(!e)return!0;const r=new URL(t).host;let n=gle.get(r);if(!n){const s=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");n=(await $t(s,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return n===e}async function IZ(t,e,i=!1){if(!t||!e)return!0;const r=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=vle.get(r)?.entries();if(n){for(const[s,o]of n)if(o.name===e){const u=!o.stack?.hasForwardEdits();if(!u&&i){const[{deleteForwardEdits:d},{default:h}]=await Promise.all([H(()=>import("./deleteForwardEdits-C4GXQra7.js"),[]),H(()=>import("./DeleteForwardEditsParameters-zaadWKRG.js"),[])]),m=await d(r,s,new h({sessionId:Z4,moment:o.moment}));return m.success&&o.stack?.clearForwardEdits(),m.success}return u}}return!0}function s3(t,e){if(!t)return!1;const i=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=vle.get(i)?.entries();if(r){for(const[n,s]of r)if(s.name===e)return s.lockType==="edit"}return!1}const YF=new hte;function ble(t){return YF.on("apply-edits",new WeakRef(t))}function wle(t){return YF.on("update-moment",new WeakRef(t))}function kZ(t,e,i=null,r=!1){const n=ao();return r=e==null||r,YF.emit("apply-edits",{serviceUrl:t,layerId:e,gdbVersion:i,mayReceiveServiceEdits:r,result:n.promise}),n}const _le=Symbol();function Wtt(t){return t!=null&&typeof t=="object"&&_le in t}function h1(t){return t!=null&&typeof t=="object"&&"gdbVersion"in t}function cS(t,e,i){const r=new URL(t).host,n=gle.get(r),s=o=>!o||o===n;return s(e)&&s(i)||e===i}const zLe=t=>{var n;var e;const i=t;let r=(n=class extends i{constructor(...s){super(...s),this[e]=!0,this._applyEditsHandler=o=>{const{serviceUrl:u,layerId:d,gdbVersion:h,mayReceiveServiceEdits:m,result:v}=o,b=u===this.url,_=d!=null&&this.layerId!=null&&d===this.layerId,x=h1(this),$=h1(this)&&cS(u,h,this.gdbVersion);if(!b||x&&!$||!_&&!m)return;const E=v.then(A=>{if(this.lastEditsEventDate=new Date,_&&(A.addedFeatures.length||A.updatedFeatures.length||A.deletedFeatures.length||A.addedAttachments.length||A.updatedAttachments.length||A.deletedAttachments.length))return this.emit("edits",z(A)),A;const O=A.editedFeatures?.find(({layerId:R})=>R===this.layerId);if(O){const{adds:R,updates:P,deletes:j}=O.editedFeatures,Q={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:R?R.map(({attributes:re})=>({objectId:this.objectIdField&&re[this.objectIdField],globalId:this.globalIdField&&re[this.globalIdField]})):[],deletedFeatures:j?j.map(({attributes:re})=>({objectId:this.objectIdField&&re[this.objectIdField],globalId:this.globalIdField&&re[this.globalIdField]})):[],updatedFeatures:P?P.map(({current:{attributes:re}})=>({objectId:this.objectIdField&&re[this.objectIdField],globalId:this.globalIdField&&re[this.globalIdField]})):[],editedFeatures:z(A.editedFeatures),exceededTransferLimit:!1,historicMoment:z(A.historicMoment)};return this.emit("edits",Q),Q}const D={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:z(A.editedFeatures),exceededTransferLimit:!1,historicMoment:z(A.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(u,h,D.historicMoment)&&this.emit("edits",D),D}).then(A=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(u,h,A.historicMoment)&&(this.historicMoment=A.historicMoment),A));this.emit("apply-edits",{result:E})},this._updateMomentHandler=o=>{const{serviceUrl:u,gdbVersion:d,moment:h}=o,m=u===this.url,v=h1(this),b=h1(this)&&cS(u,d,this.gdbVersion),_=h1(this)&&!cS(u,this.gdbVersion,null);m&&v&&b&&_&&"historicMoment"in this&&this.historicMoment!==h&&(this.historicMoment=h)},this.when().then(()=>{this.addHandles(ble(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(wle(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(s,o,u){return"historicMoment"in this&&this.historicMoment!==u&&s3(s,o)}},e=_le,n);return l([p()],r.prototype,"lastEditsEventDate",void 0),r=l([M("esri.layers.mixins.EditBusLayer")],r),r};var J4;const oP=new Be({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),aP=new Be({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Eu=J4=class extends B{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:r,timeExtent:n,objectIds:s,units:o,distance:u}=this;return new Oe({geometry:z(i),objectIds:z(s),spatialRelationship:r,timeExtent:z(n),where:e,units:o,distance:u,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:r,objectIds:n,units:s,distance:o}=this;return new J4({geometry:z(e),objectIds:z(n),spatialRelationship:i,timeExtent:z(r),where:t,units:s,distance:o})}};l([p({type:String,json:{write:!0}})],Eu.prototype,"where",void 0),l([p({types:kw,json:{write:!0}})],Eu.prototype,"geometry",void 0),l([p({type:oP.apiValues,json:{name:"spatialRel",read:{reader:oP.read},write:{allowNull:!1,writer:oP.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Eu.prototype,"spatialRelationship",void 0),l([p({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Eu.prototype,"distance",void 0),l([p({type:[Number],json:{write:!0}})],Eu.prototype,"objectIds",void 0),l([p({type:aP.apiValues,json:{read:aP.read,write:{writer:aP.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Eu.prototype,"units",void 0),l([p({type:qt,json:{write:!0}})],Eu.prototype,"timeExtent",void 0),Eu=J4=l([M("esri.layers.support.FeatureFilter")],Eu);const FLe=Eu;var Y4;const OZ={read:{reader:ZS},write:{writer:JS,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},CZ={read:{reader:ZS},write:{writer:JS,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},RZ={name:"showExcludedLabels",default:!0};let Om=Y4=class extends B{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){const i=super.write(t,e);if(e?.origin){if(i.filter){const r=Object.keys(i.filter);if(r.length>1||r[0]!=="where")return e.messages?.push(new L("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return e.messages?.push(new L("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new Y4({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};l([p({type:FLe,json:{write:{allowNull:!0,writer(t,e,i,r){const n=t?.write({},r);n&&Object.keys(n).length!==0?ur(i,n,e):ur(i,null,e)}}}})],Om.prototype,"filter",void 0),l([p({json:{read:ZS,write:{writer:JS,allowNull:!0},origins:{"web-map":OZ,"portal-item":OZ}}})],Om.prototype,"includedEffect",void 0),l([p({json:{read:ZS,write:{writer:JS,allowNull:!0},origins:{"web-map":CZ,"portal-item":CZ}}})],Om.prototype,"excludedEffect",void 0),l([p({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":RZ,"portal-item":RZ}}})],Om.prototype,"excludedLabelsVisible",void 0),Om=Y4=l([M("esri.layers.support.FeatureEffect")],Om);const PZ={write:{allowNull:!0}},VLe={type:Om,json:{origins:{"web-map":PZ,"portal-item":PZ}}},ULe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return l([p(VLe)],i.prototype,"featureEffect",void 0),i=l([M("esri.layers.mixins.FeatureEffectLayer")],i),i};var Q4;let d2=Q4=class extends B{constructor(t){super(t),this.expression=void 0,this.title=void 0}async collectRequiredFields(t,e){return rs(t,e,null,this.expression)}clone(){return new Q4({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};l([p({type:String,json:{write:{isRequired:!0}}})],d2.prototype,"expression",void 0),l([p({type:String,json:{write:!0}})],d2.prototype,"title",void 0),d2=Q4=l([M("esri.symbols.support.FeatureExpressionInfo")],d2);const DZ=d2,Ik={unknown:1,inches:rt(1,"meters","inches"),feet:rt(1,"meters","feet"),"us-feet":rt(1,"meters","us-feet"),yards:rt(1,"meters","yards"),miles:rt(1,"meters","miles"),"nautical-miles":rt(1,"meters","nautical-miles"),millimeters:rt(1,"meters","millimeters"),centimeters:rt(1,"meters","centimeters"),decimeters:rt(1,"meters","decimeters"),meters:rt(1,"meters","meters"),kilometers:rt(1,"meters","kilometers"),"decimal-degrees":1/Mwe(1,"meters",Ji.radius)};function Ztt(t){return!!t&&Ik[t]!=null}function qLe(t){return 1/(Ik[t]||1)}function GLe(){const t=Object.keys(Ik);return kz(t,"decimal-degrees"),t.sort(),t}const BLe=GLe(),XT=Fr()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),NZ=new Be({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Cu=class extends Re(B){constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,i){return e!=null?e.expression?e:void 0:i.featureExpression&&i.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,i,r,n){i[r]=e.write({},n),e.expression==="0"&&(i.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:i}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||i?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,i){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,i):null}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&Fge(this.featureExpressionInfo,e.featureExpressionInfo)}};l([p({type:DZ,json:{write:!0}})],Cu.prototype,"featureExpressionInfo",void 0),l([se("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Cu.prototype,"readFeatureExpressionInfo",null),l([pe("featureExpressionInfo",{featureExpressionInfo:{type:DZ},"featureExpression.value":{type:[0]}})],Cu.prototype,"writeFeatureExpressionInfo",null),l([p({type:XT.apiValues,nonNullable:!0,json:{type:XT.jsonValues,read:XT.read,write:{writer:XT.write,isRequired:!0}}})],Cu.prototype,"mode",null),l([p({type:Number,json:{write:!0}})],Cu.prototype,"offset",void 0),l([p({type:BLe,json:{type:String,read:NZ.read,write:NZ.write}})],Cu.prototype,"unit",null),Cu=l([M("esri.symbols.support.ElevationInfo")],Cu);let s0=class extends B{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};l([p({type:String,json:{write:!0}})],s0.prototype,"description",void 0),l([p({type:String,json:{write:!0}})],s0.prototype,"label",void 0),l([p()],s0.prototype,"type",void 0),s0=l([M("esri.tables.elements.AttributeTableElement")],s0);const Fw=s0;let p2=class extends Re(Fw){constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};l([p({type:["auto"],json:{write:!0}})],p2.prototype,"displayType",void 0),l([p({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],p2.prototype,"type",void 0),p2=l([M("esri.tables.elements.AttributeTableAttachmentElement")],p2);const Sle=p2;let Cm=class extends Re(Fw){constructor(e){super(e),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};l([p({type:String,json:{read:!1,write:!1}})],Cm.prototype,"description",void 0),l([p({type:String,json:{write:{enabled:!0,isRequired:!0}}})],Cm.prototype,"fieldName",void 0),l([p({type:String,json:{read:!1,write:!1}})],Cm.prototype,"label",void 0),l([p({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],Cm.prototype,"type",void 0),Cm=l([M("esri.tables.elements.AttributeTableFieldElement")],Cm);const xle=Cm;let h2=class extends Re(Fw){constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};l([p({type:Number,json:{type:tt,write:{enabled:!0,isRequired:!0}}})],h2.prototype,"relationshipId",void 0),l([p({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],h2.prototype,"type",void 0),h2=l([M("esri.tables.elements.AttributeTableRelationshipElement")],h2);const $le=h2,Tle={base:Fw,key:"type",typeMap:{attachment:Sle,field:xle,relationship:$le}};function HLe(t){return{typesWithGroup:{base:Fw,key:"type",typeMap:{attachment:Sle,field:xle,group:t,relationship:$le}},typesWithoutGroup:Tle}}let f2=class extends Re(Fw){constructor(e){super(e),this.elements=null,this.type="group"}clone(){return super.clone()}};l([p({types:[Tle],json:{name:"attributeTableElements",write:!0}})],f2.prototype,"elements",void 0),l([p({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],f2.prototype,"type",void 0),f2=l([M("esri.tables.elements.AttributeTableGroupElement")],f2);const WLe=f2;let m2=class extends Re(B){constructor(e){super(e),this.field=null,this.order=null}};l([p({type:String,json:{write:!0}})],m2.prototype,"field",void 0),l([p({type:["asc","desc"],json:{write:!0}})],m2.prototype,"order",void 0),m2=l([M("esri.tables.support.FieldOrder")],m2);const ZLe=m2;var X4;const JLe=HLe(WLe);let y2=X4=class extends B{constructor(t){super(t),this.elements=null,this.orderByFields=null}clone(){return new X4({elements:z(this.elements),orderByFields:z(this.orderByFields)})}};l([p({types:[JLe.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],y2.prototype,"elements",void 0),l([p({type:[ZLe],json:{write:!0}})],y2.prototype,"orderByFields",void 0),y2=X4=l([M("esri.tables.AttributeTableTemplate")],y2);const YLe=y2,QLe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:ui}}},kk={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},Ok={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:ui}}},XLe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Cy}}},KLe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:ui}}},e4e={value:null,type:Cu,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:ui}}};function iit(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const Ele={write:{enabled:!0,layerContainerTypes:ui},read:!0},K4={type:Number,json:{origins:{"web-document":Ele,"portal-item":{write:{layerContainerTypes:ui}}}}},t4e={...K4,json:{...K4.json,origins:{"web-document":{...Ele,write:{enabled:!0,layerContainerTypes:ui,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?e.layerDefinition?.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?VS(e.layerDefinition.drawingInfo.transparency):void 0:VS(e.drawingInfo.transparency)}}},rit={type:Xe,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=Xe.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=we.fromJSON(e.spatialReference)),i}}}},read:!1}},i4e={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},r4e={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:ui}}},n4e={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:ui}}},Mle={json:{write:{ignoreOrigin:!0,layerContainerTypes:ui},origins:{"web-map":{read:!1,write:!1}}}},s4e={type:YLe,json:{name:"attributeTableInfo",write:!0}};let ad=class extends Re(B){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};l([p()],ad.prototype,"creatorField",void 0),l([p()],ad.prototype,"creationDateField",void 0),l([p()],ad.prototype,"editorField",void 0),l([p()],ad.prototype,"editDateField",void 0),l([p()],ad.prototype,"realm",void 0),l([p(wA("dateFieldsTimeReference",!0))],ad.prototype,"timeZone",void 0),ad=l([M("esri.layers.support.EditFieldsInfo")],ad);let Ru=class extends Re(B){constructor(e){super(e)}};l([p({constructOnly:!0,json:{write:!0}})],Ru.prototype,"name",void 0),l([p({constructOnly:!0,json:{write:!0}})],Ru.prototype,"fields",void 0),l([p({constructOnly:!0,json:{write:!0}})],Ru.prototype,"isAscending",void 0),l([p({constructOnly:!0,json:{write:!0}})],Ru.prototype,"indexType",void 0),l([p({constructOnly:!0,json:{write:!0}})],Ru.prototype,"isUnique",void 0),l([p({constructOnly:!0,json:{write:!0}})],Ru.prototype,"description",void 0),Ru=l([M("esri.layers.support.FeatureIndex")],Ru);async function Ale(t,e,i){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=Ile(t));const r=o4e(t),n=t.capabilities.query.supportsPagination;e.start=0,e.num=r;let s=null;for(;;){const o=await t.source.queryFeaturesJSON(e,i);if(s==null?s=o:s.features=s.features.concat(o.features),s.exceededTransferLimit=o.exceededTransferLimit,!n||!o.exceededTransferLimit)break;e.start+=r}return s}function o4e(t){return Ile(t)*a4e(t)}function a4e(t){return t.capabilities.query.maxRecordCount||2e3}function Ile(t){return t.capabilities.query.supportsMaxRecordCountFactor?Oe.MAX_MAX_RECORD_COUNT_FACTOR:1}var ej;let g2=ej=class extends B{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new ej({minValue:this.minValue,maxValue:this.maxValue})}};l([p({type:Number,json:{write:!0}})],g2.prototype,"minValue",void 0),l([p({type:Number,json:{write:!0}})],g2.prototype,"maxValue",void 0),g2=ej=l([M("esri.renderers.support.AuthoringInfoClassBreakInfo")],g2);var tj;let Ah=tj=class extends B{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new tj({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:z(this.classBreakInfos)})}};l([p({type:String,json:{write:!0}})],Ah.prototype,"field",void 0),l([p({type:String,json:{write:!0}})],Ah.prototype,"normalizationField",void 0),l([p({type:String,json:{write:!0}})],Ah.prototype,"label",void 0),l([p({type:[g2],json:{write:!0}})],Ah.prototype,"classBreakInfos",void 0),Ah=tj=l([M("esri.renderers.support.AuthoringInfoFieldInfo")],Ah);var ij;let o0=ij=class extends B{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new ij({label:this.label,value:this.value,size:this.size})}};l([p({type:String,json:{write:!0}})],o0.prototype,"label",void 0),l([p({type:Number,json:{write:!0}})],o0.prototype,"size",void 0),l([p({type:Number,json:{write:!0}})],o0.prototype,"value",void 0),o0=ij=l([M("esri.renderers.support.AuthoringInfoSizeStop")],o0);const l4e=o0;var rj;const KT=new Be({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),eE=new Be({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),LZ={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},jZ=["high-to-low","above-and-below","centered-on","extremes"],zZ=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size","spike"])],FZ=["seconds","minutes","hours","days","months","years"],u4e=["circle","diamond","hexagon-flat","hexagon-pointy","square"],c4e=["triangle-closed-outline","triangle-gradient-fill-closed","triangle-gradient-fill-closed-outline","triangle-gradient-fill-open","triangle-gradient-fill-open-outline","triangle-open-outline","triangle-solid-fill-closed","triangle-solid-fill-closed-outline","triangle-solid-fill-open","triangle-solid-fill-open-outline"];let qr=rj=class extends B{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}get normalizationField(){return this.theme==="reference-size"||this.theme==="spike"?this._get("normalizationField"):null}set normalizationField(t){this._set("normalizationField",t)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(t){this._set("referenceSizeScale",t)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(t){this._set("referenceSizeSymbolStyle",t)}get spikeSymbolStyle(){return this.theme==="spike"?this._get("spikeSymbolStyle"):null}set spikeSymbolStyle(t){this._set("spikeSymbolStyle",t)}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get sizeStops(){return this.theme==="reference-size"||this.theme==="spike"?this._get("sizeStops"):null}set sizeStops(t){this._set("sizeStops",t)}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new rj({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,spikeSymbolStyle:this.spikeSymbolStyle,sizeStops:z(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};l([p({types:LZ,json:{write:!0}})],qr.prototype,"endTime",void 0),l([Ct("endTime")],qr.prototype,"castEndTime",null),l([p({type:String,json:{write:!0}})],qr.prototype,"field",void 0),l([p({type:Number,json:{write:!0}})],qr.prototype,"maxSliderValue",void 0),l([p({type:Number,json:{write:!0}})],qr.prototype,"minSliderValue",void 0),l([p({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],qr.prototype,"normalizationField",null),l([p({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],qr.prototype,"referenceSizeScale",null),l([p({type:u4e,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],qr.prototype,"referenceSizeSymbolStyle",null),l([p({type:c4e,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],qr.prototype,"spikeSymbolStyle",null),l([p({types:LZ,json:{write:!0}})],qr.prototype,"startTime",void 0),l([Ct("startTime")],qr.prototype,"castStartTime",null),l([p({type:[l4e],json:{origins:{"web-scene":{write:!1}},write:!0}})],qr.prototype,"sizeStops",null),l([p({type:KT.apiValues,value:null,json:{type:KT.jsonValues,read:KT.read,write:KT.write}})],qr.prototype,"style",null),l([p({type:zZ,value:null,json:{type:zZ,origins:{"web-scene":{type:jZ,write:{writer:(t,e)=>{jZ.includes(t)&&(e.theme=t)}}}},write:!0}})],qr.prototype,"theme",null),l([p({type:eE.apiValues,json:{type:eE.jsonValues,read:eE.read,write:eE.write}})],qr.prototype,"type",void 0),l([p({type:FZ,json:{type:FZ,write:!0}})],qr.prototype,"units",void 0),qr=rj=l([M("esri.renderers.support.AuthoringInfoVisualVariable")],qr);const d4e=qr;let tb=class extends B{constructor(e){super(e),this.type=null}};l([p({readOnly:!0,json:{read:!1,write:!0}})],tb.prototype,"type",void 0),tb=l([M("esri.rest.support.ColorRamp")],tb);var nj;let Dd=nj=class extends tb{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new nj({fromColor:z(this.fromColor),toColor:z(this.toColor),algorithm:this.algorithm})}};l([Ae({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Dd.prototype,"algorithm",void 0),l([p({type:Ie,json:{type:[tt],write:{isRequired:!0}}})],Dd.prototype,"fromColor",void 0),l([p({type:Ie,json:{type:[tt],write:{isRequired:!0}}})],Dd.prototype,"toColor",void 0),l([p({type:["algorithmic"],json:{write:{isRequired:!0}}})],Dd.prototype,"type",void 0),Dd=nj=l([M("esri.rest.support.AlgorithmicColorRamp")],Dd);var sj;let Ed=sj=class extends tb{constructor(t){super(t),this.colorRamps=null,this.type="multipart",this.weights=void 0}writeColorRamps(t,e,i,r){const n=t?.map(o=>o.toJSON(r)),{weights:s}=this;if(n&&s?.length&&n.length===s?.length){const o=100/s.reduce((d,h)=>d+h);let u=0;n.forEach((d,h)=>{d.start=u,u+=s[h]*o,d.stop=u})}e.colorRamps=n}readWeights(t,e){const i=e.colorRamps?.map(({start:r,stop:n})=>r==null||n==null?-1:n-r);if(!i?.some(r=>r<0))return i}clone(){return new sj({colorRamps:z(this.colorRamps)})}};l([p({type:[Dd],json:{write:{isRequired:!0}}})],Ed.prototype,"colorRamps",void 0),l([pe("colorRamps")],Ed.prototype,"writeColorRamps",null),l([p({type:["multipart"],json:{write:{isRequired:!0}}})],Ed.prototype,"type",void 0),l([p({type:[Number]})],Ed.prototype,"weights",void 0),l([se("weights",["colorRamps"])],Ed.prototype,"readWeights",null),Ed=sj=l([M("esri.rest.support.MultipartColorRamp")],Ed);const p4e={key:"type",base:tb,typeMap:{algorithmic:Dd,multipart:Ed}};function h4e(t){return t?.type?t.type==="algorithmic"?Dd.fromJSON(t):t.type==="multipart"?Ed.fromJSON(t):null:null}var oj;const nm=new Be({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),tE=new Be({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),VZ=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],f4e=["high-to-low","above-and-below","above","below"],m4e=["flow-line","wave-front"],y4e=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Pi=oj=class extends B{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?h4e(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){return new oj({classificationMethod:this.classificationMethod,colorRamp:z(this.colorRamp),fadeRatio:z(this.fadeRatio),fields:this.fields?.slice(),field1:z(this.field1),field2:z(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};l([p({type:nm.apiValues,value:null,json:{type:nm.jsonValues,read:nm.read,write:nm.write,origins:{"web-document":{default:"manual",type:nm.jsonValues,read:nm.read,write:nm.write}}}})],Pi.prototype,"classificationMethod",null),l([p({types:p4e,json:{write:!0}})],Pi.prototype,"colorRamp",void 0),l([se("colorRamp")],Pi.prototype,"readColorRamp",null),l([p({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Pi.prototype,"fadeRatio",void 0),l([p({type:[String],value:null,json:{write:!0}})],Pi.prototype,"fields",null),l([p({type:Ah,value:null,json:{write:!0}})],Pi.prototype,"field1",null),l([p({type:Ah,value:null,json:{write:!0}})],Pi.prototype,"field2",null),l([p({type:m4e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Pi.prototype,"flowTheme",null),l([p({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Pi.prototype,"focus",null),l([p({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Pi.prototype,"isAutoGenerated",void 0),l([p({type:Number,value:null,json:{type:tt,write:!0}})],Pi.prototype,"numClasses",null),l([p({type:VZ,json:{type:VZ,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Pi.prototype,"lengthUnit",void 0),l([p({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Pi.prototype,"maxSliderValue",void 0),l([p({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Pi.prototype,"minSliderValue",void 0),l([p({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Pi.prototype,"statistics",null),l([p({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Pi.prototype,"standardDeviationInterval",null),l([p({type:tE.apiValues,value:null,json:{type:tE.jsonValues,read:tE.read,write:tE.write}})],Pi.prototype,"type",null),l([p({type:[d4e],json:{write:!0}})],Pi.prototype,"visualVariables",void 0),l([p({type:y4e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Pi.prototype,"univariateSymbolStyle",null),l([p({type:f4e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Pi.prototype,"univariateTheme",null),Pi=oj=l([M("esri.renderers.support.AuthoringInfo")],Pi);const lP=new Be({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let Uo=class extends B{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};l([p({type:Pi,json:{write:!0}})],Uo.prototype,"authoringInfo",void 0),l([p({type:lP.apiValues,readOnly:!0,json:{type:lP.jsonValues,read:!1,write:{writer:lP.write,ignoreOrigin:!0,isRequired:!0}}})],Uo.prototype,"type",void 0),Uo=l([M("esri.renderers.Renderer")],Uo);let v2=class extends Re(B){constructor(){super(...arguments),this.showLegend=null,this.title=null}};l([p({type:Boolean,json:{write:!0}})],v2.prototype,"showLegend",void 0),l([p({type:String,json:{write:!0}})],v2.prototype,"title",void 0),v2=l([M("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],v2);const kle=v2,uP=new Be({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Gn=class extends B{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(ie.getLogger(this).error(".field: field must be a string value"),null):cx(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};l([p()],Gn.prototype,"index",void 0),l([p({type:uP.apiValues,readOnly:!0,json:{read:uP.read,write:{writer:uP.write,isRequired:!0}}})],Gn.prototype,"type",void 0),l([p({type:String,json:{write:!0}})],Gn.prototype,"field",void 0),l([Ct("field")],Gn.prototype,"castField",null),l([p({type:String,json:{write:!0}})],Gn.prototype,"valueExpression",void 0),l([p({type:String,json:{write:!0}})],Gn.prototype,"valueExpressionTitle",void 0),l([p({readOnly:!0})],Gn.prototype,"arcadeRequired",null),l([p({type:kle,json:{write:!0}})],Gn.prototype,"legendOptions",void 0),Gn=l([M("esri.renderers.visualVariables.VisualVariable")],Gn);var aj;let Rm=aj=class extends B{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new aj({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};l([p({type:Ie,json:{type:[tt],write:{isRequired:!0}}})],Rm.prototype,"color",void 0),l([p({type:String,json:{write:!0}})],Rm.prototype,"label",void 0),l([p({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Rm.prototype,"value",void 0),l([pe("value")],Rm.prototype,"writeValue",null),Rm=aj=l([M("esri.renderers.visualVariables.support.ColorStop")],Rm);const g4e=Rm;var lj;let Ih=lj=class extends Gn{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new lj({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};l([p({readOnly:!0})],Ih.prototype,"cache",null),l([p({type:["color"],json:{type:["colorInfo"]}})],Ih.prototype,"type",void 0),l([p({type:String,json:{write:!0}})],Ih.prototype,"normalizationField",void 0),l([p({type:[g4e],json:{write:!0}})],Ih.prototype,"stops",null),Ih=lj=l([M("esri.renderers.visualVariables.ColorVariable")],Ih);var uj;let hh=uj=class extends B{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return VS(e.transparency)}writeOpacity(t,e,i){e[i]=ck(t)}clone(){return new uj({label:this.label,opacity:this.opacity,value:this.value})}};l([p({type:String,json:{write:!0}})],hh.prototype,"label",void 0),l([p({type:Number,json:{type:tt,write:{target:"transparency",isRequired:!0}}})],hh.prototype,"opacity",void 0),l([se("opacity",["transparency"])],hh.prototype,"readOpacity",null),l([pe("opacity")],hh.prototype,"writeOpacity",null),l([p({type:Number,json:{write:{isRequired:!0}}})],hh.prototype,"value",void 0),hh=uj=l([M("esri.renderers.visualVariables.support.OpacityStop")],hh);const v4e=hh;var cj;let Nd=cj=class extends Gn{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new cj({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};l([p({readOnly:!0})],Nd.prototype,"cache",null),l([p({type:["opacity"],json:{type:["transparencyInfo"]}})],Nd.prototype,"type",void 0),l([p({type:String,json:{write:!0}})],Nd.prototype,"normalizationField",void 0),l([p({type:[v4e],json:{write:!0}})],Nd.prototype,"stops",null),Nd=cj=l([M("esri.renderers.visualVariables.OpacityVariable")],Nd);var dj;let kh=dj=class extends Gn{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){return new dj({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions?.clone()})}};l([p({readOnly:!0})],kh.prototype,"cache",null),l([p({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],kh.prototype,"axis",void 0),l([p({type:["rotation"],json:{type:["rotationInfo"]}})],kh.prototype,"type",void 0),l([p({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],kh.prototype,"rotationType",void 0),kh=dj=l([M("esri.renderers.visualVariables.RotationVariable")],kh);function b4e(t){return gt(t)}var pj;let Cl=pj=class extends B{constructor(t){super(t),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new pj({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};l([p({type:String,json:{write:!0}})],Cl.prototype,"label",void 0),l([p({type:Number,cast:gt,json:{write:{isRequired:!0}}})],Cl.prototype,"size",void 0),l([p({type:Number,json:{write:{isRequired:!0}}})],Cl.prototype,"value",void 0),l([p({type:Boolean,json:{write:!1}})],Cl.prototype,"useMinValue",void 0),l([p({type:Boolean,json:{write:!1}})],Cl.prototype,"useMaxValue",void 0),Cl=pj=l([M("esri.renderers.visualVariables.support.SizeStop")],Cl);let o3=class extends kle{constructor(){super(...arguments),this.customValues=null}};l([p({type:[Number],json:{write:!0}})],o3.prototype,"customValues",void 0),o3=l([M("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],o3);const w4e=o3;function D0(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function By(t){return t!=null&&!isNaN(t)&&isFinite(t)}function Ole(t){return t.valueExpression?"expression":t.field&&typeof t.field=="string"?"field":"unknown"}function _4e(t,e){const i=e||Ole(t),r=t.valueUnit||"unknown";return i==="unknown"?"constant":t.stops?"stops":t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?"clamped-linear":r==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?"proportional":"additive":"identity":"real-world-size"}const Cle=()=>ie.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),Ck=t=>Cle().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${t}`),Rk=()=>Cle().error("Use of arcade expressions requires an arcade context"),UZ=new Ti,a3=Math.PI,Rle=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function Ple(t,e,i){const r="visualVariables"in t?t.visualVariables?.find(x=>x.type==="color"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void Ck("ColorVariable");const n=typeof e=="number",s=n?null:e,o=s?.attributes;let u=n?e:null;const d=r.field,{ipData:h,hasExpression:m}=r.cache;let v=r.cache.compiledFunc;if(!d&&!m){const x=r.stops;return x&&x[0]&&x[0].color}if(typeof u!="number")if(m){if(i?.arcade==null)return void Rk();const x={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},$=i.arcade.arcadeUtils,E=$.getViewInfo(x),A=$.createExecContext(s,E,i.timeZone);if(!v){const O=$.createSyntaxTree(r.valueExpression);v=$.createFunction(O),r.cache.compiledFunc=v}u=$.executeFunction(v,A)}else o&&(u=o[d]);const b=r.normalizationField,_=o!=null&&b!=null?parseFloat(o[b]):void 0;if(u!=null&&(!b||n||!isNaN(_)&&_!==0)){By(_)&&!n&&(u/=_);const x=QF(u,h);if(x){const $=x[0],E=x[1],A=$===E?r.stops[$].color:Ie.blendColors(r.stops[$].color,r.stops[E].color,x[2],i?.color);return new Ie(A)}}}function Dle(t,e,i){const r="visualVariables"in t?t.visualVariables?.find(x=>x.type==="opacity"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void Ck("OpacityVariable");const n=typeof e=="number",s=n?null:e,o=s?.attributes;let u=n?e:null;const d=r.field,{ipData:h,hasExpression:m}=r.cache;let v=r.cache.compiledFunc;if(!d&&!m){const x=r.stops;return x&&x[0]&&x[0].opacity}if(typeof u!="number")if(m){if(i?.arcade==null)return void Rk();const x={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},$=i.arcade.arcadeUtils,E=$.getViewInfo(x),A=$.createExecContext(s,E,i.timeZone);if(!v){const O=$.createSyntaxTree(r.valueExpression);v=$.createFunction(O),r.cache.compiledFunc=v}u=$.executeFunction(v,A)}else o&&(u=o[d]);const b=r.normalizationField,_=o!=null&&b!=null?parseFloat(o[b]):void 0;if(u!=null&&(!b||n||!isNaN(_)&&_!==0)){By(_)&&!n&&(u/=_);const x=QF(u,h);if(x){const $=x[0],E=x[1];if($===E)return r.stops[$].opacity;{const A=r.stops[$].opacity;return A+(r.stops[E].opacity-A)*x[2]}}}}function Nle(t,e,i){const r="visualVariables"in t?t.visualVariables?.find(_=>_.type==="rotation"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void Ck("RotationVariable");const n=r.axis||"heading",s=n==="heading"&&r.rotationType==="arithmetic"?90:0,o=n==="heading"&&r.rotationType==="arithmetic"?-1:1,u=typeof e=="number"?null:e,d=u?.attributes,h=r.field,{hasExpression:m}=r.cache;let v=r.cache.compiledFunc,b=null;if(!h&&!m)return b;if(m){if(i?.arcade==null)return void Rk();const _={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},x=i.arcade.arcadeUtils,$=x.getViewInfo(_),E=x.createExecContext(u,$,i.timeZone);if(!v){const A=x.createSyntaxTree(r.valueExpression);v=x.createFunction(A),r.cache.compiledFunc=v}b=x.executeFunction(v,E)}else d&&(b=d[h]);return b=typeof b!="number"||isNaN(b)?null:s+o*b,b}function S4e(t,e,i){const r=typeof e=="number",n=r?null:e,s=n?.attributes;let o=r?e:null;const{isScaleDriven:u}=t.cache;let d=t.cache.compiledFunc;if(u){const m=i?.scale,v=i?.view;o=m==null||v==="3d"?x4e(t):m}else if(!r)switch(t.inputValueType){case"expression":{if(i?.arcade==null)return void Rk();const m={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,b=v.getViewInfo(m),_=v.createExecContext(n,b,i.timeZone);if(!d){const x=v.createSyntaxTree(t.valueExpression);d=v.createFunction(x),t.cache.compiledFunc=d}o=v.executeFunction(d,_);break}case"field":s&&(o=s[t.field]);break;case"unknown":o=null}if(!By(o))return null;if(r||!t.normalizationField)return o;const h=s?parseFloat(s[t.normalizationField]):null;return By(h)&&h!==0?o/h:null}function x4e(t){let e=null,i=null;const r=t.stops;return r?(e=r[0].value,i=r[r.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function Pk(t,e,i){const r="visualVariables"in t?t.visualVariables?.find(s=>s.type==="size"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void Ck("SizeVariable");const n=jle(S4e(r,e,i),r,e,i,r.cache.ipData);return n==null||isNaN(n)?void 0:n}function oo(t,e,i){return t==null?null:D0(t)?Pk(t,e,i):By(t)?t:null}function Lle(t,e,i){return By(i)&&t>i?i:By(e)&&t<e?e:t}function $4e(t,e,i,r){const n=oo(e.minSize,i,r)||e.minDataValue;return t==null&&n==null?null:(t??0)+(n??0)}function T4e(t,e,i){const r=t.stops;let n=r?.length&&r[0].size;return n==null&&(n=t.minSize),oo(n,e,i)}function E4e(t,e,i,r){const n=oo(e.minSize,i,r);if(t==null)return n;const{minDataValue:s,maxDataValue:o}=e;if(s==null||o==null)return null;const u=(t-s)/(o-s),d=oo(e.maxSize,i,r),h=r?.shape;if(t<=s)return n;if(t>=o)return d;if(n==null||d==null)return null;if(e.scaleBy==="area"&&h){const m=h==="circle",v=m?a3*(n/2)**2:n*n,b=v+u*((m?a3*(d/2)**2:d*d)-v);return m?2*Math.sqrt(b/a3):Math.sqrt(b)}return n+u*(d-n)}function M4e(t,e,i,r){const n=oo(e.minSize,i,r);if(t==null||n==null)return n;const s=r?.shape,{minDataValue:o}=e;if(o==null)return null;const u=t/o,d=oo(e.maxSize,i,r);let h=null;return h=s==="circle"?2*Math.sqrt(u*(n/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(u*n**2):u*n,Lle(h,n,d)}function A4e(t,e,i,r,n){if(t==null)return null;const[s,o,u]=QF(t,n);if(s===o)return oo(e.stops?.[s].size,i,r);{const d=oo(e.stops?.[s].size,i,r),h=oo(e.stops?.[o].size,i,r);return d==null||h==null?null:d+(h-d)*u}}function I4e(t,e,i,r){const n=(r?.resolution??1)*Ik[e.valueUnit],s=oo(e.minSize,i,r),o=oo(e.maxSize,i,r),{valueRepresentation:u}=e;if(t==null)return s;let d=null;return d=u==="area"?2*Math.sqrt(t/a3)/n:u==="radius"||u==="distance"?2*t/n:t/n,Lle(d,s,o)}function jle(t,e,i,r,n){switch(e.transformationType){case"additive":return $4e(t,e,i,r);case"constant":return T4e(e,i,r);case"clamped-linear":return E4e(t,e,i,r);case"proportional":return M4e(t,e,i,r);case"stops":return A4e(t,e,i,r,n);case"real-world-size":return I4e(t,e,i,r);case"identity":return t;case"unknown":return null}}function k4e(t,e,i){const{isScaleDriven:r}=t.cache;if(!(r&&i==="3d"||e))return null;const n={scale:e,view:i};let s=oo(t.minSize,UZ,n),o=oo(t.maxSize,UZ,n);if(s!=null||o!=null){if(s>o){const u=o;o=s,s=u}return{minSize:s,maxSize:o}}}function O4e(t,e,i){if(!t.visualVariables)return;const r=[],n=[],s=[],o=[],u=[];for(const d of t.visualVariables)switch(d.type){case"color":n.push(d);break;case"opacity":s.push(d);break;case"rotation":u.push(d);break;case"size":o.push(d)}return n.forEach(d=>{const h=Ple(d,e,i);r.push({variable:d,value:h})}),s.forEach(d=>{const h=Dle(d,e,i);r.push({variable:d,value:h})}),u.forEach(d=>{const h=Nle(d,e,i);r.push({variable:d,value:h})}),o.forEach(d=>{const h=Pk(d,e,i);r.push({variable:d,value:h})}),r}function QF(t,e){if(!e)return;let i=0,r=e.length-1;return e.some((n,s)=>t<n?(r=s,!0):(i=s,!1)),[i,r,(t-e[i])/(e[r]-e[i])]}function C4e(t,e,i){const r=["proportional","proportional","proportional"];for(const n of t){const s=n.useSymbolValue?"symbol-value":Pk(n,e,i)??"proportional";switch(n.axis){case"width":r[0]=s;break;case"depth":r[1]=s;break;case"height":r[2]=s;break;case"width-and-depth":r[0]=s,r[1]=s;break;case"all":case void 0:case null:r[0]=s,r[1]=s,r[2]=s;break;default:n.axis}}return r}const dit=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:C4e,getColor:Ple,getOpacity:Dle,getRotationAngle:Nle,getSize:Pk,getSizeForValue:jle,getSizeFromNumberOrVariable:oo,getSizeRangeAtScale:k4e,getVisualVariableValues:O4e,viewScaleRE:Rle},Symbol.toStringTag,{value:"Module"}));var hj;const iE=new Be({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),fj=new Be({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function qZ(t){if(t!=null)return typeof t=="string"||typeof t=="number"?b4e(t):t.type==="size"?D0(t)?t:(delete(t={...t}).type,new At(t)):void 0}function GZ(t,e,i){if(typeof t!="object")return t;const r=new At;return r.read(t,i),r}let At=hj=class extends Gn{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&Rle.test(this.valueExpression)}}set index(t){D0(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),D0(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return Ole(this)}set maxDataValue(t){t&&this.stops&&(ie.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(ie.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return qZ(t)}readMaxSize(t,e,i){return GZ(t,e,i)}set minDataValue(t){t&&this.stops&&(ie.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(ie.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return qZ(t)}readMinSize(t,e,i){return GZ(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(ie.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return _4e(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,r){if(t==="$view.scale"){if(r?.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;r.messages.push(new L("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:r}))}}else e[i]=t}readValueUnit(t){return t?fj.read(t):null}clone(){return new hj({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:D0(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:D0(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone()})}flipSizes(){if(this.transformationType==="clamped-linear"){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType==="stops"){const t=this.stops;if(!t)return this;const e=t.map(r=>r.size).reverse(),i=t.length;for(let r=0;r<i;r++)t[r].size=e[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops?.map(t=>t.value||0)}};l([p({readOnly:!0})],At.prototype,"cache",null),l([p({type:iE.apiValues,json:{type:iE.jsonValues,origins:{"web-map":{read:!1}},read:iE.read,write:iE.write}})],At.prototype,"axis",void 0),l([p()],At.prototype,"index",null),l([p({type:String,readOnly:!0})],At.prototype,"inputValueType",null),l([p({type:w4e,json:{write:!0}})],At.prototype,"legendOptions",void 0),l([p({type:Number,value:null,json:{write:!0}})],At.prototype,"maxDataValue",null),l([p({type:Number,value:null,json:{write:!0}})],At.prototype,"maxSize",null),l([Ct("maxSize")],At.prototype,"castMaxSize",null),l([se("maxSize")],At.prototype,"readMaxSize",null),l([p({type:Number,value:null,json:{write:!0}})],At.prototype,"minDataValue",null),l([p({type:Number,value:null,json:{write:!0}})],At.prototype,"minSize",null),l([Ct("minSize")],At.prototype,"castMinSize",null),l([se("minSize")],At.prototype,"readMinSize",null),l([p({type:String,json:{write:!0}})],At.prototype,"normalizationField",void 0),l([p({readOnly:!0})],At.prototype,"arcadeRequired",null),l([p({type:String})],At.prototype,"scaleBy",void 0),l([p({type:[Cl],value:null,json:{write:!0}})],At.prototype,"stops",null),l([p({type:["outline"],json:{write:!0}})],At.prototype,"target",void 0),l([p({type:String,readOnly:!0})],At.prototype,"transformationType",null),l([p({type:["size"],json:{type:["sizeInfo"]}})],At.prototype,"type",void 0),l([p({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],At.prototype,"useSymbolValue",void 0),l([p({type:String,json:{write:!0}})],At.prototype,"valueExpression",void 0),l([se("valueExpression",["valueExpression","expression"])],At.prototype,"readValueExpression",null),l([pe("web-scene","valueExpression")],At.prototype,"writeValueExpressionWebScene",null),l([p({type:["radius","diameter","area","width","distance"],json:{write:!0}})],At.prototype,"valueRepresentation",void 0),l([p({type:fj.apiValues,json:{write:fj.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],At.prototype,"valueUnit",void 0),l([se("valueUnit")],At.prototype,"readValueUnit",null),At=hj=l([M("esri.renderers.visualVariables.SizeVariable")],At);const R4e={color:Ih,size:At,opacity:Nd,rotation:kh},P4e=new Be({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),D4e=/^\[([^\]]+)\]$/i;let l3=class extends _e{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e?.filter(i=>!!i),e?.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,r)=>{let n=null;return n=i.target===r.target?0:i.target?1:-1,n});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,r){const{rotationExpression:n,rotationType:s}=i,o=n?.match(D4e),u=o?.[1];if(u&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:s,field:u})),e)return e.map(d=>{const h=P4e.read(d.type),m=R4e[h];m||(ie.getLogger(this).warn(`Unknown variable type: ${h}`),r?.messages&&r.messages.push(new Jo("visual-variable:unsupported",`visualVariable of type '${h}' is not supported`,{definition:d,context:r})));const v=new m;return v.read(d,r),v})}writeVariables(e,i){const r=[];for(const n of e){const s=n.toJSON(i);s&&r.push(s)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};l([p()],l3.prototype,"visualVariables",null),l3=l([M("esri.renderers.visualVariables.VisualVariableFactory")],l3);const N4e={base:Gn,key:"type",typeMap:{opacity:Nd,color:Ih,rotation:kh,size:At}},Vw=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this._vvFactory=new l3}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,n,s){return this._vvFactory.readVariables(r,n,s)}writeVisualVariables(r,n,s,o){n[s]=this._vvFactory.writeVariables(r,o)}get arcadeRequiredForVisualVariables(){return this.visualVariables?.some(({arcadeRequired:r})=>r)??!1}hasVisualVariables(r,n){return r?this.getVisualVariablesForType(r,n).length>0:this.getVisualVariablesForType("size",n).length>0||this.getVisualVariablesForType("color",n).length>0||this.getVisualVariablesForType("opacity",n).length>0||this.getVisualVariablesForType("rotation",n).length>0}getVisualVariablesForType(r,n){return this.visualVariables?.filter(s=>s.type===r&&(typeof n=="string"?s.target===n:n!==!1||!s.target))??[]}async collectVVRequiredFields(r,n){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const o of s)o&&(o.field&&ts(r,n,o.field),o.normalizationField&&ts(r,n,o.normalizationField),o.valueExpression&&(L4e(o.valueExpression,r,n)||await rs(r,n,null,o.valueExpression)))}};return l([p({types:[N4e],value:null,json:{write:!0}})],i.prototype,"visualVariables",null),l([se("visualVariables",["visualVariables","rotationType","rotationExpression"])],i.prototype,"readVisualVariables",null),l([pe("visualVariables")],i.prototype,"writeVisualVariables",null),i=l([M("esri.renderers.mixins.VisualVariablesMixin")],i),i};function L4e(t,e,i){const r=G3e(t);return r!=null&&(ts(e,i,r),!0)}const XF=[252,146,31,255],j4e=[153,153,153,255],z4e={type:"esriSMS",style:"esriSMSCircle",size:6,color:XF,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},F4e={type:"esriSLS",style:"esriSLSSolid",width:.75,color:XF},V4e={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},U4e={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},q4e={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},G4e={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},B4e={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},ZA=wr.fromJSON(z4e),KF=Bi.fromJSON(F4e),zle=Ks.fromJSON(V4e),H4e=Ut.fromJSON(U4e);function hit(t){if(t==null)return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return ZA;case"polyline":return KF;case"polygon":case"extent":return zle}return null}const fit=wr.fromJSON(q4e),mit=Bi.fromJSON(G4e),yit=Ks.fromJSON(B4e),W4e=Ss.fromSimpleMarkerSymbol(ZA),Z4e=Gl.fromSimpleLineSymbol(KF),J4e=Ua.fromSimpleFillSymbol(zle),Y4e=new Zu({symbolLayers:new fe([new Wn({material:{color:XF},edges:new dse({size:Ja(1),color:new Ie(j4e)})})])}),Q4e=new Gl({symbolLayers:new fe([new vs({material:{color:new Ie([0,0,0])},size:Ja(1)})])}),X4e=new Ua({symbolLayers:new fe([new Wn({outline:{color:new Ie([0,0,0]),size:Ja(1)}})])});function git(t){if(t==null)return null;switch(t.type){case"mesh":return Y4e;case"point":case"multipoint":return W4e;case"polyline":return Z4e;case"polygon":case"extent":return J4e}return null}const BZ="#useCIMFallbackSymbology()",lv={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function K4e(t,e=lv){if(!t)return{symbol:null};const{retainId:i=lv.retainId,ignoreDrivers:r=lv.ignoreDrivers,hasLabelingContext:n=lv.hasLabelingContext,retainCIM:s=lv.retainCIM,cimFallbackEnabled:o=lv.cimFallbackEnabled}=e;let u=null;if(Rse(t))u=t.clone();else if(t.type==="web-style")u=t.clone();else if(t.type==="cim"){const d=t.data?.symbol?.type;switch(d){case"CIMPointSymbol":u=s?t.clone():Ss.fromCIMSymbol(t);break;case"CIMLineSymbol":o&&(u=Q4e.clone(),e?.logWarning?.(BZ,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(u=X4e.clone(),e?.logWarning?.(BZ,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!u)return{error:new L("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${d||"unknown"}' is unsupported in 3D`,{symbol:t})}}else if(t instanceof Bi)u=Gl.fromSimpleLineSymbol(t);else if(t instanceof wr)u=Ss.fromSimpleMarkerSymbol(t);else if(t instanceof gs)u=Ss.fromPictureMarkerSymbol(t);else if(t instanceof Ks)u=e.geometryType&&e.geometryType==="mesh"?Zu.fromSimpleFillSymbol(t):Ua.fromSimpleFillSymbol(t);else{if(!(t instanceof Ut))return{error:new L("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};u=n?Il.fromTextSymbol(t):Ss.fromTextSymbol(t)}return i&&u&&u.type!=="cim"&&(u.id=t.id),!r||u.type==="cim"||u instanceof An||u.symbolLayers.forEach(d=>d.ignoreDrivers=!0),{symbol:u}}function JA(t,e,i,r){const n=Fle(t,{},{context:r,isLabelSymbol:!1});n!=null&&ur(i,n,e)}function HZ(t,e,i,r){const n=Fle(t,{},{context:r,isLabelSymbol:!0});n!=null&&(e[i]=n)}function WZ(t){return Rse(t)||t instanceof An}function eje(t){return t?.type==="polygon-3d"||t?.type==="line-3d"}function Fle(t,e,i){if(t==null)return null;const{context:r,isLabelSymbol:n}=i,s=r?.origin,o=r?.messages;if(s==="web-scene"&&!WZ(t)){const u=K4e(t,{retainCIM:!0,hasLabelingContext:n});return u.symbol!=null?u.symbol.write(e,r):(o?.push(new L("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:r,error:u.error})),null)}return gN(r?.layer)&&eje(t)?(o?.push(new L("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported on layers of type '${r?.layer?.declaredClass}'.`,{symbol:t,context:r})),null):(s==="web-map"||s==="portal-item"&&!gN(r?.layer))&&WZ(t)?(o?.push(new L("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:r})),null):t.write(e,r)}function vit(t,e){return FIe(t,null,e)}const Dk={types:Pse,json:{write:{writer:JA},origins:{"web-scene":{types:kH,write:{writer:JA},read:{reader:Sw({types:kH})}}}}},e8=Dz({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},Dk),t8={types:{base:lr,key:"type",typeMap:{"simple-fill":zo.typeMap["simple-fill"],"picture-fill":zo.typeMap["picture-fill"],"polygon-3d":zo.typeMap["polygon-3d"],cim:zo.typeMap.cim}},json:{write:{writer:JA},origins:{"web-scene":{type:Ua,write:{writer:JA}}}}},u3={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t?.toString()}}}};var mj;let xs=mj=class extends Vw(Uo){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.symbols.map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return this.symbols.reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new mj({description:this.description,label:this.label,symbol:z(this.symbol),visualVariables:z(this.visualVariables),authoringInfo:z(this.authoringInfo)})}};l([p({type:String,json:{write:!0}})],xs.prototype,"description",void 0),l([p({type:String,json:{write:!0}})],xs.prototype,"label",void 0),l([p(e8)],xs.prototype,"symbol",void 0),l([Ae({simple:"simple"})],xs.prototype,"type",void 0),xs=mj=l([M("esri.renderers.SimpleRenderer")],xs);const tje=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function yj(t){return t instanceof _e}function ZZ(t){return t instanceof fe?Object.keys(t.items):yj(t)?As(t).keys():t?Object.keys(t):[]}function rE(t,e){return t instanceof fe?t.items[e]:t[e]}function ije(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function dS(t){return t?t.declaredClass:null}function Vle(t,e){const i=t.diff;if(i&&typeof i=="function")return i(t,e);const r=ZZ(t),n=ZZ(e);if(r.length===0&&n.length===0)return;if(!r.length||!n.length||ije(t,e))return{type:"complete",oldValue:t,newValue:e};const s=n.filter(v=>!r.includes(v)),o=r.filter(v=>!n.includes(v)),u=r.filter(v=>n.includes(v)&&rE(t,v)!==rE(e,v)).concat(s,o).sort(),d=dS(t);if(d&&tje.has(d)&&u.length)return{type:"complete",oldValue:t,newValue:e};let h;const m=yj(t)&&yj(e);for(const v of u){const b=rE(t,v),_=rE(e,v);let x;if((m||typeof b!="function"&&typeof _!="function")&&b!==_&&(b!=null||_!=null)){if(i&&i[v]&&typeof i[v]=="function")x=i[v]?.(b,_);else if(b instanceof Date&&_ instanceof Date){if(b.getTime()===_.getTime())continue;x={type:"complete",oldValue:b,newValue:_}}else x=typeof b=="object"&&typeof _=="object"&&dS(b)===dS(_)?Vle(b,_):{type:"complete",oldValue:b,newValue:_};x!=null&&(h!=null?h.diff[v]=x:h={type:"partial",diff:{[v]:x}})}}return h}function bit(t,e){if(t==null)return!1;const i=e.split(".");let r=t;for(const n of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const s=r.diff[n];if(!s)return!1;r=s}}return!0}function rje(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&dS(t)!==dS(e)?{type:"complete",oldValue:t,newValue:e}:Vle(t,e)}function nE(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const i of e.added)if(!nE(i))return!1;for(const i of e.removed)if(!nE(i))return!1;for(const i of e.changed)if(!nE(i))return!1;return!0}case"partial":for(const e in t.diff)if(!nE(t.diff[e]))return!1;return!0}}var gj;const nje=Fr()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let b2=gj=class extends Re(B){static from(t){return bw(gj,t)}constructor(t){super(t),this.title=null,this.order=null}};l([p({type:String,json:{write:!0}})],b2.prototype,"title",void 0),l([Ae(nje)],b2.prototype,"order",void 0),b2=gj=l([M("esri.renderers.support.RendererLegendOptions")],b2);const i8=b2;let jl=class extends Re(B){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};l([p(u3)],jl.prototype,"value",void 0),l([p(u3)],jl.prototype,"value2",void 0),l([p(u3)],jl.prototype,"value3",void 0),jl=l([M("esri.renderers.support.UniqueValue")],jl);let Md=class extends Re(B){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(r=>new jl({value:r})):i==="object"?e[0]instanceof jl?e:e.map(r=>new jl(r)):null}};l([p({type:String,json:{write:!0}})],Md.prototype,"description",void 0),l([p({type:String,json:{write:!0}})],Md.prototype,"label",void 0),l([p(Dk)],Md.prototype,"symbol",void 0),l([p({type:[jl],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new jl({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const r of t){const n=[r.value,r.value2,r.value3].filter(is).map(s=>s.toString());i.push(n)}e.values=i}}}})],Md.prototype,"values",void 0),l([Ct("values")],Md.prototype,"castValues",null),Md=l([M("esri.renderers.support.UniqueValueClass")],Md);let ry=class extends Re(B){constructor(e){super(e),this.heading=null,this.classes=null}};l([p({type:String,json:{write:!0}})],ry.prototype,"heading",void 0),l([p({type:[Md],json:{write:{isRequired:!0}}})],ry.prototype,"classes",void 0),ry=l([M("esri.renderers.support.UniqueValueGroup")],ry);var vj;let Nl=vj=class extends B{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new vj({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol?.toJSON());return`${this.value}.${t}`}};l([p({type:String,json:{write:!0}})],Nl.prototype,"description",void 0),l([p({type:String,json:{write:!0}})],Nl.prototype,"label",void 0),l([p(e8)],Nl.prototype,"symbol",void 0),l([p(u3)],Nl.prototype,"value",void 0),Nl=vj=l([M("esri.renderers.support.UniqueValueInfo")],Nl);const JZ=new Map;async function sje(t,e){try{return{data:(await uje(t,e)).data,baseUrl:fbe(t),styleUrl:t}}catch(i){return Dl(i),null}}function oje(t,e,i){const r=e.portal!=null?e.portal:de.getDefault();let n;const s=`${r.url} - ${r.user?.username} - ${t}`,o=JZ.get(s);if(o)return o;const u=aje(t,r,i).then(d=>(n=d,d.fetchData())).then(d=>({data:d,baseUrl:n.itemUrl??"",styleName:t}));return JZ.set(s,u),u}function aje(t,e,i){return e.load(i).then(()=>{const r=new sr({disableExtraQuery:!0,query:`owner:${YZ} AND type:${QZ} AND typekeywords:"${t}"`});return e.queryItems(r,i)}).then(({results:r})=>{let n=null;const s=t.toLowerCase();if(r&&Array.isArray(r)){for(const o of r)if(o.typeKeywords?.some(d=>d.toLowerCase()===s)&&o.type===QZ&&o.owner===YZ){n=o;break}}if(!n)throw new L("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return n.load(i)})}function lje(t,e,i){return t?.styleUrl!=null?sje(t.styleUrl,i):t?.styleName!=null?oje(t.styleName,e,i):Promise.reject(new L("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function xit(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function $it(t,e){for(const i of e)switch(i){case"cim":if(t.cimRef)return{format:i,url:encodeURI(t.cimRef)};break;case"web-gltf-basisu":{const r=cP(t,"gltf_basisu");if(r)return{format:i,url:r};break}case"web-gltf":{const r=cP(t,"gltf");if(r)return{format:i,url:r};break}case"web":{const r=cP(t,"gltf");if(r)return{format:"web-gltf",url:r};if(t.webRef)return{format:i,url:encodeURI(t.webRef)};break}}}function cP(t,e){if(!q("enable-feature:force-wosr"))return t.formatInfos?.find(i=>i.type===e)?.href}function uje(t,e){const i={responseType:"json",query:{f:"json"},...e};return $t(Zl(t),i)}const YZ="esri_en",QZ="Style",Tit="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var w2;const XZ="uvInfos-watcher",KZ="uvGroups-watcher",cje=",",dje=cr(Nl);function pje(t){const{field1:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueInfos:s,valueExpression:o}=t,u=!(!e||!i);return[{classes:(s??[]).map(d=>{const{symbol:h,label:m,value:v,description:b}=d,[_,x,$]=u?v?.toString()?.split(n||"")||[]:[v],E=[];return(e||o)&&E.push(_),i&&E.push(x),r&&E.push($),{symbol:h,label:m,values:[E],description:b}})}]}function uv(t){return t!=null&&t!==""&&(typeof t!="string"||t.trim()!==""&&t.toLowerCase()!=="<null>")||(t=null),t+""}let pi=w2=class extends Vw(Uo){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let r=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<i.length;s++){const o=e.find(u=>u.value===i[s].value);o?rje(o,i[s])?(n.changed.push({type:"complete",oldValue:o,newValue:i[s]}),r=!0):n.unchanged.push({oldValue:o,newValue:i[s]}):(n.added.push(i[s]),r=!0)}for(let s=0;s<e.length;s++)i.find(o=>o.value===e[s].value)||(n.removed.push(e[s]),r=!0);return r?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:cx(t)}writeField(t,e,i,r){typeof t=="string"?e[i]=t:r?.messages?r.messages.push(new L("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):ie.getLogger(this).error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||de.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const r=Zy(e.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(t,e,i,r){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=Oy(t.styleUrl,r))}set uniqueValueGroups(t){this.styleOrigin?ie.getLogger(this).error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?ie.getLogger(this).error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){if(this.styleOrigin)return void ie.getLogger(this).error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?dje(t):new Nl({value:t,symbol:Dse(e)}),this.uniqueValueInfos?.push(i),this._valueInfoMap[uv(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void ie.getLogger(this).error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e)for(let i=0;i<e.length;i++){const r=e[i];if(String(r.value)===String(t)){delete this._valueInfoMap[uv(t)],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return this.valueExpression&&e?.arcade==null&&(i={...i,arcade:await Vy()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){return this.valueExpression&&e?.arcade==null?void ie.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used"):this._getUniqueValueInfo(t,e)?.symbol||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&i?.arcade==null){const n=await Vy(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}return this._getUniqueValueInfo(t,i)?.symbol||this.defaultSymbol}get symbols(){const t=[];if(this._isInfosSource)for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);else for(const e of this.uniqueValueGroups??[])for(const i of e.classes??[])i.symbol&&t.push(i.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=this.uniqueValueInfos?.reduce((r,n)=>r+n.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new w2({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:z(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:z(this.visualVariables),legendOptions:z(this.legendOptions),authoringInfo:z(this.authoringInfo),backgroundFillSymbol:z(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=z(this.uniqueValueInfos),i=z(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(z(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map(r=>r.collectRequiredFields(t,e)),rs(t,e,null,this.valueExpression)];ts(t,e,this.field),ts(t,e,this.field2),ts(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return lje(this.styleOrigin,{portal:this.portal}).then(t=>{const e=[];return this._valueInfoMap={},t?.data&&Array.isArray(t.data.items)&&t.data.items.forEach(i=>{const r=new An({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==t.data.defaultItem||(this.defaultSymbol=r,this._isDefaultSymbolDerived=!0);const n=new Nl({value:i.name,symbol:r});e.push(n),this._valueInfoMap[uv(i.name)]=n}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",cje)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[uv(e.value)]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(XZ);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(be(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,n)=>{r!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,XZ)}}_watchUniqueValueGroups(){this.removeHandles(KZ);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(be(()=>({classes:i.classes}),(r,n)=>{r!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])e.push(be(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(n,s)=>{n!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,KZ)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:r,fieldDelimiter:n,uniqueValueGroups:s,valueExpression:o}=this;if(!e&&!o)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const u=!(!e||!i);for(const d of s)for(const h of d.classes??[]){const{symbol:m,label:v,values:b,description:_}=h;for(const x of b??[]){const{value:$,value2:E,value3:A}=x,O=[$];i&&O.push(E),r&&O.push(A);const D=u?O.join(n||""):O[0]??void 0;t.push(new Nl({symbol:m,label:v,value:D,description:_}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:r,fieldDelimiter:n,uniqueValueInfos:s}=this;if(!e&&!r||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!e||!i),u=s.map(h=>{const{symbol:m,label:v,value:b,description:_}=h,[x,$,E]=o?b?.toString()?.split(n||"")||[]:[b];return new Md({symbol:m,label:v,description:_,values:[new jl({value:x,value2:$,value3:E})]})}),d=[new ry({classes:u})];t&&Object.freeze(d),this._set("uniqueValueGroups",d),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:o}=e??{};let u=this._cache.compiledFunc;const d=s.arcadeUtils;if(!u){const m=d.createSyntaxTree(this.valueExpression);u=d.createFunction(m),this._cache.compiledFunc=u}const h=d.executeFunction(u,d.createExecContext(t,d.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),o));return this._valueInfoMap[uv(h)]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let r;if(this.field2){const n=this.field2,s=this.field3,o=[];e&&o.push(i[e]),n&&o.push(i[n]),s&&o.push(i[s]),r=o.join(this.fieldDelimiter||"")}else e&&(r=i[e]);return this._valueInfoMap[uv(r)]}static fromPortalStyle(t,e){const i=new w2(e?.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",e?.portal||de.getDefault());const r=i.populateFromStyle();return r.catch(n=>{ie.getLogger(this.prototype).error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",n)}),r}static fromStyleUrl(t,e){const i=new w2(e?.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const r=i.populateFromStyle();return r.catch(n=>{ie.getLogger(this.prototype).error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),r}};l([p({readOnly:!0})],pi.prototype,"_cache",null),l([Ae({uniqueValue:"unique-value"})],pi.prototype,"type",void 0),l([p(t8)],pi.prototype,"backgroundFillSymbol",void 0),l([p({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],pi.prototype,"field",null),l([Ct("field")],pi.prototype,"castField",null),l([pe("field")],pi.prototype,"writeField",null),l([p({type:String,value:null,json:{write:!0}})],pi.prototype,"field2",null),l([p({type:String,value:null,json:{write:!0}})],pi.prototype,"field3",null),l([p({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],pi.prototype,"orderByClassesEnabled",void 0),l([p({type:String,value:null,json:{write:!0}})],pi.prototype,"valueExpression",null),l([p({type:String,json:{write:!0}})],pi.prototype,"valueExpressionTitle",void 0),l([p({type:i8,json:{write:!0}})],pi.prototype,"legendOptions",void 0),l([p({type:String,json:{write:!0}})],pi.prototype,"defaultLabel",void 0),l([p(Dz({...Dk},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],pi.prototype,"defaultSymbol",null),l([p({type:String,value:null,json:{write:!0}})],pi.prototype,"fieldDelimiter",null),l([p({type:de,readOnly:!0})],pi.prototype,"portal",void 0),l([se("portal",["styleName"])],pi.prototype,"readPortal",null),l([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],pi.prototype,"styleOrigin",void 0),l([se("styleOrigin",["styleName","styleUrl"])],pi.prototype,"readStyleOrigin",null),l([pe("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],pi.prototype,"writeStyleOrigin",null),l([p({type:[ry],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||pje(e)).map(r=>ry.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],pi.prototype,"uniqueValueGroups",null),l([p({type:[Nl],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],pi.prototype,"uniqueValueInfos",null),pi=w2=l([M("esri.renderers.UniqueValueRenderer")],pi);var bj,Mb;let Gr=(Mb=class extends B{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10}clone(){return new bj(z({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}},bj=Mb,Mb);l([p({type:[String],json:{write:!0}})],Gr.prototype,"attachmentTypes",void 0),l([p({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Gr.prototype,"attachmentsWhere",void 0),l([p({type:Boolean,json:{write:!0}})],Gr.prototype,"cacheHint",void 0),l([p({type:[String],json:{write:!0}})],Gr.prototype,"keywords",void 0),l([p({type:[String],json:{write:!0}})],Gr.prototype,"globalIds",void 0),l([p({json:{write:!0}})],Gr.prototype,"name",void 0),l([p({type:Number,json:{read:{source:"resultRecordCount"}}})],Gr.prototype,"num",void 0),l([p({type:[Number],json:{write:!0}})],Gr.prototype,"objectIds",void 0),l([p({type:[String],json:{write:!0}})],Gr.prototype,"orderByFields",void 0),l([p({type:Boolean,json:{default:!1,write:!0}})],Gr.prototype,"returnMetadata",void 0),l([p({type:[Number],json:{write:!0}})],Gr.prototype,"size",void 0),l([p({type:Number,json:{read:{source:"resultOffset"}}})],Gr.prototype,"start",void 0),l([pe("start"),pe("num")],Gr.prototype,"writeStart",null),l([p({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Gr.prototype,"where",void 0),Gr=bj=l([M("esri.rest.support.AttachmentQuery")],Gr),Gr.from=cr(Gr);const Ule=Fr()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),eJ="percent-of-total",tJ="field",Eit=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let r=this._get("normalizationType");const n=!!this.normalizationField,s=this.normalizationTotal!=null;return n||s?(r=n&&tJ||s&&eJ||null,n&&s&&ie.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):r!==tJ&&r!==eJ||(r=null),r}set normalizationType(r){this._set("normalizationType",r)}};return l([p({type:String,json:{name:"parameters.normalizationField",write:!0}})],i.prototype,"normalizationField",void 0),l([p({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],i.prototype,"normalizationMaxValue",void 0),l([p({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],i.prototype,"normalizationMinValue",void 0),l([p({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],i.prototype,"normalizationTotal",void 0),l([Ae(Ule,{name:"parameters.normalizationType"})],i.prototype,"normalizationType",null),i=l([M("esri.rest.support.NormalizationBinParametersMixin")],i),i};var wj,Ab;let Si=(Ab=class extends B{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(i.definitionExpression="1=1")}clone(){return new wj(z({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}},wj=Ab,Ab);l([p({type:Boolean,json:{write:!0}})],Si.prototype,"cacheHint",void 0),l([p({type:kl,json:{write:!0}})],Si.prototype,"dynamicDataSource",void 0),l([p({type:String,json:{write:!0}})],Si.prototype,"gdbVersion",void 0),l([p({type:Number,json:{write:!0}})],Si.prototype,"geometryPrecision",void 0),l([p({type:Date})],Si.prototype,"historicMoment",void 0),l([pe("historicMoment")],Si.prototype,"_writeHistoricMoment",null),l([p({type:Number,json:{write:!0}})],Si.prototype,"maxAllowableOffset",void 0),l([p({json:{write:!0}})],Si.prototype,"objectIds",void 0),l([p({type:[String],json:{write:!0}})],Si.prototype,"orderByFields",void 0),l([p({type:[String],json:{write:!0}})],Si.prototype,"outFields",void 0),l([p({type:we,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Si.prototype,"outSpatialReference",void 0),l([p({json:{write:!0}})],Si.prototype,"relationshipId",void 0),l([p({type:Number,json:{read:{source:"resultOffset"}}})],Si.prototype,"start",void 0),l([pe("start"),pe("num")],Si.prototype,"writeStart",null),l([p({type:Number,json:{read:{source:"resultRecordCount"}}})],Si.prototype,"num",void 0),l([p({json:{write:!0}})],Si.prototype,"returnGeometry",void 0),l([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Si.prototype,"returnM",void 0),l([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Si.prototype,"returnZ",void 0),l([p({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Si.prototype,"where",void 0),Si=wj=l([M("esri.rest.support.RelationshipQuery")],Si),Si.from=cr(Si);const Mit=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Si}},Symbol.toStringTag,{value:"Module"})),_j=new Be({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function hje(t,e,i,r){const n=await $f(t);if(await r8(t,e,r),!n.addAttachment)throw new L(r,"Layer source does not support addAttachment capability");return n.addAttachment(e,i)}function r8(t,e,i){const{attributes:r}=e,{objectIdField:n}=t;return t.capabilities?.data?.supportsAttachment?e?r?n&&r[n]?Promise.resolve():Promise.reject(new L(i,`feature is missing the identifying attribute ${n}`)):Promise.reject(new L(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new L(i,"A feature is required to add/delete/update attachments")):Promise.reject(new L(i,"this layer doesn't support attachments"))}async function fje(t,e,i,r,n){const s=await $f(t);if(await r8(t,e,n),!s.updateAttachment)throw new L(n,"Layer source does not support updateAttachment capability");return s.updateAttachment(e,i,r)}async function mje(t,e,i){const{applyEdits:r}=await H(()=>import("./editingSupport-BcFhOI3B.js"),[]),n=await t.load();let s=i;return n.type==="feature"&&n.infoFor3D&&e.deleteFeatures!=null&&n.globalIdField!=null&&(s={...s,globalIdToObjectId:await Lje(n,e.deleteFeatures,n.globalIdField)}),r(n,n.source,e,i)}async function yje(t,e,i){const{uploadAssets:r}=await H(()=>import("./editingSupport-BcFhOI3B.js"),[]),n=await t.load();return r(n,n.source,e,i)}async function gje(t,e,i,r){const n=await $f(t);if(await r8(t,e,r),!n.deleteAttachments)throw new L(r,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(e,i)}async function vje(t,e,i){const r=(await t.load({signal:e?.signal})).source;if(!r.fetchRecomputedExtents)throw new L(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)}async function bje(t,e,i,r){e=Gr.from(e),await t.load();const n=t.source,s=t.capabilities;if(!s?.data?.supportsAttachment)throw new L(r,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:u,globalIds:d,num:h,size:m,start:v,where:b}=e;if(!s?.operations?.supportsQueryAttachments&&(o?.length>0||d?.length>0||m?.length>0||h||v||b))throw new L(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(u?.length||d?.length||b))throw new L(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!n.queryAttachments)throw new L(r,"Layer source does not support queryAttachments capability",e);return!s?.attachment?.supportsOrderByFields&&e.orderByFields?.length&&((e=e.clone()).orderByFields=null),n.queryAttachments(e)}async function wje(t,e,i,r){const n=await $f(t);if(!n.queryObjectIds)throw new L(r,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(Oe.from(e)??t.createQuery(),i)}async function _je(t,e,i,r){const n=await $f(t);if(!n.queryFeatureCount)throw new L(r,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(Oe.from(e)??t.createQuery(),i)}async function Sje(t,e,i,r){const n=await $f(t);if(!n.queryExtent)throw new L(r,"Layer source does not support queryExtent capability");return n.queryExtent(Oe.from(e)??t.createQuery(),i)}async function xje(t,e,i,r){const n=await $f(t);if(!n.queryRelatedFeatures)throw new L(r,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(Si.from(e),i)}async function $je(t,e,i,r){const n=await $f(t);if(!n.queryRelatedFeaturesCount)throw new L(r,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(Si.from(e),i)}async function Tje(t){const e=t.source;if(e?.refresh)try{const{dataChanged:i,updates:r}=await e.refresh();if(r!=null&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await Sne(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function Eje(t){const e=new Oe;e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,e.outFields=["*"],e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null;const i=t.capabilities?.query;i&&(e.compactGeometryEnabled=i.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference);const r=t.capabilities?.data;r?.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),r?.supportsM&&t.returnM!=null&&(e.returnM=t.returnM);const{timeOffset:n,timeExtent:s}=t;return e.timeExtent=n!=null&&s!=null?s.offset(-n.value,n.unit):s||null,e}function qle(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function Gle(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function Mje(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}function Aje(t,e,i,r){const n=i?.feature,s=!!t.subtypes?.length;if(s&&!i?.excludeImpliedDomains){const d=kje(t,e);if(d)return d}const o=s&&Ije(t,n);if(o){const d=o?.domains?.[e];return d?.type==="inherited"?r:d}const u=Wle(t.types,t.typeIdField,n);if(u){const d=u.domains&&u.domains[e];if(d&&d?.type!=="inherited")return d}if(r)return r;if(!i?.excludeImpliedDomains){const d=Oje(t,e);if(d)return d}return null}function Ije(t,e){const{subtypes:i,subtypeField:r}=t;if(!e?.attributes||!i?.length||!r)return null;const n=e.attributes[r];return n==null?null:i.find(s=>s.code===n)}function kje(t,e){const{fieldsIndex:i,subtypeField:r}=t,{name:n,type:s}=i.get(e)??{};if(!n)return null;if((r&&i.get(r)?.name)===n&&t.subtypes?.length){const o=t.subtypes.map(u=>new ty({code:Ble(u.code,s),name:u.name}));if(o?.length)return new Uh({codedValues:o})}return null}function Oje(t,e){const{fieldsIndex:i}=t,{name:r,type:n}=i.get(e)??{};if(!r)return null;if(("typeIdField"in t?i.get(t.typeIdField)?.name:null)===r&&"types"in t&&t.types?.length){const s=t.types.map(o=>new ty({code:Ble(o.id,n),name:o.name}));return new Uh({codedValues:s})}return null}function Ble(t,e){return e?Lne({type:e})&&typeof t=="number"?`${t}`:vAe({type:e})&&typeof t=="string"?Number.parseInt(t,10):t:t}async function $f(t){return(await t.load()).source}async function Ait(t,e){if(!pt)return;const i=pt.findCredential(t);if(i)return i.userId;let r;try{const n=await aF(t,e);n&&(r=await pt.checkSignInStatus(`${n}/sharing`))}catch{}return r?r.userId:null}async function Hle(t,e){if(!pt||pt.findCredential(t))return;let i;try{const r=await aF(t,e);r&&(i=await pt.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=e!=null?e.signal:null;await pt.getCredential(t,{signal:r})}catch{}}async function Cje(t,e,i){const r=t.parsedUrl?.path;r&&t.authenticationTriggerEvent===e&&await Hle(r,i)}async function Iit(t){const e=t.parsedUrl?.path;e&&Rje(t)&&await Hle(e)}function Rje(t){return Pje(t)&&("serviceDefinitionExpression"in t&&YA(t.serviceDefinitionExpression)||"definitionExpression"in t&&YA(t.definitionExpression))}function Pje(t){return!(!zre(t)||!t.capabilities?.query.supportsCurrentUser)}function YA(t){return!!t?.toLowerCase().includes("current_user")}function Dje(t){return!c3(t)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const dP=Sw({types:Pse});function n8(t,e){if(t.defaultSymbol)return t.types?.length?new pi({defaultSymbol:dP(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(i=>({id:i.id,symbol:dP(i.symbol,i,e)}))}):new xs({symbol:dP(t.defaultSymbol,t,e)})}function Nje(t){let e=t.sourceJSON?.cacheMaxAge;if(!e)return!1;const i=t.editingInfo?.lastEditDate?.getTime();return i==null||(e*=1e3,Date.now()-i<e)}async function Lje(t,e,i){if(e==null)return null;const r=[],{objectIdField:n}=t;if(e.forEach(h=>{let m=null;if("attributes"in h){const{attributes:v}=h;m={globalId:v[i],objectId:v[n]!=null&&v[n]!==-1?v[n]:null}}else m={globalId:h.globalId,objectId:h.objectId!=null&&h.objectId!==-1?h.objectId:null};m.globalId!=null&&(m.objectId!=null&&m.objectId!==-1||r.push(m.globalId))}),r.length===0)return null;const s=t.createQuery();s.where=r.map(h=>`${i}='${h}'`).join(" OR "),s.returnGeometry=!1,s.outFields=[n,i],s.cacheHint=!1;const o=await HTe(Ale(t,s));if(!o.ok)return null;const u=new Map,d=o.value.features;for(const h of d){const m=h.attributes[i],v=h.attributes[n];m!=null&&v!=null&&v!==-1&&u.set(rMe(m),v)}return u}function Wle(t,e,i){if(!e||!i||!t)return null;const r=i.getAttribute(e);return r==null?null:t.find(n=>{const{id:s}=n;return s!=null&&s.toString()===r.toString()})??null}function c3(t){return t.sourceJSON?.isMultiServicesView||jje(t)}function jje(t){return!!t.sourceJSON?.capabilities?.toLowerCase().split(",").map(e=>e.trim()).includes("map")}function zje(t,e,i){const r=e?.queryAttributeBins;if(!e?.operations?.supportsQueryBins||!r)throw new L(i,"Layer source does not support binning");switch(t.binParameters.type){case"auto-interval":if(!r.supportsAutoInterval)throw new L(i,"Layer source does not support auto-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!iJ(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new L(i,"Layer source does not support normalization binning");break;case"date":if(!r.supportsDate)throw new L(i,"Layer source does not support date binning");if(t.binParameters.snapToData&&!r.supportsSnapToData)throw new L(i,"Layer source does not support snapToData binning");if(t.binParameters.returnFullIntervalBin&&!r.supportsReturnFullIntervalBin)throw new L(i,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!r.supportsFixedBoundaries)throw new L(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!r.supportsFixedInterval)throw new L(i,"Layer source does not support fixed-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!iJ(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new L(i,"Layer source does not support normalization binning")}if(t.binParameters.stackBy&&!r.supportsStackBy)throw new L(i,"Layer source does not support stackBy binning");if(t.binParameters.splitBy&&!r.supportsSplitBy)throw new L(i,"Layer source does not support splitBy binning");if(t.binParameters.firstDayOfWeek&&!r.supportsFirstDayOfWeek)throw new L(i,"Layer source does not support firstDayOfWeek binning");const n=r?.supportedStatistics;if(t.outStatistics&&n){const s=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:o}of t.outStatistics){const u=s.get(o);if(u&&!n[u])throw new L(i,`Layer source does not support ${o} statistic type`)}}}function iJ(t,e){return t!=null&&!!e?.[Ule.toJSON(t)]}let a0=class extends Re(B){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};l([p({type:String,json:{read:{source:"shapeAreaFieldName"}}})],a0.prototype,"shapeAreaField",void 0),l([p({type:String,json:{read:{source:"shapeLengthFieldName"}}})],a0.prototype,"shapeLengthField",void 0),l([p({type:String,json:{read:t=>Nwe.read(t)||Lwe.read(t)}})],a0.prototype,"units",void 0),a0=l([M("esri.layers.support.GeometryFieldsInfo")],a0);var Sj;let l0=Sj=class extends B{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new fe}clone(){return new Sj({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};l([p({type:String,json:{write:{isRequired:!0}}})],l0.prototype,"floorField",void 0),l([p({json:{read:!1,write:!1}})],l0.prototype,"viewAllMode",void 0),l([p({json:{read:!1,write:!1}})],l0.prototype,"viewAllLevelIds",void 0),l0=Sj=l([M("esri.layers.support.LayerFloorInfo")],l0);function Fje(t){const{nonStandardUrlAllowed:e=!1,separator:i}=t??{},r=z(XLe),n=r.json?.write;return typeof n=="object"&&n&&(n.writer=function(s,o,u,d){Ibe(this,s,i,o,d)}),{...r,set:function(s){if(s==null)return void this._set("url",s);const o=Abe({layer:this,url:s,nonStandardUrlAllowed:e,logger:ie.getLogger(this)});this._set("url",o.url),o.layerId!=null&&this._set("layerId",o.layerId)}}}function Vje(t,e){const{separator:i}=e??{},r=Xr(t.url);return r!=null&&(t.dynamicDataSource!=null?r.path=Iy(r.path,"dynamicLayer"):t.layerId!=null&&(r.path=Iy(r.path,i??"",t.layerId.toString()))),r}const rJ=new Be({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),nJ=new Be({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let ko=class extends Re(B){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};l([p({json:{read:rJ.read,write:rJ.write}})],ko.prototype,"cardinality",void 0),l([p({json:{name:"catalogID"}})],ko.prototype,"catalogId",void 0),l([p({json:{read:!0,write:!0}})],ko.prototype,"composite",void 0),l([p({json:{read:!0,write:!0}})],ko.prototype,"id",void 0),l([p({json:{read:!0,write:!0}})],ko.prototype,"keyField",void 0),l([p({json:{read:!0,write:!0}})],ko.prototype,"keyFieldInRelationshipTable",void 0),l([p({json:{read:!0,write:!0}})],ko.prototype,"name",void 0),l([p({json:{read:!0,write:!0}})],ko.prototype,"relatedTableId",void 0),l([p({json:{read:!0,write:!0}})],ko.prototype,"relationshipTableId",void 0),l([p({json:{read:nJ.read,write:nJ.write}})],ko.prototype,"role",void 0),ko=l([M("esri.layers.support.Relationship")],ko);const Uje=[["binary","application/octet-stream","bin",""]];function Cit(t,e){return Qle(e.name,t?.supportedFormats??[])!=null}function Rit(t,e){if(!t)return!1;const i=qje(e,t.supportedFormats??[]);return i!=null&&t.editFormats.includes(i)}function Zle(t,e){return o8(Wje(t,e))}function Jle(t,e){return o8(Qle(t,e))}function Pit(t,e){return Xle(Hje(t,e))}function qje(t,e){return Jle(t.name,e)??Zle(t.type,e)}function Nk(t,e,i){return Zle(t,i)??Jle(e,i)}function Yle({supportedFormats:t}){return Nk("model/gltf-binary","glb",t)}function Dit(t){const e=Yle(t);return e!=null&&t.editFormats.includes(e)}function Gje({supportedFormats:t}){return Nk("model/gltf+json","gltf",t)}function Bje(t){if(!t)return null;const e=Yle(t),i=Gje(t);let r=null;for(const n of t.queryFormats){if(n===e)return n;n===i&&(r=n)}return r}function Nit({supportedFormats:t}){return Nk("application/esri3do-SR_world","wld",t)}function Lit({supportedFormats:t}){return Nk("application/esri3do-SR_prj","prj",t)}function s8(t){return[...Uje,...t]}function Hje(t,e){return s8(e).find(i=>o8(i)===t)}function Wje(t,e){const i=t.toLowerCase();return s8(e).find(r=>Xle(r)===i)}function Qle(t,e){const i=t.toLowerCase();return s8(e).find(r=>Zje(r).some(n=>i.endsWith(n)))}function o8(t){return t?.[0]}function Xle(t){return t?.[1].toLowerCase()}function Zje(t){return t?.[2].split(",").map(e=>e.toLowerCase())??[]}function jit(t){return t.tables?.find(e=>e.role==="assetMaps")}function xe(t,e,i){return!!Kle(t,e,i)}function u0(t,e,i){return Kle(t,e,i)}function Kle(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}const Jje={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function Yje(t){const e=t?.supportedSpatialAggregationStatistics?.map(i=>i.toLowerCase());return{envelope:!!e?.includes("envelopeaggregate"),centroid:!!e?.includes("centroidaggregate"),convexHull:!!e?.includes("convexhullaggregate")}}function Ix(t,e){return!!t?.supportedOperationsWithCacheHint?.map(r=>r.toLowerCase())?.includes(e.toLowerCase())}function Qje(t){const e=t?.supportedStatisticTypes?.map(i=>i.toLowerCase());return{count:!!e?.includes("count"),sum:!!e?.includes("sum"),min:!!e?.includes("min"),max:!!e?.includes("max"),avg:!!e?.includes("avg"),var:!!e?.includes("var"),stddev:!!e?.includes("stddev"),percentileContinuous:!!e?.includes("percentile_cont"),percentileDiscrete:!!e?.includes("percentile_disc"),envelope:!!e?.includes("envelopeaggregate"),centroid:!!e?.includes("centroidaggregate"),convexHull:!!e?.includes("convexhullaggregate")}}function Xje(t){const e=t?.supportedNormalizationTypes?.map(i=>i.toLowerCase());return{field:!!e?.includes("field"),log:!!e?.includes("log"),naturalLog:!!e?.includes("naturallog"),percentOfTotal:!!e?.includes("percentoftotal"),squareRoot:!!e?.includes("squareroot")}}function eue(t,e){return{analytics:Kje(t),attachment:eze(t),data:tze(t),metadata:ize(t),operations:rze(t.capabilities,t,e),query:nze(t,e),queryAttributeBins:aze(t),queryRelated:sze(t),queryTopFeatures:oze(t),editing:lze(t)}}function Kje(t){return{supportsCacheHint:Ix(t.advancedQueryCapabilities,"queryAnalytics")}}function eze(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Ix(t.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:xe(t.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:xe(t,"supportsAttachmentsResizing",!1),supportsTypeWildcard:xe(t.advancedQueryCapabilities,"supportsQueryAttachmentWithTypeWildcard",!1)};return e&&Array.isArray(e)&&e.forEach(r=>{const n=Jje[r.name];n&&(i[n]=!!r.isEnabled)}),i}function tze(t){return{isVersioned:xe(t,"isDataVersioned",!1),isBranchVersioned:xe(t,"isDataBranchVersioned",!1),supportsAttachment:xe(t,"hasAttachments",!1),supportsM:xe(t,"hasM",!1),supportsZ:xe(t,"hasZ",!1)}}function ize(t){return{supportsAdvancedFieldProperties:xe(t,"supportsFieldDescriptionProperty",!1)}}function rze(t,e,i){const r=t?.toLowerCase().split(",").map(b=>b.trim())??[],n=i?sc(i):null,s=r.includes(n?.serverType==="MapServer"?"data":"query"),o=r.includes("editing")&&!e.datesInUnknownTimezone&&e.uniqueIdInfo?.OIDFieldContainsHashValue!==!0;let u=o&&r.includes("create"),d=o&&r.includes("delete"),h=o&&r.includes("update");const m=r.includes("changetracking"),v=e.advancedQueryCapabilities;return o&&!(u||d||h)&&(u=d=h=!0),{supportsCalculate:xe(e,"supportsCalculate",!1),supportsTruncate:xe(e,"supportsTruncate",!1),supportsValidateSql:xe(e,"supportsValidateSql",!1),supportsAdd:u,supportsDelete:d,supportsEditing:o,supportsChangeTracking:m,supportsQuery:s,supportsQueryAnalytics:xe(v,"supportsQueryAnalytic",!1),supportsQueryAttachments:xe(v,"supportsQueryAttachments",!1),supportsQueryBins:xe(v,"supportsQueryBins",!1)||!!e.queryBinsCapabilities,supportsQueryPivot:xe(v,"supportsQueryPivot",!1),supportsQueryTopFeatures:xe(v,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:xe(e,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:h,supportsExceedsLimitStatistics:xe(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:xe(e,"supportsAsyncConvert3D",!1)}}function nze(t,e){const i=t.advancedQueryCapabilities,r=t.ownershipBasedAccessControlForFeatures,n=t.archivingInfo,s=t.currentVersion,o=e?.includes("MapServer"),u=!o||s>=q("mapserver-pbf-version-support"),d=oA(e),h=new Set((t.supportedQueryFormats??"").split(",").map(m=>m.toLowerCase().trim()));return{maxRecordCount:u0(t,"maxRecordCount",void 0),maxRecordCountFactor:u0(t,"maxRecordCountFactor",void 0),maxUniqueIDCount:u0(t,"maxUniqueIDCount",void 0),standardMaxRecordCount:u0(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:Yje(i),supportsCacheHint:xe(i,"supportsQueryWithCacheHint",!1)||Ix(i,"query"),supportsCentroid:xe(i,"supportsReturningGeometryCentroid",!1),supportsCentroidOnDegeneratedQuantizedGeometry:d||e==null,supportsCompactGeometry:d,supportsCurrentUser:xe(i,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:xe(i,"supportsDefaultSR",!1),supportsDegeneratedQuantizedGeometry:xe(i,"supportsDegeneratedQuantizedGeometry",!1),supportsDisjointSpatialRelationship:xe(i,"supportsDisjointSpatialRel",!1),supportsDistance:xe(i,"supportsQueryWithDistance",!1),supportsDistinct:xe(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:xe(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:u&&h.has("pbf"),supportsFullTextSearch:xe(i,"supportsFullTextSearch",!1),supportsGeometryProperties:xe(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:xe(i,"supportsHavingClause",!1),supportsHistoricMoment:xe(n,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:xe(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:xe(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:xe(i,"supportsPagination",!1),supportsPaginationOnAggregatedQueries:xe(i,"supportsPaginationOnAggregatedQueries",!1),supportsPercentileStatistics:xe(i,"supportsPercentileStatistics",!1),supportsQuantization:xe(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:xe(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:xe(r,"allowAnonymousToQuery",!0),supportsQueryByOthers:xe(r,"allowOthersToQuery",!0),supportsQueryGeometry:xe(t,"supportsReturningQueryGeometry",!1),supportsResultType:xe(i,"supportsQueryWithResultType",!1),supportsReturnMesh:!!Bje(t.infoFor3D),supportsSpatialAggregationStatistics:xe(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:xe(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:xe(t,"useStandardizedQueries",!1),supportsStatistics:xe(i,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:xe(i,"supportsTopFeaturesQuery",!1),supportsTrueCurve:xe(i,"supportsTrueCurve",!1),tileMaxRecordCount:u0(t,"tileMaxRecordCount",void 0)}}function sze(t){const e=t.advancedQueryCapabilities,i=xe(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:xe(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:Ix(e,"queryRelated")}}function oze(t){return{supportsCacheHint:Ix(t.advancedQueryCapabilities,"queryTopFilter")}}function aze(t){const e=t?t.queryBinsCapabilities:void 0;return{supportsDate:xe(e,"supportsDateBin",!1),supportsFixedInterval:xe(e,"supportsFixedIntervalBin",!1),supportsAutoInterval:xe(e,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:xe(e,"supportsFixedBoundariesBin",!1),supportsStackBy:xe(e,"supportsStackBy",!1),supportsSplitBy:xe(e,"supportsSplitBy",!1),supportsSnapToData:xe(e,"supportsSnapToData",!1),supportsReturnFullIntervalBin:xe(e,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:xe(e,"supportsFirstDayOfWeek",!1),supportsNormalization:xe(e,"supportsNormalization",!1),supportedStatistics:Qje(e),supportedNormalizationTypes:Xje(e)}}function lze(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:xe(t,"allowGeometryUpdates",!0),supportsGlobalId:xe(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:xe(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:xe(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:xe(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:xe(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:xe(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:xe(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:xe(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:xe(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:xe(i,"supportsAsyncApplyEdits",!1),zDefault:u0(t,"zDefault",void 0)}}function zit(t){return{operations:{supportsAppend:xe(t,"supportsAppend",!1),supportsCoverageQuery:t?.playbackInfo?.klv["0601"]??!1,supportsExportClip:xe(t,"supportsExportClip",!1),supportsExportFrameset:xe(t,"supportsExportFrameset",!1),supportsMensuration:xe(t,"supportsMensuration",!1),supportsPreviews:xe(t,"supportsPreviews",!1),supportsUpdate:xe(t,"supportsUpdate",!1)}}}let ld=class extends Re(B){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const i={};for(const r of Object.keys(e))i[r]=vk(e[r]);return i}writeDomains(e,i){if(!e)return;const r={};for(const n of Object.keys(e))e[n]&&(r[n]=e[n]?.toJSON());i.domains=r}};l([p({type:Number,json:{write:!0}})],ld.prototype,"code",void 0),l([p({type:Object,json:{write:!0}})],ld.prototype,"defaultValues",void 0),l([p({json:{write:!0}})],ld.prototype,"domains",void 0),l([se("domains")],ld.prototype,"readDomains",null),l([pe("domains")],ld.prototype,"writeDomains",null),l([p({type:String,json:{write:!0}})],ld.prototype,"name",void 0),ld=l([M("esri.layers.support.Subtype")],ld);const uze=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(fe.ofType(Ru)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=we.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.url=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(r,n){throw new Error("Not implemented")}getField(r){return this.fieldsIndex.get(r)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:r}=this;if(r){const{query:s,operations:o,editing:u}=r;if(!s.supportsQueryByOthers||!s.supportsQueryByAnonymous||o.supportsEditing&&!(u.supportsUpdateByOthers&&u.supportsUpdateByAnonymous&&u.supportsDeleteByOthers&&u.supportsDeleteByAnonymous))return"load"}if(YA(this.serviceDefinitionExpression)||YA(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(Nje(this))return"load";if(this.hasUpdateItemRestrictions)return r.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const n=this.editFieldsInfo;return(n?.creatorField||n?.editorField)&&r?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(r,n){return eue(n,this.url)}readEditingInfo(r,n){const{editingInfo:s}=n;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}get effectiveCapabilities(){const r=this.capabilities;if(!r)return null;const n=z(r),{operations:s,editing:o}=n;return c3(this)?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),n):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=o.supportsDeleteByOthers=o.supportsGeometryUpdate=o.supportsUpdateByOthers=!0,n):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=o.supportsGeometryUpdate=!0),n)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(r,n){return qle(n)}get hasFullEditingRestrictions(){const r=this.capabilities;if(!r||c3(this))return!1;const{operations:n,editing:s}=r;return n.supportsEditing&&!(n.supportsAdd&&n.supportsDelete&&n.supportsUpdate&&s.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const r=this.capabilities;if(!r)return!1;const{operations:n,editing:s}=r;return c3(this)?!n.supportsQuery:!(n.supportsAdd&&n.supportsDelete&&n.supportsEditing&&n.supportsQuery&&n.supportsUpdate&&s.supportsDeleteByOthers&&s.supportsGeometryUpdate&&s.supportsUpdateByOthers)}readIsTableFromService(r,n){return n.type==="Table"}readMaxScale(r,n){return n.effectiveMaxScale||r||0}readMinScale(r,n){return n.effectiveMinScale||r||0}readObjectIdFieldFromService(r,n){return Gle(n)}get parsedUrl(){return Vje(this)}readServiceDefinitionExpression(r,n){return n.definitionQuery||n.definitionExpression}readUniqueIdFields(r,n){return n.uniqueIdInfo?.OIDFieldContainsHashValue?n.uniqueIdInfo.fields:null}readVersion(r,n){return Mje(n)}get isUrlHostModified(){const{loaded:r,url:n,_isUrlHostModified:s}=this;if(s)return!0;if(!r||!n||this.originIdOf("url")<7)return!1;const o=this.sourceJSON?.preferredHost;if(!o||!Yu(n,`https://${o}`,!0))return!1;for(let u=6;u>=3;u--){const d=this.getAtOrigin("url",MS(u));if(d)return!Yu(n,d,!0)}return!1}applyPreferredHost(r){const{url:n,portalItem:s}=this;!n||vN(s)}applyHostFromPortalItem(){const{url:r,portalItem:n}=this;if(!r||this.originIdOf("url")===7||!n?.url||!vN(n)||!UF(n,qF.HOSTED_SERVICE)||Yu(r,n.url,!0)||!this._isUrlHostModificationEnabled)return;const s=bbe(n.url);this._set("url",MK(r,s)),this._isUrlHostModified=!0}};return l([p({readOnly:!0})],i.prototype,"authenticationTriggerEvent",null),l([p({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],i.prototype,"copyright",void 0),l([p({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],i.prototype,"capabilities",void 0),l([se("service","capabilities")],i.prototype,"readCapabilitiesFromService",null),l([p(wA("dateFieldsTimeReference"))],i.prototype,"dateFieldsTimeZone",void 0),l([p({type:Boolean})],i.prototype,"datesInUnknownTimezone",void 0),l([p({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],i.prototype,"definitionExpression",void 0),l([p({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],i.prototype,"displayField",void 0),l([p({readOnly:!0,type:ad})],i.prototype,"editFieldsInfo",void 0),l([p({readOnly:!0})],i.prototype,"editingInfo",void 0),l([se("editingInfo")],i.prototype,"readEditingInfo",null),l([p({readOnly:!0})],i.prototype,"effectiveCapabilities",null),l([p()],i.prototype,"effectiveEditingEnabled",null),l([p((()=>{const r=z(e4e),n=r.json.origins;return n["web-map"]={read:!1,write:!1},n["portal-item"]={read:!1,write:!1},r})())],i.prototype,"elevationInfo",void 0),l([p()],i.prototype,"fieldsIndex",void 0),l([p({type:l0,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:ui}}})],i.prototype,"floorInfo",void 0),l([p({type:Xe,json:{origins:{service:{read:{source:"extent"}}}}})],i.prototype,"fullExtent",void 0),l([p()],i.prototype,"gdbVersion",void 0),l([p({readOnly:!0,type:a0,json:{read:{source:"geometryProperties"}}})],i.prototype,"geometryFieldsInfo",void 0),l([p({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:_j.read}}}})],i.prototype,"geometryType",void 0),l([p({type:String})],i.prototype,"globalIdField",void 0),l([se("service","globalIdField",["globalIdField","fields"])],i.prototype,"readGlobalIdFieldFromService",null),l([p({readOnly:!0})],i.prototype,"hasFullEditingRestrictions",null),l([p({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasM",void 0),l([p({readOnly:!0})],i.prototype,"hasUpdateItemRestrictions",null),l([p({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasZ",void 0),l([p({readOnly:!0,type:ys})],i.prototype,"heightModelInfo",void 0),l([p({type:Date})],i.prototype,"historicMoment",void 0),l([p({type:fe.ofType(Ru),readOnly:!0})],i.prototype,"indexes",void 0),l([p({readOnly:!0})],i.prototype,"isTable",void 0),l([se("service","isTable",["type"])],i.prototype,"readIsTableFromService",null),l([p({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],i.prototype,"layerId",void 0),l([p(n4e)],i.prototype,"maxScale",void 0),l([se("service","maxScale",["maxScale","effectiveMaxScale"])],i.prototype,"readMaxScale",null),l([p(r4e)],i.prototype,"minScale",void 0),l([se("service","minScale",["minScale","effectiveMinScale"])],i.prototype,"readMinScale",null),l([p({type:String})],i.prototype,"objectIdField",void 0),l([se("service","objectIdField",["objectIdField","fields"])],i.prototype,"readObjectIdFieldFromService",null),l([p({readOnly:!0})],i.prototype,"parsedUrl",null),l([p(wA("preferredTimeReference"))],i.prototype,"preferredTimeZone",void 0),l([p({type:[ko],readOnly:!0})],i.prototype,"relationships",void 0),l([p({type:Boolean})],i.prototype,"returnM",void 0),l([p({type:Boolean})],i.prototype,"returnZ",void 0),l([p({readOnly:!0,json:{write:!1}})],i.prototype,"serverGens",void 0),l([p({readOnly:!0})],i.prototype,"serviceDefinitionExpression",void 0),l([se("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],i.prototype,"readServiceDefinitionExpression",null),l([p({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"serviceItemId",void 0),l([p()],i.prototype,"sourceJSON",void 0),l([p({type:we,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],i.prototype,"spatialReference",void 0),l([p({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],i.prototype,"subtypeField",void 0),l([p({type:[ld],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"subtypes",void 0),l([p({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],i.prototype,"trackIdField",void 0),l([p({type:[String],readOnly:!0})],i.prototype,"uniqueIdFields",void 0),l([se("service","uniqueIdFields",["uniqueIdInfo.OIDFieldContainsHashValue","uniqueIdInfo.fields"])],i.prototype,"readUniqueIdFields",null),l([p(Fje({nonStandardUrlAllowed:!0}))],i.prototype,"url",void 0),l([p({json:{origins:{service:{read:!0}},read:!1}})],i.prototype,"version",void 0),l([se("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],i.prototype,"readVersion",null),l([p({readOnly:!0})],i.prototype,"isUrlHostModified",null),i=l([M("esri.layers.mixins.FeatureLayerBase")],i),i};let cze=class extends WS{constructor(e){super(),this.type="aggregate",this.featureReductionProvider=e}get id(){return this.featureReductionProvider.id}get[wx](){const e=this.featureReductionProvider.featureReduction;return e&&"popupTemplate"in e?e:null}},Ph=class extends Re(B){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};l([p({type:String,json:{write:!0}})],Ph.prototype,"expression",void 0),l([p({type:String,json:{write:!0}})],Ph.prototype,"title",void 0),l([p({type:String,json:{write:!0}})],Ph.prototype,"returnType",void 0),Ph=l([M("esri.layers.support.ExpressionInfo")],Ph);var xj,Ib;let Zn=(Ib=class extends B{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new xj({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:z(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}},xj=Ib,Ib);l([p({type:Boolean,json:{write:!0}})],Zn.prototype,"isAutoGenerated",void 0),l([p({type:String,json:{write:!0}})],Zn.prototype,"name",void 0),l([p({type:String,json:{write:!0}})],Zn.prototype,"alias",void 0),l([p({type:String,json:{write:!0}})],Zn.prototype,"onStatisticField",void 0),l([p({type:Ph,json:{write:!0}})],Zn.prototype,"onStatisticExpression",void 0),l([p({type:String,json:{write:!0}})],Zn.prototype,"statisticType",void 0),Zn=xj=l([M("esri.layers.support.AggregateField")],Zn);let Qh=class extends B{constructor(){super(...arguments),this.type=null}};l([p({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Qh.prototype,"type",void 0),Qh=l([M("esri.layers.support.FeatureReduction")],Qh);const a8="__begin__",l8="__end__",dze=new RegExp(a8,"ig"),pze=new RegExp(l8,"ig"),sJ=new RegExp("^"+a8,"i"),oJ=new RegExp(l8+"$","i"),QA='"',hze=QA+" + ",fze=" + "+QA;function mze(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function yze(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function u8(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=mze(t.labelExpression),e.type="conventional"),e}function gze(t){const e=u8(t);if(!e)return null;switch(e.type){case"conventional":return $j(e.expression);case"arcade":return e.expression}return null}function vze(t){const e=u8(t);if(!e)return null;switch(e.type){case"conventional":return wze(e.expression);case"arcade":return tue(e.expression)}return null}function $j(t){let e;return t?(e=ip(t,i=>a8+'$feature["'+i+'"]'+l8),e=sJ.test(e)?e.replace(sJ,""):QA+e,e=oJ.test(e)?e.replace(oJ,""):e+QA,e=e.replaceAll(dze,hze).replaceAll(pze,fze)):e='""',e}const bze=/^\s*\{([^}]+)\}\s*$/i;function wze(t){return t?.match(bze)?.[1].trim()||null}const _ze=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,Sze=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,xze=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function tue(t){if(!t)return null;let e=_ze.exec(t)||Sze.exec(t);return e?e[1]||e[3]:(e=xze.exec(t),e?e[2]:null)}var Tj,kb;let Ad=(kb=class extends B{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,i){return i.value?$j(i.value):e}writeExpression(e,i,r){this.value!=null&&(e=$j(this.value)),e!=null&&(i[r]=e)}clone(){return new Tj({expression:this.expression,title:this.title,value:this.value})}},Tj=kb,kb);l([p({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Ad.prototype,"expression",void 0),l([se("expression",["expression","value"])],Ad.prototype,"readExpression",null),l([pe("expression")],Ad.prototype,"writeExpression",null),l([p({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ad.prototype,"title",void 0),l([p({json:{read:!1,write:!1}})],Ad.prototype,"value",void 0),Ad=Tj=l([M("esri.layers.support.LabelExpressionInfo")],Ad);var Ej;const sE=new Be({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function oE(t,e,i){return{enabled:!gN(i?.layer)}}function iue(t){return!t||t.origin!=="service"&&t.layer?.type!=="map-image"}function $ze(t){return t?.type==="map-image"}function rue(t){return!!$ze(t)&&!!t.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}function Tze(t){return iue(t)||rue(t?.layer)}var Ob;let $i=(Ob=class extends B{static evaluateWhere(e,i){const r=(n,s,o)=>{switch(s){case"=":return n==o;case"<>":return n!=o;case">":return n>o;case">=":return n>=o;case"<":return n<o;case"<=":return n<=o}return!1};try{if(e==null)return!0;const n=e.split(" ");if(n.length===3)return r(i[n[0]],n[1],n[2]);if(n.length===7){const s=r(i[n[0]],n[1],n[2]),o=n[3],u=r(i[n[4]],n[5],n[6]);switch(o){case"AND":return s&&u;case"OR":return s||u}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=H4e,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,i){const r=i.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,i,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=yze(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const n=tue(this.labelExpressionInfo.expression);n&&(e="["+n+"]")}}e!=null&&(i[r]=e)}writeLabelExpressionInfo(e,i,r,n){if(e==null&&this.labelExpression!=null&&iue(n))e=new Ad({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(n);s.expression&&(i[r]=s)}writeMaxScale(e,i){(e||this.minScale)&&(i.maxScale=e)}writeMinScale(e,i){(e||this.maxScale)&&(i.minScale=e)}getLabelExpression(){return u8(this)}getLabelExpressionArcade(){return gze(this)}getLabelExpressionSingleField(){return vze(this)}hash(){return JSON.stringify(this)}clone(){return new Ej({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:z(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:z(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}},Ej=Ob,Ob);l([p({type:String,json:{write:!0}})],$i.prototype,"name",void 0),l([p({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:oE}}}}})],$i.prototype,"allowOverrun",void 0),l([p({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:oE}}}}})],$i.prototype,"deconflictionStrategy",void 0),l([p({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&i?.origin==="service"&&rue(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],$i.prototype,"labelExpression",void 0),l([se("labelExpression")],$i.prototype,"readLabelExpression",null),l([pe("labelExpression")],$i.prototype,"writeLabelExpression",null),l([p({type:Ad,json:{write:{overridePolicy:(t,e,i)=>Tze(i)?{allowNull:!0}:{enabled:!1}}}})],$i.prototype,"labelExpressionInfo",void 0),l([pe("labelExpressionInfo")],$i.prototype,"writeLabelExpressionInfo",null),l([p({type:sE.apiValues,json:{type:sE.jsonValues,read:sE.read,write:sE.write}})],$i.prototype,"labelPlacement",void 0),l([p({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],$i.prototype,"labelPosition",void 0),l([p({type:Number})],$i.prototype,"maxScale",void 0),l([pe("maxScale")],$i.prototype,"writeMaxScale",null),l([p({type:Number})],$i.prototype,"minScale",void 0),l([pe("minScale")],$i.prototype,"writeMinScale",null),l([p({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:oE}}}}})],$i.prototype,"repeatLabel",void 0),l([p({type:Number,cast:gt,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:oE}}}}})],$i.prototype,"repeatLabelDistance",void 0),l([p({types:VIe,json:{origins:{"web-scene":{types:UIe,write:HZ,default:null}},write:HZ,default:null}})],$i.prototype,"symbol",void 0),l([p({type:Boolean,json:{write:!0}})],$i.prototype,"useCodedValues",void 0),l([p({type:String,json:{write:!0}})],$i.prototype,"where",void 0),$i=Ej=l([M("esri.layers.support.LabelClass")],$i);var Mj;let Rl=Mj=class extends B{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new Mj({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};l([p({type:String,json:{write:!0}})],Rl.prototype,"description",void 0),l([p({type:String,json:{write:!0}})],Rl.prototype,"label",void 0),l([p({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Rl.prototype,"minValue",void 0),l([p({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Rl.prototype,"maxValue",void 0),l([p(e8)],Rl.prototype,"symbol",void 0),Rl=Mj=l([M("esri.renderers.support.ClassBreakInfo")],Rl);var Aj;const nue="log",d3="percent-of-total",p3="field",aE=new Be({esriNormalizeByLog:nue,esriNormalizeByPercentOfTotal:d3,esriNormalizeByField:p3}),Eze=cr(Rl);let gr=Aj=class extends Vw(Uo){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let r=e.minValue;return t.map(n=>{const s=new Rl;return s.read(n,i),s.minValue==null&&(s.minValue=r),s.maxValue==null&&(s.maxValue=s.minValue),r=s.maxValue,s})}writeClassBreakInfos(t,e,i,r){const n=t.map(s=>s.write({},r));this._areClassBreaksConsecutive()&&n.forEach(s=>delete s.classMinValue),e[i]=n}castField(t){return t==null?t:typeof t=="function"?(ie.getLogger(this).error(".field: field must be a string value"),null):cx(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&p3||i&&d3||null,e&&i&&ie.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==p3&&t!==d3||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let r=null;r=typeof t=="number"?new Rl({minValue:t,maxValue:e,symbol:Dse(i)}):Eze(z(t)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===t&&n[1]===e){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(t,e){return this.valueExpression&&e?.arcade==null&&ie.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;this.valueExpression&&e?.arcade==null&&(i={...i,arcade:await Vy()});const r=this.getBreakIndex(t,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(t,e){if(this.valueExpression&&e?.arcade==null)return void ie.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&e?.arcade==null){const n=await Vy(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:n}}const r=this.getBreakIndex(t,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}get symbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((r,n)=>r+n.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new Aj({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:z(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:z(this.visualVariables),legendOptions:z(this.legendOptions),authoringInfo:z(this.authoringInfo)})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map(r=>r.collectRequiredFields(t,e)),rs(t,e,null,this.valueExpression)];ts(t,e,this.field),ts(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:n,arcade:s,timeZone:o}=e??{},{valueExpression:u}=this;let d=this._compiledValueExpression.valueExpression===u?this._compiledValueExpression.compiledFunction:null;const h=s.arcadeUtils;if(!d){const v=h.createSyntaxTree(u);d=h.createFunction(v),this._compiledValueExpression.compiledFunction=d}this._compiledValueExpression.valueExpression=u;const m=h.executeFunction(d,h.createExecContext(t,h.getViewInfo({viewingMode:i,scale:r,spatialReference:n}),o));return this._getBreakIndexfromInfos(m)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,r=this.normalizationType;let n=parseFloat(i[e]);if(r){const s=this.normalizationTotal,o=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===nue)n=Math.log(n)*Math.LOG10E;else if(r!==d3||s==null||isNaN(s)){if(r===p3&&!isNaN(o)){if(isNaN(n)||isNaN(o))return-1;n/=o}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=t&&(e?t<=r[1]:t<r[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};l([p(t8)],gr.prototype,"backgroundFillSymbol",void 0),l([p({type:[Rl],json:{write:{isRequired:!0}}})],gr.prototype,"classBreakInfos",void 0),l([se("classBreakInfos")],gr.prototype,"readClassBreakInfos",null),l([pe("classBreakInfos")],gr.prototype,"writeClassBreakInfos",null),l([p({type:String,json:{write:!0}})],gr.prototype,"defaultLabel",void 0),l([p(Dk)],gr.prototype,"defaultSymbol",void 0),l([p({type:String,json:{write:!0}})],gr.prototype,"field",void 0),l([Ct("field")],gr.prototype,"castField",null),l([p({type:Boolean})],gr.prototype,"isMaxInclusive",void 0),l([p({type:i8,json:{write:!0}})],gr.prototype,"legendOptions",void 0),l([p({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],gr.prototype,"minValue",null),l([p({type:String,json:{write:!0}})],gr.prototype,"normalizationField",void 0),l([p({type:Number,json:{write:!0}})],gr.prototype,"normalizationTotal",void 0),l([p({type:aE.apiValues,value:null,json:{type:aE.jsonValues,read:aE.read,write:aE.write}})],gr.prototype,"normalizationType",null),l([Ae({classBreaks:"class-breaks"})],gr.prototype,"type",void 0),l([p({type:String,json:{write:!0}})],gr.prototype,"valueExpression",void 0),l([p({type:String,json:{write:!0}})],gr.prototype,"valueExpressionTitle",void 0),gr=Aj=l([M("esri.renderers.ClassBreaksRenderer")],gr);const Ij=-3,Mze=Ij-1,Aze=!!q("esri-tests-disable-gpu-memory-measurements");let Ize=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._users=new Map,this._sizeLimits=new Map}destroy(){this.clearAll(),this._sizeLimits.clear(),this._users.clear(),this._db=null}register(e){this._users.set(e.id.slice(0,-1),e)}deregister(e){this.clear(e),this._sizeLimits.delete(e),this._users.delete(e.id.slice(0,-1))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,i){return this._db.get(e.id+i)?.size??0}put(e,i,r,n,s){i=e.id+i;const o=this._db.get(i);if(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(i),o.entry!==r&&this._notifyRemove(i,o.entry,o.size,0)),n>this._maxSize)return void this._notifyRemove(i,r,n,0);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return Aze||console.warn(`Refusing to cache entry with size ${n} for key ${i}`),void this._notifyRemove(i,r,0,0);const u=1+Math.max(s,Mze)-Ij;this._db.set(i,new kze(r,n,u)),this._size+=n,e.size+=n,this._checkSize()}updateSize(e,i){i=e.id+i;const r=this._db.get(i);if(!r)return;this._size-=r.size,e.size-=r.size;let n=r.entry.usedMemory;for(;n>this._maxSize;){const s=this._notifyRemove(i,r.entry,n,1);if(!(s!=null&&s>0))return void this._db.delete(i);n=s}r.size=n,this._size+=n,e.size+=n,this._checkSize()}pop(e,i){i=e.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(e,i){i=e.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}peek(e,i){const r=this._db.get(e.id+i);return r?++this._hit:++this._miss,r?.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((o,u)=>{const d=o.lifetime;r[d]=(r[d]||0)+o.size,this._users.forEach(h=>{const{id:m,name:v}=h;if(u.startsWith(m)){const b=i[v]||0;i[v]=b+o.size}})});const n={};this._users.forEach(o=>{const u=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const d=i[u]||0;i[u]=d,n[u]=Math.round(100*o.hitRate)+"%"}else n[u]="0%"});const s=Object.keys(i);s.sort((o,u)=>i[u]-i[o]),s.forEach(o=>e[o]=Math.round(i[o]/2**20)+"MB / "+n[o]);for(let o=r.length-1;o>=0;--o){const u=r[o];u&&(e["Priority "+(o+Ij-1)]=Math.round(u/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forEach(e=>e.resetHitRate())}clear(e){const i=e.id;this._db.forEach((r,n)=>{n.startsWith(i)&&(this._size-=r.size,this._db.delete(n),this._notifyRemove(n,r.entry,r.size,0))}),e.size=0}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,e.size,0)),this._users.forEach(e=>e.size=0),this._size=0,this._db.clear()}*values(e){for(const[i,r]of this._db)i.startsWith(e.id)&&(yield r.entry)}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,r,n){const s=this._users.get(e.split(pP)[0])?.removeFunc,o=s?.(i,n,r);return typeof o=="number"?o:null}_checkSize(){this._sizeLimits.forEach((e,i)=>this._checkSizeLimits(e,i)),this._checkSizeLimits(this.maxSize)}setMaxSize(e,i){i==null||i<=0?this._sizeLimits.delete(e):this._sizeLimits.set(e,i)}_checkSizeLimits(e,i){const r=i??this;if(r.size<=e)return;const n=i?.id;let s=!0;for(;s;){s=!1;for(const[o,u]of this._db)if(u.lifetime===0&&(!n||o.startsWith(n))){const d=i??this._users.get(o.split(pP)[0]);if(this._purgeItem(o,u,d),r.size<=.9*e)return;s||=this._db.has(o)}}for(const[o,u]of this._db)if(!n||o.startsWith(n)){const d=i??this._users.get(o.split(pP)[0]);if(this._purgeItem(o,u,d),r.size<=.9*e)return}}_purgeItem(e,i,r){if(this._db.delete(e),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const n=this._notifyRemove(e,i.entry,i.size,1);n!=null&&n>0&&(this._size+=n,r&&(r.size+=n),i.lives=i.lifetime,i.size=n,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},kze=class{constructor(e,i,r){this.entry=e,this.size=i,this.lifetime=r,this.lives=r}};const pP=":";let sue=class{constructor(e,i){this.removeFunc=i,this._storage=new Ize,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy(),this._storage=null}put(e,i,r=1){this._storage.put(this,e,i,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},aJ=class oue{static parse(e,i,r){const n=[],s=[],o=e.split(";");for(let u=0;u<o.length;u++){const d=o[u];if(d){if(d.includes("po:")){const h=d.slice(3).split("|");if(h.length===3){const[m,v,b]=h,_=Cze(m,v,b);_&&s.push(_)}continue}if(d.includes("|")){for(const h of d.split("|"))if(i.has(h)){n.push(h);break}}else if(i.has(d))n.push(d);else if(u===0){n.length=0,n.push(Rze(r));break}}}return new oue(n,s)}constructor(e,i){this.partNames=e,this.overrides=i}};function Oze(t,e){if(t==="DashTemplate")return e.split(" ").map(i=>Number(i));if(t==="Color"){const i=new Ie(e).toRgba();return[i[0],i[1],i[2],255*i[3]]}return Number(e)}function Cze(t,e,i){return{primitiveName:t,propertyName:e,value:Oze(e,i),defaultValue:null}}function Rze(t){switch(t){case"esriGeometryPolyline":return"Invalid_L";case"esriGeometryPolygon":return"Invalid_A";default:return"Invalid_P"}}var Cb;let qu=(Cb=class{},Cb.instance=new lo("Etc/UTC"),Cb);function Pze(t){return t instanceof Xy?t===qu.instance:t?.toString().toLowerCase()==="unknown"}function Wit(t){return Pze(t)?qu.instance:t}function Dze(t){return"timeZone"in t}function Nze(t){return"timeZone"in t}function Lze(t){return"dateFieldsTimeZone"in t}const jze=new Map;let XA=class h3{static fromJSON(e){return new h3(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new h3(e.fields??[],uJ(e))}static fromLayerJSON(e){return new h3(e.fields??[],uJ(e))}constructor(e=[],i){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=i?new Map(i):null;const r=[];for(const n of this.fields){const s=n?.name,o=lJ(s);if(s&&o){const u=Hm(s);this._fieldsMap.set(s,n),this._fieldsMap.set(u,n),this._normalizedFieldsMap.set(o,n),r.push(`${u}:${n.type}:${this._timeZoneByFieldName?.get(s)}`),jne(n)?(this.dateFields.push(n),this._dateFieldsSet.add(n)):pF(n)&&(this._numericFieldsSet.add(n),this.numericFields.push(n)),mH(n)||yH(n)||(n.editable=n.editable==null||!!n.editable,n.nullable=n.nullable==null||!!n.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)mH(e)||yH(e)||e.nullable||lAe(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(Hm(e))??this._normalizedFieldsMap.get(lJ(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(e){const i=this.get(e&&typeof e!="string"?e.name:e);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(ie.getLogger("esri.layers.support.FieldsIndex").errorOnce(new L("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),pf):aue.has(i.type)?df:null:null}getLuxonTimeZone(e){const i=this.getTimeZone(e);return i?i===df?qu.instance:i===pf?Lr.utcInstance:Wy(jze,i,()=>lo.create(i)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return zne(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map(e=>AS(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function Hm(t){return t.trim().toLowerCase()}function lJ(t){return Z3e(t)?.toLowerCase()??""}const aue=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function uJ(t){const e=new Map;if(!t.fields)return e;const i=t.datesInUnknownTimezone===!0,{timeInfo:r,editFieldsInfo:n}=t,s=(r?"startField"in r?r.startField:r.startTimeField:"")??"",o=(r?"endField"in r?r.endField:r.endTimeField:"")??"",u=Lze(t)?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?hM(t.dateFieldsTimeReference):null,d=n?Dze(n)?n.timeZone??u:n.dateFieldsTimeReference?hM(n.dateFieldsTimeReference):u??pf:null,h=r?Nze(r)?r.timeZone??u:r.timeReference?hM(r.timeReference):u:null,m=new Map([[Hm(n?.creationDateField??""),d],[Hm(n?.editDateField??""),d],[Hm(s),h],[Hm(o),h]]);for(const{name:v,type:b}of t.fields)if(aue.has(b))e.set(v,df);else if(b!=="date"&&b!=="esriFieldTypeDate")e.set(v,null);else if(i)e.set(v,df);else{const _=m.get(Hm(v??""))??u;e.set(v,_)}return e}const lue={TypeNotAllowedInFeature:"Feature attributes only support dates, numbers, strings, guids.",LogicError:"Logic error - {reason}",CannotCompareDateAndTime:"Cannot compare date or dateonly with timeonly types",NeverReach:"Encountered unreachable logic",AsyncNotEnabled:"Async Arcade must be enabled for this script",ModuleAccessorMustBeString:"Module accessor must be a string",ModuleExportNotFound:"Module has no export with provided identifier",ModulesNotSupported:"Current profile does not support modules",ArrayAccessMustBeNumber:"Array accessor must be a number",FunctionNotFound:"Function not found",FieldNotFound:"Key not found - {key}",CircularModules:"Circular module dependencies are not allowed",Cancelled:"Execution cancelled",UnsupportedHashType:"Type not supported in hash function",IllegalResult:"Value is not a supported return type",PortalRequired:"Portal is required",InvalidParameter:"Invalid parameter",WrongNumberOfParameters:"Call with wrong number of parameters",Unrecognized:"Unrecognized code structure",UnrecognizedType:"Unrecognized type",WrongSpatialReference:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",BooleanConditionRequired:"Conditions must use booleans",NoFunctionInDictionary:"Dictionaries cannot contain functions.",NoFunctionInArray:"Arrays cannot contain functions.",NoFunctionInTemplateLiteral:"Template Literals do not expect functions by value.",KeyAccessorMustBeString:"Accessor must be a string",KeyMustBeString:"Object keys must be a string",Immutable:"Object is immutable",UnexpectedToken:"Unexpected token",MemberOfNull:"Cannot access property of null object",MaximumCallDepth:"Exceeded maximum function depth",OutOfBounds:"Out of bounds",InvalidIdentifier:"Identifier not recognized",CallNonFunction:"Expression is not a function",InvalidMemberAccessKey:"Cannot access value using a key of this type",AssignModuleFunction:"Cannot assign function to module variable",UnsupportUnaryOperator:"Unsupported unary operator",UnsupportedOperator:"Unsupported operator",LogicalExpressionOnlyBoolean:"Logical expressions must be boolean",LogicExpressionOrAnd:"Logical expression can only be combined with || or &&",CannotChangeTimeZoneTime:"Cannot change the timezone of a Time",CannotChangeTimeZoneDateOnly:"Cannot change the timezone of a DateOnly",FeatureSetDoesNotHaveSubtypes:"FeatureSet does not have subtypes"};let zze=class extends Error{constructor(...e){super(...e)}},cJ=class uue extends zze{constructor(e,i){super(c8(i)+e.message,{cause:e}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,uue),i?.loc&&(this.loc=i.loc)}},Fze=class cue extends Error{constructor(e,i,r,n){super("Execution error - "+c8(r)+ip(lue[i],n)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,cue),r?.loc&&(this.loc=r.loc)}};function c8(t){return t&&t.loc?`Line : ${t.loc.start?.line}, ${t.loc.start?.column}: `:""}let Jit=class due extends Error{constructor(e,i,r,n){super("Compilation error - "+c8(r)+ip(lue[i],n)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,due),r?.loc&&(this.loc=r.loc)}},Yit=class pue extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,pue)}};function Qit(t,e,i){return i.declaredRootClass==="esri.arcade.arcadeexecutionerror"||i.declaredRootClass==="esri.arcade.arcadecompilationerror"?i.loc===null&&e?.loc?new cJ(i,{cause:i}):i:(i.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||i.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||i.declaredRootClass,e?.loc?new cJ(i,{cause:i}):i)}const Vze={UnrecognizedUri:"Unrecognized uri - {uri}",UnsupportedUriProtocol:"Unrecognized uri protocol"};let Xit=class hue extends Error{constructor(e,i){super(ip(Vze[e],i)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,hue)}};function f3(t){return t.toLowerCase().replaceAll(/[\s-]+/g,"")}let Kit=class{constructor(e,i){const r=new Map;for(const n of e){const s=f3(n);if(r.has(s))throw new Error(`${n} already added as ${r.get(s)}`);r.set(s,n)}if(i!=null)for(const[n,s]of i){const o=f3(n);if(r.has(o))throw new Error(`${n} already associated with ${r.get(o)}`);r.set(o,s)}this._enumMap=r}lookup(e){return this._enumMap.get(f3(e))}get(e){const i=this.lookup(e);if(i==null)throw new Fze(null,"InvalidParameter",null);return i}};const Uze={TimeZoneNotRecognized:"Timezone identifier has not been recognized."};let qze=class fue extends Error{constructor(e,i){super(ip(Uze[e],i)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,fue)}};function cv(t,e,i){return t<e?t-e:t>i?t-i:0}function dv(t,e,i){return t<e?e:t>i?i:t}let Gd=class yr{constructor(e){this._date=e,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(e=0,i=1,r=1,n=0,s=0,o=0,u=0,d){if(isNaN(e)||isNaN(i)||isNaN(r)||isNaN(n)||isNaN(s)||isNaN(o)||isNaN(u))return null;const h=Me.local(e,i).daysInMonth;let m=Me.fromObject({day:dv(r,1,h),year:e,month:dv(i,1,12),hour:dv(n,0,23),minute:dv(s,0,59),second:dv(o,0,59),millisecond:dv(u,0,999)},{zone:zu(d)});return m=m.plus({months:cv(i,1,12),days:cv(r,1,h),hours:cv(n,0,23),minutes:cv(s,0,59),seconds:cv(o,0,59),milliseconds:cv(u,0,999)}),new yr(m)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(e,i){const r=zu(i);return e.isUnknownTimeZone||r===qu.instance?yr.fromParts(e.year,e.monthJS+1,e.day,e.hour,e.minute,e.second,e.millisecond,r):new yr(e._date.setZone(r))}static dateJSToArcadeDate(e){return new yr(Me.fromJSDate(e,{zone:"system"}))}static dateJSAndZoneToArcadeDate(e,i="system"){const r=zu(i);return new yr(Me.fromJSDate(e,{zone:r}))}static unknownEpochToArcadeDate(e){return new yr(Me.fromMillis(e,{zone:qu.instance}))}static unknownDateJSToArcadeDate(e){return new yr(Me.fromMillis(e.getTime(),{zone:qu.instance}))}static epochToArcadeDate(e,i="system"){const r=zu(i);return new yr(Me.fromMillis(e,{zone:r}))}static dateTimeToArcadeDate(e){return new yr(e)}clone(){return new yr(this._date)}changeTimeZone(e){const i=zu(e);return yr.dateTimeToArcadeDate(this._date.setZone(i))}static dateTimeAndZoneToArcadeDate(e,i){const r=zu(i);return e.zone===qu.instance||r===qu.instance?yr.fromParts(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond,r):new yr(e.setZone(r))}static nowToArcadeDate(e){const i=zu(e);return new yr(Me.fromJSDate(new Date,{zone:i}))}static nowUTCToArcadeDate(){return new yr(Me.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===yr.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===qu.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const e=this.zone;return e.type==="fixed"?e.fixed===0?"UTC":e.formatOffset(0,"short"):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(e){return new yr(this._date.plus(e))}diff(e,i){return this._date.diff(e._date,i)[i]}toISODate(){return this._date.toISODate()}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(e,i){return this._date.toISOTime({suppressMilliseconds:e,includeOffset:i&&!this.isUnknownTimeZone})}toFormat(e,i){return this.isUnknownTimeZone&&(e=e.replaceAll("Z","")),this._date.toFormat(e,i)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new yr(this._date.toUTC())}toLocal(){return new yr(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(e){if(!e)return null;const i=Me.fromISO(e,{setZone:!0});return new yr(i)}};function zu(t,e=!0){if(t instanceof Xy)return t;switch(f3(t)){case"system":return"system";case"utc":return"UTC";case"unknown":return qu.instance}if(/^[+-]?[0-9]{1,2}(:[0-9]{2})?$/.test(t)){const r=Lr.parseSpecifier("UTC"+(t.startsWith("+")||t.startsWith("-")?"":"+")+t);if(r)return r}const i=lo.create(t);if(!i.isValid){if(e)throw new qze("TimeZoneNotRecognized");return null}return i}function dJ(t){t=t.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let e="";const i=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of t.match(i)||[])switch(r){case"D":e+="d";break;case"DD":e+="dd";break;case"DDD":e+="o";break;case"d":e+="c";break;case"ddd":e+="ccc";break;case"dddd":e+="cccc";break;case"M":e+="L";break;case"MM":e+="LL";break;case"MMM":e+="LLL";break;case"MMMM":e+="LLLL";break;case"YY":e+="yy";break;case"Y":case"YYYY":e+="yyyy";break;case"Q":e+="q";break;case"X":case"x":e+=r;break;default:r.length>=2&&r.startsWith("[")&&r.endsWith("]")?e+=`'${r.slice(1,-1)}'`:e+=`'${r}'`}return e}const pJ="esri.core.sql.dateonly";let Gze=class Oo{constructor(e,i,r){this._year=e,this._month=i,this._day=r,this.declaredRootClass=pJ}static isDateOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===pJ}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(e){return Oo.isDateOnly(e)&&e.day===this.day&&e.month===this.month&&e.year===this.year}clone(){return new Oo(this._year,this._month,this._day)}toDateTime(e){return Me.fromObject({day:this.day,month:this.month,year:this.year},{zone:zu(e)})}toDateTimeLuxon(e){return Me.fromObject({day:this.day,month:this.month,year:this.year},{zone:zu(e)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(e=null,i=!0){if(e===null||e==="")return this.toString();if(i&&(e=dJ(e)),!e)return"";const r=this.toDateTime("unknown");return Gd.dateTimeToArcadeDate(r).toFormat(e,{locale:so(),numberingSystem:"latn"})}toArcadeDate(){const e=this.toDateTime("unknown");return Gd.dateTimeToArcadeDate(e)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(e,i){return Oo.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}toUTCDateTime(){return Me.utc(this.year,this.month,this.day,0,0,0,0)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}static fromMilliseconds(e){const i=Me.fromMillis(e,{zone:Lr.utcInstance});return i.isValid?Oo.fromParts(i.year,i.month,i.day):null}static fromSeconds(e){const i=Me.fromSeconds(e,{zone:Lr.utcInstance});return i.isValid?Oo.fromParts(i.year,i.month,i.day):null}static fromReader(e){if(!e)return null;const i=e.split("-");return i.length!==3?null:new Oo(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10))}static fromParts(e,i,r){const n=new Oo(e,i,r);return n.isValid===!1?null:n}static fromDateJS(e){return Oo.fromParts(e.getFullYear(),e.getMonth()+1,e.getDay())}static fromDateTime(e){return Oo.fromParts(e.year,e.month,e.day)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];if(i)(i=dJ(i))&&r.push(i);else if(i===null||i===""){const n=Me.fromISO(e,{setZone:!0});return n.isValid?Oo.fromParts(n.year,n.month,n.day):null}for(const n of r){const s=Me.fromFormat(e,i??n);if(s.isValid)return new Oo(s.year,s.month,s.day)}return null}static fromNow(e="system"){const i=Me.fromJSDate(new Date).setZone(zu(e));return new Oo(i.year,i.month,i.day)}};function trt(t){if(t==null)return null;switch(t.type){case"polygon":case"multipoint":case"polyline":return t.extent;case"point":return new Xe({xmin:t.x,ymin:t.y,xmax:t.x,ymax:t.y,spatialReference:t.spatialReference});case"extent":return t}return null}function irt(t){if(t==null)return null;const e=t.clone();return t.cache._geVersion!==void 0&&(e.cache._geVersion=t.cache._geVersion),e}function lE(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function hJ(t){if(!t)return"";const e=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let i="";for(const r of t.match(e)||[])switch(r){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":i+=r;break;case"A":case"a":i+="a";break;default:i+=`'${r}'`}return i}const fJ="esri.core.sql.timeonly";let Bze=class Mu{constructor(e,i,r,n){this._hour=e,this._minute=i,this._second=r,this._millisecond=n,this.declaredRootClass=fJ}static isTimeOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===fJ}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(e){return Mu.isTimeOnly(e)&&e.hour===this.hour&&e.minute===this.minute&&e.second===this.second&&e.millisecond===this.millisecond}clone(){return new Mu(this.hour,this.minute,this.second,this.millisecond)}isValid(){return lE(this.hour)&&lE(this.minute)&&lE(this.second)&&lE(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(e=null){return e===null||e===""?this.toString():(e=hJ(e))?Me.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(e,{locale:so(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(e,i,r,n){const s=new Mu(e,i,r,n);return s.isValid()?s:null}static fromReader(e){if(!e)return null;const i=e.split(":");return i.length!==3?null:new Mu(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10),0)}static fromMilliseconds(e){if(e>864e5||e<0)return null;const i=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60),n=Math.floor(e/36e5%24),s=Math.floor(e%1e3);return new Mu(n,r,i,s)}static fromDateJS(e){return new Mu(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}static fromDateTime(e){return new Mu(e.hour,e.minute,e.second,e.millisecond)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];i?(i=hJ(i))&&r.push(i):i!==null&&i!==""||(r.push("HH:mm:ss"),r.push("HH:mm:ss.SSS"),r.push("hh:mm:ss a"),r.push("hh:mm:ss.SSS a"),r.push("HH:mm"),r.push("hh:mm a"),r.push("H:mm"),r.push("h:mm a"),r.push("H:mm:ss"),r.push("h:mm:ss a"),r.push("H:mm:ss.SSS"),r.push("h:mm:ss.SSS a"));for(const n of r){const s=Me.fromFormat(e,n);if(s.isValid)return new Mu(s.hour,s.minute,s.second,s.millisecond)}return null}plus(e,i){switch(e){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return Mu.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}return null}toUTCDateTime(){return Me.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}};const Hze=["geometry","scale","timeProperties"];function rrt(t,e){if(e!=null)for(const i of Hze)e.hasArcadeDependency(i)&&t.add(i);return t}function nrt(t,e){return mue.create(t,e,null,["$feature","$view"])}function Wze(t,e,i){return mue.create(t,e,i,["$feature","$view","$config"])}let mue=class yue{static async create(e,i,r,n){const{arcade:s,Dictionary:o}=await Vy();let u;try{u=s.parseScript(e)}catch(_){throw new L("arcade-bad-expression","Failed to parse arcade script",{script:e,error:_})}const d=s.scriptUsesGeometryEngine(u);d&&await s.enableGeometrySupport(),await s.loadDependentModules(new Set,u,null,!1,d);const h={vars:n.reduce((_,x)=>({..._,[x]:null}),{}),spatialReference:i,useAsync:!1},m=s.compileScript(u,h);let v=null;r!=null&&(v=new o(r),v.immutable=!0);const b=new o;return b.immutable=!1,b.setField("scale",0),new yue(e,s,u,m,i,b,v,o)}constructor(e,i,r,n,s,o,u,d){this.script=e,this._arcade=i,this._syntaxTree=r,this._compiled=n,this._spatialReference=s,this._viewDict=o,this._configDict=u,this._dictionaryCtor=d,this._dependencies=new Map,this._featureReader=new gue,this._dependencies.set("geometry",i.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}evaluate(e,i){const r=i.$view?.timeZone;if(i.$view){let n;if(this._viewDict.setField("scale",i.$view.scale),i.$view.timeProperties!=null){const{currentStart:s,currentEnd:o}=i.$view.timeProperties;n=new this._dictionaryCtor({currentStart:s!=null?r!=null?Gd.epochToArcadeDate(s,r):Gd.unknownEpochToArcadeDate(s):void 0,currentEnd:o!=null?r!=null?Gd.epochToArcadeDate(o,r):Gd.unknownEpochToArcadeDate(o):void 0,startIncluded:!0,endIncluded:!0})}this._viewDict.setField("timeProperties",n)}return this._compiled({vars:{$view:this._viewDict,$config:this._configDict,$feature:e},spatialReference:this._spatialReference,timeZone:r})}repurposeFeature(e,i){return this._featureReader.bind(e,i,this._spatialReference),this._featureReader}references(e){return this._dependencies.get(e)??!1}},gue=class{constructor(){this._boundTarget=null,this._boundSchema={fields:null,fieldsIndex:null,spatialReference:null,get geometryType(){return null},get objectIdField(){return null}},this.arcadeDeclaredClass="esri.arcade.Feature",this._contextTimeZone=null}bind(e,i,r){const n=i??new XA(vue(e.attributes));this._boundTarget=e,this._boundSchema.fields=n.fields,this._boundSchema.fieldsIndex=n,this._boundSchema.spatialReference=r}_getField(e){return this._boundSchema.fieldsIndex.get(e)}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(e){this._contextTimeZone=e}readArcadeFeature(){return this}hasField(e){return this._boundSchema.fieldsIndex.has(e)}geometry(){if("fromJSON"in this._boundTarget)return this._boundTarget.geometry;const e=oc(this._boundTarget.geometry);if(e){if(!this._boundSchema.spatialReference)throw new Error("InternalError: Expected spatial reference to be defined");e.spatialReference=this._boundSchema.spatialReference}return e}_hasGeometry(){return this._boundTarget.geometry!=null}isUnknownDateTimeField(e){return this._boundSchema.fieldsIndex.getTimeZone(e)===df}field(e,i=!0){const r=this._getField(e);if(r){const n=this._boundTarget.attributes[r.name];if(n==null)return null;switch(r.type){case"date-only":case"esriFieldTypeDateOnly":return Gze.fromReader(n);case"time-only":case"esriFieldTypeTimeOnly":return Bze.fromReader(n);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return Gd.fromReaderAsTimeStampOffset(n);case"date":case"esriFieldTypeDate":return this.isUnknownDateTimeField(e)?Gd.unknownEpochToArcadeDate(n):Gd.epochToArcadeDate(n,this.contextTimeZone??Za);default:return n}}if(i)throw new Error(`Field ${e} does not exist`);return null}setField(e,i){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this._boundSchema.fieldsIndex.fields.map(e=>e.name)}isEmpty(){return this._boundSchema.fields.length<=0&&!this._hasGeometry()}castToText(e=!1){return JSON.stringify(this._boundTarget)}gdbVersion(){return null}fullSchema(){return this._boundSchema}castAsJson(e=null){return{attributes:this._boundTarget.attributes,geometry:e?.keepGeometryType===!0?this.geometry():this.geometry()?.toJSON()??null}}castAsJsonAsync(e=null,i=null){return Promise.resolve(this.castAsJson(i))}};function vue(t){const e=[];for(const i in t)e.push({name:i,alias:i,type:typeof t[i]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"});return e}let Zze=class bue{static async from(e,i,r){const n=e.dictionary_version?Uae.parse(e.dictionary_version):null,s=new Set(e.itemsNames),o={};if(i)for(const v in i)o[v]=i[v];if(e.authoringInfo.configuration)for(const v of e.authoringInfo.configuration)o.hasOwnProperty(v.name)||(o[v.name]=v.value);const u=new Set(e.authoringInfo.symbol);for(const v of Object.keys(r))u.delete(v);u.size&&ie.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("missing-fields: fieldMap entries for the following symbol fields are missing",{symbolFields:u});const d=await Wze(e.expression,null,o);if(!d)throw new L("dictionary-renderer:expression-error","Unable to create dictionary renderer expression");const h=!n||!n.greaterEqual(4,0);h&&ie.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("Dictionary script does not support native field types. Applying fallback",{version:n});const m=new Jze(r,h);return new bue(h,s,d,m)}constructor(e,i,r,n){this._requiresFieldCoercionToString=e,this._itemNames=i,this._compiled=r,this._reader=n}get itemNames(){return this._itemNames}evaluate(e,i,r,n){try{return this._reader.bind(e,r,n),this._compiled.evaluate(this._reader,{$view:{scale:i}})}catch(s){ie.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("arcade: dictionary script evaluation failed",{error:s})}return null}createDictionaryFieldsIndex(e){if(!this._requiresFieldCoercionToString)return new XA(e);const i=e.map(r=>({...r,type:"esriFieldTypeString"}));return new XA(i)}},Jze=class extends gue{constructor(e,i){super(),this._fieldMap=e,this._requiresFieldCoercionToString=i}_getField(e){const i=this._fieldMap[e]??e;return this._boundSchema.fieldsIndex.get(i)}field(e){if(!this._requiresFieldCoercionToString)return super.field(e,!1);const i=this._getField(e);return i==null||this._boundTarget.attributes[i.name]==null?"":""+this._boundTarget.attributes[i.name]}};const mJ={Relative:0,Absolute:1},Yze={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},kj={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:mJ.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:mJ.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:"Loop",repeatdelay:0,easing:"Linear"},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}};function Qze(t){return typeof t=="function"}function art(t,e,i,r){return Qze(t)?t(e,i,r):t}function lrt(t){return[t.r,t.g,t.b,t.a]}const Xze=` /-,
`;function yJ(t){let e=t.length;for(;e--;)if(!Xze.includes(t.charAt(e)))return!1;return!0}function urt(t,e){const i=[];let r=0,n=-1;do if(n=t.indexOf("[",r),n>=r){if(n>r){const s=t.slice(r,n);i.push([s,null,yJ(s)])}if(r=n+1,n=t.indexOf("]",r),n>=r){if(n>r){const s=e[t.slice(r,n)];s&&i.push([null,s,!1])}r=n+1}}while(n!==-1);if(r<t.length){const s=t.slice(r);i.push([s,null,yJ(s)])}return i}function crt(t,e,i){let r="",n=null;for(const s of e){const[o,u,d]=s;if(o!=null&&o!=="")d?n=o:(n!=null&&(r+=n,n=null),r+=o);else{const h=t.readAttribute(u);h!=null&&h!==""&&(n!==null&&(r+=n,n=null),r+=h)}}return wue(r,i)}function drt(t,e,i,r){let n="",s=null;for(const o of e){const[u,d,h]=o;if(u!=null&&u!=="")h?s=u:(s!=null&&(n+=s,s=null),n+=u);else{let m=d;i!=null&&(m=o6e(d,i));const v=t.attributes[m];v!=null&&v!==""&&(s!=null&&(n+=s,s=null),n+=v)}}return wue(n,r)}function wue(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function prt(t,e,i,r,n,s,o=!0){const u=e/n,d=i/s,h=Math.ceil(u/2),m=Math.ceil(d/2);for(let v=0;v<s;v++)for(let b=0;b<n;b++){const _=4*(b+(o?s-v-1:v)*n);let x=0,$=0,E=0,A=0,O=0,D=0,R=0;const P=(v+.5)*d;for(let j=Math.floor(v*d);j<(v+1)*d;j++){const Q=Math.abs(P-(j+.5))/m,re=(b+.5)*u,ce=Q*Q;for(let ue=Math.floor(b*u);ue<(b+1)*u;ue++){let ye=Math.abs(re-(ue+.5))/h;const he=Math.sqrt(ce+ye*ye);he>=-1&&he<=1&&(x=2*he*he*he-3*he*he+1,x>0&&(ye=4*(ue+j*e),R+=x*t[ye+3],E+=x,t[ye+3]<255&&(x=x*t[ye+3]/250),A+=x*t[ye],O+=x*t[ye+1],D+=x*t[ye+2],$+=x))}}r[_]=A/$,r[_+1]=O/$,r[_+2]=D/$,r[_+3]=R/E}}function Kze(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function hrt(t){return t.data?.symbol??null}function frt(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function mrt(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function yrt(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function e6e(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const grt=(t,e=0)=>t==null||isNaN(t)?e:t,vrt=(t,e)=>t??e,brt=(t,e)=>t??e,wrt=t=>t.tintColor?Kze(t.tintColor):[255,255,255,1];let t6e=class{constructor(e){this._import=e}getImportPromise(){return this._promise==null&&(this._promise=this._import().then(e=>this.module=e)),this._promise}};function Srt(t){return new t6e(t)}function xrt(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function $rt(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function Trt(t){let e="normal",i="normal";if(t){const r=t.toLowerCase();r.includes("italic")?e="italic":r.includes("oblique")&&(e="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:e,weight:i}}function Ert(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function gJ(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=gJ(e);if(i!=null)return i}break;case"CIMTextSymbol":return gJ(t.symbol);case"CIMSolidFill":return t.color}return null}function vJ(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const i of e){const r=vJ(i);if(r!=null)return r}break}case"CIMTextSymbol":return vJ(t.symbol);case"CIMSolidStroke":return t.color}}function Mrt(t){for(const e of t)if(e.enable)switch(e.type){case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return!0}return!1}function bJ(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=bJ(e);if(i!==void 0)return i}break;case"CIMTextSymbol":return bJ(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function Art(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function Irt(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function krt(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const Ort=t=>t.includes("data:image/svg+xml");function Crt(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function Lk(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function Rrt(t,e,i,r,n,s,o=!0){const{infos:u}=s;let d=1,h=0,m=0,v=0,b=1;for(const{absoluteAnchorPoint:$,offsetX:E,offsetY:A,rotation:O,size:D,frameHeight:R,rotateClockWise:P,scaleSymbolsProportionally:j}of u)b=$?1:d,m=_J(E,A,h,b,m),v=wJ(E,A,h,b,v),R&&(j||o)&&(d*=D/R),h=SJ(O,P,h);const _=_J(r,n,h,b,m),x=wJ(r,n,h,b,v);return{size:t*d,rotation:SJ(e,i,h),offsetX:_,offsetY:x}}function i6e(t){if(t==null)return!1;if(Array.isArray(t))return t.every(e=>i6e(e));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function r6e(t,e){if(e==="color"||e==="outlinecolor"||e==="backgroundcolor"||e==="borderlinecolor"||e==="tintcolor")return[...Yze[e]];const i=kj[t];if(!i)throw new Error(`InternalError: default value for type ${t}.`);return i[e]}function n6e(t){return t.split(" ").map(e=>Number(e))}function s6e(t){return typeof t=="string"?n6e(t):t}function Prt(t){return t?.dashTemplate&&(t.dashTemplate=s6e(t.dashTemplate)),t}function Oj(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const i of e)if(i.type==="CIMVectorMarker")return Oj(i)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const i of e)if(i.symbol)return Oj(i.symbol)}}return"Normal"}function Drt(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const r=i.size??kj.CIMVectorMarker.size;r>e&&(e=r);break}}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const r=i.width;r!=null&&r>e&&(e=r);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&e6e(i.markerPlacement)){const r=i.size??kj.CIMVectorMarker.size;r>e&&(e=r)}break;case"CIMPictureFill":{const r=i.height;r!=null&&r>e&&(e=r)}}}return e}}}function o6e(t,e){if(e!==null){const i=e.get(t);return i?i.name:t}return t}function Nrt(t){return t.map(e=>({...e,propertyName:Lk(e.propertyName)}))}function Lrt(t){const e={};for(const i in t){const r=t[i];e[Lk(i)]=r}return e}function wJ(t,e,i,r,n){const s=i*Math.PI/180;if(s){const o=Math.cos(s);return(Math.sin(s)*t+o*e)*r+n}return e*r+n}function _J(t,e,i,r,n){const s=i*Math.PI/180;return s?(Math.cos(s)*t-Math.sin(s)*e)*r+n:t*r+n}function SJ(t,e,i){return e?i-t:i+t}function jrt(t,e,i){const r=i==="Color"||i==="TintColor"||i==="ToColor",n=i==="Rotation"||i==="Angle"||i==="ToRotation";let s=e[Lk(i)];if(s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180)),s==null&&(s=r6e(e.type,i.toLowerCase()),s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]]:n&&(s*=Math.PI/180))),e.primitiveName!=null){const o=t[e.primitiveName];if(o!=null){const u=o[i];u==null||(typeof u=="string"||typeof u=="number"||Array.isArray(u)?(s=u,s!=null&&(r?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180))):(s={valueExpressionInfo:u,defaultValue:s},s!=null&&(r?s={type:"Process",op:"ArcadeColor",value:s}:n&&(s={type:"Process",op:"Divide",left:s,right:180/Math.PI}))))}}if(s==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return s}function zrt(t,e,i){if(e[Lk(i)]!=null)return!0;if(e.primitiveName!=null){const r=t[e.primitiveName];if(r!=null&&r[i]!=null)return!0}return!1}function Frt(t,e){return Math.max(Math.min((t??e)/100,1),0)}const a6e={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let _ue=class{constructor(e,i,r,n){this.url=e,this.fieldMap=r,this.dictionaryInfo=n,this._symbolPartCache=new sue(100);const s=async()=>Zze.from(await n,i,r);this._evaluator=s()}async getSymbolAsync(e,i,r=!0){const n=await this._evaluator,s=i?.fields??vue(e.attributes),o=n.createDictionaryFieldsIndex(s),u=n.evaluate(e,i?.scale??0,o,i?.spatialReference);if(u==null)return null;const d=Iw(e.geometry),h=aJ.parse(u,n.itemNames,d),m=d==="esriGeometryPoint"&&!e.geometry?.hasZ;return await this._cimPartsToCIMSymbol(e,h.partNames,h.overrides,m,i,r,o)}async getSymbolForControlString(e,i,r){const n=await this._evaluator,s=aJ.parse(e,n.itemNames,i),o=i==="esriGeometryPoint"&&!r,u=xJ(await Promise.all(s.partNames.map(d=>this._getSymbolPart(d))),s.overrides,o);return new kn({data:u})}async _cimPartsToCIMSymbol(e,i,r,n,s,o,u){const d=i.map(v=>this._getSymbolPart(v,s));let h=await Promise.all(d);if(o&&this.fieldMap&&h.length>0){const{OverrideHelper:v}=await H(()=>import("./OverrideHelper-CYKc3wdn.js"),__vite__mapDeps([190,97,191,2]));h=z(h);for(const b of h)v.applyDictionaryTextOverrides(b,e,this.fieldMap,u,Oj(b))}const m=xJ(h,r,n);return new kn({data:m})}async _fetchSymbolPart(e,i){const r=await this.dictionaryInfo,n=(this.url+"/"+r.cimRefTemplateUrl).replaceAll(/\{itemName\}/gi,e),{data:s}=await $t(n,{responseType:"json",query:{f:"json"},...i});return s}async _getSymbolPart(e,i){let r=this._symbolPartCache.get(e);return r||(r=this._fetchSymbolPart(e,i),this._symbolPartCache.put(e,r)),r}};function xJ(t,e,i){if(!t||t.length===0)return null;const r={...t[0]};if(t.length>1){r.effects=null,r.symbolLayers=[];for(const n of t){const s=n;if(s.effects!=null)for(const o of s.symbolLayers)o.effects==null?o.effects=s.effects:o.effects.unshift(...s.effects);r.symbolLayers.unshift(...s.symbolLayers)}}return i&&(r.callout=a6e),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:e}}var Cj;let wl=Cj=class extends Vw(Uo){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){const t=this.getDictionaryInfo();return new _ue(this.url,this.config,this.fieldMap??{},t)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,r){r?.origin||super.writeVisualVariables(t,e,i,r)}clone(){return new Cj({config:z(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:z(this.fieldMap),url:z(this.url),visualVariables:z(this.visualVariables)})}async getSymbolAsync(t,e,i=!0){return this._loader.getSymbolAsync(t,e,i)}async getSymbolForControlString(t,e,i){return this._loader.getSymbolForControlString(t,e,i)}getDictionaryInfo(){return this._dictionaryInfoPromise||(this._dictionaryInfoPromise=this._fetchDictionaryInfo()),this._dictionaryInfoPromise}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await rs(t,e,null,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];e.has(r)&&t.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}async _fetchDictionaryInfo(){const{data:t}=await $t(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"}});return t}};l([p({type:_ue})],wl.prototype,"_loader",null),l([p({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],wl.prototype,"config",void 0),l([p({type:Object,json:{write:!0}})],wl.prototype,"fieldMap",void 0),l([p({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],wl.prototype,"scaleExpression",void 0),l([pe("scaleExpression")],wl.prototype,"writeData",null),l([p({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],wl.prototype,"scaleExpressionTitle",void 0),l([p({type:String,json:{write:!0}})],wl.prototype,"url",void 0),l([pe("visualVariables")],wl.prototype,"writeVisualVariables",null),wl=Cj=l([M("esri.renderers.DictionaryRenderer")],wl);var Rj;let ud=Rj=class extends B{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(ie.getLogger(this).error(".field: field must be a string value"),null):cx(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new Rj({color:this.color?.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};l([p({type:Ie,json:{type:[Number],write:!0}})],ud.prototype,"color",void 0),l([p({type:String,json:{write:!0}})],ud.prototype,"field",void 0),l([Ct("field")],ud.prototype,"castField",null),l([p({type:String,json:{write:!0}})],ud.prototype,"label",void 0),l([p({type:String,json:{write:!0}})],ud.prototype,"valueExpression",void 0),l([p({type:String,json:{write:!0}})],ud.prototype,"valueExpressionTitle",void 0),ud=Rj=l([M("esri.renderers.support.AttributeColorInfo")],ud);const Sue=ud;var Pj;let m3=Pj=class extends B{constructor(){super(...arguments),this.unit=null}clone(){return new Pj({unit:this.unit})}};l([p({type:String,json:{write:!0}})],m3.prototype,"unit",void 0),m3=Pj=l([M("esri.renderers.support.DotDensityLegendOptions")],m3);const l6e=m3;var Dj;let Us=Dj=class extends Vw(Uo){constructor(t){super(t),this.attributes=null,this.backgroundColor=new Ie([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Bi,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}set visualVariables(t){super.visualVariables=t}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new Ks({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new Dj({attributes:z(this.attributes),backgroundColor:z(this.backgroundColor),dotBlendingEnabled:z(this.dotBlendingEnabled),dotShape:z(this.dotShape),dotSize:z(this.dotSize),dotValue:z(this.dotValue),legendOptions:z(this.legendOptions),outline:z(this.outline),referenceScale:z(this.referenceScale),seed:z(this.seed),visualVariables:z(this.visualVariables),authoringInfo:z(this.authoringInfo)})}getControllerHash(){return`${this.attributes?.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await rs(t,e,null,i.valueExpression),i.field&&t.add(i.field)}};l([p({type:[Sue],json:{write:!0}})],Us.prototype,"attributes",void 0),l([p({type:Ie,json:{write:!0}})],Us.prototype,"backgroundColor",void 0),l([p({type:Boolean,json:{write:!0}})],Us.prototype,"dotBlendingEnabled",void 0),l([p({type:String,json:{write:!1}})],Us.prototype,"dotShape",void 0),l([p({type:Number,json:{write:!0}})],Us.prototype,"dotSize",void 0),l([p({type:l6e,json:{write:!0}})],Us.prototype,"legendOptions",void 0),l([p({type:Bi,json:{default:null,write:!0}})],Us.prototype,"outline",void 0),l([p({type:Number,json:{write:!0}})],Us.prototype,"dotValue",void 0),l([p({type:Number,json:{write:!0}})],Us.prototype,"referenceScale",void 0),l([p({type:Number,json:{write:!0}})],Us.prototype,"seed",void 0),l([Ae({dotDensity:"dot-density"})],Us.prototype,"type",void 0),Us=Dj=l([M("esri.renderers.DotDensityRenderer")],Us);var Nj;let qh=Nj=class extends B{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new Nj({color:this.color&&this.color.clone(),ratio:this.ratio})}};l([p({type:Ie,json:{type:[tt],default:null,write:{isRequired:!0}}})],qh.prototype,"color",void 0),l([p({type:Number,json:{write:{isRequired:!0}}})],qh.prototype,"ratio",void 0),qh=Nj=l([M("esri.renderers.support.HeatmapColorStop")],qh);let c0=class extends Re(B){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};l([p({type:String,json:{write:!0}})],c0.prototype,"minLabel",void 0),l([p({type:String,json:{write:!0}})],c0.prototype,"maxLabel",void 0),l([p({type:String,json:{write:!0}})],c0.prototype,"title",void 0),c0=l([M("esri.renderers.support.HeatmapLegendOptions")],c0);function N0(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function u6e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function d8(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}function xue(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function $ue(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function Tue(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function Eue(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function c6e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function d6e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function p6e(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function h6e(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function f6e(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function KA(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function m6e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}function Mue(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return Math.sqrt(i*i+r*r+n*n+s*s)}function eI(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return i*i+r*r+n*n+s*s}function p8(t){const e=t[0],i=t[1],r=t[2],n=t[3];return Math.sqrt(e*e+i*i+r*r+n*n)}function h8(t){const e=t[0],i=t[1],r=t[2],n=t[3];return e*e+i*i+r*r+n*n}function y6e(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function g6e(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function Aue(t,e){const i=e[0],r=e[1],n=e[2],s=e[3];let o=i*i+r*r+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),t[0]=i*o,t[1]=r*o,t[2]=n*o,t[3]=s*o),t}function f8(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function m8(t,e,i,r){const n=e[0],s=e[1],o=e[2],u=e[3];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t[3]=u+r*(i[3]-u),t}function v6e(t,e=1){const i=hx;let r,n,s,o,u,d;do r=2*i()-1,n=2*i()-1,u=r*r+n*n;while(u>=1);do s=2*i()-1,o=2*i()-1,d=s*s+o*o;while(d>=1);const h=Math.sqrt((1-u)/d);return t[0]=e*r,t[1]=e*n,t[2]=e*s*h,t[3]=e*o*h,t}function Gh(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12]*o,t[1]=i[1]*r+i[5]*n+i[9]*s+i[13]*o,t[2]=i[2]*r+i[6]*n+i[10]*s+i[14]*o,t[3]=i[3]*r+i[7]*n+i[11]*s+i[15]*o,t}function b6e(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],u=i[1],d=i[2],h=i[3],m=h*r+u*s-d*n,v=h*n+d*r-o*s,b=h*s+o*n-u*r,_=-o*r-u*n-d*s;return t[0]=m*h+_*-o+v*-d-b*-u,t[1]=v*h+_*-u+b*-o-m*-d,t[2]=b*h+_*-d+m*-u-v*-o,t[3]=e[3],t}function w6e(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function pS(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function tI(t,e){const i=t[0],r=t[1],n=t[2],s=t[3],o=e[0],u=e[1],d=e[2],h=e[3],m=Zi();return Math.abs(i-o)<=m*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-u)<=m*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-d)<=m*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(s-h)<=m*Math.max(1,Math.abs(s),Math.abs(h))}const _6e=$ue,S6e=Tue,x6e=Eue,$6e=Mue,T6e=eI,E6e=p8,M6e=h8;Object.freeze(Object.defineProperty({__proto__:null,add:xue,ceil:c6e,copy:N0,copyVec3:u6e,dist:$6e,distance:Mue,div:x6e,divide:Eue,dot:f8,equals:tI,exactEquals:pS,floor:d6e,inverse:g6e,len:E6e,length:p8,lerp:m8,max:h6e,min:p6e,mul:S6e,multiply:Tue,negate:y6e,normalize:Aue,random:v6e,round:f6e,scale:KA,scaleAndAdd:m6e,set:d8,sqrDist:T6e,sqrLen:M6e,squaredDistance:eI,squaredLength:h8,str:w6e,sub:_6e,subtract:$ue,transformMat4:Gh,transformQuat:b6e},Symbol.toStringTag,{value:"Module"}));function Ha(){return[0,0,0,0]}function A6e(t){return[t[0],t[1],t[2],t[3]]}function hn(t,e,i,r){return[t,e,i,r]}function I6e(t,e,i,r){return[t,e,i,r]}function k6e(t,e=Ha()){const i=Math.min(4,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function Iue(){return Ha()}function kue(){return hn(1,1,1,1)}function Oue(){return hn(1,0,0,0)}function Cue(){return hn(0,1,0,0)}function Rue(){return hn(0,0,1,0)}function Pue(){return hn(0,0,0,1)}const O6e=Iue(),C6e=kue(),R6e=Oue(),P6e=Cue(),D6e=Rue(),N6e=Pue();Object.freeze(Object.defineProperty({__proto__:null,ONES:C6e,UNIT_W:N6e,UNIT_X:R6e,UNIT_Y:P6e,UNIT_Z:D6e,ZEROS:O6e,clone:A6e,create:Ha,freeze:I6e,fromArray:k6e,fromValues:hn,ones:kue,unitW:Pue,unitX:Oue,unitY:Cue,unitZ:Rue,zeros:Iue},Symbol.toStringTag,{value:"Module"}));const y8=2.4;function L6e(t){return Ja(t*y8)}function j6e(t){return KTe(t)/y8}function z6e(t,e,i,r){let{color:n,ratio:s}=e,{color:o,ratio:u}=i;u===s&&(u===1?s-=1e-6:u+=1e-6);const d=Qr((r-s)/(u-s),0,1);m8(t,n.toArray(),o.toArray(),d)}function qrt(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:u})=>u>=0&&u<=1).sort((u,d)=>u.ratio-d.ratio).map(({color:u,ratio:d})=>({color:u,ratio:Math.max(d,.001)})),t.length<1)return i;let r=t[0],n=t[0],s=1;const o=Ha();for(let u=0;u<512;u++){const d=(u+.5)/512;for(;d>n.ratio&&s<t.length;)r=n,n=t[s++];z6e(o,r,n,d),i.set(o,4*u)}return i}function Grt(t,e,i){const r=Math.sqrt(t**2+e**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function Brt(t){return typeof t=="function"?t:t?e=>+e[t]:()=>1}var Lj;function $J(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:r}=t;if(e!=null||i!=null||r!=null){const{blurRadius:n,maxPixelIntensity:s,minPixelIntensity:o,...u}=t;return u}}return t}let Hr=Lj=class extends Uo{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new qh({ratio:0,color:new Ie("rgba(255, 140, 0, 0)")}),new qh({ratio:.75,color:new Ie("rgba(255, 140, 0, 1)")}),new qh({ratio:.9,color:new Ie("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(t){return $J(t)}get blurRadius(){return j6e(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",L6e(t)),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(y8**2*this.blurRadius**4)}read(t,e){t=$J(t),super.read(t,e)}getSymbol(){return new wr}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&ts(t,e,i),r&&typeof r=="string"&&await rs(t,e,null,r)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new Lj({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:z(this.colorStops),field:this.field,legendOptions:z(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};l([p({type:Pi,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Hr.prototype,"authoringInfo",void 0),l([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Hr.prototype,"blurRadius",null),l([p({type:[qh],json:{write:{isRequired:!0}}})],Hr.prototype,"colorStops",void 0),l([p({type:String,json:{write:!0}})],Hr.prototype,"field",void 0),l([p({type:c0,json:{write:!0}})],Hr.prototype,"legendOptions",void 0),l([p({type:Number,json:{write:!0}})],Hr.prototype,"maxDensity",void 0),l([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Hr.prototype,"maxPixelIntensity",null),l([p({type:Number,json:{write:!0}})],Hr.prototype,"minDensity",void 0),l([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Hr.prototype,"minPixelIntensity",null),l([p({type:Number,cast:gt,json:{write:!0}})],Hr.prototype,"radius",void 0),l([p({type:Number,range:{min:0},json:{default:0,write:!0}})],Hr.prototype,"referenceScale",void 0),l([Ae({heatmap:"heatmap"})],Hr.prototype,"type",void 0),l([p({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Hr.prototype,"valueExpression",void 0),l([p({type:String})],Hr.prototype,"valueExpressionTitle",void 0),l([p({readOnly:!0})],Hr.prototype,"_pixelIntensityToDensity",null),Hr=Lj=l([M("esri.renderers.HeatmapRenderer")],Hr);let Wm=class extends Re(B){constructor(){super(...arguments),this.color=new Ie([0,0,0,0]),this.label=null,this.threshold=0}};l([p({type:Ie,json:{write:!0}})],Wm.prototype,"color",void 0),l([p({type:String,json:{write:!0}})],Wm.prototype,"label",void 0),l([p({type:Number,range:{min:0,max:1},json:{write:!0}})],Wm.prototype,"threshold",void 0),Wm=l([M("esri.renderers.support.OthersCategory")],Wm);const F6e={base:Gn,key:"type",typeMap:{size:At,opacity:Nd}};let qs=class extends Vw(Re(Uo)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Ie([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Wm,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){return new wr({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(is)}getAttributeHash(){return this.visualVariables?.reduce((e,i)=>e+i.getAttributeHash(),"")??""}getMeshHash(){return this.symbols.reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const r of this.attributes)r.valueExpression&&await rs(e,i,null,r.valueExpression),r.field&&e.add(r.field)}};l([p({type:[Sue],json:{write:!0}})],qs.prototype,"attributes",void 0),l([p(t8)],qs.prototype,"backgroundFillSymbol",void 0),l([p({type:Ie,json:{write:!0}})],qs.prototype,"defaultColor",void 0),l([p({type:String,json:{write:!0}})],qs.prototype,"defaultLabel",void 0),l([p({type:Number,range:{min:0,max:1},json:{write:!0}})],qs.prototype,"holePercentage",void 0),l([p({type:Wm,json:{write:!0}})],qs.prototype,"othersCategory",void 0),l([p({type:i8,json:{write:!0}})],qs.prototype,"legendOptions",void 0),l([p({type:Bi,json:{default:null,write:!0}})],qs.prototype,"outline",void 0),l([p({type:Number,cast:gt,json:{write:!0}})],qs.prototype,"size",void 0),l([Ae({pieChart:"pie-chart"})],qs.prototype,"type",void 0),l([p({types:[F6e]})],qs.prototype,"visualVariables",void 0),qs=l([M("esri.renderers.PieChartRenderer")],qs);const kx={key:"type",base:Uo,typeMap:{heatmap:Hr,simple:xs,"unique-value":pi,"class-breaks":gr,"dot-density":Us,dictionary:wl,"pie-chart":qs},errorContext:"renderer"},V6e={key:"type",base:Uo,typeMap:{simple:xs,"unique-value":pi,"class-breaks":gr,heatmap:Hr},errorContext:"renderer",validate:U6e};function U6e(t){switch(t.type){case"simple":return q6e(t);case"unique-value":return G6e(t);case"class-breaks":return B6e(t);case"heatmap":return t}}function q6e(t){if(t.symbol)return t;ie.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function G6e(t){const e=t.uniqueValueInfos,i=e?.filter(({symbol:r,label:n},s)=>(r||ie.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${s}] ${n}) without a symbol from web scene.`),!!r));return i?.length!==e?.length&&(t.uniqueValueInfos=i),t}function B6e(t){const e=t.classBreakInfos,i=e?.filter(({symbol:r,label:n},s)=>(r||ie.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${s}] ${n}) without a symbol from web scene.`),!!r));return i?.length!==e?.length&&(t.classBreakInfos=i),t}function Zrt(t,e){return QS(t,null,e)}const H6e=Sw({types:kx});function QS(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i?.messages&&i.messages.push(new Jo("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):H6e(t,e,i):null}var jj;let Tn=jj=class extends Qh{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=gt("12px"),this.fields=[],this.renderer=null}writeFields(t,e,i){const r=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());ur(i,r,e)}readRenderer(t,e,i){const r=e.drawingInfo?.renderer;return r?QS(r,e,i)??void 0:n8(e,i)}clone(){return new jj({fields:z(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:z(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:z(this.popupTemplate),renderer:z(this.renderer),binType:z(this.binType),size:this.size})}};l([Ae({binning:"binning"})],Tn.prototype,"type",void 0),l([Ae({geohash:"geohash",square:"square"}),p({type:["geohash","square"]})],Tn.prototype,"binType",void 0),l([p({type:Number,json:{write:!0}})],Tn.prototype,"fixedBinLevel",void 0),l([p({type:[$i],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Tn.prototype,"labelingInfo",void 0),l([p(Ok)],Tn.prototype,"labelsVisible",void 0),l([p({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Tn.prototype,"maxScale",void 0),l([p(kk)],Tn.prototype,"popupEnabled",void 0),l([p({type:Dw,json:{name:"popupInfo",write:!0}})],Tn.prototype,"popupTemplate",void 0),l([p({cast:t=>t==="auto"?t:_s(gt(t))})],Tn.prototype,"size",void 0),l([p({type:[Zn],json:{write:!0}})],Tn.prototype,"fields",void 0),l([pe("fields")],Tn.prototype,"writeFields",null),l([p({types:kx,json:{write:{target:"drawingInfo.renderer"}}})],Tn.prototype,"renderer",void 0),l([se("renderer",["drawingInfo.renderer"])],Tn.prototype,"readRenderer",null),Tn=jj=l([M("esri.layers.support.FeatureReductionBinning")],Tn);var zj;function TJ(t){return t.type==="simple"&&!t.visualVariables?.length}let vr=zj=class extends B{constructor(t){super(t),this.type="cluster",this.clusterRadius=gt("80px"),this.clusterMinSize=gt("12px"),this.clusterMaxSize=gt("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(t,e,i){const r=e.drawingInfo?.renderer;return r?.authoringInfo?.isAutoGenerated?null:r?TJ(r)?null:QS(r,e,i)??void 0:n8(e,i)}readSymbol(t,e,i){const r=e.drawingInfo?.renderer;return r?.authoringInfo?.isAutoGenerated?null:r&&TJ(r)?QS(r,e,i)?.symbol:null}writeSymbol(t,e,i,r){const n=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||n){const s=new xs({symbol:t});e.drawingInfo={renderer:s.write({},r)}}}writeFields(t,e,i){const r=t.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());ur(i,r,e)}readFields(t,e,i){return t.filter(r=>!r.isAutoGenerated).map(r=>Zn.fromJSON(r))}clone(){return new zj({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:z(this.labelingInfo),labelsVisible:this.labelsVisible,fields:z(this.fields),maxScale:this.maxScale,renderer:z(this.renderer),symbol:z(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:z(this.popupTemplate)})}};l([p({type:["cluster"],readOnly:!0,json:{write:!0}})],vr.prototype,"type",void 0),l([p({cast:t=>t==="auto"?t:_s(gt(t)),json:{write:!0}})],vr.prototype,"clusterRadius",void 0),l([p({type:Number,cast:gt,json:{write:!0}})],vr.prototype,"clusterMinSize",void 0),l([p({type:Number,cast:gt,json:{write:!0}})],vr.prototype,"clusterMaxSize",void 0),l([p({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],vr.prototype,"maxScale",void 0),l([p(kk)],vr.prototype,"popupEnabled",void 0),l([p({type:Dw,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],vr.prototype,"popupTemplate",void 0),l([p({types:kx,json:{write:{target:"drawingInfo.renderer"}}})],vr.prototype,"renderer",void 0),l([se("renderer",["drawingInfo.renderer"])],vr.prototype,"readRenderer",null),l([p({types:zIe})],vr.prototype,"symbol",void 0),l([se("symbol",["drawingInfo.renderer"])],vr.prototype,"readSymbol",null),l([pe("symbol")],vr.prototype,"writeSymbol",null),l([p({type:[$i],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],vr.prototype,"labelingInfo",void 0),l([p(Ok)],vr.prototype,"labelsVisible",void 0),l([p({type:[Zn],json:{write:!0}})],vr.prototype,"fields",void 0),l([pe("fields")],vr.prototype,"writeFields",null),l([se("fields")],vr.prototype,"readFields",null),vr=zj=l([M("esri.layers.support.FeatureReductionCluster")],vr);var Fj;let hS=Fj=class extends Qh{constructor(t){super(t),this.type="selection"}clone(){return new Fj}};l([p({type:["selection"]})],hS.prototype,"type",void 0),hS=Fj=l([M("esri.layers.support.FeatureReductionSelection")],hS);const EJ={key:"type",base:Qh,typeMap:{cluster:vr,binning:Tn}},W6e={types:{key:"type",base:Qh,typeMap:{selection:hS,cluster:vr,binning:Tn}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:EJ},"portal-item":{types:EJ},"web-scene":{types:{key:"type",base:Qh,typeMap:{selection:hS}},name:"layerDefinition.featureReduction",write:{allowNull:!0,layerContainerTypes:ui}}}}},Z6e=()=>ie.getLogger("esri.views.2d.layers.support.clusterUtils");q.add("esri-cluster-arcade-enabled",!0);const J6e=q("esri-cluster-arcade-enabled"),Y6e=new Set(["simple-line","simple-fill","picture-fill"]);function MJ(t,e){let i=e.clone();if(!Q6e(i))return i;if(e.symbols.some(r=>Y6e.has(r.type))&&(i=new xs({symbol:new wr})),i.authoringInfo||(i.authoringInfo=new Pi),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const r=(i.visualVariables||[]).filter(n=>n.valueExpression!=="$view.scale");r.forEach(n=>{n.type==="rotation"?n.field?n.field=sm(t,n.field,"avg_angle","number"):n.valueExpression&&(n.field=f1(t,n.valueExpression,"avg_angle","number"),n.valueExpression=null):n.normalizationField?(n.field=sm(t,n.field,"avg_norm","number",n.normalizationField),n.normalizationField=null):n.field?n.field=sm(t,n.field,"avg","number"):n.valueExpression&&(n.field=f1(t,n.valueExpression,"avg","number"),n.valueExpression=null)}),i.visualVariables=r}switch(i.type){case"simple":break;case"pie-chart":for(const r of i.attributes)r.field?r.field=sm(t,r.field,"sum","number"):r.valueExpression&&(r.field=f1(t,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":i.field?i.field=sm(t,i.field,"mode","string"):i.valueExpression&&(i.field=f1(t,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=sm(t,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=sm(t,i.field,"avg","number"):i.valueExpression&&(i.field=f1(t,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const Q6e=t=>{const e=i=>Z6e().error(new L("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!J6e){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function X6e(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const r=i,n="field",s=e.toLowerCase()+",norm:"+n+","+r.toLowerCase();return"cluster_avg_"+uF(s)}}}function f1(t,e,i,r){const n=uF(e),s=i==="mode"?`cluster_type_${n}`:i==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return t.some(o=>o.name===s)||t.push(new Zn({name:s,isAutoGenerated:!0,onStatisticExpression:new Ph({expression:e,returnType:r}),statisticType:i})),s}function sm(t,e,i,r,n){if(e==="cluster_count"||t.some(o=>o.name===e))return e;const s=X6e(i,e,n);return t.some(o=>o.name===s)||(i==="avg_norm"?t.push(new Zn({name:s,isAutoGenerated:!0,onStatisticExpression:new Ph({expression:`$feature.${e} / $feature.${n}`,returnType:r}),statisticType:"avg"})):t.push(new Zn({name:s,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),s}const K6e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.aggregateGraphicOrigin=new cze(this),this.addHandles(be(()=>this.renderer,()=>{if(this.featureReduction){const n=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",n)}},Zo))}set featureReduction(r){const n=this._normalizeFeatureReduction(r);this._set("featureReduction",n)}set renderer(r){}_withClusterVariable(r,n,s){const o=r.clone();return"visualVariables"in o&&(o.visualVariables||(o.visualVariables=[]),o.visualVariables.some(u=>u.type==="size")||o.visualVariables.push(new At({field:"cluster_count",stops:[new Cl({value:1}),new Cl({useMinValue:!0,size:n}),new Cl({useMaxValue:!0,size:s})]}))),o}_normalizeFeatureReduction(r){if(r?.type!=="cluster")return r;const n=r.clone(),s=[new Zn({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],o=(n.fields??[]).filter(b=>!b.isAutoGenerated),u=r.renderer&&!r.renderer.authoringInfo?.isAutoGenerated,{clusterMinSize:d,clusterMaxSize:h}=n;if(u){n.fields=[...s,...o];const b=this._withClusterVariable(n.renderer,d,h);return n.effectiveFeatureRenderer=b,n.effectiveClusterRenderer=b,n}if(r.symbol){if(n.fields=[...s,...o],n.renderer=null,!this.renderer)return n.effectiveFeatureRenderer=null,n.effectiveClusterRenderer=null,n;const b=MJ(s,this.renderer),_=this._withClusterVariable(b,d,h),x="visualVariables"in _&&_.visualVariables?_.visualVariables:[],$=new xs({symbol:r.symbol,visualVariables:x});return n.fields=[...s,...o],n.effectiveFeatureRenderer=_,n.effectiveClusterRenderer=$,n}if(!this.renderer)return r;const m=MJ(s,this.renderer);n.fields=[...s,...o],n.renderer=m;const v=this._withClusterVariable(m,d,h);return n.effectiveFeatureRenderer=v,n.effectiveClusterRenderer=v,n}};return l([p({readOnly:!0,clonable:!1})],i.prototype,"aggregateGraphicOrigin",void 0),l([p(W6e)],i.prototype,"featureReduction",null),i=l([M("esri.layers.mixins.FeatureReductionLayer")],i),i},AJ={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,ParquetLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},IJ={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},kJ={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},eFe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GaussianSplatLayer:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-base-layers":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-ground-layers":{IntegratedMesh3DTilesLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":AJ,"web-map/basemap-base-layers":IJ,"web-map/tables":kJ,"link-chart/operational-layers":{...AJ,LinkChartLayer:!0},"link-chart/basemap-base-layers":IJ,"link-chart/tables":kJ,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},tFe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(r,n,s){return s?.portalItem?.type==="Group Layer"?void 0:r}writeListMode(r,n,s,o){(o&&o.layerContainerType==="ground"||r&&z0e(this,s,{},o))&&(n[s]=r)}writeOperationalLayerType(r,n,s){r&&(n[s]=r)}writeTitle(r,n){n.title=r??"Layer"}readVisibilityTimeExtent(r){return r?qt.fromArray(r):null}writeVisibilityTimeExtent(r,n,s,o){r&&o.layerContainerType!=="tables"&&(r.isEmpty?o?.messages&&o.messages.push(new L("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):n[s]=r.toArray())}read(r,n){n&&(n.layer=this),pK(this,r,s=>super.read(r,s),n)}write(r,n){if(!this.persistenceEnabled&&!n?.ignorePersistenceEnabled)return null;if(n?.origin){const u=`${n.origin}/${n.layerContainerType||"operational-layers"}`;let h=!!eFe[u]?.[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&u==="web-scene/operational-layers"&&(h=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&u==="web-map/operational-layers"&&(h=!1),!h)return n.messages?.push(new L("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${u}'`,{layer:this})),null}const s=super.write(r,{...n,layer:this}),o=!!n&&!!n.messages&&!!n.messages.filter(u=>u instanceof L&&u.name==="web-document-write:property-required").length;return Ew(s?.url)?(n?.messages?.push(new L("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&o?null:s}beforeSave(){}};return l([p({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],i.prototype,"id",void 0),l([se("id",["id"])],i.prototype,"readId",null),l([p(Mle)],i.prototype,"listMode",void 0),l([pe("listMode")],i.prototype,"writeListMode",null),l([p({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:ui,isRequired:!0}}}}})],i.prototype,"operationalLayerType",void 0),l([pe("operationalLayerType")],i.prototype,"writeOperationalLayerType",null),l([p(K4)],i.prototype,"opacity",void 0),l([p({type:Boolean,readOnly:!1})],i.prototype,"persistenceEnabled",void 0),l([p({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],i.prototype,"title",void 0),l([pe("title"),pe(["web-scene"],"title")],i.prototype,"writeTitle",null),l([p({type:qt,json:{origins:{"web-scene":{write:{layerContainerTypes:ui}}}}})],i.prototype,"visibilityTimeExtent",void 0),l([se("visibilityTimeExtent")],i.prototype,"readVisibilityTimeExtent",null),l([pe(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[tt,ww]]}})],i.prototype,"writeVisibilityTimeExtent",null),l([p({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:ui}}})],i.prototype,"visible",void 0),i=l([M("esri.layers.mixins.OperationalLayer")],i),i};var Vj;const uE=new Be({asc:"ascending",desc:"descending"});var Rb;let Zm=(Rb=class extends B{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new Vj({field:this.field,valueExpression:this.valueExpression,order:this.order})}},Vj=Rb,Rb);l([p({type:String,json:{write:!0}})],Zm.prototype,"field",void 0),l([p({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Zm.prototype,"valueExpression",void 0),l([p({type:uE.apiValues,json:{type:uE.jsonValues,read:uE.read,write:uE.write}})],Zm.prototype,"order",void 0),Zm=Vj=l([M("esri.layers.support.OrderByInfo")],Zm);function iFe(t,e,i){if(!t)return null;const r=t.find(s=>!!s.field);if(!r)return null;const n=new Zm;return n.read(r,i),[n]}function rFe(t,e,i,r){const n=t.find(s=>!!s.field);n&&ur(i,[n.toJSON()],e)}const nFe={type:[Zm],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:iFe},write:{writer:rFe}}},sFe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.orderBy=null}};return l([p(nFe)],i.prototype,"orderBy",void 0),i=l([M("esri.layers.mixins.OrderedLayer")],i),i},oFe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=at(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,n,s){if(n.itemId)return new Ue({id:n.itemId,portal:s?.portal})}writePortalItem(r,n){r?.id&&(n.itemId=r.id)}async loadFromPortal(r,n){if(this.portalItem?.id)try{const{load:s}=await H(()=>import("./layersLoader-Co20GV_w.js"),__vite__mapDeps([287,161,162,160]));return ft(n),await s({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData,layerModuleTypeMap:r.layerModuleTypeMap,populateGroupLayer:r.populateGroupLayer},n)}catch(s){throw Yr(s)||ie.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch(n=>(Dl(n),!0)))}async setUserPrivileges(r,n){if(!St.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(n);if(this.url)try{const{features:{edit:s,fullEdit:o},content:{updateItem:u}}=await this._fetchUserPrivileges(r,n);this._set("userHasEditingPrivileges",s),this._set("userHasFullEditingPrivileges",o),this._set("userHasUpdateItemPrivileges",u)}catch(s){Dl(s)}}async _fetchUserPrivileges(r,n){let s=this.portalItem;if(!r||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(n);const o=!pt?.findCredential(this.url),u=r===s.id;if(u&&s.portal.user)return this._getUserPrivileges(s,o);let d,h;if(u)d=s.portal.url;else try{d=await aF(this.url,n)}catch(_){Dl(_)}if(!d||!sbe(d,s.portal.url))return this._fetchFallbackUserPrivileges(n);try{const _=n!=null?n.signal:null;h=await pt?.getCredential(`${d}/sharing`,{prompt:!1,signal:_})}catch(_){Dl(_)}const m=!0,v=!1,b=!1;if(!h)return{features:{edit:m,fullEdit:v},content:{updateItem:b}};try{if(u?await s.reload():(s=new Ue({id:r,portal:{url:d}}),await s.load(n)),s.portal.user)return this._getUserPrivileges(s,o)}catch(_){Dl(_)}return{features:{edit:m,fullEdit:v},content:{updateItem:b}}}_getUserPrivileges(r,n){const s=jDe(r);return n&&(s.features.edit=!0),s}async _fetchFallbackUserPrivileges(r){let n=!0;try{n=await this._fetchUserHasEditingPrivileges(r)}catch(s){Dl(s)}return{features:{edit:n,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(r){const n=this.url?pt?.findCredential(this.url):null;if(!n)return!0;const s=cE.credential===n?cE.user:await this._fetchEditingUser(r);return cE.credential=n,cE.user=s,s?.privileges==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(r){const n=this.portalItem?.portal?.user;if(n)return n;const s=pt?.findServerInfo(this.url??"");if(!s?.owningSystemUrl)return null;const o=`${s.owningSystemUrl}/sharing/rest`,u=de.getDefault();if(u&&u.loaded&&Zl(u.restUrl)===Zl(o))return u.user;const d=`${o}/community/self`,h=r!=null?r.signal:null,m=await sk($t(d,{authMode:"no-prompt",query:{f:"json"},signal:h}));return m.ok?Ht.fromJSON(m.value.data):null}read(r,n){n&&(n.layer=this),super.read(r,n)}write(r,n){const s=n?.portal,o=this.portalItem?.id&&(this.portalItem.portal||de.getDefault());return s&&o&&!xK(o.restUrl,s.restUrl)?(n.messages&&n.messages.push(new L("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...n,layer:this})}};return l([p({type:Ue})],i.prototype,"portalItem",null),l([se("web-document","portalItem",["itemId"])],i.prototype,"readPortalItem",null),l([pe("web-document","portalItem",{itemId:{type:String}})],i.prototype,"writePortalItem",null),l([p({clonable:!1})],i.prototype,"resourceReferences",void 0),l([p({type:Boolean,readOnly:!0})],i.prototype,"userHasEditingPrivileges",void 0),l([p({type:Boolean,readOnly:!0})],i.prototype,"userHasFullEditingPrivileges",void 0),l([p({type:Boolean,readOnly:!0})],i.prototype,"userHasUpdateItemPrivileges",void 0),i=l([M("esri.layers.mixins.PortalLayer")],i),i},cE={credential:null,user:null};let _2=class extends _e{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};l([p()],_2.prototype,"updating",void 0),l([p()],_2.prototype,"status",void 0),_2=l([M("esri.layers.support.PublishingInfo")],_2);const aFe=Symbol(),lFe=t=>{var n;var e;const i=t;let r=(n=class extends i{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const s=this._get("publishingInfo");if(s)return s;const o=new _2;return this._checkPublishingStatus(o),o}_checkPublishingStatus(s){let d=0;const h=async v=>{let b;s.updating=!0;try{b=await this.fetchPublishingStatus()}catch{b="unavailable"}b!=="published"&&b!=="unavailable"||(s.status==="publishing"&&this.refresh(),m.remove()),s.status=b,s.updating=!1,m.removed||(d=setTimeout(h,v,v+125))},m={removed:!1,remove(){this.removed=!0,clearTimeout(d)}};this.when().catch(()=>m.remove()),h(250),this.addHandles(m)}},e=aFe,n);return l([p({readOnly:!0,clonable:!1})],r.prototype,"publishingInfo",null),r=l([M("esri.layers.mixins.PublishableLayer")],r),r},Bh=new fe,fS=new WeakMap;function uFe(t){dFe(t)&&Bh.push(new WeakRef(t))}function cFe(t){const e=Bh.find(i=>i.deref()===t);e&&Bh.remove(e)}function dFe(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function Due(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:Due(e,t%e):0}let hP=0,dE=0;function pFe(){const t=Date.now();let e=!1;for(const i of Bh){const r=i.deref();r?r.refreshInterval&&t-(fS.get(r)??0)+5>=6e4*r.refreshInterval&&(fS.set(r,t),r.refresh(t)):e=!0}if(e)for(let i=Bh.length-1;i>=0;i--)Bh.at(i).deref()||Bh.removeAt(i)}RX(()=>{const t=Date.now();let e=0;for(const i of Bh){const r=i.deref();r&&(e=Due(Math.round(6e4*r.refreshInterval),e),r.refreshInterval?fS.get(r)||fS.set(r,t):fS.delete(r))}if(e!==dE){if(dE=e,clearInterval(hP),dE===0)return void(hP=0);hP=setInterval(pFe,dE)}},Zo);const OJ=.1,hFe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=RI(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||uFe(this)},()=>{})}destroy(){cFe(this)}castRefreshInterval(r){return r>=OJ?r:r<=0?0:OJ}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){Yd(this._debounceHasDataChanged()).then(n=>{n&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:n})},n=>{ie.getLogger(this).error(n),this.emit("refresh",{dataChanged:!1,error:n})})}async hasDataChanged(){return!0}get test(){}};return l([p({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:ui}}}}})],i.prototype,"refreshInterval",void 0),l([Ct("refreshInterval")],i.prototype,"castRefreshInterval",null),l([p({readOnly:!0})],i.prototype,"refreshTimestamp",void 0),l([p({readOnly:!0})],i.prototype,"refreshParameters",null),i=l([M("esri.layers.mixins.RefreshableLayer")],i),i},Nue=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},n=this.parent;n?.effectiveScaleRange!==void 0&&fFe(r,n.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===r.minScale&&s.maxScale===r.maxScale?s:r}};return l([p({type:Number,nonNullable:!0,json:{write:!0}})],i.prototype,"minScale",void 0),l([p({type:Number,nonNullable:!0,json:{write:!0}})],i.prototype,"maxScale",void 0),l([p({readOnly:!0})],i.prototype,"effectiveScaleRange",null),i=l([M("esri.layers.mixins.ScaleRangeLayer")],i),i};function fFe(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}function CJ(t,e){return Bl.fromJSON({value:t,unit:e})}let ln=class extends Re(B){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?qt.fromArray(i.timeExtent):null}writeFullTimeExtent(e,i){e?.start!=null&&e.end!=null?i.timeExtent=e.toArray():i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?CJ(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?CJ(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=e?.toJSON().value??null,i.timeIntervalUnits=e?.toJSON().unit??null}};l([p({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],ln.prototype,"cumulative",void 0),l([p({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],ln.prototype,"endField",void 0),l([p({type:qt,json:{write:{enabled:!0,allowNull:!0}}})],ln.prototype,"fullTimeExtent",void 0),l([se("fullTimeExtent",["timeExtent"])],ln.prototype,"readFullTimeExtent",null),l([pe("fullTimeExtent")],ln.prototype,"writeFullTimeExtent",null),l([p({type:Boolean,json:{write:!0}})],ln.prototype,"hasLiveData",void 0),l([p({type:Bl,json:{write:{enabled:!0,allowNull:!0}}})],ln.prototype,"interval",void 0),l([se("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],ln.prototype,"readInterval",null),l([pe("interval")],ln.prototype,"writeInterval",null),l([p({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],ln.prototype,"startField",void 0),l([p(wA("timeReference",!0))],ln.prototype,"timeZone",void 0),l([p({type:String,json:{write:{enabled:!0,allowNull:!0}}})],ln.prototype,"trackIdField",void 0),l([p({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],ln.prototype,"useTime",void 0),l([p({type:[Date],json:{read:!1}})],ln.prototype,"stops",void 0),ln=l([M("esri.layers.support.TimeInfo")],ln);const mFe={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:ui}}},yFe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,n){const s=n.timeInfo.exportOptions;if(!s)return null;const o=s.timeOffset,u=BF.fromJSON(s.timeOffsetUnits);return o&&u?new Bl({value:o,unit:u}):null}set timeInfo(r){Ane(r,this.fieldsIndex),this._set("timeInfo",r)}};return l([p({type:qt,json:{write:!1}})],i.prototype,"timeExtent",void 0),l([p({type:Bl})],i.prototype,"timeOffset",void 0),l([se("service","timeOffset",["timeInfo.exportOptions"])],i.prototype,"readOffset",null),l([p({value:null,type:ln,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],i.prototype,"timeInfo",null),l([p(mFe)],i.prototype,"useViewTime",void 0),i=l([M("esri.layers.mixins.TemporalLayer")],i),i};let gFe=class extends WS{constructor(e){super(),this.type="track",this.trackInfoProvider=e}get id(){return this.trackInfoProvider.id}get[wx](){return this.trackInfoProvider.trackInfo}},Da=class extends Re(B){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};l([p({type:[$i],json:{write:!0}})],Da.prototype,"labelingInfo",void 0),l([p(Ok)],Da.prototype,"labelsVisible",void 0),l([p({types:kx,json:{write:!0}})],Da.prototype,"renderer",void 0),l([p({type:Boolean,json:{write:!0}})],Da.prototype,"visible",void 0),Da=l([M("esri.layers.support.TrackPartInfo")],Da);let Gs=class extends Re(B){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new Da({renderer:new xs({symbol:ZA.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new Da({renderer:new xs({symbol:ZA.clone()})}),this.trackLines=new Da({renderer:new xs({symbol:KF.clone()})}),this.timeField="startTimeField"}writeFields(e,i,r){const n=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());ur(r,n,i)}};l([p({type:Boolean,json:{write:!0}})],Gs.prototype,"enabled",void 0),l([p({type:[Zn],json:{write:!0}})],Gs.prototype,"fields",void 0),l([pe("fields")],Gs.prototype,"writeFields",null),l([p({type:Da,json:{write:!0}})],Gs.prototype,"latestObservations",void 0),l([p({type:Bl,json:{write:!0}})],Gs.prototype,"maxDisplayDuration",void 0),l([p({type:Number,json:{write:!0}})],Gs.prototype,"maxDisplayObservationsPerTrack",void 0),l([p(kk)],Gs.prototype,"popupEnabled",void 0),l([p({type:Dw,json:{name:"popupInfo",write:!0}})],Gs.prototype,"popupTemplate",void 0),l([p({type:Da,json:{write:!0}})],Gs.prototype,"previousObservations",void 0),l([p({type:Da,json:{write:!0}})],Gs.prototype,"trackLines",void 0),l([p({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],Gs.prototype,"timeField",void 0),Gs=l([M("esri.layers.support.TrackInfo")],Gs);const vFe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.trackGraphicOrigin=new gFe(this),this.trackInfo=null}};return l([p({readOnly:!0,clonable:!1})],i.prototype,"trackGraphicOrigin",void 0),l([p({type:Gs})],i.prototype,"trackInfo",void 0),i=l([M("esri.layers.mixins.TrackableLayer")],i),i},RJ=new Be({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Fu=class extends Re(B){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};l([p({json:{write:!0}})],Fu.prototype,"name",void 0),l([p({json:{write:!0}})],Fu.prototype,"description",void 0),l([p({json:{read:RJ.read,write:RJ.write}})],Fu.prototype,"drawingTool",void 0),l([p({json:{write:!0}})],Fu.prototype,"prototype",void 0),l([p({json:{write:!0}})],Fu.prototype,"thumbnail",void 0),Fu=l([M("esri.layers.support.FeatureTemplate")],Fu);let Pu=class extends Re(B){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const r of Object.keys(e))i[r]=vk(e[r]);return i}writeDomains(e,i){const r={};for(const n of Object.keys(e))e[n]&&(r[n]=e[n]?.toJSON());i.domains=r}};l([p({json:{write:!0}})],Pu.prototype,"id",void 0),l([p({json:{write:!0}})],Pu.prototype,"name",void 0),l([p({json:{write:!0}})],Pu.prototype,"domains",void 0),l([se("domains")],Pu.prototype,"readDomains",null),l([pe("domains")],Pu.prototype,"writeDomains",null),l([p({type:[Fu],json:{write:!0}})],Pu.prototype,"templates",void 0),Pu=l([M("esri.layers.support.FeatureType")],Pu);let Dh=class extends Re(B){constructor(e){super(e),this.alias=null,this.name=void 0,this.fieldFormat=null}};l([p({type:String,json:{write:!0}})],Dh.prototype,"alias",void 0),l([p({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Dh.prototype,"name",void 0),l([p({types:Hne,json:{write:!0}})],Dh.prototype,"fieldFormat",void 0),Dh=l([M("esri.layers.support.FieldConfiguration")],Dh);function bFe(t){const{popupTemplate:e,fieldsIndex:i}=t,r=e?.fieldInfos;if(!r?.length||!i)return;const n=[];for(const s of r){const{fieldName:o,label:u}=s,d=i.get(o);if(!d)continue;const h=u&&u!==d.alias?u:null,m=PAe(s,d);(h||m)&&n.push(new Dh({name:d.name,alias:h,fieldFormat:m}))}return n.length?n:null}function wFe(t){const{fields:e}=t;if(!e?.length)return;const i=[];for(const r of e){const n=ig(r)?X2(r):null;n&&i.push(new Dh({name:r.name,fieldFormat:n}))}return i.length?i:null}function _Fe(t,e){const{popupTemplate:i,fieldsIndex:r}=t;if(!i||!r)return;const n=SFe(t,e,i.fieldInfos);if(!n)return;const s=i.clone();return s.fieldInfos=n,s}function SFe(t,e,i){e??=[],i=z(i)??[];let r=!1;const n=new Map;for(const s of e){const o=t.fieldsIndex.get(s.name);o&&n.set(o.name,s)}for(const s of i){const o=t.fieldsIndex.get(s.fieldName);if(!o)continue;const u=n.get(o.name);s.label=u?.alias||o.alias,s.format=ig(o)&&u?.fieldFormat?mF(u.fieldFormat,o):null,r=!0,n.delete(o.name)}for(const s of n.values()){const o=xFe(t,s);o&&(i.push(o),r=!0)}return r?i:null}function xFe(t,e){const{name:i,alias:r,fieldFormat:n}=e,s=t.fieldsIndex.get(i);if(!s||!r&&!n)return;const o=r||s.alias,u=ig(s)&&n?mF(n,s):null;return new mk({fieldName:s.name,label:o,format:u,visible:!1,isEditable:Cne(s,t)})}function $Fe(){return{fields:{type:[cn],value:null,set:function(t){if(t&&q("big-integer-warning-enabled")){const e=t.filter(i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8);if(e.length){const i=e.map(r=>`'${r.name}'`).join(", ");ie.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",t)}},fieldsIndex:{readOnly:!0,get(){return XA.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){const t=this._userOutFields;if(!t?.length)return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const e of t)this.fieldsIndex?.has(e)||ie.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${e} found in outFields`,{layer:this,outFields:t});return hk(this.fieldsIndex,t)}}}}const fP=()=>ie.getLogger("esri.layers.support.labelingInfo"),TFe=/\[([^[\]]+)\]/gi;function PJ(t,e,i){return t?t.map(r=>{const n=new $i;if(n.read(r,i),n.labelExpression){const s=e.fields||e.layerDefinition?.fields||this.fields;n.labelExpression=n.labelExpression.replaceAll(TFe,(o,u)=>`[${EFe(u,s)}]`)}return n}):null}function EFe(t,e){if(!e)return t;const i=t.toLowerCase();for(let r=0;r<e.length;r++){const n=e[r].name;if(n.toLowerCase()===i)return n}return t}const DJ=["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],MFe={esriGeometryPoint:DJ,esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:DJ,esriGeometryEnvelope:null};function rnt(t,e){const i=[];for(const r of t){const n=r.labelPlacement,s=MFe[e];if(!r.symbol)return fP().warn("No ILabelClass symbol specified."),[];if(!s)return fP().error(new L("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),[];if(s.includes(n))i.push(r);else{const o=s[0];n&&fP().warn(`Found invalid label placement type ${n} for ${e}. Defaulting to ${o}`);const u=r.clone();u.labelPlacement=o,i.push(u)}}return i}const AFe="relationships/",IFe="expression/",kFe=/<br\s*\/*>/gi;let ps=class extends _e{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||dc(()=>Vy()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??H(()=>import("./featureUtils-CW-h_FQl.js"),__vite__mapDeps([143,3])).then(e=>this._featureUtils=e)}get calculatedExpressions(){const e=new fe;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(const i of this.expressionsUsedInTitle??[])e.push({name:i.name,invalid:!0});return e}for(const i of this.expressionsUsedInTitle)try{const r=this._arcadeTask.value.arcade.parseScript(i.expression,["$layer","$map","$datastore"]);if(r.isAsync){e.push({name:i.name,invalid:!0});break}e.push({name:i.name,syntax:r,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(r,{vars:{$feature:"any"}})})}catch{e.push({name:i.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??"";return typeof e!="string"?[]:(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter(i=>e.includes(`{expression/${i.name.toLowerCase()}}`))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(e=>e.invalid===!0)}get requiredFields(){const e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const r of this.calculatedExpressions?.toArray()??[])try{const n=this._arcadeTask.value.arcade.extractFieldLiterals(r.syntax);for(const s of n){const o=s.split("."),u=this.fieldsIndex.get(o.at(-1)??"");u&&e.add(u.name)}}catch{}const i=this._extractFieldNames(this.workingTitle);for(const r of i){const n=this.fieldsIndex.get(r);n&&e.add(n.name)}return this.objectIdField!=null&&e.add(this.objectIdField),e}get titleFromDisplayField(){let e="";return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??""),e||(e=this.fieldsIndex.get(this.objectIdField)?.name??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return e===""||e==null||this.hasBadExpressions||typeof e!="string"?this.titleFromDisplayField:e}async getTitle(e,i,r){const n=i.getObjectId()??i.attributes[e.objectIdField];return(await this.getTitles(e,[i],r)).get(n)??""}async getTitles(e,i,r){const n=new Map,s=r?.timeZone??"system";try{const[{substituteFieldsInLinksAndAttributes:o}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);r?.fetchMissingFields&&(i=await this._checkAndReQueryGraphics(e,i));const{fieldInfoMap:u,workingTitle:d}=this,h=d&&u;i.forEach(m=>{const v=m.getObjectId()??m.attributes[e.objectIdField];let b=h?o({attributes:m.attributes,expressionAttributes:null,fieldInfoMap:u,globalAttributes:this._createFormattedAttributes(e,m,s).global,layer:e,text:d}):"";r?.removeHTML&&(b=MTe.sanitize(b).replaceAll(kFe," ")),n.set(v,b)})}catch{}return n}async _checkAndReQueryGraphics(e,i){const r=i.map(n=>n.getObjectId()??n.attributes[e.objectIdField]).filter(is);if(r.length!==i.length)return i;if(i.some(n=>!AAe(n,this.requiredFields))){const n=e.createQuery();n.where="1=1",n.outFields=[...this.requiredFields],n.objectIds=r;const s=await e.queryFeatures(n);if(s?.features.length===i.length)return s.features}return i}_createFieldInfoMap(e){const i=new Map;if(!e)return i;for(const r of e){if(!r.fieldName)continue;const n=this.fieldsIndex.get(r.fieldName),s=n?.name??r.fieldName;r.fieldName=s,i.set(s.toLowerCase(),r)}return i}_createFormattedAttributes(e,i,r="system"){const n=this.effectivePopupTemplate?.fieldInfos??[],s={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const u=this._arcadeTask.value.Feature.createFromGraphicLikeObject(i.geometry,i.attributes,e,null);for(const d of this.calculatedExpressions)try{s[`expression/${d.name}`]=d.func({vars:{$feature:u}})}catch{}}const o={...i.attributes,...s};return{global:this._featureUtils.formatAttributes({fieldInfos:n,attributes:o,graphic:i,timeZone:r,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return hF(e).filter(i=>!(i.startsWith(AFe)||i.startsWith(IFe)))}};l([p({readOnly:!0})],ps.prototype,"_arcadeTask",null),l([p()],ps.prototype,"_featureUtils",void 0),l([p({readOnly:!0})],ps.prototype,"featureUtilsPromise",null),l([p({readOnly:!0})],ps.prototype,"calculatedExpressions",null),l([p()],ps.prototype,"displayField",void 0),l([p()],ps.prototype,"effectivePopupTemplate",void 0),l([p()],ps.prototype,"expressionsUsedInTitle",null),l([p()],ps.prototype,"fieldsIndex",void 0),l([p()],ps.prototype,"fieldInfoMap",null),l([p()],ps.prototype,"fields",void 0),l([p()],ps.prototype,"objectIdField",void 0),l([p()],ps.prototype,"requiredFields",null),ps=l([M("esri.layers.support.TitleCreator")],ps);const d0=[];function OFe(t,e){if(oA(t.url??""))return!0;const{wkid:i}=e;for(const r of d0){if((t.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}d0.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=23301;e<=23333;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102934;e<=102955;e++)t.add(e);return t}]),d0.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),d0.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),d0.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),d0.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]);async function CFe(t,e,i){const r=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const n=await sk(r.populateFromStyle());if(ft(i),n.ok===!1){const s=n.error;e?.messages&&e.messages.push(new Jo("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:e})),t.clear("renderer",e?.origin)}}}function RFe({displayField:t,editFieldsInfo:e,fields:i,objectIdField:r,title:n},s){if(!i)return null;const o=LFe({editFieldsInfo:e,fields:i,objectIdField:r},s);if(!o.length)return null;const u=FFe({titleBase:n,fields:i,displayField:t}),d=zFe();return new Dw({title:u,content:d,fieldInfos:o})}const PFe=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):aAe(t,e);function DFe({fields:t,ignoreFieldTypes:e,sortDisabled:i}){const r=t;return e&&(t=t.filter(n=>!e.includes(n.type))),t===r&&(t=t.slice()),i!==!0&&t.sort(NFe),t}function NFe(t,e){return t.type==="oid"?-1:e.type==="oid"?1:NJ(t)?-1:NJ(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function LFe(t,e){const i=e?.visibleFieldNames;return DFe({fields:t.fields??[],ignoreFieldTypes:e?.ignoreFieldTypes||VFe,sortDisabled:e?.sortDisabled}).map(r=>new mk({fieldName:r.name,isEditable:Cne(r,t),label:r.alias,format:jFe(r),visible:PFe(r,{...t,visibleFieldNames:i})}))}function jFe(t){switch(t.type){case"small-integer":case"integer":return new Jd({digitSeparator:!0,places:0});case"single":case"double":return new Jd({digitSeparator:!0,places:2});case"string":return kAe(t.name)?new Jd({digitSeparator:!0,places:0}):void 0;default:return}}function zFe(){return[new sw,new nw]}function FFe(t){const e=Q3e(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function NJ(t){return(t.name&&t.name.toLowerCase())==="name"?!0:t.alias?.toLowerCase()==="name"}const VFe=["geometry","blob","raster","guid","xml"],sn="FeatureLayer";function pE(t,e){return new L("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function LJ(t){return t&&t instanceof fe}const mP=$Fe();function yP(t,e,i){const r=!!i?.writeLayerSchema;return{enabled:r,ignoreOrigin:r}}let Ee=class extends uze(K6e(ULe(lFe(zLe(NLe(hle(sFe(yFe(vFe(Nue(hFe(rLe(tFe(oFe(Ek(ALe(iLe(Re(xi))))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.graphicOrigin=new QNe(this),this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=we.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=RI(async(i,r,n)=>{const{save:s,saveAs:o}=await H(()=>import("./featureLayerUtils-3YBp4fFN.js"),__vite__mapDeps([288,282,289,286,161]));switch(i){case 0:return s(this,r);case 1:return o(this,n,r)}})}destroy(){this.source?.destroy()}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){const i=e!=null?e.signal:null;if(this.portalItem?.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then(n=>this.initLayerProperties(n))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(Dl).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const n=await this._fetchFirstValidLayerId(i);n!=null&&(this.layerId=n)}if(!this.url&&!this._hasMemorySource())throw new L("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(i))}).then(()=>Cje(this,"load",e));return this.addResolvingPromise(r),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return at(e),new ps({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(e,i){return i=i.layerDefinition||i,eue(i,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities?.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,i){return this._readEditingEnabled(i,!1)}readEditingEnabledFromWebMap(e,i,r){return this._readEditingEnabled(i,!0,r)}writeEditingEnabled(e,i){this._writeEditingEnabled(e,i,!1)}writeEditingEnabledToWebMap(e,i,r,n){this._writeEditingEnabled(e,i,!0,n)}get effectiveEditingEnabled(){return Dje(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}set fieldConfigurations(e){if(this._hasMemorySource()||(this._override("fieldConfigurations",e),!this.loaded))return;const i=_Fe(this,e);i&&this._set("popupTemplate",i)}get fieldConfigurations(){if(!this._hasMemorySource())return this._isOverridden("fieldConfigurations")?this._get("fieldConfigurations"):bFe(this)||null}readIsTable(e,i){return(i=i?.layerDefinition??i).type==="Table"||!i.geometryType}writeIsTable(e,i,r,n){n?.writeLayerSchema&&ur(r,e?"Table":"Feature Layer",i)}readGlobalIdField(e,i){return qle(i.layerDefinition||i)}readObjectIdField(e,i){return Gle(i.layerDefinition||i)}writePopupTemplate(e,i,r,n){e&&(i[r]=e.toJSON({...n,writeFieldFormat:!n?.writeLayerSchema}))}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){hH(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,i,r){i=i.layerDefinition||i;const n=i.drawingInfo?.renderer;if(n){const s=QS(n,i,r)??void 0;return s||ie.getLogger(this).error("Failed to create renderer",{rendererDefinition:i.drawingInfo.renderer,layer:this,context:r}),s}return n8(i,r)}set source(e){const i=this._get("source");i!==e&&(LJ(i)&&this._resetMemorySource(i),LJ(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof fe?new $d({layer:this,items:e}):e:null}readSource(e,i){const r=Br.fromJSON(i.featureSet);return new $d({layer:this,items:r?.features??[]})}readTemplates(e,i){const r=i.editFieldsInfo,n=r?.creatorField,s=r?.editorField;return e=e?.map(o=>Fu.fromJSON(o)),this._fixTemplates(e,n),this._fixTemplates(e,s),e}readTitle(e,i){const r=i.layerDefinition?.name??i.name,n=i.title||i.layerDefinition?.title;if(r){const s=this.portalItem?.title;if(this.sublayerTitleMode==="item-title")return this.url?Ebe(this.url,r):r;let o=r;if(!o&&this.url){const u=sc(this.url);u!=null&&(o=u.title)}return o?(this.sublayerTitleMode==="item-title-and-service-name"&&s&&s!==o&&(o=s+" - "+o),u6(o)):void 0}if(this.sublayerTitleMode==="item-title"&&n)return n}readTitleFromWebMap(e,i){return i.title||i.layerDefinition?.name}readTypeIdField(e,i){let r=(i=i.layerDefinition||i).typeIdField;if(r&&i.fields){r=r.toLowerCase();const n=i.fields.find(s=>s.name.toLowerCase()===r);n&&(r=n.name)}return r}readTypes(e,i){e=(i=i.layerDefinition||i).types;const r=i.editFieldsInfo,n=r?.creatorField,s=r?.editorField;return e?.map(o=>(o=Pu.fromJSON(o),this._fixTemplates(o.templates,n),this._fixTemplates(o.templates,s),o))}readVisible(e,i){return i.layerDefinition?.defaultVisibility!=null?!!i.layerDefinition.defaultVisibility:i.visibility!=null?!!i.visibility:void 0}async addAttachment(e,i){const r=await hje(this,e,i,sn);return this.lastEditsEventDate=new Date,r}async updateAttachment(e,i,r){const n=await fje(this,e,i,r,sn);return this.lastEditsEventDate=new Date,n}async applyEdits(e,i){return mje(this,e,i)}async uploadAssets(e,i){return yje(this,e,i)}createFieldConfigurations(){return wFe(this)}createPopupTemplate(e){return RFe(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:i}=await $S(H(()=>import("./FeatureLayerSource-DscjC8Gp.js"),__vite__mapDeps([290,43,45,291,292,293,294,295,30,25,296,297,52,50,51,13,12,16,146,15])),e);return new i({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=Eje(this);e.dynamicDataSource=this.dynamicDataSource;const i=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=Q2(this.definitionExpression,i);return e.where=r||"1=1",e}async deleteAttachments(e,i){const r=await gje(this,e,i,sn);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(e){return vje(this,e,sn)}async getFeatureTitle(e,i){return this._titleCreator.getTitle(this,e,i)}async getFeatureTitles(e,i){return this._titleCreator.getTitles(this,e,i)}getFeatureType(e){return Wle(this.types,this.typeIdField,e)}getFieldAlias(e){const i=this.getField(e);if(i)return this.getFieldConfiguration(i.name)?.alias||i.alias}getFieldConfiguration(e){return e=e.toLowerCase(),this.fieldConfigurations?.find(i=>i.name.toLowerCase()===e)}getFieldDomain(e,i){return Aje(this,e,i,this.getField(e)?.domain??null)}async queryAttachments(e,i){return bje(this,e,i,sn)}async queryFeatures(e,i){const r=await this.load(),n=await r.source.queryFeatures(Oe.from(e)??r.createQuery(),i),s=this.graphicOrigin;if(n?.features)for(const o of n.features)o.layer=o.sourceLayer=r,o.origin=s;return n}async queryObjectIds(e,i){return await wje(this,e,i,sn)}async queryFeatureCount(e,i){return _je(this,e,i,sn)}async queryExtent(e,i){return Sje(this,e,i,sn)}async queryRelatedFeatures(e,i){return xje(this,e,i,sn)}async queryRelatedFeaturesCount(e,i){return $je(this,e,i,sn)}async queryPivot(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryPivot||!n?.operations?.supportsQueryPivot)throw new L(sn,"Layer source does not support queryPivot capability");const s=await H(()=>import("./PivotQuery-C31pp_U8.js").then(u=>u.P),[]),o=await r.queryPivot(s.default.from(e),i);if(o?.features)for(const u of o.features)u.layer=u.sourceLayer=this;return o}async queryTopFeatures(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryTopFeatures||!n?.query?.supportsTopFeaturesQuery)throw new L(sn,"Layer source does not support queryTopFeatures capability");const s=await H(()=>import("./TopFeaturesQuery-9HCibbrV.js"),[]),o=await r.queryTopFeatures(s.default.from(e),i);if(o?.features)for(const u of o.features)u.layer=u.sourceLayer=this;return o}async queryAttributeBins(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryAttributeBins)throw new L(sn,"Layer source does not support queryAttributeBins capability");zje(e,n,sn);const s=await H(()=>import("./AttributeBinsQuery-XBEi0ygJ.js"),__vite__mapDeps([222,20,27])),o=await r.queryAttributeBins(s.default.from(e),i);if(o.features)for(const u of o.features)u.layer=u.sourceLayer=this;return o}async queryTopObjectIds(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryTopObjectIds||!n?.query.supportsTopFeaturesQuery)throw new L(sn,"Layer source does not support queryTopObjectIds capability");const s=await H(()=>import("./TopFeaturesQuery-9HCibbrV.js"),[]);return(await r.queryTopObjectIds(s.default.from(e),i)).filter(C3e)}async queryTopFeaturesExtent(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryTopExtents||!n?.query?.supportsTopFeaturesQuery)throw new L(sn,"Layer source does not support queryTopExtents capability");const s=await H(()=>import("./TopFeaturesQuery-9HCibbrV.js"),[]);return r.queryTopExtents(s.default.from(e),i)}async queryTopFeatureCount(e,i){const{source:r,capabilities:n}=await this.load();if(!r.queryTopCount||!n?.query?.supportsTopFeaturesQuery)throw new L(sn,"Layer source does not support queryFeatureCount capability");const s=await H(()=>import("./TopFeaturesQuery-9HCibbrV.js"),[]);return r.queryTopCount(s.default.from(e),i)}read(e,i){const r=e.featureCollection;if((r||e.type==="Feature Collection")&&(this.resourceInfo=e),r){const{layers:n,showLegend:s}=r;n?.length===1&&(super.read(n[0],i),s!=null&&super.read({showLegend:s},i))}super.read(e,i),i&&i.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,i){i={...i,origin:i?.origin??void 0,writeLayerSchema:i?.writeLayerSchema??this._hasMemorySource()};const{origin:r,layerContainerType:n,messages:s}=i;if(this.dynamicDataSource)return s?.push(pE(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&n!=="tables")return s?.push(pE(this,`a table source can only be written to tables, not ${n}`)),null;if(this._hasMemorySource())return s?.push(pE(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&n==="tables")return s?.push(pE(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,i)}clone(){if(this._hasMemorySource())throw new L(sn,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source?.type==="memory"||OFe(this,e))}async save(e){return this._debouncedSaveOperations(0,e)}async saveAs(e,i){return this._debouncedSaveOperations(1,i,e)}_readEditingEnabled(e,i,r){let n=e.layerDefinition?.capabilities;return n?this._hasEditingCapability(n):(n=e.capabilities,i&&r?.origin==="web-map"&&!this._hasMemorySource()&&n?this._hasEditingCapability(n):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(i=>i.trim()).includes("editing")}_writeEditingEnabled(e,i,r,n){if(!e){const s=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query";ur("layerDefinition.capabilities",s,i),r&&!n?.writeLayerSchema&&(i.capabilities=s)}}_fetchFirstValidLayerId(e){return $t(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(i=>{const r=i.data;if(r)return this.applyPreferredHost(r),this.findFirstValidLayerId(r)})}async initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),hH(this.renderer,this.fieldsIndex),Ane(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),CFe(this,{origin:"service"})}async hasDataChanged(){return Tje(this)}async fetchPublishingStatus(){const e=this.source;return e?.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){const e=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||this.fields?.some(i=>i.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,i){e&&e.forEach(r=>{const n=r.prototype?.attributes;n&&i&&delete n[i]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new L("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new L("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(i=>{i.layer=this,i.sourceLayer=this}),this.addHandles([e.on("after-add",i=>{i.item.layer=this,i.item.sourceLayer=this}),e.on("after-remove",i=>{i.item.layer=null,i.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(i=>{i.layer=null,i.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};l([p({clonable:!1,readOnly:!0})],Ee.prototype,"_titleCreator",null),l([p(s4e)],Ee.prototype,"attributeTableTemplate",void 0),l([se("service","capabilities")],Ee.prototype,"readCapabilities",null),l([p({json:{origins:{"web-scene":{write:!1}},write:!0}})],Ee.prototype,"charts",void 0),l([p({readOnly:!0})],Ee.prototype,"createQueryVersion",null),l([p({json:{read:{source:"layerDefinition.copyrightText"}}})],Ee.prototype,"copyright",void 0),l([p({json:{read:{source:"layerDefinition.displayField"}}})],Ee.prototype,"displayField",void 0),l([p({types:zo,readOnly:!0})],Ee.prototype,"defaultSymbol",void 0),l([p({type:kl})],Ee.prototype,"dynamicDataSource",void 0),l([p({type:Boolean})],Ee.prototype,"editingEnabled",null),l([se(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ee.prototype,"readEditingEnabled",null),l([se("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ee.prototype,"readEditingEnabledFromWebMap",null),l([pe(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ee.prototype,"writeEditingEnabled",null),l([pe("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ee.prototype,"writeEditingEnabledToWebMap",null),l([p({readOnly:!0})],Ee.prototype,"effectiveEditingEnabled",null),l([p({clonable:!1,readOnly:!0})],Ee.prototype,"featureTitleFields",null),l([p({type:[Dh],json:{name:"layerDefinition.fieldConfigurations",write:{overridePolicy(t,e,i){return{enabled:!i?.writeLayerSchema,ignoreOrigin:this.originIdOf(e)===1}}}}})],Ee.prototype,"fieldConfigurations",null),l([p({...mP.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:yP}}}}})],Ee.prototype,"fields",void 0),l([p(mP.fieldsIndex)],Ee.prototype,"fieldsIndex",void 0),l([p({type:bl,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ee.prototype,"formTemplate",void 0),l([p({json:{read:{source:"layerDefinition.extent"}}})],Ee.prototype,"fullExtent",void 0),l([p({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:yP,writer(t,e,i){const r=t?_j.toJSON(t):null;r&&ur(i,r,e)}}}},read:{source:"layerDefinition.geometryType",reader:_j.read}}})],Ee.prototype,"geometryType",void 0),l([p({readOnly:!0,clonable:!1})],Ee.prototype,"graphicOrigin",void 0),l([p({json:{read:{source:"layerDefinition.hasM"}}})],Ee.prototype,"hasM",void 0),l([p({json:{read:{source:"layerDefinition.hasZ"}}})],Ee.prototype,"hasZ",void 0),l([p(i4e)],Ee.prototype,"id",void 0),l([p({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ee.prototype,"infoFor3D",void 0),l([p({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ee.prototype,"isTable",void 0),l([se("service","isTable",["type","geometryType"]),se("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ee.prototype,"readIsTable",null),l([pe("web-map","isTable")],Ee.prototype,"writeIsTable",null),l([p(Ok)],Ee.prototype,"labelsVisible",void 0),l([p({type:[$i],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:PJ,write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:PJ,write:{layerContainerTypes:ui}}})],Ee.prototype,"labelingInfo",void 0),l([p((()=>{const t=z(t4e);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,r){ur(r,ck(e),i)}}},t})())],Ee.prototype,"opacity",void 0),l([p(KLe)],Ee.prototype,"legendEnabled",void 0),l([p({type:["show","hide"],json:(()=>{const t=z(Mle.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],Ee.prototype,"listMode",void 0),l([se("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Ee.prototype,"readGlobalIdField",null),l([p({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:yP}}}}})],Ee.prototype,"objectIdField",void 0),l([se("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Ee.prototype,"readObjectIdField",null),l([p({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:ui}}})],Ee.prototype,"operationalLayerType",void 0),l([p(mP.outFields)],Ee.prototype,"outFields",void 0),l([p({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ee.prototype,"path",void 0),l([p(kk)],Ee.prototype,"popupEnabled",void 0),l([p({type:Dw,json:{name:"popupInfo",write:!0}})],Ee.prototype,"popupTemplate",void 0),l([pe("popupTemplate")],Ee.prototype,"writePopupTemplate",null),l([p({readOnly:!0})],Ee.prototype,"defaultPopupTemplate",null),l([p({types:kx,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:V6e,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:ui,overridePolicy:(t,e,i)=>({ignoreOrigin:i?.writeLayerSchema,layerContainerTypes:ui})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i?.writeLayerSchema,layerContainerTypes:ui})}}})],Ee.prototype,"renderer",null),l([se("service","renderer",["drawingInfo.renderer","defaultSymbol"]),se("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ee.prototype,"readRenderer",null),l([p()],Ee.prototype,"resourceInfo",void 0),l([p((()=>{const t=z(QLe);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],Ee.prototype,"screenSizePerspectiveEnabled",void 0),l([p({clonable:!1})],Ee.prototype,"source",null),l([Ct("source")],Ee.prototype,"castSource",null),l([se("portal-item","source",["featureSet"]),se("web-map","source",["featureSet"])],Ee.prototype,"readSource",null),l([p({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Ee.prototype,"spatialReference",void 0),l([p({type:Number})],Ee.prototype,"subtypeCode",void 0),l([p({type:[Fu]})],Ee.prototype,"templates",void 0),l([se("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ee.prototype,"readTemplates",null),l([p({type:ln})],Ee.prototype,"timeInfo",void 0),l([p()],Ee.prototype,"title",void 0),l([se("service","title",["name"]),se("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ee.prototype,"readTitle",null),l([se("web-map","title",["layerDefinition.name","title"])],Ee.prototype,"readTitleFromWebMap",null),l([p({type:String})],Ee.prototype,"sublayerTitleMode",void 0),l([p({json:{read:!1}})],Ee.prototype,"type",void 0),l([p({type:String})],Ee.prototype,"typeIdField",void 0),l([se("service","typeIdField"),se("typeIdField",["layerDefinition.typeIdField"])],Ee.prototype,"readTypeIdField",null),l([p({type:[Pu]})],Ee.prototype,"types",void 0),l([se("service","types",["types"]),se("types",["layerDefinition.types"])],Ee.prototype,"readTypes",null),l([p({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility",layerContainerTypes:ui}}}}})],Ee.prototype,"visible",void 0),l([se("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ee.prototype,"readVisible",null),Ee=l([M("esri.layers.FeatureLayer")],Ee);const ont=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Ee}},Symbol.toStringTag,{value:"Module"}));let cd=class extends B{constructor(e){super(e),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};l([p({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.moment=t?t.getTime():null}}}})],cd.prototype,"moment",void 0),l([p({type:Boolean,json:{write:!0}})],cd.prototype,"fullUpdate",void 0),l([p({type:Boolean,json:{write:!0}})],cd.prototype,"validateErrorsCreated",void 0),l([p({type:Boolean,json:{write:!0}})],cd.prototype,"exceededTransferLimit",void 0),l([p({type:[Object],json:{write:!0}})],cd.prototype,"serviceEdits",void 0),l([p({type:[Object],json:{write:!0}})],cd.prototype,"discoveredSubnetworks",void 0),cd=l([M("esri.rest.networks.support.ValidateNetworkTopologyResult")],cd);const UFe=cd,qFe=Fr()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let fh=class extends UFe{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await $t(this.statusUrl,i);return this.read(r),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise((n,s)=>{this._clearTimer();const o=setInterval(()=>{this._timer||s(xt()),this.checkJobStatus().then(u=>{const{status:d}=u;switch(this.status=d,d){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}},u=>{this._clearTimer(),s(u)})},i);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};l([p()],fh.prototype,"editsResolver",void 0),l([p({type:String,json:{write:!0}})],fh.prototype,"statusUrl",void 0),l([Ae(qFe)],fh.prototype,"status",void 0),l([p({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],fh.prototype,"submissionTime",void 0),l([p({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],fh.prototype,"lastUpdatedTime",void 0),fh=l([M("esri.networks.support.TopologyValidationJobInfo")],fh);const GFe=fh;function BFe(t,e,i="from"){const{fromRuleElement:r,viaRuleElement:n,toRuleElement:s}=Lue(t),o=[];switch(t.ruleType){case 2:case 3:i==="from"&&Pl(e,r,!1)?o.push(s):i==="to"&&Pl(e,s,!1)&&o.push(r);break;case 4:case 1:Pl(e,r,!0)?o.push(s):Pl(e,s,!0)&&o.push(r);break;case 5:n&&(Pl(e,n,!0)?(o.push(r),o.push(s)):(Pl(e,r,!0)||Pl(e,s,!0))&&o.push(n));break;default:return[]}return o}function S2(t,e,i){const{fromRuleElement:r,viaRuleElement:n,toRuleElement:s}=Lue(t);switch(t.ruleType){case 2:case 3:return hE(e,i,r,s,!1,!1);case 4:case 1:return hE(e,i,r,s,!0,!0);case 5:return hE(e,i,r,n,!0,!0)||hE(e,i,s,n,!0,!0);default:return!1}}function hE(t,e,i,r,n,s){if(!i||!r)return!1;const o=Pl(t,i,s),u=Pl(e,r,s);if(n){const d=Pl(t,r,s),h=Pl(e,i,s);return o&&u||d&&h}return o&&u}function HFe(t,e){const i=t.terminal?.terminalId,r=e.terminalId;return i==null&&r==null||(i===1?r==null||r===1:i===r)}function Pl(t,e,i){const{assetGroupCode:r,assetTypeCode:n}=t;return("layerId"in t?t.layerId===e.networkSource?.layerId:t.networkSourceId===e.networkSource?.sourceId)&&(r==null||r===e.assetGroup?.assetGroupCode)&&(n==null||n===e.assetType?.assetTypeCode)&&(!i||!("terminalId"in t)||HFe(e,t))}function Lue(t){return{fromRuleElement:{networkSource:t.fromNetworkSource,assetGroup:t.fromAssetGroup,assetType:t.fromAssetType,terminal:t.fromTerminal},viaRuleElement:t.viaNetworkSource?{networkSource:t.viaNetworkSource,assetGroup:t.viaAssetGroup,assetType:t.viaAssetType,terminal:t.viaTerminal}:void 0,toRuleElement:{networkSource:t.toNetworkSource,assetGroup:t.toAssetGroup,assetType:t.toAssetType,terminal:t.toTerminal}}}function pv(t){let e=null,i=null,r=null;if(xne(t))e=Uj(t),[i,r]=WFe(t);else if(Fd(t)){e=t.parent?.layerId??null;const[n]=iI(t);n===t.subtypeField&&(i=t.subtypeCode)}else e=t.layerId??null;return{layerId:e,assetGroupCode:i,assetTypeCode:r}}function Uj(t){const{sourceLayer:e}=t;let i;return jre(e)?i=e.layerId:Fd(e)&&(i=e.parent?.layerId),i??null}function WFe(t){const[e,i]=iI(t.sourceLayer);return[e?t.attributes[e]:null,i?t.attributes[i]:null]}function iI(t){return!t||!("fieldsIndex"in t)?[null,null]:[t.fieldsIndex.normalizeFieldName("assetGroup")??null,t.fieldsIndex.normalizeFieldName("assetType")??null]}async function jJ(t,e){if(t==="Utility Network Layer"){const{default:i}=await H(()=>Promise.resolve().then(()=>l8e),void 0);return new i({layerUrl:e})}return null}async function ZFe(t){let e="portalItem"in t?t:{portalItem:t};!e.portalItem||e.portalItem instanceof Ue||(e={...e,portalItem:new Ue(e.portalItem)});const i=e.portalItem;if(await i.load(),i.type!=="Feature Service")throw new L("portal:unknown-item-type","Unknown item type '${type}'",{type:i.type});const r=i.url,n=await $t(r,{responseType:"json",query:{f:"json"}}),s="Network Layer";if(n.data.type?.includes(s))return jJ(n.data.type,r);if(n.data.layers){const o=n.data.layers.find(u=>u.type.includes(s));if(o){const u=`${r}/${o.id}`;return jJ(o.type,u)}}return null}let Ui=class extends Ek(eg){static fromPortalItem(e){return ZFe(e)}constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this._historicMoment=null,this._gdbVersion=null,this._sourceIdByLayerId=new Map,this._layerIdBySourceId=new Map,this._applyEditsHandler=i=>{const{serviceUrl:r,gdbVersion:n,result:s}=i,o=r===this.featureServiceUrl,u=cS(r,n,this.gdbVersion);o&&u&&s.then(d=>{s3(r,n)&&(this.historicMoment=d.historicMoment)})},this._updateMomentHandler=i=>{const{serviceUrl:r,gdbVersion:n,moment:s}=i,o=r===this.featureServiceUrl,u=cS(r,n,this.gdbVersion);o&&u&&(this.historicMoment=s)},this.when().then(()=>{this.addHandles([ble(this._applyEditsHandler),wle(this._updateMomentHandler)])},()=>{})}initialize(){this.when().catch(e=>{Yr(e)||ie.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}get loaded(){return super.loaded}get datasetName(){return this.dataElement?.name??null}get owner(){return this.dataElement?.userIdentity??null}get schemaGeneration(){return this.dataElement?.schemaGeneration??null}get parsedUrl(){return Xr(this.layerUrl)}get featureServiceUrl(){return sc(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return sc(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}get gdbVersion(){return this._gdbVersion}set gdbVersion(e){this._gdbVersion=e}get historicMoment(){return this._historicMoment}set historicMoment(e){this._historicMoment=e}async load(e){return this.addResolvingPromise(this._load(e)),this}async _load(e){await Promise.all([this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e),this._fetchLayerMetaData(this.layerUrl,e)])}getLayerIdBySourceId(e){if(!this.dataElement)return null;const i=this._layerIdBySourceId.get(e);if(i!=null)return i;const r=this.dataElement.domainNetworks,n=this._traverseNetworkSources(r,this._layerIdBySourceId,"sourceId","layerId",e);return n>=0?n:null}getSourceIdByLayerId(e){if(!this.dataElement)return null;const i=this._sourceIdByLayerId.get(e);if(i!=null)return i;const r=this.dataElement.domainNetworks,n=this._traverseNetworkSources(r,this._sourceIdByLayerId,"layerId","sourceId",e);return n>=0?n:null}getObjectIdsFromElements(e){const i=[],r=new Map;for(const s of e){const o=this.getLayerIdBySourceId(s.networkSourceId);if(o==null)continue;let u=r.get(o);u===void 0&&(u=[]),u.push(s.objectId),r.set(o,u)}const n=this.featureServiceUrl;return r.forEach((s,o)=>i.push({layerUrl:`${n}/${o}`,objectIds:s})),i}async queryNamedTraceConfigurations(e,i){const[{queryNamedTraceConfigurations:r},{default:n}]=await Promise.all([H(()=>import("./queryNamedTraceConfigurations-DXGhgqNs.js"),[]),H(()=>import("./QueryNamedTraceConfigurationsParameters-CEK1Doc7.js"),[])]),s=this.networkServiceUrl,o=n.from(e);return(await r(s,o,{...i}))?.namedTraceConfigurations}async validateTopology(e,i){if(!e.validateArea)throw new L("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:r},{default:n}]=await Promise.all([H(()=>import("./validateNetworkTopology-BVzLigar.js"),[]),H(()=>import("./ValidateNetworkTopologyParameters-4jdwfaha.js"),[])]),s=n.from(e);s3(this.featureServiceUrl,this.gdbVersion||null)?(s.sessionID=Z4,await IZ(this.featureServiceUrl,this.gdbVersion,!0)):s.sessionID=null,s.gdbVersion=this.gdbVersion;const o=this.networkServiceUrl,u=this.featureServiceUrl,d=kZ(u,null,this.gdbVersion,!0),h=await r(o,s,{...i});if(h?.serviceEdits){const m=[];for(const v of h.serviceEdits){const{editedFeatures:b}=v,_=b?.spatialReference?new we(b.spatialReference):null;m.push({layerId:v.layerId,editedFeatures:{adds:b?.adds?.map(x=>fE(x,_))||[],updates:b?.updates?.map(x=>({original:fE(x[0],_),current:fE(x[1],_)}))||[],deletes:b?.deletes?.map(x=>fE(x,_))||[],spatialReference:_}})}d.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:m,exceededTransferLimit:!1,historicMoment:h.moment})}return h}async submitTopologyValidationJob(e,i){let r=null;if(!e.validateArea)throw new L("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const m=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");r=(await $t(m,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:n},{default:s}]=await Promise.all([H(()=>import("./validateNetworkTopology-BVzLigar.js"),[]),H(()=>import("./ValidateNetworkTopologyParameters-4jdwfaha.js"),[])]),o=s.from(e);s3(this.featureServiceUrl,this.gdbVersion||null)?(o.sessionID=Z4,await IZ(this.featureServiceUrl,this.gdbVersion,!0)):o.sessionID=null,o.gdbVersion=this.gdbVersion||r;const u=this.networkServiceUrl,d=this.featureServiceUrl?kZ(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,h=await n(u,o,{...i});return new GFe({statusUrl:h,editsResolver:d})}getSourceTypeById(e){if(!this.dataElement)return null;for(const i of this.dataElement.domainNetworks)for(const r of[i.edgeSources??[],i.junctionSources??[]])for(const n of r)if(n.sourceId===e)return r===i.edgeSources?"edge":"junction";return null}_traverseNetworkSources(e,i,r,n,s){for(const o of e)for(const u of[o.edgeSources??[],o.junctionSources??[]])for(const d of u)if(d[r]===s)return i.set(s,d[n]),d[n];return-1}async _fetchLayerMetaData(e,i){const r=await $t(e,{responseType:"json",query:{f:"json"},...i});this.sourceJSON=r.data,this.read(r.data,{origin:"service"})}async _fetchDataElement(e,i,r){if(this.dataElement)return;const n=await $t(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([i]),f:"json"},...r}).then(s=>s.data.layerDataElements?.[0]);n&&this.read(n,{origin:"service"})}};function fE(t,e){return new Ti({attributes:t.attributes,geometry:oc({...t.geometry,spatialReference:e})})}l([p({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],Ui.prototype,"id",void 0),l([p({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],Ui.prototype,"title",void 0),l([p({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],Ui.prototype,"layerUrl",void 0),l([p({type:Object,json:{origins:{service:{read:!0}},read:!1}})],Ui.prototype,"dataElement",void 0),l([p({type:Xe,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],Ui.prototype,"fullExtent",void 0),l([p({type:we,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],Ui.prototype,"spatialReference",void 0),l([p({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],Ui.prototype,"type",void 0),l([p({readOnly:!0})],Ui.prototype,"datasetName",null),l([p({readOnly:!0})],Ui.prototype,"owner",null),l([p({readOnly:!0})],Ui.prototype,"schemaGeneration",null),l([p({readOnly:!0})],Ui.prototype,"parsedUrl",null),l([p({readOnly:!0})],Ui.prototype,"featureServiceUrl",null),l([p({readOnly:!0})],Ui.prototype,"networkServiceUrl",null),l([p({readOnly:!0})],Ui.prototype,"layerId",null),l([p()],Ui.prototype,"sourceJSON",void 0),l([p({readOnly:!0})],Ui.prototype,"networkSystemLayers",null),l([p({type:String})],Ui.prototype,"gdbVersion",null),l([p({type:Date})],Ui.prototype,"historicMoment",null),l([p()],Ui.prototype,"_historicMoment",void 0),l([p()],Ui.prototype,"_gdbVersion",void 0),Ui=l([M("esri.networks.Network")],Ui);const JFe=Ui;let mh=class extends rp(eg){constructor(e){super(e),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=$t}initialize(){}async load(e){const i=this.rulesLayer.load(e).then(()=>this._initializeRulesTable());return this.addResolvingPromise(i),this}getFeaturesCanAssociateWithClause(e,i,r){const n=new Map,[s,o]=iI(e.sourceLayer);if(!s||!o)return"";const u=pv(e),d=pv(i);r.forEach(m=>{const{type:v,direction:b}=m;this._getRulesForAssociationType(v).forEach(_=>{BFe(_,u,b).filter(x=>x.networkSource?.layerId===d.layerId).forEach(x=>{const $=x.assetGroup?.assetGroupCode,E=x.assetType?.assetTypeCode;if($!=null&&E!=null){const A=n.get($)??new Set;A.add(E),n.set($,A)}})})});let h=[];return this._mergeAssetCodes(n).forEach((m,v)=>{const b=`${s} IN (${v})`,_=I3e(o,[...m]);b&&_&&h.push(Q2(b,_))}),h.length>1&&(h=h.map(m=>`(${m})`)),h.join(" OR ")}getFeaturesCanAssociateWith(e,i,r){return Uj(e)==null?[]:i.filter(n=>this.canAssociateFeatures(e,n,r))}canAssociateFeatures(e,i,r){if(!this._canSupportAssociations([e,i]))return!1;const n=pv(e),s=pv(i);return r.some(o=>{const{type:u,direction:d}=o;return this._getRulesForAssociationType(u).some(h=>d==="to"?S2(h,s,n):S2(h,n,s))})}getLayersCanAssociateWith(e,i,r){return Uj(e)==null?[]:i.filter(n=>this.canAssociateFeatureToLayer(e,n,r))}canAssociateFeatureToLayer(e,i,r){if(!this._canSupportAssociations([e,i]))return!1;const n=pv(e),s=pv(i);return r.some(o=>{const{type:u,direction:d}=o;return this._getRulesForAssociationType(u).some(h=>d==="to"?S2(h,s,n):S2(h,n,s))})}getFeatureSQL(e,i){const r=e.layerId.toString(),n=e.fieldsIndex?.normalizeFieldName("assetGroup"),s=e.fieldsIndex?.normalizeFieldName("assetType"),o=n?i.attributes[n]:null,u=s?i.attributes[s]:null,d=this.rulesHash[r];if(d){const h=d.assetGroupHash[o];if(h)return h.assetTypeHash[u]||null}return null}_initializeRulesTable(){const e={},i=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const r of this.rules){if(r.ruleType===3){this.rulesCategorized.attachment.push(r);continue}if(r.ruleType===2){this.rulesCategorized.containment.push(r);continue}if(r.ruleType===1){this.rulesCategorized.connectivity.push(r);continue}this.rulesCategorized.connectivity.push(r);let n=[[0,1],[1,0]];r.ruleType===5&&(n=[[0,2],[2,0],[1,2],[2,1]]);for(const s of n){const o=s.shift(),u=s.shift();let d=!1;switch(r.ruleType){case 5:d=o===0||o===1;break;case 4:d=o===1}const h=i[o],m=r[h.networkSourceId]?.layerId.toString()??"",v=r[h.assetGroupId]?.assetGroupCode?.toString(),b=r[h.assetTypeId],_=b?.assetTypeCode?.toString(),x=i[u],$=r[x.networkSourceId]?.layerId.toString()??"",E=r[x.assetGroupId]?.assetGroupCode?.toString(),A=r[x.assetTypeId],O=A?.assetTypeCode?.toString(),D=e[m]??{assetGroupHash:{}};if(!(v&&_&&E&&O))continue;const R=D.assetGroupHash[v]??{assetTypeHash:{}},P=R.assetTypeHash[_]??{};if(P[$]=P[$]??{},d){P[m]=P[m]??{};const Q=Q2(`assetgroup = ${v}`,`assettype = ${_}`);A?.connectivityPolicy==="esriNECPEndVertex"?P[m].endVertex=P[m]?.endVertex?`${P[m].endVertex}`:`(${Q})`:P[m].anyVertex=P[m].anyVertex?`${P[m].anyVertex}`:`(${Q})`}const j=Q2(`assetgroup = ${E}`,`assettype = ${O}`);A?.connectivityPolicy==="esriNECPEndVertex"?P[$].endVertex=P[$]?.endVertex?AN(P[$].endVertex,j):`(${j})`:P[$].anyVertex=P[$]?.anyVertex?AN(P[$].anyVertex,j):`(${j})`,R.assetTypeHash[_]=P,D.assetGroupHash[v]=R,e[m]=D}}this._set("rulesHash",e)}_getRulesForAssociationType(e){const{rulesCategorized:i}=this;switch(e){case"attachment":return i.attachment;case"containment":return i.containment;case"connectivity":case"junction-junction-connectivity":return i.connectivity.filter(r=>r.ruleType===1);case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":return i.connectivity.filter(r=>r.ruleType===4||r.ruleType===5);default:return[]}}_areSetsEqual(e,i){if(e.size!==i.size)return!1;for(const r of e)if(!i.has(r))return!1;return!0}_mergeAssetCodes(e){const i=new Map,r=new Set;for(const[n,s]of e){const o=new Set([n]);for(const[d,h]of e)n!==d&&!r.has(d)&&this._areSetsEqual(s,h)&&(o.add(d),r.add(d));const u=Array.from(o).sort().join(",");i.set(u,s)}return i}_canSupportAssociations(e){return e.every(i=>{const r=xne(i)?i.sourceLayer:i,[n,s]=iI(r);return n!=null&&s!=null})}};l([p({constructOnly:!0})],mh.prototype,"rulesLayer",void 0),l([p({constructOnly:!0})],mh.prototype,"rules",void 0),l([p({readOnly:!0})],mh.prototype,"rulesHash",void 0),l([p()],mh.prototype,"rulesCategorized",void 0),l([p({constructOnly:!0})],mh.prototype,"request",void 0),mh=l([M("esri.networks.RulesTable")],mh);let Ta=class extends B{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};l([p({type:[Object],json:{write:!0}})],Ta.prototype,"conditionBarriers",void 0),l([p({type:[Object],json:{write:!0}})],Ta.prototype,"outputConditions",void 0),l([p({type:[Object],json:{write:!0}})],Ta.prototype,"functions",void 0),l([p({type:[Object],json:{write:!0}})],Ta.prototype,"functionBarriers",void 0),l([p({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Ta.prototype,"traversabilityScope",void 0),l([p({type:String,json:{write:!0}})],Ta.prototype,"shortestPathNetworkAttributeName",void 0),l([p({type:Boolean,json:{write:!0}})],Ta.prototype,"includeBarriers",void 0),l([p({type:Boolean,json:{write:!0}})],Ta.prototype,"validateConsistency",void 0),l([p({type:Boolean,json:{write:!0}})],Ta.prototype,"ignoreBarriersAtStartingPoints",void 0),Ta=l([M("esri.networks.support.TraceConfiguration")],Ta);const g8=Ta,gP=new Be({Clean:"clean",Dirty:"dirty"}),Hh=new Be({Physical:"physical",Virtual:"virtual"}),vP=new Be({"Start and end":"start-and-end",Start:"start",Midspan:"midspan",End:"end"}),mE=new Be({startingPoint:"starting-point",barrier:"barrier",stoppingPoint:"stopping-point"}),yE=new Be({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation",path:"path",circuit:"circuit"}),YFe="{00000000-0000-0000-0000-000000000000}",QFe=new Be({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionEdgeMidspanConnectivity:"junction-edge-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),XFe={connectivity:1,"junction-junction-connectivity":1,containment:2,attachment:3,"junction-edge-from-connectivity":4,"junction-edge-midspan-connectivity":5,"junction-edge-to-connectivity":6},pnt=new Be({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});let oi=class extends g8{constructor(e){super(e),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.circuitName=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.inferConnectivity=null,this.maxHops=null,this.nearestNeighbor=null,this.numPaths=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};l([p({type:[Object],json:{write:!0}})],oi.prototype,"filterBarriers",void 0),l([p({type:String,json:{write:!0}})],oi.prototype,"arcadeExpressionBarrier",void 0),l([p({type:String,json:{write:!0}})],oi.prototype,"circuitName",void 0),l([p({type:String,json:{write:!0}})],oi.prototype,"domainNetworkName",void 0),l([p({type:String,json:{write:!0}})],oi.prototype,"filterBitsetNetworkAttributeName",void 0),l([p({type:[Object],json:{write:!0}})],oi.prototype,"filterFunctionBarriers",void 0),l([p({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],oi.prototype,"filterScope",void 0),l([p({type:Boolean,json:{write:!0}})],oi.prototype,"includeContainers",void 0),l([p({type:Boolean,json:{write:!0}})],oi.prototype,"includeContent",void 0),l([p({type:Boolean,json:{write:!0}})],oi.prototype,"includeIsolated",void 0),l([p({type:Boolean,json:{write:!0}})],oi.prototype,"includeStructures",void 0),l([p({type:Boolean,json:{write:!0}})],oi.prototype,"allowIndeterminateFlow",void 0),l([p({type:Boolean,json:{write:!0}})],oi.prototype,"includeUpToFirstSpatialContainer",void 0),l([p({type:Boolean,json:{write:!0}})],oi.prototype,"inferConnectivity",void 0),l([p({type:Number,json:{write:!0}})],oi.prototype,"maxHops",void 0),l([p({type:Object,json:{write:!0}})],oi.prototype,"nearestNeighbor",void 0),l([p({type:Number,json:{write:!0}})],oi.prototype,"numPaths",void 0),l([p({type:[Object],json:{write:!0}})],oi.prototype,"outputFilterCategories",void 0),l([p({type:[Object],json:{write:!0}})],oi.prototype,"outputFilters",void 0),l([p({type:[Object],json:{write:!0}})],oi.prototype,"propagators",void 0),l([p({type:String,json:{write:!0}})],oi.prototype,"subnetworkName",void 0),l([p({type:String,json:{write:!0}})],oi.prototype,"targetTierName",void 0),l([p({type:String,json:{write:!0}})],oi.prototype,"diagramTemplateName",void 0),l([p({type:String,json:{write:!0}})],oi.prototype,"tierName",void 0),l([p({type:Boolean,json:{write:!0}})],oi.prototype,"validateLocatability",void 0),oi=l([M("esri.networks.support.UNTraceConfiguration")],oi);const KFe=oi;let Bs=class extends PDe{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,i){return e.tierName!==void 0?KFe.fromJSON(e):g8.fromJSON(e)}};l([p({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],Bs.prototype,"globalId",void 0),l([p({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],Bs.prototype,"title",void 0),l([p({type:g8,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Bs.prototype,"traceConfiguration",void 0),l([se("service","traceConfiguration")],Bs.prototype,"readTraceConfiguration",null),l([p({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Bs.prototype,"creationDate",void 0),l([p({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Bs.prototype,"creator",void 0),l([p({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Bs.prototype,"description",void 0),l([p({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],Bs.prototype,"minStartingPoints",void 0),l([p({json:{origins:{service:{read:!0,write:!0}},read:!1}})],Bs.prototype,"resultTypes",void 0),l([p({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],Bs.prototype,"tags",void 0),l([p({type:yE.apiValues,json:{type:yE.jsonValues,origins:{service:{read:yE.read,write:yE.write}},read:!1}})],Bs.prototype,"traceType",void 0),Bs=l([M("esri.networks.support.NamedTraceConfiguration")],Bs);const e8e=Bs;function t8e(t){const e=t?.fieldsIndex,i="fromnetworksourceid",r="fromglobalid",n="fromterminalid",s="fromfirstunit",o="fromnumunits",u="tonetworksourceid",d="toglobalid",h="toterminalid",m="tofirstunit",v="tonumunits",b="status",_="associationtype",x="iscontentvisible",$="percentalong",E="globalid";return{fromNetworkSourceId:e?.get(i)?.name??i,fromGlobalId:e?.get(r)?.name??r,fromTerminalId:e?.get(n)?.name??n,fromFirstUnit:e?.get(s)?.name??s,fromNumUnits:e?.get(o)?.name??o,toNetworkSourceId:e?.get(u)?.name??u,toGlobalId:e?.get(d)?.name??d,toTerminalId:e?.get(h)?.name??h,toFirstUnit:e?.get(m)?.name??m,toNumUnits:e?.get(v)?.name??v,status:e?.get(b)?.name??b,associationType:e?.get(_)?.name??_,isContentVisible:e?.get(x)?.name??x,percentAlong:e?.get($)?.name??$,globalId:e?.get(t?.globalIdField??E)?.name??E}}function mnt(t,e){if(e.type!=="feature"&&e.type!=="subtype-group")return[];if(!e.url)return[];const i="utilityNetworks"in t.map?t.map.utilityNetworks??[]:[];for(const r of i)if(r.isUtilityLayer(e)){const n=e.fieldsIndex.get("assetgroup"),s=e.fieldsIndex.get("assettype");return[n?.name,s?.name].filter(o=>o!=null)}return[]}let Co=class extends _e{constructor(e){super(e),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTable=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTable=null,this.associationsTableId=null,this.associationsTableUrl=null}destroy(){this.associationsTable?.destroy()}async loadAssociationsTable(e){if(!this.associationsTable){const{associationsTableUrl:i}=this;if(!i)throw new L("utility-network-system-layers:missing-associations-table-url","Unable to load the associations table, as the `associationsTableUrl` is not set.");this.associationsTable=new Ee({url:i})}return await this.associationsTable.load(e),this.associationsTable}async loadSubnetworksTable(e){if(!this.subnetworksTable){const{subnetworksTableUrl:i}=this;if(!i)throw new L("utility-network-system-layers:missing-subnetworks-table-url","Unable to load the subnetworks table, as the `subnetworksTableUrl` is not set.");this.subnetworksTable=new Ee({url:i})}return await this.subnetworksTable.load(e),this.subnetworksTable}};l([p({constructOnly:!0})],Co.prototype,"rulesTableId",void 0),l([p({constructOnly:!0})],Co.prototype,"rulesTableUrl",void 0),l([p()],Co.prototype,"subnetworksTable",void 0),l([p({constructOnly:!0})],Co.prototype,"subnetworksTableId",void 0),l([p({constructOnly:!0})],Co.prototype,"subnetworksTableUrl",void 0),l([p({constructOnly:!0})],Co.prototype,"dirtyAreasLayerId",void 0),l([p({constructOnly:!0})],Co.prototype,"dirtyAreasLayerUrl",void 0),l([p()],Co.prototype,"associationsTable",void 0),l([p({constructOnly:!0})],Co.prototype,"associationsTableId",void 0),l([p({constructOnly:!0})],Co.prototype,"associationsTableUrl",void 0),Co=l([M("esri.networks.support.NetworkSystemLayers")],Co);let p0=class extends B{constructor(e){super(e),this.id=null,this.name=null}};l([p({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],p0.prototype,"id",void 0),l([p({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],p0.prototype,"name",void 0),l([p({type:Boolean,json:{write:!0}})],p0.prototype,"isUpstreamTerminal",void 0),p0=l([M("esri.networks.support.Terminal")],p0);const i8e=p0,gE=new Be({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let Id=class extends B{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};l([p({type:String,json:{write:!0}})],Id.prototype,"defaultConfiguration",void 0),l([p({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],Id.prototype,"id",void 0),l([p({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],Id.prototype,"name",void 0),l([p({type:[i8e],json:{write:!0}})],Id.prototype,"terminals",void 0),l([p({type:gE.apiValues,json:{type:gE.jsonValues,read:gE.read,write:gE.write}})],Id.prototype,"traversabilityModel",void 0),Id=l([M("esri.networks.support.TerminalConfiguration")],Id);let Ws=class extends B{constructor(e){super(e),this.type="networkElement",this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};l([p({json:{write:!1}})],Ws.prototype,"type",void 0),l([p({type:Number,json:{write:!0}})],Ws.prototype,"assetGroupCode",void 0),l([p({type:Number,json:{write:!0}})],Ws.prototype,"assetTypeCode",void 0),l([p({type:String,json:{write:!0}})],Ws.prototype,"globalId",void 0),l([p({type:Number,json:{write:!0}})],Ws.prototype,"networkSourceId",void 0),l([p({type:Number,json:{write:!0}})],Ws.prototype,"objectId",void 0),l([p({type:Number,json:{write:!0}})],Ws.prototype,"positionFrom",void 0),l([p({type:Number,json:{write:!0}})],Ws.prototype,"positionTo",void 0),l([p({type:Number,json:{write:!0}})],Ws.prototype,"terminalId",void 0),Ws=l([M("esri.rest.networks.support.NetworkElement")],Ws);let za=class extends Ws{constructor(e){super(e),this.type="telecomNetworkElement",this.firstUnit=null,this.numUnits=null}};l([p({json:{write:!1}})],za.prototype,"type",void 0),l([p({json:{write:!0}})],za.prototype,"firstUnit",void 0),l([p({json:{write:!0}})],za.prototype,"numUnits",void 0),za=l([M("esri.rest.networks.support.TelecomNetworkElement")],za);let dd=class extends B{constructor(e){super(e),this.edgeElement=null,this.junctionElement=null}readEdgeElement(e,i){return new za({networkSourceId:i.edgeNetworkSourceId,globalId:i.edgeGlobalId,objectId:i.edgeObjectId,positionFrom:i.edgePositionFrom,positionTo:i.edgePositionTo,firstUnit:i.edgeFirstUnit,numUnits:i.edgeNumUnits})}writeEdgeElement(e,i){i.edgeNetworkSourceId=e.networkSourceId,i.edgeGlobalId=e.globalId,i.edgeObjectId=e.objectId,i.edgePositionFrom=e.positionFrom,i.edgePositionTo=e.positionTo,i.edgeFirstUnit=e.firstUnit,i.edgeNumUnits=e.numUnits}readJunctionElement(e,i){return new za({networkSourceId:i.junctionNetworkSourceId,globalId:i.junctionGlobalId,objectId:i.junctionObjectId,terminalId:i.junctionTerminalId,firstUnit:i.junctionFirstUnit,numUnits:i.junctionNumUnits})}writeJunctionElement(e,i){i.junctionNetworkSourceId=e.networkSourceId,i.junctionGlobalId=e.globalId,i.junctionObjectId=e.objectId,i.junctionTerminalId=e.terminalId,i.junctionFirstUnit=e.firstUnit,i.junctionNumUnits=e.numUnits}};l([p({type:za,json:{read:{source:["edgeNetworkSourceId","edgeGlobalId","edgeObjectId","edgePositionFrom","edgePositionTo","edgeFirstUnit","edgeNumUnits"]},write:!0}})],dd.prototype,"edgeElement",void 0),l([se("edgeElement")],dd.prototype,"readEdgeElement",null),l([pe("edgeElement")],dd.prototype,"writeEdgeElement",null),l([p({type:za,json:{read:{source:["junctionNetworkSourceId","junctionGlobalId","junctionObjectId","junctionTerminalId","junctionFirstUnit","junctionNumUnits"]},write:!0}})],dd.prototype,"junctionElement",void 0),l([se("junctionElement")],dd.prototype,"readJunctionElement",null),l([pe("junctionElement")],dd.prototype,"writeJunctionElement",null),dd=l([M("esri.networks.support.CircuitPathConnectivityElement")],dd);const r8e=dd;let _l=class extends B{constructor(e){super(e),this.globalId=null,this.isFilterBarrier=!1,this.percentAlong=null,this.terminalId=null,this.type=null,this.firstUnit=null,this.numUnits=null,this.networkSourceId=null}};l([p({type:String,json:{write:!0}})],_l.prototype,"globalId",void 0),l([p({type:Boolean,json:{write:!0}})],_l.prototype,"isFilterBarrier",void 0),l([p({type:Number,json:{write:!0}})],_l.prototype,"percentAlong",void 0),l([p({type:Number,json:{write:!0}})],_l.prototype,"terminalId",void 0),l([p({type:mE.apiValues,json:{type:mE.jsonValues,read:{reader:mE.read,source:"traceLocationType"},write:{writer:mE.write,target:"traceLocationType"}}})],_l.prototype,"type",void 0),l([p({type:Number,json:{write:!0}})],_l.prototype,"firstUnit",void 0),l([p({type:Number,json:{write:!0}})],_l.prototype,"numUnits",void 0),l([p({type:Number})],_l.prototype,"networkSourceId",void 0),_l=l([M("esri.rest.networks.support.TraceLocation")],_l);const zJ=_l;let pd=class extends B{constructor(e){super(e),this.pathId=null,this.order=null,this.startingPoint=null,this.stoppingPoint=null,this.pathConnectivity=[],this.geometry=null}};l([p({type:Number,json:{write:!0}})],pd.prototype,"pathId",void 0),l([p({type:Number,json:{write:!0}})],pd.prototype,"order",void 0),l([p({type:zJ,json:{write:!0}})],pd.prototype,"startingPoint",void 0),l([p({type:zJ,json:{write:!0}})],pd.prototype,"stoppingPoint",void 0),l([p({type:[r8e],json:{write:!0}})],pd.prototype,"pathConnectivity",void 0),l([p({type:Kt,json:{write:!0}})],pd.prototype,"geometry",void 0),pd=l([M("esri.networks.support.CircuitPath")],pd);const v8=pd;let yh=class extends B{constructor(e){super(e),this.sourceId=null,this.globalId=null,this.terminalId=1,this.firstUnit=1,this.numUnits=1}};l([p({type:Number,json:{write:!0}})],yh.prototype,"sourceId",void 0),l([p({type:String,json:{write:!0}})],yh.prototype,"globalId",void 0),l([p({type:Number,json:{write:!0}})],yh.prototype,"terminalId",void 0),l([p({type:Number,json:{write:!0}})],yh.prototype,"firstUnit",void 0),l([p({type:Number,json:{write:!0}})],yh.prototype,"numUnits",void 0),yh=l([M("esri.networks.support.CircuitLocation")],yh);const rI=yh;let hd=class extends B{constructor(e){super(e),this.name=null,this.globalId=null,this.providerId=null,this.consumerId=null,this.isReserved=!1,this.attributes=null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,i){this.attributes?this.attributes[e]=i:this.attributes={[e]:i}}};l([p({type:String,json:{write:!0}})],hd.prototype,"name",void 0),l([p({type:String,json:{write:!0}})],hd.prototype,"globalId",void 0),l([p({type:String})],hd.prototype,"providerId",void 0),l([p({type:String})],hd.prototype,"consumerId",void 0),l([p({type:Boolean,json:{write:!0}})],hd.prototype,"isReserved",void 0),l([p({json:{write:{allowNull:!0,writer:(t,e)=>e.attributes=t??{}}}})],hd.prototype,"attributes",void 0),hd=l([M("esri.networks.support.Subcircuit")],hd);const jue=hd;let Au=class extends B{constructor(e){super(e),this.sectionId=null,this.role="start-and-end",this.sectionType="physical",this.startLocation=null,this.stopLocation=null,this.subcircuit=null,this.path=null}normalizeCtorArgs(e){if(e===void 0)return e;const{sectionId:i,startLocation:r,stopLocation:n,subcircuit:s}=e;return(r||n)&&s?(delete e.startLocation,delete e.stopLocation,ie.getLogger(this).warn("Cannot instantiate CircuitSection with both start/stop locations and subcircuit.",`CircuitSection with ID '${i}' was defaulted to having a subcircuit only.`)):(r&&!n||!r&&n)&&!s&&ie.getLogger(this).warn(`CircuitSection with ID '${i}' must have both start and stop locations.`,"Create/alter operations involving this section will fail unless both are populated."),e}setStartStopLocations(e,i){this.startLocation=e,this.stopLocation=i,this.subcircuit=null}setSubcircuit(e){this.subcircuit=e,this.startLocation=null,this.stopLocation=null}};l([p({type:Number,json:{write:!0}})],Au.prototype,"sectionId",void 0),l([p({type:vP.apiValues,json:{type:vP.jsonValues,read:vP.read},readOnly:!0})],Au.prototype,"role",void 0),l([p({type:Hh.apiValues,json:{type:Hh.jsonValues,read:Hh.read,write:Hh.write}})],Au.prototype,"sectionType",void 0),l([p({type:rI,json:{write:!0}})],Au.prototype,"startLocation",void 0),l([p({type:rI,json:{write:!0}})],Au.prototype,"stopLocation",void 0),l([p({type:jue,json:{write:!0}})],Au.prototype,"subcircuit",void 0),l([p({type:v8,readOnly:!0})],Au.prototype,"path",void 0),Au=l([M("esri.networks.support.CircuitSection")],Au);let Or=class extends B{constructor(e){super(e),this._sectionIdLookup=new Map,this.attributes=null,this.circuitManager=null,this.circuitType="physical",this.globalId=null,this.isDeleted=!1,this.lastExportedTime=null,this.lastVerifiedTime=null,this.name=null,this.sections=null,this.startLocation=null,this.status="dirty",this.stopLocation=null,this.subcircuits=[]}initialize(){this.addHandles([be(()=>this.sections,e=>{this._sectionIdLookup.clear(),e!=null&&Array.from(e.keys()).forEach(i=>this._sectionIdLookup.set(i.sectionId,i))},Zr)])}normalizeCtorArgs(e){if(e===void 0)return e;const{name:i,startLocation:r,stopLocation:n,sections:s}=e;return(r||n)&&s?(delete e.startLocation,delete e.stopLocation,ie.getLogger(this).warn("Cannot instantiate Circuit with both start/stop locations and sections.",`Circuit '${i}' was defaulted to having sections only.`)):(r&&!n||!r&&n)&&!s&&ie.getLogger(this).warn(`Non-sectioned circuit '${i}' must have both start and stop locations.`,"Create/alter operations involving this circuit will fail unless both are populated."),e}get isSectioned(){return this.startLocation==null&&this.stopLocation==null&&this.sections!=null}readSections(e,i){const{sectionOrder:r,sections:n}=i,s=new Map;if(n==null)return null;if(this._sectionIdLookup.clear(),n.forEach(o=>this._sectionIdLookup.set(o.sectionId,Au.fromJSON(o))),r==null)return Array.from(this._sectionIdLookup.values()).forEach(o=>s.set(o,[])),s;for(const[o,u]of Object.entries(r)){const d=Number(o),h=this._sectionIdLookup.get(d);if(h==null)continue;const m=u.map(v=>this._sectionIdLookup.get(v)).filter(is);s.set(h,m)}return s}writeSections(e,i){const r={},n=[];e?.forEach((s,o)=>{const u=o.sectionId.toString(),d=s.map(h=>h.sectionId);r[u]=d,n.push(o.toJSON())}),i.sectionOrder=r,i.sections=n}getSectionById(e){return this._sectionIdLookup.get(e)??null}setStartStopLocations(e,i){this.startLocation=e,this.stopLocation=i,this.sections=null}setSections(e){this.sections=e,this.startLocation=null,this.stopLocation=null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,i){this.attributes?this.attributes[e]=i:this.attributes={[e]:i}}};l([p({json:{write:{allowNull:!0,writer:(t,e)=>e.attributes=t??{}}}})],Or.prototype,"attributes",void 0),l([p()],Or.prototype,"circuitManager",void 0),l([p({type:Hh.apiValues,json:{type:Hh.jsonValues,read:Hh.read,write:Hh.write}})],Or.prototype,"circuitType",void 0),l([p({type:String,json:{write:!0}})],Or.prototype,"globalId",void 0),l([p({type:Boolean,readOnly:!0})],Or.prototype,"isDeleted",void 0),l([p({type:Boolean,json:{write:!0},readOnly:!0})],Or.prototype,"isSectioned",null),l([p({type:Date,json:{read:{reader:t=>typeof t=="number"?new Date(t):null}},readOnly:!0})],Or.prototype,"lastExportedTime",void 0),l([p({type:Date,json:{read:{reader:t=>typeof t=="number"?new Date(t):null}},readOnly:!0})],Or.prototype,"lastVerifiedTime",void 0),l([p({type:String,json:{write:!0}})],Or.prototype,"name",void 0),l([p({json:{read:{source:["sectionOrder","sections"]},write:!0}})],Or.prototype,"sections",void 0),l([se("sections")],Or.prototype,"readSections",null),l([pe("sections")],Or.prototype,"writeSections",null),l([p({type:rI,json:{write:!0}})],Or.prototype,"startLocation",void 0),l([p({type:gP.apiValues,json:{type:gP.jsonValues,read:gP.read}})],Or.prototype,"status",void 0),l([p({type:rI,json:{write:!0}})],Or.prototype,"stopLocation",void 0),l([p({type:[jue],json:{write:!0}})],Or.prototype,"subcircuits",void 0),Or=l([M("esri.networks.support.Circuit")],Or);let Pm=class extends B{constructor(e){super(e),this.circuit=null,this.geometry=null,this.path=null}readCircuit(e,i){return Or.fromJSON(i)}};l([p({type:Or,json:{write:!0,read:{source:["name","globalId","isSectioned","sectionOrder","startLocation","stopLocation","sections","subcircuits","lastVerifiedTime","lastExportedTime","circuitType","status"]}}})],Pm.prototype,"circuit",void 0),l([se("circuit")],Pm.prototype,"readCircuit",null),l([p({type:Kt,json:{write:!0}})],Pm.prototype,"geometry",void 0),l([p({type:v8,json:{write:!0}})],Pm.prototype,"path",void 0),Pm=l([M("esri.rest.networks.circuits.support.CircuitTraceResult")],Pm);const n8e=Pm;let h0=class extends B{constructor(e){super(e),this.line=null,this.multipoint=null,this.polygon=null}};l([p({type:Kt,json:{write:!0},readOnly:!0})],h0.prototype,"line",void 0),l([p({type:Jn,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],h0.prototype,"multipoint",void 0),l([p({type:hi,json:{write:!0},readOnly:!0})],h0.prototype,"polygon",void 0),h0=l([M("esri.rest.networks.support.AggregatedGeometry")],h0);const s8e=h0;let f0=class extends B{constructor(e){super(e),this.functionType=null,this.networkAttributeName=null,this.result=null}};l([p({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],f0.prototype,"functionType",void 0),l([p({type:String,json:{write:!0},readOnly:!0})],f0.prototype,"networkAttributeName",void 0),l([p({type:Number,json:{write:!0},readOnly:!0})],f0.prototype,"result",void 0),f0=l([M("esri.rest.networks.support.FunctionResult")],f0);const o8e=f0;let Ro=class extends B{constructor(e){super(e),this.aggregatedGeometry=null,this.circuits=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.paths=null,this.startingPointsIgnored=!1,this.warnings=null}readNetworkElements(e,i){return i.elements!=null&&Array.isArray(i.elements)?i.elements.map(r=>"firstUnit"in r&&"numUnits"in r?new za({...r}):new Ws({...r})):[]}writeNetworkElements(e,i){i.elements=e.map(r=>r.toJSON())}};l([p({type:s8e,json:{write:!0},readOnly:!0})],Ro.prototype,"aggregatedGeometry",void 0),l([p({type:[n8e],json:{write:!0},readOnly:!0})],Ro.prototype,"circuits",void 0),l([p({type:[Ws],json:{write:!0},readOnly:!0})],Ro.prototype,"elements",void 0),l([se("elements")],Ro.prototype,"readNetworkElements",null),l([pe("elements")],Ro.prototype,"writeNetworkElements",null),l([p({type:[o8e],json:{write:!0},readOnly:!0})],Ro.prototype,"globalFunctionResults",void 0),l([p({type:Boolean,json:{write:!0},readOnly:!0})],Ro.prototype,"kFeaturesForKNNFound",void 0),l([p({type:[v8],json:{write:!0},readOnly:!0})],Ro.prototype,"paths",void 0),l([p({type:Boolean,json:{write:!0},readOnly:!0})],Ro.prototype,"startingPointsIgnored",void 0),l([p({type:[String],json:{write:!0},readOnly:!0})],Ro.prototype,"warnings",void 0),Ro=l([M("esri.rest.networks.support.TraceResult")],Ro);const a8e=Fr()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let Dm=class extends Ro{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await $t(this.statusUrl,i),n=r.traceResults?{...r.traceResults,...r}:r;return this.read(n),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise((n,s)=>{this._clearTimer();const o=setInterval(()=>{this._timer||s(xt()),this.checkJobStatus().then(u=>{const{status:d}=u;switch(this.status=d,d){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":r&&r(this)}},u=>{this._clearTimer(),s(u)})},i);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};l([p({type:String,json:{write:!0}})],Dm.prototype,"statusUrl",void 0),l([Ae(a8e)],Dm.prototype,"status",void 0),l([p({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],Dm.prototype,"submissionTime",void 0),l([p({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],Dm.prototype,"lastUpdatedTime",void 0),Dm=l([M("esri.networks.support.TraceJobInfo")],Dm);let Ea=class extends JFe{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility",this._circuitManagerMap=new Map,this._terminalById=new Map,this._unitIdentifierManager=null}initialize(){this.addHandles(be(()=>[this.gdbVersion,this.historicMoment],()=>{this.networkSystemLayers.associationsTable&&(this.networkSystemLayers.associationsTable.gdbVersion!==this.gdbVersion&&(this.networkSystemLayers.associationsTable.gdbVersion=this.gdbVersion),this.networkSystemLayers.associationsTable.historicMoment!==this.historicMoment&&(this.networkSystemLayers.associationsTable.historicMoment=this.historicMoment))}))}get _rulesLayer(){const{gdbVersion:e,historicMoment:i}=this,r=this.networkSystemLayers.rulesTableUrl;return new Ee({url:r,gdbVersion:e,historicMoment:i})}get _utilityLayerList(){const e=new Set;return this.dataElement?.domainNetworks?.map(i=>{i?.edgeSources?.map(({layerId:r,sourceId:n})=>{this._layerIdBySourceId.set(n,r),this._sourceIdByLayerId.set(r,n),e.add(r)}),i?.junctionSources?.map(({layerId:r,sourceId:n})=>{this._layerIdBySourceId.set(n,r),this._sourceIdByLayerId.set(r,n),e.add(r)})}),e}get serviceTerritoryFeatureLayerId(){return this.dataElement?.serviceTerritoryFeatureLayerId??null}get networkSystemLayers(){return new Co({rulesTableId:this.sourceJSON?.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.rulesTableId}`:null,subnetworksTableId:this.sourceJSON?.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:this.sourceJSON?.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:this.sourceJSON?.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){return this.dataElement?.terminalConfigurations.map(e=>Id.fromJSON(e))||[]}get domainNetworkNames(){return this.dataElement?.domainNetworks.map(e=>e.domainNetworkName)||[]}get hasTelecomNetwork(){return this.dataElement?.domainNetworks.some(e=>e.isTelecomNetwork)??!1}get associationsTable(){return this.networkSystemLayers.associationsTable}async load(e){return this.addResolvingPromise(this._load(e)),this}async _load(e){await super._load(e),await Promise.all([this._loadNamedTraceConfigurationsFromNetwork(e),this.networkSystemLayers.loadAssociationsTable(e)])}getTerminalConfiguration(e){let i=null,r=null;const n=e.sourceLayer;let s=null;if(n?.type==="feature"){if(s=n.layerId,s===null)return null}else if(n?.type!=="subtype-sublayer"||(s=n?.parent?.layerId??null,s===null))return null;const o=e.attributes;if(o==null)return null;for(const h of Object.keys(o))h.toUpperCase()==="ASSETGROUP"&&(i=e.getAttribute(h)),h.toUpperCase()==="ASSETTYPE"&&(r=e.getAttribute(h));if(!this.dataElement)return null;let u=null;const d=this.dataElement.domainNetworks;for(const h of d){const m=h.junctionSources?.find(v=>v.layerId===s);if(m){const v=m.assetGroups?.find(b=>b.assetGroupCode===i);if(v){const b=v.assetTypes?.find(_=>_.assetTypeCode===r);if(b?.isTerminalConfigurationSupported){u=b.terminalConfigurationId;break}}}}if(u!=null){const h=this.dataElement.terminalConfigurations,m=h?.find(v=>v.terminalConfigurationId===u);return m?Id.fromJSON(m):null}return null}getTierNames(e){return this.dataElement?.domainNetworks.find(r=>r.domainNetworkName===e)?.tiers?.map(r=>r.name)||[]}async getRulesTable(){const e=this._rulesLayer;e.loaded||await e.load();const i=this.dataElement?.domainNetworks;if(!i)return null;const r=i.flatMap(s=>[...s.edgeSources||[],...s.junctionSources||[]]),n=(await this._queryRulesTable(e)).map(s=>this._hydrateRuleInfo(e,r,s));return new mh({rulesLayer:e,rules:n})}async getCircuitManager(e){if(!this.hasTelecomNetwork)return null;const i=this.dataElement?.domainNetworks.find(n=>n.domainNetworkName===e&&n.isTelecomNetwork);if(!i)return null;const{default:r}=await H(()=>import("./CircuitManager-DuiXJE3I.js"),[]);return Wy(this._circuitManagerMap,e,()=>new r({utilityNetwork:this,telecomDomainNetwork:i}))}async getUnitIdentifierManager(){if(!this.hasTelecomNetwork)return null;if(this._unitIdentifierManager)return this._unitIdentifierManager;const{default:e}=await H(()=>import("./UnitIdentifierManager-wGUKG9Vs.js"),[]);return this._unitIdentifierManager=new e({utilityNetwork:this}),this._unitIdentifierManager}getTerminalById(e){if(!this.dataElement||e==null)return null;const i=this._terminalById.get(e);return i??(this.terminalConfigurations.forEach(r=>{r.terminals.forEach(n=>{this._terminalById.set(n.id,n)})}),this._terminalById.get(e))}isUtilityLayer(e){return"layerId"in e?e.layerId!=null&&this._utilityLayerList.has(e.layerId)&&(e.url?.startsWith(this.featureServiceUrl)??!1):!(e.type!=="subtype-sublayer"||!e.parent)&&this._utilityLayerList.has(e.parent.layerId)&&(e.parent.url?.startsWith(this.featureServiceUrl)??!1)}async queryAssociations(e,i){const[{queryAssociations:r},{default:n}]=await Promise.all([H(()=>import("./queryAssociations-tuHnspL_.js"),__vite__mapDeps([298,299])),H(()=>import("./QueryAssociationsParameters-tsUtaVct.js"),[])]),s=n.from(e);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,(await r(this.networkServiceUrl,s,i)).associations}async synthesizeAssociationGeometries(e){const[{synthesizeAssociationGeometries:i},{default:r}]=await Promise.all([H(()=>import("./synthesizeAssociationGeometries-BhpgvooC.js"),__vite__mapDeps([300,299])),H(()=>import("./SynthesizeAssociationGeometriesParameters-Dtl691h3.js"),[])]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async trace(e){const[{trace:i},{default:r}]=await Promise.all([H(()=>import("./trace-D6t2eFQT.js"),[]),H(()=>import("./TraceParameters-C2sa8xMi.js"),[])]),n=r.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,i(this.networkServiceUrl,n)}async submitTraceJob(e){const[{submitTraceJob:i},{default:r}]=await Promise.all([H(()=>import("./trace-D6t2eFQT.js"),[]),H(()=>import("./TraceParameters-C2sa8xMi.js"),[])]),n=r.from(e);n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment;const s=await i(this.networkServiceUrl,n);return new Dm({statusUrl:s})}async canAddAssociation(e){const i=await this.getRulesTable();if(!i)return!1;const{fromNetworkElement:r,toNetworkElement:n}=e;if(!r||!n)return!1;await i.load();let s=null;switch(e.associationType){case"containment":s=i.rulesCategorized.containment;break;case"attachment":s=i.rulesCategorized.attachment;break;default:s=i.rulesCategorized.connectivity}return s.some(o=>S2(o,r,n))}generateAddAssociations(e){const{associationsTable:i}=this.networkSystemLayers,{fromNetworkSourceId:r,fromGlobalId:n,fromTerminalId:s,fromFirstUnit:o,fromNumUnits:u,toNetworkSourceId:d,toGlobalId:h,toTerminalId:m,toFirstUnit:v,toNumUnits:b,associationType:_,isContentVisible:x,percentAlong:$,globalId:E}=t8e(i);return{addFeatures:e.map(A=>{const O=new Ti({attributes:{[r]:A.fromNetworkElement?.networkSourceId,[n]:A.fromNetworkElement?.globalId,[s]:A.fromNetworkElement?.terminalId,[d]:A.toNetworkElement?.networkSourceId,[h]:A.toNetworkElement?.globalId,[m]:A.toNetworkElement?.terminalId,[_]:XFe[A.associationType],[x]:A.isContentVisible==null?void 0:A.isContentVisible?1:0,[$]:A.percentAlong,[E]:A.globalId}});return A.fromNetworkElement instanceof za&&(O.attributes[o]=A.fromNetworkElement?.firstUnit,O.attributes[u]=A.fromNetworkElement?.numUnits),A.toNetworkElement instanceof za&&(O.attributes[v]=A.toNetworkElement?.firstUnit,O.attributes[b]=A.toNetworkElement?.numUnits),O}),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:i?.globalIdField??"globalid",objectIdField:i?.objectIdField??"objectid"}}}generateDeleteAssociations(e){const{associationsTable:i,associationsTableId:r}=this.networkSystemLayers,n={id:r,identifierFields:{globalIdField:i?.globalIdField??"globalid",objectIdField:i?.objectIdField??"objectid"}};if(this.dataElement?.schemaGeneration===-8){const o=this._generateDeleteTelecomAssociationPayload(e);return{...n,deleteAssociations:o}}const s=e.map(o=>({globalId:o.globalId}));return{...n,deleteFeatures:s}}generateCombineNetworkElements(e){return{id:this._ensureSingleSourceIdAsValidLayerId(e),combineGroupedObjects:[{globalIds:e.map(i=>i.globalId)}]}}generateDivideNetworkElements(e,i){return{id:this._ensureSingleSourceIdAsValidLayerId([e]),divideGroupedObjects:[{globalId:e.globalId,numUnits:i}]}}async loadAssociationsTable(){return this.networkSystemLayers.loadAssociationsTable()}async loadSubnetworksTable(){return this.networkSystemLayers.loadSubnetworksTable()}async _loadNamedTraceConfigurationsFromNetwork(e){if(this.sharedNamedTraceConfigurations?.length===0)return;const i=this.sharedNamedTraceConfigurations.map(n=>n.globalId),r=await this.queryNamedTraceConfigurations({globalIds:i},e);for(const n of this.sharedNamedTraceConfigurations){const s=r?.find(o=>o.globalId===n.globalId);if(s){const o=s.write({},{origin:"service"});n.read(o,{origin:"service"})}}}_hydrateRuleInfo(e,i,r){const n=e.fieldsIndex,s=n.get("RULETYPE"),o=n.get("CREATIONDATE"),u=n.get("FROMNETWORKSOURCEID"),d=n.get("FROMASSETGROUP"),h=n.get("FROMASSETTYPE"),m=n.get("FROMTERMINALID"),v=n.get("TONETWORKSOURCEID"),b=n.get("TOASSETGROUP"),_=n.get("TOASSETTYPE"),x=n.get("TOTERMINALID"),$=n.get("VIANETWORKSOURCEID"),E=n.get("VIAASSETGROUP"),A=n.get("VIAASSETTYPE"),O=n.get("VIATERMINALID"),D=r.attributes[s.name],R=new Date(r.attributes[o.name]),P=[{networkSourceId:r.attributes[u.name],assetGroupId:r.attributes[d.name],assetTypeId:r.attributes[h.name],terminalId:r.attributes[m.name]},{networkSourceId:r.attributes[v.name],assetGroupId:r.attributes[b.name],assetTypeId:r.attributes[_.name],terminalId:r.attributes[x.name]},{networkSourceId:r.attributes[$.name],assetGroupId:r.attributes[E.name],assetTypeId:r.attributes[A.name],terminalId:r.attributes[O.name]}],j={ruleType:D,creationDate:R};for(const Q of[0,1,2]){if(D!==5&&Q===2)continue;const re=P[Q],ce=i.find(ve=>ve.sourceId===re.networkSourceId),ue=ce?.assetGroups.find(ve=>ve.assetGroupCode===re.assetGroupId),ye=ue?.assetTypes.find(ve=>ve.assetTypeCode===re.assetTypeId),he=this._getTerminal(ye,re);let Pe="";switch(Q){case 0:Pe="from";break;case 1:Pe="to";break;case 2:Pe="via"}j[`${Pe}NetworkSource`]=ce,j[`${Pe}AssetGroup`]=ue,j[`${Pe}AssetType`]=ye,j[`${Pe}Terminal`]=he?.toJSON()}return j}_getTerminal(e,i){const r=e?.terminalConfigurationId;return this.terminalConfigurations?.find(s=>s.id===r)?.terminals?.find(s=>s.id===i.terminalId)??null}async _queryRulesTable(e){const{gdbVersion:i,historicMoment:r}=this,n=new Oe({where:"1=1",outFields:["*"],gdbVersion:i,historicMoment:r});return(await Ale(e,n)).features}_generateDeleteTelecomAssociationPayload(e){return e.map(i=>({globalId:i.globalId??YFe,associationType:QFe.toJSON(i.associationType),fromSourceId:i.fromNetworkElement.networkSourceId,fromGlobalId:i.fromNetworkElement.globalId,fromTerminalId:i.fromNetworkElement.terminalId,toSourceId:i.toNetworkElement.networkSourceId,toGlobalId:i.toNetworkElement.globalId,toTerminalId:i.toNetworkElement.terminalId}))}_ensureSingleSourceIdAsValidLayerId(e){const i=uge(e.map(s=>s.networkSourceId));if(i.length>1)throw new L("utility-network:invalid-source-id","'networkSourceId' is not valid. Ensure that all network elements have the same 'networkSourceId' and that it corresponds to a valid layer in the utility network.");const r=i[0],n=this.getLayerIdBySourceId(r);if(n==null)throw new L("utility-network:invalid-source-id","'networkSourceId' is not valid. Ensure that all network elements have the same 'networkSourceId' and that it corresponds to a valid layer in the utility network.");return n}};l([p({readOnly:!0})],Ea.prototype,"_rulesLayer",null),l([p({type:[e8e],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],Ea.prototype,"sharedNamedTraceConfigurations",void 0),l([p({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],Ea.prototype,"type",void 0),l([p({readOnly:!0})],Ea.prototype,"serviceTerritoryFeatureLayerId",null),l([p({readOnly:!0})],Ea.prototype,"networkSystemLayers",null),l([p({readOnly:!0})],Ea.prototype,"terminalConfigurations",null),l([p({readOnly:!0})],Ea.prototype,"domainNetworkNames",null),l([p({readOnly:!0})],Ea.prototype,"hasTelecomNetwork",null),l([p({readOnly:!0,json:{read:!1}})],Ea.prototype,"associationsTable",null),Ea=l([M("esri.networks.UtilityNetwork")],Ea);const zue=Ea,l8e=Object.freeze(Object.defineProperty({__proto__:null,default:zue},Symbol.toStringTag,{value:"Module"}));let m0=class extends Re(B){constructor(e){super(e),this.expression=null,this.returnType="string",this.title=null}};l([p({type:String,json:{write:{isRequired:!0}}})],m0.prototype,"expression",void 0),l([p({type:["number","string"],json:{write:!0}})],m0.prototype,"returnType",void 0),l([p({type:String,json:{write:!0}})],m0.prototype,"title",void 0),m0=l([M("esri.webdoc.geotriggersInfo.ExpressionInfo")],m0);const Fue=m0,vE=new Be({deviceLocation:"device-location"});let x2=class extends Re(B){constructor(e){super(e),this.filterExpression=null,this.type="device-location"}};l([p({type:Fue,json:{write:!0}})],x2.prototype,"filterExpression",void 0),l([p({type:vE.apiValues,readOnly:!0,json:{type:vE.jsonValues,read:vE.read,write:vE.write}})],x2.prototype,"type",void 0),x2=l([M("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],x2);const u8e=x2;let $2=class extends Re(B){constructor(e){super(e),this.geometry=null,this.where=null}};l([p({types:kw,json:{read:oc,write:!0}})],$2.prototype,"geometry",void 0),l([p({type:String,json:{write:!0}})],$2.prototype,"where",void 0),$2=l([M("esri.webdoc.geotriggersInfo.FeatureFilter")],$2);const c8e=$2;let y0=class extends Re(B){constructor(e){super(e),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};l([p({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],y0.prototype,"layerId",void 0),l([p({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],y0.prototype,"layerUrl",void 0),l([Ae({featureLayer:"feature-layer"},{readOnly:!0})],y0.prototype,"type",void 0),y0=l([M("esri.webdoc.geotriggersInfo.FeatureLayerSource")],y0);const d8e=y0;let Nm=class extends Re(B){constructor(e){super(e),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};l([p({type:d8e,json:{write:{isRequired:!0}}})],Nm.prototype,"fenceSource",void 0),l([p({type:c8e,json:{write:!0}})],Nm.prototype,"filter",void 0),l([p({type:Number,json:{write:!0}})],Nm.prototype,"bufferDistance",void 0),l([Ae({features:"features"},{readOnly:!0})],Nm.prototype,"type",void 0),Nm=l([M("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],Nm);const p8e=Nm;let y3=class extends Re(B){constructor(e){super(e),this.type="fence"}};l([Ae({fence:"fence"},{readOnly:!0})],y3.prototype,"type",void 0),y3=l([M("esri.webdoc.geotriggersInfo.Geotrigger")],y3);const Vue=y3;let T2=class extends Re(B){constructor(e){super(e),this.expressionInfo=null,this.requestedActions=null}};l([p({type:Fue,json:{write:!0}})],T2.prototype,"expressionInfo",void 0),l([p({type:[String],json:{write:!0}})],T2.prototype,"requestedActions",void 0),T2=l([M("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],T2);const h8e=T2,f8e=new Be({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),m8e=new Be({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),bE=new Be({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let Sl=class extends Vue{constructor(e){super(e),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};l([Ae(f8e)],Sl.prototype,"enterExitRule",void 0),l([p({type:u8e,json:{write:{isRequired:!0}}})],Sl.prototype,"feed",void 0),l([Ae(m8e)],Sl.prototype,"feedAccuracyMode",void 0),l([p({type:bE.apiValues,json:{type:bE.jsonValues,read:bE.read,write:{writer:bE.write,isRequired:!0}}})],Sl.prototype,"fenceNotificationRule",void 0),l([p({type:p8e,json:{write:{isRequired:!0}}})],Sl.prototype,"fenceParameters",void 0),l([p({type:String,json:{write:!0}})],Sl.prototype,"name",void 0),l([p({type:h8e,json:{write:!0}})],Sl.prototype,"notificationOptions",void 0),l([Ae({fence:"fence"},{readOnly:!0})],Sl.prototype,"type",void 0),Sl=l([M("esri.webdoc.geotriggersInfo.FenceGeotrigger")],Sl);const y8e=Sl,g8e={base:Vue,key:"type",typeMap:{fence:y8e}};let g3=class extends Re(B){constructor(e){super(e),this.geotriggers=null}};l([p({types:[g8e],json:{write:{isRequired:!0}}})],g3.prototype,"geotriggers",void 0),g3=l([M("esri.webdoc.GeotriggersInfo")],g3);const v8e=g3;let v3=class extends Re(B){constructor(e){super(e),this.enabled=!0}};l([p({type:Boolean,nonNullable:!0,json:{write:!0}})],v3.prototype,"enabled",void 0),v3=l([M("esri.webdoc.ips.AppleIPSProperties")],v3);const b8e=v3;let b3=class extends Re(B){constructor(e){super(e),this.enabled=!0}};l([p({type:Boolean,nonNullable:!0,json:{write:!0}})],b3.prototype,"enabled",void 0),b3=l([M("esri.webdoc.ips.GNSSProperties")],b3);const w8e=b3;let g0=class extends Re(B){constructor(e){super(e),this.enabled=!0,this.distance=5,this.units="meter"}};l([p({type:Boolean,nonNullable:!0,json:{write:!0}})],g0.prototype,"enabled",void 0),l([p({type:Number,nonNullable:!0,json:{write:!0}})],g0.prototype,"distance",void 0),l([p({type:["feet","meter"],nonNullable:!0,json:{write:!0}})],g0.prototype,"units",void 0),g0=l([M("esri.webdoc.ips.PathSnappingProperties")],g0);const _8e=g0;let w3=class extends Re(B){constructor(e){super(e),this.enabled=!0}};l([p({type:Boolean,nonNullable:!0,json:{write:!0}})],w3.prototype,"enabled",void 0),w3=l([M("esri.webdoc.ips.SmoothingProperties")],w3);const S8e=w3;let Lm=class extends Re(B){constructor(e){super(e),this.appleIPS=null,this.gnss=null,this.smoothing=null,this.pathSnapping=null}};l([p({type:b8e,json:{name:"AppleIPS",write:!0}})],Lm.prototype,"appleIPS",void 0),l([p({type:w8e,json:{name:"GNSS",write:!0}})],Lm.prototype,"gnss",void 0),l([p({type:S8e,json:{write:!0}})],Lm.prototype,"smoothing",void 0),l([p({type:_8e,json:{write:!0}})],Lm.prototype,"pathSnapping",void 0),Lm=l([M("esri.webdoc.ips.Configuration")],Lm);const x8e=Lm;let v0=class extends Re(B){constructor(e){super(e),this.portalItem=null}readPortalItem(e,i,r){const{itemId:n}=i;if(n)return new Ue({id:n,portal:r?.portal})}writePortalItem(e,i){e?.id&&(i.itemId=e.id)}};l([p({type:Ue,json:{write:{isRequired:!0}}})],v0.prototype,"portalItem",void 0),l([se("portalItem",["itemId"])],v0.prototype,"readPortalItem",null),l([pe("portalItem",{itemId:{type:String}})],v0.prototype,"writePortalItem",null),v0=l([M("esri.webdoc.ips.PositioningService")],v0);const $8e=v0;let E2=class extends Re(B){constructor(e){super(e),this.positioningService=null,this.configuration=null}};l([p({type:$8e,json:{write:{isRequired:!0}}})],E2.prototype,"positioningService",void 0),l([p({type:x8e,json:{write:!0}})],E2.prototype,"configuration",void 0),E2=l([M("esri.webdoc.IPSInfo")],E2);const T8e=E2,E8e={currentVersion:qae,createInitialViewProperties:()=>new HA,parseVersion:eb.parse,itemType:"Web Map",name:"webmap",origin:"web-map"},M8e=fe.ofType(zue);var Pb;let jm=(Pb=class extends yNe{constructor(e){super(e),this.geotriggersInfo=null,this.ipsInfo=null,this.presentation=null,this.utilityNetworks=null}destroy(){if(this.utilityNetworks){const e=this.utilityNetworks.removeAll();for(const i of e)i.destroy();this.utilityNetworks.destroy()}}get context(){return E8e}loadAll(){return ak(this,e=>{e(this.ground,this.basemap,this.layers,this.tables,this.ipsInfo?.positioningService?.portalItem)})}static fromJSON(e){if(e)return new this({resourceInfo:e});throw new L("webmap:empty-resource","Expected a JSON resource but got nothing")}},Pb.VERSION=qae,Pb);l([p({type:v8e,json:{write:!0}})],jm.prototype,"geotriggersInfo",void 0),l([p({type:T8e,json:{write:!0,name:"mapIPSInfo"}})],jm.prototype,"ipsInfo",void 0),l([p({json:{write:!0}})],jm.prototype,"presentation",void 0),l([p({type:M8e,json:{read:!0,write:!0}})],jm.prototype,"utilityNetworks",void 0),jm=l([M("esri.WebMap")],jm);const A8e=jm,Mr=(t,e)=>{const r=hw().manager;r.onLoaded(()=>r.onLifecycle(()=>Wo(t,e,n.emit)));const n=bz();return n},Uue=(t,e)=>i=>I8e(i,t);class que extends xI{constructor(e,i){super(e),this.Y=new Map,this.A=void 0,this.#t=hX();const r=this;r.#i=i,r.Z(),r.setProvisionalExports(Gue(e,new WeakRef(r),e.M.length-1,r.instance,r.Y),!1),gz(e,n=>{if(n){const s=be(()=>e[n],o=>{if(o===r.instance)return;const u=r.instance;r.exports=o,r.instance=o,r.Y.forEach((d,h)=>e.requestUpdate(d,u[h])),r.#e&&u.destroy(),r.#e=!1},{sync:!0});r.onDestroy(s.remove)}},r.exports)}#e;#t;#i;get exports(){return fX(this.#t),super.exports}set exports(e){super.exports=e,this.#t.notify()}Z(){const e=this;e.instance="prototype"in e.#i&&"declaredClass"in e.#i.prototype?new e.#i:e.#i(),e.#e=!0}hostConnected(){this.exports=this.instance}hostDestroy(){this.#e&&this.instance.destroy?.()}}const I8e=Tz(que),Gue=(t,e,i,r,n)=>new Proxy(r,{get:(s,o)=>{const u=s[o];if(typeof o=="symbol"||n.has(o))return u;const d=t.M[i];return d.A=o,vz(t,h=>{if(d.A=void 0,h!==void 0){const m=h.key;n.set(o,m);const v=t.constructor.getPropertyOptions(m),b=o!==m&&m.toLowerCase().includes("disable");k8e(e,v,o,m,b),v.i===void 0&&O8e(v,i,o,b)}},u)}}),k8e=(t,e,i,r,n,s)=>s=be(()=>{const o=t.deref();return o===void 0||o.component.manager.destroyed?s=s.remove():o.exports[i]},(o,u)=>{if(!s)return;t.deref().component?.requestUpdate(r,n?!u:u),e.c=!1},{sync:!0}),O8e=(t,e,i,r)=>{t.d.get=function(){const n=this.M[e]?.exports[i];return r?!n:n},t.d.set=function(n){const s=this.M[e];s.A!==i&&(s.exports[i]=r?!n:n)}},C8e=t=>t.Y,R8e=(t,e)=>{const i=e.manager.useRefSync(t);i?.hostDestroy(),i?.Z(),i?.hostConnected()};const P8e=bf`@charset "UTF-8";@keyframes esri-basemap-slide{0%{opacity:0;margin-top:0;margin-left:0}75%{opacity:0;margin-top:0;margin-left:0}to{opacity:1;margin-top:5px;margin-left:5px}}@keyframes esri-docking-animation{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes popup-intro-animation-down{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes popup-intro-animation-up{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@supports (-ms-ime-align: auto){.esri-slider__anchor:focus{outline:1px dotted #000}}@keyframes esri-spinner--start-animation{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes esri-spinner--finish-animation{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(0)}}@keyframes esri-spinner--rotate-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (prefers-reduced-motion){.esri-utility-network-trace__reset-prompt{animation:none!important}}@media (prefers-reduced-motion){.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right,.esri-popup--is-docked{animation:none!important}}@keyframes esri-fade-in-down{0%{opacity:0;transform:translateY(-5px)}25%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in-up{0%{opacity:0;transform:translateY(5px)}25%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes esri-fade-in-scale{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes looping-progresss-bar-ani{0%{width:0;left:0}20%{width:20%;left:0}80%{width:20%;left:80%}to{width:0;left:100%}}@keyframes esri-rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes panel-advance{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-advance--rtl{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat--rtl{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}.esri-view{--esri-view-outline-color: var(--calcite-color-brand);--esri-view-outline: 2px solid var(--esri-view-outline-color);--esri-view-outline-offset: -2px;margin:0;padding:0;display:flex;height:100%;width:100%}.esri-view .esri-view-user-storage{overflow:hidden}.esri-view .esri-view-root{-webkit-tap-highlight-color:var(--calcite-color-foreground-1);-webkit-tap-highlight-color:transparent;border:none;flex:100%;margin:0;padding:0;position:relative}.esri-view .esri-view-surface{-webkit-user-select:none;user-select:none;direction:ltr;border:none;outline:0;width:100%;height:100%;margin:0;padding:0;position:absolute;top:0;left:0;overflow:clip}.esri-view .esri-view-surface--touch-none{touch-action:none}.esri-view .esri-view-surface--touch-pan{touch-action:pan-x pan-y}.esri-view .esri-view-surface:focus:after{box-sizing:border-box;z-index:999;outline:var(--esri-view-outline);outline-offset:var(--esri-view-outline-offset);content:"";pointer-events:none;width:100%;height:100%;position:absolute;top:0;left:0;overflow:hidden}.esri-view .esri-view-surface[data-navigating=true]{cursor:grabbing}.esri-view .esri-view-surface[data-cursor=copy]{cursor:copy}.esri-view .esri-view-surface[data-cursor=crosshair]{cursor:crosshair}.esri-view .esri-view-surface[data-cursor=help]{cursor:help}.esri-view .esri-view-surface[data-cursor=move]{cursor:move}.esri-view .esri-view-surface[data-cursor=pointer]{cursor:pointer}.esri-view .esri-view-surface[data-cursor=progress]{cursor:progress}.esri-view .esri-view-surface[data-cursor=grab]{cursor:grab}.esri-view .esri-view-surface[data-cursor=grabbing]{cursor:grabbing}.esri-view .esri-view-surface[data-cursor=n-resize]{cursor:n-resize}.esri-view .esri-view-surface[data-cursor=e-resize]{cursor:e-resize}.esri-view .esri-view-surface[data-cursor=s-resize]{cursor:s-resize}.esri-view .esri-view-surface[data-cursor=w-resize]{cursor:w-resize}.esri-view .esri-view-surface[data-cursor=ne-resize]{cursor:ne-resize}.esri-view .esri-view-surface[data-cursor=nw-resize]{cursor:nw-resize}.esri-view .esri-view-surface[data-cursor=se-resize]{cursor:se-resize}.esri-view .esri-view-surface[data-cursor=sw-resize]{cursor:sw-resize}.esri-view .esri-view-surface[data-cursor=ew-resize]{cursor:ew-resize}.esri-view .esri-view-surface[data-cursor=ns-resize]{cursor:ns-resize}.esri-view .esri-view-surface[data-cursor=nesw-resize]{cursor:nesw-resize}.esri-view .esri-view-surface[data-cursor=nwse-resize]{cursor:nwse-resize}.esri-view .esri-view-surface[data-cursor=none]{cursor:none}.esri-view .esri-display-object,.esri-view .esri-bitmap{-webkit-user-drag:none;-webkit-user-select:none;user-select:none;border:none;margin:0;padding:0;position:absolute}.esri-view .esri-bitmap{transform-origin:0 0;max-width:none}:root{view-transition-name:none}::view-transition{pointer-events:none}.esri-ui{box-sizing:border-box;z-index:0;pointer-events:none;contain:layout;font-size:var(--calcite-font-size);position:absolute;inset:0;overflow:hidden;container:esri-view-canvas/size}.esri-ui calcite-flow,.esri-ui calcite-panel{z-index:1;position:relative}.esri-ui .esri-component{pointer-events:auto}.esri-ui .esri-fov-overlay-outer{pointer-events:none;place-content:center;width:100%;height:100%;display:grid}.esri-ui .esri-fov-overlay{text-shadow:0 0 1px var(--calcite-color-foreground-1),0 0 2px var(--calcite-color-foreground-1),0 0 3px var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);font-size:var(--calcite-font-size-3);-webkit-user-select:none;user-select:none;pointer-events:none;flex-direction:row;align-items:center;gap:7px;animation:1s forwards fadeInAnimation;display:flex}.esri-ui .esri-fov-overlay-reset{cursor:pointer;pointer-events:auto}.esri-ui .esri-fov-overlay-text{pointer-events:none}@keyframes fadeInAnimation{0%{opacity:0}to{opacity:1}}@media (prefers-reduced-motion: reduce){.esri-fov-overlay{animation:none!important}}.esri-ui-corner{display:flex;position:absolute}.esri-ui-inner-container{position:absolute;inset:0}.esri-ui-manual-container>.esri-component{position:absolute}.esri-ui-manual-container .esri-swipe{z-index:-1}.esri-ui-top-left,.esri-ui-top-right{flex-flow:column}.esri-ui-top-left{align-items:flex-start;top:0;left:0}.esri-ui-top-right{align-items:flex-end;top:0;right:0}.esri-ui-bottom-left,.esri-ui-bottom-right{flex-flow:row;align-items:flex-end}.esri-ui-bottom-right{flex-flow:row-reverse;bottom:0;right:0}.esri-ui-bottom-right .esri-component{margin-left:10px}.esri-ui-top-right .esri-component,.esri-ui-top-left .esri-component{margin-bottom:10px}.esri-ui-bottom-left{bottom:0;left:0}.esri-ui-bottom-left .esri-component{margin-right:10px}:dir(rtl) .esri-ui-top-left{align-items:flex-end}:dir(rtl) .esri-ui-top-right{align-items:flex-start}:dir(rtl) .esri-ui-bottom-left{flex-direction:row-reverse}:dir(rtl) .esri-ui-bottom-right{flex-direction:row}.esri-zoom-box__container{width:100%;height:100%;position:relative}.esri-zoom-box__overlay{cursor:crosshair;width:100%;height:100%;position:absolute;top:0;left:0}.esri-zoom-box__overlay-background{fill:#0000001a}.esri-zoom-box__outline{fill:var(--calcite-color-transparent);stroke:var(--calcite-color-brand);stroke-dasharray:1 1;stroke-width:var(--calcite-spacing-base)}.esri-overlay-surface{z-index:0;pointer-events:none;-webkit-user-select:none;user-select:none;border:none;width:100%;height:100%;margin:0;padding:0;position:absolute;top:0;left:0;overflow:clip}.esri-text-overlay-item{white-space:nowrap;font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight);display:block;position:absolute;overflow:hidden}.esri-text-overlay-item-anchor-bottom{transform:translate(-50%,-100%)}.esri-text-overlay-item-anchor-bottom-right{transform:translate(-100%,-100%)}.esri-text-overlay-item-anchor-bottom-left{transform:translateY(-100%)}.esri-text-overlay-item-anchor-top{transform:translate(-50%)}.esri-text-overlay-item-anchor-top-right{transform:translate(-100%)}.esri-text-overlay-item-anchor-top-left{transform:translate(0)}.esri-text-overlay-item-anchor-center{transform:translate(-50%,-50%)}.esri-text-overlay-item-anchor-right{transform:translate(-100%,-50%)}.esri-text-overlay-item-anchor-left{transform:translateY(-50%)}.esri-line-overlay-item,.esri-outline-overlay-item,.esri-box-overlay-item{white-space:nowrap;display:block;position:absolute;overflow:hidden}.esri-shadow-cast__tooltip{color:var(--calcite-color-text-2);font-size:var(--calcite-font-size-sm)}.esri-shadow-cast__tooltip__content{margin-top:-8px-var(--calcite-spacing-xxs);padding:var(--calcite-spacing-xs) var(--calcite-spacing-sm);background:var(--calcite-color-foreground-1);width:max-content;position:absolute;transform:translate(-50%,-100%)}.esri-shadow-cast__tooltip__content:after{content:"";border:8px solid var(--calcite-color-transparent);border-top-color:var(--calcite-color-foreground-1);box-sizing:inherit;width:0;height:0;display:block;position:absolute;bottom:1px;left:50%;transform:translate(-50%,100%)}.esri-attribution{position:absolute;bottom:0;left:0;right:0;background-color:var(--calcite-color-transparent-tint)!important;flex-flow:row;justify-content:space-between;align-items:center;font-size:var(--calcite-font-size-sm)!important;line-height:var(--calcite-font-line-height-fixed-base)!important;display:flex}.esri-attribution__link{color:var(--calcite-color-text-1)}.esri-attribution__link:hover,.esri-attribution__link:active,.esri-attribution__link:visited,.esri-attribution__link:focus{color:var(--calcite-color-text-1)}.esri-attribution__sources{text-overflow:ellipsis;white-space:nowrap;flex:1 0;align-self:flex-start;padding:0 5px;font-weight:var(--calcite-font-weight-light);overflow:hidden}.esri-attribution__sources[role=button]{font-size:1em}.esri-attribution__powered-by{color:var(--calcite-color-text-2);text-align:right;white-space:nowrap;align-self:flex-end;padding:0 5px;font-weight:var(--calcite-font-weight-normal)}.esri-attribution--open{z-index:2}.esri-attribution__sources--open{white-space:normal}.esri-button{box-sizing:border-box;cursor:pointer;white-space:normal;word-break:normal;color:var(--calcite-color-text-1);background-color:var(--calcite-color-status-info);border:var(--calcite-spacing-px) solid var(--calcite-color-status-info);justify-content:center;align-items:center;width:100%;min-height:var(--calcite-spacing-xxxl);padding:6px 7px;font-family:inherit;font-size:var(--calcite-font-size);transition:background-color .125s ease-in-out,border .125s ease-in-out;display:flex;overflow:hidden;&:hover{color:var(--calcite-color-text-1);background-color:var(--calcite-color-status-info-hover);border:var(--calcite-spacing-px) solid var(--calcite-color-status-info-hover)}}.esri-button:hover{color:var(--calcite-color-text-1);background-color:var(--calcite-color-text-2);border:1px solid var(--calcite-color-text-2)}.esri-button.esri-button--small{min-height:var(--calcite-spacing-xl);font-size:var(--calcite-font-size-sm)}.esri-button.esri-button--half{width:50%;display:inline-block}.esri-button.esri-button--third{width:33%;display:inline-block}.esri-button--secondary{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-button--tertiary{color:var(--calcite-color-brand);background-color:var(--calcite-color-transparent);border-color:var(--calcite-color-transparent)}.esri-button--tertiary:hover{color:var(--calcite-color-brand-hover);background-color:var(--calcite-color-foreground-2);border-color:var(--calcite-color-transparent)}.esri-button--disabled{opacity:.4;pointer-events:none}.esri-button--drill-in{outline-offset:-4px;cursor:pointer;text-align:unset;background-color:var(--calcite-color-foreground-1);border:none;border-radius:2px;justify-content:space-between;align-items:center;margin:var(--calcite-spacing-md) 7px;padding:var(--calcite-spacing-md) 7px;text-decoration:none;transition:background-color .125s ease-in-out;display:flex;box-shadow:0 0 0 1px #adadad4d}.esri-button--drill-in:hover,.esri-button--drill-in:focus{background-color:var(--calcite-color-foreground-2)}.esri-button--drill-in__title{font-size:var(--calcite-font-size)}.esri-button--drill-in [class^=esri-icon-],.esri-button--drill-in [class*=" esri-icon-"]{padding:0 7px}.esri-widget--button{cursor:pointer;text-align:center;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);flex-flow:row;justify-content:center;align-items:center;width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl);margin:0;padding:0;font-size:var(--calcite-font-size);transition:background-color .125s ease-in-out;display:flex;overflow:hidden}.esri-widget--button:is(calcite-button):not(:hover){--calcite-icon-color: var(--calcite-color-text-3)}.esri-widget--button:not([appearance]),.esri-widget--button[appearance=solid]{--calcite-color-foreground-3: var(--calcite-color-foreground-1)}.esri-widget--button:is(calcite-button){--calcite-offset-invert-focus: 1}.esri-widget--button calcite-loader[inline]{margin:auto}.esri-button--secondary{color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-1);&:hover{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-status-info);border:1px solid var(--calcite-color-status-info)}}.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}.esri-hidden{display:none!important}[class^=esri-icon-],[class*=" esri-icon-"]{speak:none;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-style:normal;font-weight:var(--calcite-font-weight-normal);line-height:1;font-family:CalciteWebCoreIcons!important}.esri-icon-close:before{content:"";color:inherit}.esri-icon-drag-horizontal:before{content:"";color:inherit}.esri-icon-drag-vertical:before{content:"";color:inherit}.esri-icon-handle-horizontal:before{content:"";color:inherit}.esri-icon-handle-vertical:before{content:"";color:inherit}.esri-icon-check-mark:before{content:"";color:inherit}.esri-icon-left-triangle-arrow:before{content:"";color:inherit}.esri-icon-right-triangle-arrow:before{content:"";color:inherit}.esri-icon-down-arrow:before{content:"";color:inherit}.esri-icon-up-arrow:before{content:"";color:inherit}.esri-icon-overview-arrow-bottom-left:before{content:"";color:inherit}.esri-icon-overview-arrow-bottom-right:before{content:"";color:inherit}.esri-icon-overview-arrow-top-left:before{content:"";color:inherit}.esri-icon-overview-arrow-top-right:before{content:"";color:inherit}.esri-icon-maximize:before{content:"";color:inherit}.esri-icon-minimize:before{content:"";color:inherit}.esri-icon-checkbox-unchecked:before{content:"";color:inherit}.esri-icon-checkbox-checked:before{content:"";color:inherit}.esri-icon-radio-unchecked:before{content:"";color:inherit}.esri-icon-radio-checked:before{content:"";color:inherit}.esri-icon-up-arrow-circled:before{content:"";color:inherit}.esri-icon-down-arrow-circled:before{content:"";color:inherit}.esri-icon-left-arrow-circled:before{content:"";color:inherit}.esri-icon-right-arrow-circled:before{content:"";color:inherit}.esri-icon-zoom-out-fixed:before{content:"";color:inherit}.esri-icon-zoom-in-fixed:before{content:"";color:inherit}.esri-icon-refresh:before{content:"";color:inherit}.esri-icon-edit:before{content:"";color:inherit}.esri-icon-authorize:before{content:"";color:inherit}.esri-icon-map-pin:before{content:"";color:inherit}.esri-icon-blank-map-pin:before{content:"";color:inherit}.esri-icon-table:before{content:"";color:inherit}.esri-icon-plus:before{content:"+";color:inherit}.esri-icon-minus:before{content:"";color:inherit}.esri-icon-beginning:before{content:"";color:inherit}.esri-icon-reverse:before{content:"";color:inherit}.esri-icon-pause:before{content:"";color:inherit}.esri-icon-play:before{content:"";color:inherit}.esri-icon-forward:before{content:"";color:inherit}.esri-icon-end:before{content:"";color:inherit}.esri-icon-erase:before{content:"";color:inherit}.esri-icon-up-down-arrows:before{content:"";color:inherit}.esri-icon-left:before{content:"";color:inherit}.esri-icon-right:before{content:"";color:inherit}.esri-icon-announcement:before{content:"";color:inherit}.esri-icon-notice-round:before{content:"";color:inherit}.esri-icon-notice-triangle:before{content:"";color:inherit}.esri-icon-home:before{content:"";color:inherit}.esri-icon-locate:before{content:"";color:inherit}.esri-icon-expand:before{content:"";color:inherit}.esri-icon-collapse:before{content:"";color:inherit}.esri-icon-layer-list:before{content:"";color:inherit}.esri-icon-basemap:before{content:"";color:inherit}.esri-icon-globe:before{content:"";color:inherit}.esri-icon-applications:before{content:"";color:inherit}.esri-icon-arrow-up-circled:before{content:"";color:inherit}.esri-icon-arrow-down-circled:before{content:"";color:inherit}.esri-icon-arrow-left-circled:before{content:"";color:inherit}.esri-icon-arrow-right-circled:before{content:"";color:inherit}.esri-icon-minus-circled:before{content:"";color:inherit}.esri-icon-plus-circled:before{content:"";color:inherit}.esri-icon-add-attachment:before{content:"";color:inherit}.esri-icon-attachment:before{content:"";color:inherit}.esri-icon-calendar:before{content:"";color:inherit}.esri-icon-close-circled:before{content:"";color:inherit}.esri-icon-browser:before{content:"";color:inherit}.esri-icon-collection:before{content:"";color:inherit}.esri-icon-comment:before{content:"";color:inherit}.esri-icon-configure-popup:before{content:"";color:inherit}.esri-icon-contact:before{content:"";color:inherit}.esri-icon-dashboard:before{content:"";color:inherit}.esri-icon-deny:before{content:"";color:inherit}.esri-icon-description:before{content:"";color:inherit}.esri-icon-directions:before{content:"";color:inherit}.esri-icon-directions2:before{content:"";color:inherit}.esri-icon-documentation:before{content:"";color:inherit}.esri-icon-duplicate:before{content:"";color:inherit}.esri-icon-review:before{content:"";color:inherit}.esri-icon-environment-settings:before{content:"";color:inherit}.esri-icon-error:before{content:"";color:inherit}.esri-icon-error2:before{content:"";color:inherit}.esri-icon-experimental:before{content:"";color:inherit}.esri-icon-feature-layer:before{content:"";color:inherit}.esri-icon-filter:before{content:"";color:inherit}.esri-icon-grant:before{content:"";color:inherit}.esri-icon-group:before{content:"";color:inherit}.esri-icon-key:before{content:"";color:inherit}.esri-icon-labels:before{content:"";color:inherit}.esri-icon-tag:before{content:"";color:inherit}.esri-icon-layers:before{content:"";color:inherit}.esri-icon-left-arrow:before{content:"";color:inherit}.esri-icon-right-arrow:before{content:"";color:inherit}.esri-icon-link-external:before{content:"";color:inherit}.esri-icon-link:before{content:"";color:inherit}.esri-icon-loading-indicator:before{content:"";color:inherit}.esri-icon-maps:before{content:"";color:inherit}.esri-icon-marketplace:before{content:"";color:inherit}.esri-icon-media:before{content:"";color:inherit}.esri-icon-media2:before{content:"";color:inherit}.esri-icon-menu:before{content:"";color:inherit}.esri-icon-mobile:before{content:"";color:inherit}.esri-icon-phone:before{content:"";color:inherit}.esri-icon-navigation:before{content:"";color:inherit}.esri-icon-pan:before{content:"";color:inherit}.esri-icon-printer:before{content:"";color:inherit}.esri-icon-pie-chart:before{content:"";color:inherit}.esri-icon-chart:before{content:"";color:inherit}.esri-icon-line-chart:before{content:"";color:inherit}.esri-icon-question:before{content:"";color:inherit}.esri-icon-resend-invitation:before{content:"";color:inherit}.esri-icon-rotate:before{content:"";color:inherit}.esri-icon-save:before{content:"";color:inherit}.esri-icon-settings:before{content:"";color:inherit}.esri-icon-settings2:before{content:"";color:inherit}.esri-icon-share:before{content:"";color:inherit}.esri-icon-sign-out:before{content:"";color:inherit}.esri-icon-support:before{content:"";color:inherit}.esri-icon-user:before{content:"";color:inherit}.esri-icon-time-clock:before{content:"";color:inherit}.esri-icon-trash:before{content:"";color:inherit}.esri-icon-upload:before{content:"";color:inherit}.esri-icon-download:before{content:"";color:inherit}.esri-icon-zoom-in-magnifying-glass:before{content:"";color:inherit}.esri-icon-search:before{content:"";color:inherit}.esri-icon-zoom-out-magnifying-glass:before{content:"";color:inherit}.esri-icon-locked:before{content:"";color:inherit}.esri-icon-unlocked:before{content:"";color:inherit}.esri-icon-favorites:before{content:"";color:inherit}.esri-icon-compass:before{content:"";color:inherit}.esri-icon-down:before{content:"";color:inherit}.esri-icon-up:before{content:"";color:inherit}.esri-icon-chat:before{content:"";color:inherit}.esri-icon-dock-bottom:before{content:"";color:inherit}.esri-icon-dock-left:before{content:"";color:inherit}.esri-icon-dock-right:before{content:"";color:inherit}.esri-icon-organization:before{content:"";color:inherit}.esri-icon-north-navigation:before{content:"";color:inherit}.esri-icon-locate-circled:before{content:"";color:inherit}.esri-icon-dial:before{content:"";color:inherit}.esri-icon-polygon:before{content:"";color:inherit}.esri-icon-polyline:before{content:"";color:inherit}.esri-icon-visible:before{content:"";color:inherit}.esri-icon-non-visible:before{content:"";color:inherit}.esri-icon-link-vertical:before{content:"";color:inherit}.esri-icon-unlocked-link-vertical:before{content:"";color:inherit}.esri-icon-link-horizontal:before{content:"";color:inherit}.esri-icon-unlocked-link-horizontal:before{content:"";color:inherit}.esri-icon-swap:before{content:"";color:inherit}.esri-icon-cta-link-external:before{content:"";color:inherit}.esri-icon-reply:before{content:"";color:inherit}.esri-icon-public:before{content:"";color:inherit}.esri-icon-share2:before{content:"";color:inherit}.esri-icon-launch-link-external:before{content:"";color:inherit}.esri-icon-rotate-back:before{content:"";color:inherit}.esri-icon-pan2:before{content:"";color:inherit}.esri-icon-tracking:before{content:"";color:inherit}.esri-icon-expand2:before{content:"";color:inherit}.esri-icon-arrow-down:before{content:"";color:inherit}.esri-icon-arrow-up:before{content:"";color:inherit}.esri-icon-hollow-eye:before{content:"";color:inherit}.esri-icon-play-circled:before{content:"";color:inherit}.esri-icon-volume-off:before{content:"";color:inherit}.esri-icon-volume-on:before{content:"";color:inherit}.esri-icon-bookmark:before{content:"";color:inherit}.esri-icon-lightbulb:before{content:"";color:inherit}.esri-icon-sketch-rectangle:before{content:"";color:inherit}.esri-icon-north-navigation-filled:before{content:"";color:inherit}.esri-icon-default-action:before{content:"";color:inherit}.esri-icon-undo:before{content:"";color:inherit}.esri-icon-redo:before{content:"";color:inherit}.esri-icon-cursor:before{content:"";color:inherit}.esri-icon-cursor-filled:before{content:"";color:inherit}.esri-icon-measure:before{content:"";color:inherit}.esri-icon-measure-line:before{content:"";color:inherit}.esri-icon-measure-area:before{content:"";color:inherit}.esri-icon-legend:before{content:"";color:inherit}.esri-icon-sliders:before{content:"";color:inherit}.esri-icon-sliders-horizontal:before{content:"";color:inherit}.esri-icon-cursor-marquee:before{content:"";color:inherit}.esri-icon-lasso:before{content:"";color:inherit}.esri-icon-elevation-profile:before{content:"";color:inherit}.esri-icon-slice:before{content:"";color:inherit}.esri-icon-line-of-sight:before{content:"";color:inherit}.esri-icon-zoom-to-object:before{content:"";color:inherit}.esri-icon-urban-model:before{content:"";color:inherit}.esri-icon-measure-building-height-shadow:before{content:"";color:inherit}.esri-icon-partly-cloudy:before{content:"";color:inherit}.esri-attachments__progress-bar:before,.esri-attachments__progress-bar:after{opacity:var(--calcite-opacity-100);content:"";height:1px;transition:opacity .5s ease-in-out;position:absolute;top:0}.esri-attachments__progress-bar:before{z-index:0;background-color:var(--calcite-color-foreground-2);width:100%}.esri-attachments__progress-bar:after{z-index:0;background-color:var(--calcite-color-text-2);width:20%;animation:1.5s linear infinite looping-progresss-bar-ani}.esri-attachments{background-color:var(--calcite-color-background)!important;width:100%}.esri-attachments__loader-container{justify-content:center;align-items:center;height:150px;padding:0;display:flex}.esri-attachments__loader{background:url(data:image/gif;base64,R0lGODlhIQAnALMKAAB6wrze86TR7Y3F53W44V6s2kaf1C+TzheGyNPq+f///wAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1MkRGQzEzOEQ3MUIxMUU0QjJCRTkxRjI3NjA5MTc2MyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2RDdDRTgwM0Q3MjAxMUU0QjJCRTkxRjI3NjA5MTc2MyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2RDdDRTgwMkQ3MjAxMUU0QjJCRTkxRjI3NjA5MTc2MyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNCAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmQyYThhNjgzLWIwNjctNDhhZi05Nzc0LTZiOTZkM2RhMjI2OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1MkRGQzEzOEQ3MUIxMUU0QjJCRTkxRjI3NjA5MTc2MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAkEAAoALAAAAAAhACcAAASOUMlJq70W6L2xv1z4jVPIkaTZoZ+qsa0Ley4wY7WU7Dyv9z1JTgEMEos7oeyI/DUVQ2SSWVSqnFUq0GrCbrXGqNQbXkoTZB/UPAarxc8zV+SeytfXOlo/P/H/cFl3gV+DbHFthEaGeXeMXX+PdI6Jh4KVjW2SfpRPQzcVn6AlS6OkeaZ9K6l4kKyirLEXEQAh+QQJBAAKACwAAAAAIQAnAAAEqFDJSau9OOutkP8fx4GkuJGgqaGhirGe+8JSYN+3CCM1jkuJoFAo2fV8NuBwWKQpkDnFktlxQpPSabDJOiKVWi7K6wNPxaXn1bxEp9RQNtUI/2bD1W69fD/nx3s/fW1/aVcBckSFb4eJW4stjYNzVmuTinSSWo+ZlpsJbpGem6ExgVGfpTynWKmQppqkr6uxeJ1xl5yVuCdOMhV0vxTBwqrFw77HysvFEQAh+QQFBAAKACwAAAAAIQAnAAAEqFDJSau9OOvNez5gGHqaaJKfOaKXugpwHHcuKMk4Xd/4rCTAYFBSO/B6AolwSdwpkDDlcqgoHnvSaaLpuuZ+2m3VCU2CtVyVV5adpk9PaJs57saRc+FbtPaFxVZ3WGdudWqCX397L3KEdIFleVSQjYqGcJGOepd8iGyak2SVYYs2nn6knIx4oEClRqdRrYCirJaUtqm4gxu7X71OLBWBwhTExcjJysseEQAh+QQJBAAKACwBAAMAFAAhAAAEU9DIOZW9WNGd+6Zd9lXKYJ7nKFloqxpsm6qxPLy1jJf2TfO2Xc83yrl+Q2FPGUQunc0iUAelSpPV4/W5jX6MKKb1O9WSsd0xpxzOtqUhyy6u+dEjACH5BAkEAAoALAAAAAAhACcAAASAUMlJq7046827/10hjiOIkahErCwboqXSzi9cqLPL2SKeEzWYLxdMyX7AHW9IU9qYrSIJqtvwbsefNIZMWpdZolMYbn6f5ejY2N320lXNlbpyY9vrKbye5yLtdF5yYHhnZIWDaIgZc3uCjIR/fW+LJ5Fak3eShkYmnp+goaKjHREAIfkECQQACgAsAAAAACEAJwAABKhQyUmrvTjrzbv/IFaMJNkRaJpKZXuqKtuaHBwrM73ZK54XkoRwOJTwULJckEg0HpOzJVPo5EFdimlRcSRcS9Jp1falaancp0+ZPY9h5VGY+b79gG1tvXefN9NWa1F5YoBkglhnCXtIiGCEdIZwjmZuknY/fltdcXiKjF6UcpB/nKKelqZ9pJtqq5+XfJmsaKqzsLZsuK6zO7xsvoGrIRXDxMfIycrLxBEAIfkEBQQACgAsAAAAACEAJwAABKdQyUmrvTjrzbu3RiiKXzaeJXaO3eC+r7SSHGzLs9HasZLrioRwOJTwej8JcWk8DnAz5bKocD59Oek00TxCV9ppl/dFBbfcqrPMOm/HN2zULVZ75WA6007Gm9FpVmw0gHAwgyFhe4J+bYV8cUl6RIZIWZNUjJKPmpeca42EaJUuiECfd5ujkIehiZhCpFeqb6yWc6h9khudcykVu78TwcKuQMXIycrKEQAh+QQJBAAKACwBAAMAFAAhAAAEVVDJSdW5GNed+65dJowkKYVYqZ7ooZYs+ppWO49xeAt5t/eiGzAlrMmKLRfStjzOhpefUdekPqe+avaalHa1QS5T7HxBlWSrGRtef9OezyQpn7fq5wgAIfkECQQACgAsAAAAACEAJwAABIBQyUmrvTjrzZH/H9eBoLiRpZmhoYqxnhjMNC3BiFzXN6zvsx7rBxSiiDsjCclT4Jg2p48DjD6p1YAytclqpUNsddvqZskxcRF8VCfZS3fzah7DuRovOie3TutrdHlnd2WDdoIZeoVpgG+JGIuQF5J/LhWTl5kumyqdJp+XoqMiEQAh+QQJBAAKACwAAAAAIQAnAAAEjlDJSau9OIPNef5VJ4KkInYleHqptgKtu8bYC5NJruuSLe3AH5BnegmHieOwZ1Qgc8pgceZ8RndM6jNZRWZPV+L2O+ouzVIfGrsmqsdt6BQc58Lf1joZpe/jvX5NcHeCeYRahnl/Z4d0g4qFgI1lj4CLUpN8lWeXbCpNNCGgoRNqpKWjp6anc2WsrXyvrBEAIfkECQQACgAsAAAAACEAJwAABKlQyUmrvTjrzZH/H9eBoLiRpZmhoYqxnvvCUmDft5TsPC/BiBoOp+v1fjTFkKgwHhVA4TJQdCaQLOmy6sSitEOu0UsCM607cmpqEz+jSrbbB02yqU20unWfp+tZcVN+V4Bfglt5VnsxiGGKXYZljmd6kmtykGOXfJlohXB9mm92npahpoucjaKfjEGUOaN0qIOzf7WJJ6W2u4EyFXDAFMLDr8bEScjLzBoRACH5BAUEAAoALAAAAAAhACcAAASqUMlJq7046827t0coil82niV2jum1koogz3P3hhKtS0nv+5LbIaerKX7I4I1YFPCQQIWQWXxCE8oXdXe8YqXLWNPZvWZXW5oVekaJm+skWPuultlzdJ3r/U73andyf2NkfW0sgEaHeW6FcT+IMI+CkY2JlIyEY5BRm3CVnmGZXpI4ijKdPaZDqIall5Ocoauxp6Rmtq2UG592vaOzwHQtFH/FE8fIy8zNzBEAIfkECQQACgAsDAADABQAIQAABFPQyDmVvVjRnfumXfZVymCe5yhZaKsabJuqsTy8tYyX9k3ztl3PN8q5fkNhTxlELp3NIlAHpUqT1eP1uY1+jCim9TvVkrHdMacczralIcsurvnRIwAh+QQJBAAKACwAAAAAIQAnAAAEgFDJSau9OOvNu/8gVowkGV5lKhFs23ZpubouHI8zzdp3rvMxHw2oUuhenBvOeCQQZczj0xT9JZXC2rVXHW6DXe1GWcgix9jwWUM2777FphMOlU+Xdjo1j+by2Wl/GW1qb31ggiKBTXdlhXOHcYx6eJORdZaAfpmDaSefoKGio58RACH5BAkEAAoALAAAAAAhACcAAASoUMlJq7046827/2AoFWRZdkSqqqNpouvauiQcpzMtJXzfSzeWgnZS+I7AICHn2h1/CuVySCw4n4lkkPkyYrNRJbf4BUvHNS9We0Nb1U92zH2Nh7dUYh15b+d1cHxnf02BPnIyhF1liEJVb4x9c4pkX404lGmRg497h5KJnYZQnFWepGKZkJagjqajPJdTopuptKylehy5gBu8hb62ryIUosTHyMnKyxIRACH5BAUEAAoALAAAAAAhACcAAASpUMlJq7046827/5IhjiOIkah5oWQ3vDAcsqIbxzMtJXzfSzecglZT+I7A4CvH2h1/CuVySHQ+E0klM2W8YqPSbat7zQbFJfLTfEMXvV/pwG2wrsFaqk6NxJ/1TXw+bEJEdYJQcnR2fYqAXHCEMo9jkX5tlGmWjoaMg5eFVYg8klOdo3FhmW9epXOrh5uqp7J5tK2gk6cbnKK8s74qE7vCi8XDwcfKy8wWEQAh+QQJBAAKACwMAAMAFAAhAAAEVVDJSdW5GNed+65dJowkKYVYqZ7ooZYs+ppWO49xeAt5t/eiGzAlrMmKLRfStjzOhpefUdekPqe+avaalHa1QS5T7HxBlWSrGRtef9OezyQpn7fq5wgAIfkECQQACgAsAAAAACEAJwAABIBQyUmrvTjrzTf6INh5YThqpXliqbhe7dcFdF1LMTLbNh7vPJqvBQwOU0XesZTsKXLN2/PHCUqhVWtgqdpot1Ni1sp1ebVl2dgYRq6VbebbiT2T413NN62bX6l2bHV6aHhmhHeDGXuGaoFwihiMkReTgC8UlC+aK5wnniOgmKOjEQAh+QQJBAAKACwAAAAAIQAnAAAEjlDJSau9OGsFuvdbyH2fuJGlmaGgirGd+8LyBQNSou97zvOSm++nGxKDNAWxp1wmkCzjTwocRZtLKlOIPXanVpS2+K1ync/yNokep89ON1SsJrfDJHn9zY7v53l/gnBZg32Fd4ReiYeLfopgjFd3knSUj42RmJN+lYE1FFygE6KjeCmmpy2ppaOtoK+pFhEAIfkECQQACgAsAAAAACEAJwAABI1QyUmrvTjrzTf6INh5YThqpXliqbhe7ffCsZTcOG7nuRQjO94tKPTVFEIdMpkwtog8aE/xkyqZTeoRax1qn8tkN1sNF83Rb2rMVpfaXLcqHi/Tmc41elrf4vdKdn99YHdici6GZ4KHhHqKaYxnjm+AXpRzg3+SaZguMxRloBOio4gypnmVqaWjramwLxEAIfkEBQQACgAsAAAAACEAJwAABIpQyUmrvTjrzbv/0iGOI4iRqHmhpGqxpUvBopTcOG7neUjvvBsw6IMNeceegnZI6hTBJ9MphEYTRRYVa41mU11iGLn8jZVX7vT8TH9b7Kq7bIxz5+s53qy/vmN9XnRadlt/NYWJeX6KfIx7dYFii4KQhJJklGKWYJhKazKHTaGipKWmoKGppqytrBEAIfkECQQACgAsFwADAAkAIQAABBLQyEmrvTjrzbv/YCiOZGmeZQQAIfkECQQACgAsAAAAACEAJwAABFBQyUmrvTjrzbv/YCgVZFmKlqmilWqylHvCo1zQtYwr9o33O+DPFiQOdUdXEUkTNo1PJsw5hValLGrWusWitF9u2CsCl8Vncsi8Ru/e8PguAgAh+QQJBAAKACwAAAAAIQAnAAAEhlDJSau9OOvNu/9gKIZEaZpjda4ptZ5SIs9zTNPSiyo3zveynI5gAxZ7Qt3xtvQNiT9jFKl4NmtTZnV4DWad3C8W6LWKveRE8tVVn93mdHvNes+3Srs+Tr7zpXJ4bHqBf1SFYYGIeYp9gnWNUoZai4ORVJM+lXUtjzCdnjudZqClpqeoqRsRACH5BAUEAAoALAAAAAAhACcAAASFUMlJq7046827/2AojuQ2nChaTmkrJXAcv7IstSldw/p+46deTWhTAIOK3SypTPyAxGXTaTxGeUzlE3elTreurE88rELJxa+Zi5Y2wbk2Vn0cdO/rsJpulXvfeXF7gHV4fGeDWoEqfniFjZCPiWOSgIdsk2WVipdhK4+ffSujpKWmp6grEQAh+QQJBAAKACwXAAYACQAbAAAEEFDISau9OOvNu/9gKI5kyUUAIfkECQQACgAsAAAAACEAJwAABElQyUmrvTjrzbv/YCiOZGkqQaqqJ7qu7QufMkvXQYzrNS/7L+DMhMvdesdfMrgclopCG3HXlD6pU2RWuWV2nSRoa0wum8/o9CYCACH5BAUEAAoALAAAAAAhACcAAARsUMlJq7046827/2AojmRpckmqqtLqti6rxDKdwjQe6+9s8ytg7efLFXfHni0hvCWDz6Fx2WRGndSrNcsldqfeMHiM/JbFZ7ISvVZDze20PE5/s+1u6Ry/19f9fH9Yd4CFTieIiYqLjI2OjyQRACH5BAUEAAoALAAAAAABAAEAAAQCUEUAIfkEBQQACgAsAAAAAAEAAQAABAJQRQA7) 50% no-repeat;width:100%;height:64px}.esri-attachments__actions{flex-flow:wrap;padding:6px 7px;display:flex}.esri-attachments__item-add-icon{font-size:var(--calcite-font-size-xl);margin:0;padding:0 7px}.esri-attachments__delete-button{color:var(--calcite-color-status-danger);width:auto;margin-right:auto}.esri-attachments .esri-attachments__items{width:100%;margin:0;padding:0;display:flex}.esri-attachments .esri-attachments__item{margin:0;line-height:var(--calcite-font-line-height-relative-tight);list-style-type:none}.esri-attachments__item-button{outline-offset:-4px;cursor:pointer;width:100%;text-align:unset;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-2);border:1px solid var(--calcite-color-foreground-1);border-radius:var(--calcite-border-width-md);align-items:center;margin:0 0 var(--calcite-spacing-xs);padding:var(--calcite-spacing-xs) 7px;text-decoration:none;transition:border-color .125s ease-in-out;display:flex;box-shadow:0 1px var(--calcite-color-foreground-1)}.esri-attachments__item-button:focus,.esri-attachments__item-button:hover{border-color:var(--calcite-color-border-white)}.esri-attachments__item-link{text-decoration:none;display:block;position:relative}.esri-attachments__item-link:hover .esri-attachments__item-link-overlay,.esri-attachments__item-link:focus .esri-attachments__item-link-overlay{opacity:1}.esri-attachments__item-add{background-color:var(--calcite-color-background);padding:6px 0}.esri-attachments__add-attachment-button{align-items:baseline!important;border-radius:var(--calcite-corner-radius-xs);border:none!important;justify-content:flex-start!important;padding:12px 3px!important;font-size:var(--calcite-font-size-sm)!important;transition:background-color .25s ease-in-out}.esri-attachments__add-attachment-button:hover{background-color:var(--calcite-color-foreground-1)!important;text-decoration:none;box-shadow:0 1px 2px #0000004d}.esri-attachments__item-link-overlay{opacity:0;pointer-events:none;-webkit-user-select:none;user-select:none;justify-content:center;align-items:center;transition:opacity .25s ease-in-out;display:flex;position:absolute;inset:0}.esri-attachments__item-link-overlay-icon{color:var(--calcite-color-foreground-2);background-color:var(--calcite-color-foreground-1);border-radius:100%;justify-content:center;align-items:center;padding:18px;display:flex}.esri-attachments__item-link-overlay-icon svg{fill:var(--calcite-color-foreground-1)}.esri-attachments__item-mask{justify-content:center;align-items:center;width:64px;height:64px;display:flex;position:relative;overflow:hidden;box-shadow:0 0 0 1px var(--calcite-color-foreground-1)}.esri-attachments__item-mask--icon{background-color:var(--calcite-color-foreground-2);padding:24px 0}.esri-attachments__item-mask--icon .esri-attachments__image{width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl)}.esri-attachments__metadata{justify-content:space-between;margin-top:3px;display:flex}.esri-attachments__metadata .esri-attachments__metadata-fieldset{text-align:center;background-color:var(--calcite-color-foreground-1);border:none;flex:0 calc(50% - 1px);margin:0;padding:6px 7px;font-size:var(--calcite-font-size-sm)}.esri-attachments__file-name{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;margin-bottom:3px;font-size:var(--calcite-font-size-sm);display:inline-block}.esri-attachments__file-fieldset{border:none;margin:0;padding:var(--calcite-spacing-md) 7px}.esri-attachments__file-input{opacity:0;z-index:-1;width:.1px;height:.1px;position:absolute;overflow:hidden}.esri-attachments__container--list .esri-attachments__items{flex-flow:column}.esri-attachments__container--list .esri-attachments__item-mask{flex:none;margin-right:7px;position:relative}.esri-attachments__container--list .esri-attachments__image{max-width:unset;max-height:unset;left:50%}.esri-attachments__container--list .esri-attachments__label{flex:auto;justify-content:space-between;display:flex}.esri-attachments__container--list .esri-attachments__filename{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;cursor:pointer;flex:1 0 0}.esri-attachments__container--list .esri-attachments__item-chevron-icon{cursor:pointer;flex:none;padding:0 15px}.esri-attachments__container--preview .esri-attachments__items{flex-flow:wrap;align-items:center}.esri-attachments__container--preview .esri-attachments__item{width:100%;margin-bottom:var(--calcite-spacing-md)}.esri-attachments__container--preview .esri-attachments__item-mask{width:100%;height:auto}.esri-attachments__container--preview .esri-attachments__item-button{box-shadow:none;flex-flow:column}.esri-attachments__container--preview .esri-attachments__item-button .esri-attachments__label{margin:var(--calcite-spacing-md) 0}.esri-attachments__container--preview .esri-attachments__image{max-width:100%}.esri-attachments__container--preview .esri-attachments__filename{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;text-align:center;text-overflow:ellipsis;width:calc(100% - 15px);margin-top:var(--calcite-spacing-md);overflow:hidden}.esri-attachments__container--preview .esri-attachments__item-mask--icon{background-color:var(--calcite-color-foreground-1)}.esri-attachments__form-node{background-color:var(--calcite-color-foreground-1);padding:6px 7px;box-shadow:var(--calcite-shadow-sm)}.esri-attachments__form-node .esri-attachments__item-mask{box-shadow:none;width:unset;height:unset}.esri-attachments__form-node .esri-attachments__image{max-width:100%}.esri-attachments__error-message{background-color:var(--calcite-color-foreground-1);border-top:3px solid var(--calcite-color-status-danger);margin:6px 7px;padding:var(--calcite-spacing-md) 15px;animation:.25s ease-in-out esri-fade-in-down;box-shadow:0 1px 2px #0000004d}.esri-attachments__progress-bar{width:100%;position:absolute}.esri-attachments__item-mask:dir(rtl){margin-left:7px;margin-right:0}.esri-feature-form{letter-spacing:0em;background:var(--calcite-color-background);padding:var(--esri-widget-padding)}.esri-feature-form__disabled-notice{margin-bottom:var(--calcite-spacing-xl)}.esri-feature-form .esri-feature-utility-network-associations,.esri-feature-form .esri-feature-form-utility-network-association-list{margin-block-end:var(--calcite-spacing-md)}.esri-feature-form .esri-feature-utility-network-associations .esri-feature-element-info__description{color:var(--calcite-color-text-2)}.esri-feature-form .esri-feature-utility-network-associations .esri-feature-element-info h5{font-size:inherit}.esri-feature-form__form{flex-direction:column;display:flex}.esri-feature-form__centered-button{align-self:center}.esri-feature-form__description-text{color:var(--calcite-color-text-2);font-size:var(--calcite-font-size-sm)}.esri-feature-form__list-observer{z-index:2;text-align:center;position:relative;bottom:var(--calcite-spacing-xxl)}.esri-feature-form__related-records_header{margin-bottom:var(--calcite-spacing-xs);display:flex}.esri-feature-form__related-records_header span{flex-grow:1}.esri-feature-form__related-records_label calcite-notice,.esri-feature-form__related-records_label .esri-feature-form__description-text{margin-bottom:var(--calcite-spacing-xs)}.esri-feature-form__related-records_list{min-height:40px;margin-bottom:var(--calcite-spacing-xs)}label.esri-feature-form__label{gap:.5em;margin-bottom:var(--calcite-spacing-md)}.esri-feature-form__label{opacity:1;flex-direction:column;justify-content:space-between;margin-bottom:var(--calcite-spacing-xs);transition:opacity .25s,margin .25s;display:flex;position:relative}.esri-feature-form__label:last-child{margin-bottom:0}.esri-feature-form__label-text-content{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;align-items:center;display:flex}.esri-feature-form__form-header{margin-bottom:var(--calcite-spacing-md)}.esri-feature-form__form-header .esri-feature-form__description-text~.esri-widget__heading{margin-bottom:0}.esri-feature-form__input{width:100%}.esri-feature-form__input:focus{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}textarea.esri-feature-form__input{resize:vertical}.esri-feature-form__input--disabled{background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium)}.esri-feature-form__field-error-message{padding:7px 0;font-size:var(--calcite-font-size-sm)}.esri-feature-form__date-input-container{flex-direction:column;display:flex}.esri-feature-form__date-input-container .esri-feature-form__input{margin-bottom:3px}.esri-feature-form__date-input-container :last-child{margin-bottom:0}.esri-feature-form__input--radio-group{flex-direction:column;display:flex}.esri-feature-form__input--radio-label{align-items:center;display:flex}.esri-feature-form__input--switch{margin:7px 0}.esri-feature-form__group{margin:0 0 var(--calcite-spacing-md);background-color:inherit;margin-inline:-10px}.esri-feature-form__group--sequential{border-bottom:none;border-inline-start:3px solid #adadad4d}.esri-feature-form__group--active{border-inline-start-color:var(--calcite-color-status-info)}.esri-feature-form__text-element{color:var(--calcite-color-text-3);line-height:var(--calcite-font-line-height-relative-snug);font-size:var(--calcite-font-size--1);font-weight:var(--calcite-font-weight-normal)}.esri-feature-form__text-element a{transition:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start inset-size,opacity,outline-color,transform var(--calcite-animation-timing) ease-in-out 0s,outline 0s,outline-offset 0s;background-color:var(--calcite-color-background);background-image:linear-gradient(currentColor,currentColor),linear-gradient(var(--calcite-color-brand-underline),var(--calcite-color-brand-underline));color:var(--calcite-color-text-link);background-position-x:0%,100%;background-position-y:min(1.5em,100%);background-repeat:no-repeat,no-repeat;background-size:0% 1px,100% 1px;border-style:none;padding:0;text-decoration:none;display:inline;position:relative}.esri-feature-form__text-element a:hover,.esri-feature-form__text-element a:focus{background-size:100% 1px,100% 1px}.esri-feature-form__text-element a:active{background-size:100% 2px,100% 2px}.esri-feature-form__text-element a.calcite--rtl{background-position:100% 100%,100% 100%}.esri-feature-form__text-element code{border:1px solid var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-3);white-space:normal;word-break:break-word;color:var(--calcite-color-text-2);font-family:var(--calcite-code-family);border-radius:var(--calcite-spacing-base);padding:.25em;font-size:85%}.esri-feature-form__text-element h1,.esri-feature-form__text-element h2,.esri-feature-form__text-element h3,.esri-feature-form__text-element h4,.esri-feature-form__text-element h5{color:var(--calcite-color-text-1);line-height:var(--calcite-font-line-height-relative-snug);font-size:var(--calcite-font-size-0);font-weight:var(--calcite-font-weight-bold);margin-bottom:var(--calcite-spacing-xxs)}.esri-feature-form__text-element h5{font-weight:var(--calcite-font-weight-medium)}.esri-feature-form__text-element h6{color:var(--calcite-color-text-2);line-height:var(--calcite-font-line-height-relative-snug);font-size:var(--calcite-font-size--1);font-weight:var(--calcite-font-weight-medium);margin-bottom:var(--calcite-spacing-xxs)}.esri-feature-form__text-element p{color:var(--calcite-color-text-3);line-height:var(--calcite-font-line-height-relative-snug);font-size:var(--calcite-font-size--1);font-weight:var(--calcite-font-weight-normal);margin-bottom:var(--calcite-spacing-xl)}.esri-feature-form__text-element strong{font-weight:var(--calcite-font-weight-bold)}:dir(rtl) .esri-feature-form__date-input-part:first-child .esri-feature-form__input{border-left:none;border-right:1px solid #adadad4d}.esri-feature-form-utility-network-association-layers{background-color:var(--calcite-color-background)}.esri-feature-form-utility-network-association-layers__header>*{margin-block-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-layers__header>:last-child{color:var(--calcite-color-text-3)}.esri-feature-form-utility-network-association-layers__heading-content{align-items:center;display:flex}.esri-feature-form-utility-network-association-layers__heading-content calcite-icon{margin-inline-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-layers__list-container{min-height:var(--calcite-spacing-xxxl);margin-bottom:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-layers__feature-observer{z-index:2;text-align:center;position:relative;bottom:20px}.esri-feature-form-utility-network-association-layers__filter-container{z-index:1;margin-bottom:var(--calcite-spacing-md);top:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-layers__filter-options-container{flex-direction:column;display:flex}.esri-feature-form-utility-network-association-layers__filter-options-header{flex-direction:row;align-items:baseline;display:flex}.esri-feature-form-utility-network-association-layers__filter-options-header span{flex-grow:1}.esri-feature-form-utility-network-association-layers__spatial-select-container{flex-direction:column;align-items:flex-end;gap:6px;display:flex}.esri-feature-form-utility-network-association-layers__spatial-select-toolbar{--calcite-action-group-border-color: transparent;border-width:var(--calcite-border-width-sm, 1px);border-radius:var(--calcite-corner-radius-round, 4px);border-style:solid;border-color:var(--calcite-color-border-3, var(--calcite-color-inverse));width:100%;min-height:min-content;overflow:hidden}.esri-feature-form-utility-network-association-layers__sticky-loading-container{z-index:2;pointer-events:none;justify-content:center;align-items:center;height:var(--calcite-spacing-xxxl);margin:0;padding:0;display:flex;position:sticky;bottom:10px}.esri-feature-form-utility-network-association-layers__loading-container{justify-content:center;width:100%;padding:var(--calcite-spacing-md) 0;display:flex}.esri-feature-form-utility-network-association-list{background-color:var(--calcite-color-foreground-1)}.esri-feature-form-utility-network-association-list__header>*{margin-block-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-list__header>:last-child{color:var(--calcite-color-text-3)}.esri-feature-form-utility-network-association-list__header calcite-block{margin-block-start:-18px;margin-inline:-15px}.esri-feature-form-utility-network-association-list__heading-content{align-items:center;display:flex}.esri-feature-form-utility-network-association-list__heading-content calcite-icon{margin-inline-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-list__list-container{flex-direction:column;min-height:var(--calcite-spacing-xxxl);display:flex}.esri-feature-form-utility-network-association-list__list-container calcite-fab{margin-block:var(--calcite-spacing-md);flex-direction:row;align-self:center;display:flex}.esri-feature-form-utility-network-association-settings{--calcite-block-padding: 0;background-color:var(--calcite-color-foreground-1);flex-direction:column;display:flex}.esri-feature-form-utility-network-association-settings calcite-block{border:1px solid var(--calcite-color-border-3);margin-block:0}.esri-feature-form-utility-network-association-settings calcite-block:first-of-type{border-radius:var(--calcite-spacing-sm) var(--calcite-spacing-sm) 0 0}.esri-feature-form-utility-network-association-settings calcite-block:last-of-type{border-top:none;border-radius:0 0 var(--calcite-spacing-sm) var(--calcite-spacing-sm);margin-block-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-settings calcite-block calcite-label{margin-inline:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-settings__info-container{flex-direction:column;display:flex}.esri-feature-form-utility-network-association-settings__info-container>*{margin-block-end:var(--calcite-spacing-md)}.esri-feature{letter-spacing:0em;isolation:isolate;position:relative;width:100%}.esri-feature__title{word-break:break-word;word-wrap:break-word;font-size:var(--calcite-font-size);display:block}.esri-feature calcite-icon{box-sizing:content-box}.esri-feature__attachments{display:flex}.esri-feature__loading-container{justify-content:center;width:100%;padding:var(--calcite-spacing-md) 0;display:flex}.esri-feature-relationship{position:relative}.esri-feature-relationship__list{min-height:var(--calcite-spacing-xxxl)}.esri-feature-relationship__list-item--hidden{display:none}.esri-feature-utility-network-associations{position:relative}.esri-feature__filter-container{z-index:1;margin-bottom:var(--calcite-spacing-md);position:sticky;top:var(--calcite-spacing-md)}.esri-feature__feature-observer{z-index:2;text-align:center;position:relative;bottom:var(--calcite-spacing-xxl)}.esri-feature__sticky-loading-container{z-index:2;pointer-events:none;justify-content:center;align-items:center;height:var(--calcite-spacing-xxxl);margin:0;padding:0;display:flex;position:sticky;bottom:10px}.esri-icon-loading-indicator{display:inline-block}.esri-feature__content-element{margin-bottom:24px;padding:0 7px}.esri-feature__content-element .esri-widget__heading{line-height:var(--calcite-font-line-height-relative-tight)}.esri-feature__content-element:only-child,.esri-feature__content-node--text{margin-bottom:3px}.esri-feature__content-node{flex-direction:column;display:flex}.esri-feature__text{line-height:var(--calcite-font-line-height-relative-tight)}.esri-feature-attachments{flex-flow:column wrap;align-items:flex-start}.esri-feature__last-edited-info{padding-top:var(--calcite-spacing-xs);font-size:var(--calcite-font-size-sm)}:dir(rtl) .esri-feature__attachments-title{margin:0 0 0 auto}:dir(rtl) .esri-feature__attachments--list .esri-feature__attachment-item-mask{margin-left:7px;margin-right:0}.esri-feature-content__loader-container{justify-content:center;align-items:center;height:150px;padding:0;display:flex}.esri-feature-content__loader{background:url(./assets/attachments/images/loading-throb.gif) 50% no-repeat;width:100%;height:64px}.esri-feature-content{font-size:var(--calcite-font-size)}.esri-feature-content h1,.esri-feature-content h2,.esri-feature-content h3,.esri-feature-content h4,.esri-feature-content h5,.esri-feature-content h6{letter-spacing:0;color:var(--calcite-color-text-2);margin:.5em 0;font-weight:var(--calcite-font-weight-semibold);line-height:normal}.esri-feature-content h1{font-size:1.75em}.esri-feature-content h2{font-size:1.5em}.esri-feature-content h3{font-size:1.25em}.esri-feature-content h4,.esri-feature-content h5,.esri-feature-content h6{font-size:1em}.esri-widget__heading.esri-feature-element-info__title{color:var(--calcite-color-text-2);margin-top:0;margin-bottom:.2em;font-size:var(--calcite-font-size-xl);font-weight:var(--calcite-font-weight-normal)}.esri-feature-element-info__description{margin-bottom:var(--calcite-font-size-xs);font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-normal)}.esri-feature-content p{margin:0 0 1.2em;font-size:var(--calcite-font-size)}.esri-feature-content p:last-child{margin-block-end:0}.esri-feature-content img{image-orientation:from-image;max-width:100%;max-height:100%}.esri-feature-content video{max-width:100%;max-height:100%}.esri-feature-content figure{margin:0;padding:0}.esri-feature-content figcaption{margin:.2em 0 0;padding:0;font-size:var(--calcite-font-size-sm);font-style:italic;display:block}.esri-feature-content ul,.esri-feature-content ol{margin-block:1rem}.esri-feature-content ul:first-child,.esri-feature-content ol:first-child{margin-block-start:0}.esri-feature-content a{color:var(--calcite-color-text-3)}.esri-feature-content a:hover,.esri-feature-content a:focus{color:var(--calcite-color-text-2)}.esri-features{--calcite-color-background: $background-color;flex-direction:column;display:flex}.esri-features img{image-orientation:from-image}.esri-features__flow-item--collapsed{--calcite-flow-item-header-border-block-end: none}.esri-features__container{background-color:var(--calcite-color-background)}.esri-features__container:not(:empty){padding:var(--calcite-spacing-md)}.esri-features .esri-feature,.esri-features .esri-feature-relationship,.esri-features .esri-feature-utility-network-associations{background-color:#0000}.esri-features__heading{word-break:break-word;word-wrap:break-word}.esri-features__header,.esri-features__footer{background-color:var(--calcite-color-foreground-1);flex:1;justify-content:flex-end;align-items:center;display:flex}.esri-features__pagination-text{padding-inline:var(--calcite-spacing-sm);color:var(--calcite-color-text-3);font-size:var(--calcite-font-size-sm)}.esri-features__loader{align-self:center;padding-inline:1rem}.esri-features__pagination-action-bar{flex:1}.esri-features__pagination-menu-button{border-inline-start:1px solid var(--calcite-color-border-3)}.esri-features__icon{flex:0 0 var(--calcite-spacing-lg);width:var(--calcite-spacing-lg);height:var(--calcite-spacing-lg);display:inline-block}.esri-features__action-image{background-position:50%;background-repeat:no-repeat;background-size:contain;flex:0 0 var(--calcite-spacing-lg);width:var(--calcite-spacing-lg);height:var(--calcite-spacing-lg)}.esri-features__header{border-block-end:1px solid var(--calcite-color-border-3)}.esri-features__content-feature{--calcite-flow-item-footer-padding: 0}.esri-features__feature-menu-observer{z-index:2;text-align:center;position:relative;bottom:20px}.esri-features__action--exit{transform:scaleX(-1)}.esri-feature-media__container{flex-flow:wrap;align-items:center;width:100%;min-height:150px;margin-top:var(--calcite-spacing-xs);display:flex}.esri-feature-media__container .esri-feature-media__pagination-button{cursor:pointer;color:var(--calcite-color-text-3);background:0 0;border:none;justify-content:center;align-items:center;padding-block:var(--calcite-spacing-xs);padding-inline:var(--calcite-spacing-sm);display:flex}.esri-feature-media__container .esri-feature-media__pagination-button:hover,.esri-feature-media__container .esri-feature-media__pagination-button:focus{color:var(--calcite-color-text-2);fill:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-2)}.esri-feature-media__item-title{margin:0;font-size:var(--calcite-font-size-md)}.esri-feature-media__item-caption{padding-block-start:3px;font-size:var(--calcite-font-size-sm)}.esri-feature-media__item{justify-content:center;align-items:flex-start;width:100%;height:auto;margin-block:var(--calcite-spacing-xs);display:flex}.esri-feature-media__item-navigation{flex:0 100%;justify-content:space-between;align-items:flex-start;margin-block-end:var(--calcite-spacing-xs);display:flex}.esri-feature-media__item-text{margin-inline-end:var(--calcite-spacing-md)}.esri-feature-media__pagination{flex:none;align-items:center;display:flex;overflow:hidden}.esri-feature-media__pagination:only-child{margin-inline-start:auto}.esri-feature-media__pagination-text{color:var(--calcite-color-text-3);padding-inline:var(--calcite-spacing-base);font-size:var(--calcite-font-size-sm)}.esri-feature-media__item-container{flex:0 auto;width:100%}.esri-feature-media__item-container img{max-width:100%}.esri-feature-media__item-container img[src$=".SVG"],.esri-feature-media__item-container img[src$=".svg"]{width:100%}.esri-feature-media__chart{background-color:var(--calcite-color-foreground-1);width:100%;height:155px}:dir(rtl) .esri-feature-media__image-summary{margin:0 .5em 0 0}:dir(rtl) .esri-feature-media__pagination-icon{transform:rotate(180deg)}.esri-identity-modal__info,.esri-identity-modal__notice{margin:0;margin-bottom:var(--calcite-spacing-md)}.esri-ui .esri-popup{z-index:1;pointer-events:none;flex-flow:column;display:flex;position:absolute}.esri-ui .esri-popup .esri-features{flex:1;width:100%}.esri-ui .esri-popup .esri-widget__heading{margin:0}.esri-ui .esri-popup--hidden{display:none}.esri-popup--shadow{box-shadow:0 1px 4px #000c}.esri-popup--aligned-top-center{transform-origin:50% 100%}.esri-popup--aligned-bottom-center{transform-origin:50% -5%}.esri-popup--aligned-top-left,.esri-popup--aligned-bottom-left{transform-origin:100%}.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-right{transform-origin:-5%}.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right{animation:.2s ease-in-out popup-intro-animation-down}.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right{animation:.2s ease-in-out popup-intro-animation-up}.esri-popup__main-container{z-index:1;pointer-events:auto;background-color:var(--calcite-color-foreground-1);width:340px;min-height:48px;max-height:340px;display:flex;position:relative;overflow:hidden}.esri-popup__pointer{width:0;height:0;position:absolute}.esri-popup__pointer-direction{content:"";background-color:var(--calcite-color-foreground-1);width:var(--calcite-spacing-md);height:var(--calcite-spacing-md);position:absolute}.esri-popup--aligned-top-center .esri-popup__pointer{margin:0 0 0 -6px;top:100%;left:50%}.esri-popup--aligned-bottom-center .esri-popup__pointer{margin:0 0 0 -6px;bottom:100%;left:50%}.esri-popup--aligned-top-left .esri-popup__pointer{bottom:var(--calcite-spacing-xs);right:var(--calcite-spacing-xs);transform:rotate(-45deg)}.esri-popup--aligned-bottom-left .esri-popup__pointer{top:var(--calcite-spacing-xs);right:var(--calcite-spacing-xs);transform:rotate(45deg)}.esri-popup--aligned-top-right .esri-popup__pointer{bottom:var(--calcite-spacing-xs);left:var(--calcite-spacing-xs);transform:rotate(45deg)}.esri-popup--aligned-bottom-right .esri-popup__pointer{top:var(--calcite-spacing-xs);left:var(--calcite-spacing-xs);transform:rotate(-45deg)}.esri-popup--aligned-top-center .esri-popup__pointer-direction,.esri-popup--aligned-bottom-center .esri-popup__pointer-direction{transform:scale(.75,2) rotate(45deg)}.esri-popup--aligned-top-left .esri-popup__pointer-direction,.esri-popup--aligned-bottom-left .esri-popup__pointer-direction,.esri-popup--aligned-top-right .esri-popup__pointer-direction,.esri-popup--aligned-bottom-right .esri-popup__pointer-direction{top:-6px;left:-6px;transform:scaleY(3.5) rotate(45deg)}.esri-popup--aligned-top-center .esri-popup__pointer-direction{top:-6px;left:0}.esri-popup--aligned-bottom-center .esri-popup__pointer-direction{bottom:-6px;left:0}.esri-view-width-xlarge .esri-popup__main-container{width:460px}.esri-view-width-large .esri-popup__main-container{width:400px}.esri-view-width-medium .esri-popup__main-container{width:340px}.esri-view-width-less-than-medium .esri-popup__main-container{width:280px}.esri-view-width-xsmall .esri-popup--is-docked-bottom-center{margin-bottom:var(--calcite-spacing-xl)}.esri-view-width-xsmall .esri-popup--is-docked-top-center,.esri-view-width-xsmall .esri-popup--is-docked-bottom-center{width:auto;margin:0}.esri-view-width-xsmall .esri-popup--is-docked-top-center .esri-popup__main-container,.esri-view-width-xsmall .esri-popup--is-docked-bottom-center .esri-popup__main-container{width:100%;max-height:75%;position:absolute;left:0;right:0}.esri-view-width-xsmall .esri-popup--is-docked-bottom-center .esri-popup__main-container{bottom:0}.esri-view-width-xsmall .esri-popup--is-docked-top-center .esri-popup__main-container{top:0}.esri-view-height-xlarge .esri-popup__main-container{max-height:460px}.esri-view-height-xlarge.esri-popup--feature-menu-open .esri-popup__feature-menu-viewport{max-height:410px}.esri-view-height-large .esri-popup__main-container{max-height:400px}.esri-view-height-large.esri-popup--feature-menu-open .esri-popup__feature-menu-viewport{max-height:350px}.esri-view-height-less-than-medium .esri-popup__main-container{max-height:300px}.esri-view-height-less-than-medium.esri-popup--feature-menu-open .esri-popup__feature-menu-viewport{max-height:250px}.esri-popup--is-docked{margin:15px 15px 30px;animation:.25s ease-out esri-docking-animation;inset:0}.esri-ui .esri-popup--is-docked{flex-flow:row}.esri-popup--is-docked-top-left,.esri-popup--is-docked-top-center,.esri-popup--is-docked-top-right{align-items:flex-start}.esri-popup--is-docked-bottom-left,.esri-popup--is-docked-bottom-center,.esri-popup--is-docked-bottom-right{align-items:flex-end}.esri-popup--is-docked-top-left,.esri-popup--is-docked-bottom-left{justify-content:flex-start}.esri-popup--is-docked-top-center,.esri-popup--is-docked-bottom-center{justify-content:center}.esri-popup--is-docked-top-right,.esri-popup--is-docked-bottom-right{justify-content:flex-end}.esri-popup--is-docked-top-left .esri-popup__main-container,.esri-popup--is-docked-top-right .esri-popup__main-container,.esri-popup--is-docked-bottom-left .esri-popup__main-container,.esri-popup--is-docked-bottom-right .esri-popup__main-container{max-height:80%}.esri-popup--is-docked-top-center .esri-popup__main-container,.esri-popup--is-docked-bottom-center .esri-popup__main-container{max-height:40%}@media (prefers-reduced-motion){.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right,.esri-popup--is-docked{animation:none}}.esri-tooltip{--calcite-input-padding-inline: .5rem;--calcite-input-height: 1.5rem;--field-height: .875rem;--field-height--input: var(--calcite-input-height);--field-row-gap: 1px;--field-column-gap: var(--calcite-app-spacing-2);--field-input-width: 6.5rem;--field-title-extra-margin: var(--calcite-app-spacing-6);--field-title-color: var(--calcite-color-text-2);--field-value-color: var(--calcite-color-text-1);--font-size: var(--calcite-font-size--3);--font-size--input: var(--calcite-font-size--2);--content-padding-inline: var(--calcite-app-spacing-2);--content-padding-block: var(--calcite-app-spacing-2);--help-message-border-spacing: var(--calcite-app-spacing-2);--help-message-min-width: 7rem;--icon-size--feedback: .625rem;z-index:1;will-change:transform;width:fit-content;position:absolute;top:0;left:0;overflow:visible}.esri-tooltip-content{gap:var(--content-padding-block);border:solid 1px var(--calcite-color-border-3);padding-block:var(--content-padding-block);padding-inline:var(--content-padding-inline);color:var(--calcite-color-text-2);width:min-content;line-height:var(--calcite-font-line-height-relative-tight);font-size:var(--font-size);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);touch-action:none;view-transition-name:tooltip-content;background:var(--calcite-color-foreground-2);border-radius:.25rem;flex-direction:column;display:flex;position:relative;box-shadow:0 6px 20px -4px #0000001a,0 4px 12px -2px #00000014;outline:none!important}.esri-tooltip-content:empty{opacity:0}.esri-tooltip-content__header{margin-block-start:calc(var(--content-padding-block) * -1);margin-inline:calc(var(--content-padding-inline) * -1);border-block-end:solid 1px var(--calcite-color-border-3);justify-content:flex-start;block-size:24px;padding-block-end:0;display:flex}.esri-tooltip-content__header__spacer{flex-grow:1;flex-shrink:1}.esri-tooltip-content__header__actions{flex-grow:0;flex-shrink:0;padding-inline-end:var(--content-padding-inline)}.esri-tooltip-content__header calcite-button{--calcite-offset-invert-focus: 1}.esri-tooltip-content--input{--field-height: var(--field-height--input);background:var(--calcite-color-foreground-1);pointer-events:all;-webkit-backdrop-filter:none;backdrop-filter:none}.esri-tooltip-content--input:not(:focus-within){opacity:.8}.esri-tooltip.calcite-mode-dark .esri-tooltip-content,.esri-tooltip.calcite-mode-dark .esri-tooltip-content--input{background:var(--calcite-color-foreground-1)}.esri-tooltip-table{grid-gap:var(--field-row-gap) var(--field-column-gap);grid-template-columns:max-content 1fr max-content max-content;align-items:flex-start;width:max-content;display:grid}.esri-tooltip-field{display:contents}.esri-tooltip-field__title,.esri-tooltip-field__value{block-size:var(--field-height);white-space:nowrap;color:var(--calcite-color-text-3);justify-content:flex-start;align-items:center;display:flex}.esri-tooltip-field__title{color:var(--field-title-color);margin-inline-end:var(--field-title-extra-margin)}.esri-tooltip-field__value{color:var(--field-value-color);grid-column:span 3}.esri-tooltip-editable-field{display:contents}.esri-tooltip-editable-field__title,.esri-tooltip-editable-field__value{block-size:var(--field-height);white-space:nowrap;justify-content:flex-start;align-items:center}.esri-tooltip-editable-field__title{display:flex}.esri-tooltip-editable-field__value{font-variant-numeric:tabular-nums;display:contents}.esri-tooltip-editable-field__value__content{grid-column:span 3;align-items:center;min-width:max-content;display:flex}.esri-tooltip-editable-field__value__content--read-only{padding-inline:var(--calcite-input-padding-inline);block-size:var(--calcite-input-height);line-height:var(--calcite-input-height);font-size:var(--calcite-font-size--2)}.esri-tooltip-editable-field--feedback.esri-tooltip-editable-field--locked .esri-tooltip-editable-field__value__content{grid-column:span 2}.esri-tooltip-editable-field--feedback .esri-tooltip-editable-field__title{color:var(--field-title-color);margin-inline-end:var(--field-title-extra-margin)}.esri-tooltip-editable-field--feedback .esri-tooltip-editable-field__value__content{color:var(--field-value-color);align-self:center}.esri-tooltip-editable-field--feedback .esri-tooltip-editable-field__lock-icon{width:var(--icon-size--feedback);min-width:var(--icon-size--feedback);height:var(--icon-size--feedback);min-height:var(--icon-size--feedback);align-self:center;margin-top:-2px}.esri-tooltip-editable-field--input{padding:0}.esri-tooltip-editable-field--input .esri-tooltip-editable-field__title{font-size:var(--font-size--input)}.esri-tooltip-editable-field__input-wrapper{inline-size:var(--field-input-width)}.esri-tooltip-editable-field__input-message{text-wrap:auto;width:100%;margin-block-end:var(--calcite-input-message-spacing-value)}.esri-tooltip-editable-field__input-suffix{line-height:var(--field-height--input)}.esri-tooltip-editable-field__button{width:var(--field-height--input)}.esri-tooltip-value-by-value span:nth-child(2){margin-inline:7px}.esri-tooltip-help-message{gap:var(--calcite-app-spacing-2);margin-inline:calc(var(--content-padding-inline) * -1);border-block-start:solid 1px var(--calcite-color-border-3);padding-block-start:var(--content-padding-inline);padding-inline:var(--content-padding-inline);width:auto;min-width:var(--help-message-min-width);text-align:left;text-wrap:balance;white-space:break-spaces;font-size:var(--font-size);border-block-end:1px solid var(--calcite-color-foreground-1);justify-content:center;align-items:center;display:flex}.esri-tooltip-help-message:only-child{border-block:none;padding-block-start:var(--field-row-gap)}.esri-tooltip-help-message__icon{color:var(--calcite-color-status-info)}.esri-tooltip-help-message__text{padding-block-start:2px}.esri-tooltip ::view-transition-old(tooltip-content){animation-duration:.1s}.esri-tooltip ::view-transition-new(tooltip-content){animation-duration:.1s}.esri-tooltip{--offset-start: calc(-100% - var(--offset))}.esri-tooltip--debug:after{--size: 10px;margin-top:calc(var(--size) * -.5);margin-left:calc(var(--size) * -.5);width:var(--size);height:var(--size);content:"";background:var(--calcite-color-status-danger);position:absolute;top:0;left:0}.esri-tooltip--bottom .esri-tooltip-content{transform:translate(-50%,var(--offset))}.esri-tooltip--bottom-left.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--bottom-right.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--bottom-start.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--bottom-end.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),var(--offset))}.esri-tooltip--bottom-right.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--bottom-left.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--bottom-start.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--bottom-end.esri-tooltip--ltr .esri-tooltip-content{transform:translate(var(--offset),var(--offset))}.esri-tooltip--leading.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--trailing.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),-50%)}.esri-tooltip--leading-start.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--trailing-start.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),var(--offset-start))}.esri-tooltip--leading-end.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--trailing-end.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),var(--offset))}.esri-tooltip--top .esri-tooltip-content{transform:translate(-50%,var(--offset-start))}.esri-tooltip--top-left.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--top-right.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--top-start.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--top-end.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),var(--offset-start))}.esri-tooltip--top-right.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--top-left.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--top-start.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--top-end.esri-tooltip--ltr .esri-tooltip-content{transform:translate(var(--offset),var(--offset-start))}.esri-tooltip--trailing.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--leading.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset),-50%)}.esri-tooltip--trailing-start.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--leading-start.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset),var(--offset-start))}.esri-tooltip--trailing-end.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--leading-end.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset),var(--offset))}`;const xn="arcgis-map",zi={base:xn,containerUI:`${xn}-container-ui`,containerElement:`${xn}-container-ui__element`,containerElementDefaultSlot:`${xn}-container-ui__element-default`,containerElementPopupSlot:`${xn}-container-ui__element-popup`,containerTopLeftColumn:`${xn}-container-ui__top-left-column`,containerTopRightColumn:`${xn}-container-ui__top-right-column`,containerBottomLeftRow:`${xn}-container-ui__bottom-left-row`,containerBottomRightRow:`${xn}-container-ui__bottom-right-row`,containerElementTopLeft:`${xn}-container-ui__element-top-left`,containerElementTopRight:`${xn}-container-ui__element-top-right`,containerElementBottomLeft:`${xn}-container-ui__element-bottom-left`,containerElementBottomRight:`${xn}-container-ui__element-bottom-right`,containerElementTopStart:`${xn}-container-ui__element-top-start`,containerElementTopEnd:`${xn}-container-ui__element-top-end`,containerElementBottomStart:`${xn}-container-ui__element-bottom-start`,containerElementBottomEnd:`${xn}-container-ui__element-bottom-end`},bo={topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",topStart:"top-start",topEnd:"top-end",bottomStart:"bottom-start",bottomEnd:"bottom-end",popup:"popup"};function D8e(t,e,i){return ar`<div class=${kt({[zi.containerElementPopupSlot]:!0})}><slot name=${bo.popup} @slotchange=${e}></slot></div><div class=${kt({[zi.containerElementDefaultSlot]:!0})}>${i}<slot></slot></div><div class=${kt({[zi.containerTopLeftColumn]:!0})}><div class=${kt({[zi.containerElement]:!0,[zi.containerElementTopLeft]:!0})}><slot name=${bo.topLeft}></slot></div><div class=${kt({[zi.containerElement]:!0,[zi.containerElementTopStart]:!0})}><slot name=${t==="ltr"?bo.topStart:bo.topEnd}></slot></div></div><div class=${kt({[zi.containerTopRightColumn]:!0})}><div class=${kt({[zi.containerElement]:!0,[zi.containerElementTopRight]:!0})}><slot name=${bo.topRight}></slot></div><div class=${kt({[zi.containerElement]:!0,[zi.containerElementTopEnd]:!0})}><slot name=${t==="ltr"?bo.topEnd:bo.topStart}></slot></div></div><div class=${kt({[zi.containerBottomLeftRow]:!0})}><div class=${kt({[zi.containerElement]:!0,[zi.containerElementBottomLeft]:!0})}><slot name=${bo.bottomLeft}></slot></div><div class=${kt({[zi.containerElement]:!0,[zi.containerElementBottomStart]:!0})}><slot name=${t==="ltr"?bo.bottomStart:bo.bottomEnd}></slot></div></div><div class=${kt({[zi.containerBottomRightRow]:!0})}><div class=${kt({[zi.containerElement]:!0,[zi.containerElementBottomRight]:!0})}><slot name=${bo.bottomRight}></slot></div><div class=${kt({[zi.containerElement]:!0,[zi.containerElementBottomEnd]:!0})}><slot name=${t==="ltr"?bo.bottomEnd:bo.bottomStart}></slot></div></div>`}const N8e=bf`:host{--arcgis-internal-color-black-30: color-mix(in srgb, #000000 30.2%, transparent);--arcgis-internal-box-shadow: var(--calcite-spacing-none) var(--calcite-spacing-px) var(--calcite-spacing-base) var(--arcgis-internal-color-black-30);--arcgis-internal-top-max-width: calc(min(100cqw, 100vw) - var(--calcite-spacing-xxxl));--arcgis-internal-panel-width: 300px;--arcgis-internal-panel-height: 100%;--arcgis-internal-panel-height-sm: 240px;--arcgis-internal-panel-height-md: 420px;--arcgis-internal-panel-height-lg: 540px;--arcgis-internal-panel-height-xl: 680px;--arcgis-internal-basemap-gallery-width-lg: 450px;--arcgis-expand-max-height: var(--calcite-spacing-xxxl);--arcgis-collapse-icon-flip: scaleX(1);--arcgis-row-direction: row;--arcgis-legend-internal-width: 300px;--arcgis-layout-overlay-space-top: 0px;--arcgis-layout-overlay-space-bottom: 0px;--arcgis-layout-overlay-space-left: 0px;--arcgis-layout-overlay-space-right: 0px;--arcgis-internal-sketch-justify-content: flex-start}:host{display:block;position:relative;height:100%;width:100%;padding:var(--calcite-spacing-none);margin:var(--calcite-spacing-none);container:arcgis-map-container/size;contain:layout}::slotted(:is([closed],[closed="true"])){display:none}:dir(rtl) ::slotted(:not(arcgis-swipe)){direction:rtl}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-attachments,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-coordinate-conversion,arcgis-daylight,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-elevation-profile,arcgis-expand,arcgis-feature-form,arcgis-features,arcgis-feature-table,arcgis-fullscreen,arcgis-grid-controls,arcgis-home,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-link-chart-layout-switcher,arcgis-locate,arcgis-measurement,arcgis-navigation-toggle,arcgis-oriented-imagery-viewer,arcgis-print,arcgis-search,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-time-slider,arcgis-time-zone-label,arcgis-track,arcgis-utility-network-associations,arcgis-utility-network-trace,arcgis-utility-network-validate-topology,arcgis-version-management,arcgis-video-player,arcgis-weather,arcgis-zoom)){box-shadow:var(--arcgis-internal-box-shadow)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width);min-width:var(--calcite-spacing-xxxl);min-height:var(--calcite-spacing-xxxl);transition:max-height .25s ease-in-out;overflow-y:auto}.arcgis-map-container-ui{position:absolute;inset:var(--calcite-spacing-none);padding:var(--calcite-spacing-none);z-index:var(--calcite-z-index);pointer-events:none;background:none}.arcgis-map-container-ui__element{display:flex;flex-direction:column;pointer-events:none;width:max-content;max-width:100%}.arcgis-map-container-ui__element .esri-widget--panel{min-width:var(--arcgis-internal-panel-width)}.arcgis-map-container-ui__element-popup,.arcgis-map-container-ui__element-default{pointer-events:none;max-width:100%;position:absolute;display:block;inset:var(--calcite-spacing-none);width:100%;::slotted(:not(arcgis-swipe)){pointer-events:auto}}.arcgis-map-container-ui__top-left-column{position:absolute;top:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;margin-top:var(--calcite-spacing-lg);margin-left:var(--calcite-spacing-lg);padding-top:var(--arcgis-layout-overlay-space-top);padding-left:var(--arcgis-layout-overlay-space-left);::slotted(*){max-width:var(--arcgis-internal-top-max-width)}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column wrap}}.arcgis-map-container-ui__top-left-column:dir(rtl){align-items:flex-end;::slotted(arcgis-floor-filter){--arcgis-row-direction: row-reverse}}.arcgis-map-container-ui__top-right-column{position:absolute;top:var(--calcite-spacing-none);right:var(--calcite-spacing-none);display:flex;flex-direction:column;align-items:flex-end;margin-top:var(--calcite-spacing-lg);margin-right:var(--calcite-spacing-lg);padding-top:var(--arcgis-layout-overlay-space-top);padding-right:var(--arcgis-layout-overlay-space-right);::slotted(*){max-width:var(--arcgis-internal-top-max-width)}::slotted(arcgis-expand){--arcgis-internal-sketch-justify-content: flex-end}}.arcgis-map-container-ui__top-right-column:dir(rtl){align-items:flex-start;::slotted(arcgis-floor-filter){--arcgis-row-direction: row}}.arcgis-map-container-ui__element-top-left{top:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;justify-content:flex-start;align-items:flex-start;::slotted(arcgis-expand){--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: calc(-1 * var(--calcite-spacing-xs))}::slotted(:is(arcgis-floor-filter,arcgis-expand)){--arcgis-collapse-icon-flip: scaleX(-1)}::slotted(arcgis-sketch){--sketch-pad-flex-flow: wrap}::slotted(*){margin-bottom:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-top-left:dir(rtl){align-items:flex-end}.arcgis-map-container-ui__element-top-right{position:relative;justify-content:flex-start;align-items:flex-end;margin-left:auto;::slotted(arcgis-expand){--arcgis-expand-icon-number-left: calc(-1 * var(--calcite-spacing-xs));--arcgis-expand-icon-number-right: none}::slotted(arcgis-floor-filter){--arcgis-row-direction: row-reverse}::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column wrap-reverse}::slotted(*){margin-bottom:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-top-right:dir(rtl){align-items:flex-start}.arcgis-map-container-ui__element-top-start{position:relative;justify-content:flex-start;align-items:flex-start;::slotted(arcgis-expand){--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: calc(-1 * var(--calcite-spacing-xs))}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column wrap}::slotted(:is(arcgis-floor-filter,arcgis-expand)){--arcgis-collapse-icon-flip: scaleX(-1)}::slotted(*){margin-bottom:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-top-start:dir(rtl){align-items:flex-end;--arcgis-internal-sketch-justify-content: flex-start;::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap-reverse}}.arcgis-map-container-ui__element-top-end{position:relative;justify-content:flex-start;align-items:flex-end;::slotted(arcgis-expand){--arcgis-expand-icon-number-left: calc(-1 * var(--calcite-spacing-xs));--arcgis-expand-icon-number-right: none}::slotted(arcgis-floor-filter){--arcgis-row-direction: row-reverse}::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column wrap-reverse}::slotted(*){margin-bottom:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-top-end:dir(rtl){align-items:flex-start;--arcgis-internal-sketch-justify-content: flex-end}.arcgis-map-container-ui__bottom-left-row{position:absolute;bottom:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;flex-direction:row;align-items:flex-end;max-width:100%;margin-left:var(--calcite-spacing-lg);margin-bottom:var(--calcite-spacing-xxxl);padding-left:var(--arcgis-layout-overlay-space-left);padding-bottom:var(--arcgis-layout-overlay-space-bottom);::slotted(:last-child){margin-right:var(--calcite-spacing-xxl)}::slotted(arcgis-floor-filter){--arcgis-internal-floor-filter-column-direction: column-reverse;--arcgis-internal-floor-filter-button-border-width: 0 0 1px}::slotted(*){max-width:var(--arcgis-internal-top-max-width)}}.arcgis-map-container-ui__bottom-left-row:dir(rtl){flex-direction:row-reverse;::slotted(arcgis-floor-filter){--arcgis-row-direction: row-reverse}}.arcgis-map-container-ui__bottom-right-row{position:absolute;bottom:var(--calcite-spacing-none);right:var(--calcite-spacing-none);display:flex;flex-direction:row-reverse;align-items:flex-end;max-width:100%;margin-right:var(--calcite-spacing-lg);margin-bottom:var(--calcite-spacing-xxxl);padding-right:var(--arcgis-layout-overlay-space-right);padding-bottom:var(--arcgis-layout-overlay-space-bottom);::slotted(:last-child){margin-left:var(--calcite-spacing-xxl)}::slotted(arcgis-floor-filter){--arcgis-internal-floor-filter-column-direction: column-reverse;--arcgis-internal-floor-filter-button-border-width: 0 0 1px}::slotted(*){max-width:var(--arcgis-internal-top-max-width)}::slotted(arcgis-expand){--arcgis-internal-sketch-justify-content: flex-end}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap-reverse}}.arcgis-map-container-ui__bottom-right-row:dir(rtl){flex-direction:row;::slotted(arcgis-floor-filter){--arcgis-row-direction: row}}.arcgis-map-container-ui__element-bottom-left{bottom:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;flex-direction:column;align-items:flex-end;justify-content:flex-end;flex-flow:row;::slotted(arcgis-coordinate-conversion){--arcgis-coordinate-conversion-flex-direction: column-reverse}::slotted(arcgis-expand){--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: calc(-1 * var(--calcite-spacing-xs))}::slotted(:is(arcgis-floor-filter,arcgis-expand)){--arcgis-collapse-icon-flip: scaleX(-1)}::slotted(arcgis-sketch){--sketch-pad-flex-flow: wrap-reverse}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap}::slotted(arcgis-floor-filter){--arcgis-floor-filter-align-items: flex-end}::slotted(*){margin-right:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-bottom-right{bottom:var(--calcite-spacing-none);right:var(--calcite-spacing-none);align-items:flex-end;justify-content:flex-end;margin-left:auto;flex-flow:row-reverse;::slotted(arcgis-coordinate-conversion){--arcgis-coordinate-conversion-flex-direction: column-reverse}::slotted(arcgis-expand){--arcgis-expand-icon-number-left: calc(-1 * var(--calcite-spacing-xs));--arcgis-expand-icon-number-right: none}::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap-reverse}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap-reverse}::slotted(arcgis-floor-filter){--arcgis-floor-filter-align-items: flex-end;--arcgis-row-direction: row-reverse}::slotted(*){margin-left:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-bottom-start{bottom:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;flex-direction:column;align-items:flex-end;justify-content:flex-end;flex-flow:row;::slotted(arcgis-coordinate-conversion){--arcgis-coordinate-conversion-flex-direction: column-reverse}::slotted(arcgis-expand){--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: calc(-1 * var(--calcite-spacing-xs))}::slotted(:is(arcgis-floor-filter,arcgis-expand)){--arcgis-collapse-icon-flip: scaleX(-1)}::slotted(arcgis-sketch){--sketch-pad-flex-flow: wrap-reverse}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap}::slotted(arcgis-floor-filter){--arcgis-floor-filter-align-items: flex-end}::slotted(*){margin-right:var(--calcite-spacing-sm-plus)}::slotted(:dir(rtl)){margin-right:var(--calcite-spacing-none);--arcgis-internal-sketch-justify-content: flex-start}}.arcgis-map-container-ui__element-bottom-end{bottom:var(--calcite-spacing-none);right:var(--calcite-spacing-none);align-items:flex-end;justify-content:flex-end;margin-left:auto;flex-flow:row-reverse;::slotted(arcgis-coordinate-conversion){--arcgis-coordinate-conversion-flex-direction: column-reverse}::slotted(arcgis-expand){--arcgis-expand-icon-number-left: calc(-1 * var(--calcite-spacing-xs));--arcgis-expand-icon-number-right: none}::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap-reverse}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap-reverse}::slotted(arcgis-floor-filter){--arcgis-floor-filter-align-items: flex-end;--arcgis-row-direction: row-reverse}::slotted(*){margin-left:var(--calcite-spacing-sm-plus)}::slotted(:dir(rtl)){margin-left:var(--calcite-spacing-none);--arcgis-internal-sketch-justify-content: flex-end}}.arcgis-map-container-ui__element>*{pointer-events:auto}@container arcgis-map-container (height >= 0){::slotted(arcgis-sketch){--responsive-toolbar-vert-width: var(--calcite-spacing-none);--responsive-toolbar-vert-height: min(100vh - 120px, 100cqh - 120px);--responsive-toolbar-horiz-width: min(100vw - 60px, 100cqw - 60px);--responsive-toolbar-horiz-height: var(--calcite-spacing-none)}}@container arcgis-map-container (max-height: 544px) or (max-width: 544px){::slotted(:is(arcgis-floor-filter)){--arcgis-internal-floor-filter-button-display: none;--arcgis-internal-floor-filter-menu-width: 225px}}@container arcgis-map-container (max-height: 499.99px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-sm);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-sm)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-sm)}}@container arcgis-map-container (min-height: 500px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-md);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-md)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-md)}::slotted(:is(arcgis-floor-filter)){--arcgis-internal-floor-filter-menu-max-height: 320px;--arcgis-internal-floor-filter-levels-max-height: 320px}}@container arcgis-map-container (min-height: 768px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-lg);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-lg)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-lg)}::slotted(:is(arcgis-floor-filter)){--arcgis-internal-floor-filter-menu-max-height: 420px;--arcgis-internal-floor-filter-levels-max-height: 420px}}@container arcgis-map-container (min-height: 992px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-lg);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-lg)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-lg)}}@container arcgis-map-container (min-height: 1200px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-xl);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-xl)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-xl)}}@container arcgis-map-container (min-width: 544px){::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width)}}@container arcgis-map-container (min-width: 768px){::slotted(:is(arcgis-legend[card-style-layout="auto"])){--arcgis-legend-internal-width: auto}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width)}}@container arcgis-map-container (min-width: 992px){::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width)}}@container arcgis-map-container (min-width: 1200px){::slotted(:is(arcgis-basemap-gallery)){width:var(--arcgis-internal-basemap-gallery-width-lg)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width)}}`;const L8e={"top-left":"top-left","top-right":"top-right","bottom-left":"bottom-left","bottom-right":"bottom-right","bottom-leading":"bottom-start","bottom-trailing":"bottom-end","top-leading":"top-start","top-trailing":"top-end"},j8e=["manual"];function wE(t){t.el.childElem&&(t.el.childElem.ownedBy=t.el),t.position&&j8e.includes(t.position)?t.el.removeAttribute("slot"):t.position&&(t.el.slot=L8e[t.position]);const e=z8e(t);if(!e){const i=B8e(t);if(!i){Hue(t);return}return VJ(i,t,!0),i}return F8e(e,t.el.parent)||(t.el.parent=e,e.localName==="arcgis-expand"?V8e(e,t):e.localName==="arcgis-placement"?U8e(e,t):VJ(e,t,!1)),e}function z8e({el:t}){for(let e=t.parentElement;e;e=e?.parentElement??null){if(FJ.has(e.localName))return e;if("ownedBy"in e&&e.ownedBy instanceof HTMLElement&&FJ.has(e.ownedBy.localName))return e.ownedBy}}const FJ=new Set(["arcgis-map","arcgis-scene","arcgis-link-chart","arcgis-expand","arcgis-placement"]);function F8e(t,e){if(t!==e)return!1;const i=t.localName;return i==="arcgis-expand"||i==="arcgis-placement"}function jk(t,e,i="arcgisReady"){const r=t;if(r.view)e(r.view);else{let n=function(s){s.target===t&&(jk(t,e,i),t.removeEventListener(i,n))};t.addEventListener(i,n)}}const V8e=(t,e)=>jk(t,i=>{const r=b8(e);e.el.shadowRoot?t.content=e.el:e.el.childElem&&t.content!=null&&r.append(e.el.childElem),e.el.view=i}),U8e=(t,e)=>jk(t,i=>{const r=b8(e);e.el.childElem&&r.append(e.el.childElem),e.el.view=i}),VJ=(t,e,i)=>jk(t,r=>{i&&Hue(e),e.el.view=r,e.referenceElement=t},"arcgisViewReadyChange");function q8e(t,e){return e===void 0||t?.targetGeometry!==e?.targetGeometry||t?.rotation!==e?.rotation||t?.scale!==e?.scale}function G8e(t,e){return Bue(e?.center,t)}function Bue(t,e){if(typeof e=="string")return Bue(t,e.split(",").map(Number));if(!t)return e;if(Array.isArray(e)){const i=e[0],r=e[1],n=e.length>2?e[2]:void 0;if(i!==t.longitude||r!==t.latitude||n!==t.z)return e}else if(e&&!t?.equals(e))return e}function Hue(t){t.el.childElem&&b8(t).append(t.el.childElem)}function b8(t){return t.el.shadowRoot??t.el}function B8e(t,e){const i=t.referenceElement;if(typeof i!="string")return i??void 0;const r=i.includes("#")||i.includes(".")||i.includes("["),n=t.el.getRootNode();return(r?void 0:n.querySelector(`#${i}`))??n.querySelector(i)??void 0}let H8e=class extends xI{constructor(e){super(e),this.direction=Mye(),this.component.listen("arcgisViewClick",i=>{this._handleOpenPopup(i.detail)}),this.component.listenOn(globalThis,"unhandledrejection",i=>{if(i.reason?.name==="webgl:required"){const{name:r}=i.reason;this.webGLError={name:r}}})}hostLifecycle(){return Pn(()=>this.component.view.popup?.visible,()=>{this.popupRef?.visible&&(this.popupRef.visible=!1)})}openPopup(e){this.popupRef?this.popupRef.open(e):this.component.view.openPopup(e)}closePopup(){this.popupRef?this.popupRef.visible=!1:this.component.view.closePopup()}async _handleOpenPopup(e){if(this.popupRef&&!this.component.popupDisabled){e.stopPropagation();const{location:i,promises:r}=await this.popupRef?.handleViewClick(e);r?.length&&(this.component.view.closePopup(),this.popupRef?.open({location:i,promises:r}))}}_handlePopupSlotChange(e){const i=mye(e.target,"arcgis-popup");!this.popupRef&&i.length?this.popupRef=i[0]:i.length||(this.popupRef=void 0)}_webGLErrorAlert(){return this.webGLError?ar`<calcite-alert icon=x-octagon kind=danger open .label=${this.webGLError.name}><div slot=title>Unable to display map. WebGL2 support is required.</div><div slot=message>Ensure that your browser and hardware meet the minimum requirements.</div><calcite-link slot=link href=https://esriurl.com/webgl-faq>https://esriurl.com/webgl-faq</calcite-link></calcite-alert>`:null}render(){return D8e(this.direction,e=>this._handlePopupSlotChange(e),this._webGLErrorAlert())}};const W8e=Ez((t,e)=>{const i=to();return e.onLifecycle(()=>be(()=>{const{map:r}=t;if(!r||r.destroyed)return[];const n=[];return r.loadError&&n.push(r),r.basemap?.loadError&&n.push(r.basemap),r.ground.loadError&&n.push(r.ground),[...r.allLayers,...r.allTables].forEach(s=>{s.loadError&&n.push(s)}),n},r=>{r.length&&(t.loadErrorSources=r,i.emit())})),i}),Z8e=Ez((t,e)=>{const i=to();return e.onLifecycle(()=>be(()=>t.view?.readyState,r=>{(r==="map-content-error"||r==="rendering-error")&&i.emit()})),i});const J8e=Uue(A8e),Y8e=Uue(ODe);var Ty;let Q8e=(Ty=class extends sf{constructor(){super(),this._containerRef=_S(),this._mapRef=_S(),this._uiController=new H8e(this),this.extraContent=new fe,this.arcgisLoadError=W8e(this),this.arcgisViewReadyError=Z8e(this),this._map=J8e(this),this.view=Y8e(this),this.animationsDisabled=this.view.animationsEnabled,this.allLayerViews=this.view.allLayerViews,this.analyses=this.view.analyses,this.autoDestroyDisabled=!1,this.background=this.view.background,this.basemap=this._map.basemap,this.basemapView=this.view.basemapView,this.constraints=this.view.constraints,this.displayFilterDisabled=this.view.displayFilterEnabled,this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.graphics=this.view.graphics,this.ground=this._map.ground,this.highlights=this.view.highlights,this.highlightOptions=this.view.highlightOptions,this.ipsInfo=this._map.ipsInfo,this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.map=this.view.map,this.navigation=this.view.navigation,this.padding=this.view.padding,this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.ready=this.view.ready,this.resizeAlign=this.view.resizeAlign,this.resolution=this.view.resolution,this.rotation=this.view.rotation,this.spatialReference=this.view.spatialReference,this.spatialReferenceLocked=this.view.spatialReferenceLocked,this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.timeZone=this.view.timeZone,this.updating=this.view.updating,this.visibleArea=this.view.visibleArea,this.arcgisViewAnalysisViewCreate=Mr(()=>this.view,"analysis-view-create"),this.arcgisViewAnalysisViewCreateError=Mr(()=>this.view,"analysis-view-create-error"),this.arcgisViewAnalysisViewDestroy=Mr(()=>this.view,"analysis-view-destroy"),this.arcgisViewChange=to(),this.arcgisViewClick=Mr(()=>this.view,"click"),this.arcgisViewDoubleClick=Mr(()=>this.view,"double-click"),this.arcgisViewDrag=Mr(()=>this.view,"drag"),this.arcgisViewHold=Mr(()=>this.view,"hold"),this.arcgisViewImmediateClick=Mr(()=>this.view,"immediate-click"),this.arcgisViewImmediateDoubleClick=Mr(()=>this.view,"immediate-double-click"),this.arcgisViewKeyDown=Mr(()=>this.view,"key-down"),this.arcgisViewKeyUp=Mr(()=>this.view,"key-up"),this.arcgisViewLayerviewCreate=Mr(()=>this.view,"layerview-create"),this.arcgisViewLayerviewCreateError=Mr(()=>this.view,"layerview-create-error"),this.arcgisViewLayerviewDestroy=Mr(()=>this.view,"layerview-destroy"),this.arcgisViewMouseWheel=Mr(()=>this.view,"mouse-wheel"),this.arcgisViewPointerDown=Mr(()=>this.view,"pointer-down"),this.arcgisViewPointerEnter=Mr(()=>this.view,"pointer-enter"),this.arcgisViewPointerLeave=Mr(()=>this.view,"pointer-leave"),this.arcgisViewPointerMove=Mr(()=>this.view,"pointer-move"),this.arcgisViewPointerUp=Mr(()=>this.view,"pointer-up"),this.arcgisViewReadyChange=to(),this.view.ui={components:["attribution"]}}get aria(){return this.view?.aria}set aria(e){this.view&&(this.view.aria=e)}get center(){return this.view.center}set center(e){const i=G8e(e,this.view);i&&(this.view.center=i)}get extent(){return this.view.extent}set extent(e){e&&!this.extent?.equals(e)&&(this.view.extent=e)}get focusAreas(){return this.map?this.map.focusAreas:{areas:[],style:"bright"}}set focusAreas(e){this.map&&(this.map.focusAreas=e)}get gamepad(){return this.view.input.gamepad}get interacting(){return this.view.interacting}get itemId(){return this._map.portalItem?.id}set itemId(e){R8e(this._map,this),this._map.portalItem={id:e},this.view.map=this._map}get navigating(){return this.view.navigating}get scale(){return this.view.scale}set scale(e){this.view.scale=e}get stationary(){return this.view.stationary}get viewpoint(){return this.view.viewpoint}set viewpoint(e){q8e(this.viewpoint,e)&&(this.view.viewpoint=e)}get zoom(){return this.view.zoom}set zoom(e){this.view.zoom=e}async addLayer(e,i){this.map?.add(e,i)}async addLayers(e,i){this.map?.addMany(e,i)}async addTable(e){this.map?.tables.add(e)}async addTables(e,i){this.map?.tables.addMany(e,i)}async closePopup(){this._uiController.closePopup()}async destroy(){await this.manager.destroy()}async goTo(e,i){return await this.view.goTo(e,i)}async hitTest(e,i){return await this.view.hitTest(e,i)}async openPopup(e){this._uiController.openPopup(e)}async takeScreenshot(e){return await this.view.takeScreenshot(e)}toMap(e){return this.view.toMap(e)}toScreen(e,i){return this.view.toScreen(e,i)}async tryFatalErrorRecovery(){this.view.tryFatalErrorRecovery()}async viewOnReady(e,i){return await this.componentOnReady(),await this.view.whenReady().then(()=>e?.()).catch(i)}async whenAnalysisView(e){return await this.view.whenAnalysisView(e)}async whenLayerView(e){return await this.view?.whenLayerView(e)}loaded(){const e=this;e.el.childElem=this._mapRef.value,this.view.container??=e.el.childElem,this.map||=this._map,this.manager.onLifecycle(()=>[be(()=>this.map,i=>{i&&(this._map=i)},{initial:!0,sync:!0}),be(()=>this.view.stationary,()=>this.arcgisViewChange.emit(),{initial:!0}),be(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})])}renderMain(){return ar`<div class=${kt(zi.base)} ${Nb(this._mapRef)}></div>`}render(){return ar`<section class=${kt(zi.containerUI)} ${Nb(this._containerRef)}>${this._uiController.render()}${this.extraContent}</section>${this.renderMain()}`}},Ty.properties={_map:16,view:32,animationsDisabled:5,aria:0,allLayerViews:0,analyses:0,autoDestroyDisabled:5,background:0,basemap:1,basemapView:0,center:1,constraints:0,displayFilterDisabled:5,extent:0,fatalError:0,floors:0,focusAreas:0,gamepad:32,graphics:0,ground:1,highlights:0,highlightOptions:0,interacting:32,ipsInfo:0,itemId:3,layerViews:0,magnifier:0,map:0,navigating:32,navigation:0,padding:0,popup:0,popupDisabled:5,ready:4,resizeAlign:1,resolution:8,rotation:9,scale:9,spatialReference:0,spatialReferenceLocked:5,stationary:32,suspended:7,theme:0,timeExtent:0,timeZone:1,updating:4,viewpoint:0,visibleArea:0,zoom:9,loadErrorSources:0},Ty.styles=[P8e,N8e],Ty);mX("arcgis-map",Q8e);function qa(t){let e,i,r=[],n=!1;function s(...o){return n&&e===this&&X8e(o,r)||(i=t.apply(this,o),e=this,r=o,n=!0),i}return s}function X8e(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}const on="esri-elevation-profile",Ar={base:`${on}`,refined:`${on}--refined`,mainContainer:`${on}__main-container`,promptContainer:`${on}__prompt-container`,header:`${on}__header`,zoomOutButton:`${on}__zoom-out-button`,clearButton:`${on}__clear-button`,actionButton:`${on}__action-button`,sketchButton:`${on}__sketch-button`,sketchCancelButton:`${on}__sketch-cancel-button`,sketchDoneButton:`${on}__sketch-done-button`,selectButton:`${on}__select-button`,selectCancelButton:`${on}__select-cancel-button`,chartContainer:`${on}__chart-container`,chartSpinner:`${on}__chart-spinner`,chartSpinnerVisible:`${on}__chart-spinner--visible`,chartSpinnerSmall:`${on}__chart-spinner--small`,footer:`${on}__footer`},K8e={base:"esri-elevation-profile-legend"},Vc="esri-elevation-profile-legend-item",Uc={base:Vc,disabled:`${Vc}--disabled`,expanded:`${Vc}--expanded`,colorIndicator:`${Vc}__color-indicator`,header:`${Vc}__header`,content:`${Vc}__content`,collapseToggle:`${Vc}__collapse-toggle`,label:`${Vc}__label`,checkbox:`${Vc}__checkbox`},m1="esri-elevation-profile-statistics",y1={base:m1,statistic:`${m1}__statistic`,statisticLabel:`${m1}__statistic__label`,statisticValue:`${m1}__statistic__value`,slopeValue:`${m1}__slope-value`},_E="esri-elevation-profile-settings",SE={base:`${_E}`,popoverContent:`${_E}__popover-content`,uniformChartScalingLabel:`${_E}__uniform-scaling-label`,uniformChartScalingCheckbox:`${_E}__uniform-scaling-checkbox`};let eVe=class{constructor(e){this._store=e}destroy(){this._store.destroy()}get(e){return this._store.get(e)}put(e,i){this._store.put(e,i)}};function tVe(t){const e="metric";if(t==null)return e;const i=t.map,r=(i&&"portalItem"in i?i.portalItem?.portal:null)??de.getDefault();switch(r.user?.units??r.units){case e:return e;case"english":return"imperial"}return Cwe(t.spatialReference)??e}const iVe={readOnly:!0,get(){return tVe(this.view)}};function Wue(t,e,i,r){let n=null,s=1e3;typeof e=="number"?(s=e,r=i):(n=e??null,s=i);const o=My(0);let u;const d=()=>{o.value=0,t.apply(r,u)},h=(...m)=>{n&&n.apply(r,m),u=m,s?o.value||(o.value=setTimeout(d,s)):d()};return h.remove=()=>{o.value&&(clearTimeout(o.value),o.value=0)},h.forceUpdate=()=>{o.value&&(clearTimeout(o.value),d())},h.hasPendingUpdates=()=>!!o.value,h}function Zue(t){return t?Hy:pVe}function rVe(t,e){return e?.mode?e.mode:Zue(t).mode}function nVe(t,e){return e??Zue(t)}function Jue(t,e){return rVe(t==null||(t.hasZ??!1),e)}function Xnt(t,e){return nVe(t==null||(t.hasZ??!1),e)}function Knt(t){const e=Que(t);return Jue(t.geometry,e)}function w8(t){const e=Que(t),i=Jue(t.geometry,e),r=e!=null&&i!=="on-the-ground"?dVe(e):0,n=e?.featureExpressionInfo;return{mode:i,offset:r,featureExpressionInfo:n}}function sVe(t){return Yue(w8(t))}function est(t){return Yue(t)||oVe(t)}function oVe(t){return t?.featureExpressionInfo?.expression==="0"}function Yue(t){if(!t||t.mode==="on-the-ground")return!1;const e=t?.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!e||e==="0")}function Que(t){return t.layer&&"elevationInfo"in t.layer?t.layer.elevationInfo:null}const aVe=qa((t,e,i)=>{if(!t||e==="decimal-degrees")return 0;const r=e!=="unknown"&&e?e:"meters",n=fee(i);return n?rt(t,r,n):0});function zk(t,e){return aVe(t?.offset,t?.unit,e)}function tst(t,e,i){if(!i?.mode)return;const r=t.hasZ?t.z:0,n=zk(i,t.spatialReference);switch(i.mode){case"absolute-height":return r-n;case"on-the-ground":return 0;case"relative-to-ground":return r-((e.elevationProvider.getElevation(t.x,t.y,r,t.spatialReference,"ground")??0)+n);case"relative-to-scene":return r-((e.elevationProvider.getElevation(t.x,t.y,r,t.spatialReference,"scene")??0)+n)}}function lVe(t,e,i,r=null){return _8(t,e.x,e.y,e.hasZ?e.z:0,e.spatialReference,i,r)}function Xue(t,e,i,r,n=null){return _8(t,e[0],e[1],e.length>2?e[2]:0,i,r,n)}function _8(t,e,i,r,n,s,o=null){if(s==null)return;const u=o!=null?o.mode:"absolute-height";if(u==="on-the-ground")return 0;const{absoluteZ:d}=uVe(e,i,r,n,t,s);return cVe(d,e,i,r,n,t,o,u)}function uVe(t,e,i,r,n,s){const o=zk(s,r);switch(s.mode){case"absolute-height":return{absoluteZ:i+o,elevation:0};case"on-the-ground":{const u=n.elevationProvider.getElevation(t,e,0,r,"ground")??0;return{absoluteZ:u,elevation:u}}case"relative-to-ground":{const u=n.elevationProvider.getElevation(t,e,i,r,"ground")??0;return{absoluteZ:i+u+o,elevation:u}}case"relative-to-scene":{const u=n.elevationProvider.getElevation(t,e,i,r,"scene")??0;return{absoluteZ:i+u+o,elevation:u}}}}function cVe(t,e,i,r,n,s,o,u){const d=zk(o,n);switch(u){case"absolute-height":return t-d;case"relative-to-ground":return t-((s.elevationProvider.getElevation(e,i,r,n,"ground")??0)+d);case"relative-to-scene":return t-((s.elevationProvider.getElevation(e,i,r,n,"scene")??0)+d)}}function ist(t,e){if(e==null)return!1;const{mode:i}=e;return i!=null&&(t==="scene"&&i==="relative-to-scene"||t==="ground"&&i!=="absolute-height")}function rst(t,e,i){return i&&i.mode!==e?`${t} only support ${e} elevation mode`:null}function nst(t,e,i){return i?.mode===e?`${t} do not support ${e} elevation mode`:null}function sst(t,e){return e?.featureExpressionInfo!=null&&e.featureExpressionInfo.expression!=="0"?`${t} do not support featureExpressionInfo`:null}function ost(t,e){e&&t.warn(".elevationInfo=",e)}function dVe(t){return(t?.offset??0)*qLe(t?.unit)}const Hy={mode:"absolute-height",offset:0},pVe={mode:"on-the-ground",offset:null};let Kue={noDataValue:-5e5,defaultQueryOptions:()=>({noDataValue:Kue.noDataValue,demResolution:"auto",maximumAutoTileRequests:150,ignoreInvisibleLayers:!0}),updateThrottleMillis:100,delayAfterPreviewMillis:500,defaultDemResolution:rt(10,"centimeters","meters"),densificationMaxSamples:3e3,largeChartSamples:1e4,maxTotalSamples:1e5,maxChartRatio:300,minSlopeSampleDistance:10,formatPrecision:1,profileLinesStyle3D:{width:3,falloff:0,innerWidth:0,innerColor:hn(0,0,0,0),renderOccluded:16},profileLinesUpdateThrottleMillis:100,hoveredPointsStyle:{size:14,borderStyle:"solid",borderWidth:3,borderColor:"#ffffff",boxShadow:"0px 0px 0px 5px rgba(255,255,255,0.2)"}};function Xl(){return Kue}const hVe="  ",fVe={progress:1,hasZ:!1,samples:[],statistics:null,spatialReference:null};function ece(t){if(!t)return null;const e=t.wkid;if(e)return e$e[e];const i=t.wkt2??t.wkt;return i?mVe(i):null}function mVe(t){const e=Xxe.exec(t);if(!e||e.length!==2)return null;const i=e[1].split(",");if(!i||i.length<3)return null;const r=parseFloat(i[1]),n=parseFloat(i[2]);return isNaN(r)||isNaN(n)?null:{a:r,f:n===0?0:1/n}}function Fk(t){const e=ece(t);if(yVe(e))return e;const i=e.a*(1-e.f);return Object.assign(e,{b:i,eSq:1-(i/e.a)**2,radius:(2*e.a+i)/3,densificationRatio:1e4/((2*e.a+i)/3)})}function yVe(t){return t!=null&&"b"in t&&"eSq"in t&&"radius"in t}function xE(t,e,i){const{a:r,eSq:n}=Fk(i),s=Math.sqrt(n),o=Math.sin(e[1]*bs),u=r*e[0]*bs;let d;return n>0?d=r*((1-n)*(o/(1-n*(o*o))-1/(2*s)*Math.log((1-s*o)/(1+s*o))))*.5:d=r*o,t[0]=u,t[1]=d,t}function rg(t){return Jy(t)&&!!ece(t)}function gVe(t,e="square-meters"){if(t.some(o=>!rg(o.spatialReference)))throw new L("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let o=0;o<t.length;o++){const u=t[o],d=u.spatialReference,{radius:h,densificationRatio:m}=Fk(d),v=h*m;i.push(vVe(u,v))}const r=[],n=[0,0],s=[0,0];for(let o=0;o<i.length;o++){const{rings:u,spatialReference:d}=i[o];let h=0;for(let m=0;m<u.length;m++){const v=u[m];xE(n,v[0],d),xE(s,v[v.length-1],d);let b=s[0]*n[1]-n[0]*s[1];for(let _=0;_<v.length-1;_++)xE(n,v[_+1],d),xE(s,v[_],d),b+=s[0]*n[1]-n[0]*s[1];h+=b}h=rt(h,"square-meters",e),r.push(h/-2)}return r}function tce(t,e="meters"){if(!t)throw new L("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(t.some(r=>!rg(r.spatialReference)))throw new L("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let r=0;r<t.length;r++){const n=t[r],{spatialReference:s}=n,o=n.type==="polyline"?n.paths:n.rings;let u=0;for(let d=0;d<o.length;d++){const h=o[d];let m=0;for(let v=1;v<h.length;v++){const b=h[v-1][0],_=h[v][0],x=h[v-1][1],$=h[v][1];if(x!==$||b!==_){const E=new Ox;Uw(E,[b,x],[_,$],s),m+=E.distance}}u+=m}u=rt(u,"meters",e),i.push(u)}return i}function vVe(t,e){if(t.type!=="polyline"&&t.type!=="polygon")throw new L("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:i}=t;if(!rg(i))throw new L("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const r=t.type==="polyline"?t.paths:t.rings,n=[],s=[0,0],o=new Ox;for(const d of r){const h=[];n.push(h),h.push([d[0][0],d[0][1]]);let m,v,b=d[0][0],_=d[0][1];for(let x=0;x<d.length-1;x++){if(m=d[x+1][0],v=d[x+1][1],b===m&&_===v)continue;const $=[b,_];Uw(o,[b,_],[m,v],i);const{azimuth:E,distance:A}=o,O=A/e;if(O>1){for(let D=1;D<=O-1;D++)Xh(s,$,E,D*e,i),h.push(s.slice());Xh(s,$,E,(A+Math.floor(O-1)*e)/2,i),h.push(s.slice())}Xh(s,$,E,A,i),h.push(s.slice()),b=s[0],_=s[1]}}const u=bw(we,i);return t.type==="polyline"?new Kt({paths:n,spatialReference:u}):new hi({rings:n,spatialReference:u})}let Ox=class{constructor(e=0,i=void 0,r=void 0){this.distance=e,this.azimuth=i,this.reverseAzimuth=r}};function Xh(t,e,i,r,n){const s=e[0],o=e[1],u=s*bs,d=o*bs,h=(i??0)*bs,{a:m,b:v,f:b}=Fk(n),_=Math.sin(h),x=Math.cos(h),$=(1-b)*Math.tan(d),E=1/Math.sqrt(1+$*$),A=$*E,O=Math.atan2($,x),D=E*_,R=D*D,P=1-R,j=P*(m*m-v*v)/(v*v),Q=1+j/16384*(4096+j*(j*(320-175*j)-768)),re=j/1024*(256+j*(j*(74-47*j)-128));let ce,ue,ye,he=r/(v*Q),Pe=2*Math.PI;for(;Math.abs(he-Pe)>1e-12;)ye=Math.cos(2*O+he),ce=Math.sin(he),ue=Math.cos(he),Pe=he,he=r/(v*Q)+re*ce*(ye+re/4*(ue*(2*ye*ye-1)-re/6*ye*(4*ce*ce-3)*(4*ye*ye-3)));const ve=A*ce-E*ue*x,We=Math.atan2(A*ue+E*ce*x,(1-b)*Math.sqrt(R+ve*ve)),ee=b/16*P*(4+b*(4-3*P)),ge=Math.atan2(ce*_,E*ue-A*ce*x)-(1-ee)*b*D*(he+ee*ce*(ye+ee*ue*(2*ye*ye-1)));return t[0]=(u+ge)/bs,t[1]=We/bs,t}function Uw(t,e,i,r){const n=e[0]*bs,s=e[1]*bs,o=i[0]*bs,u=i[1]*bs,{a:d,b:h,f:m,radius:v}=Fk(r),b=o-n,_=Math.atan((1-m)*Math.tan(s)),x=Math.atan((1-m)*Math.tan(u)),$=Math.sin(_),E=Math.cos(_),A=Math.sin(x),O=Math.cos(x);let D,R,P,j,Q,re,ce,ue,ye,he,Pe=1e3,ve=b;do{if(ce=Math.sin(ve),ue=Math.cos(ve),P=Math.sqrt(O*ce*(O*ce)+(E*A-$*O*ue)*(E*A-$*O*ue)),P===0)return t.distance=0,t.azimuth=void 0,t.reverseAzimuth=void 0,t;Q=$*A+E*O*ue,re=Math.atan2(P,Q),ye=E*O*ce/P,R=1-ye*ye,j=Q-2*$*A/R,isNaN(j)&&(j=0),he=m/16*R*(4+m*(4-3*R)),D=ve,ve=b+(1-he)*m*ye*(re+he*P*(j+he*Q*(2*j*j-1)))}while(Math.abs(ve-D)>1e-12&&--Pe>0);if(Pe===0){const zt=v,U=Math.acos(Math.sin(s)*Math.sin(u)+Math.cos(s)*Math.cos(u)*Math.cos(o-n))*zt,ae=o-n,$e=Math.sin(ae)*Math.cos(u),Ce=Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(ae),Ke=Math.atan2($e,Ce);return t.azimuth=Ke/bs,t.distance=U,t.reverseAzimuth=void 0,t}const We=R*(d*d-h*h)/(h*h),ee=We/1024*(256+We*(We*(74-47*We)-128)),ge=h*(1+We/16384*(4096+We*(We*(320-175*We)-768)))*(re-ee*P*(j+ee/4*(Q*(2*j*j-1)-ee/6*j*(4*P*P-3)*(4*j*j-3)))),Se=Math.atan2(O*Math.sin(ve),E*A-$*O*Math.cos(ve)),nt=Math.atan2(E*Math.sin(ve),E*A*Math.cos(ve)-$*O);return t.azimuth=Se/bs,t.distance=ge,t.reverseAzimuth=nt/bs,t}function lst(t){return rg(t)?t:Yo(t)?we.WGS84:null}const ice="ProfileGenerationError";let ib=class extends Error{constructor(e){super("profile could not be generated",{cause:e}),this.type=ice}};function bVe(t){return t.type===ice}async function wVe(t,e,i,r,n,s,o){let u,d,h;const m=t.spatialReference,v=m.isGeographic||m.isWebMercator;let b=0;if(!v){const{execute:x}=await H(()=>import("./lengthOperator-f9uBP5sQ.js").then($=>$.l),__vite__mapDeps([301,264,267,266,268,83,269,271,270]));ft(o),b=x(t,{unit:"meters"}),ft(o)}const _=1/Kr(r);if(v){await ff([{source:m,dest:r},{source:m,dest:we.WGS84}],o);const x=OVe(t);u=tce([x],"meters")[0];const $=UJ(u,n);if(BJ(t,u,$)>s)throw new ib("too-complex");const E=qJ(x,e,i);({densifiedPath:d,distances:h}=$Ve(E,$,_)),d=Is(d,r)}else{await ff([{source:m,dest:r}],o),u=b;const x=UJ(u,n);if(BJ(t,u,x)>s)throw new ib("too-complex");const $=qJ(t,e,i);({densifiedPath:d,distances:h}=xVe($,x,_)),ft(o),d=Is(d,r)}return{densifiedPath:d,pathLength:u*_,distances:h}}function UJ(t,e){const i=t/e.densificationMaxSamples;return Math.max(e.samplingDistance,i)}function qJ(t,e,i){if(e==null)return GJ(t);const r=t.spatialReference,n=e.mode,s=zk(e,r);let o=null;switch(i.type){case"2d":o=_Ve(t,n,s);break;case"3d":o=SVe(t,n,s,i)}return o==null?GJ(t):new Kt({hasZ:!0,hasM:!1,spatialReference:r,paths:rce(t.paths,o)})}function _Ve({hasZ:t},e,i){return e==="absolute-height"?t?([r,n,s])=>[r,n,s+i]:([r,n])=>[r,n,i]:null}function SVe({spatialReference:t,hasZ:e},i,r,{elevationProvider:n}){const s=(o,u,d,h)=>n?.getElevation(o,u,d,t,h)??0;switch(i){case"on-the-ground":return([o,u])=>[o,u,s(o,u,0,"ground")];case"absolute-height":return e?([o,u,d])=>[o,u,d+r]:([o,u])=>[o,u,r];case"relative-to-ground":return e?([o,u,d])=>[o,u,d+s(o,u,d,"ground")+r]:([o,u])=>[o,u,s(o,u,0,"ground")+r];case"relative-to-scene":return e?([o,u,d])=>[o,u,d+s(o,u,d,"scene")+r]:([o,u])=>[o,u,s(o,u,0,"scene")+r];default:return null}}function GJ(t){return t.hasZ?new Kt({hasZ:!1,hasM:!1,spatialReference:t.spatialReference,paths:rce(t.paths,([e,i])=>[e,i])}):t}function rce(t,e){const i=t.length,r=new Array(i);for(let n=0;n<i;++n){const s=t[n],o=s.length,u=new Array(s.length);r[n]=u;for(let d=0;d<o;++d)u[d]=e(s[d])}return r}function S8(t){return Cx(t)&&t.paths.length>0&&t.paths.every(e=>e.length>=2)}function Cx(t){return t!=null&&t.type==="polyline"}function nce(t,e,i,r,n){const{spatialReference:s,hasZ:o}=t,u={from:null,to:null,distance:0,azimuth:0,reverseAzimuth:0,spatialReference:s,metersPerSR:Kr(s)},d=[],h=[];let m=0;for(let v=0;v<t.paths.length;++v){const b=t.paths[v],_=new Array,x=new Array;let $=0;for(let E=1;E<b.length;++E){const A=b[E-1],O=b[E],D=r(u,A,O);let R;for(R=$;R<D.distance&&!k0e(R,D.distance);R+=e)_.push(n(D,R)),x.push((m+R)*i);$=R-D.distance,m+=D.distance,_.push(O),x.push(m*i)}d[v]=_,h[v]=x}return{densifiedPath:new Kt({spatialReference:s,hasZ:o,paths:d}),distances:h}}function xVe(t,e,i){const{hasZ:r}=t;return nce(t,e,i,EVe,r?kVe:IVe)}function $Ve(t,e,i){const{hasZ:r}=t;return nce(t,e,i,TVe,r?AVe:MVe)}function TVe(t,e,i){return t.distance=0,Uw(t,e,i,t.spatialReference),t.from=e,t.to=i,t}function EVe(t,e,i){return t.from=e,t.to=i,t.distance=Aw(i,e)*t.metersPerSR,t}function MVe({from:t,azimuth:e,spatialReference:i},r){return Xh([0,0],t,e,r,i)}function AVe({from:t,to:e,azimuth:i,distance:r,spatialReference:n},s){const o=s/r,u=[0,0,Vl(t[2],e[2],o)];return Xh(u,t,i,s,n),u}function IVe({from:t,to:e,distance:i},r){return M6([0,0],t,e,r/i)}function kVe({from:t,to:e,distance:i},r){return Mx([0,0,0],t,e,r/i)}function OVe(t){return rg(t.spatialReference)?t:Is(t,we.WGS84)}function sce(t){return t.paths.reduce((e,i)=>e+i.length,0)}function BJ(t,e,i){return sce(t)+Math.floor(e/i)+Math.max(0,t.paths.reduce(r=>1+r,0)-1)}function CVe(t,e){const i=t.length;if(i===0)return null;const r=t[0],n=r.sampledZ;let s=n,o=n,u=0,d=0,h=null,m=null,v=n??0,b=0,_=0,x=n!=null?1:0,$=0,E=0;const A=Kr(e),O=Kl(e),D=Xl().minSlopeSampleDistance/A,R=2*D,P=new HJ,j=new HJ,Q=()=>{ce(),P.copy(j),j.reset()},re=(ue,ye)=>{Q(),ue>0&&ue-P.start<=R&&(ue=P.start+D),j.restart(ue,ye)},ce=()=>{if(P.isHole||j.isHole)return;const ue=j.avgElevation-P.avgElevation,ye=j.start-P.start,he=ue*O,Pe=ye*A,ve=rt(Math.atan2(he,Pe),"radians","degrees");ve>0?(b+=ve,h=Bd(h,ve),$++):ve<0&&(_-=ve,m=Bd(m,-ve),E++)};r.sampledZ!=null&&re(r.distance,r.sampledZ);for(let ue=1;ue<i;++ue){const ye=t[ue-1],he=t[ue],Pe=he.sampledZ;if(Pe==null){j.isHole||Q();continue}x++,v+=Pe,s=x8(s,Pe),o=Bd(o,Pe),j.isHole||he.distance-j.start>=D?re(he.distance,Pe):j.insert(Pe);const ve=ye.sampledZ;if(ve!=null){const We=Pe-ve;We>0?u+=We:We<0&&(d-=We)}}return Q(),x===0?null:{maxDistance:t[i-1].distance,minElevation:s,maxElevation:o,avgElevation:x===0?null:v/x,elevationGain:u,elevationLoss:d,maxPositiveSlope:h,maxNegativeSlope:m,avgPositiveSlope:$===0?null:b/$,avgNegativeSlope:E===0?null:_/E}}function RVe(t){const e=t.filter(is),i=e.length;if(i===0)return null;const r=e[0];if(i===1)return r;let n=r.maxDistance,s=r.minElevation,o=r.maxElevation,u=r.maxPositiveSlope,d=r.maxNegativeSlope;for(let h=1;h<e.length;++h){const m=e[h];n=Bd(n,m.maxDistance),s=x8(s,m.minElevation),o=Bd(o,m.maxElevation),u=Bd(u,m.maxPositiveSlope),d=Bd(d,m.maxNegativeSlope)}return{maxDistance:n,minElevation:s,maxElevation:o,avgElevation:null,elevationGain:null,elevationLoss:null,maxPositiveSlope:u,maxNegativeSlope:d,avgPositiveSlope:null,avgNegativeSlope:null}}function PVe(t){let e=null,i=null,r=null;for(const n of t){if(n==null)continue;const{statistics:s,spatialReference:o}=n;if(s==null)continue;const u=Kr(o);e=Bd(e,bP(s.maxDistance,u));const d=Kl(o);r=x8(r,bP(s.minElevation,d)),i=Bd(i,bP(s.maxElevation,d))}return{minDistance:0,maxDistance:e??0,minElevation:r??0,maxElevation:i??0}}function x8(t,e){return e==null?t:t!=null?Math.min(t,e):e}function Bd(t,e){return e==null?t:t!=null?Math.max(t,e):e}function bP(t,e){return t!=null&&e!=null?t*e:null}let HJ=class{constructor(){this._start=0,this._totalElevation=0,this._sampleCount=0}get avgElevation(){return this._totalElevation/this._sampleCount}get isHole(){return this._sampleCount===0}get start(){return this._start}copy(e){this._start=e._start,this._sampleCount=e._sampleCount,this._totalElevation=e._totalElevation}reset(){this._start=0,this._sampleCount=0,this._totalElevation=0}restart(e,i){this._start=e,this._sampleCount=1,this._totalElevation=i}insert(e){++this._sampleCount,this._totalElevation+=e}};function DVe(t,e,i=[]){if(t>=e||(i.push(t),e-t<2))return i;const r=e-1;i.push(r);const n=qj(t+1,r);for(;;){const s=n.next();if(s.done)break;i.push(s.value)}return i}function*qj(t,e){if(t>=e)return;const i=t+Math.floor((e-t)/2);yield i;const r=qj(t,i),n=qj(i+1,e);for(;;){const s=r.next(),o=n.next();if(s.done&&o.done)break;s.done||(yield s.value),o.done||(yield o.value)}}async function*NVe(t,e){const{view:i,geometry:r,elevationInfo:n,providers:s,options:o}=t,u=i.spatialReference;if(!u||r==null||!S8(r))throw new ib("invalid-geometry");const d=s.length;if(d===0)return null;const h=Math.round(o.maxTotalSamples/d);if(sce(r)>h)throw new ib("too-complex");const m=await wVe(r,n,i,u,o,h,e);let v=0;const b=new Array(d),_=new Array(d);for(let E=0;E<d;E++){const A=UVe(m);b[E]=A,v+=A.samples.length;const O={...t,provider:s[E],result:A,densificationResult:m};_[E]=LVe(O,e)[Symbol.iterator]()}if(v>o.maxTotalSamples)throw new ib("too-complex");const x=await Promise.all(_.map(E=>{const A=E.next();return A.done===!0?Promise.resolve(null):A.value}));ft(e);for(let E=0;E<d;E++)b[E]=x[E];yield b,await zz(t.delayAfterPreview??Xl().delayAfterPreviewMillis,null,e.signal);const $=[];try{let E;do{E=!1;for(let A=0;A<d;A++){const O=_[A].next();O.done===!1&&($.push({resultPromise:O.value,index:A}),E=!0)}}while(E)}finally{_.forEach(E=>E.return?.())}for(const{resultPromise:E,index:A}of $)b[A]=await E,ft(e),yield b;for(const E of b)E!=null&&(E.progress=1);yield b}function*LVe(t,e){const{densificationResult:i}=t,r={...t,abortOptions:e,densificationResult:i},n=DVe(0,r.result.samples.length),s=n.slice(0,r.provider.numSamplesForPreview);yield WJ(r,s,!0);const o=dge(n,r.provider.numSamplesPerChunk);for(const u of o)yield WJ(r,u,!1)}async function WJ({densificationResult:t,result:e,provider:i,queue:r,abortOptions:n,cache:s},o,u){const{densifiedPath:d,pathLength:h}=t,m=e.spatialReference,{samples:v}=e,b=[];for(let _=0;_<o.length;_++){const x=v[o[_]];b[_]=[...x.coordinate]}try{return await r.push({geometry:new Jn({spatialReference:m,points:b,hasZ:d.hasZ}),provider:i,indices:o,preview:u,result:e,queryOptions:{...Xl().defaultQueryOptions(),minDemResolution:Math.round(u?h/i.numSamplesForPreview:h/v.length),cache:s}},n),{...e}}catch(_){return Yr(_)?null:fVe}}function jVe(t){return new Qoe({priority:et.ELEVATION_PROFILE,concurrency:1,scheduler:t,process:async e=>{ft(e.queryOptions);try{await zVe(e)}catch(i){eD(i)}}})}async function zVe({geometry:t,provider:e,indices:i,preview:r,result:n,queryOptions:s}){if(i.length===0)return;const o=(await BVe(e,t,s)).geometry,{hasZ:u,points:d}=o,h=s.noDataValue,{samples:m}=n;for(let v=0;v<i.length;v++){const b=m[i[v]];if(b.isHole)continue;const _=u?d[v][2]:null;_===null||_===h?b.sampledZ=null:(n.hasZ=!0,b.sampledZ=_),b.sampled=!0}FVe(m),n.progress=r?0:n.progress+i.length/m.length,n.statistics=CVe(n.samples,n.spatialReference)}function FVe(t){const e=t.length-1;let i=0;for(let r=1;r<=e;r++)(t[r].sampled||r===e)&&(VVe(t,i,r),i=r)}function VVe(t,e,i){if(i-e===1)return;const r=t[e],n=r.sampledZ,s=t[i],o=s.sampledZ;if(n==null||o==null){for(let h=e+1;h<i;h++)t[h].sampledZ=null;return}const u=r.distance,d=s.distance-u;for(let h=e+1;h<i;h++){const m=t[h],v=(m.distance-u)/d;m.sampledZ=Vl(n,o,v)}}function UVe({densifiedPath:t,distances:e}){const i=t.spatialReference,r=es(i),n=t.paths,s=n.length,o=[];let u=null,d=0;for(let h=0;h<s;h++){const m=n[h],v=m.length,b=e[h];for(let _=0;_<v;_++){const x=m[_],$=b[_];r&&(x[0]=ote(x[0],r.valid[0],r.valid[1])),u&&_===0&&qVe(o,u,x,d,$),o.push(GVe(x,$)),u=x,d=$}}return{progress:0,samples:o,hasZ:!1,statistics:null,spatialReference:i}}function qVe(t,e,i,r,n){t.push(ZJ(e,r)),t.push(ZJ(i,n))}function GVe(t,e){return{coordinate:t,distance:e,sampledZ:null,sampled:!1,isHole:!1}}function ZJ(t,e){return{coordinate:t,distance:e,sampledZ:null,sampled:!0,isHole:!0}}async function BVe(t,e,i){try{return await t.queryElevation(e,i)}catch{throw new ib("elevation-query-error")}}function HVe(t,e,i){if(!t||t.length===0)return;const r=t.length-1,n=t[0];if(e<=i(n))return n;const s=t[r];if(e>=i(s))return s;let o=0,u=0,d=r;for(;o<d;){u=o+Math.floor((d-o)/2);const h=t[u],m=i(h);if(m===e)return h;if(e<m){if(u>0){const v=t[u-1],b=i(v);if(e>b)return e-b>=m-e?h:v}d=u}else{if(u<r){const v=t[u+1],b=i(v);if(e<b)return e-m>=b-e?v:h}o=u+1}}return t[u]}const JJ=Symbol("line-change");let gh=class extends _e{constructor(e){super(e),this._updateTask=null,this._paramsPerProfile=new Map,this._getUpdateParametersMemoized=qa((i,r,n)=>({stationary:i,visibleProfiles:r,generationParameters:n})),this._getGenerationParametersMemoized=qa((i,r,n,s,o,u,d)=>Cx(r)&&S8(r)&&s!=null?{view:i,geometry:r,elevationInfo:n,options:u,queue:s,cache:o,slicePlane:d}:null),this._getElevationInfoMemoized=qa((i,r)=>({mode:i,offset:r})),this._getOptionsMemoized=qa((i,r)=>{const{densificationMaxSamples:n,maxTotalSamples:s}=Xl();return{samplingDistance:i,densificationMaxSamples:Math.round(n/r),maxTotalSamples:s}}),this._updateThrottled=Wue(i=>this._update(i),Xl().updateThrottleMillis)}initialize(){const e=this.viewModel;this.addHandles([be(()=>({visible:e.visible,profiles:e.profiles.toArray()}),({visible:i,profiles:r})=>{this._abortUpdate(),this._paramsPerProfile.clear(),this.removeHandles(JJ),i&&r.length!==0&&this.addHandles([...r.map(n=>uo([n.attach(this.viewModel),n.on("change",()=>{this._invalidateProfile(n)})])),be(()=>this._updateParameters,this._updateThrottled,Gt),this._updateThrottled],JJ)},Gt)])}destroy(){this._paramsPerProfile.clear()}get _updateParameters(){const{viewModel:e}=this,i=e.view;return this._getUpdateParametersMemoized(i==null||i.stationary,this.viewModel.visibleProfiles,this._generationParameters)}get _generationParameters(){const{view:e,input:i,queue:r,tileCache:n}=this.viewModel;return e!=null&&e.ready?this._getGenerationParametersMemoized(e,i?.geometry,this._elevationInfo,r,n,this._options,e.type==="3d"?e.slice.plane:null):null}get _elevationInfo(){const e=this.viewModel.input,i=e?sVe(e)?null:w8(e):null;return i!=null?this._getElevationInfoMemoized(i.mode,i.offset):null}get _options(){const e=this.viewModel,i=e.visibleProfiles.length;let r=e.minDemResolution??Xl().defaultDemResolution;return r=parseFloat(r.toFixed(2)),this._getOptionsMemoized(r,i)}_update({stationary:e,visibleProfiles:i,generationParameters:r}){this._abortUpdate(),e&&(r!=null?this._updateTask=dc(async n=>{this.viewModel.error=null;const s=i.filter(u=>!this._isProfileValid(u,r)),o=NVe({...r,providers:s},{signal:n});try{for await(const u of o){ft(n),this._clearInvalidResults(r);for(let d=0;d<s.length;d++)s[d].result=u[d]}for(const u of s)this._paramsPerProfile.set(u,r)}catch(u){Dl(u),this._abortUpdate(),this.viewModel.error=u,s.forEach(d=>{d.result=null})}}):this._clearResults())}_abortUpdate(){this._updateTask=Cn(this._updateTask)}_isProfileValid(e,i){return this._paramsPerProfile.has(e)&&this._paramsPerProfile.get(e)===i}_invalidateProfile(e){this._paramsPerProfile.delete(e),this._updateThrottled(this._updateParameters)}_clearInvalidResults(e){for(const i of this.viewModel.profiles.items)this._isProfileValid(i,e)||(i.result=null,this._paramsPerProfile.delete(i))}_clearResults(){for(const e of this.viewModel.profiles.items)e.result=null,this._paramsPerProfile.delete(e)}};l([p({nonNullable:!0})],gh.prototype,"viewModel",void 0),l([p()],gh.prototype,"_updateParameters",null),l([p()],gh.prototype,"_generationParameters",null),l([p()],gh.prototype,"_elevationInfo",null),l([p()],gh.prototype,"_options",null),gh=l([M("esri.widgets.ElevationProfile.ElevationProfileController")],gh);function WVe(t,e){if(t==null||e==null)return null;const{samples:i,spatialReference:r}=t,{distance:n,elevation:s}=e,o=Kr(r),u=Kl(r),d=i.length,h=new Array(d);for(let m=0;m<d;++m){const v=i[m],b=v.sampledZ,_=v.coordinate;h[m]={x:_[0],y:_[1],z:b,distance:oce(v.distance,o,n),elevation:b0(b,u,s)}}return h}function ZVe(t,e){if(t==null||e==null||t.statistics==null||t.spatialReference==null)return null;const{distance:i,elevation:r}=e,{statistics:n,spatialReference:s}=t,o=Kr(s),u=Kl(s);return{maxDistance:oce(n.maxDistance,o,i),minElevation:b0(n.minElevation,u,r),maxElevation:b0(n.maxElevation,u,r),avgElevation:b0(n.avgElevation,u,r),elevationGain:b0(n.elevationGain,u,r),elevationLoss:b0(n.elevationLoss,u,r),maxPositiveSlope:n.maxPositiveSlope,maxNegativeSlope:n.maxNegativeSlope,avgPositiveSlope:n.avgPositiveSlope,avgNegativeSlope:n.avgNegativeSlope}}function oce(t,e,i){return t==null?null:rt(t*e,"meters",i)}function b0(t,e,i){return t==null?null:rt(t*e,"meters",i)}let qi=class extends sp{constructor(e){super(e),this.type=null,this.id=tg(),this.title=null,this.color=new Ie("#000000"),this.visible=!0,this._getSamplesMemoized=qa((i,r)=>WVe(i,r)),this._getStatisticsMemoized=qa((i,r)=>ZVe(i,r)),this.viewVisualizationEnabled=!0,this.result=null,this.effectiveUnits=null,this.numSamplesForPreview=30,this.numSamplesPerChunk=200,this.chartFillEnabled=!0,this.chartStrokeWidth=1.5,this.chartStrokeOffsetY=0,this._viewModel=null}get progress(){return this.result!=null&&this.visible?this.result.progress:0}get samples(){return this._getSamplesMemoized(this.result,this.effectiveUnits)}get statistics(){return this._getStatisticsMemoized(this.result,this.effectiveUnits)}get hoveredPoint(){const e=this._viewModel?.hoveredChartPosition;return e!=null?this._getPoint(e):null}get available(){return!0}get hasZ(){const e=this.result;return e!=null&&e.hasZ}get minDemResolution(){return Xl().defaultDemResolution}queryElevation(){throw new Error("not implemented")}attach(e){return this._viewModel=e,uo([be(()=>e.effectiveUnits,i=>{this.effectiveUnits=i},Gt),be(()=>[e.input],()=>this._onChange(),Zo)])}toggleVisibility(e){this.visible=e===void 0?!this.visible:e}_onChange(){this.emit("change")}_getPoint(e){const{samples:i,result:r}=this;if(i==null||r==null)return null;const n=i.length;if(n===0)return null;const s=i[n-1].distance,o=HVe(i,e*s,m=>m.distance);if(o==null)return null;const{x:u,y:d,z:h}=o;return h==null?null:new je({x:u,y:d,z:h,spatialReference:r.spatialReference})}};l([p({nonNullable:!0})],qi.prototype,"id",void 0),l([p()],qi.prototype,"title",void 0),l([p({type:Ie,nonNullable:!0})],qi.prototype,"color",void 0),l([p({nonNullable:!0})],qi.prototype,"visible",void 0),l([p({readOnly:!0})],qi.prototype,"progress",null),l([p({readOnly:!0})],qi.prototype,"samples",null),l([p({readOnly:!0})],qi.prototype,"statistics",null),l([p()],qi.prototype,"hoveredPoint",null),l([p()],qi.prototype,"viewVisualizationEnabled",void 0),l([p()],qi.prototype,"available",null),l([p()],qi.prototype,"result",void 0),l([p()],qi.prototype,"effectiveUnits",void 0),l([p()],qi.prototype,"numSamplesForPreview",void 0),l([p()],qi.prototype,"numSamplesPerChunk",void 0),l([p()],qi.prototype,"chartFillEnabled",void 0),l([p()],qi.prototype,"chartStrokeWidth",void 0),l([p()],qi.prototype,"chartStrokeOffsetY",void 0),l([p({readOnly:!0})],qi.prototype,"hasZ",null),l([p({readOnly:!0})],qi.prototype,"minDemResolution",null),l([p()],qi.prototype,"_viewModel",void 0),qi=l([M("esri.widgets.ElevationProfile.ElevationProfileLine")],qi);const Rx=qi;function ace(t){if(t==null)return null;if(eMe(t))return lce(t);const e=t.tileInfo;if(e==null)return null;const i=e.lods?.at(-1);return i==null?null:i.resolution*Kr(e.spatialReference)}function lce(t){if(t==null)return null;const e=t.layers.items.map(JVe).filter(is);return qQ(e)??null}function JVe(t){return t&&"tileInfo"in t?ace(t):null}let Iu=class extends Rx{constructor(e){super(e),this.type="ground",this.color=new Ie("#ff7f00"),this.viewVisualizationEnabled=!0,this.numSamplesForPreview=50,this.numSamplesPerChunk=1e3,this._getQueryElevationDependencies=qa((i,r)=>({ground:i,groundLayers:r}))}get available(){const e=this._ground;return e!=null&&e.layers.some(i=>i.visible)}get minDemResolution(){return lce(this._ground)}get _queryElevationDependencies(){return this._getQueryElevationDependencies(this._ground,this._groundLayers)}get _ground(){return this._viewModel?.view?.map?.ground}get _groundLayers(){return this._ground?.layers?.toArray()??[]}async queryElevation(e,i){const r=this._queryElevationDependencies;if(r==null)throw new Error("ElevationProfileLineGround: no dependencies");const{ground:n}=r;if(n==null)throw new Error("No ground configured in the view");const s=await n.queryElevation(e,i),o=Kl(e.spatialReference),u=Kl(n.layers.at(0).spatialReference);if(o!==u){const d=s.geometry;d.points=d.points.map(([h,m,v])=>[h,m,v===i.noDataValue?v:v*u/o])}return s}attach(e){return uo([super.attach(e),be(()=>this._queryElevationDependencies,()=>this._onChange())])}};l([p({type:Ie,nonNullable:!0})],Iu.prototype,"color",void 0),l([p()],Iu.prototype,"viewVisualizationEnabled",void 0),l([p()],Iu.prototype,"available",null),l([p({readOnly:!0})],Iu.prototype,"minDemResolution",null),l([p()],Iu.prototype,"_queryElevationDependencies",null),l([p()],Iu.prototype,"_ground",null),l([p()],Iu.prototype,"_groundLayers",null),Iu=l([M("esri.widgets.ElevationProfile.ElevationProfileLineGround")],Iu);const uce=Iu;let cce=class _3{constructor(e){this.geometry=e,this.spatialReference=e.spatialReference}export(){return this._exporter(this.coordinates,this.spatialReference)}clone(e){const i=new _3(this.geometry);return i.spatialReference=this.spatialReference,i.coordinates=e??this.coordinates.map(r=>r.clone()),i._exporter=this._exporter,i}async project(e,i){if(this.spatialReference.equals(e))return this.clone();await ff([{source:this.spatialReference,dest:e}],{signal:i});const r=new Jn({spatialReference:this.spatialReference,points:this.coordinates.map(u=>[u.x,u.y])}),n=Is(r,e);if(!n)return null;const s=this.coordinates.map((u,d)=>{const h=u.clone(),m=n.points[d];return h.x=m[0],h.y=m[1],h}),o=this.clone(s);return o.spatialReference=e,o}static fromGeometry(e){const i=new _3(e);if(e instanceof _3)return i.coordinates=e.coordinates.map(r=>r.clone()),i._exporter=(r,n)=>{const s=e.clone(r);return s.spatialReference=n,s},i;switch(e.type){case"point":{const r=e,{hasZ:n,hasM:s}=r;return i.coordinates=n&&s?[new fa(r.x,r.y,r.z,r.m)]:n?[new fa(r.x,r.y,r.z)]:s?[new fa(r.x,r.y,null,r.m)]:[new fa(r.x,r.y)],i._exporter=(o,u)=>e.hasM?new je(o[0].x,o[0].y,o[0].z,o[0].m,u):new je(o[0].x,o[0].y,o[0].z,u),i}case"multipoint":{const r=e,{hasZ:n,hasM:s}=r;return i.coordinates=n&&s?r.points.map(o=>new fa(o[0],o[1],o[2],o[3])):n?r.points.map(o=>new fa(o[0],o[1],o[2])):s?r.points.map(o=>new fa(o[0],o[1],null,o[2])):r.points.map(o=>new fa(o[0],o[1])),i._exporter=(o,u)=>e.hasM?new Jn({points:o.map(d=>[d.x,d.y,d.z??0,d.m??0]),hasZ:!0,hasM:!0,spatialReference:u}):new Jn({points:o.map(d=>[d.x,d.y,d.z??0]),spatialReference:u}),i}case"polyline":{const r=e,n=[],s=[],{hasZ:o,hasM:u}=e;let d=0;for(const h of r.paths)if(s.push([d,d+h.length]),d+=h.length,o&&u)for(const m of h)n.push(new fa(m[0],m[1],m[2],m[3]));else if(o)for(const m of h)n.push(new fa(m[0],m[1],m[2]));else if(u)for(const m of h)n.push(new fa(m[0],m[1],null,m[2]));else for(const m of h)n.push(new fa(m[0],m[1]));return i.coordinates=n,i._exporter=(h,m)=>{const v=e.hasM?h.map(_=>[_.x,_.y,_.z??0,_.m??0]):h.map(_=>[_.x,_.y,_.z??0]),b=s.map(_=>v.slice(_[0],_[1]));return new Kt({paths:b,hasM:e.hasM,hasZ:!0,spatialReference:m})},i}}}},fa=class dce{constructor(e,i,r=null,n=null,s=null,o=null){this.x=e,this.y=i,this.z=r,this.m=n,this.tile=s,this.elevationTile=o}clone(){return new dce(this.x,this.y,this.z,this.m)}},fd=class extends Rx{constructor(e){super(e),this.type="input",this.color=new Ie("#00c8c8"),this.viewVisualizationEnabled=!1,this.numSamplesForPreview=50,this.numSamplesPerChunk=500,this.chartFillEnabled=!1,this.chartStrokeOffsetY=-1,this._getQueryElevationDependencies=qa((i,r,n,s,o)=>i?{elevationInfo:i,visibleLayers:r,view:n,stationary:s,spatialReference:o}:null)}get queryElevationDependencies(){const e=this._viewModel?.view;return e==null?null:this._getQueryElevationDependencies(this._elevationInfo,this._visibleLayers,e,e.stationary,e.spatialReference)}get available(){return!this._viewModel?.inputIsSketched}get _elevationInfo(){const e=this._viewModel?.input;return e?w8(e):null}get _visibleLayers(){return this._viewModel?.view?.map?.allLayers?.filter(e=>e.visible).toArray()??[]}async queryElevation(e,{noDataValue:i,signal:r}){const n=this.queryElevationDependencies;if(n==null)throw new Error("ElevationProfileLineInput: no dependencies");const{view:s,elevationInfo:o,spatialReference:u}=n;if(o.mode==="on-the-ground"&&s.type==="3d"&&u){const d=await cce.fromGeometry(e).project(u,r);if(!d)return{geometry:e,noDataValue:i};const h=s.elevationProvider;return d.coordinates.forEach(m=>{m.z=h.getElevation(m.x,m.y,0,u,"ground")??0}),{geometry:d.export(),noDataValue:i}}return{geometry:e,noDataValue:i}}attach(e){const i=()=>this._onChange();return uo([super.attach(e),be(()=>this.queryElevationDependencies,i),Wo(()=>e.elevationProvider,"elevation-change",i,{onListenerAdd:i,onListenerRemove:i})])}};l([p({type:Ie,nonNullable:!0})],fd.prototype,"color",void 0),l([p()],fd.prototype,"viewVisualizationEnabled",void 0),l([p()],fd.prototype,"queryElevationDependencies",null),l([p()],fd.prototype,"available",null),l([p()],fd.prototype,"_elevationInfo",null),l([p()],fd.prototype,"_visibleLayers",null),fd=l([M("esri.widgets.ElevationProfile.ElevationProfileLineInput")],fd);const YVe=fd;let vh=class extends Rx{constructor(e){super(e),this.type="query",this.color=new Ie("#db334a"),this.viewVisualizationEnabled=!0,this.source=null,this.numSamplesForPreview=50,this.numSamplesPerChunk=500}get minDemResolution(){return ace(this.source)}get available(){const e=this.source;return!!e&&(e.visible==null||e.visible)&&(e.layers==null||e.layers.some(i=>i.visible))}queryElevation(e,i){if(!this.source)throw new Error("No source configured for the elevation profile line");return this.source.queryElevation(e,i)}attach(e){return uo([super.attach(e),be(()=>this.source,()=>this._onChange(),Zo)])}};l([p({type:Ie,nonNullable:!0})],vh.prototype,"color",void 0),l([p()],vh.prototype,"viewVisualizationEnabled",void 0),l([p()],vh.prototype,"source",void 0),l([p({readOnly:!0})],vh.prototype,"minDemResolution",null),l([p()],vh.prototype,"available",null),vh=l([M("esri.widgets.ElevationProfile.ElevationProfileLineQuery")],vh);const QVe=vh;let qw=class{constructor(e){this._allocator=e,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&Lb(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*YJ);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,YJ));e++)this._items.push(this._allocator())}};const YJ=1024;function lp(){return[0,0,0,1]}function XVe(t){return[t[0],t[1],t[2],t[3]]}function KVe(t,e,i,r){return[t,e,i,r]}const $8=lp();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:$8,clone:XVe,create:lp,fromValues:KVe},Symbol.toStringTag,{value:"Module"}));let Gw=class zm{constructor(e){this._create=e,this._items=new Array,this._itemsPtr=0}get(){return this._itemsPtr===0&&Lb(()=>this._reset()),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const e=2*this._itemsPtr;this._items.length>e&&(this._items.length=e),this._itemsPtr=0}static createVec2f64(){return new zm(Tt)}static createVec3f64(){return new zm(Y)}static createVec4f64(){return new zm(Ha)}static createMat3f64(){return new zm(tu)}static createMat4f64(){return new zm(On)}static createQuatf64(){return new zm(lp)}get test(){}};const gst=Gw.createVec2f64(),jt=Gw.createVec3f64(),pce=Gw.createVec4f64();Gw.createMat3f64();const hce=Gw.createMat4f64(),eUe=Gw.createQuatf64();function Ts(t){return t?QJ(mn(t.origin),mn(t.direction)):QJ(Y(),Y())}function QJ(t,e){return{origin:t,direction:e}}function vst(t,e){const i=iUe.get();return i.origin=t,i.direction=e,i}function nI(t,e=Ts()){return fce(t.origin,t.direction,e)}function T8(t,e,i=Ts()){return Sr(i.origin,t),ei(i.direction,e,t),i}function fce(t,e,i=Ts()){return Sr(i.origin,t),Sr(i.direction,e),i}function bst(t,e){const i=yn(jt.get(),ns(jt.get(),t.direction),ei(jt.get(),e,t.origin));return ht(i,i)}function tUe(t,e,i){const r=ht(t.direction,ei(i,e,t.origin));return dr(i,t.origin,ci(i,t.direction,r)),i}const iUe=new qw(()=>Ts());function mce(t,e,i,r){if(Qo(t.spatialReference,i)){$E[0]=t.x,$E[1]=t.y;const s=t.z;return $E[2]=s??r??0,uc($E,t.spatialReference,0,e,i,0)}const n=tw(t,i);return!!n&&(e[0]=n?.x,e[1]=n?.y,e[2]=n?.z??r??0,!0)}async function wst(t,e,i,r,n){return await ff(t.spatialReference,i,null,n),mce(t,e,i,r)}const $E=Y();function Bw(t,e,i,r){return{x:t,y:e,z:i,hasZ:i!=null,hasM:!1,spatialReference:r,type:"point"}}function yce(t,e,i,r,n){t.x=e,t.y=i,t.z=r,t.hasZ=r!=null,t.spatialReference=n}function S3(t,e,i,r,n){return!(e==null||r==null||t.length<2)&&(g1.x=t[0],g1.y=t[1],g1.z=t[2],g1.spatialReference=e,mce(g1,i,r,n))}const g1=Bw(0,0,0,we.WGS84),rUe="OBJECTID";let Oi=class extends _e{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.TEXT_SHOW_BASELINE=!1,this.TEXT_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_OPTIMIZATIONS=!1,this.TESTS_DISABLE_FAST_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,this.LINE_WIREFRAMES=!1}};l([p()],Oi.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0),l([p()],Oi.prototype,"DECONFLICTOR_SHOW_VISIBLE",void 0),l([p()],Oi.prototype,"DECONFLICTOR_SHOW_INVISIBLE",void 0),l([p()],Oi.prototype,"DECONFLICTOR_SHOW_GRID",void 0),l([p()],Oi.prototype,"LABELS_SHOW_BORDER",void 0),l([p()],Oi.prototype,"TEXT_SHOW_BASELINE",void 0),l([p()],Oi.prototype,"TEXT_SHOW_BORDER",void 0),l([p()],Oi.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0),l([p()],Oi.prototype,"OVERLAY_SHOW_CENTER",void 0),l([p()],Oi.prototype,"SHOW_POI",void 0),l([p()],Oi.prototype,"TESTS_DISABLE_OPTIMIZATIONS",void 0),l([p()],Oi.prototype,"TESTS_DISABLE_FAST_UPDATES",void 0),l([p()],Oi.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0),l([p()],Oi.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0),l([p()],Oi.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0),l([p()],Oi.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0),l([p()],Oi.prototype,"I3S_TREE_SHOW_TILES",void 0),l([p()],Oi.prototype,"I3S_SHOW_MODIFICATIONS",void 0),l([p()],Oi.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0),l([p()],Oi.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0),l([p()],Oi.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0),l([p()],Oi.prototype,"LINE_WIREFRAMES",void 0),Oi=l([M("esri.views.3d.support.debugFlags")],Oi);const Sst=new Oi;function Vk(t){return t?{ray:Ts(t.ray),c0:t.c0,c1:t.c1}:{ray:Ts(),c0:0,c1:Number.MAX_VALUE}}function nUe(t,e=Vk()){return nI(t,e.ray),e.c0=0,e.c1=Number.MAX_VALUE,e}function sUe(t,e,i=Vk()){const r=mi(t.vector);return fce(t.origin,e,i.ray),i.c0=0,i.c1=r,i}function xst(t,e){return gce(t,t.c0,e)}function $st(t,e){return gce(t,t.c1,e)}function gce(t,e,i){return dr(i,t.ray.origin,ci(i,t.ray.direction,e))}new qw(()=>Vk());function Tst(t,e,i){const r=ht(t,e)/ht(t,t);return ci(i,t,r)}function x3(t,e){return ht(t,e)/mi(t)}function oUe(t,e){const i=ht(t,e)/(mi(t)*mi(e));return-Yz(i)}function Est(t,e,i){ns(TE,t),ns(wP,e);const r=ht(TE,wP),n=Yz(r),s=yn(TE,TE,wP);return ht(s,i)<0?2*Math.PI-n:n}const TE=Y(),wP=Y();function Mst(t){const e=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],i=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],r=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))}function Ast(t,e){const i=Math.sqrt(e[0]*e[0]+e[4]*e[4]+e[8]*e[8]),r=Math.sqrt(e[1]*e[1]+e[5]*e[5]+e[9]*e[9]),n=Math.sqrt(e[2]*e[2]+e[6]*e[6]+e[10]*e[10]);return vt(t,i,r,n),t}function E8(t,e,i){Math.abs(t[0])>Math.abs(t[1])?vt(e,0,1,0):vt(e,1,0,0),yn(i,t,e),yn(e,i,t),ns(i,i),ns(e,e)}function Ist(t,e,i,r=Y()){const n=mi(t),s=mi(e),o=ht(t,e)/(n*s);if(o<.9999999999999999){const u=Math.acos(o),d=((1-i)*n+i*s)/Math.sin(u),h=d/n*Math.sin((1-i)*u),m=d/s*Math.sin(i*u);return ci(XJ,t,h),ci(KJ,e,m),dr(r,XJ,KJ)}return Mx(r,t,e,i)}const XJ=Y(),KJ=Y();function Ei(t=M2){return[t[0],t[1],t[2],t[3]]}function aUe(t=M2[0],e=M2[1],i=M2[2],r=M2[3]){return bce(t,e,i,r,pce.get())}function vce(t,e){return bce(e[0],e[1],e[2],e[3],t)}function kst(t){return t}function bce(t,e,i,r,n=Ei()){return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n}function Px(t,e,i){const r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return i[0]=e[0]*n,i[1]=e[1]*n,i[2]=e[2]*n,i[3]=-(i[0]*t[0]+i[1]*t[1]+i[2]*t[2]),i}function Ld(t,e,i,r=Ei()){const n=i[0]-e[0],s=i[1]-e[1],o=i[2]-e[2],u=t[0]-e[0],d=t[1]-e[1],h=t[2]-e[2],m=s*h-o*d,v=o*u-n*h,b=n*d-s*u,_=m*m+v*v+b*b,x=Math.abs(_-1)>1e-5&&_>1e-12?1/Math.sqrt(_):1;return r[0]=m*x,r[1]=v*x,r[2]=b*x,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function wce(t,e,i,r=0,n=Math.floor(i*(1/3)),s=Math.floor(i*(2/3))){if(i<3)return!1;e(v1,r);let o=n,u=!1;for(;o<i-1&&!u;)e(hv,o),o++,u=!Ot(v1,hv);if(!u)return!1;for(o=Math.max(o,s),u=!1;o<i&&!u;)e(Jm,o),o++,ei(EE,v1,hv),ns(EE,EE),ei(ME,hv,Jm),ns(ME,ME),u=!Ot(v1,Jm)&&!Ot(hv,Jm)&&Math.abs(ht(EE,ME))<lUe;return u?(Ld(v1,hv,Jm,t),!0):(r!==0||n!==1||s!==2)&&wce(t,e,i,0,1,2)}function Ost(t,e,i=!0){const r=e.length/3;return wce(t,(n,s)=>vt(n,e[3*s+0],e[3*s+1],e[3*s+2]),i?r-1:r)}const lUe=.99619469809,v1=Y(),hv=Y(),Jm=Y(),EE=Y(),ME=Y();function Cst(t,e,i){return e!==t&&vce(t,e),t[3]=-ht(t,i),t}function Rst(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function Pst(t,e,i,r){return yn(Jm,e,t),Px(i,Jm,r)}function _ce(t,e,i,r){return Uk(qk(t,e,ei(jt.get(),i,e),fUe,r))}function Dst(t,e,i){return e!=null&&Uk(qk(t,e.origin,e.direction,mUe,i))}function Nst(t,e,i){return Uk(qk(t,e.origin,e.vector,0,i))}function Lst(t,e,i){return Uk(qk(t,e.origin,e.vector,1,i))}function uUe(t,e){return ng(t,e)>=0}function cUe(t,e){const i=ht(t,e.ray.direction),r=-ng(t,e.ray.origin);if(r<0&&i>=0)return!1;if(i>-1e-6&&i<1e-6)return r>0;if((r<0||i<0)&&!(r<0&&i<0))return!0;const n=r/i;return i>0?n<e.c1&&(e.c1=n):n>e.c0&&(e.c0=n),e.c0<=e.c1}function dUe(t,e){const i=ht(t,e.ray.direction),r=-ng(t,e.ray.origin);if(i>-1e-6&&i<1e-6)return r>0;const n=r/i;return i>0?n<e.c1&&(e.c1=n):n>e.c0&&(e.c0=n),e.c0<=e.c1}function Sce(t,e,i){const r=ci(jt.get(),t,-t[3]),n=hUe(t,ei(jt.get(),e,r),jt.get());return dr(i,n,r),i}function pUe(t,e,i,r){const n=t,s=jt.get(),o=jt.get();E8(n,s,o);const u=ei(jt.get(),i,e),d=x3(s,u),h=x3(o,u),m=x3(n,u);return vt(r,d,h,m)}function hUe(t,e,i){const r=ci(jt.get(),t,ht(t,e));return ei(i,e,r),i}function Gj(t,e){return Math.abs(ng(t,e))}function ng(t,e){return ht(t,e)+t[3]}function Uk(t){return t===0||t===1}function qk(t,e,i,r,n){const s=ht(t,i),o=ng(t,e);if(s===0)return o>=0?2:3;let u=-o/s;return 1&r&&(u=Qr(u,0,1)),!(4&r)&&u<0||!(8&r)&&u>1?o>=0?2:3:(dr(n,e,ci(n,i,u)),o>=0?0:1)}const M2=[0,0,1,0],fUe=12,mUe=8;function yUe(t){return t?[Ei(t[0]),Ei(t[1]),Ei(t[2]),Ei(t[3]),Ei(t[4]),Ei(t[5])]:[Ei(),Ei(),Ei(),Ei(),Ei(),Ei()]}function gUe(){return[Y(),Y(),Y(),Y(),Y(),Y(),Y(),Y()]}function vUe(t,e){for(let i=0;i<Dx;i++)vce(t[i],e[i]);return t}function bUe(t,e,i,r=xUe){const n=rw(hce.get(),e,t);hy(n,n);for(let s=0;s<_Ue;++s){const o=Gh(pce.get(),SUe[s],n);vt(r[s],o[0]/o[3],o[1]/o[3],o[2]/o[3])}wUe(i,r)}function wUe(t,e){Ld(e[4],e[0],e[3],t[0]),Ld(e[1],e[5],e[6],t[1]),Ld(e[4],e[5],e[1],t[2]),Ld(e[3],e[2],e[6],t[3]),Ld(e[0],e[1],e[2],t[4]),Ld(e[5],e[4],e[7],t[5])}function jst(t,e){for(let i=0;i<Dx;i++){const r=t[i];if(r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]>=e[3])return!1}return!0}function zst(t,e){return xce(t,nUe(e,$ce.get()))}function Fst(t,e){for(let i=0;i<Dx;i++){const r=t[i];if(!dUe(r,e))return!1}return!0}function Vst(t,e,i){return xce(t,sUe(e,i,$ce.get()))}function Ust(t,e){for(let i=0;i<Dx;i++)if(ng(t[i],e)>0)return!1;return!0}function xce(t,e){for(let i=0;i<Dx;i++)if(!cUe(t[i],e))return!1;return!0}const qst={bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]},Dx=6,_Ue=8,SUe=[hn(-1,-1,-1,1),hn(1,-1,-1,1),hn(1,1,-1,1),hn(-1,1,-1,1),hn(-1,-1,1,1),hn(1,-1,1,1),hn(1,1,1,1),hn(-1,1,1,1)],$ce=new qw(Vk),xUe=gUe();function $Ue(t,e,i){return 2*Math.atan(Math.sqrt(e*e+i*i)*Math.tan(.5*t)/e)}function TUe(t,e,i){return 2*Math.atan(Math.sqrt(e*e+i*i)*Math.tan(.5*t)/i)}function EUe(t,e,i){return 2*Math.atan(e*Math.tan(.5*t)/Math.sqrt(e*e+i*i))}function MUe(t,e,i){return 2*Math.atan(i*Math.tan(.5*t)/Math.sqrt(e*e+i*i))}var Bj;let Je=Bj=class extends _e{constructor(t){super(t),this._ray=Ts(),this._viewport=hn(0,0,1,1),this._padding=hn(0,0,0,0),this._fov=55/180*Math.PI,this._nearFar=Xu(1,1e3),this._viewDirty=!0,this._viewMatrix=On(),this._viewProjectionDirty=!0,this._viewProjectionMatrix=On(),this._viewInverseTransposeMatrixDirty=!0,this._viewInverseTransposeMatrix=On(),this._frustumDirty=!0,this._frustum=yUe(),this._fullViewport=Ha(),this._pixelRatio=1,this.row=0,this.column=0,this._rows=1,this._columns=1,this._center=Y(),this._up=Y(),this.relativeElevation=0}get pixelRatio(){return this._pixelRatio}set pixelRatio(t){this._pixelRatio=t>0?t:1}get rows(){return this._rows}set rows(t){this._rows=Math.max(1,t)}get columns(){return this._columns}set columns(t){this._columns=Math.max(1,t)}get eye(){return this._ray.origin}set eye(t){this._compareAndSetView(t,this._ray.origin)}get center(){return this._center}set center(t){this._compareAndSetView(t,this._center,"_center")}get ray(){return ei(this._ray.direction,this.center,this.eye),this._ray}get up(){return this._up}set up(t){this._compareAndSetView(t,this._up,"_up")}get viewMatrix(){return this._ensureViewClean(),this._viewMatrix}set viewMatrix(t){Zd(this._viewMatrix,t),this.notifyChange("_viewMatrix"),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0}get viewForward(){return this._ensureViewClean(),vt(Y(),-this._viewMatrix[2],-this._viewMatrix[6],-this._viewMatrix[10])}get viewUp(){return this._ensureViewClean(),vt(Y(),this._viewMatrix[1],this._viewMatrix[5],this._viewMatrix[9])}get viewRight(){return this._ensureViewClean(),vt(Y(),this._viewMatrix[0],this._viewMatrix[4],this._viewMatrix[8])}get nearFar(){return this._nearFar}get near(){return this._nearFar[0]}set near(t){this._nearFar[0]!==t&&(this._nearFar[0]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_nearFar"))}get far(){return this._nearFar[1]}set far(t){this._nearFar[1]!==t&&(this._nearFar[1]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_nearFar"))}get viewport(){return this._viewport}set viewport(t){this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]}get screenViewport(){if(this.pixelRatio===1)return this._viewport;const t=KA(Ha(),this._viewport,1/this.pixelRatio),e=this._get("screenViewport");return e&&tI(t,e)?e:t}get screenPadding(){if(this.pixelRatio===1)return this._padding;const t=KA(Ha(),this._padding,1/this.pixelRatio),e=this._get("screenPadding");return e&&tI(t,e)?e:t}get x(){return this._viewport[0]}set x(t){t+=this._padding[3],this._viewport[0]!==t&&(this._viewport[0]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get y(){return this._viewport[1]}set y(t){t+=this._padding[2],this._viewport[1]!==t&&(this._viewport[1]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get width(){return this._viewport[2]}set width(t){this._viewport[2]!==t&&(this._viewport[2]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get height(){return this._viewport[3]}set height(t){this._viewport[3]!==t&&(this._viewport[3]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get fullWidth(){return this._viewport[2]+this._padding[1]+this._padding[3]}set fullWidth(t){this.width=t-(this._padding[1]+this._padding[3])}get fullHeight(){return this._viewport[3]+this._padding[0]+this._padding[2]}set fullHeight(t){this.height=t-(this._padding[0]+this._padding[2])}get fullViewport(){return this._fullViewport[0]=this._viewport[0]-this._padding[3],this._fullViewport[1]=this._viewport[1]-this._padding[2],this._fullViewport[2]=this.fullWidth,this._fullViewport[3]=this.fullHeight,this._fullViewport}get _aspect(){return this.width/this.height}get padding(){return this._padding}set padding(t){pS(this._padding,t)||(this._viewport[0]+=t[3]-this._padding[3],this._viewport[1]+=t[2]-this._padding[2],this._viewport[2]-=t[1]+t[3]-(this._padding[1]+this._padding[3]),this._viewport[3]-=t[0]+t[2]-(this._padding[0]+this._padding[2]),N0(this._padding,t),this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_padding"),this.notifyChange("_viewport"))}get viewProjectionMatrix(){return this._viewProjectionDirty&&(rw(this._viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),this._viewProjectionDirty=!1),this._viewProjectionMatrix}get projectionMatrix(){return this._projectionMatrixInternal}get inverseProjectionMatrix(){return hy(On(),this.projectionMatrix)||this._get("inverseProjectionMatrix")||On()}get fov(){return this._fov}set fov(t){this._fov=t,this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovX(){return EUe(this._fov,this.width,this.height)}set fovX(t){this._fov=$Ue(t,this.width,this.height),this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovY(){return MUe(this._fov,this.width,this.height)}set fovY(t){this._fov=TUe(t,this.width,this.height),this._viewProjectionDirty=!0,this._frustumDirty=!0}get distance(){return ec(this.center,this.eye)}get frustum(){return this._recomputeFrustum(),this._frustum}get viewInverseTransposeMatrix(){return(this._viewInverseTransposeMatrixDirty||this._viewDirty)&&(hy(this._viewInverseTransposeMatrix,this.viewMatrix),Ya(this._viewInverseTransposeMatrix,this._viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),this._viewInverseTransposeMatrix}depthNDCToWorld(t){const{near:e,far:i}=this;return 2*e*i/(i+e-t*(i-e))}get perRenderPixelRatio(){return Math.tan(this.fovX/2)/(this.width/2)}get perScreenPixelRatio(){return this.perRenderPixelRatio*this.pixelRatio}get aboveGround(){return this.relativeElevation!=null&&this.relativeElevation>=0}get _projectionMatrixInternal(){const t=this.width,e=this.height,i=this.near*Math.tan(this.fovY/2)*2,r=i*this._aspect,n=i/this.rows,s=r/this.columns,o=-r/2+this.column*s,u=o+s,d=-i/2+this.row*n,h=d+n,m=sne(On(),o*(1+2*this._padding[3]/t),u*(1+2*this._padding[1]/t),d*(1+2*this._padding[2]/e),h*(1+2*this._padding[0]/e),this.near,this.far),v=this._get("projectionMatrix");return v&&lne(v,m)?v:m}copyFrom(t){Sr(this._ray.origin,t.eye),this.center=t.center,this.up=t.up,N0(this._viewport,t.viewport),this.notifyChange("_viewport"),N0(this._padding,t.padding),this.notifyChange("_padding"),cy(this._nearFar,t.nearFar),this.notifyChange("_nearFar"),this._fov=t.fov,this.row=t.row,this.column=t.column,this.rows=t.rows,this.columns=t.columns,this.relativeElevation=t.relativeElevation;const e=t;return this._viewDirty=e._viewDirty,this._viewDirty||(Zd(this._viewMatrix,t.viewMatrix),this.notifyChange("_viewMatrix")),this._viewProjectionDirty=!0,this._frustumDirty=e._frustumDirty,this._frustumDirty||(vUe(this._frustum,t.frustum),this._frustumDirty=!1),e._viewInverseTransposeMatrixDirty?this._viewInverseTransposeMatrixDirty=!0:(Zd(this._viewInverseTransposeMatrix,t.viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),N0(this._fullViewport,t.fullViewport),this.pixelRatio=t.pixelRatio,this}copyViewFrom(t){this.eye=t.eye,this.center=t.center,this.up=t.up,this.fov=t.fov}clone(){return new Bj().copyFrom(this)}equals(t){return Ot(this.eye,t.eye)&&Ot(this.center,t.center)&&Ot(this.up,t.up)&&pS(this._viewport,t.viewport)&&pS(this._padding,t.padding)&&pA(this.nearFar,t.nearFar)&&this._fov===t.fov&&this.pixelRatio===t.pixelRatio&&this.relativeElevation===t.relativeElevation&&this.row===t.row&&this.column===t.column&&this.rows===t.rows&&this.columns===t.columns}almostEquals(t){const e=Math.max(1,1/this.pixelRatio,1/t.pixelRatio);if(Math.abs(t.fov-this._fov)>=.001||eI(t.screenPadding,this.screenPadding)>=e||eI(this.screenViewport,t.screenViewport)>=e||this.row!==t.row||this.column!==t.column||this.rows!==t.rows||this.columns!==t.columns)return!1;fn(er,t.eye,t.center),fn(pu,this.eye,this.center);const i=ht(er,pu),r=Gy(er),n=Gy(pu),s=5e-4;return i*i>=(1-1e-10)*r*n&&IA(t.eye,this.eye)<Math.max(r,n)*s*s}computeRenderPixelSizeAt(t){return this.computeRenderPixelSizeAtDist(this._viewDirectionDistance(t))}computeRenderPixelSizeAtDist(t){return t*this.perRenderPixelRatio}computeScreenPixelSizeAt(t){return this.computeScreenPixelSizeAtDist(this._viewDirectionDistance(t))}_viewDirectionDistance(t){return Math.abs(x3(this.viewForward,ei(er,t,this.eye)))}computeScreenPixelSizeAtDist(t){return t*this.perScreenPixelRatio}computeDistanceFromRadius(t,e){return t/Math.tan(Math.min(this.fovX,this.fovY)/(2*(e||1)))}getScreenCenter(t=Ore()){return t[0]=(this.padding[3]+this.width/2)/this.pixelRatio,t[1]=(this.padding[0]+this.height/2)/this.pixelRatio,t}getRenderCenter(t,e=.5,i=.5){return t[0]=this.padding[3]+this.width*e,t[1]=this.padding[2]+this.height*i,t[2]=.5,t}setGLViewport(t){const e=this.viewport,i=this.padding;t.setViewport(e[0]-i[3],e[1]-i[2],e[2]+i[1]+i[3],e[3]+i[0]+i[2])}applyProjection(t,e){t!==ot&&Sr(ot,t),ot[3]=1,Gh(ot,ot,this.projectionMatrix);const i=Math.abs(ot[3]);ci(ot,ot,1/i);const r=this.fullViewport;e[0]=Vl(0,r[0]+r[2],.5+.5*ot[0]),e[1]=Vl(0,r[1]+r[3],.5+.5*ot[1]),e[2]=.5*(ot[2]+1),e[3]=i}unapplyProjection(t,e){const i=this.fullViewport;ot[0]=(t[0]/(i[0]+i[2])*2-1)*t[3],ot[1]=(t[1]/(i[1]+i[3])*2-1)*t[3],ot[2]=(2*t[2]-1)*t[3],ot[3]=t[3],this.inverseProjectionMatrix!=null&&(Gh(ot,ot,this.inverseProjectionMatrix),e[0]=ot[0],e[1]=ot[1],e[2]=ot[2])}projectToScreen(t,e){return this.projectToRenderScreen(t,_P),this.renderToScreen(_P,e),e}projectToRenderScreen(t,e){if(ot[0]=t[0],ot[1]=t[1],ot[2]=t[2],ot[3]=1,Gh(ot,ot,this.viewProjectionMatrix),ot[3]===0)return null;const i=ot;ci(i,i,1/Math.abs(ot[3]));const r=this.fullViewport,n=Vl(0,r[0]+r[2],.5+.5*i[0]),s=Vl(0,r[1]+r[3],.5+.5*i[1]);return"x"in e?(e.x=n,e.y=s):(e[0]=n,e[1]=s,e.length>2&&(e[2]=.5*(i[2]+1))),e}unprojectFromScreen(t,e){return this.unprojectFromRenderScreen(this.screenToRender(t,_P),e)}unprojectFromRenderScreen(t,e){if(rw(AE,this.projectionMatrix,this.viewMatrix),!hy(AE,AE))return null;const i=this.fullViewport;return ot[0]=2*(t[0]-i[0])/i[2]-1,ot[1]=2*(t[1]-i[1])/i[3]-1,ot[2]=2*t[2]-1,ot[3]=1,Gh(ot,ot,AE),ot[3]===0?null:(e[0]=ot[0]/ot[3],e[1]=ot[1]/ot[3],e[2]=ot[2]/ot[3],e)}constrainWindowSize(t,e,i,r){const n=t*this.pixelRatio,s=e*this.pixelRatio,o=Math.max(n-i/2,0),u=Math.max(this.fullHeight-s-r/2,0),d=-Math.min(n-i/2,0),h=-Math.min(this.fullHeight-s-r/2,0),m=i-d- -Math.min(this.fullWidth-n-i/2,0),v=r-h- -Math.min(s-r/2,0);return[Math.round(o),Math.round(u),Math.round(m),Math.round(v)]}computeUp(t){t===1?this._computeUpGlobal():this._computeUpLocal()}screenToRender(t,e){const i=t[0]*this.pixelRatio,r=this.fullHeight-t[1]*this.pixelRatio;return e[0]=i,e[1]=r,e}renderToScreen(t,e){const i=t[0]/this.pixelRatio,r=(this.fullHeight-t[1])/this.pixelRatio;e[0]=i,e[1]=r}_computeUpGlobal(){ei(er,this.center,this.eye);const t=mi(this.center);t<1?Ot(this._up,jS)&&(Sr(this._up,jS),this._markViewDirty(),this.notifyChange("_up")):Math.abs(ht(er,this.center))>.9999*mi(er)*t||(yn(pu,er,this.center),yn(pu,pu,er),ns(pu,pu),Ot(this._up,pu)||(Sr(this._up,pu),this.notifyChange("_up"),this._markViewDirty()))}_computeUpLocal(){Uoe(er,this.eye,this.center),Math.abs(er[2])<=.9999&&(ci(er,er,er[2]),vt(er,-er[0],-er[1],1-er[2]),ns(er,er),Ot(this._up,er)||(Sr(this._up,er),this.notifyChange("_up"),this._markViewDirty()))}_compareAndSetView(t,e,i=""){typeof t[0]=="number"&&isFinite(t[0])&&typeof t[1]=="number"&&isFinite(t[1])&&typeof t[2]=="number"&&isFinite(t[2])?Ot(t,e)||(Sr(e,t),this._markViewDirty(),i.length&&this.notifyChange(i)):ie.getLogger("esri.views.3d.webgl-engine.lib.RenderCamera").warn("RenderCamera vector contains invalid number, ignoring value")}_markViewDirty(){this._viewDirty=!0,this._frustumDirty=!0,this._viewProjectionDirty=!0}_recomputeFrustum(){this._frustumDirty&&(bUe(this.viewMatrix,this.projectionMatrix,this._frustum),this._frustumDirty=!1)}_ensureViewClean(){this._viewDirty&&(one(this._viewMatrix,this.eye,this.center,this.up),this.notifyChange("_viewMatrix"),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0)}};l([p()],Je.prototype,"_viewport",void 0),l([p()],Je.prototype,"_padding",void 0),l([p()],Je.prototype,"_fov",void 0),l([p()],Je.prototype,"_nearFar",void 0),l([p()],Je.prototype,"_viewDirty",void 0),l([p()],Je.prototype,"_viewMatrix",void 0),l([p()],Je.prototype,"_pixelRatio",void 0),l([p()],Je.prototype,"pixelRatio",null),l([p()],Je.prototype,"row",void 0),l([p()],Je.prototype,"column",void 0),l([p()],Je.prototype,"_rows",void 0),l([p()],Je.prototype,"rows",null),l([p()],Je.prototype,"_columns",void 0),l([p()],Je.prototype,"columns",null),l([p()],Je.prototype,"eye",null),l([p()],Je.prototype,"center",null),l([p()],Je.prototype,"_center",void 0),l([p()],Je.prototype,"up",null),l([p()],Je.prototype,"_up",void 0),l([p()],Je.prototype,"viewMatrix",null),l([p({readOnly:!0})],Je.prototype,"viewForward",null),l([p({readOnly:!0})],Je.prototype,"viewUp",null),l([p({readOnly:!0})],Je.prototype,"viewRight",null),l([p({readOnly:!0})],Je.prototype,"nearFar",null),l([p()],Je.prototype,"near",null),l([p()],Je.prototype,"far",null),l([p()],Je.prototype,"viewport",null),l([p({readOnly:!0})],Je.prototype,"screenViewport",null),l([p({readOnly:!0})],Je.prototype,"screenPadding",null),l([p()],Je.prototype,"x",null),l([p()],Je.prototype,"y",null),l([p()],Je.prototype,"width",null),l([p()],Je.prototype,"height",null),l([p()],Je.prototype,"fullWidth",null),l([p()],Je.prototype,"fullHeight",null),l([p({readOnly:!0})],Je.prototype,"_aspect",null),l([p()],Je.prototype,"padding",null),l([p({readOnly:!0})],Je.prototype,"projectionMatrix",null),l([p({readOnly:!0})],Je.prototype,"inverseProjectionMatrix",null),l([p()],Je.prototype,"fov",null),l([p()],Je.prototype,"fovX",null),l([p()],Je.prototype,"fovY",null),l([p()],Je.prototype,"viewInverseTransposeMatrix",null),l([p({readOnly:!0})],Je.prototype,"_projectionMatrixInternal",null),l([p()],Je.prototype,"relativeElevation",void 0),Je=Bj=l([M("esri.views.3d.webgl.RenderCamera")],Je);const AUe=Je,ot=Ha(),AE=On(),er=Y(),pu=Y(),_P=eEe();let mS=class{get ray(){return this._ray}get distanceInRenderSpace(){return this.distance==null?null:(ci(IE,this.ray.direction,this.distance),mi(IE))}withinDistance(e){return!!tp(this)&&this.distanceInRenderSpace<=e}getIntersectionPoint(e){return!!tp(this)&&(ci(IE,this.ray.direction,this.distance),dr(e,this.ray.origin,IE),!0)}getTransformedNormal(e){return Sr(b1,this.normal),b1[3]=0,Gh(b1,b1,this.transformation),Sr(e,b1),ns(e,e)}constructor(e){this.intersector=4,this.normal=Y(),this.transformation=On(),this._ray=Ts(),this.init(e)}init(e){this.distance=this.target=this.drapedLayerOrder=this.renderPriority=null,this.intersector=4,nI(e,this._ray)}set(e,i,r,n,s,o,u){this.intersector=e,this.distance=r,Sr(this.normal,n??jS),Zd(this.transformation,s??fse),this.target=i,this.drapedLayerOrder=o,this.renderPriority=u}copy(e){nI(e.ray,this._ray),this.intersector=e.intersector,this.distance=e.distance,this.target=e.target,this.drapedLayerOrder=e.drapedLayerOrder,this.renderPriority=e.renderPriority,Sr(this.normal,e.normal),Zd(this.transformation,e.transformation)}};function tp(t){return t?.distance!=null}const IE=Y(),b1=Ha();let IUe=class{constructor(e,i,r){this.object=e,this.geometryId=i,this.primitiveIndex=r}},Hj=class extends mS{constructor(){super(...arguments),this.intersector=1}},kUe=class extends IUe{constructor(e,i){super(e.object,e.geometryId,e.primitiveIndex),this.center=mn(i)}};function OUe(t){return tp(t)&&t.intersector===1&&!!t.target&&"center"in t.target}let CUe=class{constructor(){this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.filteredLayerViewUids=[],this.store=2,this.normalRequired=!0,this.excludeLabels=!1}};function eY(t,e){const i=mi(t),r=Qz(t[2]/i),n=Math.atan2(t[1]/i,t[0]/i);return vt(e,i,r,n),e}const RUe=Hw();function Nx(t,e,i,r){return new Array(t,e,i,r)}function Hw(){return Nx(0,0,0,0)}function Tce(t,e){return Nx(t[0],t[1],t[2],e)}function PUe(t){return Nx(t[0],t[1],t[2],t[3])}function Gk(t,e,i){return Ece(t,e[0],e[1],e[2],i)}function Ece(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}function Mce(t,e){return Ace(t,e)}function Ace(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function sI(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function DUe(t){return Nx(t[0],t[1],t[2],t[3])}function NUe(t){t[0]=0,t[1]=0,t[2]=0,t[3]=0}function LUe(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=e,t}function Lx(t){return t[3]}function Wj(t,e){return vt(e,t[0],t[1],t[2])}function Xo(t){return vt(aI,t[0],t[1],t[2])}function Ice(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2]}function jUe(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2]}function zUe(t,e,i,r){t[0]=e,t[1]=i,t[2]=r}function FUe(t,e,i){Ice(t,qy(aI,e,i))}function VUe(t,e,i,r,n){t[0]=e,t[1]=i,t[2]=r,t[3]=n}function UUe(t){return hn(t[0],t[1],t[2],t[3])}function qUe(t,e,i){return t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=t[3]+e,i}function GUe(t,e,i){return t!==i&&sI(t,i),i}function BUe(t,e){return e}function Bk(t,e,i){if(e==null||!Oce(t,e,oI))return!1;let{t0:r,t1:n}=oI;if((r<0||n<r&&n>0)&&(r=n),r<0)return!1;if(i){const{origin:s,direction:o}=e;i[0]=s[0]+o[0]*r,i[1]=s[1]+o[1]*r,i[2]=s[2]+o[2]*r}return!0}function kce(t,e,i){const r=T8(e,i);if(!Oce(t,r,oI))return[];const{origin:n,direction:s}=r,{t0:o,t1:u}=oI,d=h=>{const m=Y();return fi(m,n,s,h),Hk(t,m,m)};return Math.abs(o-u)<Zi()?[d(o)]:[d(o),d(u)]}const oI={t0:0,t1:0};function Oce(t,e,i){const{origin:r,direction:n}=e,s=HUe;s[0]=r[0]-t[0],s[1]=r[1]-t[1],s[2]=r[2]-t[2];const o=n[0]*n[0]+n[1]*n[1]+n[2]*n[2];if(o===0)return!1;const u=2*(n[0]*s[0]+n[1]*s[1]+n[2]*s[2]),d=u*u-4*o*(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]-t[3]*t[3]);if(d<0)return!1;const h=Math.sqrt(d);return i.t0=(-u-h)/(2*o),i.t1=(-u+h)/(2*o),!0}const HUe=Y();function WUe(t,e){return Bk(t,e,null)}function ZUe(t,e,i){if(Bk(t,e,i))return i;const r=Cce(t,e,jt.get());return dr(i,e.origin,ci(jt.get(),e.direction,ec(e.origin,r)/mi(e.direction))),i}function Cce(t,e,i){const r=jt.get(),n=hce.get();yn(r,e.origin,e.direction);const s=Lx(t);yn(i,r,e.origin),ci(i,i,1/mi(i)*s);const o=Rce(t,e.origin),u=oUe(e.origin,i);return rne(n,u+o,r),qy(i,i,n),i}function JUe(t,e,i,r){const n=Lx(t),s=n*n,o=e+.5*Math.PI,u=i*i+s-2*Math.cos(o)*i*n,d=Math.sqrt(u),h=u-s;if(h<=0)return .5;const m=Math.sqrt(h),v=Math.acos(m/d)-Math.asin(n/(d/Math.sin(o)));return Math.min(1,(v+.5*r)/r)}function YUe(t,e,i){return Bk(t,e,i)?i:(tUe(e,Xo(t),i),Hk(t,i,i))}function Hk(t,e,i){const r=ei(jt.get(),e,Xo(t)),n=ci(jt.get(),r,t[3]/mi(r));return dr(i,n,Xo(t))}function QUe(t,e){const i=ei(jt.get(),e,Xo(t)),r=Lw(i),n=t[3]*t[3];return Math.sqrt(Math.abs(r-n))}function Rce(t,e){const i=ei(jt.get(),e,Xo(t)),r=mi(i),n=Lx(t),s=n+Math.abs(n-r);return Yz(n/s)}const SP=Y();function Pce(t,e,i,r){const n=ei(SP,e,Xo(t));switch(i){case 0:{const s=eY(n,SP)[2];return vt(r,-Math.sin(s),Math.cos(s),0)}case 1:{const s=eY(n,SP),o=s[1],u=s[2],d=Math.sin(o);return vt(r,-d*Math.cos(u),-d*Math.sin(u),Math.cos(o))}case 2:return ns(r,n);default:return}}function Dce(t,e){const i=ei(Zj,e,Xo(t));return mi(i)-t[3]}function XUe(t,e,i,r){const n=Dce(t,e),s=Pce(t,e,2,Zj),o=ci(Zj,s,i-n);return dr(r,e,o)}function KUe(t,e){const i=ep(Xo(t),e),r=Lx(t);return i<=r*r}function e9e(t,e,i=Hw()){const r=ec(Xo(t),Wj(e,tY)),n=t[3],s=e[3];return r+s<n?(sI(t,i),i):r+n<s?(sI(e,i),i):(Mx(aI,Xo(t),Wj(e,tY),(r+s-n)/(2*r)),Gk(i,aI,(r+n+s)/2),i)}const aI=Y(),tY=Y(),t9e=Hw(),Zj=Y(),Jst=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:RUe,altitudeAt:Dce,angleToSilhouette:Rce,axisAt:Pce,cameraFrustumCoverage:JUe,clear:NUe,clone:DUe,closestPoint:YUe,closestPointOnSilhouette:Cce,containsPoint:KUe,copy:sI,copyCenter:jUe,create:Hw,distanceToSilhouette:QUe,elevate:qUe,equals:Ace,exactEquals:Mce,fromCenterAndRadius:Tce,fromRadius:LUe,fromValues:Nx,fromVec4:PUe,getCenter:Wj,getCenterTemp:Xo,getExtent:BUe,getRadius:Lx,intersectLine:kce,intersectRay:Bk,intersectRayClosestSilhouette:ZUe,intersectsRay:WUe,projectPoint:Hk,set:Ece,setAltitudeAt:XUe,setCenter:Ice,setCenterFromValues:zUe,setExtent:GUe,setFromCenterAndRadius:Gk,setFromValues:VUe,setTransformedCenter:FUe,tmpSphere:t9e,toVec4:UUe,union:e9e},Symbol.toStringTag,{value:"Module"}));function i9e(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Nce(t,e,i){i*=.5;const r=Math.sin(i);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(i),t}function r9e(t,e){const i=2*Math.acos(e[3]),r=Math.sin(i/2);return r>Zi()?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),i}function M8(t,e,i){const r=e[0],n=e[1],s=e[2],o=e[3],u=i[0],d=i[1],h=i[2],m=i[3];return t[0]=r*m+o*u+n*h-s*d,t[1]=n*m+o*d+s*u-r*h,t[2]=s*m+o*h+r*d-n*u,t[3]=o*m-r*u-n*d-s*h,t}function n9e(t,e,i){i*=.5;const r=e[0],n=e[1],s=e[2],o=e[3],u=Math.sin(i),d=Math.cos(i);return t[0]=r*d+o*u,t[1]=n*d+s*u,t[2]=s*d-n*u,t[3]=o*d-r*u,t}function s9e(t,e,i){i*=.5;const r=e[0],n=e[1],s=e[2],o=e[3],u=Math.sin(i),d=Math.cos(i);return t[0]=r*d-s*u,t[1]=n*d+o*u,t[2]=s*d+r*u,t[3]=o*d-n*u,t}function o9e(t,e,i){i*=.5;const r=e[0],n=e[1],s=e[2],o=e[3],u=Math.sin(i),d=Math.cos(i);return t[0]=r*d+n*u,t[1]=n*d-r*u,t[2]=s*d+o*u,t[3]=o*d-s*u,t}function a9e(t,e){const i=e[0],r=e[1],n=e[2];return t[0]=i,t[1]=r,t[2]=n,t[3]=Math.sqrt(Math.abs(1-i*i-r*r-n*n)),t}function $3(t,e,i,r){const n=e[0],s=e[1],o=e[2],u=e[3];let d,h,m,v,b,_=i[0],x=i[1],$=i[2],E=i[3];return h=n*_+s*x+o*$+u*E,h<0&&(h=-h,_=-_,x=-x,$=-$,E=-E),1-h>Zi()?(d=Math.acos(h),m=Math.sin(d),v=Math.sin((1-r)*d)/m,b=Math.sin(r*d)/m):(v=1-r,b=r),t[0]=v*n+b*_,t[1]=v*s+b*x,t[2]=v*o+b*$,t[3]=v*u+b*E,t}function l9e(t){const e=hx,i=e(),r=e(),n=e(),s=Math.sqrt(1-i),o=Math.sqrt(i);return t[0]=s*Math.sin(2*Math.PI*r),t[1]=s*Math.cos(2*Math.PI*r),t[2]=o*Math.sin(2*Math.PI*n),t[3]=o*Math.cos(2*Math.PI*n),t}function u9e(t,e){const i=e[0],r=e[1],n=e[2],s=e[3],o=i*i+r*r+n*n+s*s,u=o?1/o:0;return t[0]=-i*u,t[1]=-r*u,t[2]=-n*u,t[3]=s*u,t}function gy(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Lce(t,e){const i=e[0]+e[4]+e[8];let r;if(i>0)r=Math.sqrt(i+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);const s=(n+1)%3,o=(n+2)%3;r=Math.sqrt(e[3*n+n]-e[3*s+s]-e[3*o+o]+1),t[n]=.5*r,r=.5/r,t[3]=(e[3*s+o]-e[3*o+s])*r,t[s]=(e[3*s+n]+e[3*n+s])*r,t[o]=(e[3*o+n]+e[3*n+o])*r}return t}function c9e(t,e,i,r){const n=.5*Math.PI/180;e*=n,i*=n,r*=n;const s=Math.sin(e),o=Math.cos(e),u=Math.sin(i),d=Math.cos(i),h=Math.sin(r),m=Math.cos(r);return t[0]=s*d*m-o*u*h,t[1]=o*u*m+s*d*h,t[2]=o*d*h-s*u*m,t[3]=o*d*m+s*u*h,t}function d9e(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}const p9e=N0,Jj=d8,h9e=xue,f9e=M8,m9e=KA,y9e=f8,g9e=m8,jce=p8,v9e=jce,zce=h8,b9e=zce,A8=Aue,w9e=pS,_9e=tI;function S9e(t,e,i){const r=ht(e,i);return r<-.999999?(yn(hu,x9e,e),qoe(hu)<1e-6&&yn(hu,$9e,e),ns(hu,hu),Nce(t,hu,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(yn(hu,e,i),t[0]=hu[0],t[1]=hu[1],t[2]=hu[2],t[3]=1+r,A8(t,t))}const hu=Y(),x9e=Ms(1,0,0),$9e=Ms(0,1,0);function T9e(t,e,i,r,n,s){return $3(iY,e,n,s),$3(rY,i,r,s),$3(t,iY,rY,2*s*(1-s)),t}const iY=lp(),rY=lp();function E9e(t,e,i,r){const n=M9e;return n[0]=i[0],n[3]=i[1],n[6]=i[2],n[1]=r[0],n[4]=r[1],n[7]=r[2],n[2]=-e[0],n[5]=-e[1],n[8]=-e[2],A8(t,Lce(t,n))}const M9e=tu();Object.freeze(Object.defineProperty({__proto__:null,add:h9e,calculateW:a9e,conjugate:gy,copy:p9e,dot:y9e,equals:_9e,exactEquals:w9e,fromEuler:c9e,fromMat3:Lce,getAxisAngle:r9e,identity:i9e,invert:u9e,len:v9e,length:jce,lerp:g9e,mul:f9e,multiply:M8,normalize:A8,random:l9e,rotateX:n9e,rotateY:s9e,rotateZ:o9e,rotationTo:S9e,scale:m9e,set:Jj,setAxes:E9e,setAxisAngle:Nce,slerp:$3,sqlerp:T9e,sqrLen:b9e,squaredLength:zce,str:d9e},Symbol.toStringTag,{value:"Module"}));const A9e=new we(oee),A2=new we(FI),I2=new we(VI),I9e=new we(aee);function lw(t){const e=nY.get(t);if(e)return e;let i=A9e;if(t)if(t===A2)i=A2;else if(t===I2)i=I2;else{const r=t.wkid,n=t.latestWkid;if(r!=null||n!=null)Ub(r)||Ub(n)?i=A2:(qb(r)||qb(n))&&(i=I2);else{const s=t.wkt2??t.wkt;if(s){const o=s.toUpperCase();o===k9e?i=A2:o===O9e&&(i=I2)}}}return nY.set(t,i),i}const nY=new Map,k9e=A2.wkt.toUpperCase(),O9e=I2.wkt.toUpperCase();function Fce(t,e,i){const r=Math.sin(t),n=Math.cos(t),s=Math.sin(e),o=Math.cos(e),u=i;return u[0]=-r,u[4]=-s*n,u[8]=o*n,u[12]=0,u[1]=n,u[5]=-s*r,u[9]=o*r,u[13]=0,u[2]=0,u[6]=o,u[10]=s,u[14]=0,u[3]=0,u[7]=0,u[11]=0,u[15]=1,u}function C9e(t,e,i){return Fce(t,e,i),Ya(i,i),i}function R9e(t,e,i,r){const n=Hie(t,r);if(n==null)return!1;const s=n.source.spatialReferenceId,o=n.dest.spatialReferenceId;if(s===o&&!xP(o)&&(s!==0||Fi(t,r)))return ine(i,e),!0;if(xP(o)){const d=N1[s][10],h=N1[10][o];return d!=null&&h!=null&&(d(e,0,Jp,0),h(Jp,0,Yp,0),Fce(kE*Jp[0],kE*Jp[1],i),i[12]=Yp[0],i[13]=Yp[1],i[14]=Yp[2],!0)}const u=xP(s);if((o===3||o===11||o===2||o===5)&&(s===2||u||s===3||s===5)){const d=N1[s][10],h=N1[10][o];return d!=null&&h!=null&&(d(e,0,Jp,0),h(Jp,0,Yp,0),u?C9e(kE*Jp[0],kE*Jp[1],i):vx(i),i[12]=Yp[0],i[13]=Yp[1],i[14]=Yp[2],!0)}return!1}function xP(t){return t===1||t===6||t===8||t===4}const kE=$w(1),Jp=Y(),Yp=Y();let I8=class{constructor(e,i,r=i){this.data=e,this.size=i,this.stride=r}},Qst=class extends I8{constructor(e,i,r,n=!1,s=r){super(e,r,s),this.indices=i,this.exclusive=n}};const uw=1e-6,w1=Y(),OE=Y();function P9e(t,e){const{data:i,size:r}=t,n=i.length/r;if(n<=0)return;const s=new G9e(t);Qj(w1,s.minProj,s.maxProj),k2(w1,w1,.5),Na(OE,s.maxProj,s.minProj);const o=Yj(OE),u=new B9e;u.quality=o,n<14&&(t=new I8(new Float64Array(s.buffer,112,42),3));const d=Y(),h=Y(),m=Y(),v=Y(),b=Y(),_=Y(),x=Y();switch(D9e(s,t,x,d,h,m,v,b,_,u)){case 1:return void lY(w1,OE,e);case 2:return void U9e(t,v,e)}N9e(t,x,d,h,m,v,b,_,u),Vce(t,u.b0,u.b1,u.b2,nb,sb);const $=Y();Na($,sb,nb),u.quality=Yj($),u.quality<o?Uce(u.b0,u.b1,u.b2,nb,sb,$,e):lY(w1,OE,e)}function D9e(t,e,i,r,n,s,o,u,d,h){return L9e(t,r,n),Xj(r,n)<uw?1:(Na(o,r,n),dn(o,o),j9e(e,r,o,s)<uw?2:(Na(u,n,s),dn(u,u),Na(d,s,r),dn(d,d),La(i,u,o),dn(i,i),Fm(e,i,o,u,d,h),0))}const _1=Y(),S1=Y(),ma=Y(),ya=Y(),ga=Y(),Qp=Y(),Xp=Y(),Kp=Y();function N9e(t,e,i,r,n,s,o,u,d){z9e(t,e,i,_1,S1),_1[0]!==void 0&&(Na(ma,_1,i),dn(ma,ma),Na(ya,_1,r),dn(ya,ya),Na(ga,_1,n),dn(ga,ga),La(Qp,ya,s),dn(Qp,Qp),La(Xp,ga,o),dn(Xp,Xp),La(Kp,ma,u),dn(Kp,Kp),Fm(t,Qp,s,ya,ma,d),Fm(t,Xp,o,ga,ya,d),Fm(t,Kp,u,ma,ga,d)),S1[0]!==void 0&&(Na(ma,S1,i),dn(ma,ma),Na(ya,S1,r),dn(ya,ya),Na(ga,S1,n),dn(ga,ga),La(Qp,ya,s),dn(Qp,Qp),La(Xp,ga,o),dn(Xp,Xp),La(Kp,ma,u),dn(Kp,Kp),Fm(t,Qp,s,ya,ma,d),Fm(t,Xp,o,ga,ya,d),Fm(t,Kp,u,ma,ga,d))}function L9e(t,e,i){let r=Xj(t.maxVert[0],t.minVert[0]),n=0;for(let s=1;s<7;++s){const o=Xj(t.maxVert[s],t.minVert[s]);o>r&&(r=o,n=s)}qo(e,t.minVert[n]),qo(i,t.maxVert[n])}const va=[0,0,0];function j9e(t,e,i,r){const{data:n,size:s}=t;let o=Number.NEGATIVE_INFINITY,u=0;for(let d=0;d<n.length;d+=s){va[0]=n[d]-e[0],va[1]=n[d+1]-e[1],va[2]=n[d+2]-e[2];const h=i[0]*va[0]+i[1]*va[1]+i[2]*va[2],m=i[0]*i[0]+i[1]*i[1]+i[2]*i[2],v=va[0]*va[0]+va[1]*va[1]+va[2]*va[2]-h*h/m;v>o&&(o=v,u=d)}return qo(r,n,u),o}const _r=Tt();function z9e(t,e,i,r,n){V9e(t,e,_r,n,r);const s=Gce(i,e);_r[1]-uw<=s&&(r[0]=void 0),_r[0]+uw>=s&&(n[0]=void 0)}const sY=Y(),oY=Y(),aY=Y(),fv=Y(),mv=Y(),CE=Y();function Fm(t,e,i,r,n,s){if(qce(e)<uw)return;La(sY,i,e),La(oY,r,e),La(aY,n,e),rb(t,e,_r),mv[1]=_r[0],fv[1]=_r[1],CE[1]=fv[1]-mv[1];const o=[i,r,n],u=[sY,oY,aY];for(let d=0;d<3;++d){rb(t,o[d],_r),mv[0]=_r[0],fv[0]=_r[1],rb(t,u[d],_r),mv[2]=_r[0],fv[2]=_r[1],CE[0]=fv[0]-mv[0],CE[2]=fv[2]-mv[2];const h=Yj(CE);h<s.quality&&(qo(s.b0,o[d]),qo(s.b1,e),qo(s.b2,u[d]),s.quality=h)}}const F9e=Y();function rb(t,e,i){const{data:r,size:n}=t;i[0]=Number.POSITIVE_INFINITY,i[1]=Number.NEGATIVE_INFINITY;for(let s=0;s<r.length;s+=n){const o=r[s]*e[0]+r[s+1]*e[1]+r[s+2]*e[2];i[0]=Math.min(i[0],o),i[1]=Math.max(i[1],o)}}function V9e(t,e,i,r,n){const{data:s,size:o}=t;qo(r,s),qo(n,r),i[0]=Gce(F9e,e),i[1]=i[0];for(let u=o;u<s.length;u+=o){const d=s[u]*e[0]+s[u+1]*e[1]+s[u+2]*e[2];d<i[0]&&(i[0]=d,qo(r,s,u)),d>i[1]&&(i[1]=d,qo(n,s,u))}}function lY(t,e,i){i.center=t,i.halfSize=ci(e,e,.5),i.quaternion=$8}const qc=Y(),yv=Y(),x1=Y(),nb=Y(),sb=Y(),uY=Y();function U9e(t,e,i){qo(qc,e),Math.abs(e[0])>Math.abs(e[1])&&Math.abs(e[0])>Math.abs(e[2])?qc[0]=0:Math.abs(e[1])>Math.abs(e[2])?qc[1]=0:qc[2]=0,qce(qc)<uw&&(qc[0]=qc[1]=qc[2]=1),La(yv,e,qc),dn(yv,yv),La(x1,e,yv),dn(x1,x1),Vce(t,e,yv,x1,nb,sb),Na(uY,sb,nb),Uce(e,yv,x1,nb,sb,uY,i)}function Vce(t,e,i,r,n,s){rb(t,e,_r),n[0]=_r[0],s[0]=_r[1],rb(t,i,_r),n[1]=_r[0],s[1]=_r[1],rb(t,r,_r),n[2]=_r[0],s[2]=_r[1]}const om=Y(),$1=Y(),RE=Y(),fu=zee(1,0,0,0,1,0,0,0,1),q9e=lp();function Uce(t,e,i,r,n,s,o){fu[0]=t[0],fu[1]=t[1],fu[2]=t[2],fu[3]=e[0],fu[4]=e[1],fu[5]=e[2],fu[6]=i[0],fu[7]=i[1],fu[8]=i[2],o.quaternion=H9e(q9e,fu),Qj(om,r,n),k2(om,om,.5),k2($1,t,om[0]),k2(RE,e,om[1]),Qj($1,$1,RE),k2(RE,i,om[2]),o.center=dr($1,$1,RE),o.halfSize=ci(om,s,.5)}const wo=7;let G9e=class{constructor(e){this.minVert=new Array(wo),this.maxVert=new Array(wo);const i=64*wo;this.buffer=new ArrayBuffer(i);let r=0;this.minProj=new Float64Array(this.buffer,r,wo),r+=8*wo,this.maxProj=new Float64Array(this.buffer,r,wo),r+=8*wo;for(let d=0;d<wo;++d)this.minVert[d]=new Float64Array(this.buffer,r,3),r+=24;for(let d=0;d<wo;++d)this.maxVert[d]=new Float64Array(this.buffer,r,3),r+=24;for(let d=0;d<wo;++d)this.minProj[d]=Number.POSITIVE_INFINITY,this.maxProj[d]=Number.NEGATIVE_INFINITY;const n=new Array(wo),s=new Array(wo),{data:o,size:u}=e;for(let d=0;d<o.length;d+=u){let h=o[d];h<this.minProj[0]&&(this.minProj[0]=h,n[0]=d),h>this.maxProj[0]&&(this.maxProj[0]=h,s[0]=d),h=o[d+1],h<this.minProj[1]&&(this.minProj[1]=h,n[1]=d),h>this.maxProj[1]&&(this.maxProj[1]=h,s[1]=d),h=o[d+2],h<this.minProj[2]&&(this.minProj[2]=h,n[2]=d),h>this.maxProj[2]&&(this.maxProj[2]=h,s[2]=d),h=o[d]+o[d+1]+o[d+2],h<this.minProj[3]&&(this.minProj[3]=h,n[3]=d),h>this.maxProj[3]&&(this.maxProj[3]=h,s[3]=d),h=o[d]+o[d+1]-o[d+2],h<this.minProj[4]&&(this.minProj[4]=h,n[4]=d),h>this.maxProj[4]&&(this.maxProj[4]=h,s[4]=d),h=o[d]-o[d+1]+o[d+2],h<this.minProj[5]&&(this.minProj[5]=h,n[5]=d),h>this.maxProj[5]&&(this.maxProj[5]=h,s[5]=d),h=o[d]-o[d+1]-o[d+2],h<this.minProj[6]&&(this.minProj[6]=h,n[6]=d),h>this.maxProj[6]&&(this.maxProj[6]=h,s[6]=d)}for(let d=0;d<wo;++d){let h=n[d];qo(this.minVert[d],o,h),h=s[d],qo(this.maxVert[d],o,h)}}},B9e=class{constructor(){this.b0=Ms(1,0,0),this.b1=Ms(0,1,0),this.b2=Ms(0,0,1),this.quality=0}};function Yj(t){return t[0]*t[1]+t[0]*t[2]+t[1]*t[2]}function Qj(t,e,i){t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2]}function Na(t,e,i){t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2]}function k2(t,e,i){t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i}function qo(t,e,i=0){t[0]=e[i],t[1]=e[i+1],t[2]=e[i+2]}function La(t,e,i){const r=e[0],n=e[1],s=e[2],o=i[0],u=i[1],d=i[2];t[0]=n*d-s*u,t[1]=s*o-r*d,t[2]=r*u-n*o}function dn(t,e){const i=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(i>0){const r=1/Math.sqrt(i);t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r}}function qce(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function Xj(t,e){const i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return i*i+r*r+n*n}function Gce(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function H9e(t,e){const i=e[0]+e[4]+e[8];if(i>0){let r=Math.sqrt(i+1);t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r}else{let r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);const n=(r+1)%3,s=(r+2)%3;let o=Math.sqrt(e[3*r+r]-e[3*n+n]-e[3*s+s]+1);t[r]=.5*o,o=.5/o,t[3]=(e[3*n+s]-e[3*s+n])*o,t[n]=(e[3*n+r]+e[3*r+n])*o,t[s]=(e[3*s+r]+e[3*r+s])*o}return t}let Bce=class T3{constructor(e=Bie,i=r7e,r=$8){this._data=[e[0],e[1],e[2],i[0],i[1],i[2],r[0],r[1],r[2],r[3]]}clone(){return T3.fromData(this._data)}invalidate(){this._data[3]=-1}get isValid(){return this._data[3]>=0}static fromData(e){const i=new T3;return i._copyFromData(e),i}static fromJSON(e){return new T3(e.center,e.halfSize,e.quaternion)}copy(e){this._copyFromData(e.data)}_copyFromData(e){for(let i=0;i<10;++i)this._data[i]=e[i]}get center(){return vt(jt.get(),this._data[0],this._data[1],this._data[2])}get centerX(){return this._data[0]}get centerY(){return this._data[1]}get centerZ(){return this._data[2]}getCenter(e){return e[0]=this._data[0],e[1]=this._data[1],e[2]=this._data[2],e}set center(e){this._data[0]=e[0],this._data[1]=e[1],this._data[2]=e[2]}setCenter(e,i,r){this._data[0]=e,this._data[1]=i,this._data[2]=r}get halfSize(){return vt(jt.get(),this._data[3],this._data[4],this._data[5])}get halfSizeX(){return this._data[3]}get halfSizeY(){return this._data[4]}get halfSizeZ(){return this._data[5]}getHalfSize(e){return e[0]=this._data[3],e[1]=this._data[4],e[2]=this._data[5],e}set halfSize(e){this._data[3]=e[0],this._data[4]=e[1],this._data[5]=e[2]}get quaternion(){return Jj(eUe.get(),this._data[6],this._data[7],this._data[8],this._data[9])}getQuaternion(e){return e[0]=this._data[6],e[1]=this._data[7],e[2]=this._data[8],e[3]=this._data[9],e}set quaternion(e){this._data[6]=e[0],this._data[7]=e[1],this._data[8]=e[2],this._data[9]=e[3]}get data(){return this._data}getCorners(e){const i=this._data,r=Jj(ai,i[6],i[7],i[8],i[9]);for(let n=0;n<8;++n){const s=e[n];s[0]=(1&n?-1:1)*i[3],s[1]=(2&n?-1:1)*i[4],s[2]=(4&n?-1:1)*i[5],Ra(s,s,r),s[0]+=i[0],s[1]+=i[1],s[2]+=i[2]}}doesIntersectFrustumConservativeApproximation(e){return this.intersectPlane(e[0])<=0&&this.intersectPlane(e[1])<=0&&this.intersectPlane(e[2])<=0&&this.intersectPlane(e[3])<=0&&this.intersectPlane(e[4])<=0&&this.intersectPlane(e[5])<=0}get radius(){const e=this._data[3],i=this._data[4],r=this._data[5];return Math.sqrt(e*e+i*i+r*r)}intersectSphere(e){Ye[0]=this._data[0]-e[0],Ye[1]=this._data[1]-e[1],Ye[2]=this._data[2]-e[2];const i=this.getQuaternion(Ud);return gy(ai,i),Ra(Ye,Ye,ai),BS(Ye,Ye),Gc[0]=Math.min(Ye[0],this._data[3]),Gc[1]=Math.min(Ye[1],this._data[4]),Gc[2]=Math.min(Ye[2],this._data[5]),IA(Gc,Ye)<e[3]*e[3]}intersectSphereWithMBS(e,i=this.radius){const r=this._data;Ye[0]=r[0]-e[0],Ye[1]=r[1]-e[1],Ye[2]=r[2]-e[2];const n=e[3],s=n+i;return!(Gy(Ye)>s*s)&&(ai[0]=-r[6],ai[1]=-r[7],ai[2]=-r[8],ai[3]=r[9],Ra(Ye,Ye,ai),BS(Ye,Ye),Gc[0]=Math.min(Ye[0],r[3]),Gc[1]=Math.min(Ye[1],r[4]),Gc[2]=Math.min(Ye[2],r[5]),IA(Gc,Ye)<n*n)}intersectPlane(e){const i=e[0]*this._data[0]+e[1]*this._data[1]+e[2]*this._data[2]+e[3],r=this.projectedRadius(e);return i>r?1:i<-r?-1:0}intersectRay(e,i,r=0){const n=this._data,s=ai;s[0]=-n[6],s[1]=-n[7],s[2]=-n[8],s[3]=n[9],Ye[0]=e[0]-n[0],Ye[1]=e[1]-n[1],Ye[2]=e[2]-n[2];const o=Ra(Ye,Ye,ai),u=Ra(Gc,i,ai);let d=-1/0,h=1/0;const m=this.getHalfSize(ob);for(let v=0;v<3;v++){const b=o[v],_=u[v],x=m[v]+r;if(Math.abs(_)>1e-6){const $=(x-b)/_,E=(-x-b)/_;d=Math.max(d,Math.min($,E)),h=Math.min(h,Math.max($,E))}else if(b>x||b<-x)return!1}return d<=h}projectedArea(e,i,r,n){const s=this.getQuaternion(Ud);gy(ai,s),Ye[0]=e[0]-this._data[0],Ye[1]=e[1]-this._data[1],Ye[2]=e[2]-this._data[2],Ra(Ye,Ye,ai);const o=this.getHalfSize(ob),u=Ye[0]<-o[0]?-1:Ye[0]>o[0]?1:0,d=Ye[1]<-o[1]?-1:Ye[1]>o[1]?1:0,h=Ye[2]<-o[2]?-1:Ye[2]>o[2]?1:0,m=Math.abs(u)+Math.abs(d)+Math.abs(h);if(m===0)return 1/0;const v=m===1?4:6,b=6*(u+3*d+9*h+13);fA(w0,s),Nee(w0,w0,o);const _=this.getCenter(zl);for(let E=0;E<v;E++){const A=J9e[b+E];vt(Ye,((1&A)<<1)-1,(2&A)-1,((4&A)>>1)-1),Foe(Ye,Ye,w0),dr(am,_,Ye),am[3]=1,Gh(am,am,i);const O=1/Math.max(1e-6,am[3]);pl[2*E]=am[0]*O,pl[2*E+1]=am[1]*O}const x=2*v-2;let $=pl[0]*(pl[3]-pl[x+1])+pl[x]*(pl[1]-pl[x-1]);for(let E=2;E<x;E+=2)$+=pl[E]*(pl[E+3]-pl[E-1]);return Math.abs($)*r*n*.125}projectedRadius(e){const i=this.getQuaternion(Ud);return gy(ai,i),Ra(Ye,e,ai),Math.abs(Ye[0]*this._data[3])+Math.abs(Ye[1]*this._data[4])+Math.abs(Ye[2]*this._data[5])}minimumDistancePlane(e){return e[0]*this._data[0]+e[1]*this._data[1]+e[2]*this._data[2]+e[3]-this.projectedRadius(e)}maximumDistancePlane(e){return e[0]*this._data[0]+e[1]*this._data[1]+e[2]*this._data[2]+e[3]+this.projectedRadius(e)}toAaBoundingBox(e){const i=this.getQuaternion(Ud),r=fA(w0,i),n=this._data[3]*Math.abs(r[0])+this._data[4]*Math.abs(r[3])+this._data[5]*Math.abs(r[6]),s=this._data[3]*Math.abs(r[1])+this._data[4]*Math.abs(r[4])+this._data[5]*Math.abs(r[7]),o=this._data[3]*Math.abs(r[2])+this._data[4]*Math.abs(r[5])+this._data[5]*Math.abs(r[8]);e[0]=this._data[0]-n,e[1]=this._data[1]-s,e[2]=this._data[2]-o,e[3]=this._data[0]+n,e[4]=this._data[1]+s,e[5]=this._data[2]+o}transform(e,i,r,n=0,s=lw(r),o=lw(i),u=ik(i,o)){if(r===s)i.isGeographic?e7e(this,e,i,n,o):K9e(this,e,i,n,o,u);else if(i.isWGS84&&(r.isWebMercator||AD(r)))Q9e(i,this,r,e,n);else if(i.isWebMercator&&AD(r))X9e(i,this,r,e,n);else{const d=this.getCenter(zl);d[2]+=n,uc(d,i,0,d,r,0),e.center=d,this!==e&&(e.quaternion=this.getQuaternion(Ud),e.halfSize=this.getHalfSize(ob))}}};const ai=lp(),Ud=lp(),W9e=lp(),Ye=Y(),Gc=Y(),am=Ha();function Z9e(t,e=new Bce){return P9e(t,e),e}const pl=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2],J9e=(()=>{const t=new Int8Array(162);let e=0;const i=r=>{for(let n=0;n<r.length;n++)t[e+n]=r[n];e+=6};return i([6,2,3,1,5,4]),i([0,2,3,1,5,4]),i([0,2,3,7,5,4]),i([0,1,3,2,6,4]),i([0,1,3,2,0,0]),i([0,1,5,7,3,2]),i([0,1,3,7,6,4]),i([0,1,3,7,6,2]),i([0,1,5,7,6,2]),i([0,1,5,4,6,2]),i([0,1,5,4,0,0]),i([0,1,3,7,5,4]),i([0,2,6,4,0,0]),i([0,0,0,0,0,0]),i([1,3,7,5,0,0]),i([2,3,7,6,4,0]),i([2,3,7,6,0,0]),i([2,3,1,5,7,6]),i([0,1,5,7,6,2]),i([0,1,5,7,6,4]),i([0,1,3,7,6,4]),i([4,5,7,6,2,0]),i([4,5,7,6,0,0]),i([4,5,1,3,7,6]),i([0,2,3,7,5,4]),i([6,2,3,7,5,4]),i([6,2,3,1,5,4]),t})();function Y9e(t,e,i,r,n){const s=t.getQuaternion(Ud);n.quaternion=s,gy(ai,s);const o=t.getCenter(zl),u=t.getHalfSize(ob);{Ra(Zt,o,ai),BS(Gu,Zt),joe(So,Gu,u),fn(So,Gu,So);const d=mi(So);dr(So,Gu,u);const h=mi(So);if(d<i)n.center=o,vt(Zt,i,i,i),n.halfSize=dr(Zt,u,Zt);else{const m=h>0?1+e/h:1,v=d>0?1+i/d:1,b=(v+m)/2,_=(v-m)/2;ci(So,Gu,_),n.halfSize=fi(So,So,u,b),ci(So,Gu,b),fi(So,So,u,_),Loe(Zt,Zt),zF(Zt,So,Zt);const x=t.getQuaternion(W9e);n.center=Ra(Zt,Zt,x)}}return n}function Q9e(t,e,i,r,n){e.getCenter(zl),zl[2]+=n;const s=lw(i);uc(zl,t,0,zl,s,0),Hce(s,e,zl,i,r)}function X9e(t,e,i,r,n){e.getCenter(zl),zl[2]+=n,Hce(t,e,zl,i,r)}function Hce(t,e,i,r,n){const s=e.getQuaternion(Ud),o=fA(w0,s),u=e.getHalfSize(ob);for(let d=0;d<8;++d){for(let h=0;h<3;++h)Bu[h]=u[h]*(d&1<<h?-1:1);for(let h=0;h<3;++h){let m=i[h];for(let v=0;v<3;++v)m+=Bu[v]*o[3*v+h];E3[3*d+h]=m}}uc(E3,t,0,E3,r,0,8),Z9e(t7e,n)}function K9e(t,e,i,r,n=lw(i),s=ik(i,n)){t.getCorners(cY),t.getCenter(Bu),Bu[2]+=r,R9e(i,Bu,_o,n),e.setCenter(_o[12],_o[13],_o[14]);const o=2*Math.sqrt(1+_o[0]+_o[5]+_o[10]);ai[0]=(_o[6]-_o[9])/o,ai[1]=(_o[8]-_o[2])/o,ai[2]=(_o[1]-_o[4])/o,ai[3]=.25*o;const u=t.getQuaternion(Ud);e.quaternion=M8(ai,ai,u),gy(ai,ai),vt(Gu,0,0,0);const d=e.getCenter(i7e);for(const h of cY)h[2]+=r,s(h,0,h,0),fn(Zt,h,d),Ra(Zt,Zt,ai),BS(Zt,Zt),zoe(Gu,Gu,Zt);e.halfSize=Gu}function e7e(t,e,i,r,n=lw(i)){const s=UI(i),o=1+Math.max(0,r)/(s.radius+t.centerZ);t.getCenter(Bu),Bu[2]+=r,uc(Bu,i,0,Bu,n,0),e.center=Bu;const u=t.getQuaternion(Ud);e.quaternion=u,gy(ai,u),vt(Zt,0,0,1),Ra(Zt,Zt,ai);const d=t.getHalfSize(ob);vt(Zt,d[0]*Math.abs(Zt[0]),d[1]*Math.abs(Zt[1]),d[2]*Math.abs(Zt[2])),ci(Zt,Zt,s.inverseFlattening),dr(Zt,d,Zt),e.halfSize=ci(Zt,Zt,o)}const E3=new Array(24),t7e=new I8(E3,3),Bu=Y(),zl=Y(),i7e=Y(),ob=Y(),w0=tu(),_o=On(),cY=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],Zt=Y(),Gu=Y(),So=Y(),r7e=zie(-1,-1,-1);let n7e=class{constructor(){this._transform=On(),this._transformInverse=new PE({value:this._transform},hy,On),this._transformInverseTranspose=new PE(this._transformInverse,Ya,On),this._transformTranspose=new PE({value:this._transform},Ya,On),this._transformInverseRotation=new PE({value:this._transform},Lee,tu)}_invalidateLazyTransforms(){this._transformInverse.invalidate(),this._transformInverseTranspose.invalidate(),this._transformTranspose.invalidate(),this._transformInverseRotation.invalidate()}get transform(){return this._transform}get inverse(){return this._transformInverse.value}get inverseTranspose(){return this._transformInverseTranspose.value}get inverseRotation(){return this._transformInverseRotation.value}get transpose(){return this._transformTranspose.value}setTransformMatrix(e){Zd(this._transform,e)}multiplyTransform(e){rw(this._transform,this._transform,e)}set(e){Zd(this._transform,e),this._invalidateLazyTransforms()}setAndInvalidateLazyTransforms(e,i){this.setTransformMatrix(e),this.multiplyTransform(i),this._invalidateLazyTransforms()}},PE=class{constructor(e,i,r){this._original=e,this._update=i,this._dirty=!0,this._transform=r()}invalidate(){this._dirty=!0}get value(){return this._dirty&&(this._update(this._transform,this._original.value),this._dirty=!1),this._transform}},s7e=class{constructor(e=0){this.componentLocalOriginLength=0,this._totalOffset=0,this._offset=0,this._tmpVertex=Y(),this._tmpMbs=Hw(),this._tmpObb=new Bce,this._resetOffset(e)}_resetOffset(e){this._offset=e,this._totalOffset=e}set offset(e){this._resetOffset(e)}get offset(){return this._offset}set componentOffset(e){this._totalOffset=this._offset+e}set localOrigin(e){this.componentLocalOriginLength=mi(e)}applyToVertex(e,i,r){const n=vt(Wce,e,i,r),s=vt(l7e,e,i,r+this.componentLocalOriginLength),o=this._totalOffset/mi(s);return fi(this._tmpVertex,n,s,o),this._tmpVertex}applyToAabb(e){const i=this.componentLocalOriginLength,r=e[0],n=e[1],s=e[2]+i,o=e[3],u=e[4],d=e[5]+i,h=Math.abs(r),m=Math.abs(n),v=Math.abs(s),b=Math.abs(o),_=Math.abs(u),x=Math.abs(d),$=.5*(1+Math.sign(r*o))*Math.min(h,b),E=.5*(1+Math.sign(n*u))*Math.min(m,_),A=.5*(1+Math.sign(s*d))*Math.min(v,x),O=Math.max(h,b),D=Math.max(m,_),R=Math.max(v,x),P=Math.sqrt($*$+E*E+A*A),j=Math.sign(h+r),Q=Math.sign(m+n),re=Math.sign(v+s),ce=Math.sign(b+o),ue=Math.sign(_+u),ye=Math.sign(x+d),he=this._totalOffset;if(P<he)return e[0]-=(1-j)*he,e[1]-=(1-Q)*he,e[2]-=(1-re)*he,e[3]+=ce*he,e[4]+=ue*he,e[5]+=ye*he,e;const Pe=he/Math.sqrt(O*O+D*D+R*R),ve=he/P,We=ve-Pe,ee=-We;return e[0]+=r*(j*ee+ve),e[1]+=n*(Q*ee+ve),e[2]+=s*(re*ee+ve),e[3]+=o*(ce*We+Pe),e[4]+=u*(ue*We+Pe),e[5]+=d*(ye*We+Pe),e}applyToMbs(e){const i=Xo(e),r=mi(i),n=this._totalOffset/r,s=fi(Zce,i,i,n),o=e[3]+e[3]*this._totalOffset/r;return Gk(this._tmpMbs,s,o),this._tmpMbs}applyToObb(e){return Y9e(e,this._totalOffset,this._totalOffset,1,this._tmpObb),this._tmpObb}},o7e=class{constructor(e=0){this.offset=e,this.sphere=Hw(),this.tmpVertex=Y()}applyToVertex(e,i,r){const n=this.objectTransform.transform,s=vt(Wce,e,i,r),o=qy(s,s,n),u=this.offset/mi(o);fi(o,o,o,u);const d=this.objectTransform.inverse;return qy(this.tmpVertex,o,d),this.tmpVertex}applyToMinMax(e,i){const r=this.offset/mi(e);fi(e,e,e,r);const n=this.offset/mi(i);fi(i,i,i,n)}applyToAabb(e){const i=this.offset/Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]+=e[0]*i,e[1]+=e[1]*i,e[2]+=e[2]*i;const r=this.offset/Math.sqrt(e[3]*e[3]+e[4]*e[4]+e[5]*e[5]);return e[3]+=e[3]*r,e[4]+=e[4]*r,e[5]+=e[5]*r,e}applyToBoundingSphere(e){const i=Xo(e),r=mi(i),n=this.offset/r,s=fi(Zce,i,i,n),o=e[3]+e[3]*this.offset/r;return Gk(this.sphere,s,o),this.sphere}};const dY=new o7e;function pY(t){return t!=null?(dY.offset=t,dY):null}new s7e;const a7e="terrain",Wce=Y(),l7e=Y(),Zce=Y(),hY=1e-5;let u7e=class{constructor(e){this.options=new CUe,this._results=new c7e,this.transform=new n7e,this.camera=new AUe,this.tolerance=hY,this.verticalOffset=null,this._ray=Ts(),this._rayEnd=Y(),this._rayBeginTransformed=Y(),this._rayEndTransformed=Y(),this.viewingMode=e??1}get results(){return this._results}get ray(){return this._ray}get rayBegin(){return this._ray.origin}get rayEnd(){return this._rayEnd}reset(e,i,r){this.resetWithRay(T8(e,i,this._ray),r)}resetWithRay(e,i){this.camera=i,e!==this._ray&&nI(e,this._ray),this.options.verticalOffset!==0?this.viewingMode===2?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null,dr(this._rayEnd,this._ray.origin,this._ray.direction),this._results.init(this._ray)}intersect(e=null,i,r,n,s){this.point=i,this.filterPredicate=n,this.tolerance=r??hY;const o=pY(this.verticalOffset);if(e&&e.length>0){const u=s?d=>{s(d)&&this.intersectObject(d)}:d=>{this.intersectObject(d)};for(const d of e){const h=d.getSpatialQueryAccelerator?.();h!=null?(o!=null?h.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,u,o):h.forEachAlongRay(this._ray.origin,this._ray.direction,u),this.options.selectionMode&&this.options.hud&&h.forEachDegenerateObject(u)):d.objects.forEach(m=>u(m))}}this.sortResults()}intersectObject(e){const i=e.geometries;if(!i)return;const r=e.effectiveTransformation,n=pY(this.verticalOffset);for(const s of i){if(!s.visible)continue;const{material:o,id:u}=s;if(!o.visible)continue;this.transform.setAndInvalidateLazyTransforms(r,s.transformation),qy(this._rayBeginTransformed,this.rayBegin,this.transform.inverse),qy(this._rayEndTransformed,this.rayEnd,this.transform.inverse);const d=this.transform.transform;n!=null&&(n.objectTransform=this.transform),o.intersect(s,this.transform.transform,this,this._rayBeginTransformed,this._rayEndTransformed,(h,m,v,b)=>this.handleObjectIntersection({object:e,geometryId:u,primitiveIndex:v},h,m,d,b))}}handleObjectIntersection(e,i,r,n,s){if(i<0||this.filterPredicate!=null&&!this.filterPredicate(this._ray.origin,this._rayEnd,i))return;const o=s?this._results.hud:this._results;e=s?new kUe(e,s):e;const u=s?d=>d.set(1,e,i,r):d=>d.set(4,e,i,r,n);if((o.min.distance==null||i<o.min.distance)&&u(o.min),this.options.store!==0&&(o.max.distance==null||i>o.max.distance)&&u(o.max),this.options.store===2)if(s){const d=new Hj(this._ray);u(d),this._results.hud.all.push(d)}else{const d=new mS(this._ray);u(d),this._results.all.push(d)}}sortResults(e=this._results.all){e.sort((i,r)=>i.distance!==r.distance?(i.distance??0)-(r.distance??0):i.drapedLayerOrder!==r.drapedLayerOrder?fY(i.drapedLayerOrder,r.drapedLayerOrder):fY(i.renderPriority,r.renderPriority))}};function fY(t,e){return(e??-Number.MAX_VALUE)-(t??-Number.MAX_VALUE)}let c7e=class{constructor(){this.min=new mS(Ts()),this.max=new mS(Ts()),this.hud={min:new Hj(Ts()),max:new Hj(Ts()),all:new Array},this.ground=new mS(Ts()),this.all=[]}init(e){this.min.init(e),this.max.init(e),this.ground.init(e),this.all.length=0,this.hud.min.init(e),this.hud.max.init(e),this.hud.all.length=0}},d7e=class{constructor(e){this.layerViewUid=e}},p7e=class extends d7e{constructor(e,i){super(e),this.graphicUid=i}};function h7e(t){return tp(t)&&t.intersector===6&&!!t.target}function f7e(t){return tp(t)&&t.intersector===2&&!!t.target}function m7e(t){return tp(t)&&t.intersector===9&&!!t.target}function y7e(t){return tp(t)&&t.intersector===5&&!!t.target}function g7e(t){return tp(t)&&t.intersector===4&&!!t.target}let uot=class extends p7e{constructor(e,i,r,n,s){super(e,i),this.layerViewUid=e,this.graphicUid=i,this.triangleNr=r,this.baseBoundingSphere=n,this.numLodLevels=s}};function v7e(t){return tp(t)&&t.intersector===3&&!!t.target}function b7e(t,e){const i=w7e(t,e);return i?.type==="graphic"?i.graphic:null}function w7e(t,e,i={}){if(t==null)return null;if(g7e(t)||OUe(t))return mY(t.target?.object,e,i);if(h7e(t)){const r=t.target.createGraphic();return{type:"graphic",graphic:r,layer:r.layer}}if(m7e(t)){const r=t.target.createVoxelGraphic();return{type:"graphic",graphic:r,layer:r.layer}}return y7e(t)||v7e(t)?mY(t.target,e,i):f7e(t)?_7e(t.target,e,i):null}function mY(t,e,i){if(t?.graphicUid==null)return null;const r=Jce(t,e);if(r==null)return null;if(r===e.graphics)return e.graphicsView==null||typeof t.graphicUid!="number"?null:e.graphicsView.getHit(t.graphicUid,i);const n=e.allLayerViews.find(s=>s.layer===r);return!n||n.suspended||t.graphicUid==null?null:"getHit"in n?n.getHit(t.graphicUid,i):null}function _7e(t,e,i){const r=Jce(t,e);if(r==null)return null;const n=e.allLayerViews.find(o=>o.layer===r);if(!n||n.suspended||!("getGraphicFromIntersectorTarget"in n))return null;const s=i.defer;return yY(n.getGraphicFromIntersectorTarget(t,{defer:s?o=>s(async()=>yY(await o())):void 0}))}function yY(t){return t!=null?{type:"graphic",graphic:t,layer:t.layer}:null}function Jce(t,e){return t?.layerViewUid==null?null:e.graphicsView!=null&&t.layerViewUid===e.graphicsView.uid?e.graphics:e.allLayerViews.find(i=>i.uid===t.layerViewUid)?.layer}function S7e(t){const e=t.getObjectId()??t.attributes?.[rUe];return t.origin&&e!=null?`o-${t.origin.id}-${e}`:`u-${t.uid}`}function x7e(t,e){const i=Kj(t,e.include,0),r=Kj(t,e.exclude,1);return{include:i.layerViewUids,exclude:r.layerViewUids,graphics:{include:i.graphicUids,exclude:r.graphicUids},mediaElements:{include:i.mediaElements,exclude:r.mediaElements}}}function Kj(t,e,i,r=new $7e){if(!e)return r;if(e instanceof Ti)E7e(r,S7e(e)),i===0&&(t.graphicsView!=null&&e.layer===t?M3(r,t.graphicsView.uid):e.layer&&$P(r,t,e.layer.uid));else if("layer"in e&&"element"in e)M7e(r,e.element),i===0&&$P(r,t,e.layer.uid);else if(Fb(e))for(const n of e)n===t.graphics&&t.graphicsView!=null?M3(r,t.graphicsView.uid):n===t.map.ground?M3(r,a7e):Kj(t,n,i,r);else"layer"in e&&T7e(r,t,e),"uid"in e&&$P(r,t,e.uid);return r}let $7e=class{constructor(){this.layerViewUids=null,this.graphicUids=null,this.mediaElements=null}};function $P(t,e,i){const r=e.allLayerViews.find(n=>n.layer.uid===i);r&&M3(t,r.uid)}function M3(t,e){t.layerViewUids??=new Map,t.layerViewUids.set(e,!0)}function T7e(t,e,i){const r=e.allLayerViews.find(s=>s.layer.uid===i.layer.uid);if(!r)return;t.layerViewUids??=new Map;const n=t.layerViewUids.get(r.uid);n!==!0&&(n?n.add(i.id):t.layerViewUids.set(r.uid,new Set([i.id])))}function E7e(t,e){t.graphicUids??=new Set,t.graphicUids.add(e)}function M7e(t,e){t.mediaElements??=new Set,t.mediaElements.add(e)}const A7e=2e5;let hs=class extends Rx{constructor(e){super(e),this.type="view",this.color=new Ie("#cf4ccf"),this.viewVisualizationEnabled=!0,this.include=null,this.exclude=null,this.numSamplesForPreview=50,this.numSamplesPerChunk=25,this._getQueryElevationDependencies=qa((i,r,n,s,o,u,d)=>({inputGraphicUid:i!=null?Yce(i):null,visibleLayers:r,maxIntersectionDistance:n,intersectOptions:s,view:o,stationary:u,spatialReference:d})),this._vecA=Y(),this._vecB=Y(),this._ray=Ts()}get minDemResolution(){const e=this._viewModel?.view;if(e==null||e.type!=="3d")return null;const i=e.pointsOfInterest?.focus?.worldUnitsPerContentPixel;return i==null?null:i*Kl(e.spatialReference)}get queryElevationDependencies(){const e=this._view;return e?this._getQueryElevationDependencies(this._viewModel?.input,this._visibleLayers,this._maxIntersectionDistance,this._intersectOptions,e,e.stationary,e.spatialReference):null}get _visibleLayers(){return this._view?.map?.allLayers?.filter(e=>e.visible).toArray()??[]}get _intersectOptions(){const e=this._view;return e==null||e.destroyed?{}:x7e(e,{include:this.include,exclude:[...this._pointCloudLayers,...Fb(this.exclude)?this.exclude:this.exclude?[this.exclude]:[]]})}get _pointCloudLayers(){const e=this._view;return e==null?[]:e.allLayerViews.toArray().filter(i=>i.layer?.type==="point-cloud").map(i=>i.layer)}get _view(){const e=this._viewModel?.view;return e!=null&&e.type==="3d"?e:null}get _maxIntersectionDistance(){const e=this._view;return e?.renderCoordsHelper?UI(e.spatialReference).radius/e.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY}get _intersector(){const e=this._view;if(e==null)return null;const i=new u7e(e.state.viewingMode),r=i.options;return r.hud=!1,r.invisibleTerrain=!1,r.backfacesTerrain=!1,r.selectionMode=!1,r.store=2,i}async queryElevation(e,{noDataValue:i,signal:r}){const n=this.queryElevationDependencies;if(n==null)throw new Error("ElevationProfileLineInput: no dependencies");const s=this._intersector;if(s==null)throw new Error("ElevationProfileLineInput: no view");const{intersectOptions:o,view:u,spatialReference:d}=n,h=u.renderCoordsHelper,m=u.sceneIntersectionHelper,v=this._vecA,b=this._vecA,_=this._vecB,x=this._ray;if(!d)return{geometry:e,noDataValue:i};const $=await cce.fromGeometry(e).project(d,r);if(!$)return{geometry:e,noDataValue:i};const E=$.coordinates,A=E.length;for(let O=0;O<A;++O){const D=E[O];vt(_,D.x,D.y,D.z??0),h.toRenderCoords(_,d,_),h.setAltitude(v,A7e,_);const R=T8(v,_,x);m.computeIntersection(R,s,!0,o);const P=I7e(n,s.results.all);P?(P.getIntersectionPoint(b),h.fromRenderCoords(b,b,d),D.z=b[2]):D.z=i}return{geometry:$.export(),noDataValue:i}}attach(e){const i=()=>this._onChange();return uo([super.attach(e),be(()=>this.queryElevationDependencies,i),Wo(()=>e.elevationProvider,"elevation-change",i,{onListenerAdd:i,onListenerRemove:i})])}};function I7e({view:t,inputGraphicUid:e,maxIntersectionDistance:i},r){for(const n of r){if(!n.withinDistance(i))continue;const s=b7e(n,t);if(s==null||Yce(s)!==e)return n}return null}function Yce(t){if(t.layer&&"objectIdField"in t.layer){const e=t.attributes[t.layer.objectIdField];if(e)return`o-${t.layer.id}-${e}`}return`u-${t.uid}`}l([p({type:Ie,nonNullable:!0})],hs.prototype,"color",void 0),l([p()],hs.prototype,"viewVisualizationEnabled",void 0),l([p()],hs.prototype,"include",void 0),l([p()],hs.prototype,"exclude",void 0),l([p({readOnly:!0})],hs.prototype,"minDemResolution",null),l([p()],hs.prototype,"queryElevationDependencies",null),l([p()],hs.prototype,"_visibleLayers",null),l([p()],hs.prototype,"_intersectOptions",null),l([p()],hs.prototype,"_pointCloudLayers",null),l([p()],hs.prototype,"_view",null),l([p()],hs.prototype,"_maxIntersectionDistance",null),l([p()],hs.prototype,"_intersector",null),hs=l([M("esri.widgets.ElevationProfile.ElevationProfileLineView")],hs);const k7e=hs,O7e={base:Rx,key:"type",typeMap:{ground:uce,input:YVe,query:QVe,view:k7e},errorContext:"elevation-profile-line"},C7e=fe.ofType(O7e);let Du=class extends hle(Nue(xi)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new my,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}get loaded(){return super.loaded}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}graphicChanged(e){this.emit("graphic-update",e)}};l([p({type:Cu})],Du.prototype,"elevationInfo",void 0),l([p(_A(my,"graphics"))],Du.prototype,"graphics",void 0),l([p({type:["show","hide"]})],Du.prototype,"listMode",void 0),l([p()],Du.prototype,"screenSizePerspectiveEnabled",void 0),l([p({readOnly:!0})],Du.prototype,"type",void 0),l([p({constructOnly:!0})],Du.prototype,"internal",void 0),Du=l([M("esri.layers.GraphicsLayer")],Du);function gY(t){switch(t){case 0:break;case 1:return"not owned by a graphics layer";case 2:return"no geometry";case 3:return"the geometry type is not supported";case 4:return"the symbol type is not supported"}return""}function R7e(t){if(t.graphic&&t.graphic.layer?.type!=="graphics")return 1;const e=t.operations?.data.type;if(!e)return 3;switch(e){case"polygon":case"point":case"polyline":case"mesh":break;default:return 3}return 0}function P7e(t){return D7e(t).result}function D7e(t){if(t.graphic&&t.graphic.layer?.type!=="graphics")return{result:1};if(!t.operations)return{result:2};const e=t.operations.data.type,i=t.operations.data.geometry;return e==="point"||e==="mesh"||e==="polyline"||e==="polygon"?{result:0,geometry:i}:{result:3}}function N7e(t){if(t.layer?.type!=="graphics")return 1;if(t.geometry==null)return 2;switch(t.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return 0;default:return 3}const e=t.symbol!=null&&t.symbol.type==="point-3d"&&t.symbol.symbolLayers;return e&&e.some(i=>i.type==="object")?0:4}function vY(t,e,i){if(!e||!t?.map)return;const{map:r}=t;r.layers.find(s=>s===e)||r.add(e,i)}function fot(t,e){const i=e?.type==="subtype-sublayer"?e.parent:e;return t.allLayerViews.find(r=>{const n=r.layer;return n===i||"sublayers"in n&&n.sublayers!=null&&n.sublayers.includes(i)})}function mot(t){return tne(t)||Fd(t)||OEe(t)||PEe(t)}let A3=class extends _e{constructor(e){super(e),this.enabled=!1}};l([p({type:Boolean,nonNullable:!0})],A3.prototype,"enabled",void 0),A3=l([M("esri.views.interactive.sketch.SketchLabelOptions")],A3);const k8=A3;let yS=class extends _e{constructor(e){super(e),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};l([p({type:String,nonNullable:!0})],yS.prototype,"mode",void 0),yS=l([M("esri.views.interactive.sketch.SketchTooltipElevationOptions")],yS);let Un=class extends _e{constructor(e){super(e),this.area=!0,this.coordinates=!0,this.direction=!0,this.distance=!0,this.elevation=!0,this.header=!0,this.helpMessage=!1,this.orientation=!0,this.radius=!0,this.rotation=!0,this.scale=!0,this.size=!0,this.totalLength=!0}};l([p({type:Boolean,nonNullable:!0})],Un.prototype,"area",void 0),l([p({type:Boolean,nonNullable:!0})],Un.prototype,"coordinates",void 0),l([p({type:Boolean,nonNullable:!0})],Un.prototype,"direction",void 0),l([p({type:Boolean,nonNullable:!0})],Un.prototype,"distance",void 0),l([p({type:Boolean,nonNullable:!0})],Un.prototype,"elevation",void 0),l([p({type:Boolean,nonNullable:!0})],Un.prototype,"header",void 0),l([p({type:Boolean,nonNullable:!0})],Un.prototype,"helpMessage",void 0),l([p({type:Boolean,nonNullable:!0})],Un.prototype,"orientation",void 0),l([p({type:Boolean,nonNullable:!0})],Un.prototype,"radius",void 0),l([p({type:Boolean,nonNullable:!0})],Un.prototype,"rotation",void 0),l([p({type:Boolean,nonNullable:!0})],Un.prototype,"scale",void 0),l([p({type:Boolean,nonNullable:!0})],Un.prototype,"size",void 0),l([p({type:Boolean,nonNullable:!0})],Un.prototype,"totalLength",void 0),Un=l([M("esri.views.interactive.sketch.SketchTooltipVisibleElements")],Un);const Qce=Un;let fs=class extends _e{constructor(e){super(e),this.enabled=!1,this.forceEnabled=!1,this.helpMessage=null,this.helpMessageIcon=null,this.inputEnabled=!0,this.elevation=new yS,this.placement="auto",this.offset=null,this.visibleElements=new Qce,this.visualVariables=null,this.xyMode="auto"}get effectiveEnabled(){return this.forceEnabled||this.enabled}};l([p({type:Boolean,nonNullable:!0})],fs.prototype,"enabled",void 0),l([p()],fs.prototype,"forceEnabled",void 0),l([p()],fs.prototype,"effectiveEnabled",null),l([p()],fs.prototype,"helpMessage",void 0),l([p()],fs.prototype,"helpMessageIcon",void 0),l([p({type:Boolean,nonNullable:!0})],fs.prototype,"inputEnabled",void 0),l([p({type:yS,nonNullable:!0})],fs.prototype,"elevation",void 0),l([p()],fs.prototype,"placement",void 0),l([p()],fs.prototype,"offset",void 0),l([p({type:Qce,nonNullable:!0})],fs.prototype,"visibleElements",void 0),l([p()],fs.prototype,"visualVariables",void 0),l([p()],fs.prototype,"xyMode",void 0),fs=l([M("esri.views.interactive.sketch.SketchTooltipOptions")],fs);const O8=fs;let _0=class extends _e{constructor(e){super(e),this.length=null,this.verticalLength=null,this.area=null}};l([p()],_0.prototype,"length",void 0),l([p()],_0.prototype,"verticalLength",void 0),l([p()],_0.prototype,"area",void 0),_0=l([M("esri.views.interactive.sketch.Units")],_0);const lI=_0;let bh=class extends _e{constructor(e){super(e),this.directionMode="relative",this.relativeDirectionIsBilateral=!1}get effectiveDirectionMode(){switch(this.directionMode){case"relative":return this.relativeDirectionIsBilateral?"relative-bilateral":"relative";case"absolute":return"absolute"}}get displayUnits(){return this._get("displayUnits")??new lI}set displayUnits(e){this._set("displayUnits",e)}get inputUnits(){return this._get("inputUnits")??new lI}set inputUnits(e){this._set("inputUnits",e)}};l([p({type:String,nonNullable:!0})],bh.prototype,"directionMode",void 0),l([p({type:Boolean,nonNullable:!0})],bh.prototype,"relativeDirectionIsBilateral",void 0),l([p()],bh.prototype,"effectiveDirectionMode",null),l([p({type:lI,nonNullable:!0})],bh.prototype,"displayUnits",null),l([p({type:lI,nonNullable:!0})],bh.prototype,"inputUnits",null),bh=l([M("esri.views.interactive.sketch.SketchValueOptions")],bh);const C8=bh;let S0=class extends _e{constructor(e){super(e),this.labels=new k8,this.tooltips=new O8,this.values=new C8}};l([p({nonNullable:!0,type:k8})],S0.prototype,"labels",void 0),l([p({nonNullable:!0,type:O8})],S0.prototype,"tooltips",void 0),l([p({nonNullable:!0,type:C8})],S0.prototype,"values",void 0),S0=l([M("esri.views.interactive.sketch.SketchOptions")],S0);const Xce=S0;function Kce(t,e,i){return Ko(t,e,i)}function Ko(t=0,e=0,i=0){return Ms(t,e,i)}function xot(t){return t}function $ot(t){return t}function yf(t,e,i){return Ms(t,e,i)}function cw(t){const[e,i,r]=t;return t.length>3?[e,i,r,t[3]]:[e,i,r]}function TP(t){return t[3]=1|((t.length>3?t[3]:void 0)??0),t}function Tot(t){return!!(1&((t.length>3?t[3]:void 0)??0))}function bY(t,e,{coordinateHelper:i,elevationInfo:r},n){return t?O2(i.vectorToDehydratedPoint(t,L7e),e,r,n):null}function O2(t,e,i,r=Ko()){return r[0]=t.x,r[1]=t.y,r[2]=t.z??0,e==null||(e.type==="2d"?r[2]=0:r[2]=lVe(e,t,i,Hy)??0),r}function Eot(t,e,i){return i?(yce(i,t[0],t[1],t[2],e),i):Bw(t[0],t[1],t[2],e)}function wY(t,e,{z:i,m:r},n,s){const{spatialReference:o,elevationInfo:u}=n;let d;i==null&&r==null?d=void 0:e==null||e.type==="2d"?d=i??void 0:d=Xue(e,t,o,Hy,u)??0;const[h,m]=t;return s?yce(s,h,m,d,o):s=Bw(h,m,d,o),r!=null&&(s.m=r,s.hasM=!0),s}function Mot(t,e,i,r,n=Ko()){const[s,o]=t;return n[0]=s,n[1]=o,t.length>3&&(n[3]=t[3]??0),i?.type!=="3d"?(n[2]=e.value,n):(n[2]=_8(i,s,o,e.value,r,e.elevationInfo,Hy)??0,n)}const L7e=Bw(0,0,0,null);let Hl=class extends B{constructor(){super(...arguments),this.enabled=!0}};l([p({type:Boolean})],Hl.prototype,"enabled",void 0),Hl=l([M("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],Hl);let wi=class extends B{constructor(e){super(e),this.lineSnapper=new Hl,this.parallelLineSnapper=new Hl,this.rightAngleSnapper=new Hl,this.rightAngleTriangleSnapper=new Hl,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThresholdMeters=.3,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new Ie([255,127,0]),this.orangeTransparent=new Ie([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};l([p({type:Hl,constructOnly:!0,nonNullable:!0,json:{write:!0}})],wi.prototype,"lineSnapper",void 0),l([p({type:Hl,constructOnly:!0,nonNullable:!0,json:{write:!0}})],wi.prototype,"parallelLineSnapper",void 0),l([p({type:Hl,constructOnly:!0,nonNullable:!0,json:{write:!0}})],wi.prototype,"rightAngleSnapper",void 0),l([p({type:Hl,constructOnly:!0,nonNullable:!0,json:{write:!0}})],wi.prototype,"rightAngleTriangleSnapper",void 0),l([p({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],wi.prototype,"shortLineThreshold",void 0),l([p({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],wi.prototype,"distance",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],wi.prototype,"pointThreshold",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],wi.prototype,"intersectionParallelLineThreshold",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],wi.prototype,"parallelLineThreshold",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],wi.prototype,"verticalLineThresholdMeters",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],wi.prototype,"touchSensitivityMultiplier",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],wi.prototype,"pointOnLineThreshold",void 0),l([p({type:Ie,nonNullable:!0})],wi.prototype,"orange",void 0),l([p({type:Ie,nonNullable:!0})],wi.prototype,"orangeTransparent",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],wi.prototype,"lineHintWidthReference",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],wi.prototype,"lineHintWidthTarget",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],wi.prototype,"lineHintFadedExtensions",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],wi.prototype,"parallelLineHintWidth",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],wi.prototype,"parallelLineHintLength",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],wi.prototype,"parallelLineHintOffset",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],wi.prototype,"rightAngleHintSize",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],wi.prototype,"rightAngleHintOutlineSize",void 0),l([p({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],wi.prototype,"satisfiesConstraintScreenThreshold",void 0),wi=l([M("esri.views.interactive.snapping.Settings.Defaults")],wi);const uI=new wi;let kd=class extends _e{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1,this.sublayerSources=new fe}};l([p({constructOnly:!0})],kd.prototype,"layer",void 0),l([p()],kd.prototype,"enabled",void 0),l([p()],kd.prototype,"updating",void 0),l([p()],kd.prototype,"availability",void 0),l([p()],kd.prototype,"sublayerSources",void 0),kd=l([M("esri.views.interactive.snapping.FeatureSnappingLayerSource")],kd);let Cr=class extends _e{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.forceDisabled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.gridEnabled=!1,this.attributeRulesEnabled=!1,this.featureSources=new fe,this.distance=uI.distance,this.touchSensitivityMultiplier=uI.touchSensitivityMultiplier}get effectiveEnabled(){return!this.forceDisabled&&(this.enabledToggled?!this.enabled:this.enabled)}get effectiveGridEnabled(){return this.effectiveEnabled&&this.gridEnabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}get _effectiveFeatureSources(){const e=this.featureSources;e.some(_Y)&&ie.getLogger(this).warnOnce("Do not configure SubtypeGroupLayer sources in SnappingOptions.featureSources directly. Create a FeatureSnappingLayerSource for each SubtypeSublayer.");const i=e.filter(z7e),r=this._get("_effectiveFeatureSources")?.filter(_Y)??new fe;for(const d of i){const h=r.find(m=>m.layer===d.layer.parent);if(h)h.sublayerSources.includes(d)||h.sublayerSources.add(d);else if(d.layer.parent){const m=new kd({layer:d.layer.parent});m.sublayerSources.add(d),r.add(m)}}for(const d of r){const h=d.sublayerSources.filter(m=>!i.includes(m));d.sublayerSources.removeMany(h)}r.removeMany(r.filter(d=>d.sublayerSources.length===0));const n=e.filter(j7e),s=this._get("_effectiveFeatureSources")??new fe,{added:o,removed:u}=YP(s.toArray(),[...n,...r]);return s.removeMany(u),s.addMany(o),s}};function _Y(t){return t.layer.type==="subtype-group"}function j7e(t){return t.layer.type!=="subtype-group"}function z7e(t){return t.layer.type==="subtype-sublayer"}l([p()],Cr.prototype,"enabled",void 0),l([p()],Cr.prototype,"enabledToggled",void 0),l([p()],Cr.prototype,"forceDisabled",void 0),l([p()],Cr.prototype,"selfEnabled",void 0),l([p()],Cr.prototype,"featureEnabled",void 0),l([p()],Cr.prototype,"gridEnabled",void 0),l([p()],Cr.prototype,"attributeRulesEnabled",void 0),l([p({type:fe.ofType(kd)})],Cr.prototype,"featureSources",void 0),l([p()],Cr.prototype,"distance",void 0),l([p()],Cr.prototype,"touchSensitivityMultiplier",void 0),l([p({readOnly:!0})],Cr.prototype,"effectiveEnabled",null),l([p({readOnly:!0})],Cr.prototype,"effectiveGridEnabled",null),l([p({readOnly:!0})],Cr.prototype,"effectiveSelfEnabled",null),l([p({readOnly:!0})],Cr.prototype,"effectiveFeatureEnabled",null),l([p({readOnly:!0})],Cr.prototype,"_effectiveFeatureSources",null),Cr=l([M("esri.views.interactive.snapping.SnappingOptions")],Cr);const Cot=Symbol("grid-placement-graphic");function ede(t,e){const i=t.x-e.x,r=t.y-e.y;return i*i+r*r}function Rot(t,e){return Math.sqrt(ede(t,e))}function F7e(t,e){e.sort((i,r)=>ep(i.targetPoint,t)-ep(r.targetPoint,t))}function Pot({parameters:{point:t,distance:e,returnEdge:i,vertexMode:r,coordinateHelper:{spatialReference:n},filter:s},mode:o,returnZ:u,filter:d}){const h=d?.clone()??new Oe({where:"1=1"});return h.returnZ=u??o==="3d",s&&(h.geometry=s.geometry,h.distance=s.distance,h.spatialRelationship=s.spatialRelationship,h.where=Q2(h.where,s.where),h.timeExtent=AEe(h.timeExtent,s.timeExtent),h.objectIds=V7e(h.objectIds,s.objectIds)),{point:Bw(t[0],t[1],t[2],n.toJSON()),mode:o,distance:e,returnEdge:i,vertexMode:r,query:h.toJSON()}}function V7e(t,e){return t||e?e?t?Array.from(AX(new Set(t),new Set(e))):e:t:null}function Dot(t,e,i){return{left:bY(t.leftVertex.pos,e,i),right:bY(t.rightVertex.pos,e,i)}}const SY=Symbol("snapping-toggle");function U7e(t,e=()=>{}){const i=be(()=>({view:t.view,snappingOptions:t.snappingOptions}),({view:r,snappingOptions:n})=>{if(t.removeHandles(SY),!r||!n)return;const s=Wt.TOOL,o=[r.on("key-down",u=>{u.key!==LH.toggle||u.repeat||(n.enabledToggled=!0,e())},s),r.on("key-up",u=>{u.key===LH.toggle&&(n.enabledToggled=!1,e())},s),r.on("pointer-move",u=>{const d=u.native.ctrlKey;n.enabledToggled!==d&&(n.enabledToggled=d,e())},s)];t.addHandles(o,SY)},Gt);t.addHandles(i)}function Not(t){return YM(t)&&"utilityNetworks"in t&&!!t.utilityNetworks?.length}function Lot(t){return t?.type==="line"}function EP(t,e){return t[0]*e[1]-t[1]*e[0]}function q7e(t,e,i){const r=wf(i,e)/Qd(i);return Mw(t,i,r)}function jot(t,e,i,r,n=i){return zr(vy,r,i),zr(cI,e,n),q7e(dw,cI,vy),E6(t,n,dw)}function zot(t,e,i,r){zr(vy,e,i);const n=r/Wb(vy);return Yl(t,i,vy,n)}function Fot(t,e){const i=t.start,r=t.end,n=e.start,s=e.end,o=zr(vy,r,i),u=zr(tde,s,n),d=EP(o,u);if(Math.abs(d)<=B7e)return[];const h=zr(cI,i,n),m=EP(u,h)/d;return EP(o,h)/d,m>=0?[Yl(dw,i,o,m)]:[Yl(dw,i,o,m)]}function G7e(t,e,i){const r=[],n=zr(vy,t.end,t.start),s=zr(tde,t.start,e),o=Qd(n),u=2*wf(n,s),d=u*u-4*o*(Qd(s)-i*i);if(d===0){const h=-u/(2*o);r.push(Yl(dw,t.start,n,h))}else if(d>0){const h=Math.sqrt(d),m=(-u+h)/(2*o);r.push(Yl(dw,t.start,n,m));const v=(-u-h)/(2*o);r.push(Yl(cI,t.start,n,v))}return r}const B7e=1e-6,vy=Tt(),tde=Tt(),cI=Tt(),dw=Tt();function R8({start:t,end:e,type:i},r,n){const s=[],o=zr(jx,e,t),u=zr(Wk,t,r),d=Qd(o),h=2*wf(o,u),m=h*h-4*d*(Qd(u)-n*n);if(m===0){const v=-h/(2*d);(i===0||v>=0)&&s.push(Yl(Tt(),t,o,v))}else if(m>0){const v=Math.sqrt(m),b=(-h+v)/(2*d);(i===0||b>=0)&&s.push(Yl(Tt(),t,o,b));const _=(-h-v)/(2*d);(i===0||_>=0)&&s.push(Yl(Tt(),t,o,_))}return s}function ide(t,e){const i=t.start,r=t.end,n=zr(jx,r,i),s=vt(Jk,-n[1],n[0],0),o=e.start,u=e.end,d=fn(D8,u,o),h=ht(d,s),m=vt(cde,i[0],i[1],0),v=fn(dde,m,o),b=ht(v,s),_=Zi();if(Math.abs(h)<_)return[];const x=fi(pde,o,d,b/h);if(e.type===0){const $=fn(ez,x,o);if(ht($,d)<-_)return[]}if(t.type===1){const $=BI(Wk,x,i);if(wf($,n)<-_)return[]}return[mn(x)]}function H7e(t,e){return Z7e(dI(N8,e[2],t),e)}function rde(t,e){return lde(dI(N8,0,t),dI(X7e,0,e)).map(([r,n])=>Xu(r,n))}function nde(t,e,i){return ode(t,dI(N8,t[2],e),i)}function sde(t,e,i,r=Y()){const n=zr(jx,t,e),s=Wb(n);return Yl(r,e,n,s===0?1:i/s),r[2]=t[2],r}function ode(t,{start:e,end:i,type:r},n=Y()){const s=fn(Zk,t,e),o=fn(Jk,i,e),u=ht(s,o)/ht(o,o);return fi(n,e,o,r===0?Math.max(u,0):u)}const W7e=(()=>{const t=Y(),e=Y(),i=Y();return({start:r,end:n},{center:s,radius:o,normal:u,slicePlane:d})=>{const h=Px(s,u,Q7e);if(yi(Gj(h,r),0)&&yi(Gj(h,n),0)){E8(u,t,e);const v=(x,$)=>(ei(i,$,s),Nr(x,ht(i,t),ht(i,e)),x),b=G7e({start:v(jx,r),end:v(Wk,n)},roe,o),_=[];for(const[x,$]of b){const E=Sr(Y(),s);fi(E,E,t,x),fi(E,E,e,$),d&&!Kh(d,E)||_.push(E)}return _}const m=Y();return _ce(h,r,n,m)?!yi(ec(m,s),o)||d&&!Kh(d,m)?[]:[m]:[]}})();function ade({start:t,end:e,type:i},r,n){const s=[],o=ei(Zk,e,t),u=zr(Wk,t,r),d=Qd(o),h=2*wf(o,u),m=h*h-4*d*(Qd(u)-n*n);if(m===0){const v=-h/(2*d);(i===1||v>=0)&&s.push(fi(Y(),t,o,v))}else if(m>0){const v=Math.sqrt(m),b=(-h+v)/(2*d);(i===1||b>=0)&&s.push(fi(Y(),t,o,b));const _=(-h-v)/(2*d);(i===1||_>=0)&&s.push(fi(Y(),t,o,_))}return s}function lde(t,e){const i=t.start,r=t.end,n=e.start,s=e.end,o=fn(Zk,r,i),u=fn(Jk,s,n),d=fn(D8,n,i),h=yn(cde,o,u);if(!yi(ht(d,h),0))return[];const m=Gy(h);if(yi(m,0))return[];const v=yn(dde,d,u),b=ht(v,h)/m,_=fi(pde,i,o,b);if(t.type===0){const x=fn(ez,_,i);if(ht(o,x)<-Zi())return[]}if(e.type===0){const x=fn(ez,_,n);if(ht(u,x)<-Zi())return[]}return[mn(_)]}function Z7e({start:t,end:e,type:i},r){const n=fn(Zk,r,t),s=fn(Jk,e,t),o=yn(D8,s,n),u=Gy(o)/Gy(s),d=Zi();if(u<d)switch(i){case 1:return[mn(r)];case 0:return ht(s,n)<-d?[]:[mn(r)]}return[]}function P8(t,e,i,r){const[n,s]=t,[o,u]=i,d=o-n,h=u-s,m=d*d+h*h,v=Math.sqrt(m);if(v>e+r)return[];if(v<Math.abs(e-r))return[];if(yi(v,0)&&yi(e,r))return[];const b=(e*e-r*r+m)/(2*v),_=Math.sqrt(e*e-b*b),x=_*h/v,$=_*d/v,[E,A]=M6(jx,t,i,b/v);return yi(x,$)?[Xu(E,A)]:[Xu(E+x,A-$),Xu(E-x,A+$)]}function dI(t,e,{start:i,end:r,type:n}){return vt(t.start,i[0],i[1],e),vt(t.end,r[0],r[1],e),t.type=Y7e[n],t}function ude(t,e){return yi(t[2],e[2])}function yi(t,e){return ro(Math.abs(t-e),0,Zi())}function J7e(t,e){return e.filter(i=>Kh(t,i))}function Kh(t,e){return uUe(t,e)}const Y7e={0:1,1:0},jx=Tt(),Wk=Tt(),Zk=Y(),Jk=Y(),D8=Y(),cde=Y(),dde=Y(),pde=Y(),ez=Y(),Q7e=Ei(),N8={start:Y(),end:Y(),type:1},X7e={start:Y(),end:Y(),type:1};class Ka{intersect(e){return md(this,e)}closestPoints(e){return[this.closestTo(e)]}}class Ww extends Ka{constructor(e){super(),this.point=e}equals(e){return this===e||El(e)&&Ot(this.point,e.point)}closestTo(){return cw(this.point)}}class L8 extends Ka{constructor(e,i,r){super(),this.start=e,this.end=i,this.lineLike={start:e,end:i,type:r}}equals(e){return this===e||Nu(e)&&this.lineLike.type===e.lineLike.type&&Ot(this.start,e.start)&&Ot(this.end,e.end)}closestTo(e){const i=Ko();return ode(e,this.lineLike,i),i}}class j8 extends L8{constructor(e,i){super(e,i,1)}}class K7e extends L8{constructor(e,i){super(e,i,0)}}class hde extends Ka{constructor(e){super(),this.constraints=e}equals(e){return this===e||tz(e)&&nx(this.constraints,e.constraints,(i,r)=>i.equals(r))}closestTo(e){let i,r=1/0;for(const n of this.constraints){const s=n.closestTo(e),o=ep(e,s);o<r&&(r=o,i=s)}return cw(i??e)}closestPoints(e){return this.constraints.flatMap(i=>i===this?[]:i.closestPoints(e))}}class fde extends Ka{constructor(e,i){super(),this.center=e,this.radius=i}equals(e){return this===e||ju(e)&&this.center[0]===e.center[0]&&this.center[1]===e.center[1]&&this.radius===e.radius}closestTo(e){const i=Ko();return sde(e,this.center,this.radius,i),i}}class z8 extends Ka{constructor(e,i){super(),this.center=e,this.radius=i}equals(e){return this===e||gd(e)&&Ot(this.center,e.center)&&this.radius===e.radius}closestTo(e){const i=Ko();return sde(e,this.center,this.radius,i),i[2]=this.center[2],i}asCircle(){return new F8(cw(this.center),this.radius,yf(0,0,1))}}class F8 extends Ka{constructor(e,i,r,n=void 0){super(),this.center=e,this.radius=i,this.normal=r,this.slicePlane=n}equals(e){return this===e||wh(e)&&Ot(this.center,e.center)&&Ot(this.normal,e.normal)&&this.radius===e.radius}closestTo(e){const{center:i,radius:r}=this;Sce(this.getPlane(eqe),e,MP);const n=fn(MP,MP,i),s=Lw(n);if(yi(s,0))return cw(e);const o=r/Math.sqrt(s),u=Ko();fi(u,i,n,o);const{slicePlane:d}=this;return d&&!Kh(d,u)?U8(d,this)?.closestTo(e)??cw(e):u}getPlane(e=Ei()){return Px(this.center,this.normal,e)}}const MP=Y(),eqe=Ei();class tqe extends Ka{constructor(e){super(),this.z=e}equals(e){return this===e||yd(e)&&this.z===e.z}closestTo(e){return yf(e[0],e[1],this.z)}getPlane(e=Ei()){return vt(xY,0,0,this.z),Px(xY,jS,e)}}const xY=Y();class V8 extends Ka{constructor(e,i,r){super(),this.start=e,this.end=i,this.planeLike={start:e,end:i,type:r}}equals(e){return this===e||Lu(e)&&this.planeLike.type===e.planeLike.type&&Ot(this.start,e.start)&&Ot(this.end,e.end)}closestTo(e){const i=Ko();return nde(e,this.planeLike,i),i}closestEndTo(e){const{start:i,end:r}=this.planeLike;return Math.sign(wf(zr(iqe,r,i),zr(rqe,e,i)))>0?this.end:this.start}getPlane(e=Ei()){const i=Sr($Y,this.end);return i[2]+=1,Ld(this.start,this.end,i,e)}getSlicePlane(e=Ei()){const{start:i,end:r,type:n}=this.planeLike;if(n===0)return;const s=vt($Y,i[0],i[1],0),o=vt(TY,r[0],r[1],0),u=ei(TY,o,s);return Px(s,u,e),e}}const iqe=Tt(),rqe=Tt(),$Y=Y(),TY=Y();class Vot extends V8{constructor(e,i){super(e,i,1)}}class mde extends V8{constructor(e,i){super(e,i,0)}}class nqe extends Ka{constructor(e,i){super(),this.sphere=Tce(e,i),this._center=mn(e)}equals(e){return this===e||vd(e)&&Mce(this.sphere,e.sphere)}closestTo(e){const i=Ko();return Hk(this.sphere,e,i),i}get center(){return this._center}get radius(){return this.sphere[3]}}class yde extends Ka{constructor(e,i,r){super(),this.start=e,this.end=i,this.getZ=r,this.planeLike={start:e,end:i,type:0}}equals(e){return this===e||pI(e)&&Ot(this.start,e.start)&&Ot(this.end,e.end)&&this.getZ===e.getZ}closestTo(e){return cqe(this,e)}addIfOnTheGround(e,i){for(const r of i){const n=this.getZ(r[0],r[1])??0;yi(r[2],n)&&(r[2]=n,e.push(r))}}}class sqe extends Ka{constructor(e,i,r){super(),this._x=e,this._y=i,this._z=r}equals(e){return this===e||Eqe(e)&&this._x===e._x&&this._y===e._y&&this._z===e._z}closestTo([e,i,r]){return Kce(this._x??e,this._y??i,this._z??r)}}class oqe extends Ka{constructor(e,i,r,n,s){super(),this._origin=e,this._spatialReference=i,this._distanceMeters=r,this._z=n,this._directionDegrees=s}equals(e){return this===e||Tqe(e)&&pA(this._origin,e._origin)&&this._spatialReference===e._spatialReference&&this._distanceMeters===e._distanceMeters&&this._z===e._z&&this._directionDegrees===e._directionDegrees}closestTo([e,i,r]){return Nr(T1,e,i),pA(T1,this._origin)||this._applyDirectionAndDistance(T1),Kce(T1[0],T1[1],this._z??r)}_applyDirectionAndDistance(e){if(this._directionDegrees!=null&&this._distanceMeters!=null)Xh(e,this._origin,this._directionDegrees,this._distanceMeters,this._spatialReference);else if(this._directionDegrees!=null)lqe(e,this._origin,this._directionDegrees,e,this._spatialReference);else if(this._distanceMeters!=null){const{azimuth:i}=Uw(aqe,this._origin,e,this._spatialReference);Xh(e,this._origin,i??0,this._distanceMeters,this._spatialReference)}}}const T1=[0,0],aqe=new Ox;function lqe(t,e,i,r,n){let{azimuth:s,distance:o}=Uw(uqe,e,r,n);s??=0;let u=o*Math.cos((s-i)*bs);u=Math.max(0,u),Xh(t,e,i,u,n)}const uqe=new Ox;function cqe(t,e){const i=Ko();return nde(e,t.planeLike,i),i[2]=t.getZ(i[0],i[1])??vde,i}function md(t,e){if(tz(t)){const i=[];for(const r of t.constraints){const n=r.intersect(e);n&&i.push(n)}return q8(i)}if(tz(e))return md(e,t);if(pI(t))return EY(t,e);if(pI(e))return EY(e,t);if(El(t)){const{point:i}=t;if(El(e))return Ot(i,e.point)?t:void 0;const r=e.closestTo(i);return Voe(r,i)?t:void 0}if(Nu(t)){if(El(e))return md(e,t);if(Nu(e))return Wl(lde(t.lineLike,e.lineLike));if(yd(e))return dqe(t,e);if(Lu(e))return Wl(ide(e.planeLike,t.lineLike));if(ju(e))return Wl(ade(t.lineLike,e.center,e.radius));if(wh(e))return Wl(W7e(t.lineLike,e));if(gd(e))return pqe(t,e);if(vd(e))return hqe(t,e)}else if(yd(t)){if(El(e)||Nu(e))return md(e,t);if(yd(e))return fqe(t,e);if(Lu(e))return mqe(t,e);if(ju(e))return yqe(t,e);if(wh(e))return vqe(t,e);if(gd(e))return gqe(t,e);if(vd(e))return bqe(t,e)}else if(Lu(t)){if(El(e)||Nu(e)||yd(e))return md(e,t);if(Lu(e))return AP(rde(t.planeLike,e.planeLike));if(ju(e))return AP(R8(t.planeLike,e.center,e.radius));if(wh(e))return _qe(t,e);if(gd(e))return wqe(t,e);if(vd(e))return Sqe(t,e)}else if(ju(t)){if(El(e)||Nu(e)||yd(e)||Lu(e))return md(e,t);if(ju(e))return AP(P8(t.center,t.radius,e.center,e.radius));if(wh(e))return void 0;if(gd(e))return xqe(t,e);if(vd(e))return void 0}else if(wh(t)){if(El(e)||Nu(e)||yd(e)||Lu(e)||ju(e))return md(e,t);if(wh(e))return void 0;if(gd(e))return e.asCircle(),void 0;if(vd(e))return void 0}else if(gd(t)){if(El(e)||Nu(e)||yd(e)||Lu(e)||ju(e)||wh(e))return md(e,t);if(gd(e))return $qe(e,t);if(vd(e))return void 0}else if(vd(t)){if(El(e)||Nu(e)||yd(e)||Lu(e)||ju(e)||gd(e))return md(e,t);if(vd(e))return void 0}}const dqe=(()=>{const t=Ei();return(e,i)=>{const{start:r,end:n}=e;if(ude(r,n)&&yi(r[2],i.z))return e;const s=Ko();return _ce(i.getPlane(t),r,n,s)?new Ww(s):void 0}})();function pqe({lineLike:t},{center:e,radius:i}){const r=e[2];return Wl(ade(t,e,i).filter(n=>yi(n[2],r)))}function hqe({lineLike:t},{sphere:e}){return Wl(kce(e,t.start,t.end))}const U8=(()=>{const t=Ha(),e=Y(),i=Y();return(r,n,s)=>{const{normal:o,center:u,radius:d}=n;E8(o,e,i);const h=r,m=d*ht(h,e),v=d*ht(h,i);d8(t,u[0],u[1],u[2],1);const b=f8(r,t),_=Math.hypot(m,v),x=yi(_,0);if(yi(Gj(r,u),0)){if(x)return n;if(yi(d,0))return!s||Kh(s,u)?new Ww(cw(u)):void 0;yn(e,h,o),ns(e,e);const j=new Array,Q=mn(u);fi(Q,Q,e,d),s&&!Kh(s,Q)||j.push(Q);const re=mn(u);return fi(re,re,e,-d),s&&!Kh(s,re)||j.push(re),Wl(j)}if(x)return;const $=-b/_;if(Math.abs($)>1||yi($,1))return;const E=Math.atan(m/v),A=Qz($)-E,O=Math.PI-A,D=new Array,R=Y();fi(R,u,e,d*Math.cos(A)),fi(R,R,i,d*Math.sin(A)),D.push(R);const P=Y();return fi(P,u,e,d*Math.cos(O)),fi(P,P,i,d*Math.sin(O)),D.push(P),Wl(s?J7e(s,D):D)}})();function fqe(t,e){return yi(t.z,e.z)?t:void 0}function mqe({z:t},{planeLike:e}){const[i,r]=e.start,[n,s]=e.end,o=yf(i,r,t),u=yf(n,s,t);return e.type===0?new j8(o,u):new K7e(o,u)}function yqe(t,e){const[i,r]=e.center;return new z8(yf(i,r,t.z),e.radius)}function gqe(t,e){return yi(e.center[2],t.z)?e:void 0}const vqe=(()=>{const t=Ei();return(e,i)=>U8(e.getPlane(t),i,i.slicePlane)})();function bqe(t,{center:e,radius:i}){const r=Math.abs(e[2]-t.z);if(r>i&&!yi(r,i))return;const n=yf(e[0],e[1],t.z),s=Math.sqrt(i**2-r**2);return yi(s,0)?void 0:new z8(n,s)}const wqe=(()=>{const t=Ei();return(e,{center:i,radius:r})=>{const n=R8(e.planeLike,i,r),s=i[2];e.getSlicePlane(t);const o=new Array;for(const[u,d]of n){const h=[u,d,s];Kh(t,h)&&o.push(h)}return Wl(o)}})(),_qe=(()=>{const t=Ei(),e=Ei();return(i,r)=>U8(i.getPlane(t),r,i.getSlicePlane(e))})(),Sqe=(()=>{const t=Ei();return(e,{center:i,radius:r})=>{const n=e.getPlane(t),s=ng(n,i),o=Math.abs(s);if(o>r&&!yi(o,r))return;const u=Math.sqrt(r**2-s**2);if(yi(u,0)){const m=Ko();return Sce(n,i,m),new Ww(m)}const d=Ko(),h=mn(n);return fi(d,i,h,s),new F8(d,u,h,e.getSlicePlane())}})();function xqe(t,e){const i=zy(t.center,e.center);return yi(i,0)&&yi(t.radius,e.radius)?e:gde(P8(t.center,t.radius,e.center,e.radius),e.center[2])}function $qe(t,e){if(!ude(t.center,e.center))return;const i=zy(t.center,e.center);return yi(i,0)&&yi(t.radius,e.radius)?t:gde(P8(t.center,t.radius,e.center,e.radius),t.center[2])}function EY(t,e){const{planeLike:i,getZ:r}=t,n=new Array;if(El(e))t.addIfOnTheGround(n,H7e(i,e.point));else if(Nu(e))t.addIfOnTheGround(n,ide(i,e.lineLike));else if(ju(e))for(const[s,o]of R8(i,e.center,e.radius)){const u=r(s,o);u!=null&&n.push(Ms(s,o,u))}else if(Lu(e)||pI(e))for(const[s,o]of rde(i,e.planeLike)){const u=r(s,o)??vde;n.push(Ms(s,o,u))}return Wl(n)}function AP(t){return q8(t.map(([e,i])=>{const r=yf(e,i,0),n=yf(e,i,1);return new j8(r,n)}))}function Wl(t){return q8(t.map(e=>e?new Ww(e):void 0))}function gde(t,e){return Wl(t.map(([i,r])=>[i,r,e]))}function q8(t){if(t.length!==0)return t.length===1?t[0]??void 0:new hde(t.filter(is))}function tz(t){return t instanceof hde}function El(t){return t instanceof Ww}function Nu(t){return t instanceof L8}function yd(t){return t instanceof tqe}function Lu(t){return t instanceof V8}function ju(t){return t instanceof fde}function gd(t){return t instanceof z8}function wh(t){return t instanceof F8}function vd(t){return t instanceof nqe}function pI(t){return t instanceof yde}function Tqe(t){return t instanceof oqe}function Eqe(t){return t instanceof sqe}const vde=0;let Zw=class{constructor(e,i,r,n){this.targetPoint=e,this.constraint=i,this.isDraped=r,this.domain=n}},bde=class extends Zw{constructor({targetPoint:e,objectId:i,constraint:r,isDraped:n}){super(e,r,n,1),this.objectId=i}},Yk=class{constructor(e,i){this.isDraped=e,this.domain=i}},lc=class wde extends Yk{constructor(e,i,r,n,s=3,o=!0,u=!0){super(n,s),this.type=e,this.lineStart=i,this.lineEnd=r,this.fadeLeft=o,this.fadeRight=u}equals(e){return e instanceof wde&&this.type===e.type&&Ot(this.lineStart,e.lineStart)&&Ot(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}get length(){return ec(this.lineStart,this.lineEnd)}},Mqe=class extends bde{constructor(e){super({...e,isDraped:!0,constraint:new yde(e.edgeStart,e.edgeEnd,e.getGroundElevation)})}get hints(){return[new lc(1,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},Aqe=class extends bde{constructor(e){super({...e,constraint:new j8(e.edgeStart,e.edgeEnd)})}get hints(){return[new lc(1,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},Iqe=class _de extends Yk{constructor(e,i,r=3){super(i,r),this.intersectionPoint=e}equals(e){return e instanceof _de&&Ot(this.intersectionPoint,e.intersectionPoint)}},I3=class extends Zw{constructor(e,i,r,n){super(e,new Ww(e),n,3),this.first=i,this.second=r}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new Iqe(this.targetPoint,this.isDraped,this.domain)]}},kqe=class extends Zw{constructor({lineStart:e,lineEnd:i,targetPoint:r,isDraped:n}){super(r,new mde(e,i),n,2),this._referenceLineHint=new lc(2,e,i,n,this.domain)}get hints(){return[this._referenceLineHint,new lc(0,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}},Oqe=class Sde extends Yk{constructor(e,i,r,n=3){super(r,n),this.lineStart=e,this.lineEnd=i}equals(e){return e instanceof Sde&&Ot(this.lineStart,e.lineStart)&&Ot(this.lineEnd,e.lineEnd)}},Cqe=class extends Zw{constructor({referenceLine:e,lineStart:i,targetPoint:r,isDraped:n}){const s=mn(i),{left:o,right:u}=e;ei(s,dr(s,s,u),o),super(r,new mde(i,s),n,2),this._referenceLines=[{edge:e,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new lc(0,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new Oqe(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map(e=>new lc(1,e.edge.left,e.edge.right,this.isDraped,this.domain,e.fadeLeft,e.fadeRight))]}addReferenceLine(e){const i={edge:e,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(r=>{Ot(e.right,r.edge.left)&&(r.fadeLeft=!1,i.fadeRight=!1),Ot(e.right,r.edge.right)&&(r.fadeRight=!1,i.fadeRight=!1),Ot(e.left,r.edge.right)&&(r.fadeRight=!1,i.fadeLeft=!1),Ot(e.left,r.edge.left)&&(r.fadeLeft=!1,i.fadeLeft=!1)}),this._referenceLines.push(i)}},xde=class $de extends Yk{constructor(e,i,r,n,s=3){super(n,s),this.previousVertex=e,this.centerVertex=i,this.nextVertex=r}equals(e){return e instanceof $de&&Ot(this.previousVertex,e.previousVertex)&&Ot(this.centerVertex,e.centerVertex)&&Ot(this.nextVertex,e.nextVertex)}},Rqe=class extends Zw{constructor({targetPoint:e,constraint:i,previousVertex:r,otherVertex:n,otherVertexType:s,isDraped:o,selfSnappingType:u,objectId:d,domain:h}){super(e,i,o,h??2),this.previousVertex=r,this.otherVertex=n,this.otherVertexType=s,this.selfSnappingType=u??0,this.objectId=d??null}get hints(){const e=this.previousVertex,i=this.otherVertexType===1?this.otherVertex:this.targetPoint,r=this.otherVertexType===1?this.targetPoint:this.otherVertex;return[new lc(0,i,r,this.isDraped,this.domain),new lc(1,e,i,this.isDraped,this.domain),new xde(this.previousVertex,i,r,this.isDraped,this.domain)]}},Pqe=class extends Zw{constructor({targetPoint:e,point1:i,point2:r,isDraped:n}){super(e,new fde(Mx(Y(),i,r,.5),.5*Aw(i,r)),n,2),this._p1=i,this._p2=r}get hints(){return[new lc(1,this.targetPoint,this._p1,this.isDraped,this.domain),new lc(1,this.targetPoint,this._p2,this.isDraped,this.domain),new xde(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}};function Dqe(t,e,i,r,n=Y()){const s=Sr(Nqe,t);return s[2]=Xue(r,s,e,i)||0,r.renderCoordsHelper.toRenderCoords(s,e,n),n}const Nqe=Y();function Lqe(t,e,i,r){return r.type==="2d"?(DE.x=t[0],DE.y=t[1],DE.spatialReference=e,r.toScreen(DE)):(Dqe(t,e,i,r,MY),r.state.camera.projectToScreen(MY,IP),jr(IP[0],IP[1]))}const DE=Bw(0,0,0,null),MY=Y(),IP=Ore();function jqe(t,e){return{type:Py(e),value:t,unit:e}}function Xot(t){return{value:t}}function up(t,e){return{type:Py(e),value:t,unit:e}}function Qk(t,e){return{type:Py(e),value:t,unit:e}}function Xk(t,e,i="arithmetic"){return{type:Py(e),value:t,unit:e,rotationType:i}}function Kot(t,e){const i=zqe(t,e);return t.type==="angle"?Xk(i,e,t.rotationType):jqe(i,e)}function zqe(t,e){return rt(t.value,t.unit,e)}function eat(t,e){return t==null?e:e==null||t.value>rt(e.value,e.unit,t.unit)?t:e}function tat(t,e){return t==null?null:{...t,value:t.value*e}}function Fqe(t,e,i){if(e===i)return t;switch(i){case"arithmetic":case"geographic":return 90-t}}const iat=up(0,"meters"),rat=Qk(0,"square-meters");Xk(0,"radians");const nat=Xk(0,"degrees"),sat=Xk(0,"degrees","geographic");let Kk;function Tde(){return!!Kk&&p6()}async function Vqe(){if(!Tde()){const[t,e]=await Promise.all([H(()=>import("./OperatorGeodeticLength-BNMh-Zi_.js"),__vite__mapDeps([302,264,303,266,267,268,83,269])),H(async()=>{const{injectPe:i}=await import("./ProjectionTransformation-m7i9M82m.js").then(r=>r.b5);return{injectPe:i}},__vite__mapDeps([266,267,264,268,83,269])).then(({injectPe:i})=>i),HK()]);Kk=new t.OperatorGeodeticLength,e(nwe)}}function Uqe(t,e,i){return Kk.execute(t,e,i,null)}function qqe(){return Kk.supportsCurves()}const Gqe={geodesic:0,loxodrome:1,"great-elliptic":2,"normal-section":3,"shape-preserving":4};let G8,Ede,Mde,B8;function H8(){return!!G8&&Tde()}async function W8(){if(!H8()){const[t]=await Promise.all([H(()=>import("./apiConverter-DsH1E48e.js"),__vite__mapDeps([270,264,267,266,268,83,269,271])),Vqe()]);G8=t.fromGeometry,Ede=t.fromSpatialReference,Mde=t.getSpatialReference,B8=qqe()}}function eO(t,e={}){const{curveType:i="geodesic",unit:r}=e,n=Mde(t);let s=Uqe(G8(t),Ede(n),Gqe[i]);return s&&r&&(s=rt(s,"meters",r)),s}const oat=Object.freeze(Object.defineProperty({__proto__:null,execute:eO,isLoaded:H8,load:W8,get supportsCurves(){return B8}},Symbol.toStringTag,{value:"Module"}));function aat(t){return rg(t)||Yo(t)}function Z8(t,e,i,...r){return rg(t)?e.apply(void 0,r):t.isWebMercator?i.apply(void 0,r):null}function Bqe(t){const{spatialReference:e}=t;return Z8(e,Yqe,Qqe,t)}function Hqe(t,e){if(!Fi(t.spatialReference,e.spatialReference))return null;const{spatialReference:i}=t;return NE[0]=t.x,NE[1]=t.y,NE[2]=t.hasZ?t.z:0,LE[0]=e.x,LE[1]=e.y,LE[2]=e.hasZ?e.z:0,Ade(NE,LE,i)}function Ade(t,e,i){return Z8(i,Zqe,Jqe,t,e,i)}const Wqe={geodesicLength:Bqe,geodesicDistanceBetweenPoints:Hqe,geodesicDistance:Ade};async function Ide(){return await W8(),Wqe}function Zqe(t,e,i){return up(Uw(Kqe,t,e,i).distance,"meters")}function Jqe(t,e,i){return up(eO(Xqe(t,e,i),{unit:"meters"}),"meters")}function Yqe(t){return up(tce([t],"meters")[0],"meters")}function Qqe(t){return up(eO(t,{unit:"meters"}),"meters")}function Xqe(t,e,i){return new Kt({spatialReference:i,paths:[[[...t],[...e]]]})}const Kqe=new Ox,NE=Y(),LE=Y();let Ml=class extends sp{constructor(e){super(e),this.options=new Cr,this._engineCache=new Map,this._loadTask=null,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=0}initialize(){this.addHandles([be(()=>{const{distance:e,touchSensitivityMultiplier:i,effectiveSelfEnabled:r,effectiveFeatureEnabled:n,effectiveGridEnabled:s}=this.options;return{selfEnabled:r,featureEnabled:n,gridEnabled:this.view.type==="2d"&&s,viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,distance:e,touchSensitivityMultiplier:i}},(e,i)=>{i&&(this.doneSnapping(),this.emit("changed")),this._loadTask?.abort(),this._loadTask=dc(r=>this._updateEngines(e,i,r))},Gt),be(()=>this.options,e=>{for(const i of this._engines)i.options=e},Zo)])}destroy(){this._loadTask?.abort(),this._destroyEngines()}get updating(){return this._engines.some(e=>e.updating)||!this._loadTask?.finished}_destroyEngines(){this._engineCache.forEach(e=>e.destroy()),this._engineCache.clear(),this._engines=[]}async _updateEngines(e,i,r){if(!e.viewReady)return void this._destroyEngines();i?.viewSpatialReference!==e.viewSpatialReference&&this._destroyEngines();const n=this._engineCache,s=await Promise.allSettled([e.featureEnabled&&!n.has("feature")?this._createFeatureSnappingEngine(r):void 0,e.selfEnabled&&!n.has("self")?this._createSelfSnappingEngine(r):void 0,e.gridEnabled&&!n.has("grid")?this._createGridSnappingEngine(r):void 0]);if(r.aborted)for(const o of s)o.status==="fulfilled"&&o.value?.engine.destroy();else{for(const o of s)o.status==="fulfilled"&&o.value&&n.set(o.value.type,o.value.engine);this._engines=Array.from(n.values())}}async _createSelfSnappingEngine(e){const[{SelfSnappingEngine:i},r]=await Promise.all([H(()=>import("./SelfSnappingEngine-BJyheziv.js"),__vite__mapDeps([304,305])),Ide()]);return ft(e),{type:"self",engine:new i({view:this.view,options:this.options,geodesicLengthMeasurementUtils:r})}}async _createGridSnappingEngine(e){const{view:i}=this;if(i.type!=="2d")return;const{GridSnappingEngine:r}=await H(()=>import("./GridSnappingEngine-B3X5zK1f.js"),__vite__mapDeps([306,204]));return ft(e),{type:"grid",engine:new r({view:i,options:this.options})}}async _createFeatureSnappingEngine(e){const{FeatureSnappingEngine:i}=await H(()=>import("./FeatureSnappingEngine-CFx66gm-.js"),__vite__mapDeps([307,274,214,153]));ft(e);const{view:r,options:n}=this,{spatialReference:s}=r;return{type:"feature",engine:new i({view:r,options:n,spatialReference:s})}}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:i}=this.options,r=e*i;return r*r}snap(e){return iGe(e)?this._snapMultiPoint(e):this._snapSinglePoint(e)}update(e){const{point:i,context:r}=e;this._removeVisualization();const n=this._currentMainCandidate;if(n==null)return i;const s=this._selectUpdateInput(e);if(s==null)return i;const{spatialReference:o}=r,u=Is(s,o);if(u==null)return i;const{view:d}=this,{elevationInfo:h,visualizer:m}=r,v=[],b=O2(u,d,h),_=n.constraint.closestTo(b);if(!this._arePointsWithinScreenThreshold(b,_,r)||!OP(n,r.drawConstraints))return this._resetSnappingState(),i;n.targetPoint=TP(_),v.push(...n.hints);for(const x of this._currentOtherActiveCandidates)OP(x,r.drawConstraints)&&(x.targetPoint=TP(_),v.push(...x.hints));return m!=null&&this.addHandles(m.draw(v,{spatialReference:o,elevationInfo:rGe(r),view:d,selfSnappingZ:r.selfSnappingZ}),kP),wY(_,d,i,r)}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:e,scenePoint:i}){switch(this._currentSnappedType){case 0:return e;case 1:return i}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=0}_removeVisualization(){this.removeHandles(kP)}async _snapSinglePoint({point:e,context:i,signal:r}){const{view:n}=this,{elevationInfo:s}=i,o=O2(e,n,s),u=await this._fetchCandidates(o,3,i,r);return this._createSnapResult(o,0,u,n,e,i,r)}async _snapMultiPoint({point:e,scenePoint:i,context:r,signal:n}){const{view:s}=this,{coordinateHelper:o,elevationInfo:u,spatialReference:d}=r;await ff(i.spatialReference,d);const h=Is(i,d),m=O2(h,s,u),v=await this._fetchCandidates(m,1,r,n);if(v.length>0){const x=await this._fetchCandidates(m,2,r,n);return this._createSnapResult(m,1,[...v,...x],s,h,r,n)}const b=O2(e,s,u),_=await this._fetchCandidates(b,2,r,n);return this._createSnapResult(b,0,_,s,{z:o.hasZ()&&e.hasZ?e.z??0:void 0,m:o.hasM()&&e.hasM?e.m??0:void 0},r,n)}async _fetchCandidates(e,i,r,n){return(await Promise.all(this._engines.map(s=>s.fetchCandidates(e,i,r,n)))).flat()}_createSnapResult(e,i,r,n,s,o,u){return{get valid(){return!Rn(u)},apply:()=>{const{spatialReference:d}=o,{snappedPoint:h,hints:m}=this._processCandidates(e,i,r,o);return this._removeVisualization(),o.visualizer!=null&&this.addHandles(o.visualizer.draw(m,{spatialReference:d,elevationInfo:Hy,view:n,selfSnappingZ:o.selfSnappingZ}),kP),wY(h,n,s,o)}}}_processCandidates(e,i,r,n){if(r.length<1)return this.doneSnapping(),{snappedPoint:e,hints:[]};this._currentSnappedType!==i&&this._resetSnappingState(),F7e(e,r);const s=this._currentMainCandidate;if(s!=null){const o=tGe(s,r);if(o>=0){if(!(r[o]instanceof I3))return this._intersectWithOtherCandidates(o,r,e,i,n);if(this._arePointsWithinScreenThreshold(e,s.targetPoint,n))return this._updateSnappingCandidate(s,i,r,n)}}return this._intersectWithOtherCandidates(0,r,e,i,n)}_intersectWithOtherCandidates(e,i,r,n,s){const{coordinateHelper:o}=s,u=i[e],d=[];for(let h=0;h<i.length;++h){if(h===e)continue;const m=i[h],v=u.constraint.intersect(m.constraint);if(v)for(const b of v.closestPoints(u.targetPoint))d.push([new I3(TP(b),u,m,m.isDraped),this._squaredScreenDistance(r,b,o)])}return d.length>0&&(d.sort((h,m)=>h[1]-m[1]),d[0][1]<this._squaredPointProximityThreshold(s.pointer))?this._updateSnappingCandidate(d[0][0],n,i,s):OP(u,s.drawConstraints)?this._updateSnappingCandidate(u,n,i,s):{snappedPoint:r,hints:[]}}_updateSnappingCandidate(e,i,r,n){this.doneSnapping(),this._currentMainCandidate=e,this._currentSnappedType=i;const s=this._currentMainCandidate.targetPoint,o=[];o.push(...e.hints);for(const u of r){if(e instanceof I3){if(u.constraint.equals(e.first.constraint)||u.constraint.equals(e.second.constraint))continue}else if(u.constraint.equals(e.constraint))continue;const d=u.constraint.closestTo(s);this._squaredScreenDistance(d,s,n.coordinateHelper)<eGe()&&(u.targetPoint=s,this._currentOtherActiveCandidates.push(u),o.push(...u.hints))}return{snappedPoint:s,hints:o}}_squaredPointProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}_arePointsWithinScreenThreshold(e,i,r){return this._squaredScreenDistance(e,i,r.coordinateHelper)<this._squaredPointProximityThreshold(r.pointer)}_squaredScreenDistance(e,i,r){return ede(this._toScreen(e,r),this._toScreen(i,r))}_toScreen(e,i){return Lqe(e,i.spatialReference,Hy,this.view)}get test(){}};l([p({constructOnly:!0})],Ml.prototype,"view",void 0),l([p()],Ml.prototype,"options",void 0),l([p({readOnly:!0})],Ml.prototype,"updating",null),l([p()],Ml.prototype,"_loadTask",void 0),l([p()],Ml.prototype,"_engines",void 0),l([p()],Ml.prototype,"_squaredMouseProximityThreshold",null),l([p()],Ml.prototype,"_squaredTouchProximityThreshold",null),Ml=l([M("esri.views.interactive.snapping.SnappingManager")],Ml);const kP="visualization-handle";function eGe(){return uI.satisfiesConstraintScreenThreshold*uI.satisfiesConstraintScreenThreshold}function OP(t,e){return!e||e.direction==null&&e.distance==null||!(t instanceof Mqe||t instanceof Aqe||t instanceof kqe||t instanceof Cqe||t instanceof Pqe)&&(!(t instanceof Rqe)||e.direction==null&&t.selfSnappingType===1)}function tGe(t,e){return t instanceof I3?CP(e,t.first)>=0&&CP(e,t.second)>=0?0:-1:CP(e,t)}function CP(t,e){let i=-1;for(let r=0;r<t.length;++r)if(e.constraint.equals(t[r].constraint)){i=r;break}return i}function iGe(t){return t.scenePoint!=null}function rGe({coordinateHelper:t,elevationInfo:e}){return t.hasZ()?Hy:e}function iz(t,e,i){i=i||2;var r,n,s,o,u,d,h,m=e&&e.length,v=m?e[0]*i:t.length,b=kde(t,0,v,i,!0),_=[];if(!b||b.next===b.prev)return _;if(m&&(b=lGe(t,e,b,i)),t.length>80*i){r=s=t[0],n=o=t[1];for(var x=i;x<v;x+=i)(u=t[x])<r&&(r=u),(d=t[x+1])<n&&(n=d),u>s&&(s=u),d>o&&(o=d);h=(h=Math.max(s-r,o-n))!==0?1/h:0}return XS(b,_,i,r,n,h),_}function kde(t,e,i,r,n){var s,o;if(n===sz(t,e,i,r)>0)for(s=e;s<i;s+=r)o=AY(s,t[s],t[s+1],o);else for(s=i-r;s>=e;s-=r)o=AY(s,t[s],t[s+1],o);if(o&&tO(o,o.next)){var u=o.next;ex(o),o=u}return o}function gf(t,e){if(!t)return t;e||(e=t);var i,r=t;do if(i=!1,r.steiner||!tO(r,r.next)&&Wi(r.prev,r,r.next)!==0)r=r.next;else{var n=r.prev;if(ex(r),(r=e=n)===r.next)break;i=!0}while(i||r!==e);return e}function XS(t,e,i,r,n,s,o){if(t){!o&&s&&hGe(t,r,n,s);for(var u,d,h=t;t.prev!==t.next;)if(u=t.prev,d=t.next,s?sGe(t,r,n,s):nGe(t))e.push(u.i/i),e.push(t.i/i),e.push(d.i/i),ex(t),t=d.next,h=d.next;else if((t=d)===h){o?o===1?XS(t=oGe(gf(t),e,i),e,i,r,n,s,2):o===2&&aGe(t,e,i,r,n,s):XS(gf(t),e,i,r,n,s,1);break}}}function nGe(t){var e=t.prev,i=t,r=t.next;if(Wi(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(L0(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&Wi(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function sGe(t,e,i,r){var n=t.prev,s=t,o=t.next;if(Wi(n,s,o)>=0)return!1;for(var u=n.x<s.x?n.x<o.x?n.x:o.x:s.x<o.x?s.x:o.x,d=n.y<s.y?n.y<o.y?n.y:o.y:s.y<o.y?s.y:o.y,h=n.x>s.x?n.x>o.x?n.x:o.x:s.x>o.x?s.x:o.x,m=n.y>s.y?n.y>o.y?n.y:o.y:s.y>o.y?s.y:o.y,v=rz(u,d,e,i,r),b=rz(h,m,e,i,r),_=t.prevZ,x=t.nextZ;_&&_.z>=v&&x&&x.z<=b;){if(_!==t.prev&&_!==t.next&&L0(n.x,n.y,s.x,s.y,o.x,o.y,_.x,_.y)&&Wi(_.prev,_,_.next)>=0||(_=_.prevZ,x!==t.prev&&x!==t.next&&L0(n.x,n.y,s.x,s.y,o.x,o.y,x.x,x.y)&&Wi(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;_&&_.z>=v;){if(_!==t.prev&&_!==t.next&&L0(n.x,n.y,s.x,s.y,o.x,o.y,_.x,_.y)&&Wi(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;x&&x.z<=b;){if(x!==t.prev&&x!==t.next&&L0(n.x,n.y,s.x,s.y,o.x,o.y,x.x,x.y)&&Wi(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function oGe(t,e,i){var r=t;do{var n=r.prev,s=r.next.next;!tO(n,s)&&Ode(n,r,r.next,s)&&KS(n,s)&&KS(s,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(s.i/i),ex(r),ex(r.next),r=t=s),r=r.next}while(r!==t);return gf(r)}function aGe(t,e,i,r,n,s){var o=t;do{for(var u=o.next.next;u!==o.prev;){if(o.i!==u.i&&yGe(o,u)){var d=Cde(o,u);return o=gf(o,o.next),d=gf(d,d.next),XS(o,e,i,r,n,s),void XS(d,e,i,r,n,s)}u=u.next}o=o.next}while(o!==t)}function lGe(t,e,i,r){var n,s,o,u=[];for(n=0,s=e.length;n<s;n++)(o=kde(t,e[n]*r,n<s-1?e[n+1]*r:t.length,r,!1))===o.next&&(o.steiner=!0),u.push(mGe(o));for(u.sort(uGe),n=0;n<u.length;n++)i=gf(i=cGe(u[n],i),i.next);return i}function uGe(t,e){return t.x-e.x}function RP(t){if(t.next.prev===t)return t;let e=t;for(;;){const i=e.next;if(i.prev===e||i===e||i===t)break;e=i}return e}function cGe(t,e){var i=dGe(t,e);if(!i)return e;var r=Cde(i,t),n=gf(i,i.next);let s=RP(r);return gf(s,s.next),n=RP(n),RP(e===i?n:e)}function dGe(t,e){var i,r=e,n=t.x,s=t.y,o=-1/0;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var u=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(u<=n&&u>o){if(o=u,u===n){if(s===r.y)return r;if(s===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===o)return i;var d,h=i,m=i.x,v=i.y,b=1/0;r=i;do n>=r.x&&r.x>=m&&n!==r.x&&L0(s<v?n:o,s,m,v,s<v?o:n,s,r.x,r.y)&&(d=Math.abs(s-r.y)/(n-r.x),KS(r,t)&&(d<b||d===b&&(r.x>i.x||r.x===i.x&&pGe(i,r)))&&(i=r,b=d)),r=r.next;while(r!==h);return i}function pGe(t,e){return Wi(t.prev,t,e.prev)<0&&Wi(e.next,t,t.next)<0}function hGe(t,e,i,r){var n=t;do n.z===null&&(n.z=rz(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,fGe(n)}function fGe(t){var e,i,r,n,s,o,u,d,h=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,r=i,u=0,e=0;e<h&&(u++,r=r.nextZ);e++);for(d=h;u>0||d>0&&r;)u!==0&&(d===0||!r||i.z<=r.z)?(n=i,i=i.nextZ,u--):(n=r,r=r.nextZ,d--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;i=r}s.nextZ=null,h*=2}while(o>1);return t}function rz(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function mGe(t){var e=t,i=t;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==t);return i}function L0(t,e,i,r,n,s,o,u){return(n-o)*(e-u)-(t-o)*(s-u)>=0&&(t-o)*(r-u)-(i-o)*(e-u)>=0&&(i-o)*(s-u)-(n-o)*(r-u)>=0}function yGe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!gGe(t,e)&&(KS(t,e)&&KS(e,t)&&vGe(t,e)&&(Wi(t.prev,t,e.prev)||Wi(t,e.prev,e))||tO(t,e)&&Wi(t.prev,t,t.next)>0&&Wi(e.prev,e,e.next)>0)}function Wi(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function tO(t,e){return t.x===e.x&&t.y===e.y}function Ode(t,e,i,r){var n=zE(Wi(t,e,i)),s=zE(Wi(t,e,r)),o=zE(Wi(i,r,t)),u=zE(Wi(i,r,e));return n!==s&&o!==u||!(n!==0||!jE(t,i,e))||!(s!==0||!jE(t,r,e))||!(o!==0||!jE(i,t,r))||!(u!==0||!jE(i,e,r))}function jE(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function zE(t){return t>0?1:t<0?-1:0}function gGe(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&Ode(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}function KS(t,e){return Wi(t.prev,t,t.next)<0?Wi(t,e,t.next)>=0&&Wi(t,t.prev,e)>=0:Wi(t,e,t.prev)<0||Wi(t,t.next,e)<0}function vGe(t,e){var i=t,r=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&n<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==t);return r}function Cde(t,e){var i=new nz(t.i,t.x,t.y),r=new nz(e.i,e.x,e.y),n=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,s.next=r,r.prev=s,r}function AY(t,e,i,r){var n=new nz(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function ex(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function nz(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function sz(t,e,i,r){for(var n=0,s=e,o=i-r;s<i;s+=r)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}iz.deviation=function(t,e,i,r){var n=e&&e.length,s=n?e[0]*i:t.length,o=Math.abs(sz(t,0,s,i));if(n)for(var u=0,d=e.length;u<d;u++){var h=e[u]*i,m=u<d-1?e[u+1]*i:t.length;o-=Math.abs(sz(t,h,m,i))}var v=0;for(u=0;u<r.length;u+=3){var b=r[u]*i,_=r[u+1]*i,x=r[u+2]*i;v+=Math.abs((t[b]-t[x])*(t[_+1]-t[b+1])-(t[b]-t[_])*(t[x+1]-t[b+1]))}return o===0&&v===0?0:Math.abs((v-o)/o)},iz.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[n][s][o]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i};function zx(t){return t?{origin:mn(t.origin),vector:mn(t.vector)}:{origin:Y(),vector:Y()}}function bGe(t,e){const i=SGe.get();return i.origin=t,i.vector=e,i}function uat(t,e=zx()){return wGe(t.origin,t.vector,e)}function wGe(t,e,i=zx()){return Sr(i.origin,t),Sr(i.vector,e),i}function cat(t,e,i=zx()){return Sr(i.origin,t),ei(i.vector,e,t),i}function dat(t,e){const i=ei(jt.get(),e,t.origin),r=ht(t.vector,i),n=ht(t.vector,t.vector),s=Qr(r/n,0,1),o=ei(jt.get(),ci(jt.get(),t.vector,s),i);return ht(o,o)}function pat(t,e,i){return _Ge(t,e,0,1,i)}function hat(t,e,i){return dr(i,t.origin,ci(i,t.vector,e))}function _Ge(t,e,i,r,n){const{vector:s,origin:o}=t,u=ei(jt.get(),e,o),d=ht(s,u)/Lw(s);return ci(n,s,Qr(d,i,r)),dr(n,n,t.origin)}function fat(t,e){if(Rde(t,bGe(e.origin,e.direction),!1,hI)){const{tA:i,pB:r,distance2:n}=hI;if(i>=0&&i<=1)return n;if(i<0)return ep(t.origin,r);if(i>1)return ep(dr(jt.get(),t.origin,t.vector),r)}return null}function mat(t,e,i){return!!Rde(t,e,!0,hI)&&(Sr(i,hI.pA),!0)}function Rde(t,e,i,r){const s=t.origin,o=dr(jt.get(),s,t.vector),u=e.origin,d=dr(jt.get(),u,e.vector),h=jt.get(),m=jt.get();if(h[0]=s[0]-u[0],h[1]=s[1]-u[1],h[2]=s[2]-u[2],m[0]=d[0]-u[0],m[1]=d[1]-u[1],m[2]=d[2]-u[2],Math.abs(m[0])<1e-6&&Math.abs(m[1])<1e-6&&Math.abs(m[2])<1e-6)return!1;const v=jt.get();if(v[0]=o[0]-s[0],v[1]=o[1]-s[1],v[2]=o[2]-s[2],Math.abs(v[0])<1e-6&&Math.abs(v[1])<1e-6&&Math.abs(v[2])<1e-6)return!1;const b=h[0]*m[0]+h[1]*m[1]+h[2]*m[2],_=m[0]*v[0]+m[1]*v[1]+m[2]*v[2],x=h[0]*v[0]+h[1]*v[1]+h[2]*v[2],$=m[0]*m[0]+m[1]*m[1]+m[2]*m[2],E=(v[0]*v[0]+v[1]*v[1]+v[2]*v[2])*$-_*_;if(Math.abs(E)<1e-6)return!1;let A=(b*_-x*$)/E,O=(b+_*A)/$;i&&(A=Qr(A,0,1),O=Qr(O,0,1));const D=jt.get(),R=jt.get();return D[0]=s[0]+A*v[0],D[1]=s[1]+A*v[1],D[2]=s[2]+A*v[2],R[0]=u[0]+O*m[0],R[1]=u[1]+O*m[1],R[2]=u[2]+O*m[2],r.tA=A,r.tB=O,r.pA=D,r.pB=R,r.distance2=ep(D,R),!0}const hI={tA:0,tB:0,pA:Y(),pB:Y(),distance2:0},SGe=new qw(()=>zx());function xGe(t){return t?{p0:mn(t.p0),p1:mn(t.p1),p2:mn(t.p2)}:{p0:Y(),p1:Y(),p2:Y()}}function $Ge(t,e,i){const r=e[0]-t[0],n=e[1]-t[1],s=i[0]-t[0],o=i[1]-t[1];return .5*Math.abs(r*o-n*s)}function yat(t,e,i){return ei(PP,e,t),ei(IY,i,t),.5*mi(yn(PP,PP,IY))}new qw(zx);new qw(()=>xGe());const PP=Y(),IY=Y();function J8(t){return tee(t)?uf(t)||Yo(t)||MD(t)||OS(t)?I9e:t:lw(t)}function TGe(t,e=fI()){return Pde(t,e)}function EGe(t,e=fI()){return Pde(t,e,!1)}function Pde(t,e,i=t.hasZ){const r=J8(t.spatialReference),n=Iwe(r);if(n==null)return null;const s=(u,d)=>!(d.length<2)&&(vt(u,d[0],d[1],i&&d[2]||0),!0);let o=0;for(const u of t.rings){const d=u.length;if(d<3)continue;const{positionsWorldCoords:h}=e;for(;h.length<d;)h.push(Y());const m=MGe,v=vt(AGe,0,0,0),b=1/d;for(let $=0;$<d;$++){if(!s(m,u[$])||!S3(m,t.spatialReference,h[$],r))return null;fi(v,v,h[$],b)}const _=Ld(h[0],h[1],v,aUe());if(Lw(_)===0)continue;for(let $=0;$<d;$++)pUe(_,v,h[$],h[$]);const x=IGe(h);for(let $=0;$<x.length;$+=3)o+=$Ge(h[x[$]],h[x[$+1]],h[x[$+2]])}return Qk(o,n)}const MGe=Y(),AGe=Y();function fI(){return{positionsWorldCoords:[]}}function IGe(t){return iz(kGe(t),[],2)}function kGe(t){const e=new Float64Array(2*t.length);for(let i=0;i<t.length;++i){const r=t[i],n=2*i;e[n]=r[0],e[n+1]=r[1]}return e}const OGe=t=>({geodesicArea(e){const{spatialReference:i}=e;return Z8(i,RGe,r=>PGe(t,r),e)}});async function CGe(){const t=await H(()=>import("./geometryEngine-rNVlWxVF.js"),__vite__mapDeps([308,8,9]));return OGe(t)}function RGe(t){return Qk(Math.abs(gVe([t],"square-meters")[0]),"square-meters")}function PGe(t,e){try{return Qk(Math.abs(t.geodesicArea(e,"square-meters")),"square-meters")}catch{return null}}const DGe=t=>({autoAreaByElevationMode(e,i,r=fI()){if(i==="on-the-ground"){const n=t.geodesicArea(e);return n??EGe(e,r)}return TGe(e,r)},autoArea2D(e,i=fI()){return this.autoAreaByElevationMode(e,"on-the-ground",i)}});let DP=null;async function FE(){return DP||(DP=DGe(await CGe())),DP}function NGe(t){return LGe(t)}function LGe(t,e){const{hasZ:i,spatialReference:r}=t,n=J8(r);let s=0;const o=hee(n);if(o==null)return null;const u=Y8;for(const d of t.paths){if(d.length<2)continue;const h=d.length-1;for(let m=0;m<h;++m){const v=d[m];Ga[0]=v[0],Ga[1]=v[1],Ga[2]=i?v[2]:0;const b=d[m+1];Ba[0]=b[0],Ba[1]=b[1],Ba[2]=i?b[2]:0;const _=u(Ga,Ba,r);if(_==null)return null;s+=_.value}}return up(s,o)}function jGe(t,e){const{spatialReference:i}=t;return Fi(i,e.spatialReference)?(Ga[0]=t.x,Ga[1]=t.y,Ga[2]=t.hasZ?t.z:0,Ba[0]=e.x,Ba[1]=e.y,Ba[2]=e.hasZ?e.z:0,Y8(Ga,Ba,i)):null}function gat(t,e){const{spatialReference:i}=t;return Fi(i,e.spatialReference)?(Ga[0]=t.x,Ga[1]=t.y,Ga[2]=t.hasZ?t.z:0,Ba[0]=e.x,Ba[1]=e.y,Ba[2]=e.hasZ?e.z:0,FGe(Ga,Ba,i)):null}function vat(t){return t!=null?zGe(t.hasZ?t.z:0,t.spatialReference):null}function zGe(t,e){const i=fee(e);return i!=null?up(t??0,i):null}function Y8(t,e,i){const r=Dde(t,e,i,1);return r!=null?up(r.horizontal,r.unit):null}function FGe(t,e,i){const r=Dde(t,e,i,2);return r!=null?up(r.verticalSigned,r.unit):null}function Dde(t,e,i,r){const n=J8(i),s=hee(n);if(s==null)return null;const o=e[2]-t[2];if(r===2)return{verticalSigned:o,unit:s};if(!S3(t,i,NP,n)||!S3(e,i,VE,n))return null;if(r===0)return{direct:ec(VE,NP),unit:s};if(vt(UE,t[0],t[1],e[2]),!S3(UE,i,UE,n))return null;const u=ec(UE,VE);return r===1?{horizontal:u,unit:s}:{direct:ec(VE,NP),horizontal:u,vertical:Math.abs(o),unit:s}}const Ga=Y(),Ba=Y(),NP=Y(),VE=Y(),UE=Y();function VGe(t){return{autoLength2D:e=>t.geodesicLength(e)??NGe(e),autoDistanceBetweenPoints2D:(e,i)=>t.geodesicDistanceBetweenPoints(e,i)??jGe(e,i),autoDistance2D:(e,i,r)=>(E1[0]=e[0],E1[1]=e[1],E1[2]=e.length===3?e[2]:0,M1[0]=i[0],M1[1]=i[1],M1[2]=i.length===3?i[2]:0,t.geodesicDistance(E1,M1,r)??Y8(E1,M1,r))}}async function lm(){return VGe(await Ide())}const E1=Y(),M1=Y();function UGe(t){return t?.type==="graphic"}function qGe(t){return t.find(UGe)??null}class Nde{constructor(e){this.layer=e}get elevationInfo(){return this.layer.elevationInfo}add(e){this.layer.add(e)}addMany(e){this.layer.addMany(e)}onGraphicsChange(e){const{layer:i}=this;return Wo(()=>i.graphics,"change",r=>e(r))}has(e){return e.layer===this.layer}remove(e){this.layer.remove(e)}removeMany(e){this.layer.removeMany(e)}removeAll(){this.layer.removeAll()}}l([p()],Nde.prototype,"elevationInfo",null);let Lde=class{constructor(e){this.layer=e}get elevationInfo(){}add(e,i){(this._getSublayerForCreateTool(i)??this._getSublayerForGraphic(e))?.add(e)}addMany(e,i){if(i){const r=this._getSublayerForCreateTool(i);if(r)return void r.addMany(e)}e.forEach(r=>this._getSublayerForGraphic(r)?.add(r))}onGraphicsChange(e){const{layer:i}=this;if(i.sublayers?.length)return uo(i.sublayers?.toArray().map(r=>Wo(()=>r.graphics,"change",n=>e(n))))}has(e){const{layer:i}=this;return e.layer===i||e.sourceLayer===i||!!i.sublayers?.some(r=>e.layer===r||e.sourceLayer===r)}remove(e){this._getSublayerForGraphic(e)?.remove(e)}removeMany(e){e.forEach(i=>this._getSublayerForGraphic(i)?.remove(i))}removeAll(){this.layer.sublayers?.forEach(e=>e.removeAll())}_getSublayerForCreateTool(e){const{layer:i}=this;switch(e){case"point":return i.pointLayer;case"polyline":return i.polylineLayer;case"polygon":return i.polygonLayer;case"multipoint":return i.multipointLayer;case"text":return i.textLayer}}_getSublayerForGraphic(e){const{layer:i}=this;if(e?.geometry)switch(e.geometry.type){case"point":return e.symbol?.type==="text"?i.textLayer:i.pointLayer;case"polyline":return i.polylineLayer;case"polygon":return i.polygonLayer;case"multipoint":return i.multipointLayer}}};l([p()],Lde.prototype,"elevationInfo",null);let En=class extends sp{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){const{activeComponent:e}=this;if(!e)return null;switch(e.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":return e.graphicSymbol?.type==="text"?"text":e.geometryType;case"draw-3d":return e.geometryType}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){this.activeComponent?.reset()}refreshComponent(){const e=this.activeComponent;e&&(e.type!=="box"&&e.type!=="reshape"&&e.type!=="graphic-mover"||e.refresh())}set undo(e){this._set("undo",()=>{this.canUndo()&&e()})}set redo(e){this._set("redo",()=>{this.canRedo()&&e()})}};l([p()],En.prototype,"activeComponent",void 0),l([p()],En.prototype,"cancelled",void 0),l([p()],En.prototype,"history",void 0),l([p()],En.prototype,"tool",null),l([p()],En.prototype,"type",void 0),l([p()],En.prototype,"canUndo",null),l([p()],En.prototype,"canRedo",null),l([p()],En.prototype,"onEnd",void 0),l([p()],En.prototype,"undo",null),l([p()],En.prototype,"redo",null),l([p()],En.prototype,"toggleTool",void 0),l([p()],En.prototype,"addToSelection",void 0),l([p()],En.prototype,"removeFromSelection",void 0),En=l([M("esri.widgets.Sketch.support.OperationHandle")],En);let k3=class extends En{};l([p()],k3.prototype,"activeComponent",void 0),k3=l([M("esri.widgets.Sketch.support.OperationHandle.CreateOperationHandle")],k3);let jd=class extends En{};l([p()],jd.prototype,"activeComponent",void 0),jd=l([M("esri.widgets.Sketch.support.OperationHandle.UpdateOperationHandle")],jd);function GGe(t,e){return e==="freehandPolygon"||e==="freehandPolyline"?"freehand":t??(e==="rectangle"||e==="circle"?"hybrid":"click")}function BGe(t){switch(t){case"freehandPolygon":return"polygon";case"freehandPolyline":return"polyline";case"text":return"point";default:return t}}function kY(t){if(t.length>1)return!1;const e=t.at(0)?.geometry;return e?.type==="point"||e?.type==="multipoint"&&e.points.length<2}const OY={defaultZ:0},A1={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,highlightOptions:{enabled:!0,name:EF},tool:"transform"},LP=Symbol(),CY=Symbol();let _t=class extends sp{constructor(t){super(t),this._defaultSnappingManager=null,this._internalGraphicsLayer=new Du({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._updatingHandles=new Jh,this._viewHandlesKey="viewHandles",this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.layer=null,this.pointSymbol=new wr({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new Ks({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new Bi({color:[130,130,130,1],width:2}),this.meshSymbol=new Zu({symbolLayers:new fe([new Wn])}),this.textSymbol=new Ut({text:"text"}),this.updateGraphics=new fe,this.updateOnGraphicClick=!0,this.creationMode="single",this.vertexSymbol=new wr({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.sketchOptions=new Xce,this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._sketchContinuationFlag=!1,this._onLayerAdapterChange=async()=>{const{_layerAdapter:e}=this;if(this.removeHandles(CY),!e)return;const i=[e.onGraphicsChange(r=>this._onLayerGraphicsChangeCallback(r)),be(()=>e.elevationInfo,r=>{r!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=r)},Gt)].filter(is);this.addHandles(i,CY)},this._originalPopupEnabled=null,this.defaultCreateOptions=OY,this.defaultUpdateOptions=A1,this.snappingOptions=t?.snappingManager?.options??t?.snappingOptions??new Cr}initialize(){this.addHandles([Wo(()=>this.view?.map?.layers,"change",t=>{this.layer&&t.removed.includes(this.layer)&&this.cancel()}),be(()=>this._layerAdapter,()=>this._onLayerAdapterChange(),Gt),be(()=>this.view,t=>{this._defaultSnappingManager=at(this._defaultSnappingManager),t&&(this.snappingManager||(this._defaultSnappingManager=new Ml({view:t,options:this.snappingOptions})),t.type==="2d"?H(()=>import("./editingTools-B8d__kCB.js"),__vite__mapDeps([309,310,311,312,313,293,294,45,43,305,314,215,315,262,263,264,265,266,267,268,83,269,270,271,272,273,151,116,132,145,97,316])):t.type==="3d"&&(H(()=>import("./ImageMaterial.glsl-BRIpSMWQ.js").then(e=>e.e),__vite__mapDeps([317,97,313,293,294,45,43,305,318,319,117,40,34,118,119,37,36,320,39,321,104,33,35,133,116,121,182,13,131,130,322,127,115,90,120,123,124,125,126,323,311,312,314,215,324,315,262,263,264,265,266,267,268,83,269,270,271,272,273,151,132,325,326,144,145,327])),H(()=>import("./LineCallout.glsl-ByNpvNBG.js").then(e=>e.G),__vite__mapDeps([328,321,117,40,34,118,119,37,36,104,33,35,133,116,121,59,13,283,128,115,45,43,90,120,129,130,131,329,12,21,15,16,18,217,153,211,218]))))},Gt),be(()=>this.view?.spatialReference,(t,e)=>{t&&e&&!t.equals(e)&&this.cancel()})]),U7e(this)}destroy(){this.cancel(),this._removeDefaultLayer(),this._defaultSnappingManager=at(this._defaultSnappingManager),this._set("snappingManager",null),this._set("view",null),this._updatingHandles.destroy(),this.emit("destroy")}get _layerAdapter(){const{layer:t}=this;switch(t?.type){case"graphics":return new Nde(t);case"map-notes":return new Lde(t);default:return null}}get activeTool(){return this._operationHandle?.tool??null}get activeCreateToolDrawMode(){return this._operationHandle?.type==="create"&&this._operationHandle.activeComponent&&"mode"in this._operationHandle.activeComponent?this._operationHandle.activeComponent.mode:null}get activeTooltip(){const{activeComponent:t,destroyed:e}=this,i=!e&&t&&"tooltip"in t?t.tooltip:null;return i?.visible?i:null}get activeComponent(){return this._operationHandle?.activeComponent??null}get createGraphic(){return this.activeComponent==null||this.activeComponent.type!=="draw-3d"&&this.activeComponent.type!=="draw-2d"?this._get("createGraphic"):this.activeComponent.graphic}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(t){this._set("defaultCreateOptions",{...OY,...t})}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(t){this._set("defaultUpdateOptions",{...A1,...t,reshapeOptions:{...A1.reshapeOptions,...t?.reshapeOptions},highlightOptions:{...A1.highlightOptions,...t?.highlightOptions}})}get labelOptions(){return this.sketchOptions.labels}set labelOptions(t){this.sketchOptions.labels=t}get snappingOptions(){return this.snappingManager?.options??this._get("snappingOptions")}set snappingOptions(t){this._defaultSnappingManager!=null&&(this._defaultSnappingManager.options=t),this._set("snappingOptions",t)}get snappingManager(){return this._isOverridden("snappingManager")&&this._get("snappingManager"),this._defaultSnappingManager}set snappingManager(t){if(t)this._isOverridden("snappingManager")||(this._defaultSnappingManager=at(this._defaultSnappingManager)),this._override("snappingManager",t);else{const{view:e}=this;!this._defaultSnappingManager&&e&&(this._defaultSnappingManager=new Ml({options:this.snappingOptions,view:e})),this._clearOverride("snappingManager")}}get state(){const t=!(!this.view?.ready||!this.layer),e=this._operationHandle;return t&&e?"active":t?"ready":"disabled"}get tooltipOptions(){return this.sketchOptions.tooltips}set tooltipOptions(t){this.sketchOptions.tooltips=t}get updating(){return!(!this._updatingHandles.updating&&!this.snappingManager?.updating)}get valueOptions(){return this.sketchOptions.values}set valueOptions(t){this.sketchOptions.values=t}get view(){return this._get("view")}set view(t){const e=this._get("view");if(e){const{container:r,map:n}=e;r&&this._clearCursor(),n?.remove(this._internalGraphicsLayer),this.removeHandles(this._viewHandlesKey),this.cancel()}const i="view-ready";this.removeHandles(i),t&&this.addHandles(Pn(()=>t.ready,r=>{this.removeHandles(this._viewHandlesKey),r&&this.addHandles(this._generateViewHandles(t),this._viewHandlesKey)},Gt),i),this._set("view",t)}addGraphic(t){this._layerAdapter?.add(t)}addGraphics(t){this._layerAdapter?.addMany(t)}hasGraphic(t){return!!this._layerAdapter?.has(t)}removeGraphic(t){this._layerAdapter?.remove(t)}removeGraphics(t){this._layerAdapter?.removeMany(t)}removeAllGraphics(){this._layerAdapter?.removeAll()}cancel(){this._moduleLoaderAbortController=Cn(this._moduleLoaderAbortController),this._viewReadyAbortController=Cn(this._viewReadyAbortController),this._sketchContinuationFlag=!0,this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle?.complete()}delete(){const{state:t,updateGraphics:e}=this;if(t==="active"&&e.length){const{activeTool:i}=this,r=e.toArray();this.removeGraphics(r),this.cancel(),this._emitDeleteEvent({graphics:r,tool:i})}}duplicate(){if(this.state==="active"&&this.updateGraphics.length){const t=this.updateGraphics.map(e=>e.clone()).toArray();return this.addGraphics(t),this.emit("duplicate",{graphics:t,type:"duplicate"}),t}return[]}async create(t,e){this.cancel(),await this._waitViewReady();const{view:i,layer:r}=this;if(!i||this.state==="disabled")throw r||this._logMissingLayer(),xt();if(i.activeTool!=null&&(i.activeTool=null),!t)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");vY(i,this._internalGraphicsLayer);const n=await this._updatingHandles.addPromise(this._setupCreateOperation(t,e));if(n==null||this.destroyed)return void i.map?.remove(this._internalGraphicsLayer);const s=()=>{if(n===this._operationHandle){const o=this.createGraphic,u=this._operationHandle.cancelled;if(this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),this.view?.map?.remove(this._internalGraphicsLayer),n.cancelled||o==null||this.addGraphic(o),this._sketchContinuationFlag=!1,this.emit("create",{graphic:o,state:u?"cancel":"complete",tool:t,toolEventInfo:null,type:"create"}),u||this._sketchContinuationFlag)return;const{creationMode:d}=this;if(d==="continuous"){if(e?.geometryToPlace)return;this._updatingHandles.addPromise(Yd(this.create(t,e)))}else d==="update"&&o&&this._updatingHandles.addPromise(Yd(this.update([o])))}};n.on("complete",s),this._operationHandle=n,i.ready&&i.focus()}async place(t,e){return await t.load(),this.create("mesh",{mode:"click",hasZ:t.hasZ,geometryToPlace:t,...e})}async update(t,e){this.cancel(),await this._waitViewReady();const{layer:i,view:r,state:n}=this;if(!r||n==="disabled")throw i||this._logMissingLayer(),xt();r.activeTool!=null&&(r.activeTool=null);const s=Array.isArray(t)?t:[t];if(t==null||!s?.length)return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(s.some(u=>this.hasGraphic(u)?u.geometry==null&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0):(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0)))return;const o=await this._updatingHandles.addPromise(this._setupUpdateOperation(s,e));this.destroyed||o==null||Ir(o)||(vY(r,this._internalGraphicsLayer),this._setUpdateOperationHandle(o,e),this.emit("update",{graphics:s,state:"start",aborted:!1,tool:o.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(t){const e=this.view;if(e){t=Array.isArray(t)?t:[t];for(const i of t)i.geometry==null||i.geometry.type==="mesh"||Fi(i.geometry.spatialReference,e.spatialReference)||(Qo(i.geometry.spatialReference,e.spatialReference)||cc()||await Xd(),i.geometry=Is(i.geometry,e.spatialReference))}else this._logMissingView()}undo(){this.canUndo()&&this._operationHandle?.undo()}redo(){this.canRedo()&&this._operationHandle?.redo()}canUndo(){return!!this._operationHandle?.canUndo()}canRedo(){return!!this._operationHandle?.canRedo()}toggleUpdateTool(){this._operationHandle?.toggleTool()}async _getFirstHit(t){const e=this.view;if(!e)return this._logMissingView(),null;if(e.type==="2d"){const n=[];e.map.allLayers.forEach(o=>{o.type!=="vector-tile"&&o.type!=="imagery"||n.push(o)});const s=await e.hitTest(t,{exclude:n});return qGe(s.results)}const i=[e.map.ground];e.map.allLayers.forEach(n=>{DEe(n)&&i.push(n)});const r=await e.hitTest(t,{exclude:i});if(r.results.length>0){const n=r.results[0];if(n!=null&&n.type==="graphic"&&n.graphic&&(!r.ground.mapPoint||e.map.ground.opacity<1||r.ground.distance-(n.distance??0)>-Math.min(3*r.ground.distance,e.viewingMode==="global"?UI(e.renderCoordsHelper.spatialReference).radius/e.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return n}return null}_generateViewHandles(t){return[t.on("immediate-click",async e=>{const i=this.state==="active"&&this._operationHandle?.type==="create";this.state!=="disabled"&&!i&&this.updateOnGraphicClick&&await this._updatingHandles.addPromise(this._handleImmediateClick(e))},Wt.WIDGET)]}async _handleImmediateClick(t){const e=await t.defer(()=>this._getFirstHit(Aa(t)));let i=null;if(e!=null){const r=e.graphic;this.updateGraphics.includes(r)||this.hasGraphic(r)?(t.stopPropagation(),i=r):this.view?.type!=="2d"||this._isComponentGraphic(r)||this.state!=="active"||this.cancel()}else this.state==="active"&&this.cancel();i==null||this.updateGraphics.includes(i)||await this.update([i],{...this.defaultUpdateOptions,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions}})}async _setupCreateOperation(t,e){const i=this.view;if(!i)return this._logMissingView(),null;const r={hasZ:i.type==="3d",...this.defaultCreateOptions,...e},n=await this._setupDrawGraphicTool(t,i,r);return n==null?null:(i.tools.add(n),i.activeTool=n,this._setupCreateOperationHandle(n,t))}async _setupDrawGraphicTool(t,e,i){if(t==="multipoint"&&e.type==="3d")return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;if(!e)return this._logMissingView(),null;const{cursor:r,defaultZ:n,hasZ:s,geometryToPlace:o,graphicProperties:u,mode:d,preserveAspectRatio:h}=i,m=GGe(d,t),v=BGe(t),b=i?.optionsPerTool?.has(t)?i.optionsPerTool.get(t):{},_=b?.preserveAspectRatio??h??t!=="rectangle",x={centered:t!=="rectangle"&&!(t==="circle"&&!_),cursor:r,defaultZ:n,forceUniformSize:_,graphicProperties:{...u,attributes:{...u?.attributes}},geometryToPlace:o,geometryType:v,mode:m,graphicSymbol:this._getGraphicSymbolFromTool(t),hasZ:s,snappingManager:this.snappingManager,snapToScene:!1,view:e,...b};return e.type==="2d"?this._makeDrawGraphicTool2D(x):this._makeDrawGraphicTool3D(x)}async _makeDrawGraphicTool2D(t){const[e,i,r]=await Promise.all([this._requireModule(H(()=>import("./editingTools-B8d__kCB.js"),__vite__mapDeps([309,310,311,312,313,293,294,45,43,305,314,215,315,262,263,264,265,266,267,268,83,269,270,271,272,273,151,116,132,145,97,316]))),FE(),lm()]);return Ir(e)||this.destroyed?null:new e.module.DrawGraphicTool2D({...t,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:WGe(t.geometryType)?this.activeFillSymbol:null,sketchOptions:this.sketchOptions,automaticAreaMeasurementUtils:i,automaticLengthMeasurementUtils:r})}async _makeDrawGraphicTool3D(t){const[e,i,r]=await Promise.all([this._requireModule(H(()=>import("./ImageMaterial.glsl-BRIpSMWQ.js").then(n=>n.e),__vite__mapDeps([317,97,313,293,294,45,43,305,318,319,117,40,34,118,119,37,36,320,39,321,104,33,35,133,116,121,182,13,131,130,322,127,115,90,120,123,124,125,126,323,311,312,314,215,324,315,262,263,264,265,266,267,268,83,269,270,271,272,273,151,132,325,326,144,145,327]))),FE(),lm()]);return Ir(e)||this.destroyed?null:new e.module.DrawGraphicTool3D({...t,elevationInfo:this._layerAdapter?.elevationInfo,snapToScene:!0,sketchOptions:this.sketchOptions,automaticAreaMeasurementUtils:i,automaticLengthMeasurementUtils:r})}_setupCreateOperationHandle(t,e){const i=this.view;if(!i)return this._logMissingView(),null;let r=null;const n=t.forceUniformSize,s=t.centered,o=[i.on("key-down",d=>{if(d.key===Ki.pan)d.stopPropagation(),d.repeat||(t.enabled=!1);else if(d.key===Ki.complete)d.stopPropagation(),t.completeCreateOperation();else if(d.key!==Ki.vertexAdd||d.repeat)d.key===Ki.undo?(d.stopPropagation(),u.undo()):d.key===Ki.redo?(d.stopPropagation(),u.redo()):d.key!==Ki.constraint||t.geometryType!=="rectangle"&&t.geometryType!=="circle"||d.repeat?d.key===Ki.center&&(d.repeat||(t.centered=!s,d.stopPropagation())):(t.forceUniformSize=!n,d.stopPropagation());else{const h=t.drawOperation.geometryType;h!=="polyline"&&h!=="polygon"&&h!=="multipoint"||(d.stopPropagation(),t.drawOperation.commitStagedVertex())}},Wt.WIDGET),i.on("key-up",d=>{d.key===Ki.pan?t.enabled=!0:d.key!==Ki.constraint||t.geometryType!=="rectangle"&&t.geometryType!=="circle"?d.key===Ki.center&&(t.centered=s,d.stopPropagation()):(t.forceUniformSize=n,d.stopPropagation())},Wt.WIDGET),t.on("vertex-add",d=>{switch(r=r==null?"start":"active",d.operation){case"apply":this.emit("create",{graphic:t.graphic,state:r,tool:this.activeTool,toolEventInfo:d,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[t.graphic],tool:t.geometryType});break;case"redo":this._emitRedoEvent({graphics:[t.graphic],tool:t.geometryType})}}),t.on("cursor-update",d=>{t.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:t.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:d.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),t.on("vertex-remove",d=>{switch(d.operation){case"apply":this.emit("create",{graphic:t.graphic,state:"active",tool:this.activeTool,toolEventInfo:d,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[t.graphic],tool:t.geometryType});break;case"redo":this._emitRedoEvent({graphics:[t.graphic],tool:t.geometryType})}}),t.on("complete",d=>{this._set("createGraphic",d.graphic),r="complete",d.aborted?u&&u.cancel():u&&u.complete()}),be(()=>this._getGraphicSymbolFromTool(e),d=>{t.graphicSymbol=d})],u=new k3({activeComponent:t,type:"create",onEnd:()=>{uu(o),i.tools?.remove(t)},undo:()=>{t.canUndo&&t.undo()},redo:()=>{t.canRedo&&t.redo()},canUndo:()=>t.canUndo,canRedo:()=>t.canRedo});return u}_getGraphicSymbolFromTool(t){switch(t){case"point":case"multipoint":return this.pointSymbol;case"polyline":case"freehandPolyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":case"freehandPolygon":return this.polygonSymbol;case"mesh":return this.meshSymbol;case"text":return this.textSymbol}}async _setupUpdateOperation(t,e){const{view:i}=this;if(!i)return this._logMissingView(),null;const r={...this.defaultUpdateOptions,...e,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...e?.reshapeOptions},highlightOptions:{...this.defaultUpdateOptions.highlightOptions,...e?.highlightOptions}};let n=r.tool??A1.tool;if(this.removeGraphics(t),this.addGraphics(t),i.type==="3d"){if(t.length===0)return null;switch(n){case"move":return this._setupMove3DOperation(t,r,i,n);case"reshape":return t.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupReshape3DOperation(t[0],r,i);case"transform":return this._setupGraphicTransform3DOperation(t,r,i)}}switch(n){case"move":return this._setupMove2DOperation(t,r,i);case"reshape":return t.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupTransformOrReshape2DOperation(t,n,r,i);case"transform":return kY(t)&&(n="reshape"),this._setupTransformOrReshape2DOperation(t,n,r,i)}}async _setupMove3DOperation(t,e,i,r,n=!1){const[s,o]=await Promise.all([this._requireModule(H(()=>import("./ImageMaterial.glsl-BRIpSMWQ.js").then(x=>x.e),__vite__mapDeps([317,97,313,293,294,45,43,305,318,319,117,40,34,118,119,37,36,320,39,321,104,33,35,133,116,121,182,13,131,130,322,127,115,90,120,123,124,125,126,323,311,312,314,215,324,315,262,263,264,265,266,267,268,83,269,270,271,272,273,151,132,325,326,144,145,327]))),lm()]);if(Ir(s))return s;const{ManipulatedObject3DGraphic:u,MoveTool3D:d}=s.module,h=new Map,m=()=>{h.forEach(x=>x.destroy()),h.clear()};for(const x of t){const $=new u({view:i,graphic:x}),E=R7e($);if(E!==0)return m(),this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${gY(E)}).`),null;h.set(x,$)}const v=new d({view:i,enableZ:e.enableZ,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,autoLengthMeasurementUtils:o});i.tools.add(v),v.objects.addMany(Array.from(h.values())),n||this.updateGraphics.addMany(t);const b=[],_=new jd({activeComponent:v,tool:r,type:"update",onEnd:()=>{uu(b),BE(i,v),m()},undo:()=>{PY(this.view,v),qE(_,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},redo:()=>{GE(_,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:x=>{this.updateGraphics.push(x);const $=new u({view:i,graphic:x});h.set(x,$),v.objects.push($),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[x],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:x=>{const $=this.updateGraphics.indexOf(x);if(_.history.undo.forEach(A=>A.updates.splice($,1)),_.history.redo.forEach(A=>A.updates.splice($,1)),this.updateGraphics.remove(x),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[x],type:"selection-change"},type:"update"}),this.updateGraphics.length===0)return void _.complete();const E=h.get(x);E&&(v.objects.remove(E),E.destroy(),h.delete(x))},toggleTool:async()=>{if(this.updateGraphics.length!==1||e.toggleToolOnClick===!1||r!=="transform")return;const x=this.updateGraphics.at(0),$=await this._setupReshape3DOperation(x,e,i,!0);$&&!Ir($)&&(_.onEnd(),_.destroy(),this._setUpdateOperationHandle($,e))}});return b.push(...this._getHandlesForComponent(_,e),i.on("immediate-click",x=>this._getCommonUpdateOperationClickHandlers(_,x,e),Wt.WIDGET),i.on("key-down",x=>{this._getCommonUpdateOperationKeyDownHandlers(_,x)},Wt.WIDGET)),_}_setupGraphicTransform3DOperation(t,e,i,r=!1){if(t.length===1&&N7e(t[0])===0){const n=t[0],s=n.geometry;if(s!=null&&(s.type==="point"||s.type==="mesh"))return this._setupPointTransform3DOperation(n,e,i);if(s!=null&&(s.type==="polygon"||s.type==="polyline"))return this._setupPolyTransform3DOperation(n,e,i,r)}return this._setupMove3DOperation(t,e,i,"transform",r)}async _setupPointTransform3DOperation(t,e,i){const r="transform",{enableRotation:n,enableScaling:s,enableZ:o}=e,u=await this._requireModule(H(()=>import("./ImageMaterial.glsl-BRIpSMWQ.js").then(x=>x.e),__vite__mapDeps([317,97,313,293,294,45,43,305,318,319,117,40,34,118,119,37,36,320,39,321,104,33,35,133,116,121,182,13,131,130,322,127,115,90,120,123,124,125,126,323,311,312,314,215,324,315,262,263,264,265,266,267,268,83,269,270,271,272,273,151,132,325,326,144,145,327])));if(Ir(u))return u;const{TransformTool3D:d,ManipulatedObject3DGraphic:h}=u.module,m=new h({graphic:t,view:i}),v=new d({object:m,view:i,enableRotation:n,enableScaling:s,enableZ:o,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});i.tools.add(v),this.updateGraphics.add(t);const b=[],_=new jd({activeComponent:v,tool:r,type:"update",onEnd:()=>{uu(b),BE(i,v),m.destroy()},undo:()=>{PY(this.view,v),qE(_,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},redo:()=>{GE(_,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:async x=>{this.updateGraphics.add(x),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[x],removed:[],type:"selection-change"},type:"update"}),_.onEnd(),_.destroy();const $=await this._setupMove3DOperation(this.updateGraphics.toArray(),e,i,"transform",!0);Ir($)||this._setUpdateOperationHandle($,e)},removeFromSelection:x=>{this.updateGraphics.remove(x),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[x],type:"selection-change"},type:"update"}),_.complete()},toggleTool:()=>{}});return b.push(...this._getHandlesForComponent(_,e),i.on("immediate-click",x=>this._getCommonUpdateOperationClickHandlers(_,x,e),Wt.WIDGET),i.on("key-down",x=>{this._getCommonUpdateOperationKeyDownHandlers(_,x)},Wt.WIDGET)),_}async _setupPolyTransform3DOperation(t,e,i,r=!1){const n="transform",{enableRotation:s,enableScaling:o,enableZ:u,preserveAspectRatio:d}=e,[h,m]=await Promise.all([this._requireModule(H(()=>import("./ImageMaterial.glsl-BRIpSMWQ.js").then(O=>O.e),__vite__mapDeps([317,97,313,293,294,45,43,305,318,319,117,40,34,118,119,37,36,320,39,321,104,33,35,133,116,121,182,13,131,130,322,127,115,90,120,123,124,125,126,323,311,312,314,215,324,315,262,263,264,265,266,267,268,83,269,270,271,272,273,151,132,325,326,144,145,327]))),lm()]);if(Ir(h))return h;const{ManipulatedObject3DGraphic:v,ExtentTransformTool:b}=h.module,_=this.view?.inputManager?.isModifierKeyDown(Ki.constraint),x=new v({view:i,graphic:t}),$=new b({object:x,view:i,enableRotation:s,enableScaling:o,enableZ:u,preserveAspectRatio:!!d!=!!_,sketchOptions:this.sketchOptions,automaticLengthMeasurementUtils:m});i.tools.add($),r||this.updateGraphics.add(t);const E=[],A=new jd({activeComponent:$,tool:n,type:"update",onEnd:()=>{uu(E),BE(i,$),x.destroy()},canUndo:()=>!$.destroyed&&$.canUndo,undo:()=>{$.destroyed||($.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:n}))},canRedo:()=>!$.destroyed&&$.canRedo,redo:()=>{$.destroyed||($.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:n}))},addToSelection:async O=>{this.updateGraphics.add(O),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[O],removed:[],type:"selection-change"},type:"update"}),A.onEnd(),A.destroy();const D=await this._setupMove3DOperation(this.updateGraphics.toArray(),e,i,"transform",!0);Ir(D)||this._setUpdateOperationHandle(D,e)},removeFromSelection:O=>{this.updateGraphics.remove(O),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[O],type:"selection-change"},type:"update"}),A.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||e.toggleToolOnClick===!1)return;const O=await this._setupReshape3DOperation(t,e,i,!0);O&&!Ir(O)&&(A.onEnd(),A.destroy(),this._setUpdateOperationHandle(O,e))}});return E.push(...this._getHandlesForComponent(A,e),i.on("immediate-click",O=>this._getCommonUpdateOperationClickHandlers(A,O,e),Wt.WIDGET),i.on("key-down",O=>this._getCommonUpdateOperationKeyDownHandlers(A,O),Wt.WIDGET),i.on("key-down",O=>{O.key!==Ki.constraint||O.repeat||($.preserveAspectRatio=!$.preserveAspectRatio,O.stopPropagation())},Wt.WIDGET),i.on("key-up",O=>{O.key===Ki.constraint&&($.preserveAspectRatio=!$.preserveAspectRatio,O.stopPropagation())},Wt.WIDGET)),A}async _setupMove2DOperation(t,e,i){const r="move";this.updateGraphics.addMany(t),await this._updatingHandles.addPromise(this._updateSpatialReference(t));const n=await this._getGraphicMover(t,e,i);if(Ir(n))return n;const s=new jd({activeComponent:n,tool:r,type:"update",onEnd:()=>{this._clearCursor(),uu(d),uu(u),n.destroy(),this._internalGraphicsLayer?.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const h=this.updateGraphics.toArray();qE(s,h),s.refreshComponent(),this._emitUndoEvent({graphics:h,tool:r})},redo:()=>{const h=this.updateGraphics.toArray();GE(s,h),s.refreshComponent(),this._emitRedoEvent({graphics:h,tool:r})},addToSelection:async h=>{await this._updatingHandles.addPromise(this._updateSpatialReference(h)),this.updateGraphics.push(h),n.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[h],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:h=>{const m=this.updateGraphics.indexOf(h);s.history.undo.forEach(b=>b.updates.splice(m,1)),s.history.redo.forEach(b=>b.updates.splice(m,1)),this.updateGraphics.remove(h);const v=this.updateGraphics.toArray();this.emit("update",{graphics:v,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[h],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?n.graphics=v:s.complete()}});let o=!1;const u=[i.on("immediate-click",h=>this._getCommonUpdateOperationClickHandlers(s,h,e),Wt.WIDGET),i.on("key-down",h=>{this._getCommonUpdateOperationKeyDownHandlers(s,h),h.key!==Ki.constraint||h.repeat||(o=!0,n.enableMoveAllGraphics=!n.enableMoveAllGraphics)},Wt.WIDGET),i.on("key-up",h=>{h.key===Ki.constraint&&o&&(o=!1,n.enableMoveAllGraphics=!n.enableMoveAllGraphics)},Wt.WIDGET)],d=this._getHandlesForComponent(s,e);return s}async _setupReshape3DOperation(t,e,i,r=!1){const n="reshape",[s,o,u]=await Promise.all([this._requireModule(H(()=>import("./ImageMaterial.glsl-BRIpSMWQ.js").then(E=>E.e),__vite__mapDeps([317,97,313,293,294,45,43,305,318,319,117,40,34,118,119,37,36,320,39,321,104,33,35,133,116,121,182,13,131,130,322,127,115,90,120,123,124,125,126,323,311,312,314,215,324,315,262,263,264,265,266,267,268,83,269,270,271,272,273,151,132,325,326,144,145,327]))),FE(),lm()]);if(Ir(s))return s;const{ManipulatedObject3DGraphic:d,ReshapeTool3D:h}=s.module,m=new d({view:i,graphic:t}),v=P7e(m);if(v!==0)return m.destroy(),this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${gY(v)}).`),null;const b=e.reshapeOptions,_=new h({view:i,object:m,enableZVertex:e.enableZ&&b?.vertexOperation==="move",enableZShape:e.enableZ&&b?.shapeOperation==="move",enableMoveObject:b?.shapeOperation==="move"||b?.shapeOperation==="move-xy",enableMidpoints:b?.edgeOperation==="split",enableEdgeOffset:b?.edgeOperation==="offset",snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,automaticAreaMeasurementUtils:o,automaticLengthMeasurementUtils:u});i.tools.add(_),r||this.updateGraphics.add(m.graphic);const x=[],$=new jd({activeComponent:_,tool:n,type:"update",onEnd:()=>{uu(x),BE(i,_),m.destroy()},canUndo:()=>!_.destroyed&&_.canUndo,undo:()=>{_.destroyed||(_.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:n}))},canRedo:()=>!_.destroyed&&_.canRedo,redo:()=>{_.destroyed||(_.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:n}))},addToSelection:async E=>{this.updateGraphics.add(E),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[E],removed:[],type:"selection-change"},type:"update"}),$.onEnd(),$.destroy();const A=await this._setupMove3DOperation(this.updateGraphics.toArray(),e,i,"transform",!0);Ir(A)||this._setUpdateOperationHandle(A,e)},removeFromSelection:E=>{this.updateGraphics.remove(E),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[E],type:"selection-change"},type:"update"}),$.complete()},toggleTool:async()=>{if(e.toggleToolOnClick===!1)return;$.onEnd(),$.destroy();const E=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),e,i,!0);Ir(E)||this._setUpdateOperationHandle(E,e)}});return x.push(...this._getHandlesForComponent($,e),i.on("immediate-click",E=>this._getCommonUpdateOperationClickHandlers($,E,e),Wt.WIDGET),i.on("key-down",E=>{this._getCommonUpdateOperationKeyDownHandlers($,E)},Wt.WIDGET)),$}async _setupTransformOrReshape2DOperation(t,e,i,r){this.updateGraphics.addMany(t),await this._updatingHandles.addPromise(this._updateSpatialReference(t));const n=e==="transform"?await this._getBox(t,i,r):await this._getReshape(t,i,r);if(Ir(n))return n;const s=new jd({activeComponent:n,type:"update",onEnd:()=>{uu(u),uu(o),s.activeComponent&&!s.activeComponent.destroyed&&s.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{qE(s,this.updateGraphics.toArray()),s.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s.tool})},redo:()=>{GE(s,this.updateGraphics.toArray()),s.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s.tool})},addToSelection:async d=>{let h=s.activeComponent;if(h?.type==="reshape"){const m=[...this.updateGraphics,d];this.updateGraphics.removeAll(),s.onEnd(),s.destroy();const v=await this._setupTransformOrReshape2DOperation(m,"transform",i,r);if(Ir(v))return;this._setUpdateOperationHandle(v,i)}else this.updateGraphics.add(d),h.graphics=this.updateGraphics.toArray(),h.refresh(),s.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[d],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:d=>{const h=this.updateGraphics.indexOf(d);s.history.undo.forEach(v=>v.updates.splice(h,1)),s.history.redo.forEach(v=>v.updates.splice(h,1)),this.updateGraphics.remove(d);const m=this.updateGraphics.toArray();m.length===0?s.complete():kY(m)?s.toggleTool():s.activeComponent.graphics=m,this.emit("update",{graphics:m,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[d],type:"selection-change"},type:"update"})},toggleTool:async()=>{if(this.updateGraphics.length>1)return;const d=this.updateGraphics.at(0),h=d.geometry;if(h!=null&&(s.tool==="reshape"&&h.type==="point"||s.tool==="transform"&&h.type==="extent"))return;let m=null;s.tool==="transform"?m=await this._getReshape([d],i,r):s.tool==="reshape"&&(m=await this._getBox([d],i,r)),Ir(m)||(s.activeComponent?.destroy(),s.activeComponent=m,s.activeComponent&&(uu(u),u=this._getHandlesForComponent(s,i)))}}),o=[r.on("immediate-click",d=>this._getCommonUpdateOperationClickHandlers(s,d,i),Wt.WIDGET),r.on("key-down",d=>{if(this._getCommonUpdateOperationKeyDownHandlers(s,d),d.key===Ki.constraint&&!d.repeat&&s){const h=s.activeComponent;h&&h.type==="box"&&(h.preserveAspectRatio=!h.preserveAspectRatio)}},Wt.WIDGET),r.on("key-up",d=>{if(d.key===Ki.constraint&&s){const h=s.activeComponent;h&&h.type==="box"&&(h.preserveAspectRatio=!h.preserveAspectRatio)}},Wt.WIDGET)];let u=this._getHandlesForComponent(s,i);return s}async _getGraphicMover(t,e,i){const{enableMoveAllGraphics:r,highlightOptions:n}=e,s=await this._requireModule(H(()=>import("./GraphicMover-BNGeE7gq.js").then(o=>o.G),__vite__mapDeps([330,316,314,215,153])));return Ir(s)?s:new s.module.default({enableMoveAllGraphics:r,highlightName:n?.name,highlightsEnabled:!!n?.enabled,indicatorsEnabled:!1,graphics:t,view:i,callbacks:{onGraphicMoveStart:({dx:o,dy:u,graphic:d})=>{this._displayCursor("grabbing"),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:o,dy:u,mover:d,type:"move-start"},type:"update"})},onGraphicMove:({dx:o,dy:u,graphic:d})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:o,dy:u,mover:d,type:"move"},type:"update"}),onGraphicMoveStop:({dx:o,dy:u,graphic:d})=>{this._displayCursor("pointer"),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:o,dy:u,mover:d,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayCursor("move"),onGraphicPointerOut:()=>this._clearCursor()}})}async _getBox(t,e,i){const{enableRotation:r,enableScaling:n,highlightOptions:s,preserveAspectRatio:o}=e,[u,d]=await Promise.all([this._requireModule(H(()=>import("./Box-BaBsBOwg.js"),__vite__mapDeps([331,313,293,294,45,43,305,316,314,215,330,153,332,327,326]))),lm()]);if(Ir(u))return u;const h=this.view?.inputManager?.isModifierKeyDown(Ki.constraint);return new u.module.default({graphics:t,enableRotation:r,enableScaling:n,highlightName:s?.name,highlightsEnabled:!!s?.enabled,preserveAspectRatio:!!o!=!!h,layer:this._internalGraphicsLayer,view:i,sketchOptions:this.sketchOptions,automaticLengthMeasurementUtils:d,callbacks:{onMoveStart:m=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...m},type:"update"}),onMove:m=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...m},type:"update"}),onMoveStop:m=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...m},type:"update"}),onScaleStart:m=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...m},type:"update"}),onScale:m=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...m},type:"update"}),onScaleStop:m=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...m},type:"update"}),onRotateStart:m=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...m},type:"update"}),onRotate:m=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...m},type:"update"}),onRotateStop:m=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...m},type:"update"})}})}async _getReshape(t,e,i){const{highlightOptions:r,reshapeOptions:n}=e,s=n?.edgeOperation==="split",o=n?.shapeOperation==="move",u=!!n?.enableCreateCurveFromStraightEdge,[d,h,m]=await Promise.all([this._requireModule(H(()=>import("./Reshape-CJHucnTd.js"),__vite__mapDeps([333,270,264,267,266,268,83,269,271,310,311,312,313,293,294,45,43,305,314,215,152,144,145,324,316,330,153,325,326,332]))),FE(),lm()]);return Ir(d)?d:new d.module.default({enableMidpoints:s,enableMovement:o,enableCurveOnMidpoint:u,graphic:t[0],highlightName:r?.name,highlightsEnabled:!!r?.enabled,layer:this._internalGraphicsLayer,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,automaticAreaMeasurementUtils:h,automaticLengthMeasurementUtils:m,view:i,callbacks:{onReshapeStart:v=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...v},type:"update"}),onReshape:v=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...v},type:"update"}),onReshapeStop:({mover:v,type:b})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:v,type:b},type:"update"}),onMoveStart:({dx:v,dy:b,mover:_,type:x})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:v,dy:b,mover:_,type:x},type:"update"}),onMove:({dx:v,dy:b,mover:_,type:x})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:v,dy:b,mover:_,type:x},type:"update"}),onMoveStop:({dx:v,dy:b,mover:_,type:x})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:v,dy:b,mover:_,type:x},type:"update"}),onVertexAdd:({added:v,type:b,vertices:_})=>{const x=v.map($=>kG($.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:x,vertices:_,type:b},type:"update"})},onVertexRemove:({removed:v,type:b,vertices:_})=>{const x=v.map($=>kG($.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:x,vertices:_,type:b},type:"update"})}}})}_getHandlesForComponent(t,e){const i=t.activeComponent;if(!i)return[];switch(i.type){case"graphic-mover":return[i.on("graphic-click",({graphic:r,viewEvent:n})=>{n.native?.shiftKey&&e.multipleSelectionEnabled&&(n.stopPropagation(),t.removeFromSelection(r))}),i.on("graphic-move-start",r=>t.addToHistory(eh(r.allGraphics)))];case"box":return[i.on("graphic-click",r=>this._onTransformOrReshape2DGraphicClick(t,e,r)),i.on("move-start",r=>t.addToHistory(eh(r.graphics))),i.on("rotate-start",r=>t.addToHistory(eh(r.graphics))),i.on("scale-start",r=>t.addToHistory(eh(r.graphics)))];case"reshape":return[i.on("graphic-click",r=>this._onTransformOrReshape2DGraphicClick(t,e,r)),i.on("move-start",r=>t.addToHistory(eh([r.mover]))),i.on("reshape-start",r=>t.addToHistory(eh([r.graphic]))),i.on("vertex-add",r=>t.addToHistory(eh([r.oldGraphic]))),i.on("vertex-remove",r=>t.addToHistory(eh([r.oldGraphic])))];case"move-3d":return[i.events.on("record-undo",({updates:r})=>{t.addToHistory({updates:r})}),i.events.on("move-start",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:r.objects.length>0?r.objects[0].graphic:null,type:"move-start"},type:"update"})}),i.events.on("move",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:r.dx,dy:r.dy,mover:r.objects.length>0?r.objects[0].graphic:null,type:"move"},type:"update"})}),i.events.on("move-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:r.objects.length>0?r.objects[0].graphic:null,type:"move-stop"},type:"update"})}),i.events.on("immediate-click",r=>{r.shiftKey?this._toggleSelection([r.object.graphic],t,e):t.toggleTool()})];case"transform-3d":return[i.events.on("record-undo",({updates:r})=>{t.addToHistory({updates:r})}),i.events.on("translate-start",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.object.graphic,dx:r.dxScreen,dy:r.dyScreen,type:"move-start"},type:"update"})}),i.events.on("translate-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.object.graphic,dx:r.dxScreen,dy:r.dyScreen,type:"move-stop"},type:"update"})}),i.events.on("rotate-start",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.object.graphic,angle:r.angle,type:"rotate-start"},type:"update"})}),i.events.on("rotate-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.object.graphic,angle:r.angle,type:"rotate-stop"},type:"update"})}),i.events.on("scale-start",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.object.graphic,xScale:r.xScale,yScale:r.yScale,type:"scale-start"},type:"update"})}),i.events.on("scale-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.object.graphic,xScale:r.xScale,yScale:r.yScale,type:"scale-stop"},type:"update"})}),i.events.on("translate",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.object.graphic,dx:r.dxScreen,dy:r.dyScreen,type:"move"},type:"update"})}),i.events.on("rotate",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.object.graphic,angle:r.angle,type:"rotate"},type:"update"})}),i.events.on("scale",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.object.graphic,xScale:r.xScale,yScale:r.yScale,type:"scale"},type:"update"})}),i.events.on("immediate-click",r=>{r.shiftKey?this._toggleSelection([r.object.graphic],t,e):t.toggleTool()})];case"reshape-3d":return[i.events.on("reshape",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...r,mover:r.object.graphic},type:"update"})}),i.events.on("move",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...r,mover:r.object.graphic},type:"update"})}),i.events.on("vertex-add",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:r,type:"update"})}),i.events.on("vertex-remove",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:r,type:"update"})}),i.events.on("immediate-click",r=>{r.shiftKey?this._toggleSelection([r.object.graphic],t,e):t.toggleTool()})]}}_onTransformOrReshape2DGraphicClick(t,e,i){const{graphic:r,viewEvent:n}=i;return n.native?.shiftKey&&this.hasGraphic(r)?(n.stopPropagation(),t.removeFromSelection(r)):e.toggleToolOnClick?(n.stopPropagation(),t.toggleTool()):void 0}_setUpdateOperationHandle(t,e){this._operationHandle=t;const i=this.view?.map;this._disablePopup(e);const r=()=>{if(t===this._operationHandle){const n=this.updateGraphics.toArray(),s=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),i&&i.remove(this._internalGraphicsLayer),this._restorePopup(e),this.emit("update",{graphics:n,state:"complete",aborted:t.cancelled,tool:s,toolEventInfo:null,type:"update"})}};t.on("complete",r)}async _getCommonUpdateOperationClickHandlers(t,e,i){const r=Aa(e),n=await e.defer(()=>this._getFirstHit(r));if(n==null)return void t.complete();if(e.native.shiftKey&&this._toggleSelection([n.graphic],t,i))return void e.stopPropagation();this.updateGraphics.includes(n.graphic)?e.stopPropagation():t.complete()}_toggleSelection(t,e,i){const r=!!i.multipleSelectionEnabled;return t.some(n=>n!=null&&!(!r||!this.hasGraphic(n))&&(this.updateGraphics.includes(n)?e.removeFromSelection(n):e.addToSelection(n),!0))}_getCommonUpdateOperationKeyDownHandlers(t,e){if(!t)return;const i=e.key;i===Ki.undo&&t.canUndo()?(e.stopPropagation(),t.undo()):i===Ki.redo&&t.canRedo()?(e.stopPropagation(),t.redo()):i===Ki.cancel?(e.stopPropagation(),t.cancel()):this.allowDeleteKey&&Ki.delete.includes(i)&&this._onDeleteKey(e)}_onDeleteKey(t){if(!this._operationHandle||this._operationHandle.type!=="update")return;const e=this.activeComponent,i=this.updateGraphics.toArray();e!=null&&(e.type!=="reshape"||i.length===1&&i[0].geometry?.type==="point")&&(t.stopPropagation(),this.delete())}_removeDefaultLayer(){this._internalGraphicsLayer&&(this.view?.map?.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=at(this._internalGraphicsLayer))}_isComponentGraphic(t){const{activeComponent:e}=this;return!(!t||e==null)&&(t.attributes?.esriSketchTool||e.type==="draw-2d"&&e.graphic===t||(e.type==="box"||e.type==="reshape")&&e.isUIGraphic(t))}_clearCursor(){this.removeHandles(LP)}_displayCursor(t){this.removeHandles(LP),this.view?.container&&t!=null&&this.addHandles(this.view.acquireCursor(t,"high"),LP)}_logError(t,e,i){ie.getLogger(this).error(new L(t,e,i))}async _requireModule(t){const e=new AbortController;this._moduleLoaderAbortController=e;const i=await t;return this._moduleLoaderAbortController!==e||e.signal.aborted?{requireError:"aborted"}:{module:i}}_emitUndoEvent(t){this.emit("undo",{...t,type:"undo"})}_emitRedoEvent(t){this.emit("redo",{...t,type:"redo"})}_emitDeleteEvent(t){this.emit("delete",{...t,type:"delete"})}_onLayerGraphicsChangeCallback(t){if(this._operationHandle!=null){const{updateGraphics:e}=this;for(const i of t.removed)if(e.includes(i)){if(!(e.length>1)){this._operationHandle.cancel();break}this._operationHandle.removeFromSelection(i)}}}get test(){}wait(){return zb(()=>!this.updating)}_disablePopupEnabled(t){return this.view?.type!=="3d"||this.updateOnGraphicClick||(t?.toggleToolOnClick??!1)}_disablePopup(t){this._disablePopupEnabled(t)&&this.view&&this._originalPopupEnabled==null&&(this._originalPopupEnabled=this.view.popupEnabled,this.view.popupEnabled=!1)}_restorePopup(t){this._disablePopupEnabled(t)&&this.view&&this._originalPopupEnabled!=null&&(this.view.popupEnabled=this._originalPopupEnabled,this._originalPopupEnabled=null)}async _waitViewReady(){const t=this.view;t?(Cn(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await $S(zb(()=>t?.ready),this._viewReadyAbortController.signal)):this._logMissingView()}_logMissingView(){this._logError("sketch:missing-property",RY("view"))}_logMissingLayer(){this._logError(HGe,RY("layer"))}};l([p()],_t.prototype,"_defaultSnappingManager",void 0),l([p()],_t.prototype,"_layerAdapter",null),l([p()],_t.prototype,"_operationHandle",void 0),l([p({readOnly:!0})],_t.prototype,"_updatingHandles",void 0),l([p({readOnly:!0})],_t.prototype,"activeTool",null),l([p({readOnly:!0})],_t.prototype,"activeCreateToolDrawMode",null),l([p()],_t.prototype,"activeTooltip",null),l([p({types:zo})],_t.prototype,"activeFillSymbol",void 0),l([p()],_t.prototype,"activeLineSymbol",void 0),l([p()],_t.prototype,"activeVertexSymbol",void 0),l([p()],_t.prototype,"allowDeleteKey",void 0),l([p({readOnly:!0})],_t.prototype,"createGraphic",null),l([p()],_t.prototype,"defaultCreateOptions",null),l([p()],_t.prototype,"defaultUpdateOptions",null),l([p({type:k8,nonNullable:!0})],_t.prototype,"labelOptions",null),l([p()],_t.prototype,"layer",void 0),l([p({types:zo})],_t.prototype,"pointSymbol",void 0),l([p({types:zo})],_t.prototype,"polygonSymbol",void 0),l([p({types:zo})],_t.prototype,"polylineSymbol",void 0),l([p()],_t.prototype,"meshSymbol",void 0),l([p()],_t.prototype,"textSymbol",void 0),l([p({type:Cr,nonNullable:!0})],_t.prototype,"snappingOptions",null),l([p()],_t.prototype,"snappingManager",null),l([p({readOnly:!0})],_t.prototype,"state",null),l([p({type:O8,nonNullable:!0})],_t.prototype,"tooltipOptions",null),l([p({readOnly:!0})],_t.prototype,"updateGraphics",void 0),l([p()],_t.prototype,"updateOnGraphicClick",void 0),l([p()],_t.prototype,"updating",null),l([p()],_t.prototype,"creationMode",void 0),l([p({type:C8,nonNullable:!0})],_t.prototype,"valueOptions",null),l([p({types:zo})],_t.prototype,"vertexSymbol",void 0),l([p({value:null})],_t.prototype,"view",null),l([p({constructOnly:!0,type:Xce})],_t.prototype,"sketchOptions",void 0),_t=l([M("esri.widgets.Sketch.SketchViewModel")],_t);const HGe="sketch:missing-property",RY=t=>`Property '${t}' is missing on SketchViewModel.`;function WGe(t){return t==="polygon"||t==="rectangle"||t==="circle"}function qE(t,e){jde("undo",t.history.undo,t.history.redo,e)}function GE(t,e){jde("redo",t.history.redo,t.history.undo,e)}function jde(t,e,i,r){const n=e.pop();if(!n)return;const s=n.updates,o=[];r.forEach((u,d)=>{const h=s[d];h!=null&&("geometry"in h&&h.geometry!=null&&(o.push({geometry:u.geometry}),u.geometry=h.geometry),"symbol"in h&&h.symbol!=null&&(o.push({symbol:u.symbol}),u.symbol=h.symbol),"undo"in h&&(o.push(h),h[t](u)))}),i.push({updates:o})}function PY(t,e){t!=null&&e.hasGrabbedManipulators&&(t.activeTool=null)}function eh(t){return{updates:t.map(({geometry:e})=>e?.type==="mesh"?{geometry:e.cloneShallow()}:{geometry:e})}}function BE(t,e){t.tools?.remove(e),e.destroyed||e.destroy()}function Ir(t){return"requireError"in t&&t.requireError==="aborted"}function ZGe(t){return t==="2d"?new kn({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[5,4],lineDashEnding:"FullGap",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",width:1.5,color:[0,0,0,255]},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",width:1.5,color:[255,255,255,255]}]}}}):new Bi({color:[0,0,0,0]})}let Po=class extends _e{constructor(e){super(e),this.state="ready",this._pendingStartOptions=null,this._previousInputInfo=null,this._shouldRemoveLastPoint=!1,this._sketchedGraphics=new WeakSet,this._creationToolPromise=null,this._updateToolPromise=null,this._updateDisabled=!1}initialize(){this.addHandles(be(()=>({view:this.tool.viewModel.view,visible:this.tool.visible}),({view:e,visible:i})=>{e!=null&&i?this._attach(e):this._detach()},Gt),"view")}destroy(){this._detach()}get canStopCreating(){const e=this._geometry,i=this._shouldRemoveLastPoint?3:2;return Cx(e)&&e.paths.length>0&&e.paths[0].length>=i}get _input(){return this.tool.viewModel.input}set _input(e){this.tool.viewModel.input=e}get _geometry(){return this._input?.geometry}get _visibleAndEditable(){return this.tool.visible&&this.tool.editable}get _view(){return this.tool.viewModel.view}get test(){}start(e={mode:"sketch"}){if(!this.tool.editable)return;const i=this._view;if(i!=null&&i.ready)switch(this._pendingStartOptions=null,this._stopInteraction(),this._previousInputInfo==null&&this._storePreviousInput(this._input),this._setSketchedGraphic(null),e.mode){case"sketch":this._set("state","creating"),this._startCreationInteraction();break;case"select":this._set("state","selecting"),this._startSelectionInteraction()}else this._pendingStartOptions=e}stop(){this._pendingStartOptions=null,this._stopInteractionAndUpdate(),this._clearPreviousInput()}cancel(){this._pendingStartOptions=null,this._stopInteractionAndUpdate(),this._restorePreviousInput()}clear(){this._stopInteractionAndUpdate(),this._set("state","ready"),this._clearPreviousInput(),this._input=null,this._pendingStartOptions=null}isSketchedGraphic(e){return e!=null&&this._sketchedGraphics.has(e)}_attach(e){this._detach();const i={mode:e.type==="3d"?"relative-to-ground":"on-the-ground",offset:null};this._graphicsLayer=new Du({listMode:"hide",internal:!0,elevationInfo:i,title:"Elevation info"});const r=ZGe(e.type);this._sketchVM=new _t({layer:this._graphicsLayer,view:e,defaultCreateOptions:{mode:"click",hasZ:!1},updateOnGraphicClick:!1,defaultUpdateOptions:{reshapeOptions:{shapeOperation:"none"},enableRotation:!1,enableScaling:!1,enableMoveAllGraphics:!1,enableZ:!1,multipleSelectionEnabled:!1,toggleToolOnClick:!1,tool:"reshape"},polylineSymbol:r,activeLineSymbol:r}),this.addHandles([Pn(()=>e.ready,()=>{const n=this._pendingStartOptions;n&&this.start(n)},Gt),be(()=>[this._input,this._visibleAndEditable],()=>this._update(),Gt),be(()=>({map:e.map,graphicsLayer:this._graphicsLayer}),({map:n,graphicsLayer:s})=>{n!=null&&s!=null&&n.add(s),this._update()},Gt)],"main")}_detach(){this.removeHandles("main"),this._sketchVM=at(this._sketchVM),this._creationToolPromise=null,this._updateToolPromise=null;const e=this._view?.map,i=this._graphicsLayer;e!=null&&i!=null&&e.remove(i),this._graphicsLayer=at(this._graphicsLayer),this._shouldRemoveLastPoint=!1,this._set("state","ready")}_startCreationInteraction(){this._stopInteractionAndUpdate();const e=this._view,i=this._sketchVM;if(e==null||i==null)return;this._shouldRemoveLastPoint=!1;const r=i.on("create",s=>{const o=s.graphic;switch(s.state){case"complete":this._shouldRemoveLastPoint=!1,this._setSketchedGraphic(o),this._stopInteractionAndUpdate(),this._clearPreviousInput();break;case"cancel":this.cancel();break;case"active":this._setSketchedGraphic(o),s.toolEventInfo?.type==="cursor-update"&&(this._shouldRemoveLastPoint=!0);break;case"start":this._setSketchedGraphic(o)}}),n=()=>{r.remove();const s=this.canStopCreating,o=this._geometry?.clone();i.cancel(),this._creationToolPromise=null,o!=null&&s?this._shouldRemoveLastPoint&&this._setSketchedGraphic(new Ti({geometry:JGe(o)})):this._input=null};this.removeHandles("interaction"),this.addHandles(ut(n),"interaction"),this._creationToolPromise=Yd(i.create("polyline"))}_startReshapeInteraction(){this._stopInteraction();const e=this._view,i=this._sketchVM;if(e==null||i==null)return;const r=i.on("update",o=>{const u=o.graphics[0];switch(o.state){case"complete":this._setSketchedGraphic(u),this._stopInteractionAndUpdate(),this._clearPreviousInput();break;case"active":case"start":this._setSketchedGraphic(u)}}),n=()=>{r.remove(),i.cancel(),this._updateToolPromise=null};this.removeHandles("interaction"),this.addHandles(ut(n),"interaction");const s=this._input;s&&(s.visible=!0,this._updateToolPromise=Yd(i.update(s,{tool:"reshape"})))}_startSelectionInteraction(){this._stopInteraction();const e=this._view;if(e==null)return;const i=e.acquireCursor("crosshair","high");e.closePopup();let r=null;const n=ut(()=>Cn(r)),s=e.on("immediate-click",u=>{u.defer(async()=>{Cn(r),r=dc(async d=>{const{results:h}=await e.hitTest(u);ft(d);const m=h.filter(v=>v.type==="graphic").map(v=>v.graphic).find(v=>v.geometry!=null&&v.geometry.type==="polyline");m&&(u.preventDefault(),u.stopPropagation(),this._input=m,this._clearPreviousInput(),this._stopInteractionAndUpdate())}),await r.promise})},Wt.TOOL),o=e.on("key-down",u=>{u.key==="Escape"&&this.cancel()});this.removeHandles("interaction"),this.addHandles([s,o,n,i],"interaction"),e.ready&&e.focus()}_stopInteraction(){this.removeHandles("interaction")}_stopInteractionAndUpdate(){this.hasHandles("interaction")&&(this._updateDisabled=!0,this._stopInteraction(),this._updateDisabled=!1,this._triggerUpdate())}_triggerUpdate(){this._set("state","ready"),this._update()}_update(){if(this._updateDisabled)return;const e=this.state;if(e!=="selecting"){if(this._visibleAndEditable){if(e==="creating"||e==="reshaping"&&this.isSketchedGraphic(this._input))return}else this.cancel();this._set("state",this._getNextState()),this._updateVisuals()}else this.stop()}_getNextState(){return this._input==null?"ready":this.isSketchedGraphic(this._input)?this.state==="creating"?"creating":this._visibleAndEditable?"reshaping":"reshaping-disabled":"selected"}_updateVisuals(){switch(this.state){case"creating":break;case"reshaping":this._startReshapeInteraction();break;case"reshaping-disabled":{this._stopInteractionAndUpdate();const e=this._input;e!=null&&this.isSketchedGraphic(e)&&(e.visible=!1);break}case"ready":case"selected":this._stopInteractionAndUpdate()}this._updateSketchedGraphic()}_storePreviousInput(e){this._previousInputInfo={graphic:e}}_restorePreviousInput(){const e=this._previousInputInfo;e!=null&&(this._clearPreviousInput(),this._input=e.graphic,this._triggerUpdate())}_clearPreviousInput(){this._previousInputInfo=null}_updateSketchedGraphic(){const e=this._graphicsLayer;if(e==null)return;const i=e.graphics,r=this._input;if(r==null||!this.isSketchedGraphic(r))return void i.removeAll();if(i.indexOf(r)===-1)i.removeAll(),i.add(r);else if(i.length!==1){const n=i.filter(s=>s!==r);i.removeMany(n)}}_setSketchedGraphic(e){e!=null&&this._sketchedGraphics.add(e),this._input=e,this._updateSketchedGraphic()}};function JGe(t){if(Cx(t)){const e=t.clone();return e.paths=[e.paths[0].slice(0,-1)],e}return t}l([p({nonNullable:!0})],Po.prototype,"state",void 0),l([p({nonNullable:!0})],Po.prototype,"tool",void 0),l([p()],Po.prototype,"canStopCreating",null),l([p()],Po.prototype,"_graphicsLayer",void 0),l([p()],Po.prototype,"_sketchVM",void 0),l([p()],Po.prototype,"_input",null),l([p()],Po.prototype,"_geometry",null),l([p()],Po.prototype,"_visibleAndEditable",null),l([p()],Po.prototype,"_view",null),l([p()],Po.prototype,"_shouldRemoveLastPoint",void 0),Po=l([M("esri.widgets.ElevationProfile.ElevationProfileInteraction")],Po);let O3=class extends _e{constructor(e){super(e),this._implementation=null,this._loadingTask=null}initialize(){this.addHandles(be(()=>({tool:this.tool,view:this.tool.viewModel.view,visible:this.tool.visible&&!!this.tool.viewModel.view?.ready}),({tool:e,view:i,visible:r})=>{i!=null&&r?this._show(i,e):this._hide()},Gt))}destroy(){this._hide()}_show(e,i){this._loadingTask=Cn(this._loadingTask),this._loadingTask=dc(async r=>{if(e.type==="2d"){const n=H(()=>import("./ElevationProfileView2D-BDROapnv.js"),__vite__mapDeps([334,335,150,262,263,264,265,266,267,268,83,269,270,271,272,273,153,97])),s=(await $S(n,r)).ElevationProfileView2D;this._implementation=new s(e,i)}else if(e.type==="3d"){const n=H(()=>import("./ElevationProfileView3D-COdRDx4L.js"),__vite__mapDeps([336,335,150,262,263,264,265,266,267,268,83,269,270,271,272,273,318,97,319,117,40,34,118,119,37,36,320,39,321,104,33,35,133,116,121,182,13,131,130,322,294,127,324,153])),s=(await $S(n,r)).ElevationProfileView3D;this._implementation=new s(e,i)}})}_hide(){this._loadingTask=Cn(this._loadingTask),this._implementation=at(this._implementation)}};l([p()],O3.prototype,"tool",void 0),O3=l([M("esri.widgets.ElevationProfile.support.ElevationProfileView")],O3);let bd=class extends _e{constructor(e){super(e),this.editable=!0,this.visible=!0,this.highlightEnabled=!0}initialize(){this.view=new O3({tool:this}),this.interaction=new Po({tool:this})}destroy(){this.interaction.destroy(),this.view.destroy()}get state(){switch(this.interaction?.state){case"ready":return"ready";case"creating":return"creating";case"selecting":return"selecting";case"selected":return"selected";case"reshaping":case"reshaping-disabled":return"created"}}};l([p({nonNullable:!0})],bd.prototype,"viewModel",void 0),l([p()],bd.prototype,"view",void 0),l([p()],bd.prototype,"interaction",void 0),l([p()],bd.prototype,"editable",void 0),l([p()],bd.prototype,"visible",void 0),l([p()],bd.prototype,"highlightEnabled",void 0),bd=l([M("esri.widgets.ElevationProfile.ElevationProfileTool")],bd);let Mt=class extends _e{constructor(t){super(t),this.view=null,this.input=null,this._getEffectiveUnitsMemoized=qa((e,i)=>({distance:e,elevation:i})),this.hoveredChartPosition=null,this.uniformChartScaling=!1,this.defaultUnit=null,this.queue=null,this._currentTileCache=null,this.error=null,this._defaultProfileLineGround=new uce,this._userUnitOptions=null,this._userUnit=null,t?.profiles||(this.profiles=new fe([this._defaultProfileLineGround]))}initialize(){this.addHandles(be(()=>this.view,t=>{if(t==null)return void ie.getLogger(this).warnOnce("no view. Widget will be disabled until a view is provided.");this.removeHandles(DY);const e=t.type==="3d"?t.resourceController:void 0;this.queue?.destroy(),this.queue=jVe(e?.scheduler);const i=e?.addUpdatingObject(this);i&&this.addHandles(i,DY)},Gt)),this.tool=new bd({viewModel:this}),this._controller=new gh({viewModel:this})}destroy(){this._defaultProfileLineGround=at(this._defaultProfileLineGround),this._controller=at(this._controller),this._currentTileCache=at(this._currentTileCache),this.tool=at(this.tool),this.queue=at(this.queue)}get profiles(){return this._get("profiles")}set profiles(t){const e=this._get("profiles"),i=t??new fe;this._set("profiles",Ql(i,e))}get state(){const t=this.view;return t!=null&&t.ready?this.tool.state:"disabled"}get progress(){let t=0,e=0;for(const i of this.visibleProfiles)t++,e+=i.progress;return t>0?e/t:0}set unitOptions(t){this._userUnitOptions=t,this._set("unitOptions",this._filteredOrAllUnits(this._userUnitOptions))}get unitOptions(){return this._filteredOrAllUnits(this._userUnitOptions)}set unit(t){this._userUnit=t?this._findSelectableUnit(t,this._userUnit):null,this.notifyChange("unit")}get unit(){return this._userUnit?(this._userUnit=this._findSelectableUnit(this._userUnit,this.defaultUnit),this._userUnit):this._findSelectableUnit(this.defaultUnit)}get effectiveUnits(){const t=PVe(this.visibleProfiles.map(r=>r.result)),e=xwe(t.maxDistance,"meters",this.unit),i=$we(t.maxElevation,"meters",this.unit);return this._getEffectiveUnitsMemoized(e,i)}get highlightEnabled(){return this.tool.highlightEnabled}set highlightEnabled(t){this.tool.highlightEnabled=t}get hasVertices(){const t=this.input?.geometry;return Cx(t)&&t.paths.reduce((e,i)=>e+i.length,0)>0}get hoveredPoints(){return this.input!=null&&this.visible&&this.tool.editable?this.visibleProfiles.map(t=>{const e=t.hoveredPoint;return e!=null?{hoveredPoint:e,color:t.color}:null}).filter(is):[]}get statistics(){return RVe(this.visibleProfiles.map(t=>t.statistics))}get chartData(){if(this.input==null)return null;const{effectiveUnits:t,progress:e,statistics:i,visibleProfiles:r,uniformChartScaling:n}=this,s=r.filter(o=>o.hasZ).map(o=>({id:o.id,type:o.type,title:o.title,color:o.color,samples:o.samples,progress:o.progress,chartFillEnabled:o.chartFillEnabled,chartStrokeWidth:o.chartStrokeWidth,chartStrokeOffsetY:o.chartStrokeOffsetY,viewVisualizationEnabled:o.viewVisualizationEnabled}));return s.length===0?null:{lines:s,effectiveUnits:t,statistics:i,refined:e===1,dynamicElevationRange:r.some(o=>o.type==="view"),uniformScaling:n}}get visibleProfiles(){return this.profiles.toArray().filter(t=>t.available&&t.visible)}get minDemResolutions(){const t=[];for(const{minDemResolution:e}of this.visibleProfiles)e!=null&&t.push(e);return t}get minDemResolution(){return qQ(this.minDemResolutions)}get errorState(){const t=this.input?.geometry;if(!S8(t))return"no-valid-input";if(this.error!=null){if(bVe(this.error))switch(this.error.cause){case"too-complex":return"too-complex";case"invalid-geometry":return"invalid-geometry";case"invalid-elevation-info":return"invalid-elevation-info";case"elevation-query-error":return"no-valid-input"}return"unknown-error"}return this.visibleProfiles.length===0?"no-visible-profiles":this.chartData==null&&this.progress===1?"refined-but-no-chart-data":"none"}get tileCache(){this._currentTileCache=at(this._currentTileCache);const t=this.view;if(t!=null&&t?.type==="3d"){const e=t.basemapTerrain?.elevationQueryCache;if(e!=null)return e}return this._currentTileCache==null&&(this._currentTileCache=new eVe(new sue(20971520))),this._currentTileCache}get visible(){return this.tool.visible}set visible(t){this.tool.visible=t}get selectAvailable(){for(const t of this.view?.map?.allLayers??[])if(t.type==="graphics"&&!t.internal&&t.graphics.some(e=>e.geometry?.type==="polyline")||"geometryType"in t&&t.geometryType==="polyline")return!0;return!!this.view?.graphics?.some(t=>t.geometry?.type==="polyline")}get inputIsSketched(){return this.tool.interaction.isSketchedGraphic(this.input)}get elevationProvider(){const t=this.view;return t!=null&&t.type==="3d"?t.elevationProvider:null}get updating(){const{progress:t}=this,e=!!this.queue?.updating;return t>0&&t<1||e}start(t){this.tool.interaction.start(t)}stop(){this.tool.interaction.stop()}cancel(){this.tool.interaction.cancel()}clear(){this.tool.interaction.clear()}_findSelectableUnit(t,e){const i=this.unitOptions;return t!=null&&i.includes(t)?t:e?this._findSelectableUnit(e):i[0]}_filteredOrAllUnits(t){const e=(t??[]).filter(i=>cA.includes(i));return e.length===0?cA.slice():e}};l([p()],Mt.prototype,"view",void 0),l([p({type:Ti})],Mt.prototype,"input",void 0),l([p({type:C7e,nonNullable:!0})],Mt.prototype,"profiles",null),l([p({readOnly:!0})],Mt.prototype,"state",null),l([p({readOnly:!0})],Mt.prototype,"progress",null),l([p()],Mt.prototype,"unitOptions",null),l([p()],Mt.prototype,"unit",null),l([p({readOnly:!0})],Mt.prototype,"effectiveUnits",null),l([p()],Mt.prototype,"hoveredChartPosition",void 0),l([p()],Mt.prototype,"uniformChartScaling",void 0),l([p()],Mt.prototype,"highlightEnabled",null),l([p({readOnly:!0})],Mt.prototype,"hoveredPoints",null),l([p({readOnly:!0})],Mt.prototype,"statistics",null),l([p()],Mt.prototype,"chartData",null),l([p()],Mt.prototype,"visibleProfiles",null),l([p()],Mt.prototype,"minDemResolutions",null),l([p({readOnly:!0})],Mt.prototype,"minDemResolution",null),l([p({readOnly:!0})],Mt.prototype,"errorState",null),l([p(iVe)],Mt.prototype,"defaultUnit",void 0),l([p()],Mt.prototype,"queue",void 0),l([p()],Mt.prototype,"tileCache",null),l([p()],Mt.prototype,"tool",void 0),l([p()],Mt.prototype,"visible",null),l([p()],Mt.prototype,"error",void 0),l([p()],Mt.prototype,"selectAvailable",null),l([p()],Mt.prototype,"inputIsSketched",null),l([p()],Mt.prototype,"elevationProvider",null),l([p()],Mt.prototype,"updating",null),l([p()],Mt.prototype,"_defaultProfileLineGround",void 0),l([p()],Mt.prototype,"_userUnitOptions",void 0),l([p()],Mt.prototype,"_controller",void 0),l([p()],Mt.prototype,"_userUnit",void 0),Mt=l([M("esri.widgets.ElevationProfile.ElevationProfileViewModel")],Mt);const DY=Symbol("updating-object"),zde=Mt;let xl=class extends _e{constructor(){super(...arguments),this.legend=!0,this.chart=!0,this.clearButton=!0,this.settingsButton=!0,this.sketchButton=!0,this.selectButton=!0,this.unitSelector=!0,this.uniformChartScalingToggle=!0}};l([p()],xl.prototype,"legend",void 0),l([p()],xl.prototype,"chart",void 0),l([p()],xl.prototype,"clearButton",void 0),l([p()],xl.prototype,"settingsButton",void 0),l([p()],xl.prototype,"sketchButton",void 0),l([p()],xl.prototype,"selectButton",void 0),l([p()],xl.prototype,"unitSelector",void 0),l([p()],xl.prototype,"uniformChartScalingToggle",void 0),xl=l([M("esri.widgets.ElevationProfile.ElevationProfileVisibleElements")],xl);const Fde=xl;function Vde(t,e,i){return t.units[e][i]}function vf(t,e,i,r=2,n="abbr"){return`${hf(e,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:e>0?"never":"exceptZero"})} ${Vde(t,i,n)}`}function iO(t,e,i,r=2,n="abbr"){return`${hf(e,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:"exceptZero"})} ${Vde(t,i,n)}`}function Mat(t,e,i,r=2,n="abbr"){const s=m6(e,i);return vf(t,rt(e,i,s),s,r,n)}function Aat(t,e,i,r=2,n="abbr"){const s=m6(e,i);return iO(t,rt(e,i,s),s,r,n)}function Iat(t,e,i,r=2,n="abbr"){const s=y6(e,i);return vf(t,rt(e,i,s),s,r,n)}function kat(t,e,i,r=2,n="abbr"){const s=y6(e,i);return iO(t,rt(e,i,s),s,r,n)}function Oat(t,e,i,r=2,n="abbr"){const s=g6(e,i);return vf(t,rt(e,i,s),s,r,n)}function Cat(t,e,i,r=2,n="abbr"){const s=g6(e,i);return iO(t,rt(e,i,s),s,r,n)}function Rat(t,e,i,r=2,n="abbr"){const s=v6(e,i);return vf(t,rt(e,i,s),s,r,n)}function Pat(t,e,i,r=2,n="abbr"){const s=v6(e,i);return iO(t,rt(e,i,s),s,r,n)}function Dat(t,e,i,r=2,n="abbr"){const s=Twe(e,i);return vf(t,rt(e,i,s),s,r,n)}function Nat(t,e,i,r=2,n="abbr"){const s=Ewe(e,i);return vf(t,rt(e,i,s),s,r,n)}const YGe=(t,e)=>({style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:e,minimumFractionDigits:e,signDisplay:t>0?"never":"exceptZero"});function NY(t,e,i,r,n,s=aK,o=!0){let u=s.normalize(Fqe(rt(t,e,"degrees"),i,r),0,o);const d=YGe(u,n??2);return u=QGe(u,d),hf(u,d)}const LY=new Map;function QGe(t,e){const i=JSON.stringify(e);let r=LY.get(i);return r||(r=new Intl.NumberFormat("en-US",e),LY.set(i,r)),/^[-+]?360\.?0*?$/.test(r.format(t))?0:t}const jY=["B","kB","MB","GB","TB"];function Lat(t,e){let i=(e=Math.round(e))===0?0:Math.floor(Math.log(e)/Math.log(1024));i=Qr(i,0,jY.length-1);const r=hf(e/1024**i,{maximumFractionDigits:2});return ip(t.units.bytes[jY[i]],{fileSize:r})}const XGe=100;let Vm=class extends pc{constructor(t,e){super(t,e),this._updateLayout=i=>{const r=i.parentElement,n=i.style.display;r?.removeChild(i),document.body.appendChild(i),i.style.display="block";let s=80;for(const o of i.childNodes)o instanceof HTMLElement&&(s=Math.max(s,o.offsetWidth));document.body.removeChild(i),r?.appendChild(i),i.style.display=n,i.style.setProperty("--max-width",`${s}px`)},this._updateLayoutThrottled=Wue(this._updateLayout,XGe)}loadDependencies(){return xf({icon:()=>H(()=>Promise.resolve().then(()=>SQ),void 0)})}initialize(){this.addHandles(this._updateLayoutThrottled)}render(){return Fe("div",{afterCreate:this._updateLayout,afterUpdate:this._updateLayoutThrottled,bind:this,class:y1.base},this._renderStatistics())}_renderStatistics(){const t=this._messages?.statistics;return t?[this._renderDistanceStatistic("maxDistance",t.maxDistance),this._renderElevationStatistic("elevationGain",t.gain),this._renderElevationStatistic("elevationLoss",t.loss),this._renderElevationStatistic("minElevation",t.minElevation),this._renderElevationStatistic("maxElevation",t.maxElevation),this._renderElevationStatistic("avgElevation",t.avgElevation),this._renderSlopeStatistic("maxPositiveSlope","maxNegativeSlope",t.maxSlope),this._renderSlopeStatistic("avgPositiveSlope","avgNegativeSlope",t.avgSlope)]:[]}_renderDistanceStatistic(t,e){const i=Xl().formatPrecision,r=this._renderValue(t,n=>{const s=this.effectiveUnits.distance;return vf(this._messagesUnits,n,s,i)});return this._renderStatistic(e,r)}_renderElevationStatistic(t,e){const i=Xl().formatPrecision,r=this._renderValue(t,n=>{const s=this.effectiveUnits.elevation;return vf(this._messagesUnits,n,s,i)});return this._renderStatistic(e,r)}_renderSlopeStatistic(t,e,i){const r=Xl().formatPrecision,n=Fe("div",{class:y1.slopeValue,key:"slope-up"},Fe("calcite-icon",{icon:"arrow-up",scale:"s"}),this._renderValue(t,s=>NY(s,"degrees","geographic","geographic",r)),Fe("calcite-icon",{icon:"arrow-down",scale:"s"}),this._renderValue(e,s=>NY(s,"degrees","geographic","geographic",r)));return this._renderStatistic(i,n)}_renderStatistic(t,e){return Fe("div",{class:y1.statistic},Fe("label",{class:y1.statisticLabel},t),Fe("div",{class:y1.statisticValue},e))}_renderValue(t,e){const i=this.line,r=i.progress===1?i.statistics:null,n=r?.[t];return n!=null?e(n):hVe}};l([p()],Vm.prototype,"effectiveUnits",void 0),l([p()],Vm.prototype,"line",void 0),l([p(),tc("esri/widgets/ElevationProfile/t9n/ElevationProfile")],Vm.prototype,"_messages",void 0),l([p(),tc("esri/core/t9n/Units")],Vm.prototype,"_messagesUnits",void 0),Vm=l([M("esri.widgets.ElevationProfile.components.Statistics")],Vm);function zY(t,{profiles:e}){const i=t.title;if(i!=null)return i;switch(t.type){case"ground":return e.ground;case"input":return e.input;case"query":return e.query;case"view":return e.view;default:return""}}let $l=class extends pc{constructor(t,e){super(t,e),this.checkboxVisible=!0,this.expanded=!1}loadDependencies(){return xf({action:()=>H(()=>import("./index-CpeseYgV.js"),__vite__mapDeps([337,277,278,279])),checkbox:()=>H(()=>import("./index-B5uVTTra.js"),__vite__mapDeps([338,279,280,339])),label:()=>H(()=>import("./index-6ol4LATg.js"),__vite__mapDeps([340,280]))})}initialize(){this._statistics=new Vm(this._statisticsProps),this.addHandles(be(()=>this._statisticsProps,t=>this._statistics.set(t)))}destroy(){this._statistics=at(this._statistics)}render(){const t=this.expanded;return Fe("div",{class:this.classes(Uc.base,{[Uc.disabled]:this.disabled,[Uc.expanded]:t}),key:this},this._renderColorIndicator(),Fe("div",{class:Uc.header,key:"header"},this._renderLabelWithCheckbox(),this._renderCollapseToggleButton()),t?Fe("div",{class:Uc.content,key:"content"},this._statistics.render()):null)}get disabled(){return!this.line.available}get _statisticsProps(){return{line:this.line,effectiveUnits:this.effectiveUnits}}_renderColorIndicator(){return Fe("div",{class:Uc.colorIndicator,key:"color-indicator",styles:{backgroundColor:this.line.color.toCss()}})}_renderCollapseToggleButton(){const{expanded:t,messages:e}=this,i=t?e.hideDetails:e.showDetails;return Fe("calcite-action",{appearance:"transparent",bind:this,class:Uc.collapseToggle,"data-testid":"legend-toggle",icon:t?"chevron-up":"chevron-down",key:"collapse-toggle",onclick:this._onCollapseToggleClick,scale:"s",text:i,title:i})}_onCollapseToggleClick(){this.onExpandedToggle()}_renderLabelWithCheckbox(){const{line:t,checkboxVisible:e,disabled:i,messages:r}=this;return Fe("calcite-label",{class:Uc.label,disabled:i,key:`label-${t.id}`,layout:"inline"},e?this._renderCheckbox():null,zY(t,r))}_renderCheckbox(){const{disabled:t,line:e,messages:i}=this,r=e.visible,n=r?i.hideProfile:i.showProfile,s=xxe(n,{name:zY(e,i)});return Fe("calcite-checkbox",{checked:r,class:Uc.checkbox,disabled:t,title:s,onCalciteCheckboxChange:()=>e.toggleVisibility()})}};l([p()],$l.prototype,"checkboxVisible",void 0),l([p()],$l.prototype,"disabled",null),l([p({nonNullable:!0})],$l.prototype,"effectiveUnits",void 0),l([p()],$l.prototype,"expanded",void 0),l([p({nonNullable:!0})],$l.prototype,"line",void 0),l([p()],$l.prototype,"messages",void 0),l([p()],$l.prototype,"onExpandedToggle",void 0),l([p()],$l.prototype,"_statistics",void 0),$l=l([M("esri.widgets.ElevationProfile.components.LegendItem")],$l);let Um=class extends pc{constructor(){super(...arguments),this._expandedLine=null}render(){const{profiles:e,messages:i,effectiveUnits:r,_expandedLine:n}=this;return Fe("div",{class:K8e.base},e.map(s=>Fe($l,{checkboxVisible:e.length>1,effectiveUnits:r,expanded:s===n,line:s,messages:i,onExpandedToggle:()=>this._onExpandedToggle(s)})))}_onExpandedToggle(e){this._expandedLine=e===this._expandedLine?null:e}};l([p()],Um.prototype,"effectiveUnits",void 0),l([p()],Um.prototype,"messages",void 0),l([p()],Um.prototype,"profiles",void 0),l([p()],Um.prototype,"_expandedLine",void 0),Um=l([M("esri.widgets.ElevationProfile.components.Legend")],Um);const jP="esri-unit-select",zP={base:jP,label:`${jP}__label`,select:`${jP}__select`};let _h=class extends pc{constructor(t,e){super(t,e),this._onSelectChange=i=>{this.onChange(i.currentTarget.value)}}loadDependencies(){return xf({label:()=>H(()=>import("./index-6ol4LATg.js"),__vite__mapDeps([340,280])),option:()=>H(()=>import("./index-BtUgx0v7.js"),[]),select:()=>H(()=>import("./index-CjkCufYn.js"),__vite__mapDeps([341,342,279,280,339,343]))})}render(){const{messages:t,options:e,selectLabel:i,value:r,_onSelectChange:n}=this;return Fe("div",{class:zP.base,key:"units"},Fe("calcite-label",{class:zP.label},i,Fe("calcite-select",{class:zP.select,label:i,onCalciteSelectChange:n},e.map(s=>Fe("calcite-option",{key:s,selected:s===r,value:s},_we(s)?t.systems[s]:t.units[s]?.pluralCapitalized)))))}};l([p()],_h.prototype,"options",void 0),l([p()],_h.prototype,"onChange",void 0),l([p()],_h.prototype,"selectLabel",void 0),l([p()],_h.prototype,"value",void 0),l([p(),tc("esri/core/t9n/Units")],_h.prototype,"messages",void 0),_h=l([M("esri.widgets.support.UnitSelect")],_h);let Ma=class extends pc{constructor(){super(...arguments),this.messages=null,this._popoverIsOpen=!1,this._referenceElement=null,this._onUniformChartScalingChange=t=>{this.onUniformChartScalingChange(t.currentTarget.checked)}}loadDependencies(){return xf({action:()=>H(()=>import("./index-CpeseYgV.js"),__vite__mapDeps([337,277,278,279])),checkbox:()=>H(()=>import("./index-B5uVTTra.js"),__vite__mapDeps([338,279,280,339])),label:()=>H(()=>import("./index-6ol4LATg.js"),__vite__mapDeps([340,280])),popover:()=>H(()=>import("./index-WncbwnDd.js").then(t=>t.i),__vite__mapDeps([344,277,278,337,279,345,346,347]))})}render(){const{id:t,messages:e,visibleElements:i}=this,{unitSelector:r,uniformChartScalingToggle:n}=i;if(!e||!r&&!n)return Fe("div",{key:`${t}-empty`});const s=this._popoverIsOpen?e.hideSettings:e.showSettings;return Fe("div",{class:SE.base,key:this},Fe("calcite-action",{afterCreate:o=>{this._referenceElement=o},appearance:"transparent","data-testid":"settings-button",icon:"gear",scale:"s",text:s,title:s}),this._referenceElement?Fe("calcite-popover",{autoClose:!0,label:s,placement:"bottom-end",referenceElement:this._referenceElement,onCalcitePopoverClose:()=>{this._popoverIsOpen=!1},onCalcitePopoverOpen:()=>{this._popoverIsOpen=!0}},this._renderPopoverContent()):null)}_renderPopoverContent(){const{unitSelector:t,uniformChartScalingToggle:e}=this.visibleElements;return Fe("div",{class:SE.popoverContent},t?this._renderUnitSelector():null,e?this._renderUniformChartScalingToggle():null)}_renderUnitSelector(){const{messages:t}=this;return Fe(_h,{key:"unit-selector-label",options:this.unitOptions,selectLabel:t?.unitSelectLabel??"",value:this.unit,onChange:this.onUnitChange})}_renderUniformChartScalingToggle(){const{messages:t}=this,e=this.uniformChartScaling,i=t?.[e?"uniformChartScalingDisable":"uniformChartScalingEnable"]??"";return Fe("calcite-label",{class:SE.uniformChartScalingLabel,key:"uniform-chart-scaling-label",layout:"inline"},Fe("calcite-checkbox",{checked:e,class:SE.uniformChartScalingCheckbox,title:i,onCalciteCheckboxChange:this._onUniformChartScalingChange}),t?.uniformChartScalingLabel)}};l([p()],Ma.prototype,"messages",void 0),l([p()],Ma.prototype,"onUniformChartScalingChange",void 0),l([p()],Ma.prototype,"onUnitChange",void 0),l([p()],Ma.prototype,"uniformChartScaling",void 0),l([p()],Ma.prototype,"unit",void 0),l([p()],Ma.prototype,"unitOptions",void 0),l([p()],Ma.prototype,"visibleElements",void 0),l([p()],Ma.prototype,"_popoverIsOpen",void 0),l([p()],Ma.prototype,"_referenceElement",void 0),Ma=l([M("esri.widgets.ElevationProfile.components.SettingsButton")],Ma);const I1=[{type:"select"},{type:"sketch"}],KGe={none:null,"no-valid-input":"noProfile","no-visible-profiles":"noProfile","refined-but-no-chart-data":"noProfile","too-complex":"tooComplex","unknown-error":"unknown","invalid-geometry":"invalidGeometry","invalid-elevation-info":"invalidElevationInfo"};let Ci=class extends pc{constructor(t,e){super(t,e),this.viewModel=null,this.visibleElements=new Fde,this.messages=null,this.messagesCommon=null,this.messagesUnits=null,this._chartContainer=null,this._chart=null,this._chartInitTask=null,this._chartIsRefined=!1,this._zoomOutButtonVisible=!1,this._getChartUpdateParamsMemoized=qa((i,r,n,s)=>({chart:i,data:r,stationary:n,messages:s})),this._onZoomOutButtonClick=()=>{this._chart?.zoomOut()},this._onClearButtonClick=()=>{this.viewModel.clear()},t?.viewModel||(this._defaultViewModel=new zde({view:t?.view}),this.viewModel=this._defaultViewModel)}loadDependencies(){return xf({action:()=>H(()=>import("./index-CpeseYgV.js"),__vite__mapDeps([337,277,278,279])),button:()=>H(()=>import("./index-DH8GEXan.js"),__vite__mapDeps([276,277,278,279,280])),loader:()=>H(()=>import("./index-CrVFJeUo.js"),__vite__mapDeps([277,278]))})}postInitialize(){this.addHandles([be(()=>({container:this._chartContainer}),({container:t})=>{this._destroyChart(),t!=null&&this._initializeChart(t)},Zr),be(()=>this._chartUpdateParams,()=>this._updateChart(this._chartUpdateParams),Zr)])}destroy(){this._destroyChart(),this._defaultViewModel!=null&&this.viewModel!==this._defaultViewModel&&this._defaultViewModel.destroy()}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get input(){return this.viewModel.input}set input(t){this.viewModel.input=t}get profiles(){return this.viewModel.profiles}set profiles(t){this.viewModel.profiles=t}get unitOptions(){return this.viewModel.unitOptions}set unitOptions(t){this.viewModel.unitOptions=t}get unit(){return this.viewModel.unit}set unit(t){this.viewModel.unit=t}get icon(){return"altitude"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get visible(){return this.viewModel.visible}set visible(t){this.viewModel.visible=t}get test(){return{chart:this._chart}}get _selectButtonVisible(){return this.visibleElements.selectButton===!0&&this.viewModel.selectAvailable}get _chartUpdateParams(){const t=this.view;return this._getChartUpdateParamsMemoized(this._chart,this.viewModel.chartData,t==null||t.stationary,this._chartMessages)}get _chartMessages(){return{...this.messagesUnits,...this.messages}}get _profilesArray(){return this.profiles.toArray()}render(){const{viewModel:t,visible:e}=this;return Fe("div",{"aria-label":this.messages.widgetLabel,class:this.classes({[Ar.base]:e,[Ho.widget]:e,[Ho.panel]:e,[Ho.widgetDisabled]:e&&t.state==="disabled",[Ar.refined]:t.progress===1}),key:this},Fe("div",{bind:this,key:"content-wrapper"},e?this._renderContentForState():null))}_renderContentForState(){switch(this.viewModel.state){case"ready":case"disabled":return this._renderContentForReadyState();case"selecting":return this._renderContentForSelectingState();case"creating":return this._renderContentForCreatingState();case"selected":return this._renderContentForSelectedState();case"created":return this._renderContentForCreatedState()}}_renderContentForReadyState(){const{messages:t,visibleElements:e,_selectButtonVisible:i}=this,{sketchButton:r}=e;let n;return n=r&&i?t.readyPrompt:r?t.readyPromptCreateOnly:i?t.readyPromptSelectOnly:t.errors?.noProfile,this._renderContent({prompt:n,chart:!1,actions:I1})}_renderContentForSelectingState(){const{view:t}=this;if(t==null)return null;const e=this.messages[`selectingPrompt-${t.type}`];return this._renderContent({prompt:e,chart:!1,actions:[{type:"select-cancel"}]})}_renderContentForCreatingState(){const{view:t,viewModel:e}=this;if(t==null)return null;const i=e.hasVertices?[{type:"sketch-cancel"},{type:"sketch-done",disabled:!e.tool.interaction.canStopCreating}]:[{type:"select"},{type:"sketch",disabled:!0}];if(e.errorState==="no-valid-input"){const n=this.messages[`creatingPrompt-${t.type}`];return this._renderContent({chart:!1,actions:i,prompt:n})}const r=this._getErrorMessage();return r?this._renderContent({chart:!1,actions:i,prompt:r}):this._renderContent({chart:!0,actions:i})}_renderContentForSelectedState(){const t=this._getErrorMessage();return t?this._renderContent({chart:!1,actions:I1,prompt:t}):this._renderContent({chart:!0,actions:I1})}_renderContentForCreatedState(){const t=this._getErrorMessage();return t?this._renderContent({chart:!1,actions:I1,prompt:t}):this._renderContent({chart:!0,actions:I1})}_getErrorMessage(){const t=KGe[this.viewModel.errorState];return t?this.messages?.errors?.[t]:null}_renderContent(t){const e=t.prompt!=null?this._renderPrompt(t.prompt):t.chart&&this._renderChart(),{viewModel:i}=this,r=i.input!=null;return Fe(Q5,null,Fe("header",{class:Ar.header,key:"header"},this._zoomOutButtonVisible?this._renderZoomOutButton():null,this.visibleElements.clearButton&&r?this._renderClearButton():null,this.visibleElements.settingsButton?Fe(Ma,{messages:this.messages,uniformChartScaling:i.uniformChartScaling,unit:i.unit,unitOptions:i.unitOptions,visibleElements:this.visibleElements,onUniformChartScalingChange:n=>i.uniformChartScaling=n,onUnitChange:n=>i.unit=n}):null),Fe("div",{class:Ar.mainContainer,key:"main-container"},e),this.visibleElements.legend?Fe(Um,{effectiveUnits:i.effectiveUnits,messages:this.messages,profiles:this._profilesArray}):null,this._renderActions(t))}_renderZoomOutButton(){const t=this.messages.zoomOut;return Fe("calcite-action",{appearance:"transparent",class:Ar.zoomOutButton,"data-testid":"zoom-out-button",icon:"magnifying-glass-minus",key:"zoom-out",onclick:this._onZoomOutButtonClick,scale:"s",text:t,title:t})}_renderClearButton(){const t=this.messages.clearProfile;return Fe("calcite-action",{appearance:"transparent",class:Ar.clearButton,"data-testid":"clear-button",icon:"trash",key:"clear-profile",onclick:this._onClearButtonClick,scale:"s",text:t,title:t})}_renderPrompt(t){return[Fe("div",{bind:this,class:Ar.promptContainer,key:"prompt-container"},Fe("p",null,t))]}_renderChart(){if(!this.visibleElements.chart)return Fe("div",{class:Ar.chartContainer,key:"empty-chart-container"});const{chartData:t,progress:e}=this.viewModel,i=this._chartIsRefined||this._canRenderChart(),r=t!=null&&e<1;return i?Fe(Q5,null,this._renderSpinner({size:i?"small":"large",visible:r}),Fe("div",{afterCreate:this._onChartContainerUpdate,afterRemoved:this._onChartContainerRemoved,afterUpdate:this._onChartContainerUpdate,bind:this,class:Ar.chartContainer,key:"chart-container"})):Fe(Q5,null,this._renderSpinner({size:"large",visible:r}),Fe("div",{class:Ar.chartContainer,key:"chart-container-empty"}))}_renderSpinner(t){const e=t.size==="small",i=t.visible??!0;return Fe("calcite-loader",{class:this.classes(Ar.chartSpinner,e&&Ar.chartSpinnerSmall,i&&Ar.chartSpinnerVisible),"data-testid":"chart-spinner",inline:e,key:"spinner",label:"",scale:"s"})}_canRenderChart(){const t=this.viewModel.chartData;if(t==null)return!1;if(!this.viewModel.inputIsSketched)return t.refined;let e=0;for(const{samples:i}of t.lines)e+=i!=null?i.length:0;return t.refined||e<=Xl().largeChartSamples}_renderActions({actions:t}){const e=t.map(i=>{switch(i.type){case"sketch":return this.visibleElements.sketchButton&&this._renderAction({action:i,className:Ar.sketchButton,label:this.messages.sketchButtonLabel,onClick:this._onSketchButtonClick,primary:!0});case"sketch-cancel":return this.visibleElements.sketchButton&&this._renderAction({action:i,onClick:this._onCancelButtonClick,className:Ar.sketchCancelButton,label:this.messagesCommon.cancel,primary:!1});case"sketch-done":return this.visibleElements.sketchButton&&this._renderAction({action:i,onClick:this._onDoneButtonClick,className:Ar.sketchDoneButton,label:this.messagesCommon.done,primary:!0});case"select":return this._selectButtonVisible&&this._renderAction({action:i,onClick:this._onSelectButtonClick,className:Ar.selectButton,label:this.messages.selectButtonLabel,primary:!1});case"select-cancel":return this._selectButtonVisible&&this._renderAction({action:i,onClick:this._onCancelButtonClick,className:Ar.selectCancelButton,label:this.messagesCommon.cancel,primary:!1})}}).filter(Boolean);return e.length?Fe("footer",{class:Ar.footer,key:"footer"},e):null}_renderAction({action:t,className:e,label:i,onClick:r,primary:n}){return Fe("calcite-button",{appearance:n?"solid":"outline-fill",bind:this,class:this.classes(Ar.actionButton,e),disabled:t.disabled,key:`action-${t.type}`,onclick:r},i)}_onSketchButtonClick(){this.viewModel.start({mode:"sketch"})}_onSelectButtonClick(){this.viewModel.start({mode:"select"})}_onCancelButtonClick(){this.viewModel.cancel()}_onDoneButtonClick(){this.viewModel.stop()}_updateChart(t){const{data:e,chart:i,messages:r,stationary:n}=t;i!=null&&r!=null&&n&&this._canRenderChart()&&(i.update(t),this._chartIsRefined=e!=null&&e.refined)}_onChartContainerUpdate(t){this._chartContainer=t}_onChartContainerRemoved(t){this._chartContainer===t&&(this._chartContainer=null)}_initializeChart(t){Cn(this._chartInitTask),this._chartInitTask=dc(async e=>{const{createChart:i}=await H(()=>import("./chartUtils-pQ8GMlqC.js"),__vite__mapDeps([348,349,350,351,352,353,354,355,356,357]));ft(e);const r=await i({container:t,abortOptions:{signal:e},onRangeChange:(n,s)=>{this._zoomOutButtonVisible=n!==1||s!==1},onCursorPositionChange:n=>{this.viewModel.hoveredChartPosition=n}});if(e.aborted)throw at(r),xt();this._chart=r,this._updateChart(this._chartUpdateParams)})}_destroyChart(){this._chartInitTask=Cn(this._chartInitTask),this._chart=at(this._chart),this._chartIsRefined=!1}};l([p({type:zde})],Ci.prototype,"viewModel",void 0),l([p()],Ci.prototype,"view",null),l([p()],Ci.prototype,"input",null),l([p()],Ci.prototype,"profiles",null),l([p()],Ci.prototype,"unitOptions",null),l([p()],Ci.prototype,"unit",null),l([p({type:Fde,nonNullable:!0})],Ci.prototype,"visibleElements",void 0),l([p()],Ci.prototype,"icon",null),l([p()],Ci.prototype,"label",null),l([p()],Ci.prototype,"visible",null),l([p(),tc("esri/widgets/ElevationProfile/t9n/ElevationProfile")],Ci.prototype,"messages",void 0),l([p(),tc("esri/t9n/common")],Ci.prototype,"messagesCommon",void 0),l([p(),tc("esri/core/t9n/Units")],Ci.prototype,"messagesUnits",void 0),l([p()],Ci.prototype,"_chartContainer",void 0),l([p()],Ci.prototype,"_chart",void 0),l([p()],Ci.prototype,"_chartInitTask",void 0),l([p()],Ci.prototype,"_chartIsRefined",void 0),l([p()],Ci.prototype,"_zoomOutButtonVisible",void 0),l([p()],Ci.prototype,"_selectButtonVisible",null),l([p()],Ci.prototype,"_chartUpdateParams",null),l([p()],Ci.prototype,"_chartMessages",null),l([p()],Ci.prototype,"_profilesArray",null),Ci=l([M("esri.widgets.ElevationProfile")],Ci);const eBe=Ci;let tBe=class extends xI{#e;constructor(e){super(e),this.setProvisionalExports(void 0)}hostConnected(){this.component.manager.loadedCalled&&wE(this.component)}hostLoad(){this.component.manager.destroyed}hostLoaded(){const{el:e}=this.component,i=e.shadowRoot?.firstElementChild??e.firstElementChild??void 0;e.childElem??=i,this.#e=Pn(()=>this.component.view!=null,()=>{this.component.arcgisReady.emit()},{once:!0,initial:!0,sync:!0}),e.isConnected&&wE(this.component)}hostDisconnected(){typeof this.component.el.childElem=="object"&&this.component.view?.ui?.remove(this.component.el.childElem),this.#e?.remove()}hostUpdate(e){e.has("position")&&this.component.el.childElem!=null&&typeof this.component.position=="string"&&wE(this.component),e.has("referenceElement")&&wE(this.component)}};const iBe=(t,e)=>i=>nBe(i,t);class rBe extends que{#e=new Map;#t;#i;constructor(e,i){super(e,i),new tBe(e);const r=this,n=r.instance;let s=n.viewModel,o=n.visibleElements;const u=new Proxy(this.exports,{get(d,h,m){return h==="viewModel"?s:h==="visibleElements"?o:Reflect.get(d,h,m)}});if(r.#i=n,r.instance=u,r.exports=u,s){const d={component:e,get exports(){return r.instance.viewModel}};C8e(r).set("viewModel","viewModel"),e.addController(d),s=Gue(e,new WeakRef(d),lfe(e)-1,s,r.#e)}r.instance.visibleElements&&(o=r.#o(n))}hostConnected(){this.instance=this.#i,super.hostConnected()}hostLoad(){this.#t=be(()=>this.component.el.view,e=>{const i=this.instance;!("view"in i)&&typeof i.viewModel=="object"?i.viewModel.view=e:i.view=e,!("map"in i)&&typeof i.viewModel=="object"?i.viewModel.map=e?.map:i.map=e?.map},{sync:!0,initial:!0})}hostUpdate(e){e.has("closed")&&(this.instance.visible=!this.component.closed)}hostLoaded(){const{el:e}=this.component;e.childElem??=document.createElement("div"),this.instance.container=e.childElem,(this.component.el.shadowRoot??this.component.el).appendChild(this.instance.container),this.component.closed!==void 0&&this.onLifecycle(()=>be(()=>this.instance.visible,i=>this.component.closed=!i,{initial:!0}))}#o(e){return new Proxy(e.visibleElements,{get:(i,r)=>{if(typeof r=="symbol"||r in Promise.prototype)return i[r];const n=[r],s=this.#a(n);return gz(this.component,o=>{const u=o;this.component[u]=!1;let d=e.visibleElements??{},h;for(const v of n.slice(0,-1))if(typeof d[v]=="object"&&d[v]!==null)d=d[v];else{h=!!d[v];break}h===void 0&&(h=!!(d[n.slice(-1)[0]]??!0));const m=u.startsWith("hide")||u.startsWith("show")?u.startsWith("hide"):h;this.onUpdate(v=>{if(v.has(u)){const b=this.component[u];this.#l(n,b,m)}})},s)}})}#a(e){const i=new Proxy({},{get:(r,n)=>{const s=Reflect.get(r,n);return typeof n=="symbol"||n in Promise.prototype?s:(e.push(n),i)}});return i}#l(e,i,r){let n=this.instance.visibleElements??{};for(const o of e.slice(0,-1))(typeof n[o]!="object"||n[o]===null)&&(n[o]={}),n=n[o];const s=!!(r?!i:i);n[e.at(-1)]=s}hostDestroy(){this.#t?.remove(),super.hostDestroy()}}const nBe=Tz(rBe);const sBe=bf`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-hidden{display:none!important}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}.esri-widget--panel{min-width:300px;min-height:32px;padding:var(--esri-widget-padding);transition:max-height .25s ease-in-out;overflow-y:auto}:host{display:flex;width:550px}.esri-elevation-profile{--popover-padding: 12px 15px;--chart-height: 180px;--calcite-label-margin-bottom: 0;--actions-spacing-h: 7px;--actions-spacing-v: 6px;isolation:isolate;padding:var(--esri-widget-padding);position:relative;container-type:inline-size}.esri-widget--panel{width:100%}.esri-elevation-profile__header{flex-direction:row;justify-content:flex-end;align-items:center;display:flex}.esri-elevation-profile__footer{flex-wrap:wrap;justify-content:flex-end;align-items:center;margin-top:var(--calcite-spacing-md);display:flex}.esri-elevation-profile__footer calcite-button{min-height:var(--calcite-spacing-xxxl)}.esri-elevation-profile__action-button{width:auto;margin-inline-start:var(--actions-spacing-h)}.esri-elevation-profile__main-container{width:100%;height:var(--chart-height);flex-flow:column;display:flex;position:relative}.esri-elevation-profile__chart-container{width:100%;height:100%;position:relative}.esri-elevation-profile__prompt-container{box-sizing:border-box;text-align:center;justify-content:center;align-items:center;height:100%;margin-bottom:0;padding:var(--popover-padding);display:flex}.esri-elevation-profile__prompt-container>p{width:100%;margin:0}.esri-elevation-profile__chart-spinner{transition:opacity .15s ease-in-out;transition-delay:0;opacity:0;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.esri-elevation-profile__chart-spinner--visible{opacity:1;transition-delay:50ms}.esri-elevation-profile__chart-spinner--small{inset-inline-start:0;top:-22px;left:unset;color:var(--calcite-color-brand);transform:none}@container (width<=400px){.esri-elevation-profile .esri-component.esri-widget--panel{height:auto}.esri-elevation-profile .esri-elevation-profile__footer{flex-direction:column}.esri-elevation-profile .esri-elevation-profile__action-button{align-self:stretch;margin-inline-start:0}.esri-elevation-profile .esri-elevation-profile__action-button:not(:last-of-type){margin-bottom:var(--actions-spacing-v)}}.esri-elevation-profile-settings calcite-popover[calcite-hydrated-hidden]{inset-block-start:-999999px;inset-inline-start:-999999px}.esri-elevation-profile-settings__popover-content{padding:var(--popover-padding);color:var(--calcite-color-text-1);flex-direction:column;gap:var(--calcite-spacing-md);min-width:180px;font-size:var(--calcite-font-size-sm);display:flex}.esri-elevation-profile-legend{margin-top:6px}.esri-elevation-profile-legend-item{background:var(--calcite-color-foreground-3);position:relative}.esri-elevation-profile-legend-item:not(:last-of-type){margin-bottom:2px}.esri-elevation-profile-legend-item--disabled{filter:grayscale();opacity:.4}.esri-elevation-profile-legend-item__color-indicator{inset-inline-start:0;width:3px;height:100%;position:absolute;top:0}.esri-elevation-profile-legend-item__header{flex-direction:row;justify-content:flex-start;align-items:center;display:flex}.esri-elevation-profile-legend-item__content{padding:0 15px 12px;display:block}.esri-elevation-profile-legend-item__collapse-toggle{flex-shrink:0;width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl)}.esri-elevation-profile-legend-item__label{flex-grow:1;flex-shrink:1;min-width:0;padding-inline-start:15px}.esri-elevation-profile-statistics{--max-width: 1px;grid-template-columns:repeat(auto-fit,minmax(var(--max-width),1fr));contain:layout paint style;gap:2px 22px;width:100%;display:grid}.esri-elevation-profile-statistics__statistic{text-align:start;white-space:nowrap;width:max-content;display:block}.esri-elevation-profile-statistics__statistic__label{font-size:var(--calcite-font-size-xs);font-weight:var(--calcite-font-weight-regular)}.esri-elevation-profile-statistics__statistic__value{margin-top:-.15em;font-size:var(--calcite-font-size-xs);font-weight:var(--calcite-font-weight-semibold)}.esri-elevation-profile-statistics__slope-value{align-items:center;display:flex}.esri-elevation-profile-statistics__slope-value calcite-icon{width:var(--calcite-spacing-xl);height:var(--calcite-spacing-xl)}.esri-view-height-xsmall .esri-elevation-profile{--chart-height: 68px}.esri-elevation-profile--portrait .esri-elevation-profile-statistics{gap:6px 22px;margin-bottom:var(--calcite-spacing-md)}.esri-elevation-profile--portrait .esri-elevation-profile-statistics__statistic__value{margin-top:var(--calcite-spacing-base)}`,oBe=iBe(eBe),bI=class bI extends sf{constructor(){super(...arguments),this.widget=oBe(this),this.viewModel=this.widget.viewModel,this.view=this.widget.view,this.autoDestroyDisabled=!1,this.effectiveUnits=this.viewModel.effectiveUnits,this.hideChart=this.widget.visibleElements.chart,this.hideClearButton=this.widget.visibleElements.clearButton,this.hideLegend=this.widget.visibleElements.legend,this.hideSelectButton=this.widget.visibleElements.selectButton,this.hideSettingsButton=this.widget.visibleElements.settingsButton,this.hideSketchButton=this.widget.visibleElements.sketchButton,this.hideUniformChartScalingToggle=this.widget.visibleElements.uniformChartScalingToggle,this.hideUnitSelector=this.widget.visibleElements.unitSelector,this.highlightEnabled=this.viewModel.highlightEnabled,this.hoveredChartPosition=this.viewModel.hoveredChartPosition,this.icon=this.widget.icon,this.input=this.widget.input,this.label=this.widget.label,this.profiles=this.widget.profiles,this.progress=this.viewModel.progress,this.state=this.viewModel.state,this.uniformChartScaling=this.viewModel.uniformChartScaling,this.unit=this.widget.unit,this.unitOptions=this.widget.unitOptions,this.arcgisPropertyChange=Iye()("input","effectiveUnits","progress","state"),this.arcgisReady=to()}async destroy(){await this.manager.destroy()}async start(){this.widget.viewModel.start()}async stop(){this.widget.viewModel.stop()}};bI.properties={view:0,autoDestroyDisabled:5,effectiveUnits:0,hideChart:5,hideClearButton:5,hideLegend:5,hideSelectButton:5,hideSettingsButton:5,hideSketchButton:5,hideUniformChartScalingToggle:5,hideUnitSelector:5,highlightEnabled:5,hoveredChartPosition:9,icon:1,input:0,label:1,position:1,profiles:0,progress:8,referenceElement:1,state:3,uniformChartScaling:5,unit:1,unitOptions:0},bI.styles=sBe;let oz=bI;mX("arcgis-elevation-profile",oz);function aBe(){return oy.jsx("arcgis-map",{basemap:"dark-gray-vector",ground:"world-elevation",children:oy.jsx("arcgis-elevation-profile",{slot:"bottom-right",unit:"millimeters"})})}function lBe(){return oy.jsx(oy.Fragment,{children:oy.jsx(aBe,{})})}sfe.createRoot(document.getElementById("root")).render(oy.jsx(Xhe.StrictMode,{children:oy.jsx(lBe,{})}));const Fat=Object.freeze(Object.defineProperty({__proto__:null,execute:eO,isLoaded:H8,load:W8,get supportsCurves(){return B8}},Symbol.toStringTag,{value:"Module"}));export{M as $,li as A,Mh as B,we as C,QDe as D,qF as E,UF as F,htt as G,uk as H,MQ as I,DWe as J,B as K,sf as L,de as M,be as N,GJe as O,Ee as P,Or as Q,s3 as R,M0 as S,sbe as T,Z4 as U,IZ as V,kZ as W,l as X,p as Y,zue as Z,H as _,Mz as a,Ie as a$,bw as a0,Xe as a1,pe as a2,coe as a3,bOe as a4,wOe as a5,$t as a6,Ro as a7,zJ as a8,KFe as a9,is as aA,Dme as aB,yQ as aC,RBe as aD,FW as aE,im as aF,rm as aG,WQ as aH,JQ as aI,YQ as aJ,q as aK,JBe as aL,BBe as aM,THe as aN,Met as aO,mge as aP,jet as aQ,Prt as aR,Lrt as aS,Nrt as aT,z as aU,krt as aV,XA as aW,nrt as aX,urt as aY,drt as aZ,Lk as a_,yE as aa,to as ab,pye as ac,fQ as ad,dme as ae,sT as af,nq as ag,HK as ah,p6 as ai,nwe as aj,U2 as ak,Sv as al,my as am,d5e as an,pKe as ao,et as ap,fKe as aq,ut as ar,Yr as as,jw as at,Rq as au,ie as av,Pn as aw,at as ax,Ti as ay,fe as az,LQ as b,XZe as b$,hn as b0,XBe as b1,HQ as b2,lte as b3,HKe as b4,A5e as b5,cte as b6,V0 as b7,dte as b8,ute as b9,iy as bA,M1e as bB,gw as bC,DHe as bD,eae as bE,cMe as bF,uy as bG,jo as bH,tg as bI,AHe as bJ,ft as bK,jz as bL,HJe as bM,Iy as bN,kK as bO,QFe as bP,Ws as bQ,se as bR,Kt as bS,za as bT,YFe as bU,wq as bV,fw as bW,Ve as bX,sp as bY,S$e as bZ,QZe as b_,MH as ba,mQe as bb,n_e as bc,LYe as bd,vX as be,K0 as bf,My as bg,DS as bh,gi as bi,Wa as bj,Lz as bk,ao as bl,xt as bm,vw as bn,Kn as bo,Fet as bp,aw as bq,Toe as br,nX as bs,es as bt,AS as bu,Yo as bv,zT as bw,EZe as bx,uoe as by,io as bz,Qme as c,Le as c$,Fy as c0,BJe as c1,kAe as c2,nJe as c3,rJe as c4,hf as c5,PAe as c6,LEe as c7,AAe as c8,ip as c9,EF as cA,mYe as cB,hk as cC,QIe as cD,Re as cE,mxe as cF,Be as cG,Ae as cH,oc as cI,kw as cJ,yl as cK,XIe as cL,qt as cM,cr as cN,Z3e as cO,oge as cP,mWe as cQ,$w as cR,hi as cS,Kr as cT,je as cU,bv as cV,Hi as cW,QK as cX,gM as cY,eM as cZ,Xbe as c_,zne as ca,Vy as cb,hrt as cc,mrt as cd,frt as ce,e6e as cf,Kze as cg,cn as ch,Me as ci,Bze as cj,Gd as ck,Gze as cl,KZe as cm,iJe as cn,tJe as co,eJe as cp,jne as cq,bAe as cr,wAe as cs,pf as ct,Br as cu,Oe as cv,lk as cw,ok as cx,Jh as cy,Wo as cz,EQ as d,F4e as d$,nae as d0,d4 as d1,V5e as d2,qR as d3,pt as d4,St as d5,_x as d6,oL as d7,AZe as d8,QYe as d9,qJe as dA,ZJe as dB,WJe as dC,sc as dD,Dl as dE,ftt as dF,nx as dG,YP as dH,eg as dI,RI as dJ,Cje as dK,XNe as dL,Htt as dM,oA as dN,kz as dO,zz as dP,ur as dQ,XJe as dR,jit as dS,Ot as dT,qje as dU,Nk as dV,T$e as dW,Qo as dX,qWe as dY,kWe as dZ,z4e as d_,gQe as da,Zrt as db,Dw as dc,Ql as dd,jie as de,_e as df,Q2 as dg,Vtt as dh,Zr as di,Ll as dj,Gt as dk,Fr as dl,xX as dm,QP as dn,g5e as dp,GQ as dq,Jz as dr,fHe as ds,dc as dt,Rn as du,Yd as dv,hHe as dw,HHe as dx,WHe as dy,Jn as dz,_S as e,Grt as e$,V4e as e0,Y as e1,Zxe as e2,Ms as e3,mn as e4,On as e5,Nce as e6,BMe as e7,hy as e8,r3e as e9,Tbe as eA,AWe as eB,JDe as eC,CFe as eD,vN as eE,QQ as eF,Bw as eG,AI as eH,II as eI,lWe as eJ,sI as eK,vst as eL,Lx as eM,Wj as eN,WUe as eO,Hw as eP,jUe as eQ,Ice as eR,Mx as eS,ep as eT,Xo as eU,jst as eV,ci as eW,dr as eX,lwe as eY,Brt as eZ,KB as e_,lp as ea,Wtt as eb,kOe as ec,zEe as ed,ky as ee,Dit as ef,bYe as eg,Jy as eh,uf as ei,Sr as ej,M8 as ek,iK as el,r9e as em,GMe as en,Yxe as eo,Qxe as ep,jS as eq,yn as er,ns as es,UCe as et,UFe as eu,pnt as ev,cs as ew,Hxe as ex,sue as ey,FEe as ez,NBe as f,gX as f$,KTe as f0,hte as f1,fQe as f2,oZe as f3,so as f4,lHe as f5,Zre as f6,nee as f7,TF as f8,lAe as f9,mi as fA,qw as fB,aUe as fC,Ya as fD,qy as fE,kst as fF,Cst as fG,rne as fH,ei as fI,jt as fJ,x3 as fK,vt as fL,Sce as fM,_Ge as fN,ec as fO,Dst as fP,bce as fQ,uUe as fR,dat as fS,vce as fT,Nst as fU,Uoe as fV,Yz as fW,Lst as fX,bst as fY,Lw as fZ,zx as f_,vYe as fa,Iw as fb,pF as fc,_Ae as fd,_Ye as fe,Fo as ff,wYe as fg,Lne as fh,hWe as fi,qI as fj,C3e as fk,Jo as fl,Qr as fm,v0e as fn,iWe as fo,TK as fp,Yu as fq,o6 as fr,ff as fs,Is as ft,RWe as fu,H1e as fv,I6e as fw,Ei as fx,Pst as fy,ht as fz,kt as g,Bce as g$,Fze as g0,kHe as g1,Wy as g2,zr as g3,$ot as g4,Tt as g5,Eee as g6,kn as g7,Ja as g8,uI as g9,Yie as gA,OF as gB,Kce as gC,Ftt as gD,Cot as gE,kqe as gF,I3 as gG,Ko as gH,VCe as gI,FWe as gJ,zWe as gK,Gqe as gL,rI as gM,Ez as gN,PBe as gO,ABe as gP,Ume as gQ,Qye as gR,Yye as gS,xz as gT,nQe as gU,bQe as gV,of as gW,Wt as gX,$ge as gY,Du as gZ,_t as g_,wr as ga,Bi as gb,kG as gc,Zb as gd,eZe as ge,XR as gf,gZe as gg,WI as gh,A6 as gi,I6 as gj,yZe as gk,TZe as gl,Yk as gm,Fqe as gn,rt as go,aK as gp,Xk as gq,DI as gr,lst as gs,S3 as gt,Uw as gu,Ox as gv,T_e as gw,rOe as gx,Xh as gy,iat as gz,IBe as h,oYe as h$,rLe as h0,tFe as h1,oFe as h2,Nue as h3,Ek as h4,ALe as h5,iLe as h6,ost as h7,rst as h8,sst as h9,Cu as hA,ztt as hB,uA as hC,lee as hD,ak as hE,OFe as hF,wA as hG,tt as hH,In as hI,IS as hJ,Ct as hK,Pit as hL,TWe as hM,CWe as hN,xZ as hO,xne as hP,nYe as hQ,Qit as hR,bx as hS,Wr as hT,sYe as hU,Kit as hV,f3 as hW,rYe as hX,trt as hY,cc as hZ,Xd as h_,xi as ha,XLe as hb,e4e as hc,uc as hd,aee as he,joe as hf,zoe as hg,fn as hh,ys as hi,hle as hj,hFe as hk,i4e as hl,KLe as hm,lr as hn,gs as ho,Ks as hp,Zy as hq,Zo as hr,FJe as hs,fMe as ht,MS as hu,qd as hv,Oy as hw,no as hx,Ts as hy,yFe as hz,Sq as i,mw as i$,Wh as i0,TP as i1,Mqe as i2,Aqe as i3,yf as i4,bde as i5,Ww as i6,$S as i7,ist as i8,qa as i9,y1e as iA,jZe as iB,E1e as iC,kD as iD,rr as iE,jKe as iF,iM as iG,nN as iH,E0 as iI,GI as iJ,IZe as iK,Yy as iL,pQe as iM,eQe as iN,QWe as iO,pD as iP,Rse as iQ,RQe as iR,Vo as iS,yJe as iT,Jxe as iU,y5 as iV,Gtt as iW,s_e as iX,tG as iY,FLe as iZ,xw as i_,Pot as ia,Gge as ib,F7e as ic,XP as id,xBe as ie,MBe as ig,Crt as ih,Wet as ii,FPe as ij,uo as ik,Xl as il,Vde as im,vf as io,Zi as ip,HVe as iq,xxe as ir,hVe as is,zY as it,rg as iu,AOe as iv,tce as iw,OZe as ix,kZe as iy,MZe as iz,ar as j,Not as j$,jr as j0,zo as j1,Awe as j2,hwe as j3,yee as j4,e8e as j5,Kl as j6,wce as j7,BYe as j8,iz as j9,QE as jA,eHe as jB,gy as jC,Ra as jD,fi as jE,Tce as jF,cat as jG,pat as jH,KUe as jI,mse as jJ,XYe as jK,dF as jL,fbe as jM,uje as jN,xit as jO,vit as jP,nS as jQ,Rd as jR,lje as jS,$it as jT,Tit as jU,_s as jV,k6e as jW,$_e as jX,Xce as jY,vY as jZ,iH as j_,GYe as ja,pIe as jb,nte as jc,Foe as jd,HWe as je,tu as jf,J_e as jg,fWe as jh,V_e as ji,MD as jj,iee as jk,ree as jl,R9e as jm,Ji as jn,k0e as jo,OMe as jp,Zd as jq,fse as jr,RCe as js,rw as jt,mce as ju,lw as jv,I9e as jw,tee as jx,Zie as jy,GBe as jz,D2 as k,F0 as k$,jre as k0,bY as k1,zy as k2,Rqe as k3,Vot as k4,Lqe as k5,Hy as k6,Rot as k7,Bb as k8,Wme as k9,Eet as kA,UA as kB,$et as kC,lS as kD,Tet as kE,GM as kF,met as kG,fXe as kH,Cee as kI,RS as kJ,DD as kK,Nee as kL,Dee as kM,kj as kN,cWe as kO,YKe as kP,BB as kQ,Ew as kR,KHe as kS,ADe as kT,Cn as kU,t6 as kV,PK as kW,JWe as kX,Nr as kY,Ree as kZ,q_e as k_,$Be as ka,k$e as kb,tWe as kc,Fje as kd,Ebe as ke,u6 as kf,Vje as kg,rp as kh,E3e as ki,$3e as kj,S3e as kk,wM as kl,As as km,rre as kn,O1e as ko,mbe as kp,nc as kq,Zl as kr,Si as ks,irt as kt,WS as ku,JNe as kv,xs as kw,R5e as kx,bet as ky,rae as kz,rge as l,kKe as l$,GHe as l0,boe as l1,T6 as l2,I as l3,Mwe as l4,UI as l5,Ku as l6,yOe as l7,IF as l8,S9e as l9,Aa as lA,qme as lB,eye as lC,Lme as lD,BHe as lE,Ut as lF,YWe as lG,aZe as lH,xG as lI,Fge as lJ,Qie as lK,Lr as lL,PWe as lM,xre as lN,z0e as lO,TBe as lP,DBe as lQ,iHe as lR,rHe as lS,tHe as lT,abe as lU,sk as lV,dle as lW,y3e as lX,g3e as lY,pte as lZ,OKe as l_,u9e as la,I1e as lb,DZe as lc,Eh as ld,EHe as le,ove as lf,Wue as lg,w8 as lh,qLe as li,WYe as lj,HYe as lk,qn as ll,np as lm,Cbe as ln,Aet as lo,x6 as lp,OD as lq,S6 as lr,s1e as ls,zee as lt,Knt as lu,hit as lv,SJe as lw,Ore as lx,eat as ly,fot as lz,bf as m,Yle as m$,IKe as m0,AKe as m1,RKe as m2,CKe as m3,MKe as m4,EKe as m5,G_e as m6,eD as m7,TKe as m8,_6 as m9,Ok as mA,PJ as mB,$i as mC,K4 as mD,kk as mE,V6e as mF,kx as mG,QLe as mH,Fu as mI,Mbe as mJ,JI as mK,uHe as mL,SF as mM,KYe as mN,YYe as mO,Jue as mP,CG as mQ,Pu as mR,QS as mS,n8 as mT,n4e as mU,r4e as mV,t4e as mW,Kge as mX,NHe as mY,Lit as mZ,Nit as m_,Xwe as ma,kl as mb,Bje as mc,Cz as md,nHe as me,Rz as mf,sHe as mg,Sst as mh,Xu as mi,cy as mj,roe as mk,wx as ml,wF as mm,Cy as mn,LI as mo,sFe as mp,NLe as mq,K6e as mr,ULe as ms,vFe as mt,hH as mu,Ane as mv,RFe as mw,zje as mx,s4e as my,$Fe as mz,Nb as n,Wle as n$,Zle as n0,tCe as n1,iCe as n2,Uae as n3,Qst as n4,Noe as n5,QJe as n6,tOe as n7,Nx as n8,xot as n9,VZe as nA,UZe as nB,qZe as nC,SZe as nD,wZe as nE,mZe as nF,j_e as nG,bZe as nH,c1e as nI,qHe as nJ,PZe as nK,FZe as nL,Ki as nM,mot as nN,dy as nO,pc as nP,xf as nQ,Fe as nR,tc as nS,Q5 as nT,Ho as nU,Zm as nV,Mve as nW,bl as nX,uze as nY,zLe as nZ,mje as n_,fet as na,Jwe as nb,i_e as nc,px as nd,ZWe as ne,HTe as nf,Vz as ng,UHe as nh,VHe as ni,rMe as nj,dve as nk,AX as nl,rZe as nm,KWe as nn,Dq as no,Fd as np,PEe as nq,vat as nr,Vee as ns,Fee as nt,p1e as nu,sM as nv,rte as nw,uZe as nx,k6 as ny,_v as nz,EI as o,ede as o$,Tje as o0,yK as o1,xK as o2,gt as o3,Sw as o4,gr as o5,pi as o6,Uo as o7,ps as o8,Eje as o9,See as oA,VKe as oB,zKe as oC,FKe as oD,M5e as oE,mit as oF,yit as oG,fit as oH,Za as oI,df as oJ,Uy as oK,$ke as oL,uge as oM,l_e as oN,cce as oO,PPe as oP,UPe as oQ,yge as oR,EWe as oS,mK as oT,NI as oU,OWe as oV,ete as oW,LZe as oX,D5 as oY,lx as oZ,O6e as o_,kje as oa,zle as ob,KF as oc,ZA as od,YLe as oe,ui as of,Dje as og,hje as oh,fje as oi,gje as oj,vje as ok,Ije as ol,bje as om,wje as on,_je as oo,Sje as op,xje as oq,$je as or,ln as os,jWe as ot,sx as ou,zet as ov,zW as ow,C1e as ox,k1e as oy,VA as oz,wtt as p,hS as p$,Aw as p0,Lot as p1,Dot as p2,bWe as p3,vWe as p4,zqe as p5,ode as p6,jot as p7,Cqe as p8,wf as p9,Eit as pA,cQe as pB,dQe as pC,d8 as pD,Ha as pE,Vl as pF,Ss as pG,Sd as pH,Rh as pI,Pr as pJ,RIe as pK,aCe as pL,aHe as pM,LMe as pN,cIe as pO,kMe as pP,CMe as pQ,SKe as pR,Bl as pS,Z2 as pT,Aje as pU,lYe as pV,Lje as pW,Rit as pX,Kie as pY,Cit as pZ,nst as p_,Qd as pa,Yl as pb,M6 as pc,zot as pd,Pqe as pe,NWe as pf,zit as pg,MLe as ph,JA as pi,Yh as pj,K5e as pk,tPe as pl,iPe as pm,KX as pn,zu as po,ptt as pp,eue as pq,Gz as pr,Iv as ps,Gr as pt,rnt as pu,l0 as pv,iFe as pw,ko as px,XOe as py,LKe as pz,zb as q,B_e as q$,Qh as q0,VS as q1,mFe as q2,ZQ as q3,$We as q4,EK as q5,see as q6,nG as q7,LK as q8,TPe as q9,Bie as qA,$8 as qB,yIe as qC,W8 as qD,oat as qE,w9e as qF,XVe as qG,c9e as qH,i8 as qI,g4e as qJ,MI as qK,UBe as qL,D6 as qM,LWe as qN,uF as qO,ev as qP,cge as qQ,pN as qR,get as qS,$Pe as qT,vet as qU,yet as qV,tae as qW,VF as qX,rje as qY,bit as qZ,ws as q_,Wit as qa,Xy as qb,qu as qc,Pze as qd,yWe as qe,Cre as qf,RD as qg,qGe as qh,JQe as qi,ZQe as qj,iOe as qk,Pee as ql,dWe as qm,sF as qn,DK as qo,MWe as qp,_N as qq,nF as qr,GAe as qs,JYe as qt,ZYe as qu,n6 as qv,HMe as qw,qMe as qx,PCe as qy,UMe as qz,L as r,pn as r$,s1 as r0,JJe as r1,S5e as r2,Sne as r3,aYe as r4,mze as r5,crt as r6,oet as r7,rrt as r8,QKe as r9,aet as rA,wKe as rB,_Ke as rC,YHe as rD,ooe as rE,xoe as rF,ow as rG,Uu as rH,BI as rI,E6 as rJ,Mw as rK,noe as rL,Ex as rM,Vw as rN,Pi as rO,h4e as rP,p4e as rQ,At as rR,kh as rS,C4e as rT,Nle as rU,Rl as rV,Ed as rW,Nl as rX,h_e as rY,VJe as rZ,zF as r_,mJ as ra,ty as rb,Uh as rc,B6 as rd,IHe as re,QBe as rf,voe as rg,iit as rh,vEe as ri,pse as rj,rit as rk,Do as rl,Ad as rm,Yb as rn,ELe as ro,LLe as rp,jLe as rq,VLe as rr,W6e as rs,nFe as rt,PQe as ru,DQe as rv,NQe as rw,Fl as rx,Rrt as ry,uet as rz,sQ as s,Sk as s$,un as s0,wQe as s1,xQe as s2,vQe as s3,vx as s4,C6e as s5,ave as s6,mHe as s7,Jst as s8,_f as s9,NZe as sA,ro as sB,uVe as sC,O2 as sD,wY as sE,sqe as sF,hee as sG,fde as sH,q8 as sI,tqe as sJ,fee as sK,_8 as sL,oqe as sM,zGe as sN,sat as sO,RX as sP,tst as sQ,k8 as sR,nVe as sS,El as sT,U7e as sU,lVe as sV,gst as sW,g_e as sX,v_e as sY,vDe as sZ,Jr as s_,Est as sa,Iqe as sb,lc as sc,Oqe as sd,xde as se,Kot as sf,up as sg,Xot as sh,rat as si,nat as sj,Qk as sk,aat as sl,vee as sm,m8 as sn,N0 as so,tI as sp,Voe as sq,eOe as sr,M_e as ss,oUe as st,Px as su,ng as sv,Fot as sw,_ce as sx,A_e as sy,nM as sz,Fi as t,Ait as t$,TCe as t0,LHe as t1,goe as t2,woe as t3,DOe as t4,yXe as t5,GOe as t6,gXe as t7,zk as t8,Qoe as t9,Oat as tA,NY as tB,iO as tC,kat as tD,Pat as tE,Iat as tF,Rat as tG,Aat as tH,Cat as tI,Dat as tJ,Nat as tK,WQe as tL,UWe as tM,VWe as tN,Swe as tO,zPe as tP,lve as tQ,DPe as tR,vJe as tS,Ik as tT,qrt as tU,bKe as tV,Om as tW,mnt as tX,qtt as tY,AN as tZ,I3e as t_,ote as ta,dge as tb,eVe as tc,qQ as td,tX as te,tVe as tf,$we as tg,xwe as th,eMe as ti,sX as tj,_ke as tk,sOe as tl,soe as tm,dae as tn,oHe as to,iet as tp,ret as tq,net as tr,set as ts,qKe as tt,BKe as tu,GKe as tv,ePe as tw,twe as tx,sJe as ty,Mat as tz,LBe as u,lrt as u$,KAe as u0,gYe as u1,cYe as u2,hYe as u3,dYe as u4,fYe as u5,pYe as u6,yYe as u7,ts as u8,Net as u9,QOe as uA,yrt as uB,Drt as uC,grt as uD,Ort as uE,ja as uF,Frt as uG,tZe as uH,UKe as uI,Ert as uJ,Trt as uK,Art as uL,Irt as uM,gJ as uN,vJ as uO,bJ as uP,$rt as uQ,xrt as uR,ka as uS,XKe as uT,Lwe as uU,Nwe as uV,GWe as uW,Ove as uX,jrt as uY,zrt as uZ,vrt as u_,Iit as ua,Eq as ub,uYe as uc,r$e as ud,C_e as ue,sZe as uf,KQe as ug,AUe as uh,Gh as ui,one as uj,Tee as uk,Vie as ul,MX as um,aS as un,ZHe as uo,YMe as up,ine as uq,RUe as ur,FUe as us,Mst as ut,$1e as uu,Srt as uv,CZe as uw,P1e as ux,zZe as uy,$Qe as uz,Ue as v,wet as v$,Mrt as v0,wrt as v1,r6e as v2,brt as v3,Oj as v4,JKe as v5,i6e as v6,s6e as v7,ZKe as v8,prt as v9,age as vA,WBe as vB,HBe as vC,zie as vD,l1e as vE,pY as vF,OAe as vG,Zet as vH,Jet as vI,Lat as vJ,mk as vK,qh as vL,zAe as vM,US as vN,GS as vO,sw as vP,RAe as vQ,cHe as vR,Ale as vS,HAe as vT,WAe as vU,bF as vV,_De as vW,rUe as vX,_et as vY,xet as vZ,uWe as v_,z5e as va,WKe as vb,xKe as vc,$Ke as vd,KKe as ve,eet as vf,cet as vg,det as vh,PKe as vi,pet as vj,het as vk,E5e as vl,k5e as vm,xae as vn,jb as vo,tet as vp,y5e as vq,IWe as vr,H_e as vs,ZZe as vt,Zze as vu,nZe as vv,o2e as vw,Lb as vx,jW as vy,Ast as vz,LDe as w,d1e as w$,Let as w0,Pet as w1,Det as w2,Ret as w3,Cet as w4,Q5e as w5,cae as w6,NKe as w7,DKe as w8,Z5e as w9,Vst as wA,Ust as wB,qst as wC,Qz as wD,mXe as wE,Ist as wF,IA as wG,h8 as wH,JUe as wI,LUe as wJ,qk as wK,SBe as wL,qBe as wM,EBe as wN,hQ as wO,Sz as wP,kBe as wQ,OBe as wR,hXe as wS,Jit as wT,F_e as wU,cZe as wV,hZe as wW,xZe as wX,dZe as wY,fZe as wZ,$Ze as w_,vKe as wa,vZe as wb,Od as wc,PD as wd,lZe as we,Es as wf,fge as wg,yat as wh,HCe as wi,ZBe as wj,s3e as wk,n3e as wl,Fie as wm,kue as wn,R3e as wo,DMe as wp,RMe as wq,PMe as wr,Xke as ws,bGe as wt,zMe as wu,yUe as wv,gUe as ww,bUe as wx,wUe as wy,zst as wz,NDe as x,Xue as x$,H3 as x0,Yit as x1,Xit as x2,$I as x3,TI as x4,_z as x5,Kfe as x6,nf as x7,tme as x8,Az as x9,yQe as xA,rQe as xB,aQe as xC,sQe as xD,dHe as xE,IQe as xF,AQe as xG,KBe as xH,tQe as xI,XWe as xJ,hQe as xK,u7e as xL,lEe as xM,lCe as xN,koe as xO,JHe as xP,nE as xQ,PB as xR,NYe as xS,Il as xT,git as xU,An as xV,Ij as xW,Rst as xX,aXe as xY,xte as xZ,Rie as x_,xS as xa,zBe as xb,$z as xc,FBe as xd,VBe as xe,eEe as xf,Ld as xg,mat as xh,Ztt as xi,Iwe as xj,A6e as xk,KA as xl,E$e as xm,RZe as xn,Sx as xo,xx as xp,$x as xq,CBe as xr,Yme as xs,zke as xt,oXe as xu,Xnt as xv,wst as xw,O4e as xx,lv as xy,K4e as xz,PDe as y,dit as y$,Dqe as y0,T8 as y1,pS as y2,nUe as y3,Vk as y4,Fst as y5,xst as y6,$st as y7,hat as y8,_Je as y9,FGe as yA,uot as yB,mS as yC,oQe as yD,MMe as yE,art as yF,O0 as yG,YJe as yH,FYe as yI,AD as yJ,PUe as yK,UUe as yL,iQe as yM,Wb as yN,I8 as yO,pWe as yP,S_e as yQ,hIe as yR,Ost as yS,Gk as yT,uat as yU,wGe as yV,SQ as yW,jBe as yX,cJe as yY,pJe as yZ,Vet as y_,fIe as ya,pVe as yb,Eot as yc,Mot as yd,Tot as ye,lQe as yf,rVe as yg,est as yh,wJe as yi,bJe as yj,fat as yk,iZe as yl,Z6 as ym,Fce as yn,pHe as yo,oVe as yp,uQe as yq,Tst as yr,hce as ys,NMe as yt,R7e as yu,gat as yv,tat as yw,dIe as yx,WMe as yy,eUe as yz,Xr as z,Mit as z0,ont as z1,Fat as z2};
