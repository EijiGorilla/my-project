import{jv as i,jw as s,a6 as d,_ as o,d as r,e as p}from"./index-DWB-5FUE.js";import{A as l,c as u,l as h}from"./drawSurfaces-De02Snld.js";import"./angularMeasurementUtils-DWeS3gQa.js";let t=class extends i{constructor(e){super(e),this.defaultZ=0,this.elevationInfo=null,this.hasZ=!0,this.mode=null,this.snapToScene=null,this.type="draw-3d"}initialize(){const e=this.view,n=s(this.hasZ,this.elevationInfo);this.drawOperation=new l({view:e,manipulators:this.manipulators,geometryType:this.geometryType,drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,drawSurface:e.type==="3d"?new h(e,n):null,elevationDrawSurface:e.type==="3d"?new u(n,this.defaultZ,e):null,hasM:!1,elevationInfo:n,automaticLengthMeasurementUtils:this.automaticLengthMeasurementUtils}),this.addHandles([this.drawOperation.on("vertex-add",a=>this.onVertexAdd(a)),this.drawOperation.on("vertex-remove",a=>this.onVertexRemove(a)),this.drawOperation.on("vertex-update",a=>this.onVertexUpdate(a)),this.drawOperation.on("cursor-update",a=>this.onCursorUpdate(a)),this.drawOperation.on("complete",a=>this.onComplete(a))]),this.finishToolCreation()}destroy(){this.drawOperation=d(this.drawOperation),this._set("view",null)}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}get updating(){return this.drawOperation?.updating??!1}completeCreateOperation(){this.drawOperation.complete()}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}getVertexCoords(){return this.drawOperation.geometryIncludingUncommittedVertices}onInputEvent(e){this.drawOperation.onInputEvent(e)}canRedo(){return this.drawOperation.canRedo}canUndo(){return this.drawOperation.canUndo}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}onComplete(e){this.emit("complete",e)}onCursorUpdate(e){this.emit("cursor-update",e)}onVertexAdd(e){this.emit("vertex-add",e)}onVertexRemove(e){this.emit("vertex-remove",e)}onVertexUpdate(e){this.emit("vertex-update",e)}};o([r({constructOnly:!0,nonNullable:!0})],t.prototype,"defaultZ",void 0),o([r()],t.prototype,"drawOperation",void 0),o([r({constructOnly:!0})],t.prototype,"elevationInfo",void 0),o([r({value:!0})],t.prototype,"enabled",null),o([r({constructOnly:!0})],t.prototype,"geometryType",void 0),o([r({constructOnly:!0})],t.prototype,"automaticLengthMeasurementUtils",void 0),o([r({constructOnly:!0})],t.prototype,"hasZ",void 0),o([r({constructOnly:!0})],t.prototype,"mode",void 0),o([r()],t.prototype,"snapToScene",void 0),o([r({readOnly:!0})],t.prototype,"type",void 0),o([r({readOnly:!0})],t.prototype,"updating",null),o([r({constructOnly:!0,nonNullable:!0})],t.prototype,"view",void 0),t=o([p("esri.views.draw.LegacyDrawTool")],t);export{t as LegacyDrawTool};
